Merge pull request #6397 from SimonUnge/4842_obfuscate-some-user-data
Merge pull request #6412 from rabbitmq/illotum-inclusive-naming
rabbitmqctl(8) wording
Add inclusive aliases to ctl info keys
Merge pull request #6410 from SimonUnge/simunge/4230_use-global-longname-settings
See #4230. Restore schema config for backwards compat
See #4842. Fix broken test
See #4230. peer_discovery_consul to use global setting for long/short nodename
Support coverage when node being killed by index
Bump erlang.mk
Support code coverage
Merge pull request #6398 from illotum/fix-reply-to
fix rabbit_direct_reply_to:compute_key_and_suffix_v1 type signature
See #4842. Obfuscate impl value
Update 3.11.3 release notes
Merge pull request #6390 from rabbitmq/faster-memory_breakdown
Update 3.11.3 release notes
Aggregate memory usage on ra_server_sup_sup level
Update 3.11.3 release notes
Update 3.10.11 release notes
Update 3.9.25 release notes
Merge pull request #6383 from rabbitmq/3.10.11-update-release-notes
Update 3.10.11 release notes
Merge pull request #6381 from rabbitmq/mk-3.11.3-release-notes
3.11.3 release notes
Merge pull request #6374 from rabbitmq/rin/6369-follow-up
Remove unnecessary patch commands in bazel repos
Adjust generated .app file for ra to include seshat as a dep
Merge pull request #6369 from rabbitmq/md-ra-2.4.1-deps-3.11.3
Bump Ra to 2.4.1
Merge pull request #6363 from rabbitmq/mk-bump-credentials-obfuscation
Bump credentials_obfuscation to 3.2.0
Merge pull request #6362 from rabbitmq/mk-bump-osiris-to-1.3.3
Seshat 0.4.0
Bump Osiris to 1.3.3
Update 3.10.11 release notes
Merge pull request #6354 from rabbitmq/3.10.11-release-notes
3.10.11 release notes
Merge pull request #6350 from rabbitmq/mk-3.9.25-release-notes
3.9.25 release notes
Merge pull request #6336 from rabbitmq/bump-otp-25.0
Merge pull request #6334 from rabbitmq/bump-elixir-1.13
Merge pull request #6335 from rabbitmq/bump-elixir-1.14
Merge pull request #6337 from rabbitmq/bump-otp-25.1
Adopt otp 25.1.2
Adopt otp 25.0.4
Adopt elixir 1.14.1
Adopt elixir 1.13.4
Merge pull request #6325 from rabbitmq/gh_6317
Be more explicit with timeouts when declaring quorum queues
Merge pull request #6327 from cloudamqp/dep_thoas
Remove duplicate dep_thoas declaration
Upgrade osiris version to v1.3.2
Streams: close osiris log on unsubscribe
Make counterspec key unique in rabbit_stream_queue
Merge pull request #6316 from rabbitmq/rabbitmq-server-6289
Revert "Bazel: set RABBITMQ_PLUGINS_DIR for tests"
Squash a couple of warnings
CLI: do not fail if plugin directory does not exist
Bazel: set RABBITMQ_PLUGINS_DIR for tests
rabbitmq-run: make sure that plugin directory is created
Merge pull request #6321 from rabbitmq/rin/remove-trust_store_http-from-module-dot-bazel
Remove trust_store_http from MODULE.bazel since it's an internal dep
Merge pull request #6313 from rabbitmq/rin/split-rabbitmqctl-format-check-into-separate-test-target
Filter the rabbitmq_cli format check out on windows
Fixup format check on windows
Adopt new helpers that assert on plugin presence and state
Reduce unnecessary setup in rabbitmq_cli formatting check
Split rabbitmq_cli format check into a separate test target in bazel
CLI: continue reworking assertions on plugin state
Reset enabled plugins after each test that enables any
See Issue 6020. Add rabbitmq_stream_management plugin to test suite
See Issue 6020. Take plugin dependency into account
Merge pull request #6311 from rabbitmq/rin/fixup-repeated-rabbitmctl-test-runs
Copy rather than symlink files in rabbitmqctl_test.bzl
Merge pull request #6305 from rabbitmq/rin/more-obvious-test_helper.exs-failure
Explain that 'bazel clean' helps with this odd condition
Fail fast in the rabbitmq_cli tests if test_helper.exs is missing
Merge pull request #6292 from rabbitmq/amqp10-modified-corrections
Merge pull request #6294 from rabbitmq/mk-status-format-when-free-disk-space-cannot-be-computed
Merge pull request #6295 from rabbitmq/mk-more-reliable-set-disk-free-space-limit-tests
CLI: improve isolation of set_disk_free_limit tests
ctl status: handle cases when free disk space cannot be computed
Refine and fix AMQP 1.0 modified outcome behaviour
Merge pull request #6278 from rabbitmq/qq-info-optimise
Merge pull request #6280 from cloudamqp/catch_shovel_check
Avoid crashing shovel plugin when another node goes down
Use erpc optimisation for local rpcs
Merge pull request #6183 from rabbitmq/qq-info-optimise
Use .tar.xz extension for //:source_archive bazel target
Merge pull request #6266 from rabbitmq/rin/bazel-build-tweaks
Rework package_generic_unix & source_archive bazel macros
Use @rules_erlang//:debug_build instead of //:debug_build
Merge pull request #6250 from rabbitmq/rin/rbe-as-non-dev-dependency
Merge pull request #6244 from rabbitmq/gh_5462
Merge pull request #6259 from rabbitmq/rabbitmq-website-1508
Apply rabbitmq/rabbitmq-website#1508 at the source (man pages)
Merge pull request #6255 from minhhungit/Feature/windows-command
wrap erpc:call
Update README.md
CQ Observer CLI plugin: Shorten # messages
Correctly decrease global counters in rabbit_channel:terminate/2
Merge pull request #6248 from rabbitmq/loic-update-lqueue
Mark @rbe as non-dev dependency
Merge pull request #6231 from rabbitmq/bump-otp-25.1
Update lqueue based on OTP-25.1.2
Merge pull request #6228 from rabbitmq/amqp10-modified-outcome
Merge pull request #6240 from rabbitmq/stream-coord-log-rewords
Stream coordinator: reword some log messages
Merge pull request #6237 from rabbitmq/loic-fix-observer-cli-cq-cluster
Merge pull request #6216 from rabbitmq/stream-coordinator-mnesia-update-fix
Fix the CQ Observer CLI plugin with clusters
Wording
Reduce CT logging here
Merge pull request #6224 from cloudamqp/shovel_connection_blocked
Merge pull request #6230 from rabbitmq/lukebakken/ignore-exrc
Adopt otp 25.1.2
Ignore `.exrc` file
AMQP 1.0: Support the modified outcome
Optimise shovel pending queue handling for flow-control
Shovel: handle `connection.(un)blocked` messages from dest broker
Merge pull request #6226 from rabbitmq/rin/optional-buildbuddy-api-key-windows-workflow
Persist static configuration
Merge pull request #6202 from rabbitmq/dependabot/github_actions/main/erlef/setup-beam-1.14
Make secrets optional in Windows workflow
Merge pull request #6219 from rabbitmq/dependabot/github_actions/main/lewagon/wait-on-check-action-1.2.0
Bump lewagon/wait-on-check-action from 1.1.2 to 1.2.0
SC: fail active mnesia update actions on leader change
Merge pull request #6207 from illotum/rev-tabnabbing
Add noopener to hrefs in rabbitmq_management
Bump erlef/setup-beam from 1.13 to 1.14
Merge pull request #6199 from rabbitmq/rabbit-fifo-int-flakes
Make rabbit_fifo_int_SUITE:basics test less flaky
Merge pull request #6184 from rabbitmq/rin/global-flag-secondary-umbrella-config
Merge pull request #6191 from rabbitmq/illotum-vhost-defaults
Rename a couple of snippets
Update default virtual host limit tests
Rename a schema key
Add ability to set default vhost limits by pattern
Merge pull request #6186 from rabbitmq/rin/update-oci-workflow
Merge pull request #6182 from rabbitmq/stream-coordinator-cluster-creation-fix
Sync the approach in oci.yaml workflow across branches
Add a --test_build flag for building the broker for mixed versions
QQ: don't try to contact non-connected nodes for starts
Stream coordinator: fix member check in ensure_coordinator_started/0
Make main branch use 3.11.2 as mixed version tests
3.11.x release notes wording
Merge pull request #6168 from rabbitmq/dependabot/github_actions/main/peter-evans/create-pull-request-4.2.0
Bump peter-evans/create-pull-request from 4.1.4 to 4.2.0
Merge pull request #6162 from rabbitmq/rin/test-otp-25.0-in-actions
Add otp 25.0 to the matrix in the non-mixed tests in actions
Merge pull request #6156 from rabbitmq/use-rules_erlang-3.8.3
Merge pull request #6157 from rabbitmq/mk-update-3.9.24-release-notes
Correct a copy-and-paste artifact in 3.9.24 release notes
Adopt rules_erlang 3.8.3
Merge pull request #6151 from rabbitmq/rin/oci-workflow-fix
Adjustments to the OCI workflow to ensure the correct otp version
Merge pull request #6147 from rabbitmq/mk-3.9.24-release-notes
3.9.24 release notes
Merge pull request #6145 from rabbitmq/mk-3.11.2-release-notes
3.11.2 release notes
Merge pull request #6142 from rabbitmq/mk-3.10.10-release-notes
3.10.10 release notes
Merge pull request #6135 from rabbitmq/dependabot/github_actions/main/peter-evans/create-pull-request-4.1.4
Bump peter-evans/create-pull-request from 4.1.3 to 4.1.4
Merge pull request #6126 from rabbitmq/partially-revert-delegate-opt-3865
Merge pull request #6128 from rabbitmq/rin/use-rules_erlang-3.8.2
Partially revert delegate optimisation
Merge pull request #6127 from rabbitmq/mk-two-dist-ports
Handle a rare case with multiple dist ports
Use rules_erlang 3.8.2
Merge pull request #6116 from rabbitmq/dependabot/github_actions/main/actions/cache-3.0.11
Bump actions/cache from 3.0.10 to 3.0.11
Merge pull request #6110 from rabbitmq/cmq-credit-flow-fix
Avoid double debiting credit when sending to queue mirrors.
Merge pull request #6108 from rabbitmq/drain-mqtt
Close local MQTT connections when draining node
Merge pull request #6073 from rabbitmq/stream-coordinator-overview
Implement ra_machine:overview/1 for rabbit_stream_coordinator
Merge pull request #6100 from rabbitmq/3.10.9-release-notes
3.10.9 release notes
Merge pull request #6098 from rabbitmq/3.11.1-release-notes
3.11.1 release notes
Merge pull request #6049 from rabbitmq/lukebakken/unicode-followup
Merge pull request #6091 from rabbitmq/mk-remove-elixir-1.12-toolchain
Remove elixir 1.12 in a few other files
Drop Elixir 1.12 toolchain
Merge pull request #6082 from rabbitmq/bump-elixir-1.14
Adopt elixir 1.14.1
Merge pull request #6075 from rabbitmq/rabbit-fifo-int-basics-fixes
Make rabbit_fifo_basics_SUITE:basics less dependent on ra_event order
Merge pull request #6070 from rabbitmq/rin/drop-erlang-23-from-bazel
Merge branch 'main' into lukebakken/unicode-followup
Merge pull request #6046 from rabbitmq/global-hang-workaround
Simplify code
Remove erlang 23 from bazel build
OTP patch version automation workflow updates
Add +pc unicode to `erl` args - https://www.erlang.org/doc/apps/stdlib/unicode_usage.html#heuristic-string-detection
Yolo-replace format strings
Merge pull request #5892 from cloudamqp/shovel_fixes
Merge pull request #6050 from rabbitmq/bump-otp-24.3
Merge pull request #6019 from cloudamqp/prepare_plugins_order
Merge pull request #6041 from rabbitmq/lukebakken/cuttlefish-upgrade
Adopt otp 24.3.4.6
Upgrade cuttlefish to 3.1.0
Merge pull request #3314 from rabbitmq/lh-observer-cli-plugin
Make "global hang workaround" support OTP >= 25.1
Add a classic queue observer_cli plugin
Merge pull request #5934 from rabbitmq/gh_5931
Merge pull request #5415 from rabbitmq/remove-old-upgrade-subsystem
Introduce new feature flag to avoid crashing channel.
Remove upgrade-specific log file
Remove `rabbit_upgrade`
Remove all `-rabbit_upgrade()` functions
Disconnect the old upgrade mechanism from RabbitMQ boot
rabbitmq_shovel_management tests need meck
Fix error handling of shovel_management delete/restart shovel
Fix table layout for terminated shovel status
Remove unused fields from shovel_worker state record
Merge pull request #6040 from rabbitmq/lukebakken/small-refactor
Remove a one-liner
Merge pull request #6014 from rabbitmq/qq-metric-emission-refactor
Merge pull request #5984 from rabbitmq/oidc_path_prefix
Merge pull request #6024 from rabbitmq/Zerpet-patch-1
Merge pull request #6026 from illotum/fix-restart_vhost-man
fix docs for rabbitmqctl restart_vhost
Update Stream protocol document
Refactor quorum queue periodic metric emission
Load plugins in dependency order
Support multiple path segments in management path
Merge pull request #6010 from rabbitmq/rin/bazel-use-mix-format
Add 'mix format --check-formatted' to the rabbitmqctl_tests in bazel
Merge pull request #6003 from rabbitmq/rin/update-elixir-version
Use Elixir 1.13.x with otp 24.x in bazel build
Merge pull request #6001 from rabbitmq/bump-otp-25.1
Adopt otp 25.1.1
Fail the update-otp-patches workflow is string replacement fails
(hopefully last for now) update update-otp-patches.yaml workflow
Improve wording of how to run selenium tests
Again update update-otp-patches.yaml workflow
fixup previous commit
Fixup the update-otp-patches.yaml workflow
Merge pull request #5944 from rabbitmq/gh_5927
Support management path prefix when using OAuth2
Merge pull request #5981 from rabbitmq/rabbitmq-server-5980
Update from `master` to `main`
Merge pull request #5975 from rabbitmq/dependabot/github_actions/main/actions/cache-3.0.10
Bump actions/cache from 3.0.9 to 3.0.10
Change rabbit_fifo_client get_missing_deliveries to use aux_command
Ensure consumer msg_id state is synchronised
Merge pull request #5968 from rabbitmq/selenium-suites
Merge pull request #5961 from rabbitmq/rabbitmq-server-5956-stream-route-partitions-response-prefix
Merge pull request #5958 from Ayanda-D/mix-format-cli
Trailing whitespace
Merge pull request #5969 from rabbitmq/rin/use-rules_erlang-3.7.2
Use rules_erlang 3.7.2
Refactor how selenium suites are run
Merge pull request #5966 from rabbitmq/add-super-stream-cli-leader-locator-balanced
Use leader locator "balanced" by default for add_super_stream
Merge pull request #5962 from rabbitmq/rin/otp-25_1-oci
Simplify otp src selects in //packaging/docker-image:otp_source
Add otp 25.1 to //packaging/docker-image:rabbitmq
Fix keys for route and partitions responses
extend contribution note on cli format checking
update contribution notes with rabbitmq_cli formatting instructions
add rabbitmq_cli format check on make/mix task aliases
remove deprecated  and replace with import Config module
mix format rabbitmq_cli
initial .formatter.exs configuration file
Merge pull request #4522 from rabbitmq/loic-cq-dont-reduce-memory-usage
Merge pull request #5952 from rabbitmq/dependabot/github_actions/main/actions/cache-3.0.9
Bump actions/cache from 3.0.8 to 3.0.9
Merge pull request #5941 from rabbitmq/rin/erlang-ls-enhancements
Remove commented code
Update .bazelignore
Merge pull request #5897 from rabbitmq/rabbitmq-server-5889-sac-coordinator-crash-in-monitors
Attempt to make generated erlang_ls.config more stable
Turn the //tools:erlang_ls.config target into a generation script
Change variable name
Merge pull request #5929 from rabbitmq/lukebakken/hex-publish-fixes
Add //tools:erlang_ls_files that generates a tree for Erlang LS
Merge pull request #5881 from rabbitmq/list-amqp10-connections
Merge pull request #5930 from rabbitmq/rin/erlang-25_1-in-actions
Add erlang 25.1 to github actions
Update branch names and links
Merge pull request #5919 from rabbitmq/rin/fixup-elixir-home-detection
Enhance inference of ELIXIR_HOME from the path of iex/elixir
Merge pull request #5896 from rabbitmq/rin/fixup-windows-actions
Merge pull request #5910 from TribuneX/docs/extend-auth-backend-http-docs
Merge pull request #5908 from rabbitmq/bump-elixir-1.13
Merge pull request #5907 from rabbitmq/bump-elixir-1.12
Merge pull request #5909 from rabbitmq/bump-elixir-1.14
Fixup config drift causing the Windows Actions to fail
Merge pull request #5906 from rabbitmq/bump-otp-25.0
Merge pull request #5905 from rabbitmq/bump-elixir-1.10
Merge pull request #5904 from rabbitmq/bump-otp-24.3
Add option for wildcard certificates to docs
Adopt elixir 1.14.0
Adopt elixir 1.13.4
Adopt elixir 1.12.3
Adopt otp 25.0.4
Adopt elixir 1.10.4
Adopt otp 24.3.4.5
Merge pull request #5899 from rabbitmq/dependabot/github_actions/main/peter-evans/create-pull-request-4.1.3
Bump peter-evans/create-pull-request from 4.1.2 to 4.1.3
Merge pull request #5890 from rabbitmq/rin/elixir_config-repository-bazel
Apply the @erlang_config pattern for elixir via the WORKSPACE
Make ensure_monitors more defensive in SAC coordinator
Merge pull request #5683 from rabbitmq/kura-supervisor2-to-supervisor
Fixup platform references for erlang git master nightly tests
Use correct expr. to extract field from record
Clean up code and use ct:pal over println
Remove unnecessary test
Refactor test that verifies one amqp 1.0 conn
Fix issue listing amqp 1.0 connections
WIP reader process was under different supervisor
Verified amqp 1.0 conn are tracked
Add failing test
Test listing 091 connections
Add failing test that list a single connection
WIP verify 1 connection listed
Merge pull request #5887 from thorhalvor/feature/amqp10-plugin-mapping-deliverycount
In start_for_vhost we are failing to start, not stop
Fix badmatch in Web-STOMP initialization
amqp_client's rabbit_writer shouldn't be significant
Migrate from supervisor2 to supervisor
CQ: Update long description at the top of the module
CQ: Fix channel_operation_timeout_SUITE mixed versions
CQ: Update shards count for the property suite
rabbit_prometheus_http_SUITE: Update tests for new CQs
system_SUITE: wait for messages to be queued
CQ: Don't use outgoing rate to throttle purging the queue
CQ: Make the resume/1 function sync to disk
CQ: Remove a couple more unneded callbacks
CQ: Fix test compilation error following rebase
CQ: Enable borken checks in backing_queue_SUITE again
CQ: Some more cleanup
CQ: Some cleanup
CQv2: Small fixes of and via the property suite
CQv2: Sync/handle confirms before conversion
CQv2: Fix property suite
CQv2: Read many messages at once from v2 store when possible
CQv2 store: Use raw for file:write_file for the file header
CQv2: Always do the CRC32 check if it was computed on write
CQv2: Optimise the per-queue store
CQ: Enable read/write concurrency for old msg store ets
CQ: Enable read/write concurrency for old msg store ets
CQ: Fix an xref error
CQv2: Add a simpler confirms code path to improve performance
CQ: Use v2 sets instead of gb_sets for confirms
CQ: Fix prop suite after removal of lazy and other changes
Tweak test suites following CQ changes
CQ: Use maps instead of gb_trees for pending acks
CQ: Use only ram_pending_acks, not qi_pending_acks
Rework CQ stats code to be obvious and efficient
Fix warning
Fetch from disk based on consume rate
Don't use q1 q2 and q4 at all anymore
Remove a missed distinction between default/lazy
Don't reduce memory use
When DeltaCount = 0 we can look at Len directly
Don't force writing to disk in publish_delivered1
WIP Remove unused callback
WIP putting back flush in reduce_memory_usage and other tweaks
CQ: Merge lazy/default behavior into a unified mode
Merge pull request #5883 from rabbitmq/bump-otp-24.3
Adopt otp 24.3.4.5
Merge pull request #5831 from rabbitmq/lukebakken/disk-monitor-resilience
Merge pull request #5878 from rabbitmq/pjk25/rbe-extension-fixes
Make rabbit_disk_monitor more resilient
Merge pull request #5551 from rabbitmq/rabbitmq-server-5486-followup
Mark the rbe repo as a dev dependency
Update 3.11.0.md
Update 3.11.0.md
mapping deliverycount if present in headers
Minor fixes to the otp/elixir version bump automation workflows
Adopt otp 25.0.4 (#5873)
Log errors from unicode:characters_to_list
Follow-up to #5486
3.10.8 release notes: correct a typo
Filter out elixir compilation from local execution in bazel (#5869)
3.10.8 release notes wording
Minor typos fix (#5865)
Add a few comments regarding the mixed version testing packages
Use package-generic-unix-for-mixed-version-testing-v3.10.7, like in v3.11.x
Use otp 24 to build 3.9.x mixed version testing artifacts
Complement rabbitmq-stream.8 with SAC and super streams
Merge pull request #5857 from rabbitmq/mk-3.10.8-release-notes
3.10.8 release notes
Merge pull request #5855 from rabbitmq/mk-3.9.23-release-notes
3.9.23 release notes: a typo
3.9.23 release notes
Merge pull request #5846 from rabbitmq/add-rabbitmq-streams-manpage
Add links to rabbitmq-streams man page
Add stream plugin commands to rabbitmq-streams man page
Merge pull request #5845 from rabbitmq/use-rules_cc-0.0.2
Update 3.11.0 release notes
Add rabbitmq-streams manpage
Use rules_cc 0.0.2
Fixup sed expressions in update-otp-patches.yaml workflow
Merge pull request #5840 from rabbitmq/dependabot/github_actions/main/peter-evans/create-pull-request-4.1.2
Bump peter-evans/create-pull-request from 4.1.1 to 4.1.2
Merge pull request #5836 from rabbitmq/emqtt
Merge pull request #5835 from rabbitmq/mk-erlang-25.1-in-actions
Point emqtt test dependency from ansd to emqx
Add Erlang 25.1 to Actions matrix
Limit Selenium suite to main and 3.11
Merge pull request #5833 from rabbitmq/pjk25/update-selenium-workflow
Update the selenium test actions workflow
Merge pull request #4967 from luos/header-conversion-amqp091-amqp10_3
Merge pull request #5694 from rabbitmq/pjk25/use-rules_erlang-erlang_config
One more update to 3.11.0 release notes
Merge pull request #5824 from rabbitmq/mk-update-3.11.0-release-notes
Updates to 3.11.0 release notes
Merge pull request #5823 from rabbitmq/dependabot/github_actions/main/docker/setup-qemu-action-2
Bump docker/setup-qemu-action from 1 to 2
Use rules_erlang 3.6.3
Merge pull request #5821 from rabbitmq/mk-disable-non-bazel-oci-builds
(Possibly temporarily) remove non-Bazel OCI image builds
Merge pull request #5815 from rabbitmq/pjk25/temp-disable-upload-artifact-in-actions
Disable failing github actions step for now
Merge pull request #5813 from rabbitmq/pjk25/update-bazel-elixir-version
Add elixir 1.14 to bazel
Merge pull request #5811 from rabbitmq/mk-drop-erlang-24-support
Require Elixir 1.13.4 or 1.14.x
Require Erlang/OTP 25.0 (3.11 and 3.12/main only)
Merge pull request #5791 from rabbitmq/mk-enable-erlang-25-in-actions
Further slim down OCI Base Image installed packages
Again update dev OCI image base image packages
GitHub actions docker multi-arch setup
rabbit_trust_store:load_and_decode_cert/4: be more defensive
Re-enable Erlang 25 in Actions
Merge pull request #5806 from rabbitmq/pjk25/use-tlsv1.2-in-trust-store-suite
Remove zlib1g-dbgsym from OCI Base Image
Use tlsv1.2 in //deps/rabbitmq_trust_store:system_SUITE
Merge pull request #5793 from rabbitmq/multi-arch-images
Merge pull request #5796 from sh41/fix_type_ssl_option_tls_option
he ssl:ssl_option() type was renamed to ssl:tls_option() in this commit: https://github.com/erlang/otp/commit/e042afe54727ae490d47eae47c6d9a210f04dd47 which was merged in OTP 21.3 This change prevents dialyzer warning: ``` :0:unknown_type Unknown type: :ssl.ssl_option/0. ```
Build multi-arch dev images.
Bump up to Erlang 25
Merge pull request #5789 from rabbitmq/mk-erlang-25-rework-federation-tests
Federation: move another test to exchange_SUITE
Federation: move exchange link status test to exchange_SUITE
Update federation BUILD.bazel to refresh test suite changes
Port more exchange federation tests
Port more tests
Port more exchange federation tests for Erlang 25
Port one more exchange federation test
One more exchange federation test
Federation: begin reworking exchange_SUITE for Erlang 25
Bump up erlang_version to 24.3.4.5
Bump up to Erlang 24.3.4.5
Merge pull request #5779 from rabbitmq/bump-otp-24.3
Adopt otp 24.3.4.5
Merge pull request #5715 from cloudamqp/shovel_flow_control
Merge pull request #5775 from rabbitmq/importdqt
Better defaults for queue properties when importing definitions
Merge pull request #5770 from rabbitmq/dependabot/github_actions/main/erlef/setup-beam-1.13
Bump erlef/setup-beam from 1.12 to 1.13
The default-queue-type property on a vhost was added recently in #5305 to aid a workflow for converting to quorum queues. The core logic of that change was applying some special logic which injects `x-queue-type` into `arguments` on a queue when it is declared.
Merge pull request #5755 from cloudamqp/mqtt_timeout
Merge pull request #5759 from Ayanda-D/fix-stream-metrics-gc-childspec-id
Rename and fix rabbit_stream_metrics_gc childspec identifier from supervisor context
Merge pull request #5463 from rabbitmq/global-metrics-values
Add login_timeout to mqtt and stomp reader
Merge pull request #5737 from rabbitmq/rabbit-event-stats
Merge pull request #5741 from rabbitmq/fix-flaky-credit-test
Fix flaky rabbit_fifio_int:credit tests
Merge pull request #5726 from rabbitmq/rabbitmq-server-5721
Use maps:get/3
Remove rabbit_misc:atom_to_binary/1
Add gen_event behaviour declaration
Stop sending stats to rabbit_event
Merge pull request #5730 from eltociear/patch-1
Merge pull request #5732 from rabbitmq/mk-3.11-release-notes-tweak
3.11 release notes: wording as suggested in #5319
Fix typo in plugins.mk
Drop unit_disk_monitor_mocks_SUITE from BUILD.bazel
Add a Bazel rule for test/disk_monitor_SUITE.erl
Disk monitor strikes back!
Remove experimental warning in super stream commands
Remove debug log messages from stream SAC coordinator
Fix MQTT protocol version in MQTT tests
Use credit flow for dest side of on-publish shovels
Update 3.11.0.md
Merge pull request #5709 from rabbitmq/rabbitmq-server-5708-whitelist-elixir-1.14
Merge branch 'main' into rabbitmq-server-5708-whitelist-elixir-1.14
Make CLI tools version reflect that of RabbitMQ itself on this branch
CLI tools: whitelist Elixir 1.14
Update 3.11.0.md
Point emqtt test dependency to a tree reference
Run selenium tests on main branch
Merge pull request #4749 from rabbitmq/oidc-integration
Simplify make targets
Add missing renamed oauth.enable -> oauth.enabled
3.11.0 release notes edits based on initial feedback
Merge pull request #5704 from rabbitmq/mk-3.11.0-initial-release-notes
Initial 3.11 release notes
Bump Aten to 0.5.8
Management plugin: oauth_enable => oauth_enabled in more places
management.oauth_enable => management.oauth_enabled
Fix bug in start-uaa.sh script
Fix location of script waitTillUAAReady
Update how to wait for UAA
Wait till token TTL before checking again
Logging improvements
Enable only 2 plugins not all
OAuth 2 Selenium suite: bump selenium-webdriver and chromedriver
Improve wording
Fix wrong folder name
Merge pull request #5684 from rabbitmq/lukebakken/set-erl-max-ports
Merge pull request #5693 from rabbitmq/upgrade-emqtt
Upgrade MQTT Erlang client
Use OTP 25.0.4 to build RabbitMq docker image
Merge pull request #5689 from rabbitmq/use-otp-25.0.4-in-docker-image
Use OTP 25.0.4 to build RabbitMq docker image
Set ERL_MAX_ETS_TABLES and ERL_MAX_PORTS in the same manner as on Windows
Fix location of uaa configuration
Test hard session timeout
Refactor how selenium tests are run
Fix logout workflow
Skip logout selenium test
Explain how to launch rabbitq from source
Capture UAA logs before killing it
Run action against oidc-integration branch
Run selenium tests with Actions
Move it temporary to a feature branch
Add first commit for github action to run
Improve docs and fix some mistakes on the selenium tests
Enable oauth2 plugin
Ensure first oauth2 plugin is configured
Fix test case oauth_test
Fix auth_test
WIP prepare to run all tests
Comment why test last 20sec
Document testing
Fix issue related to refreshing access tokens
Issue found on token refresh
Verify login,logout when uaa is up
Verify happy-login scenario
WIP fixing test case happy-login.js using ObjectPages
Tested landing page
WIP Using PageObject pattern to write tests
WIP only landing.js working
WIP running selenium tests from docker
Remove dummy state
Run tests
Complete login and logout flows
Auto approve scopes
Testing happy login for oauth
Explain what it is needed to run tests
Explain how automated testing works
Test home page with oauth2 and without token
Add audience request parameter to /authorize
Fix two issues
Handle not authorized oauth user
Handle rabbitmq session timeout
Handle scopes
WIP login/logout/token-refresh against keycloak
Refresh token
Set cookies expiry from token expiry claim
Replace singular with oidc-client-ts library
Merge pull request #5677 from rabbitmq/use-otp-24.3.4.4-in-docker-image
Use otp 24.3.4.4
Merge pull request #5674 from rabbitmq/mk-correct-erlang-jose-fork-for-erlang-mk
Bump deps: michaelklishin/erlang-jose and Thoas
Merge pull request #5659 from Ayanda-D/allow-ignoring-supervisor2-error-reports
Ensure clean shutdown of rabbit_event manager in supervisor2_SUITE to avoid noisy test terminations
Rename TRACE_SUP2 to TRACE_SUPERVISOR2 and add to Makefile
Inlcude test_event_handler in rabbit_common supervisor2_SUITE bazel
Use local include to reference rabbit.hrl in test_event_handler
3.11.0 release notes stub
Merge pull request #5579 from rabbitmq/mk-release-eol-date-warnings
Squash a few compiler warnings
Basic unit tests for rabbit_date_time
Log release series EOL message as an error
Release series support: announce in more places
Release series support: wording
Report version series maintenance status via CLI
Introduce a concept of release series EOL date
Merge pull request #5660 from rabbitmq/bump-otp-24.3
Adopt otp 24.3.4.4
Use SupPID provided in ?TRACE_SUPERVISOR2_ERROR_LOG macro through SupName.
Implement tests for controlling supervisor2 error reports. Tests behaviour controlled at compile time through, macro.
Add a test_event_handler for rabbit_common event based tests
Control supervisor2 error reports with application variable to be set in e.g. the `advanced.config` file, or manually in runtime.
Minor actions workflow fix
Merge pull request #5655 from rabbitmq/mqtt-connack-timeout
Fix failing proxy_protocol test
Avoid crash when client disconnects before server handles MQTT CONNECT
Merge pull request #5449 from rabbitmq/grafana-9-support
Rename run_queues_length_total to run_queues_length
Use long form "andalso" for clarity
Introduce new credit_mode {simple_prefetch, MaxCredits} for v3
Fix duplicate credit grant in quorum queue
Update workspace_helpers.bzl to match #5647
Merge pull request #5647 from rabbitmq/ik-update-prometheus-4.9.1
Update prometheus to 4.9.1
Merge pull request #5640 from johanrhodin/patch-7
Fix typo
Merge pull request #5635 from rabbitmq/pjk25/exclude-oci-from-build-all
Exclude OCI targets from wildcards like `bazel test //... ...`
Merge pull request #5234 from rabbitmq/rich_auth_request
OAuth 2: rename a function
Merge pull request #5624 from rabbitmq/bump-otp-25.0
OAuth 2: unit_SUITE naming and wording
OAuth 2: use a separate system suite group for RAR
Merge pull request #5610 from cloudamqp/tracking_refac
Merge pull request #5623 from rabbitmq/bump-otp-24.3
Adopt otp 25.0.4
Adopt otp 24.3.4.3
More update-otp-patches workflow fixes
Fetch both shas needed for automatic otp patch updates in ci
Turn PR creation back on in update-otp-patches.yaml
Fix variable references in update-otp-patches.yaml
Further update-*-patches workflow updates
Debugging of update-otp-patches workflow
Ignore extra paths in oci workflow
Try to make two actions workflows more robust
Merge pull request #5611 from cloudamqp/fix_typos
Fix a typo in a comment in rabbit_env
Fix a typo in a comment in prometheus_rabbitmq_core_metrics_collector
Apply rabbitmq/rabbitmq-website#1462 at the source (man pages)
Only look for tracked channels of a closed connection locally
Refactor rabbit_(connection|channel)_tracking:count_tracking_items_in_ets
Use erpc:multicall in rabbit_tracking:count_tracking_items_in_ets
rabbitmq-diagnostics(8): correct a flag
README edits
OAuth 2 README: add a missing link
OAuth 2: edits per discussion with @marcialrosales
OAuth 2: more RAR doc edits
OAuth 2: one more RAR doc edit
OAuth 2 Cuttlefish schema: cosmetics
OAuth 2: README edits
OAuth 2: README edits
README edits
Update documentation
Update docs
Use user-tags without prefix tag: as action name
Add missing test cases
Test single value for locations and actions
Correct mistake in the translation example
Improve readability
Explain how permissions are translated to scopes
Explain how the permissions translate to scopes
Update docs
Use wildcard library rather than re
Allow regular expression in location's cluster field
Remove print statement
Fix issue where the cluster was wrongly matched
Make aud field optional
Support rich authorization request spec
Update secondary-umbrella workflow for latest rbe image/platform
Merge pull request #5591 from rabbitmq/dependabot/github_actions/main/actions/cache-3.0.8
Bump actions/cache from 3.0.7 to 3.0.8
Run dependabot on each branch, rather than backporting from main
Update docker image OTP versions automatically to match tests
Remove unused workflow
Merge pull request #5585 from rabbitmq/pjk25/use-rules_docker-for-oci
Add sha256s for otp source archives
Exclude docker image tests from the normal test workflows
Add a bazel based OCI image build to the oci.yaml workflow
Merge pull request #5581 from rabbitmq/change-vhost-existence-interval
Merge pull request #5580 from rabbitmq/remove-old-check
Check for vhost's existence every 5 seconds
Remove an old check
Merge pull request #5566 from rabbitmq/bump-rbe
Merge pull request #5565 from rabbitmq/bump-otp-25.0
Merge pull request #5564 from rabbitmq/bump-otp-24.3
Use latest rbe-erlang-platform/linux-rbe
Adopt otp 25.0.4
Adopt otp 24.3.4.3
Merge pull request #5557 from rabbitmq/pjk25/add-platforms-repo-to-module-dot-bazel
Add platforms repo to MODULE.bazel
Merge pull request #5552 from rabbitmq/dependabot/github_actions/main/peter-evans/create-pull-request-4.1.1
Bump peter-evans/create-pull-request from 4.0.4 to 4.1.1
Merge pull request #5547 from rabbitmq/force-gc-definition-import
Force gc while importing definitions
Merge pull request #5486 from rabbitmq/rabbitmq-server-5471-2
Merge pull request #5534 from rabbitmq/rabbitmq-server-5496
Fix `badmatch` by taking edge case into account
Merge pull request #5529 from rabbitmq/pjk25/prometheus-version
Merge pull request #5525 from rabbitmq/amqp10-client-ssl-connection
Sync prometheus version between MODULE.bazel & workspace_helpers
Merge pull request #5522 from rabbitmq/add-rabbitmq-upgrade-to-bazel
Connect ssl:connect in amqp10_client with hostname
Also add rabbitmq-streams & rabbitmq-tanzu
Add missing rabbitmq-upgrade to rabbitmq_home.bzl
Merge pull request #5517 from rabbitmq/remove-travis-files
Fixup other references to the master branch, which has moved to main
Remove .travis.yml.patch files
Remove all of the .travis.yml files
Update amqp*_client Makefiles for branch rename
Update GitHub Actions and Mergify for branch rename
Merge pull request #5514 from rabbitmq/use-rules_erlang-3.5.0
Use rules_erlang 3.5.0
Merge pull request #5506 from the-mikedavis/md-embed-and-simplify-amq-exchange-check
Simplify check for non-amq exchanges
Merge pull request #5105 from rabbitmq/classic-queue-type-fixes
Merge pull request #5497 from rabbitmq/stream-queue-flakes-2
Merge pull request #5499 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.7
Bump actions/cache from 3.0.6 to 3.0.7
Ensure CONF_ENV_FILE is run correctly on win32
rabbit_stream_queue flake improvement
Merge pull request #5492 from rabbitmq/amqp10-client-system-flake
amqp10_client system test suite reliability
Merge pull request #5488 from rabbitmq/ik-update-prometheus-4.9-4380
Remove dependency on rabbit_channel in classic queues
update prometheus to 4.9. close #4380
Merge pull request #5483 from rabbitmq/revert-prevent-overlapping-partitions
Revert "Set kernel param prevent_overlapping_partitions to true"
Bump dependencies in stream Java test
Merge pull request #5479 from rabbitmq/mk-rabbitmq-stream-java-test-suite-interface-change
Streams: adapt tests to the latest Java stream client listener interface
Merge pull request #5467 from rabbitmq/mk-upgrade-eetcd
Fix failing test
Bump eetcd to 0.3.6
Merge pull request #5427 from rabbitmq/rabbitmq-server-5412-stream-info-command
Use atom_to_binary/1 instead of rabbit_data_coercion
Rename StreamInfo to StreamStats
Move message rate metrics from channel/queue aggregation to global counters
Merge pull request #5442 from rabbitmq/prevent-overlapping-partitions
Set kernel param prevent_overlapping_partitions to true
Enable a post-#4563 test
Disable a test that needs revision post-#4563
Merge pull request #5319 from NuwanSameera/feature-delete-connection-by-username
Add delete connection by username feature
Merge pull request #4563 from rabbitmq/loic-dont-delete-durable-queues-on-node-down
Merge pull request #5450 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.6
Bump actions/cache from 3.0.5 to 3.0.6
Add README.md for creating/updating dashboards
Fix overview graphs in Grafana 9
Fix dist link graph
Set time series to show all series in tooltip
Take dashboard definitions straight from exported Grafana for simplicity
Migrate from deprecated panels in Grafana
Terraform: add AMIs for Fedora 34 and 35
Merge pull request #5447 from rabbitmq/mk-require-erlang-24
Bump minimum required Erlang version to 24.3
Terraform: Erlang packages for 24 and 25 have long been available
Merge pull request #5445 from rabbitmq/mk-drop-erlang-23-from-actions
Update to supported Grafana and Prometheus versions
Drop Erlang 23 from Actions test matrix
Merge pull request #5438 from rabbitmq/global-sync
Merge pull request #5433 from rabbitmq/loic-fix-cqv1-full-recovery-bug
Log at debug level when "global hang workaround" is applied
Prevent global:sync/0 from being stuck
CQv1: Fix failure to recover messages in rare cases
Keep stream_* return codes
Make process liveness check remote if necessary
Add StreamInfo command to stream protocol
rabbitmqctl(8): correct add_vhost option dashes
Merge pull request #5418 from rabbitmq/ik-list_vhost_information_items
rabbitmqctl(8): document optional args supported by add_vhost
Merge pull request #5416 from rabbitmq/dependabot/github_actions/master/erlef/setup-beam-1.12
3.10.7 shipped with Osiris 1.3.0
Follow-up for #5399. Add new vhost information items to the list
Bump erlef/setup-beam from 1.11 to 1.12
Merge pull request #5408 from rabbitmq/ik-import-vhost-default-queue-type-5399
Merge pull request #5410 from rabbitmq/rabbitmq-server-5305-follow-up
Validate the feature flag behind user-provided queue type on the server end
close #5399, set default vhost queue type from import's metadata
ctl add_vhost: check if relevant feature flags are enabled
Merge pull request #5235 from rabbitmq/remove-quorum_queue-ff-compatibility-code
Remove test code which depended on the `quorum_queue` feature flags
rabbitmqctl.8: Use `stream_queue` in the `enable_feature_flag` example
Remove pre-quorum-queue compatibility code
Merge pull request #5236 from rabbitmq/remove-virtual_host_metadata-ff-compatibility-code
Remove test code which depended on the `virtual_host_metadata` feature flags
Remove pre-virtual_host_metadata feature flag compatibility code
Update 3.9.22 release notes
Update 3.10.7 release notes
3.10.7 release notes: correct a broken link
Merge pull request #5404 from rabbitmq/mk-3.9.22-release-notes
3.9.22 release notes
Merge pull request #5401 from rabbitmq/mk-3.10.7-release-notes
3.10.7 release notes
README edits
Merge pull request #5356 from rabbitmq/mk-swap-json-library
rabbit_auth_backend_internal: correctly format JSON decoding errors that are tuples
rabbit_runtime_parameters: correctly format JSON decoding errors that are tuples in one more place
Merge branch 'master' into mk-swap-json-library
rabbit_runtime_parameters: correctly format JSON decoding errors that are tuples
rabbit_auth_backend_internal: correctly format JSON decoding errors that are tuples
rabbit_vhost_limit: correctly format JSON decoding errors that are tuples
rabbit_policy: correctly format JSON decoding errors that are tuples
rabbit_json:decode/2: raise a two-tuple error
rabbit_aws: adapt for Thoas-based rabbit_json
rabbitmqadmin_SUITE: encode value as bytes on Python 3
Pin erlang-jose to our fork with Thoas support
rabbitmqadmin_SUITE: only use Python 3, Python 2 is really truly EOL
Merge pull request #5385 from rabbitmq/conditional-logging-format
Merge pull request #5392 from cloudamqp/channel_tracking
Merge pull request #5390 from rabbitmq/remove-pre-implicit_default_bindings-ff-compatibility-code
Remove test code which depended on feature flag implicit_default_bindings
Remove implicit_default_bindings compatibility code
Merge pull request #5388 from rabbitmq/direct-exchange-routing-v2-more-tests
Adapt JSON logging test for Thoas
Fix stream command name
Add test for routing from exchange to exchange
Set read lock on rabbit_exchange during rabbit_index_route migration
Remove binding from rabbit_index_route if exchange not found
Merge pull request #5237 from rabbitmq/remove-pre-maintenance_mode_status-ff-compatibility-code
Channel PID as primary key of channel tracking table
Don't try to create connection tracking tables in rabbit_mnesia
Begin adapting logging_SUITE for Thoas
Remove test code which depended on the `maintenance_mode_status` feature flags
Remove pre-maintenance_mode_status compatibility code
Merge pull request #5239 from rabbitmq/remove-user_limits-ff-compatibility-code
Remove test code which depended on the `user_limits` feature flags
Add conditional logging to text formatter.
Remove pre-user_limits compatibility code
Remove old reference to external trust-store-http
rabbit_json:decode/1: use erlang:error/1 like the JSX version did
Remove a few tests that are no longer relevant
Pin Thoas to 0.3.0 in one more place
Swap JSX for Thoas in more places
Replace JSX with Thoas for JSON operations
Merge pull request #5350 from rabbitmq/pjk25/set-broker-version-to-3.12.0
Merge pull request #5301 from rabbitmq/tracking-to-ets
Merge pull request #5358 from rabbitmq/more-tests-direct-exchange-routing-v2
Cancel in progress workflow when new commit is pushed to a branch
Merge pull request #5253 from rabbitmq/use-rabbit_feature_flags-instead-of-rabbit_ff_registry-in-rabbitmq_stream
Updates to new feature flag API
Add more direct_exchange_routing_v2 tests
Minor fixes to move tracking tables to ETS
Move connection and channel tracking tables to ETS
Merge pull request #5372 from rabbitmq/pjk25/remove-extra-trust-store-http-ref
Remove old reference to external trust-store-http
Remove the auto-commenting about build systems on PRs
rabbit_stream: Use rabbit_feature_flags, not `rabbit_ff_registry`
Merge pull request #5351 from rabbitmq/bump-elixir-1.10
Merge pull request #5359 from rabbitmq/mk-fold-trust-store-http-in
Remove external dependency reference to trust_store_http
Fold trust_store_http into this repo
Merge pull request #5345 from rabbitmq/improve-ff-v2-callbacks
Add a more descriptive PR body for the update-rbe-image workflow
Merge pull request #5352 from rabbitmq/bump-elixir-1.12
Merge pull request #5353 from rabbitmq/bump-elixir-1.13
Adopt elixir 1.13.4
Adopt elixir 1.12.3
Adopt elixir 1.10.4
Additional version bump automation fixes
Bump the rabbitmq version on this branch to 3.12.0 (bazel)
Another fix for the update-elixir-patches.yaml workflow
Add more logging in the update-otp-patches.yaml workflow
Fixup version selection in update-elixir-patches.yaml workflow
Merge pull request #5325 from rabbitmq/fix-direct-exchange-routing-v2
rabbit_feature_flags: Use one callback per command
Update dependabot config to include v3.11.x branch
Add v3.11.x branch to actions workflows
Update mergify config to account for v3.11.x branch
Merge pull request #5321 from rabbitmq/rabbitmq-server-5308-stream-command-versions-exchange
Merge pull request #5263 from rabbitmq/re-enable-feature-flags-suite-mixed
Use erlang 23 for the mixed version v3.8.x umbrellas
Adjust the feature_flags_SUITE skip logic to accound for bazel
Remove the checksum for the secondary umbrella archive
Re-enable mixed version tests for the secondary feature flags suite
Revert "Fixup an accidental backport side-effect"
Fixup an accidental backport side-effect
Remove the integrity hash on the secondary-umbrella archive
feature_flags_SUITE: Skip `feature_flags_v2` if unsupported by secondary umbrella
feature_flags_SUITE: Remove CLI work around
feature_flags_SUITE: Adapt the argument to `rabbit_feature_flags:inject_test_feature_flags()`
feature_flags_SUITE: Restore testsuite under mixed-version testing
Adjust the 3.8.27 mixed version patch
Adjust the 3.8.27 mixed version patch once more
Correct embedded patch indentation in secondary-umbrella.yaml
Continue to debug secondary-umbrella.yaml
Again adjust secondary-umbrella artifacts workflow
Again adjust patching method for secondary-umbrella artifacts
Use a more dynamic method of patching secondary umbrellas
Merge pull request #5336 from rabbitmq/pjk25/secondary-umbrella-from-source
Use code compiled with -DTEST in mixed version testing
Merge pull request #5334 from rabbitmq/stream-queue-flakes
adjust test function in stream queue test
Merge pull request #5332 from rabbitmq/stream-queue-flakes
Switch osiris back to main
Get committed offset from log state
Remove a couple of unnecessary ++
Merge pull request #5331 from rabbitmq/empd_not_found_5322
make stream queue suite less flaky
avoid policy pattern clashes in stream suite
change osiris bazel branch
Avoid policy name collisions in stream queue suite
Fix stream queue segment size policy test
change timeout to 5 seconds
change timeout to 5 seconds
Use "committed offset" instead of "last committed offset"
Change log level
Add retry for erl_epmd:port_please
Merge pull request #5305 from rabbitmq/default-queue-type-per-vhost
add_vhost: help wording
Merge pull request #5323 from rabbitmq/rabbitmq-server-5320
Fix rabbit_index_route inconsistencies
Merge pull request #5324 from rabbitmq/mk-rk-correct-direct-jsx-calls
Avoid direct references to jsx
Include last committed offset in "deliver" stream command
Add exchange command versions declaration
Add exchange command versions command to stream plugin
Merge pull request #5314 from rabbitmq/listeners-to-ets
Add default_queue_type to list_vhosts command
Add default queue type to Add new virtual host form
Add a --default-queue-type argument to rabbitmqctl add_vhost
Make vhost tags update logic match type spec
Introduce new queue type callback to check argument compatibilty
Configure default queue type by vhost
rabbit_mnesia: Sync feature flags before we wait for tables
HTTP API: allow for setting a few extra security-related response headers
Schema: support for X-Frame-Options
Correct header values used in tests
Schema: support X-Xss-Protection
Schema: support for X-Content-Type-Options
core FF: post_enable callbacks cannot return errors
Hide new ets listeners table behind a feature flag `listener_records_to_ets`
Merge pull request #5315 from rabbitmq/dont-ffv2-migration-fun-with-is_enabled
rabbit_feature_flags: Don't call a feature_flags_v2-compatible migration function with `is_enabled`
Merge pull request #5317 from rabbitmq/set-RABBITMQ_FEATURE_FLAGS-with-required-feature-flags
Bazel: Set $RABBITMQ_FEATURE_FLAGS to the list of required flags in 3.11.0
Merge pull request #5313 from rabbitmq/remove-binding
Use 3.10.6 for mixed version testing
Be more defensive when looking up source exchange
Fix some formatting
Fix consumer update key in command table
Merge pull request #5303 from rabbitmq/mirrored-supervisor-to-rabbit
Bazel: bring back Shovel dependency on //deps/rabbit_common
Bazel: //deps/rabbitmq_shovel should depend on //deps/rabbit
Merge pull request #5302 from rabbitmq/pjk25/fix-mixed-version-testing
Remove "experimental" marker for SAC and super stream commands
Move mirrored_supervisor to rabbit application
Restore the mixed-ness of mixed version testing
Merge pull request #5289 from rabbitmq/bump-otp-23.3
Merge pull request #5290 from rabbitmq/bump-otp-24.3
Merge pull request #5291 from rabbitmq/bump-otp-25.0
Adopt otp 25.0.3
Adopt otp 24.3.4.2
Adopt otp 23.3.4.16
Fix sha retrieval in update-otp-patches workflow
Merge pull request #5279 from rabbitmq/rabbit-index-route-table
Include rabbit_index_route in rabbit_table:definitions/0
Merge pull request #5285 from rabbitmq/pjk25/rabbit_networking
Merge pull request #5281 from rabbitmq/loic-fix-cqv2-badmatch-5252
Unexpected fix for //deps/rabbitmq_shovel_management:http_SUITE
Merge pull request #5282 from rabbitmq/listeners-to-ets
Move listeners from local ram mnesia table to ets tables
Merge pull request #5280 from rabbitmq/pjk25/always-pull-in-oci-workflow
Temporarily use the plain ubuntu base in OCI workflow
Split the OCI image build into two phases
Remove debug symbol installation from oci workflow
Use single = instead of == with `test` in Dockerfile
CQ: Fix two accidental state overwrites
Merge pull request #5266 from rabbitmq/log-global-locks
Always pull the base image in the OCI workflow
Fetch more tags in update-*-patches.yaml workflows
Another update-otp-patches.yaml update
Fixup shell scripting error in update-*-patches.yaml workflows
Further adjustments to otp/elixir auto-bump workflows
Fixup otp minor versions in update-otp-patches.yaml
Fixup path in actions workflows
Add a workflow to auto-bump elixir patches in CI
Fold erlang version declarations for tests and OCI images into one
Log when acquiring or releasing a global lock
Merge pull request #5254 from rabbitmq/direct-exchange-routing-v2
Use feature_flags_v2 API for direct_exchange_routing_v2
Merge pull request #5241 from rabbitmq/rabbitmq-server-4140-followup
Use an easier to read ASCII space escape sequence
Merge pull request #5248 from rabbitmq/pjk25/less-noisy-memory-monitor-bazel-macos
Be less noisy when sysctl cannot be used for vm_memory_monitor
Only populate index route table if its FF is enabled
Naming
fix shovel error according to consumer_timeout
Only populate index route table if its FF is enabled
Merge branch 'Haster2004-shovel/issue-4219'
Naming
fix shovel error according to consumer_timeout
Use win32sysinfo.exe to get disk and memory info
Merge pull request #5222 from rabbitmq/local-listeners-table
Merge pull request #5203 from rabbitmq/ensure-index-route-table
Ensure that the post 3.11 suite doesn't run in mixed mode
Merge pull request #4328 from rabbitmq/rabbitmq-server-4140
Ensure rabbit listeners table
Ensure rabbit_index_route table is created after joining a cluster
Merge pull request #5202 from rabbitmq/make-old-feature-flags-mandatory
Turn of bazel cache compression for windows
feature_flags_v2_SUITE: Remove trailing whitespace
feature_flags_v2_SUITE: Fix typo in "Overring"
feature_flags_SUITE: Use `stream_queue` instead of `quorum_queue` in testcases
feature_flags_SUITE: Test required feature flags using `quorum_queue`
Make RabbitMQ 3.8.x feature flags required
rabbit_feature_flags: Support required feature flags
Merge pull request #5228 from rabbitmq/fixup-source-archive
Fixup the source_archive macro in dist.bzl
Merge pull request #5223 from rabbitmq/pjk25/package-generic-unix-macro
Keep listeners on a local ram table
Merge pull request #5217 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.5
Bump actions/cache from 3.0.4 to 3.0.5
Continuously run powershell to get disk free space
Merge pull request #5206 from rabbitmq/add-buildbuddy-recommended-flags
Add bazel flags recommended by buildbuddy
Merge pull request #5204 from rabbitmq/pjk25/make-exclusive-test-in-ci-public
Make the "exclusive" tests in CI public
Merge pull request #5199 from rabbitmq/process_start_time_seconds-4539
Add process_start_time_seconds metrics. See #4539
Consul peer discovery: squash a compiler warning
Merge pull request #5192 from rabbitmq/stream-coord-eval-listeners-opt
Use keyword args in bazel macros as per buildifier linter
Adjust macros in dist.bzl to be used more generally
optimise listener down
Optimise rabbit_stream_coordinator:eval_listeners
Merge pull request #5098 from rabbitmq/pjk25/use-dev-bzlmod-registry
Merge pull request #5182 from rabbitmq/mk-3.8.35-release-notes
3.8.35 release notes
Update 3.9.21 release notes
Merge pull request #5171 from rabbitmq/mk-update-3.9.21-release-notes
Update 3.9.21 release notes
Merge pull request #5169 from rabbitmq/mk-update-3.10.6-release-notes
Add rabbitmq/rabbitmq-server#5116 to 3.10.6 release notes
Update 3.10.6 release notes
Merge pull request #5166 from rabbitmq/segment-checksums
Re-enable QQ WAL and segment CRC32 checksums by default
Do not compute checksums for quorum queues
Merge pull request #5155 from rabbitmq/rabbitmq-server-5116
Merge pull request #5153 from rabbitmq/dependabot/github_actions/master/lewagon/wait-on-check-action-1.1.2
Merge pull request #5156 from rabbitmq/bazel-test-logs
Merge pull request #5157 from rabbitmq/stream-lower-log-level-on-precondition-failed
Lower log level on stream creation validation failure
Add `bazel run test-logs` fallback for non-desktop session
Consul peer discovery: pass TLS options to httpc in one more place
Pass on TLS options to httpc options
Peer discovery HTTP client: more override that accept HTTP options
Add TLS options to Consul peer discovery schema
Bump lewagon/wait-on-check-action from 1.1.1 to 1.1.2
Merge pull request #5150 from rabbitmq/bazel-start-cluster
Add Bazel targets start-cluster and stop-cluster
3.9.21 release notes
Update 3.10.6 release notes
Merge pull request #5147 from rabbitmq/mk-3.9.21-release-notes
3.9.21 release notes
Merge pull request #5144 from rabbitmq/gh-issue-5141
Fix mixed version channel crash
Merge pull request #5137 from rabbitmq/mk-3.10.6-release-notes
3.10.6 release notes
Merge pull request #5131 from rabbitmq/fix_read_stream_framemax_heartbeat
Formatting
Fix read frame_max and heartbeat parameters
CHX: document the limitations introduced in #5121
Merge pull request #5125 from rabbitmq/microsecond
Use microsecond abbreviation 'us' instead of 'µs'
Fix log format in consistent hash exchange
rabbit_binding:list_between/2: consider all route tables
Introduce rabbit_binding:list_between/2
Merge pull request #5121 from rabbitmq/chx-node-restart
Add some function and type specs
Make adding bindings idempotent
rabbit_feature_flags: Fix a stale comment about experimental feature flags
Merge pull request #3940 from rabbitmq/add-feature-flags-controller
Git: Don't ignore `rabbitmq_ct_helpers` and `rabbitmq_ct_client_helpers` in deps
rabbit_core_ff: Remove no-op migration functions
cth_log_redirect_any_domains: common_test hook to handle domain-specific log messages
rabbit_feature_flags: Add a feature flags controller process
Merge pull request #5113 from rabbitmq/unique-extra-bcc
Do not route to duplicate extra BCC destinations
Merge pull request #5107 from Ayanda-D/handle-qq-timeouts
Handle quorum queue timeout errors from rabbit_fifo_client:dequeue/3 on 'basic.get'
Fetch the secondary umbrella via the module system
Use our own fork of the bazel-central-registry
Merge pull request #5078 from rabbitmq/test-logs-enhancements
Merge pull request #5085 from rabbitmq/amqp-stream-consumer-file-handle-leak-fix
Close osiris log when cancelling AMQP stream consumer
Allow `bazel run test-logs` to work when logs are compressed
unit_config_value_encryption_SUITE: Fix log message + add stacktrace
rabbitmq_cli: Take "make" command from $MAKE env. variable
Merge pull request #5058 from rabbitmq/add-missing-module-deps
Adjustments to :package-generic-unix for rules_pkg 0.5.1
Merge pull request #5068 from rabbitmq/bump-rbe
Use latest rbe-erlang-platform/linux-rbe
Match the rules_pkg version across WORKSPACE.bazel and MODULE.bazel
Add minimal conflict resolution for the rbe module extension
Additional fixes for use of rabbitmq-server as a bazel module
Add missing bazel deps
Merge pull request #5059 from rabbitmq/more-oci-flake-mitigations
Again try to make Dockerfile more cacheable
Merge pull request #5051 from rabbitmq/nobzlmod-build-fixes
Fixup the bazel build when used without bzlmod
Merge pull request #5044 from rabbitmq/improve-oci-cache-hits
Merge pull request #5045 from rabbitmq/fixup-local-build
Remove extra tar options not supported on macos
Attempt to improve the cache hit rate for the oci.yaml workflow
Merge pull request #5027 from rabbitmq/bazel-source-archive
Merge pull request #5036 from rabbitmq/improve-stream-log-msg
Merge pull request #5037 from rabbitmq/stream-log-level-connection-closed
Change normal connection close log level from warning to debug
Add action to stream coordinator warning
Add a rule for building a source archive
Merge pull request #5025 from rabbitmq/fix-rabbitmqctl-missing-libs
Fixup an echo statement in oci.yaml
Use rules_erlang 3.2.0
Fixup rabbitmqctl build for missing formatters & otp 25
fix formatting
Merge pull request #5020 from rabbitmq/stream-max-segment-size-limit
Merge pull request #5022 from rabbitmq/use-rabbit_feature_flags-instead-of-rabbit_ff_registry
Limit stream max segment size value in policy
rabbit_classic_queue: Use `rabbit_feature_flags`, not `rabbit_ff_registry`
Merge pull request #4985 from rabbitmq/rabbitmq-server-4981
Limit stream max segment size to 3 GB
Merge pull request #5013 from rabbitmq/use-xref2
Merge pull request #5014 from rabbitmq/bump-rbe
Remove the update-rules_erlang workflow
Use latest rbe-erlang-platform/linux-rbe
Fixup the update-rbe-images.yaml workflow
Remove an additional -ignore_xref
Remove elixir related -ignore_xref calls
Use the new xref2 macro from rules_erlang
Temporarily mark //deps/rabbitmq_amqp1_0:system_SUITE as exclusive
Fix cluster links statistic
Merge pull request #5006 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.4
Use otp 25 as otp-max in update-otp-for-oci workflow
Merge pull request #5009 from rabbitmq/update-build-matrix
Remove Erlang 25 from the build matrix for now
Bump actions/cache from 3.0.2 to 3.0.4
Merge pull request #4990 from rabbitmq/remove-guid-if-not-needed
Delay generating the basic_message id (guid) until we know if it is needed or not.
Follow up to #4884 addressing some --config=local issues
Merge pull request #4991 from rabbitmq/osiris-78-call-hook-for-file-consult
Merge pull request #4884 from rabbitmq/use-rules_erlang-3
Use rules_erlang 3.1.0
Again bump rules_erlang
Avoid building dialyzer files on the mixed-version actions workflow
Use rules_erlang main branch
Restore some additional erlang versions to the build matrix
Use Elixir 1.12 with Erlang 24 in CI
Make rabbitmq-server work with rules_erlang 3
Add extra info for oci actions workflow
Merge pull request #4992 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.4
Bump actions/cache from 3.0.3 to 3.0.4
Use rabbit_prelaunch_file:consult_file/1 for Osiris TLS replication configuration
Merge pull request #4932 from rabbitmq/osiris-78
AMQP 1.0: correct log message formatting
Merge pull request #4982 from rabbitmq/mk-amqp1_0-connection-event-logging
Log two more connection lifecycle events for AMQP 1.0 clients
Add rabbit_consult module
Update CLI build requirements to match our pipelines
Bump Elixir versions used by Actions workflows
Merge pull request #4968 from rabbitmq/dependabot/github_actions/master/peter-evans/create-pull-request-4.0.4
Bump peter-evans/create-pull-request from 4.0.3 to 4.0.4
Implement header conversion between AMQP 1.0 and 0.9.1
Merge pull request #4962 from rabbitmq/rabbitmq-server-4926-take-2
Remove duplicate call to rabbit_exchange_decorator:set/1
Run the aws peer discovery integration tests manually only
Merge pull request #4955 from rabbitmq/switch-from-python-to-python3
Merge pull request #4929 from rabbitmq/loic-xref
Switch the default python binary for codegen scripts to python3
3.10.5 release notes update
Merge pull request #4947 from rabbitmq/gh-4940
Avoid code duplication
Merge pull request #4928 from rabbitmq/seshat_0_2_0
3.8.34 release notes
3.9.20 release notes
3.10.5 release notes
Fix quorum queue crash when reject with requeue followed by dead-letter
Switch osiris back to main
Replace uses of osiris_counters:overview/0 with overview/1
3.9.20 release notes stub
Update Osiris ref in workspace_helpers.bzl #4941
Temporarily tag osiris to v1.2.7 (#4941)
Explain that 3.10.3 was skipped due to a pipeline glitch
Update and rename 3.10.3.md to 3.10.4.md
Merge pull request #4933 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.3
Bump actions/cache from 3.0.2 to 3.0.3
Update Erlang.mk to get latest Xref fixes
Update 3.8.33.md
Ignore the Elixir protocol related warnings
Update Erlang.mk and switch to new xref code
Remove a 3.9 release notes item that we won't ship just yet
Remove a 3.10 release notes item that we won't ship just yet
Sync seshat version from workspace_helpers.bzl to MODULE.bazel
Another 3.9.19 release notes update
Update 3.9.19 release notes
Merge pull request #4922 from rabbitmq/3.8.33-release-notes-update
3.8.33 release notes
Merge pull request #4921 from rabbitmq/3.9.19-release-notes-update
Merge pull request #4918 from rabbitmq/3.10.3-release-notes-update
More 3.10.3 release notes updates
Merge pull request #4916 from rabbitmq/3.10.3-release-notes-update
One more missing 3.10.3 release notes entry
Merge pull request #4913 from rabbitmq/3.10.3-release-notes-update
Update 3.10.3 release notes
Pin seshat to 0.1.0
Merge pull request #4904 from rabbitmq/skip-default-definitions
Skip default defs when management.load_definitions is set
Merge pull request #4897 from rabbitmq/rabbitmqctl-bazel-macos
Merge pull request #4898 from rabbitmq/streams-seq-lookup-fix
Adjust bazel configuration for macos
Use the leader node when looking up a publisher sequence.
Fix `rabbitmqctl status` when the disk_free cannot be determined
Revisit test introduced in #4891 to not use 3.10-specific logger settings
Merge pull request #4891 from cloudamqp/log_exchange_update_config
Allow updating config (eg log level) of log exchange
Merge pull request #4873 from rabbitmq/optimise-rabbit-fifo_complete
Merge pull request #4879 from rabbitmq/mk-3.10.3-release-notes-stub
3.10.3 release notes stub
Update README.md
Update 3.10.0.md
Optimise rabbit_fifo:complete function
Merge pull request #4869 from rabbitmq/mk-3.10.2-release-notes
Update 3.10.2 release notes
Update 3.8.32 release notes
Update 3.9.18 release notes
Update 3.10.2 release notes
Merge pull request #4862 from rabbitmq/mk-3.10.2-release-notes
Update 3.10.2 release notes
Merge pull request #4857 from rabbitmq/mk-3.9.18-release-notes
Update 3.9.18 release notes
Merge pull request #4855 from rabbitmq/mk-3.8.32-release-notes
Update 3.8.32 release notes
Merge pull request #4844 from rabbitmq/loic-cqv2-prim_file-delete
Merge pull request #4841 from rabbitmq/luos-add-co-fallback
Skip this test in mixed cluster environments
CQv2: file:delete/1 -> prim_file:delete/1
implement fallback secret for credentials obfuscation
Bazel: make it easier to override Ra branch
Merge pull request #4838 from rabbitmq/handle-void-header-types
tidy up
Handle void types in AMQP 0.9.1 -> AMQP 1.0 conversion
Merge pull request #4836 from rabbitmq/max-expiration
Reduce expiry limit from 100 to 10 years
Revert "Update otp-max to OTP 25, Elixir 1.13.4; OpenSSL to 1.1.1o"
Set maximum expiration
Update otp-max to OTP 25, Elixir 1.13.4; OpenSSL to 1.1.1o
Merge pull request #4835 from rabbitmq/rebar-config-files-to-root
Move all rebar.config files into the root directory
Merge pull request #4827 from VictorGaiva/patch-1
Update PROTOCOL.adoc
Merge pull request #4814 from rabbitmq/mk-bump-credentials-obfuscation-to-3.1.0
Merge pull request #4819 from rabbitmq/mk-update-3.8.32-release-notes
3.8.32 release notes
Merge pull request #4817 from rabbitmq/mk-update-3.9.18-release-notes
3.9.18 release notes
Merge pull request #4815 from rabbitmq/mk-3.10.2-release-notes
3.10.2 release notes
Bump credentials_obfuscation to 3.1.0
Merge pull request #4811 from rabbitmq/amqp10-binary-parser
Increase receiving throughput from a stream via AMQP
Revert "Make master depend on credentials_obfuscation main branch"
Make master depend on credentials_obfuscation main branch
Merge pull request #4803 from rabbitmq/rabbitmq-server-4799
Merge pull request #4801 from rabbitmq/less-mmap
Report crypto library version in 'rabbitmq-diagnostics status'
Save memory when acking messages to quorum queue
Merge pull request #4798 from rabbitmq/format-log-level
Fix unit test
Change default format of log level to full name
Merge pull request #4793 from cloudamqp/log_levels
Merge pull request #4606 from rabbitmq/route-faster
Clarify documented/allowed log_level arg of rabbitmqctl set_log_level
Resolve direct_exchange_routing_v2 deadlock
Add feature flag direct_exchange_routing_v2
Increase routing throughput for direct exchange
Merge pull request #4787 from rabbitmq/extra-bcc
Avoid ETS lookup if no extra_bcc queue set
Merge pull request #4783 from rabbitmq/mk-3.8.31-release-notes
3.8.31 release notes
Merge pull request #4779 from rabbitmq/mk-3.9.17-release-notes
3.9.17 release notes
Merge pull request #4776 from rabbitmq/mk-3.10.1-release-notes
3.10.1 release notes
Ignore VS Code and IDEA workspace directories
Merge pull request #4774 from rabbitmq/exists
Check queue and exchange existence with ets:member/2
Merge pull request #4767 from rabbitmq/dependabot/github_actions/master/peter-evans/create-pull-request-4.0.3
Bump peter-evans/create-pull-request from 4.0.2 to 4.0.3
Merge pull request #3754 from rabbitmq/stream-single-active-consumer
Use UTF-8 in Bazel tests
Merge pull request #4762 from rabbitmq/bazel-test-node-logs-helper
rename test-node-logs -> test-node-data
Revert "Pre-launch logging: move type docstrings above the types"
Address code review comments for stream SAC
Rename function for clarity
Move SAC API to SAC coordinator
Address code review comments for stream SAC
Use more specific type
Adapt clause to send_chunk new return type
Log message if message update response code is not OK
Return error if SAC has no name
Check consumer is actually a SAC on SAC event
Bump stream coordinator machine version to 3
Do not dispatch on credit request is consumer is inactive
Add active and activity_status in stream consumer UI list
Tolerate unknown fields in CLI command requests
Add active and activity_status to list_stream_consumers
Check active and activity_status metrics field
Add active and activity_status flag to stream consumer metrics
Use feature flag public API
Add stream single active consumer feature flag
Fix stream SAC coordinator unit test
Handle "active" field for stream consumers
Add list_stream_group_consumers CLI command
Add ignore_xref entries
Add colums argument to list_stream_consumer_groups
Indent
Fix target name in bazel configuration
Add list_stream_consumer_groups CLI command
Do not emit consumer lag for inactive consumer
Add unit test for SAC in super stream partition
Add unit for "simple" SAC group
Use helpers in stream SAC coordinator test
Monitor connection PIDs in stream SAC coordinator
Fix test
Comment out unused variable initialization
Fix typo in bazel configuration file
Start to monitor connection PIDs in stream SAC coordinator
Re-arrange code in stream SAC coordinator
Refactor stream SAC coordinator
Use RA side effects to notify consumer connections
Move SAC coordinator to stream coordinator
Fix stream consumer state change
Fix stream SAC computation and notification
Fix stream SAC computation and notification
Implement basic SAC rollover on stream partition
Remove unused function
Refactor SAC coordinator for SAC in partition context
Notify stream consumer connection of SAC changes
Compute stream partition index
Unregister stream SAC consumers on connection closing
Handle SAC (simple) failover
Handle single active consumer registration
Add test-node-logs and remote-test-node-logs rules for bazel
Merge pull request #4759 from rabbitmq/rabbitmq-server-4755
Maintenance mode state: don't force a local replica on boot
Add a local replica of maintenance mode state table on boot
Merge branch 'illotum-rotate-cat-log'
Pre-launch logging: move type docstrings above the types
Merge pull request #4756 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
Implement cat log file rotation
Merge pull request #4737 from rabbitmq/move-ra-systems-setup-to-dedicated-mod
Merge pull request #4750 from rabbitmq/enable-stable-feature-flags-only-by-default
Feature flags: Only enable stable feature flags in enable_all/0
Feature flags: Only enable stable feature flags on a virgin node
Merge pull request #4735 from rabbitmq/loic-dont-allocate-cqv2-index
Fix condition in oci.yaml workflow attempt 2
Fix condition in oci.yaml workflow
No longer file:allocate CQv2 index files
rabbit_ra_systems: New module to configure Ra systems
Merge pull request #4736 from rabbitmq/remove-compile-time-dep-to-eunit
Use `stdlib/include/assert.hrl` where we need ?assert() macros only
Merge pull request #4727 from rabbitmq/rabbitmq-server-4622-stream-queue-consumer-count
Merge pull request #4721 from rabbitmq/fix-classic-queue-index-v2-on-cow-filesystems
Skip test in mixed-version cluster mode
Use rabbit_misc:rpc_call/5 for RPC
Add consumer count to stream queue metrics
Merge pull request #4722 from rabbitmq/start-background-node-uses-await-startup
Use rabbitmqctl await_startup instead if erl eval
rabbit_classic_queue_index_v2: Support copy-on-write filesystems
Merge pull request #4710 from rabbitmq/bump-otp-for-oci
Adopt otp 24.3.4 for OCI workflow
Merge pull request #4706 from cloudamqp/remove_nowarn
Remove leftover erlang:get_stacktrace()
Remove leftover compiler option for get_stacktrace
Merge pull request #4699 from rabbitmq/lukebakken/erlang_ls-tweak
Be sure to inclued apps/ dirs
Merge pull request #4696 from rabbitmq/rabbitmq-jms-topic-exchange-return-empty-array-when-no-state
Delete unused function
Return empty array when JMS topic exchange state does not exist
Merge pull request #4695 from rabbitmq/credentials-obfuscation-with-fallback-secret
Disable some timing-sensitive tests in mixed version mode
Bump credentials_obfuscation to 3.0.0
Merge pull request #4689 from rabbitmq/mk-drop-race_conditions-from-dialyzer-opts
Drop -Wrace_conditions from Dialyzer opts in more places
Merge pull request #4684 from rabbitmq/mk-drop-w-race-conditions-for-erlang-25-compat
Drop -Wrace_conditions from Dialyzer opts
Merge pull request #4681 from rabbitmq/mk-remove-ct-pal-from-production-oauth2-code
Remove a stray ct:pal/2 call in production code
Fix handling of osiris with bzlmod
Merge pull request #4675 from rabbitmq/rabbitmq-website-1398-follow-up
Add clear_user_limits to rabbitmqctl(8)
ctl clear_user_limits: add a missing argument back to help
Correct a typo
Merge pull request #4671 from rabbitmq/rabbitmq-website-1398
Add set_user_limits to rabbitmqctl(8)
Merge pull request #4665 from rabbitmq/rabbitmq-server-4588-follow-up
OAuth 2: more tests in follow-up to #4588
OAuth 2: expand all scope aliases provided
Sync dep versions between MODULE.bazel and workspace_helpers.bzl
Merge pull request #4662 from rabbitmq/use-bzlmod
Turn off bzlmod for Windows CI
Add a MODULE.bazel file and enable bzlmod
Merge pull request #4659 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
Merge pull request #4656 from rabbitmq/mk-update-3.9.16-release-notes
Update 3.9.16 release notes
Merge pull request #4649 from cloudamqp/list_keys
Merge branch 'cloudamqp-prom_head_message_timestamp'
Wording
Fix info(all_keys) for stream queues
Expose head_message_timestamp via Prometheus plugin as well
Merge pull request #4628 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
Merge pull request #4638 from rabbitmq/bump-dotnet-amqp1_0-tests
Bump the dotnet version used in rabbitmq_amqp1_0 tests
Merge pull request #4629 from rabbitmq/bump-rbe-23
Merge pull request #4630 from rabbitmq/bump-rbe-24
Merge pull request #4631 from rabbitmq/bazel-run-test-logs
Add helpers for quickly opening test logs from bazel
Use latest rbe-erlang-platform/linux-erlang-24.3
Use latest rbe-erlang-platform/linux-erlang-23.3
Turn off use of RCs in the OCI workflow for now
Use elixir 1.13.4 with otp 25 rcs in the oci workflow
Again further tweaks for workflows/oci.yaml
Further tweaks for workflows/oci.yaml
Attempt to fix up rc version for OCI actions workflow
Add OTP RCs to the OCI github actions workflow
A typo
Mention Erlang 25 in 3.10 release notes
Merge pull request #4620 from rabbitmq/mk-3.10-release-note-highlight-updates
Update 3.10 release highlights
Merge pull request #4604 from rabbitmq/rabbitmq-server-4588
OAuth 2: test tag extraction with scope aliases
OAuth 2: one more test case
List #4588 in 3.10 release notes
OAuth 2: integration tests for missing/incorrect scope aliases
OAuth 2: one more integration test for scope aliases
OAuth 2: system suite refactoring
OAuth 2: extract token refresh tests into a separate group
OAuth 2: integration suite cosmetics
OAuth 2: extract complex claim integration tests in a separate group
Merge pull request #4614 from gomoripeti/patch-1
Add note on token expiration and refresh
OAuth 2: add an integration test for scope aliases
OAuth 2: more scope aliasing tests
Optimise local RPC call when starting Ra cluster
OAuth 2: refactor unit_SUITE
OAuth 2: initial scope aliasing test
Correct a double quote introduced in #4603
Revert "Correct a double quote introduced in #4603"
Correct a double quote introduced in #4603
OAuth 2: initial work on scope aliases
Merge pull request #4603 from rabbitmq/mk-hex-metadata-github-urls
Correct GitHub repo links in Hex metadata
Fix incorrect location of HEX_TARBALL_FILES in deps/amqp10_common
Merge pull request #4601 from rabbitmq/mk-update-3.10-release-notes
Merge pull request #4579 from rabbitmq/rabbitmq-server-4577
Begin work migrating to native hex publishing
Add docker-image build artefacts to .gitignore
Merge pull request #4596 from rabbitmq/mk-update-3.10-release-notes
List #4572 in 3.10 release notes
Merge pull request #4572 from rabbitmq/validate-args
Merge pull request #4593 from rabbitmq/mk-3.9.16-release-notes
Initial 3.9.16 release notes
Merge pull request #4589 from rabbitmq/mk-update-3.8.30-release-notes
Initial 3.8.30 release notes
Merge pull request #4586 from rabbitmq/mk-bump-observer-cli-to-1.7.3
Revert "Log message wording"
Log message wording
Bump observer_cli to 1.7.3
Add x-credit to allowed consumer arguments for streams
Correct classic queue capabilities
Correct stream queue capabilities
Add tests for queue and consumer argument valdidation
Validate consumer arguments
Validate queue arguments
Merge pull request #4576 from rabbitmq/lukebakken/misc-cleanups
Merge pull request #4578 from rabbitmq/speed-up-reimport-exchanges
Speed up reimport exchange definitions
Replace files with symlinks
Don't delete durable CQs from rabbit_queue table on node down
Merge pull request #4442 from rabbitmq/quorum-queue-leader-locator
Merge pull request #4566 from rabbitmq/lukebakken/filter-discarded-message-log
Merge pull request #4567 from rabbitmq/kura-await_online_synchronized_mirror-in-single-node-clusters
Make await_online_synchronized_mirror no-op in single-node clusters
Add x-queue-leader-locator to supported quorum queue args
Merge pull request #4565 from johanrhodin/patch-6
Add basic filter for "Discarding message..." messages
Add basic filter for "Discarding message..." messages
Username needed for rabbit_exchange:delete
Fix typo
Merge pull request #4558 from rabbitmq/loic-fix-not_found-cq-crash
CQ: Fix potential crash when collecting stats
Merge pull request #4553 from zgabi/master
Add test for random replica and leader selection
SI binary prefix fix (ki => Ki)
Skip leader_locator_client_local in mixed versions
Merge pull request #4542 from zgabi/master
Merge pull request #4545 from rabbitmq/mk-update-3.9.15-release-notes
fmt_si_prefix improvement
Update 3.9.15 release notes
Merge pull request #4543 from rabbitmq/mk-update-3.8.29-release-notes
Update 3.8.29 release notes
Ra was bumped to 2.0.9 in v3.9.x
Ra was bumped to 2.0.9 in v3.10.x
Fix mixed version tests by enabling maintenance_mode_status
Remove nonempty_binary() since it doesn't exist in OTP23
Merge pull request #4524 from rabbitmq/speed-up-reimport-definitions
Merge pull request #4527 from rabbitmq/rabbitmq-server-4523
Merge pull request #4526 from rabbitmq/dependabot/github_actions/master/actions/cache-3.0.2
Fix for #4523
Bump actions/cache from 3.0.1 to 3.0.2
Trigger leader election on remote node
Add test for importing existing queue
Speed up re-importing queue definitions
Revert "Do not declare queues that already exist"
Add test for importing existing queue
Speed up re-importing queue definitions
Merge pull request #4519 from rabbitmq/mk-3.9.15-release-notes-update
Add #4510 to 3.9.15 release notes
Merge pull request #4511 from rabbitmq/rabbitmq-server-4510-stream-coordinator-all-machine-upgrades
Merge pull request #4513 from rabbitmq/mk-3.8.29-release-notes
3.8.29 release notes
Explain the reason of 1-to-1 machine upgrades in stream coordinator
Convert random and least-leaders to balanced
Handle machine upgrades incrementally in stream coordinator
Merge pull request #4506 from rabbitmq/bump-otp-for-oci
Adopt otp 24.3.3 for OCI workflow
Merge pull request #4502 from rabbitmq/mk-squash-a-test-warning
AWS peer discovery integration suite: squash a compiler warning
Merge pull request #4499 from rabbitmq/mk-upgrade-eetcd
Update eetcd to 0.3.5 in Bazel workspace
Upgrade eetcd to 0.3.5
Merge pull request #4495 from rabbitmq/rabbitmq-server-4493
Correct a management UI metric description
Update 3.9.15.md
Merge pull request #4490 from rabbitmq/mk-update-3.9.15-release-notes
Another 3.9.15 release note updates
Merge pull request #4470 from rabbitmq/dependabot/github_actions/master/peter-evans/create-pull-request-4.0.2
Merge pull request #4468 from felixhuettner/fix/migrate_leadership
Merge pull request #4469 from rabbitmq/dependabot/github_actions/master/actions/download-artifact-3
Bump peter-evans/create-pull-request from 4.0.1 to 4.0.2
Merge pull request #4463 from rabbitmq/unsupported-policies-queue-declare
Bump actions/download-artifact from 2 to 3
Merge pull request #4474 from rabbitmq/oci-workflow-conditional-push
Merge pull request #4456 from rabbitmq/bump-rules_erlang
Attempt to make the OCI workflow behave reasonably for PRs
Adopt latest rules_erlang
Adjust some usages of `erlc_opts` for rules_erlang 2.5.1
Allow queue leader locator to be set in rabbitmq.conf
Fix migrate leadership timeout
Avoid expensive least replicas selection
Merge pull request #4440 from rabbitmq/use-rules_erlang-2.5.0
Bugfix: check unsupported policies on queue.declare
Merge pull request #4458 from luos/fix-report-master
Do not declare queues that already exist
Bring over PROJECT_APP_EXTRA_KEYS values from make to bazel
Updates for rules_erlang 2.5.0
Prefer running nodes for replica selection
fix report crashing priority queues
Update 3.10.0 release notes in master
Filter out drained nodes when selecting stream leader
Filter out drained nodes when selecting quorum queue leader
Merge pull request #4453 from rabbitmq/mk-3.9.15-release-notes-update
Merge pull request #4452 from rabbitmq/mk-3.10-release-notes-update
Update 3.10.0 release notes
Merge pull request #4431 from rabbitmq/loic-disable-expensive-v1-qi-stats
Restore previous code
Merge pull request #4446 from rabbitmq/rabbitmq-server-4444
Take other eldap_search_result cases into account
Support quorum queue leader locator
Remove max-in-memory-* in Management UI
Remove the CQv1 disabled stats from management/Prometheus
CQv1: Disable expensive stats killing v1 performance
Merge pull request #4438 from rabbitmq/mqtt_quorum_config
Add a visible warning for mqtt.durable_queue_type
add config example for mqtt quorum
Merge pull request #4435 from rabbitmq/mk-erlang-25-redundant-queue-federation-test
Erlang 25 compat: drop a duplicate flaky test
Merge pull request #4400 from rabbitmq/loic-cqv2-consolidate-writes
Merge pull request #4376 from rabbitmq/loic-update-prometheus.erl
Merge pull request #4377 from rabbitmq/loic-fix-cq-upgrade-3.10
Merge pull request #4420 from rabbitmq/mk-3.9.15-release-notes-update
Proactively add #4376 to release notes
Merge pull request #4418 from rabbitmq/mk-3.10.0-release-notes-update
Link to #4376 in 3.10.0 release notes
Proactively add #4376 to 3.10.0 release notes
Merge pull request #4416 from rabbitmq/mk-3.10.0-release-notes-cosmetics
Minor 3.10.0 release notes corrections
Merge pull request #4413 from rabbitmq/mk-3.9.15-release-notes
Initial 3.9.15 release notes
Merge pull request #4411 from rabbitmq/mk-update-3.10-changelog
Mention #4368 in 3.10 release notes
Update 3.10.0 release notes
Merge pull request #4408 from fwolfsjaeger/rabbitmqadmin-fix-reading-config
Fixed reading SSL settings from rabbitmqadmin config file Fixed reading boolean values from rabbitmqadmin config file
Bump Java test suites dependencies for stream plugins
CQv2: Consolidate index writes when possible
Merge pull request #4402 from rabbitmq/maybe-reduce-peer-discovery-aws-flakes
Attempt to reduce flakes in aws integration tests
Fixup the oci.yaml workflow to not be branch specific
Instead of running dependabot on all the release branches
Merge pull request #4254 from rabbitmq/mqtt_quorum
mqtt.queue_type => mqtt.durable_queue_type
Merge pull request #4388 from rabbitmq/dependabot/github_actions/master/peter-evans/create-pull-request-4.0.1
Bump peter-evans/create-pull-request from 3 to 4.0.1
Configure dependabot to run on all release branches
Merge pull request #4382 from rabbitmq/dependabot/github_actions/actions/cache-3.0.1
Bump actions/cache from 1 to 3.0.1
Add quorum queues support for MQTT
Merge pull request #4374 from rabbitmq/bump-rules_erlang
Fix next_seq_id value when none is found in terms
Update Prometheus.erl to 4.8.2
Merge pull request #4245 from rabbitmq/rabbitmq-server-2577
Adopt latest rules_erlang
Add necessary items for hex-publish to work for amqp10_client
Update amqp10_client and amqp10_common for hex.pm publish
Merge pull request #4368 from rabbitmq/stream-make-osiris-listener-registration-idempotent
Return consumer in send_chunks
Make Osiris listener registration idempotent
Merge pull request #4365 from rabbitmq/bump-rules_erlang
Merge pull request #4366 from rabbitmq/mk-federated-queue-suite-cosmetics
Federated queue suite: make it easier to identify messages
Adopt latest rules_erlang
Merge pull request #4355 from rabbitmq/remove-extra-rabbitmq-components-mk-file
Revert "Bump a few timeouts in a flakey suite"
Remove extra copies of rabbitmq-components.mk & erlang.mk
Merge pull request #4274 from rabbitmq/upgrade-erlang-mk
Merge pull request #4350 from rabbitmq/mk-rabbit_fifo_int-flakes
Bump a few timeouts in a flakey suite
Merge pull request #4343 from rabbitmq/qq-snapshot-interval
Make Quorum queue snapshot interval configurable
Update 3.10.0 changelog with idle_change format change
3.10.0 release notes: minor grammar corrections
Merge pull request #4331 from rabbitmq/lukebakken-patch-1
Update 3.10.0 release notes
Update 3.9.14 release notes to include #4324
Merge pull request #4327 from rabbitmq/loic-kura-boost-v2-confirms-perf
Merge pull request #4329 from rabbitmq/rabbitmq-server-4277-4278-fixes
Fix return value of now_to_str
CQv2 index: Reduce number of calls to segment_entry_count/0
CQv2 index: Increase threshold before flushing to disk
Use bazel for building the oci in github actions (#4322)
Merge pull request #4324 from felixhuettner/fhcs_write_concurrency
Merge pull request #4323 from rabbitmq/cli-focused-tests
Allow selective cli test runs with --test_env TEST_FILE
Merge pull request #4316 from rabbitmq/mk-bump-copyright-year-2022
Bump (c) year
Merge pull request #4308 from rabbitmq/bump-rbe-23
Merge pull request #4307 from rabbitmq/mk-rabbit-channel-naming-borrowed-from-rabbitmq-server-4004-and-4305
Use latest rbe-erlang-platform/linux-erlang-23.3
Naming from #4305
Merge pull request #4306 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
Merge pull request #4272 from rabbitmq/rabbit_fifo_dlx_integration_SUITE-flake
Merge pull request #4301 from rabbitmq/mk-3.8.28-release-notes
3.8.28 release notes
Merge pull request #4297 from rabbitmq/loic-faster-backing_queue_SUITE
Make backing_queue_SUITE fast on macOS
Merge pull request #4293 from rabbitmq/bump-rbe-24
Use latest rbe-erlang-platform/linux-erlang-24.3
Update the patch version tracking for the OCI workflow
Automated PRs for erlang updates in actions uses erlang 24.3
Update 3.9.14 release notes
Merge pull request #4289 from rabbitmq/mk-3.9.14-release-notes-update
A typo
Update 3.9.14 release notes
Merge pull request #4285 from rabbitmq/rabbitmq-server-4284
LDAP: match on eldap_search_result record for OTP 24.3 compat
Merge pull request #4217 from rabbitmq/rabbitmq-server-4133-monitor-stream-local-member
More #4217 feedback (cosmetics)
More #4217 feedback (cosmetics)
Address #4217 QA feedback (cosmetics)
Merge pull request #4277 from rabbitmq/rabbitmq-server-4276
Small tweak to automated PR comments by mergify
Merge pull request #4214 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
Use Erlang 24.3.1 as otp-max OCIs
Update some logging timestamps
Upgrade erlang.mk
Adjust assertions in an effort to reduce flakes
Enable write_concurrency for file handle cache stats
Merge pull request #4264 from rabbitmq/rabbit_exchange_type_consistent_hash_SUITE-flakes
Tweak the mergify comments to be less agressive
Attempt to reduce test flakes in consistent_hash_exchange suite
Merge pull request #4258 from rabbitmq/rabbitmq-server-4216
Merge pull request #4260 from tomyouyou/clear_permissiions_first_when_delvhost
Fixup message content in mergify config
Add new rules to mergify config
Add gen_batch_server version bump to 3.10.x release notes
Clear the permissions first to prohibit new incoming connections when deleting a vhost.
Cosmetics
Cosmetics
rabbitmqct {encode, decode}: accept more values via standard input
Merge pull request #4253 from rabbitmq/mk-disable-kernel-prevent-overlapping-partitions
Refactoring per suggestion from @dumbbell
Disable kernel.prevent_overlapping_parititions in rabbitmq-service.bat
Disable kernel.prevent_overlapping_partitions at VM startup time
Disable kernel.prevent_overlapping_partitions early on boot
Merge pull request #4242 from rabbitmq/mk-rabbitmq-server-4127-followup
Fix a few small issues reported by dialyzer
Bazel build tweaks
Update rabbitmq_shovel_management's BUILD.bazel
rabbit_shovel_mgmt: refactor
CLI: make it possible to delete a Shovel on any target node
CLI: make it possible to restart a Shovel on any target node
Changing rpc shovel calls timeout to 25 seconds
Adding timeout for shovel calls
change logging, remove infinity timeout from rpc calls
Adding shovel_mgmt_SUITE for rabbitmq_suite tests
fixing indentations in rabbit_shovel_mgmt
moving expected value before actual in unit test assertions
Splitting into util file, adding tests
Make delete/restart shovel return false on error
Refactoring get_shovel_data function, as well as fixing indentation
Adding functionality to delete/restart shovel on any node in cluster
Fix usage of add_uaa_key command
Re-issue monitors to clean up stale listeners
Fix stream coordinator v1-to-v2 machine state change
Do not change state for local member listener in v1
Filter a stream queue test in mixed-version cluster mode
Skip stream queue tests in mixed-version cluster testing
Fix a couple of typo
Use node with latest machine version to connect
Skip 2 stream queue tests in mixed-version cluster testing
Bump machine version from 1 to 2 in stream coordinator
Delete queue at end of test
Use stream coordinator to check local member presence
Re-create Osiris reader on local member change
Fix eol sending for stream queue
Add local member listener to stream coordinator
Merge pull request #3121 from rabbitmq/quorum-queues-v2
rabbit_fifo: tidy up and formatting
gen_batch_server 0.8.7
Merge pull request #4233 from ansd/nxdomain
Fix badmatch when basic.get on quorum queue with expired messages
Merge pull request #4218 from rabbitmq/fix-cli-list-queues
Fix 'rabbitmqctl list_queues --help' output
Remove Travis CI badge in OAuth 2 plugin
Merge pull request #4213 from rabbitmq/dependabot/github_actions/actions/checkout-3
Bump actions/checkout from 2.4.0 to 3
Delete commented quorum queue in-memory tests
Exclude single_dlx_worker from mixed version tests
Add test for all-with-x binding argument
Fix bug in v1 to v2 conversion
Fix upgrades from rabbit_fifo_v1 to v2
Speed up purging quorum queues
Remove purge from rabbit_fifo_dlx
Remove prefix message code
Reduce per-message memory usage if message TTL is set
Use one ?MSG macro
Save memory for dead-lettered messages
Move eventually and consistently to rabbit_ct_helpers
Fix dialyzer warning
Add note about missed Prometheus counter updates
Route also to extra BCC queues when dead-lettering
Fix failing GitHub action
Avoid ETS lookup
Resend pending commands if same leader re-elected
Fix next_seq in rabbit_fifo_client
Test at-least-once routes to different target queues based on reason
Reject message if it cannot be delivered
Delete from unsettled target queues when target queue is deleted
Fall back to at-most-once if feature flag stream_queue is disabled
Enable required feature flags for mixed version cluster tests
Fix dialyzer warnings
rabbit_fifo: test fixes
Replace lqueue:peek/1 with new lqueue:get/2
Fix rebase onto origin/master
rabbit_fifo: fix SAC bug when a cancelled consumer is revived
rabbit_fifo: refactor decorator notifications
Redeliver rejected messages in dlx worker
Take into account dead-lettered messages for max-length
rabbit_fifo: enqueue any pending messages during v2 conversion
rabbit_fifo: refactor consumer record
Add dead-letter-strategy policy validator test
Delete queue returns number of ready messages
Allocate less memory
Output some logs only on Ra leader
rabbit_fifo_prop: fix build error
rabbit_fifo: conversion bug fixes and remove prefix_msgs field
Add memory details of dlx workers
rabbit_fifo_client: allocation optimisations of common code paths.
rabbit_fifo alloc opts
rabbit_fifo: tidy up, fix tests
Comment out unused function
rabbit_fifo: slight optimisation around completion
rabbit_fifo: cache incoming message if it can be immedately delivered
Reduce dlx consumer prefetch
rabbit_fifo: remove some commented code
rabbit_fifo: optimise enqueue path
Fix pipeline
Do not keep rabbit_fifo messages in memory
Emit release cursor when expiring messages
Add Prometheus metrics for dead-lettered messages
Run dead letter TTL tests for quorum queues
Add more specs
Fix dialyzer warnings
Improve performance of dlx worker
Allow for higher dlx throughput by default
Log warning once in dlx worker
Do not redeliver if target is quorum or stream queue
Make rabbit_fifo_dlx not depend on rabbit_fifo
Handle queue eol event
Clean up when terminating dlx worker
Simplify receiving dlx deliveries
Add rabbit_fifo_dlx unit tests
Simplify rabbit_fifo
QQ: add back expire before checkout
QQ: optimise expire messages
Do not register rabbit_fifo_dlx_worker
Increase timeout to 15 minutes
Try an even smaller size for dlx property tests.
rabbit_fifo_prop: turn down iterations of snapshots_dlx a bit
add lg:stop/0 to xref ignore list
Send acks asynchronously
Make dlx_worker terminate itself if leader is down
rabbit_fifo_prop fixes
Set delivery_limit on quorum queue dead_lettering tests
update rabbit_fifo_SUITE expectations
Bazel suite config
Add more rabbit_fifo_dlx_integration_SUITE tests
QQ Fix invalid_policy test
Move timers to aux eval event
Add dlx integration tests for stats and many_target_queues
QQ: handle all dlx commands in one clause
QQ: resend protocol refacor
QQ: better handle repeated requeues.
Add integration tests for at-least-once dead-lettering
Add at-least once dead-lettering for quorum queues
Maintain order when dead-lettering rejected messages in quorum queues
Delete oqueue
QQ memory use improvement
Replace nested tuples with improper lists
rabbit_fifo: code readability
QQ: introduce new machine version (2)
Merge pull request #4207 from rabbitmq/use-assert_suites-from-rules_erlang
Use rabbitmq 3.9 for mixed version testsing (#4208)
Use the assert_suites function from rules_erlang
Merge pull request #4203 from rabbitmq/all-with-x
Support all-with-x in x-match binding arg for headers exchange
Merge pull request #4198 from rabbitmq/dialyzer-warning-fixes
Additional dialyzer warning fixes
Merge pull request #4194 from rabbitmq/rabbitmq-server-4189
Merge pull request #4193 from rabbitmq/rabbitmq-server-4192-basic-cancel-on-stream-queue-deletion
Use lowercase "connection" in two more log entries
Add test for basic.cancel notification on stream queue deletion
Remove stream from rabbit_queue_type when deleted
Merge pull request #4182 from rabbitmq/bump-rules_erlang
Tighten up dialyzer usage
Adopt latest rules_erlang
Merge pull request #4169 from rabbitmq/dependabot/github_actions/erlef/setup-beam-1.11
Merge pull request #4172 from rabbitmq/fix-amqp_client-flake
Merge pull request #4171 from rabbitmq/fix-ct-helpers-flake
Adjust test to avoid race condition and flake
Adjust catch clause to causing flakiness in some suites
Bump erlef/setup-beam from 1.10 to 1.11
Use Erlang 24.2.1 and Elixir 1.13.3 in otp-max OCIs
Merge pull request #4142 from rabbitmq/bump-rules_erlang
Ignore dialyzer warnings for most apps
Adopt latest rules_erlang
Make these list order-independent
Update this test for new mock .ez files
Correct .app file of mock plugin 02
  Update mock_rabbitmq_plugins_03 and mock_rabbitmq_plugins_04
Update mock_rabbitmq_plugins_01 and mock_rabbitmq_plugins_02
Mention strings are UTF8-encoded in stream protocol
Update 3.10 release notes
Merge pull request #4153 from rabbitmq/rabbitmq-server-4149
Support Consul 1.11 responses
Cosmetics
3.10 change log updates
Merge pull request #4143 from rabbitmq/match-any-with-x
Merge pull request #4146 from 95ulisse/rabbit-management-add-payload-encoding-option-when-publishing
Add option to choose payload encoding when manually publishing a message from the Management UI.
Merge pull request #4144 from rabbitmq/mk-3.10-release-notes-draft
3.10.0 release notes: add highlights
Initial 3.10 release notes
Allow headers exchange to match headers starting with `x-`
Manually apply ideas from #4141 (contributed by @ktdreyer)
Bump observer_cli to v1.7.2
Merge pull request #4131 from rabbitmq/loic-cqv2-dialyzer
CQv2: Fix Dialyzer warnings
Merge pull request #4071 from rabbitmq/loic-cqv2-more-testing
rabbit.classic_queue_default_version => classic_queue.default_version
Merge pull request #4124 from rabbitmq/http-api-can-clear-user-tags
Allow clearing of user tags while also setting a user password
CQv2 prop: Tweak command weights
Merge pull request #4110 from rabbitmq/lqueue
CQv2 prop: Refactor duplicate code
Add is_list guards for deprecated state in lqueue:len/1
Merge pull request #4117 from rabbitmq/stream-handle-stream-coordinator-response-for-topology
Handle stream coordinator error response for topology request
Bump recon version under bazel to match make
Merge pull request #4108 from rabbitmq/gh-4019-take-2
Add lqueue:get/2
Add lqueue:get/1 and lqueue:get_r/1
Allocate 2 bytes less per queue operation
Elixir 1.13 OptionParser no longer supports :atom values
Support Elixir 1.13
CQv2 prop: Clean restarts don't drop transient messages
CQv2 prop: Properly handle messages sent before enabling confirms
CQv2 prop: Keep track of confirms for more accuracy
Allow the use of RABBITMQ_CONFIG_FILE env var with bazel run broker
Merge pull request #4062 from rabbitmq/mk-definition-import-checksumming
Merge pull request #4103 from luos/fix-oauth-additional-scopes-param-1
convert additional_scopes_param to the correct equivalent
Merge pull request #4098 from luos/fix-shovel-setup-with-0-length-2
Fix up previous commit
Avoid writing an empty buildbuddy api key when a PR triggers it
fix missing 0 in error message
CQv2 prop: Add commands to discard one/many messages
CQv2 prop: Be more specific: reject is really requeue
fix shovels crashing with delete-after=0
CQv2 prop: Use a single limiter pid per test case
CQv2 prop: Don't make cmd_publish_msg use confirms
Split function spec for Erlang 23 compilation
CQv2 prop: Ensure we can fill up entire segments
Add missing function head
More specs for definition import
Adjust spec issues spotted by Dialyzer
Support content hashing in definition imports via HTTPS
Merge pull request #4081 from rabbitmq/bump-rules_erlang
Support definition content hashing for directories
Merge pull request #4090 from rabbitmq/stream-cli-tolerate-unknown-fields
Merge pull request #4092 from rabbitmq/stream-management-use-feature-flag-public-api
Use feature flag public API in stream mgmt utils
Tolerate unknown fields in stream CLI command requests
CQv2 prop: Send transient messages as well
CQv2 prop: Only use the "many" commands for 2+ messages
Mark rabbitmq_mqtt:auth_SUITE as flaky
Merge pull request #4073 from rabbitmq/fan-out-without-stream-queue-feature-fix
CQv2 property suite: Rename to classic_queue_prop_SUITE
CQv2 property suite: Add acks/rejects out of order
Merge pull request #4083 from rabbitmq/rabbitmq-server-4082-stream-management-mixed-version-cluster
Format stream management source files
Use atoms instead of method references
Adopt latest rules_erlang
Merge pull request #4078 from rabbitmq/remove-legacy-lines
Remove lines that do not apply
CQv2 property suite: Add command to disable v2 CRC32 check
CQv2 property suite: Enable cmd_purge again
CQv2 property suite: Fix vhost restart cancelling consumers
Fix performance regression when stream_queue feature is not enabled
Update GitHub Actions triggering
CQv2 property suite: Enable cmd_restart_queue_dirty
CQv2 property suite: Register a default consumer
CQv2 property suite: Handle shutdown exits on teardown
Merge pull request #4068 from rabbitmq/update-buildbuddy-toolchain
Add missing bazel config inheritance for erlang-git-master build
Remove deprecated jdk bazel toolchain flags
Update buildbuddy toolchain
Don't skip definition import if target node count has not been reached
Correct a typo in rabbit.definitions.import_backend aliasing
Fixup an include path for bazel
Reduce log verbosity in a few places
New tests For definitions.skip_if_unchanged
Safely fetch skip_if_unchanged from options
Support --skip-if-unchanged for global imports via CLI tools
Squash a compilation warning
Definition content hash storage for individual virtual hosts
definitions.hashing.use_hashing => definitions.skip_if_unchanged
Introduce definition hashing during import
Initial support for hashing during definition import
Introduce definition file checksum settings
Account for state differences in channel_operation_timeout_test_queue
Introduce classic_mirrored_queue_version feature flag
Merge pull request #3029 from rabbitmq/modern-classic-queue-index
Try to avoid multiple checks when a commit is pushed to a PR
Merge pull request #4043 from rabbitmq/memory-details-queue-colour
Merge pull request #4028 from rabbitmq/windows-workflow
Use different colour for each queue type
Change 'Queues' to 'Queues and Streams' in memory details
Fix color for queues in memory details
Put the workflow on a schedule rather than every commit
Workaround mix error on windows
Revert "Remove the windows workflow for now"
Merge pull request #4042 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
CQ property suite: Fix cmd_basic_get_msg
:bazel_erlang_lib -> :erlang_app
Fix a consistency issue in the v1 index after dirty restarts
Rename `variable_queue_default_version` to `classic_queue_default_version`
Add rabbit.variable_queue_default_version to the cuttlefish schema
CQ property suite: Temporarily disable dirty queue restart
Shard classic_queue_SUITE per case for CI
Fall back to supervisor when process is missing from pg
CQ v2: Fix infinite loop in convert_to_lazy in rare scenarios
CQ property suite: Fix race condition after closing consumers
Fix reading duplicates from index
CQ property suite: Add queue crash
CQ property suite: Add vhost restart
Add next_deliver_seq_id to backing_queue_status info
Cleanup the CQ property suite
Set backtrace_depth to 16 in CQ property suite
CQ property suite: queue:all/2 and queue:delete/2 not in OTP 23
Set classic_queue_SUITE "large" in Bazel
CQ property suite: queue:fold/3 not available in OTP 23
Reword "clean" to "clean shutdown" in the logs
Reword "dirty" to "unclean shutdown" in the logs
CQ property suite: Add publisher confirms
CQ property: test messages with expiration
CQ property: Set "mandatory" with channel publish too
Tweak command weights in CQ property suite
Add channel_receive_and_reject to CQ property suite
Add channel_receive_and_ack to CQ property suite
Add basic.cancel to CQ property test suite
Always write to the index when writing to the v2 store
Avoid leaking one fd during v2->v1 conversion
Add channel consume to the CQ property suite
Fix incorrect log messages
CQ: Convert messages pending ack
CQ v2 store: Clear the cache when deleting segments
CQ v2 store: Reset write_offset when closing fds
Don't call gatherer:finish/1 twice on mixed v1/v2 recovery
CQ v1 index: handle zeroed out files
CQ v2 index: handle empty files on recovery
Fortify v1->v2 conversion resume
Make sure the per-queue store flushes to disk on sync
Fortify v2->v1 conversion resume
Implement resuming v2->v1 conversion during dirty recovery
Fix resuming v1->v2 conversion during dirty recovery
CQ v2 index: only call OnSyncFun if there's entries to sync
Remove entries from store cache when deleting segments
Handle empty per-queue store files on dirty recovery
Fix v2 backing_queue recover test
Call BQ:set_queue_version when policy is removed
Don't remove MsgId from Msg when storing in per-queue store
Add queue version to management queue/policy forms
Fix classic_queue_SUITE for OTP < 24
Fix unused vars warning in classic_queue_SUITE
Update BUILD.bazel
Ensure index files with holes get removed
Add missing callback in channel_operation_timeout_test_queue
Add file_handle_cache reservations for the per-queue store
Sync the store when the index is flushed
Reenable some checks in backing_queue_SUITE
Terminate per-queue store before index reset
Terminate per-queue store before delete_and_terminate
Update channel_operation_timeout_test_queue
Rename a rabbit_variable_queue local function
Add top comments about the per-queue delivers tracking
Introduce a next_deliver_seq_id/2 function
Remove ?INDEX and ?STORE from rabbit_variable_queue
Remove commented-out code, todos, unused _Vars
Fix v1 CQs issues introduced in previous commits
Reenable internal publish/basic_get
Test using concurrent channels
Test queue purge
Set mandatory/confirm flags in proper test suite
Do a basic_get even when the queue is empty
Test changing both mode and version at the same time
Tweak the property based test suite efficacy
CQ version switch via policies + proper test for this
Small cleanup of CQ property suite
Switch queue mode
Test all combinations of classic/lazy v1/v2
Initial classic queue property based suite
Fix remaining tests for CQ v1
Test both indexes
Test both CQ v1 and v2
Rename mqi_state terms key to v2_index_state
Reduce v2 segment_entry_count to 4096
Cleanup 9/x
Dirty recovery: assert index segment file size
Cleanup 8/x
Count the number of messages dropped on dirty recovery
Cleanup 7/x
Type the per-queue store module
Cleanup 6/x
Cleanup 5/x
Cleanup 4/x
Implement per-queue store checks during recovery
Cleanup 3/x
Cleanup 2/x
Reenable embed 0/1024 groups and fix embed 0 recovery
Cleanup 1/x
Add store file header
Fix per-vhost store not removing messages
Fix a couple crashes + add store entry header + CRC32 check
Fix memory leaks
Fix channel_operation_timeout test
Enable the per-vhost store again
Reenable some tests that were commented out
Add missing v2 store terminate call
Fix remaining tests
Some cleanup and fix most tests
Fix obvious mistakes in previous commit
Do not write MsgId if it is not necessary
Track delivers per-queue rather than per-message
Don't use an ets table for the per-queue store cache
Use a gb_sets directly in the index for confirms
Remove file:sync/1 calls for the new store/index
Use a cache for index entries just written to disk
Per-queue classic queue store
Don't kill the gatherer when there's a problem with a queue
More reliable upgrades from old index
Minor comment/whitespace tweaks
Improve memory and disk usage when upgrading to new index
Add file_handle_cache FD reservations
Add a debug printout in reduce_fd_usage
Add file_handle_cache_stats calls when reading/writing
Limit the number of FDs that the index keeps open
Version the terms we store during shutdown
Implement automatic upgrade from old to new index
Start at version 2 and write version in the stub file
Fix recovery with next_seq_id>0 but empty index
Fix xref errors
Rename to rabbit_classic_queue_index_v2
Don't use fullsweep_after=0 anymore
Flush the index to disk when reducing memory use
Limit the number of index reads at once when folding
Alternative to file:allocate for Windows
Fix writing to segment files that have been deleted
Improve the way we flush the buffer to disk
Keep next_seq_id when doing a clean shutdown
Don't add acks to the write buffer when segment was deleted
No longer tests with different embed settings
Simplify creating new segment files
Optimise message recovery
Variable queue: have an upper limit in message reads
Variable queue: don't always write index to disk anymore
Fix wrong value for acks during recovery
Low hanging fruit: tiny optimization
Get rid of over-engineering (part 3)
Get rid of over-engineering (part 2)
Get rid of over-engineering (part 1)
Replace classic queue index with a modern implementation
Merge pull request #4026 from rabbitmq/bump-rbe-24
Merge pull request #4025 from rabbitmq/bump-rbe-23
Merge pull request #4031 from rabbitmq/bump-rules_erlang
Adopt latest rules_erlang
Use latest rbe-erlang-platform/linux-erlang-24.1
Use latest rbe-erlang-platform/linux-erlang-23.3
Shard the //deps/rabbit:queue_parallel_SUITE
Merge pull request #3963 from rabbitmq/use-rules_erlang
Fix osiris and ra git branches in workspace_helpers.bzl
Once again reference rules_erlang by commit in WORKSPACE.bazel
3.9.13 release notes
Remove the windows workflow for now
Use rules_erlang v2
Bump dependencies in streams Java tests
Merge pull request #4000 from rabbitmq/mk-3.9.13-release-notes
Mention Osiris upgrade to 1.2.4 in 3.9.13 release notes
Kick off 3.9.13 release notes
Merge pull request #3987 from rabbitmq/dependabot/github_actions/erlef/setup-beam-1.10
Bump erlef/setup-beam from 1.9 to 1.10
Merge pull request #3981 from rabbitmq/mk-two-staged-definition-import
Merge pull request #3978 from rabbitmq/lukebakken/ship-redbug
Correct log message formatting
Add redbug library
Merge pull request #3980 from rabbitmq/gh-3936-followup
Import queue and binding definitions when a certain number of nodes join
Replace one use of filelib:is_regular/1
GitHub Actions updates for the new v3.10.x branch
Merge pull request #3970 from rabbitmq/gh-3895-bugfix
Fix issue with fsutil
Merge pull request #3967 from rabbitmq/tomyouyou-stream_select_leader
Stream coordinator: handle machine_version command
Make stream coodinator machine versioned
'rabbit_stream_coordinator:select_leader' runs with wrong comparison
Revert "Fix the sha and prefix for bazel-erlang based on the repo rename"
Fix the sha and prefix for bazel-erlang based on the repo rename
Revert "Update Bazel rules repository name"
Update Bazel rules repository name
Merge pull request #3956 from tomyouyou/record_dist_ip
Merge pull request #3957 from rabbitmq/rollback-rebar3_hex-version
Limit the version of rebar3_hex to v6
The wrong distribution listener IP address is recorded when it is configured.
Merge pull request #3953 from rabbitmq/mk-bump-copyright-year
Bump (c) year in node startup banner
Merge pull request #3952 from rabbitmq/mk-3.8.27-release-notes
3.8.27 release notes
Update 3.9.12.md
Merge pull request #3950 from rabbitmq/mk-3.9.12-release-notes
3.9.12 release notes
Merge pull request #3947 from skorzhevsky/fix-readme-in-auth-backend-cache
Fix config example in README.md for rabbitmq_auth_backend_cache
Merge pull request #3936 from rabbitmq/lukebakken/fix-all-read-file
Merge pull request #3941 from rabbitmq/bazel-run-dev-broker
Fix all uses of file:read_file/1
Skip new import testcase on mixed environments
Disable +deterministic in compilation_mode dbg under bazel
Merge pull request #3934 from rabbitmq/decode-method-fields
Reduce CPU usage of rabbit_framing_amqp_0_9_1:decode_method_fields/2
#3925 follow-up: add a rabbit_common Bazel dep
#3925 follow-up: don't include Erlang client headers
#3925 follow-up: update Bazel files to match new suite names
Merge branch 'thuandb-master'
Rename two newly introduced test modules
delegate: documentation edits
Make xref happy
Import definitions: support user limits
Cosmetics
wrap authentication calls in try catch to avoid leaking error
Fix tests
Use protected ets so that data can be read quickly
Clarify warning message
Restore old win32 free disk query using `dir` as a last resort
Be smarter about extracting the drive letter from a directory on win32
Disk monitor improvements
Optimisation for 'delegate'
Merge branch 'delegate_opt'
delegate: documentation edits
Merge branch 'master' into delegate_opt
Merge pull request #3930 from rabbitmq/import-user-limits
Make xref happy
Import definitions: support user limits
Merge branch 'luos-wrap_auth_calls_in_try_catch'
Cosmetics
wrap authentication calls in try catch to avoid leaking error
Merge pull request #3895 from rabbitmq/lukebakken/rabbit_disk_monitor-improvements
add bazel rule definition for rabbit_mirror_queue_misc_SUITE and rabbit_mirror_queue_sync_SUITE
fix the sync pause time calculation
reset counter after each sync throughput check interval
minor fix on condition to stop batching when total batch size is large
minor update for batching messages when syncthroughput is 0
Support configure max sync throughput in CMQs
Fix tests
Use protected ets so that data can be read quickly
Clarify warning message
Restore old win32 free disk query using `dir` as a last resort
Be smarter about extracting the drive letter from a directory on win32
Disk monitor improvements
Merge branch 'polaris-alioth-prevent_unnamed_policy_when_loading_definition'
A slightly improved log message wording
Increase token expiration time
Start SSL app for testing server
Standardise README.md
Correct configuration example in README.md
Add timeout for httpc request
Add configurable crl_check and fail_if_no_peer_cert
Add wildcard configuration
Update README.md
Set peer_verification default as verify_none
Update better configuration names
Oauth2 plugin improvements
read term file using with_handle/1
Use `raw` option for `file:read_file_info/2` to work around win32 mem leak erlang/otp#5527
Fix win32 memory leak by using `raw` file operations. Not ideal but this skips all file servers.
Fix log level when halting the VM
Make health checks less resource intensive
Code style rectification
Merge pull request #3887 from anhanhnguyen/master
Prevent creating unnamed policy when loading definition
Merge pull request #3906 from rabbitmq/lukebakken/fix-mem-leak
read term file using with_handle/1
Use `raw` option for `file:read_file_info/2` to work around win32 mem leak erlang/otp#5527
Fix win32 memory leak by using `raw` file operations. Not ideal but this skips all file servers.
Merge pull request #3907 from rabbitmq/lh-fix-log-level-on-stop
Merge pull request #3905 from rabbitmq/lukebakken/node-health-check-fix
Merge pull request #3908 from rabbitmq/stream-coord-mnesia-update-crash
Cleanup BUILD.bazel
Stream coordinator: avoid mnesia update process crashing after delete
Fix log level when halting the VM
Make health checks less resource intensive
Adjust the way rabbit_fifo.hrl is referenced in rabbit_fifo_SUITE
Additional erlang_ls.config fixes under bazel
Merge pull request #3894 from rabbitmq/import-optimizations
Optimise user declare/update/import by reducing the number of operations
Increase token expiration time
Start SSL app for testing server
Standardise README.md
Correct configuration example in README.md
Add timeout for httpc request
Add configurable crl_check and fail_if_no_peer_cert
Add wildcard configuration
Update README.md
Set peer_verification default as verify_none
Update better configuration names
Oauth2 plugin improvements
Run the test suite on PRs
Merge pull request #3882 from rabbitmq/mergify/bp/master/pr-3880
Revisit operator policy merging rules for boolean fields
Merge pull request #3879 from rabbitmq/rabbitmq-server-3874-stream-response-code-on-leader-unavailability
Increase timeout in stream test
Use AssertJ conditions in Java stream test suite
Return appropriate response when stream leader not available
Bump Java test dependencies in stream test suites
Merge pull request #3870 from rabbitmq/lh/mandatory-before-confirms-bug
Fix case where confirms may not be sent
Merge pull request #3862 from rabbitmq/bump-rbe-24
Merge pull request #3861 from rabbitmq/bump-rbe-23
Optimisation for 'delegate'
Add deps/rabbit/apps/* to the bazel erlang_ls config
Use latest rbe-erlang-platform/linux-erlang-24.1
Use latest rbe-erlang-platform/linux-erlang-23.3
Merge pull request #3838 from rabbitmq/lukebakken/allow-compress-on-rotate
Merge pull request #3835 from rabbitmq/rabbitmq-server-3831
Log rotation date spec: parse $H the same way Lager does
Merge pull request #3842 from rabbitmq/rabbitmq-server-3841-stream-consumer-nested-record
Declare variable for better formatting
Create configuration nested record in stream consumer record
Merge pull request #3824 from rabbitmq/rabbitmq-server-3783-response-code-for-undefined-stored-offset
Add compress option for file rotation
rabbit_logger_std_h: make Dialyzer run
More log rotation date spec parser improvements
Extend log.file.rotation.date parser
Update 3.9.11 release notes
Update 3.9.11 release notes
Merge pull request #3825 from johanrhodin/patch-3
Match help box to correct item
Return "no offset" (19) code when stored offset is undefined
Merge pull request #3822 from rabbitmq/3.9.11-release-notes
Initial 3.9.11 release notes
Merge pull request #3820 from rabbitmq/lukebakken/fix-flaky-gh-3729-test
Remove flaky assertion
Merge pull request #3804 from rabbitmq/qq-clean-properties-before-storage
Merge pull request #3814 from rabbitmq/stream-declare-size
Merge pull request #3816 from rabbitmq/mergify/bp/master/pr-3815
Compile from scratch
Introduce a new CLI tool (scope), rabbitmq-tanzu
Query total number of messages on stream leader on queue.declare
Merge pull request #3805 from tomyouyou/deativate_limit_of_qpid
Merge pull request #3806 from rabbitmq/rabbitmq-server-3803
Log message wording
Simplify tcp_listener argument obfuscation
Add a bazel rule for generating erlang_ls.config
Merge pull request #3781 from rabbitmq/bump-bazel-erlang
tcp_listener: only set credential obfuscation secret if necessary
tcp_listener: avoid logging listener arguments on shutdown
To deactivate limit of all QPids when the limiter has been changed from 'limit' to 'unlimit'.
Adopt latest bazel-erlang
Update rabbit_quorum_queue.erl
QQ: remove decoded properties before storing messages
Add missing Ra commands to the log
Merge pull request #3800 from tomyouyou/stop_stats
Merge pull request #3746 from rabbitmq/lukebakken/gh-3729
To stop collect_statistics when rabbitmq_management has been disabled.
Merge pull request #3798 from wrobell/rabbitmq-streams-doc-protocol-timestamp
Link to most recent description of Osiris chunk format
Merge pull request #3779 from rabbitmq/vhost-exchange-count
Use `rabbitmq_cluster_` prefix for cluster-wide metrics
quorum_queue_SUITE: bump some timeouts
quorum_queue_SUITE: drop a debug line
Wording
Wording
Add optional metrics for vhost and exchange count
Fix quorum queue crash during consumer cancel with return
Do not count unroutable message in global totals
Merge pull request #3708 from rabbitmq/filter-out-queues-from-global-stats
Compile the regex
Merge pull request #3770 from easyteacher/systemd-hardening
3.9.10 release notes wording
Add systemd hardening parameters in rabbitmq-server.service.example
Merge pull request #3734 from rabbitmq/bump-rbe-24
Merge pull request #3733 from rabbitmq/bump-rbe-23
Use latest rbe-erlang-platform/linux-erlang-24.1
Use latest rbe-erlang-platform/linux-erlang-23.3
Update 3.9.10 release notes
Remove incorrect comment
Merge pull request #3763 from rabbitmq/pjk25/bazel-package-generic-unix
Add the bazel target :package-generic-unix
Merge pull request #3755 from rabbitmq/bump-bazel-erlang
Merge pull request #3752 from rabbitmq/stream-flakes
Resolve 3.8 release note conflicts
3.8.26 release notes
Initial 3.8.25 release notes
Merge pull request #3759 from rabbitmq/oauth2-config-fix
Fix cuttlefish config for oauth2
Adopt latest bazel-erlang
Stream coordinator: only initialise queue record if stream id matches
Fixup update-rbe-images workflow
Initial 3.9.10 release notes
Stream coordinator: log member deletions
Apply changes from #3748 to remaining workflows
Merge pull request #3748 from siggisim/fix-keepalives
Further keepalive networking tweaks
Use own key to exclude queues
Merge pull request #3740 from rabbitmq/rabbitmq-server-3739
Merge pull request #3738 from rabbitmq/cleanup-symlink-private-log-message
Merge pull request #3731 from rabbitmq/stream-mnesia-update
Distribution listener settings support in rabbitmq.conf
Stream coordinator: only update amqqueue record if stream id matches
Fixup the "Failed to symlink private_log directory." error in bazel
Update exchange_SUITE timeouts
Exclude queues from aggregated metrics in prometheus collector
Merge pull request #3735 from rabbitmq/use-remote-download-minimal
Use the GitHub Actions Cache in conjuction with buildbuddy
Use ubuntu-latest for all github actions workflows
Use --remote_download_minimal try see if that helps with GH Actions
Merge pull request #3685 from rabbitmq/lukebakken/core-started-before-postlaunch-phase
Store collector pattern in process memory
Update rabbit_ct_broker_helpers:force_vhost_failure/4 for erpc
Merge pull request #3722 from rabbitmq/use-bazel-toolchains-v2
Use externailzed rbe config in bazel
Merge pull request #3723 from wrobell/rabbitmq-streams-doc-protocol-deliver-fix
Fix description of "deliver" command in RabbitMQ Streams protocol documentation
Merge pull request #3714 from rabbitmq/mqtt-crash-log
Merge pull request #3716 from rabbitmq/stream-coordinator-delete-stream-fix
Additional ci tweak based on buildbuddy's input
Revert "Merge pull request #3683 from rabbitmq/use-bazel-toolchains"
Limit AWS integration tests to main branches
Stream coordinator: reset reply_to for delete_stream command
Merge pull request #3683 from rabbitmq/use-bazel-toolchains
Prevent crash logs when mqtt user is missing permissions
Merge pull request #3710 from rabbitmq/generate-rabbitmqadmin-cli-bazel
Merge pull request #3656 from rabbitmq/qq-messages-pending-fixes
Expose pending enqueues in overview output to allow debugging of situation where messages may be stuck.
Merge pull request #3676 from rabbitmq/qq-init-opts
Use a pattern to filter out some queues from global stats
Log it when a boot step finishes running
Use externailzed rbe config in bazel
Generate the rabbitmqadmin cli under bazel
Merge pull request #3699 from rabbitmq/bump-otp-for-oci
Merge pull request #3700 from rabbitmq/bazel-flags
Add --remote_download_toplevel to the bazel config
Adopt otp 24.1.5 for OCI workflow
Set core_started before running postlaunch phase
Merge pull request #3552 from rabbitmq/improve-amqp-10-stream-support
Update 3.9.4.md
Update 3.9.9 release notes
Merge pull request #3587 from rabbitmq/prometheus-label-pre-render-optimization
Remove the update-rbe-images workflow
Update 3.8.24 release notes
Update 3.9.9 release notes
Merge pull request #3689 from rabbitmq/rabbitmq-server-3688
Use a for loop here because IE 11 does not support lambdas
Another 3.8.24 release notes update
Merge pull request #3680 from tuxiqae/patch-1
Grammar
Update 3.8.24 release notes
Avoid slow mnesia transaction on QQ init
Merge pull request #3677 from rabbitmq/3.9.9-release-notes
3.9.9 release notes
Use unique group names in rabbit_stream_SUITE
Pre-render prometheus labels
Fix metric active value when consuming from a QQ
Merge pull request #3628 from rabbitmq/qq-register-enqueuer-reliability
Log recovery time by queue type
QQ: set better timeouts for commands
Handle quorum queue "queue pids"
QQ: try all servers when registering enqueuer
Merge pull request #3667 from rabbitmq/bazel-timeouts
Increase some buildbuddy rbe timeouts
Merge pull request #3657 from rabbitmq/use-new-buildbuddy-url
Merge pull request #3658 from rabbitmq/lukebakken/update-comments-about-dummy-supervisors
Update link in comment
Allow manual triggering of the OCI workflow on arbitary branches
Revert "See if the update-rbe-images workflow can be updated automatically"
Revert "Tweak update-rbe-images workflow"
Revert "Again tweak update-rbe-images workflow"
Adopt the new buildbuddy remote execution url
Merge pull request #3653 from bogdando/drop_ocf_ra
Remove pacemaker OCF RA agent for RabbitMQ
Merge pull request #3652 from rabbitmq/bump-bazel-erlang
Adopt latest bazel-erlang
Merge pull request #3615 from rabbitmq/relax-msg-store-assertion-around-dup-writes-from-same-queue
Merge pull request #3649 from rabbitmq/lukebakken/erlang_ls-tweaks
Tweak more erlang_ls settings
Merge pull request #3647 from rabbitmq/lukebakken/erlang_ls-update
Comment-out code_reload
Again tweak update-rbe-images workflow
Tweak update-rbe-images workflow
Merge pull request #3646 from rabbitmq/bump-bazel-erlang
See if the update-rbe-images workflow can be updated automatically
Adopt latest bazel-erlang
Use version range for stream client Maven dependency
Bump Java dependencies in stream management test suite
Merge pull request #3643 from rabbitmq/rebalance-logging
Turn down logging from queue rebalancing
Add a workflow that will track bazel-erlang master via PRs
Merge pull request #3631 from rabbitmq/creation-as-guid
Merge pull request #3632 from rabbitmq/dependabot/github_actions/actions/checkout-2.4.0
Use erlang:system_info(creation) as GUID
Merge pull request #3635 from rabbitmq/mk-cluster-formation-target-cluster-size-hint
Bump actions/checkout from 2.3.5 to 2.4.0
Introduce a target cluster size hint setting
Use https to fetch bazel-erlang
Use pinned bazel-erlang
Merge pull request #3636 from rabbitmq/bump-otp-for-oci
Adopt otp 24.1.4 for OCI workflow
Merge pull request #3633 from wrobell/rabbitmq-streams-doc-protocol-hex
Use hex values in RabbitMQ Streams protocol description
format with bazel files with buildifier
Maybe reduce flakiness of the exchange_SUITE
Adjustments for the latest bazel-erlang
Type spec fixes
Merge pull request #3553 from rabbitmq/osiris-16-replication-over-tls
Add Osiris to Bazel dependencies in prelaunch
Use Osiris helper to configure stream replication over TLS
Redact password in logs when applying default configuration
Add the sha256 back in for the aten dep in bazel
temporarily comment aten sha256
aten 0.5.7
Merge pull request #3625 from wrobell/rabbitmq-streams-doc-protocol-naming
Fix use of "RabbitMQ Streams" in protocol documentation
Merge pull request #3618 from rabbitmq/bump-otp-for-oci
Merge pull request #3619 from wrobell/rabbitmq-streams-doc-protocol-fix
Fix RabbitMQ Streams protocol documentation
Adopt otp 24.1.3 for OCI workflow
rabbit_msg_store: Accept duplicate writes from the same queue
Remove unused file
Add some notes about additional bazel flags to BAZEL.md
Merge pull request #3599 from rabbitmq/mgmt-ui-prometheus-port-fix
Merge pull request #3576 from rabbitmq/coordinator-error-handling
Merge pull request #3598 from rabbitmq/mgmt-ui-persistent-messages-fix
Disable stream test in mixed versions mode
Enable stream_queue flag with env variable in test suite
Enable stream_queue flag in test suite
Fix ssl port handling in prometheus plugin
Format stream plugin
Fix persistent message count display in mgmt UI
Merge branch 'RentTheRunway-falconertc/fix_duplicate_binding_exchange'
Improve a comment
Finalize 3.9.8 release notes
Merge pull request #3591 from rabbitmq/3.9.8-release-notes
Finalize 3.9.8 release notes
Finalize 3.9.8 release notes
Fix binding deletion in duplicate-binding scenarios
Add tests for duplicate binding scenarios
Merge pull request #3586 from rabbitmq/declare-stream-with-node-down-fix
Take all clustered nodes into account when declaring stream.
Update 3.9.8 release notes
More accurate wording in the release notes
Mention osiris hostname fix in the release notes
Merge pull request #3584 from rabbitmq/dependabot/github_actions/actions/checkout-2.3.5
Bump actions/checkout from 2.3.4 to 2.3.5
Merge pull request #3574 from rabbitmq/fix-stream-coordinator-log
Merge pull request #3582 from luos/channel-q-pid-leak-fix-v39x
Merge pull request #3579 from tvhong-amazon/tvhong/log_error
Merge pull request #3562 from rabbitmq/disable_stream_plugin_3557
Wording
Attach add/delete super stream command to streams scope only
Formatting, wording
Fix stream coordinator log message
Merge pull request #3503 from rabbitmq/super-stream-cli
Handling of `stream_not_found` return value when init a stream client
Merge pull request #3544 from rabbitmq/bump-otp-for-oci
amqp10_client: make shutdown scenarios a bit less noisy
Merge pull request #3570 from rabbitmq/lh-fix-memory_breakdown
Fix memory_breakdown for connection procs
Merge pull request #3560 from rabbitmq/lh-fix-mandatory-flag
Fix memory leak when using mandatory flag in CQs
Merge pull request #3566 from rabbitmq/run-broker-more-plugin-ports
Merge pull request #3565 from rabbitmq/stream-queue-handle-unsupported-header-values
change message
Disable the stream_plugin and stream management if the feature flag
Stream queue: handle unsupported header value types
Allow having multiple `make run-broker` simulatneously
Compile #3561
Compile #3561
Disable the stream_plugin if the feature flag
Merge pull request #3554 from johanneswuerbach/expose-cluster-id
feat(prom): expose cluster id in identity
Merge pull request #3550 from rabbitmq/stream-queue-consumer-fix
Handle stream arguments in add_super_stream command
Embed RPC call function in test
Fix group spec in test
Add delete_super_stream CLI command
Add add_super_stream CLI command
Add functions to create/delete super stream in manager
Improve consuming from a stream using AMQP 1.0
Log response body of failed AWS requests
Stream queue: use local pid for offset listeners
Simplify erlc opts for rabbitmq_peer_discovery_common
Merge branch 'tvhong-amazon-tvhong/fix_type_specs'
Peer discovery AWS, K8S: more Dialyzer fixes
Merge pull request #3545 from LuisCusihuaman/filter-exchanges-by-vhost-fix
fix: list exchanges only by current vhost in topic-permissions
Adopt new default branch for ra
Adopt renamed default branch for osiris
Adopt otp 24.1.2 for OCI workflow
Consume Ra as a bazel workspace
Fixup workflow syntax for update-* workflows
Avoid force pushing in update-rbe-images workflow
Avoid force pushing in update-otp-for-oci workflow
Merge pull request #3533 from GitHubPang/patch-1
Fix typo in UI help hint
Merge pull request #3529 from rabbitmq/bump-otp-for-oci
Remove obsolete workflow
Adopt otp 24.1.1 for OCI workflow
Merge pull request #3499 from rabbitmq/cla-url
Merge pull request #3525 from rabbitmq/pjk25/fix-external-dep-priv-folder-in-bazel
Fix handling of priv dirs for external deps
Merge pull request #3520 from rabbitmq/alebedeff/opp-92
Merge pull request #3516 from rabbitmq/move-ct-helpers-to-monorepo
Update makefiles/bazel to reflect CT helpers repo merge-in
Shard cluster_management_SUITE by testcase to better manage timeouts
Merge pull request #3517 from tvhong-amazon/tvhong/unlock_specific_nodes
Reuse list of nodes in peer discovery plugins that use Erlang global locks
Adjust BuildBuddy RBE image auto-bump for Erlang 24.1
Merge rabbitmq_ct_client_helpers1 into monorepo
Merge rabbitmq_ct_helpers into monorepo with the whole history
Emit identity info in prometheus /metrics/detailed endpoint
Bump dependencies in stream Java tests
Fallback to rabbit_stream:host/0 if advertised_tls_host not set
Support for advertising different hostname for TLS stream connections
bump a test timeout
Fix a minor github actions copy paste error
Merge pull request #3509 from rabbitmq/rabbitmq-server-3508-web-stomp-stream-consuming
Merge pull request #3511 from Ayanda-D/include-auth-backend-stacktraces
Preserve stacktraces in propagated unexpected internal auth backend exceptions.
Update 3.9.7 release notes
Handle no-context delivery in web stomp
Merge pull request #3506 from Ayanda-D/redundant-code
Extract SingleActiveConsumer channel-pid and consumer refs only once
Remove code repetion in rabbit_auth_backend_internal catch statements by matching and reusing the raised exception class
Wording
Update 3.8.23 release notes with quorum queue memory fix.
Avoid triggering update-otp-for-oci workflow from other automation
Update 3.9.7 release notes
Merge pull request #3500 from rabbitmq/bump-otp-for-oci
Adopt otp 24.1 for OCI workflow
Update workflow that updates OCI erlang patches to track 24.1
Update CLA URL
Adjust the federation_mgmt_SUITE timeout at the ct level
Adjust the clustering_management_SUITE timeout at the ct level
Improve metadata for certain automated PRs
Merge pull request #3496 from rabbitmq/bump-rbe-image-23
Use latest rabbitmq-server-buildenv:linux-erlang-23.3
Change the author of commits in update-rbe-images
Improve the automated commits in update-rbe-images workflow
Handle bumping the RBE image with separate branches per erlang
Fixup update-rbe-images.yaml workflow
Merge pull request #3479 from rabbitmq/use-ct-helpers-for-prometheus-port
Use a repo scoped token for auto-generated PRs
Use only 3 nodes for feature_flags_with_unpriveleged_user_SUITE
Third attempt at updating workflow triggering
Second attempt at adjusting workflow triggering for new workflow
Ensure the mixed version tests run when updating rabbitmq-ct-helpers
Fixup rabbitmq-ct-helpers auto-bump workflow
Fix workflow syntax
Use rabbitmq_ct_helpers to allocate prometheus port
Add a workflow to automatically bump rabbitmq-ct-helpers
Merge pull request #3480 from rabbitmq/use-pinned-rabbitmq-ct-helpers
Use a pinned version of rabbitmq-ct-[client-]helpers
Allocate tcp port for prometheus plugin
Merge branch 'shovel-obfuscatepassword'
Naming
Merge branch 'master' into shovel-obfuscatepassword
Use rabbit_data_coercion functions here
Merge pull request #3474 from rabbitmq/use-latest-release-in-mixed-version-testing
convert property map to proplists and vice versa for uri obfucation in shovel config
Obfuscate credentials in shovel worker states to avoid plaintext passwords being logged on crashes
Use 3.8.22 in 3.8/3.9 mixed version testing
Allow manual trigger of mixed version testing on arbitrary branches
(cherry picked from commit 7ce2a0dac810211015012354a5fd1cce4fb16afe)
Merge pull request #3409 from rabbitmq/lh-increase-queue-shutdown-timeout
Merge pull request #3469 from rabbitmq/lh-observer_cli-1.7.1
Merge pull request #3470 from rabbitmq/stream-coord-cleanup-tasks
Stream coordinator: monitor task processes
Upgrade to Observer CLI 1.7.1
Reduce a test timeout
Merge pull request #3462 from rabbitmq/mk-rabbit-nodes-all
Introduce rabbit_nodes:all/0
Merge pull request #3421 from rabbitmq/alebedeff/opp-92
Merge pull request #3448 from rabbitmq/qq-consumer-cancellation-fixes
Allow selective querying for prometheus plugin
Emit release cursor for more commands
Merge pull request #3454 from rabbitmq/mk-node-cluster-membership-internal-events
Merge pull request #3451 from rabbitmq/dependabot/github_actions/lewagon/wait-on-check-action-1.1.1
Emit a node.added event when a new node joins the cluster
Bump lewagon/wait-on-check-action from 1.0.0 to 1.1.1
QQ: emit release cursors after consumer cancel
QQ: fix memory leak when cancelling consumer
Merge pull request #3442 from rabbitmq/deterministic-flag-make
Merge pull request #3443 from rabbitmq/split-feature-flags-suite-for-bazel
Split the feature_flags_SUITE into two parts for CI/Bazel
Update release notes
Use the +deterministic compiler flag when building with Make
Merge pull request #3440 from rabbitmq/deterministic-compiler-flag-mix
Add the build system as a category in the PR template
Use the deterministic compiler flag for elixir/rabbitmq_cli
Update release notes for #3422
Merge pull request #3422 from rabbitmq/management_ui-add-counters_3416
Update 3.9.6 release notes
Merge pull request #3423 from rabbitmq/streams-sort-partitions
Polish test
Add Bazel rule for rabbit_stream_utils_SUITE
Return only streams for partition-related commands
Fall back to HOSTNAME(1) in stream Java test suite
Sort stream partitions using binding parameter
Add counters on detail pages
Add counters on detail pages
Add counters on detail pages
Clear federation before deleting message_flow queues
Merge pull request #3419 from rabbitmq/bump-rbe-image
Merge pull request #3394 from rabbitmq/rabbitmq-server-3389-stream-publishers-in-queue-page
[create-pull-request] automated change
Merge pull request #3413 from rabbitmq/stream-reader-close-in-terminate
Resolve a missed conflict
Merge branch 'master' into stream-reader-close-in-terminate
Make stream protocol route command return several streams
Adapt stream publisher list view to connection/queue context
Add extension into dispatcher block code
Update the Bazel guide, BAZEL.md
fix build warnings
Stream reader: close osiris logs and sockets in terminate
Mention CQ shutdown increase in 3.8.23/3.9.6 notes
Increase classic queue shutdown timeout
Merge pull request #3397 from rabbitmq/handle-connection-closures-in-stream-reader
formatting
Gracefully terminate stream reaader
Attempt to correct Mergify config for cascaded backports
Merge pull request #3401 from rabbitmq/ranch-21-bazel
Add HTTP endpoint for stream publishers
Enable metrics collection in run_tests
Use Ranch 2.1.0 in bazel build
Merge pull request #3398 from rabbitmq/rabbitmq-server-3390
Merge pull request #3392 from rabbitmq/lh-ranch-2.1
Revisit two rabbitmq.conf validators
Handle closed connections in stream reader
Display stream publishers in queue management page
Synchronize mixed versions approach with v3.8.x
Use the new function ranch_proxy_header:to_connection_info/1
Update Ranch to 2.1.0
CLI: introduce :tanzu as a new scope
rabbitmq_stream formatting
Promote the --local_test_jobs flag from user.bazelrc to .bazelrc
Use the correct "home" directory for rabbit in rabbitmq_home.bzl
Fix a typo in rabbitmq-run.sh
Make it convenient to run the "secondary umbrella" under bazel
Mark //deps/rabbitmq_mqtt:cluster_SUITE as flaky
Workflow syntax needs a string rather than a list here
Merge pull request #3378 from rabbitmq/add-debug-utils-to-docker-oci
Do not run tests if packaging changes
Add debug utilities to Docker image
3.8.15 release notes correction
Allow the rabbit_ct_config_schema helper to work on v3.8 & v3.9
Update 3.9.6 release notes
Update "Update OTP Versions for OCI Workflow" to auto-backport
Add Mergify config to backport based on label
Merge pull request #3371 from processone/3175-fixup
Fix some edge cases in handling ssl information from PROXY protocol
Use a better means of avoiding simultaneous test runs locally
Add a note on replicated queue types
rabbit_vhost: handle imported tags that are atom lists
Allow manual triggering of the AWS Actions Workflow
Merge pull request #3366 from rabbitmq/bump-otp-for-oci
Fix cross-workflow reference in AWS peer discovery workflow
[create-pull-request] automated change
Enable the update-otp-for-oci.yaml workflow
And again update-otp-for-oci.yaml
Again update-otp-for-oci.yaml
Additional updates for update-otp-for-oci.yaml workflow
Fixup update-otp-for-oci.yaml workflow
Decouple the aws peer discovery workflow from the oci workflow
Fixup use of yq in oci workflow
Add a workflow that will open PRs to bump otp_max patch version
Merge pull request #3363 from rabbitmq/bazel-files-trigger-actions
Update Github Actions workflow triggering to include bazel build
Merge pull request #3360 from korsmakolnikov/patch-1
Fix store offset parameters
Revert "Match OCI latest supported Elixir version with rabbitmq_cli"
Match OCI latest supported Elixir version with rabbitmq_cli
Bump Erlang OTP to latest 24 version in OCI
Limit when certain GitHub Actions workflows run
Merge pull request #3323 from rabbitmq/set-xterm-titlebar-if-running-in-foreground
Add release notes item to PR template checklist
Add 3.9.6 release notes
rabbit_boot_state: Fix style bug
rabbit_boot_state: Support Xterm titlebar update
Merge pull request #3355 from rabbitmq/fix-feature-flag-name-cli-testsuite
rabbitmq_cli: Fix `maintenance_mode_status` feature flag name
Merge pull request #3338 from rabbitmq/enable-single_line-logging-from-env-var
Use awaitMatch to check global counters
Logging: Add `single_line` flag support to $RABBITMQ_LOG
Merge pull request #3340 from rabbitmq/improve-stream-reader-metrics-cleanup
Keep checking that replica recovered in rabbit_stream_queue
Fix function_clause error in stream reader
stream coordinator: further logging improvements
Tidy up some stream coordinator warning logs
Stream coordinator: only return tail info if osiris app is started
Test that we start from 0 publishers & consumers
Test stream publisher & consumer counters
Perform stream reader cleanup in terminate
Bump dependencies in Java stream tests
Skip additional tests in mixed versions
Import osiris as a native bazel library
3.8.22 release notes
Update 3.9.5 release notes
Merge pull request #3341 from rabbitmq/local-exclusive-queues
3.9.5 release notes
Exclude roundtrip definition import cases from mixed version runs
Re-format two definition import input files
Exclude the #3333 test case from mixed version runs
Always place exclusive queues on the local node
Merge pull request #3333 from rabbitmq/mk-definition-import-of-vhost-with-metadata
Commit definition import case16 file
Definition import: correctly import vhost metadata
Merge pull request #3332 from rabbitmq/dependabot/github_actions/lewagon/wait-on-check-action-1.0.0
Bump lewagon/wait-on-check-action from 0.2 to 1.0.0
Update a mock expectation
rabbitmq_aws: drop trailing dot in some log messages
Started using function heads
Addressing PR comments
Adding retries to AWS API calls
Don't run #3319 assertions in mixed version clusters
Merge pull request #3328 from rabbitmq/dependabot/github_actions/erlef/setup-beam-1.9
Bump erlef/setup-beam from 1.8 to 1.9
Merge pull request #3324 from rabbitmq/fix-race-condition-in-connection-channel-tracking-list-function
rabbit_{connection,channel}_tracking: Fix race condition in list()
Merge pull request #3319 from rabbitmq/mk-http-api-put-vhost-updates-tags-and-description
Make PUT /api/vhosts/{name} update tags and/or description
Update 3.9.4.md
Merge pull request #3312 from rabbitmq/alarms-metric1
Merge pull request #3311 from rabbitmq/rabbitmq-server-3249
Change metric names in release notes too
Prometheus: alarm-related metric naming
3.9.4 release notes wording
Introduce TLS-related rabbitmq.conf settings for definition import
Add alarms prometheus collector.
Refactor definition import to allow for arbitrary sources
Merge pull request #3309 from rabbitmq/mk-3.9.4-release-notes
Initial 3.9.4 release notes
Merge pull request #3299 from rabbitmq/add-env-vars-to-set-default-user-pass-vhost-and-erlang-cookie
Log a warning when Erlang cookie is overriden using an env variable
Merge pull request #3300 from rabbitmq/comment-why-logging-burst-limit-is-disabled
Logging: Add comments explaining when burst limit is disabled
Merge pull request #51 from rabbitmq/alebedeff/improve-elixir-lib-dir-detection
Add support for $RABBITMQ_ERLANG_COOKIE env var
Add support for $RABBITMQ_DEFAULT_{USER,PASS,VHOST} env vars
rabbit_env: Add $RABBITMQ_DEFAULT_{USER,PASS,VHOST} and $RABBITMQ_ERLANG_COOKIE vars
Merge pull request #3298 from rabbitmq/disable-logging-burst-limit-with-debug-level
Use elixir itself to find its lib directory
Logging: Disable burst limit if the log level is set to `debug`
Break down metrics by node in all RabbitMQ-Stream pie charts
Merge pull request #3295 from rabbitmq/lh-test-dropwhile-restart-bug
3.9.3 release notes
3.8.21 release notes
Add tests for the regression introduced in #3041
Manually apply rabbitmq/rabbitmq-website#1241 by @lushndm
Merge pull request #3280 from rabbitmq/do-not-report-stopping-state-to-systemd
rabbit_boot_state: Wrap boot_state() type definition line
systemd: Enclose status description inside quotes
systemd: Do not report "stopping" state to systemd
Merge pull request #3283 from rabbitmq/use-colon-as-verbosity_map-separator
Logging: Use `:` as the separator in verbosity mapping
Merge pull request #3282 from rabbitmq/use-integers-to-represent-Epoch-based-timestamps
Logging: Always represent Epoch-based timestamps as integers
Merge pull request #3281 from rabbitmq/fix-epoch-timestamp-crash-in-json-logging
Merge pull request #3279 from rabbitmq/stream-coordinator-unlink
Logging: Fix crash when Epoch-based timestamps are used with JSON
Unlink spawned processes once we're done
Ditto in rabbitmq_stream_management
Bump Java stream client used in tests
3.8.20 release note edits
Merge pull request #3284 from rabbitmq/mk-revert-3ef8587
3.9.x release notes edits
Revert "CQ: don't deliver right before acking in the index"
Drop header from 3.9.x release notes
Fix line breaks and add extra info for release notes in 3.9.2
3.8.20 release notes update
3.9.2 release notes update
Merge pull request #3277 from rabbitmq/mk-3.8.20-release-notes
A typo
3.8.20 release notes
Merge pull request #3275 from rabbitmq/mk-3.9.2-release-notes
3.9.2 release notes
Merge pull request #3270 from rabbitmq/alebedeff/lazy-makefile-vars-for-test-and-dev
Make test/development related makefile vars lazy
Merge pull request #3266 from rabbitmq/mk-improve-rabbitmq-upgrade-drain-log-levels
Make sure 'rabbitmq-upgrade {drain, revive}' do not produce scary log messages
Merge pull request #3263 from rabbitmq/rabbitmq-server-3260
Warn when lock could not be acquired successfully
Acquire locks when starting mirrored supervisor children
More mirrored supervisor logging
Mirrored supervisor: more logging at debug level
Bump a test timeout
Bump a test timeout
bump a test timeout
Bazel test timeouts
Update some bazel test timeouts
Remove duplicate compilation options in rabbit_common
Merge pull request #3255 from rabbitmq/mk-try-out-mergify
Update rabbitmq.conf.example header
Add an initial mergify.io configuration
Add a workflow for analyzing bazel cache hits
Use same threshold color for "Errors since boot"
Use same colorMode in all RabbitMQ-Stream panels
Make RabbitMQ-Stream dashboard work via ConfigMap
Remove the Backport Workflow
Clarify autogenerated PR title
Move release notes from rabbitmq/rabbitmq-website
Ensure RabbitMQ-Stream dashboard works correctly after import
Merge pull request #3250 from rabbitmq/add-streams-grafana-dashboard
Restart stream-perf-test on-failure
Convert string to integer for ulimits.nofile
Publish RabbitMQ-Stream dashboard to grafana.com
Fix workflow typo
Increase a test timeout
Use globally installed buildozer in github actions
Avoid creating extra files when bumping bazel rbe images
Fixup update-rbe-images.yaml
Add a workflow for keeping bazel rbe images up to date
Merge pull request #3247 from rabbitmq/add-rebar3_hex_to_auto-generated-rebar3-config
Add rebar3_hex plugin reference to rebar3.config generated by erlang.mk
Update BUILD.osiris to match recent changes
Merge pull request #3239 from rabbitmq/some-sort-of-unicode-support-in-env-files
Merge pull request #3241 from rabbitmq/stream-absent
Handle 'absent' return value
This *is* a Unicode character, U+060E
Do not crash on badarg when env file has an 'unusual' unicode character
Add the Backporting Github Action
Revert "Save the bazel execution log binary in Github Actions"
Merge pull request #3189 from rabbitmq/docker-library-rabbitmq-500
bazel timeouts
Update peer discovery aws tests for docker image changes
Add a .bazelversion file
Log the bazel release version in CI
bump test timeouts
Merge pull request #3176 from rabbitmq/stream-error-handling
Wording
Merge pull request #3204 from rabbitmq/keep-state-and-data
Merge pull request #3230 from rabbitmq/fix-notify-limiter
Extend the bazel timeout for unit_disk_monitor_mocks_SUITE
Bazel test timeouts
Save the bazel execution log binary in Github Actions
Bazel test timeouts
Bump test timeouts in bazel
Merge pull request #3233 from britto/fix-ensure-safe-call-timeout-clause
Merge pull request #3232 from britto/adjust-initial-gen-server-call-timeout
Adjust initial gen_server_call_timeout
Fix typo in ensure_safe_call_timeout
Apply the same default config as docker-library/rabbitmq
Fix `make docker-image` as executed from the repo root
Adopt the simplified docker-entrypoint.sh from docker library
Fix channel rate limiter for ack messages
Merge pull request #3231 from rabbitmq/cli-fix-stream-doc-link
Fix link of stream docs
Bump test timeouts in bazel
Update bazel timeout for rabbitmq_amqp1_0 dialyze
Introduce rabbit_policy:list_op/2
Merge pull request #3229 from rabbitmq/stream-status-tracking
Fix function_clause error in tracking_status/2
Update OTP version in rabbitmq_peer_discovery_aws workload
Bump bazel test timeouts for some suites
Update OTP in dev OCI to 24.0.4
bump a test timeout in bazel
Bump test timeouts
Increase some bazel test timeouts
Revert "rabbitmq-dist.mk: Install CLI scripts as part of the build"
Increase the test timeout in bazel for unit_file_handle_cache_SUITE
Avoid building the cli scripts in rabbitmq_stream_common
Increase some suite timeouts in bazel
Merge pull request #3222 from rabbitmq/fix-stream-usage
Fix list_stream_publishers additional usage output
Increase the timeout for the queue_master_location_SUITE in bazel
Only run mixed version tests on release branches
Merge pull request #3218 from rabbitmq/erlang-git-workflow-skopeo
Merge pull request #3214 from rabbitmq/fix-bugs-reported-by-release-handler
Use `skopeo` instead of pulling an image just to get its digest
Adjust rabbitmq_prometheus test suite timeouts in bazel
rabbit_web_dispatch_sup: Fix modules list in supervisor spec
rabbit_mgmt_agent_sup_sup: Fix worker type for the pg group
rabbit_runtime: Find erl(1) in the ERTS bin directory
rabbitmq-dist.mk: Install CLI scripts as part of the build
Don't run Test Erlang Git Master workflow on every push
Merge pull request #3216 from rabbitmq/mk-quorum-queue-oldest-known-message-command
New aux quorum queue command: oldest_entry_timestamp
Test nightly with Erlang built from otp/master (#3215)
Merge pull request #3213 from rabbitmq/fix-rabbitmq-prometheus-runtime-dep
Fix accept dependency in rabbitmq_prometheus
Merge pull request #3205 from rabbitmq/send-www-authenticate-when-basic-auth-present
Correct Publish frame docs
Additional rpc -> erpc updates
Fix accidental test case skip when not using mixed versions
rabbit_stream_reader: convert most log messages to debug ones
Merge pull request #3206 from johanrhodin/patch-2
Fix link for stream.html
Send www-authenticate header when basic auth present but it's wrong
Peer discovery aws integration tests run when their workflow changes
Fix links
Merge pull request #3203 from rabbitmq/remove_project_maturity
Use keep_state_and_data
Add bazel-test make target so that we can run tests in bazel quickly (#3138)
Increase timeouts in aws peer discovery integration suite
Add resources link
Remove project maturity warning
Improve a Cuttlefish validator message
rabbit_stream_reader: these should not be logged at info level
Squash a compiler warning
Merge pull request #3202 from rabbitmq/validate-amqp0-9-1-queue-name-length-in-management-ui
rabbit_stream: ignore escript and sbin
Merge pull request #3194 from rabbitmq/stream-reader-state-timeouts
Remove TEST macro
Mark a couple of bazel targets as testonly, that should have been
ignore crash dump
Validate AMQP0.9.1 queue name length when creating queue directly or via shovel in Management UI. close #3074
Remove unused variable warning
Mixed version testing in bazel (#3200)
Increase a timeout for flakiness sake
Merge pull request #3190 from rabbitmq/oci-workflow-uses-actions-cache
Key the docker image cache by the erlang version
Turn on image pushes
rabbit_vhost: introduce all_tagged_with/1
ctl add_vhost: propagate tags if no description is given
Make things a little more consistent between per_*_limit suites
Try to reduce flakes in per_user_connection_channel_limit_partitions_SUITE
Event exchange: explicitly translate two more known event types
Merge pull request #3195 from britto/remove-noop-add-verify-fun-to-opts
Remove amqp_ssl:add_verify_fun_to_opts/2,3
Rename STATE_TIMEOUT to CONNECTION_NEGOTIATION_STEP_TIMEOUT
Add timeout reason to log message
Close TCP connection when stream reader times out
Replace some static sleeps in tests with dynamic waits
Fix shard_count for rabbit_stream_queue_SUTIE
Use layer caching when building the oci
Merge pull request #3188 from rabbitmq/list-stream-connections-timeout
Fix delete_replica bug
Split cluster_size_3_parallel in two groups
Include queue name on log message
Avoid double spawn on coordinator and link spawned processes
Capture delete_stream errors and return them as protocol errors
Set info/2 timeout to infinity to list connections
Fixup rabbitmq_federation:queue_SUITE for mixed version testing
Merge pull request #3185 from rabbitmq/add-prelaunch-to-erlang-ls-config
Merge pull request #3175 from processone/proxy_protocol_tls_info
Merge pull request #3177 from rabbitmq/stream-commit-offset-becomes-store-offset
Fixup previous commit
Add REPO_URL to the buildbuddy build metadata
Mark per_vhost_connection_limit_SUITE as flaky
Further refinements to .bazelrc
Use a split .bazelrc so we can check most of the file into the repo
Update cross-workflow reference in actions
Use bazel-erlang 1.1.0
Use bazel-erlang 1.1.0
Merge pull request #3187 from rabbitmq/less-chatty-mqtt
Also assert no missing suites for all other deps
Change a log line from INFO to DEBUG
Add an assertion that no deps/rabbit common test suites are missing
Merge pull request #3186 from rabbitmq/use-bazel-erlang-native-sharding
Remove unused load statements from bazel files
Revert "Try reducing buildbuddy parallelism"
Pick up more recent rabbitmq-server-buildenv
Try reducing buildbuddy parallelism
Separate BuildBuddy caches by Erlang version
Add missing application to Erlang LS config
Avoid using a duplicate group name in rabbitm_stream_queue_SUITE
Merge pull request #3180 from tomyouyou/start_ssl_listener_wrong_para_order
Use bazel-erlang semi-automatic suite sharding
Add hashes for some pinned dependencies in bazel
Use prometheus 4.8.1 from hex.pm
Merge pull request #3182 from rabbitmq/dependabot/github_actions/erlef/setup-beam-1.8
Bump erlef/setup-beam from 1.7 to 1.8
'start_ssl_listener/4' has wrong parameter orfer
Use "store" instead of "commit" for offset tracking
Mark //deps/rabbitmq_stomp:python_SUITE as flaky
Replace commit with store for offset persistence
Correct some test cleanup in rabbit_mgmt_http_SUITE
Build otp-min & otp-max dev container images (OCIs)
Merge pull request #3168 from rabbitmq/enable-all-plugins-in-dev-oci
Channel tracking: reduce log verbosity
Merge pull request #3171 from rabbitmq/stream-add-uncompressed-length-to-sub-batch-format
Drop a couple of non-essential debug log messages
Introduce a few new rabbit_policy listing functions
Add uncompressed size field for pub ids generation
Merge pull request #3170 from rabbitmq/stream-flaky
Clear memory alarms on all nodes in the memory_alarm_rolls_wal test
Fix restart of stream coordinator when there are no stream queues
Add ?awaitMatch/4 to rabbit_assert.hrl
Extract TLS informations that are delivered in PROXY protocol frame
Mirrored supervisor: make it easier to keep track of group membership changes
Revert "Add ?awaitMatch/4 to rabbit_assert.hrl"
Add ?awaitMatch/4 to rabbit_assert.hrl
Adjustments to hopefully make rabbitmq_federation suite less flaky
Handle feature flag enablement failure more gracefully in test setup
Merge pull request #3172 from rabbitmq/update-contributing-guide
Remove public umbrella repo mention from CONTRIBUTING guide.
Add uncompressed size in stream sub-entry
Drop a few exclusive terms still present in man pages
Enable all plugins & ports in development container images (OCIs)
Merge pull request #3169 from rabbitmq/mk-more-idempotent-tracing-state-change
Do not update virtual host tracing state when it's not necessary
Merge pull request #3166 from bogdando/fix_ocf_ra
Merge pull request #3157 from rabbitmq/stream-protocol-counters
Check publisher still exists on osiris_written event
Merge pull request #3167 from rabbitmq/mk-duplicate-shovels-imported-from-definitions
Acquire locks before starting or restarting dynamic Shovels
OCF RA: fix start/stop handling
Fix handling of `broker_with_plugins` config "flag" under bazel
Merge pull request #3163 from rabbitmq/mk-epmd-starter-loop-timeout
Make sure not to wait for epmd-starter subprocess forever
Rename protocol error counters to _total
Skip additional quorum_queue_SUITE cases under mixed versions
Reduce test case flakyness in quorum_queue_SUITE
Introduce dynamic wait in parts of the quorum_queue_SUITE
Use bazel-erlang 1.0.0
Use bazel-erlang 1.0.0
Skip an additional quorum_queue_SUITE case in mixed versions
Merge pull request #3158 from rabbitmq/mk-stricter-stop-start-assertions-in-quorum-queue-suite
rabbitmq_stream_management bazel fix
Update rabbitmq_stream deps in bazel
Add specific stream protocol counters to track protocol errors
Merge branch 'master' into mk-stricter-stop-start-assertions-in-quorum-queue-suite
Improve assertions in a QQ suite test
Merge pull request #3137 from rabbitmq/faster-binding-recovery
Mixed version testing skip updates
bazel-erlang master branch was renamed to main
Merge pull request #3136 from rabbitmq/global-gauges
Mark //deps/rabbit:vhost_SUITE as flaky
Fix build-publish-dev check name
Use number of publishing channels as global publishers in amqp091
Gauges for global publishers & consumers metrics
Merge pull request #3156 from rabbitmq/rabbitmq-server-3155
Ignore *.lock files
Reduce priority_queue_SUITE to single node tests
rabbit_prelaunch_early_logging: Don't call dbg:tracer() if unused
CLI tests: make mock plugin declare compatibility with 3.8 through 3.10
Deduplicate parsed plugin directory list in one more place
Deduplicate parsed list of plugin directories
Merge pull request #3152 from rabbitmq/rabbitmq-server-3149
Log locations are already canonicalized
Merge pull request #3151 from rabbitmq/stream-reader-statem
Canonicalize a few more paths in the startup banner
quorum_queue_SUITE: don't unconditionally skip node_removal_is_not_quorum_critical
Remove useless ensure_stats_timer calls
Mark rabbitmq_stream_management suite not mixed version compatible
Update flaky setting for rabbit_stream_queue_SUITE
Fix heartbeater exception exit
Log at debug level when state machine terminates
Mark dynamic_ha_SUITE as flaky
Convert rabbit_stream_reader into state machine
Fix RABBITMQ_IMAGE reference in aws peer discovery workflow
Mark additonal suites flaky
Add behaviour declaration for rabbit_stream_metrics_gc
Update additional test skipping for 3.8/3.9 mixed versions
Add is_mixed_versions/0
Initial Security Policy document
Startup banner wording: SSL => TLS
Merge pull request #3143 from rabbitmq/oci-matrix
Use emu_flavor in commercial startup log too
Merge pull request #2777 from rabbitmq/banner-with-otp-version
Trigger OCI workflow when oci.yaml changes
Build image per Erlang major version
Merge branch 'SzumiecM-master'
AuthN/Z backend HTTP: rename two new settings, add tests
Mark //deps/rabbit:rabbitmqctl_integration_SUITE as flaky
Mark //deps/rabbit:dynamic_qq_SUITE as flaky
Build two OCI images
Marking of flaky tests
Mark deps/rabbitmq_stream:commands_SUITE as flaky
Fixup deps/rabbitmq_management/BUILD.bazel
Additional flaky test adjustments in bazel
Use gen_batch_server from hex.pm
Sync osiris make/bazel build
Revert "Default all `rabbitmq_integration_suite` to flaky in bazel"
Delete stats make target
Additional skipping of unsupported tests in mixed version clusters
Print Erlang and SSL library on boot, right under the logo
Remove duplicate 'docker push'
Marking of flaky tests
Mark deps/rabbitmq_stream:commands_SUITE as flaky
Add configurable timeout to HTTP connections
Fixup deps/rabbitmq_management/BUILD.bazel
Additional flaky test adjustments in bazel
Avoid using mixed cluster args for node start in normal tests
Use gen_batch_server from hex.pm
Sync osiris make/bazel build
Revert "Default all `rabbitmq_integration_suite` to flaky in bazel"
Delete stats make target
Additional skipping of unsupported tests in mixed version clusters
Activate plugins correctly in bazel mixed version cluster tests
Merge pull request #3127 from rabbitmq/global-counters-simplified
Remove rabbitmq_stream_prometheus plugin
Global counters per protocol + protocol AND queue_type
Faster implementation of rabbit_binding:recover/0
Add make target for cleaning deps of deps, like ra, osiris, etc.
Fix test for rabbitmq-ct-helpers change
Follow up changes for the rpc:call -> erpc:call change
Merge pull request #3124 from rabbitmq/docker-image-erlang-24
Bump to Erlang 24 and enable JIT compilation
Use `erpc:call/{4,5}` in `rabbit_ct_broker_helpers:rpc/{4,5}`
Default all `rabbitmq_integration_suite` to flaky in bazel
Adjustments for the way @bazel-erlang shards tests
Mark clustering_management_SUITE as flaky in bazel
Mark additional suites as flaky in bazel
Mark //deps/rabbitmq_mqtt:java_SUITE as flaky in bazel
Skip pgp verification for openssl archive in OCI images
Suggest --incompatible_strict_action_env in Bazel readme
Correct //deps/rabbitmq_peer_discovery_etcd:system_SUITE setup
Explain
Reduce flakiness in rabbitmq_queues_cli_integration_SUITE
More man page massaging
Merge pull request #3122 from dentarg/federation-upstreams/escape_consumer-tag
Escape the consumer-tag value in federation mgmt
Bring rabbit:logger_SUITE online in bazel and bump mismatched deps
Updates for mixed version testing with bazel
Minor man page updates post rabbitmq/rabbitmq-website#1209
Merge pull request #3117 from tropikhajma/master
No longer fail fast across Erlang version matrix in Actions
Skip some tests that are not mixed version compatible
Mark additional suites as flaky
fix hostname(1) calls on Solaris
Ignore dynamic_qq test that isn't mixed version compatible
Mark quorum queue test as non-mixed-version compatible
Merge pull request #3107 from rabbitmq/queue-federation-mixed-bug
Queue args won't be set for all suites, be more defensive
Avoid conflicting queue declarations from tests
Compile
Support mixed queue type federation links
test case
Allow `bazel run repl` to start an erlang shell
Update rabbitmq_cli mock test plugin for 3.10.x
Update default version number used in bazel for RabbitMQ
Merge pull request #3101 from rabbitmq/stream-common-library
Update a rabbitmqctl(8) example
Merge pull request #3021 from rabbitmq/fix-double-registration-management-ipv4v6
Remove dependency from rabbit_common
Fetch rabbitmq-ct[-client]-helpers via git
Fixup bazel compilation for rabbitmq_stream_common
Merge pull request #3104 from rabbitmq/mk-per-queue-policy-matching-events
When policy changes, emit internal events for individual objects
rabbit_policy: naming
Merge pull request #3102 from rabbitmq/upgrade-jsx-to-3.1
Drive-by change: speed up two tests in rabbit_mgmt_rabbitmqadmin_SUITE
rabbit_mgmt_test_util: modernize for recent JSX versions
Second attempt at upgrading JSX to 3.1
Stream common library
Revert "Bump jsx to 3.1.0"
Bump observer_cli to 1.6.2
Bump jsx to 3.1.0
Revert "Merge pull request #3090 from johanrhodin/patch-1"
Merge pull request #3098 from rabbitmq/unexpected-socket-input
Merge pull request #3099 from rabbitmq/fix-recovery-with-accidental-empty-recovery-terms
Categorize connection log messages
Fix recovery when terms are accidentally empty
Merge pull request #3097 from rabbitmq/streams-commit-offset-remove-correlation-id
Close client connections that don't follow authentication protocol
Remove correlation ID from commit_offset
Depend on erlang-jose ref with fix for potatosalad/erlang-jose#113
OAuth 2 system_SUITE: squash some erlc warnings
Merge pull request #3090 from johanrhodin/patch-1
Update rabbitmq.conf.example
Add rabbitmq_auth_backend_oauth2 system_SUITE to bazel
Merge pull request #3086 from tomyouyou/queue-delete-qpid-exit
Merge pull request #3083 from rabbitmq/raw-reader
Update scripts/bazel/rabbitmq-run.sh to match the Makefile version
Chunk selector option in offset reader
Merge pull request #3087 from rabbitmq/stream-policies
Don't run policy tests in parallel
Use --incompatible_strict_action_env in bazel
Policy values take precedence over stream args
Remove redundant policy setting
Apply policy in rabbit_queue_type
"handle_method(#'queue.delete'{},_)" can not process the case "{error,{exit, _, _}}"
Merge pull request #3075 from rabbitmq/remove-randomized-startup-delays
Handle last_stream_member more gently in CLI
Merge pull request #3085 from luos/improve-federation-performance
Improve performance of federation
Merge pull request #3071 from rabbitmq/subscribe-props
Mark rabbitmq_amqp1_0 system_SUITE flaky in bazel
Revert "Attempt to make rabbitmq_amqp1_0 tests less flaky"
Attempt to make rabbitmq_amqp1_0 tests less flaky
Remove randomized startup delays
Allow `bazel run rabbitmq-diagnostics`
Merge pull request #3078 from rabbitmq/rabbitmq-server-3072
Emit consumer creation events for all consumers
Be more defensive when emitting consumer events for a queue with SAC
Merge pull request #3076 from rabbitmq/web-mqtt-fd-limit
Add missing link in Web-MQTT example
Make Web-MQTT obtain/release a FD via file_handle_cache
mark rabbitmq_trust_store:system_SUITE as flaky for both groups
Merge branch 'bazel-dialyze'
Add dialyze for remaning tier-1 plugins
Extract publishing IDs from batch publishing
Add dialyze for rabbitmq_amqp1_0
Add dialyze for amqp10_common
Add dialyze for amqp10_client
Add dialyze for amqp_client
Fix properties binary construction
dialyze rabbit
Use dialyzer on rabbit_common
Merge pull request #3068 from rabbitmq/mk-segment-entry-count-fallback-during-3.6-upgrade
Handle cases where virtual host config file does not yet exist
make rabbit_stream_SUITE more reliable
Reference osiris as a github repo in bazel
Replace rabbitmq_stream test helper with common version
Render TLS info for stream connections in management UI
Expose TLS info for stream connections (CLI, REST API)
Merge pull request #2954 from rabbitmq/new-segment-entry-count-default
Merge pull request #3067 from rabbitmq/mk-sync-tables-with-retries-in-exchange-plugins
{consistent_hash,recent_history}_exchange plugins: add retries to schema sync
Merge pull request #3066 from rabbitmq/rabbitmq-queues-grow-doc-update
Make it possible to `bazel run rabbitmq-plugins`
Correct help text for rabbitmq-queue grow command
Return TLS port in stream connection properties
Add stream.advertised_tls_port setting
Mark //deps/rabbitmq_federation:queue_SUITE as flaky in bazel
Allow plugin selection when running //:broker from bazel
Merge pull request #3038 from rabbitmq/stream-tls
Test multiple chunks
Use a different PGP keyserver for OpenSSL PGP keys
Add xref for remaining tier-1 plugins
Fix rabbitmq-components.mk path when publishing to hex pm
Fix comment
rebase fixes
Clarify x-max-age options in management ui
Mark //deps/rabbitmq_prometheus:rabbit_prometheus_http_SUITE flaky
Use ssl option when initialising data reader
Add stream TLS test
TLS support for streams
Merge pull request #3043 from rabbitmq/streams-consumer-lag-metrics
quorum_queue_SUITE restructure tests
Merge pull request #3060 from rabbitmq/stream-advertised-host-port-in-open
Fix test_gc_consumers test
Add consumer offset_lag to rabbitmq-stream CLI command & Management
quorum_queue_SUITE only configure dist proxy when needed
Send advertised host and port in open
Perform xref checks on many tier-1 plugins
Merge pull request #3057 from rabbitmq/support-elixir-1-12
Update systemd dependency
Merge pull request #3056 from rabbitmq/rabbit-prelaunch-gc
Make rabbit_prelaunch GC before returning
Declare support for elixir 1.12
Merge pull request #3055 from rabbitmq/stream-logging
Log heartbets at debug; remove newlines
Replace deprecated function calls in amqp10_client
Correct type spec for infer_extra_bcc/1
Merge pull request #3052 from rabbitmq/stream-rename-max-segment-size
Rename max-segment-size to stream-max-segment-size-bytes
Merge pull request #3041 from rabbitmq/cq-dont-deliver-immediately-before-ack
Replace a few more leftover MPLv1.1 license headers
Mark //deps/rabbit:rabbit_stream_queue_SUITE-cluster_size_3 flaky
Mark rabbitmq_trust_store:system_SUITE-http_provider_tests as flaky
Remove unused function
Merge pull request #3046 from rabbitmq/mk-extra-bcc-routing-target-in-queue-metadata
Ignore xref warnings for two deprecated calls
Set stream plugin default port to 5552
Mark rabbitmq_shovel:dynamic_SUITE as flaky in bazel
Fix call to deprecated function
Make stream consumer arg parsing return error
Add basic xref for deps/rabbit
Fix stream protocol open origin
Add subscription properties to stream protocol
Fix stream x-stream-offset regression
Fix some logging statements in stream plugin
Merge pull request #3047 from rabbitmq/stream-keeps-sending-when-connection-is-closed
Handle connection closing when dispatching stream messages
Shard the clustering_management_SUITE by group
Increase max parallelization on buildbuddy
Make it possible for queues to have extra BCC targets specified as options
Trigger event on stream consumer cancellation
Add stream consumer properties to list command
Fix stream test suite
Add stream subscription properties to metrics
Merge pull request #3012 from rabbitmq/stream-move-messages
Merge pull request #3044 from rabbitmq/mk-higher-mqtt-leader-election-operation-timeout
Use ~0p to print map on one line
MQTT: use consistent Ra operation timeout values
Add rabbit_stream_core_SUITE to bazel
Stream: tweak type and tidy up
Support properties in stream subscription
Merge pull request #3013 from rabbitmq/stream-refactoring
Fix additional Erlang 24 compiler warnings
fix tests
rabbit_stream_core: remove duplicate clause
remove unused function
stream plugin: use core module in test suite
Extract stream protocol framing and binary generation into a separate module.
Turn off warnings as errors for gun dependency in bazel
Fix for a compiler warning in Erlang 24
Add Erlang 24 testing to GitHub Actions
Bump JUnit in stream-related Java test suite
CQ: don't deliver right before acking in the index
Merge pull request #3040 from luos/revert-external-stats-restart-intensity
revert restart intensity of external stats process
Fix bats shell testing in RBE
Run the "bats" tests for deps/rabbit in bazel
drive-by bazel formatting
Merge pull request #3039 from rabbitmq/mk-management-cowboy-opts-listener-shadowing
Avoid a badmatch when advanced Cowboy options are set for HTTPS/TLS listener
Merge pull request #48 from rabbitmq/stream-tls
Add stream TLS port
Merge pull request #2981 from rabbitmq/report-coordinator-unavailable-as-amqp-error
Make init callbacks of queue types return {ok, State}
Catch deliver errors in rabbit_queue_type
Report stream coordinator unavailable as an amqp error
Additional compiler flag normalization under bazel
Merge pull request #3037 from rabbitmq/dependabot/github_actions/actions/checkout-2.3.4
Bump actions/checkout from 2 to 2.3.4
Merge pull request #3036 from rabbitmq/mk-amqqueue-set-options
Introduce amqqueue:set_options/2
Merge pull request #3035 from rabbitmq/mk-query-quorum-queues-by-name-pattern
More rabbit_amqqueue:list_* functions
Merge pull request #3034 from rabbitmq/mk-change-delivery-acknowledgement-timeout-error-message
Mention delivery ack timeout configurability
Merge pull request #3033 from rabbitmq/mk-higher-consumer-timeout-default
Bump consumer acknowledgement timeout default to 30 minutes
Normalize compiler opts for rabbit test_util.erl
Futher bazel file refactoring and deduplication
Merge pull request #3022 from rabbitmq/relative-time-offset
Rename variable
Bazel file refactoring
Refactor rabbitmq_federation bazel
Refactor rabbitmq_event_exchange bazel
Refactor rabbitmq_consistent_hash_exchange bazel
Refactor rabbitmq_auth_backend_oauth2 bazel
Set segment_entry_count per vhost and use a better default
Bazel file refactoring
Refactor rabbitmq_auth_backend_cache BUILD.bazel
Add rabbit_common to the deps in rabbitmq_integration_suite macro
Fix and refactor amqp_client bazel tests
Bazel file refactoring for rabbit
Merge pull request #3030 from rabbitmq/mk-vhost-is-tagged-with
Introduce vhost:is_tagged_with/2
Add rabbitmq_web_stomp_examples to bazel
Add rabbitmq_web_stomp to bazel
Add rabbitmq_web_mqtt_examples to bazel
Add rabbitmq_web_mqtt to bazel
Add rabbitmq_web_dispatch tests to bazel
Add rabbitmq_trust_store to bazel
Add rabbitmq_tracing to bazel
Add rabbitmq_top to bazel
Add rabbitmq_stream_prometheus to bazel
Fix stream prometheus test suite
Exclude test suite metrics in stream prometheus test suite
Add rabbitmq_stream_management to bazel
Add rabbitmq_stream to bazel
Refactor rabbitmq_stomp bazel build file
Add rabbitmq_shovel_management to bazel
Use only allowed characters for aws ecs cluster names
Use non-conflicting aws resource names in integration suite
Also tag the OCI image with the git sha
Merge pull request #3028 from rabbitmq/mk-sanitize-username-after-update
Escape username before displaying it
Fixup rabbitmq_shovel + bazel
Add rabbitmq_shovel to bazel
Add rabbitmq_sharding to bazel
Merge pull request #3015 from rabbitmq/rework-peer-discovery-aws-suite
Add rabbitmq_recent_history_exchange to bazel
Add rabbitmq_random_exchange to bazel
buildifier formatting
Add rabbitmq_prometheus to bazel
Add rabbitmq_peer_discovery_aws to bazel
Give a unique name to the job in the aws specific workflow
Add a github actions workflow for aws peer discovery
Use Amazon ECS to test rabbitmq_peer_discovery_aws
Test autoscaled ec2 instance clustering via make/shell
Test tagged ec2 instance clustering via make/shell
Merge pull request #3024 from luos/fix-stuck-mgmt-connections
link to the connection to avoid stuck unacked messages when using get messages
Remove the integration_SUITE from peer discovery aws
erts 11.1 ships with Erlang/OTP 23.2
Support relative time based offset specs
Only register the first web-dispatch listener
Propagate advertised host and port to client
Mark the rabbitmq_cli suite flaky in bazel
Update status command module name, references #3014
Merge pull request #3016 from rabbitmq/delete-last-stream-replica
Merge pull request #3017 from rabbitmq/mk-vhost-update-tags
Make it possible to update virtual host tags
Introduce functions that update virtual host metadata
Disallow removal of the last stream member
Export init_skip_as_error_flag/1
Merge pull request #46 from Ayanda-D/poison-messages-in-classic-queues
Merge pull request #3014 from rabbitmq/alias-stream-status
Move stream_status command to streams
Merge pull request #3011 from rabbitmq/autoack-clarification
Remove "requeue false"
More accurate ack mode description in the UI
Merge pull request #3007 from rabbitmq/mk-policy-event-formatting
Convert policy event keys to atoms
Merge pull request #3006 from rabbitmq/mk-emit-policy-update-event-after-schema-db-changes
Reduce log output
Emit an internal event about policy change last
Merge pull request #2992 from rabbitmq/stream-coord-safe-restart
Use stream leader to query offset
streams: improve stream_status command
Move messages from stream queues on the UI
Merge pull request #3005 from rabbitmq/osiris-tracking-types
Make tracking status more generic
Report offset and offset type in tracking status
Merge pull request #2996 from rabbitmq/stream-add-replica-check
Streams: safer replica addition
Adapt stream code to osiris tracking types introduction
Merge pull request #3002 from rabbitmq/stomp-for-streams
Use = separator for stream offset STOMP
Merge pull request #2988 from rabbitmq/stream-plugin-blocks-ingress-on-disk-alarm
Support streams in STOMP plugin
Merge pull request #2993 from rabbitmq/rebalance-ignore-drained
Merge pull request #2998 from rabbitmq/tag-branch
Tag docker image with branch name
Revert "Increase ra:members/1 timeout to 60s"
Merge pull request #2973 from luos/mirror-sync-reduce-memory-use
Set a default for consumer_timeout
Merge pull request #2973 from luos/mirror-sync-reduce-memory-use
Merge pull request #2990 from rabbitmq/consumer-timeout-default
Change consistent to a dirty read
Increase ra:members/1 timeout to 60s
Capture and log crashes on the stream coordinator machine
Set a default for consumer_timeout
Ignore drained nodes when rebalancing
Merge pull request #2989 from Ayanda-D/channel-interceptor-amqp-errors
Block stream publishing on disk alarm
Allow #amqp_error{} responses in channel interceptors
Merge pull request #2985 from rabbitmq/mk-decode-other-name-as-directory-string
Allow for more ASN.1 string (sub)types
Decode other name using 'OTP-PUB-KEY':decode/2
SAN of type otherName: strip two leading characters
Use Buster for all Erlang versions we support
Use -auto-approve instead of -force for forward Terraform compat
Revert "Upgrade VM helpers to Terraform 0.15.0"
Revert "Adapt more flags to Terraform 0.15"
Run apt-get update before installing any packages
Install GnuPG as it isn't available on Buster by default
Erlang setup: modernize, switch away from Bintray
Add rabbitmq_peer_discovery_k8s tests to bazel
Add rabbitmq_peer_discovery_etcd tests to bazel
Drop some Erlang 21-specific code
Pass Dialyzer
rabbit_common: pass Dialyzer
Merge branch 'fix-sh-concatenated-literal-parsing'
rabbit_env: Fix Bourne shell concatenated literal parsing
Add rabbitmq_peer_discovery_common tests to bazel
Remove a leftover comment
Test rabbitmq_mqtt with bazel
Merge pull request #2984 from rabbitmq/rabbitmq-server-2983
x.509 certificate auth mechanism: support (some) SANS of type otherName
Update README.md
Adapt more flags to Terraform 0.15
Ignore a few more Terraform 0.15 artefacts
Upgrade VM helpers to Terraform 0.15.0
Squash a warning that breaks CI compilation
Remove stream plugin instructions
Merge pull request #2982 from rabbitmq/mk-correctly-parse-tag-lists
Cosmetics
Correct parse tags provided as a list
Merge pull request #2980 from skapin/patch-1
Set correct field for extra scope and improve doc
rabbit_fifo: fix failing tests
Mark feature_flags_SUITE case flaky in bazel
buildifier
Refactor and dedupe .bazel file content
Make a smaller subset of the rabbit feature_flags_SUITE "exclusive"
Merge pull request #2976 from rabbitmq/qq-in-memory-limit-bug-fix
Mark rabbit_stream_queue_SUITE-cluster_size_3_1 as flaky
Add rabbitmq_management_agent suites to bazel
Add rabbitmq_management tests to bazel
QQ: ensure that messages are delivered in order
amqp_network_connection:handshake/3: handle socket send failures
Try to use less disk for some tests in GitHub Actions
Allow unused test node dirs to be deleted rather than removed
openssl.cnf: use sha256 for default_md
Bump Bazel RBE docker image
Add missing groups in rabbit_stream_queue_SUITE
Add rabbitmq_stomp to bazel
Add rabbitmq_jms_topic_exchange to bazel
Clean up comments
shard the dynamic_ha_SUITE by testcase to pinpoint flakes
Attempt to make exclusive tagged test run more efficient
Add rabbitmq_federation_management to bazel
rabbit_fifo: add smallest raft index to overview
Merge pull request #2936 from rabbitmq/stream-management
Catch exception when remote node is up but rabbit app is stopped
Hide consumer capacity for stream queues
Report number of consumers for stream queues
Report number of readers for stream queues
Hide message body stats for stream queues
Report stream writer memory on queue stats
Merge pull request #2929 from rabbitmq/stream-status-command
Adjust stream status format
CLI command to for stream details
Make streams compatible with osiris API changes
Shard rabbitmq_federation:queue_SUITE by group
Merge pull request #2972 from rabbitmq/improvements-to-source-dist-recipe
Makefile: Don't copy `rabbit/ebin` when running "make install" on Windows
Makefile: Use `core_native_path` on filenames passed to Erlang
Use {MIX,HEX}_HOME variables to prepare offline cache
Logging: Fix Cuttlefish schema mappings
rabbit_env: Fix arguments to the ?LOG_DEBUG format string
binary_to_atom/1 is not available in Erlang 22.3
Make rabbit_srcdir is optional under bazel
Add rabbitmq_federation to bazel
Adjustments for rabbitmq_federation under bazel
Stream coord: increase sleep on certain failures
Merge pull request #2970 from rabbitmq/faster-stream-coordinator-tick
Force a faster coordinator tick to flush data quicker
Adjust timeouts for feature flags suite
Mark portions of the peer_discovery_classic_config_SUITE flaky
Be more selective when marking the feature_flags_SUITE exclusive
Use pinned container images for bazel build
Merge pull request #2968 from rabbitmq/longer-qq-names
Allow quorum queue names to exceed atom max chars
Mark quorum_queue_SUITE-clustered-cluster_size_2 as flaky
Fix the lack of systemd in certain bazel tests
Add more VM memory monitor tests, pass Dialyzer
Update vm_memory_high_watermark/0 type
Merge pull request #2966 from rabbitmq/mk-one-more-relative-high-vm-memory-watermark-value-format
High VM watermark: support {relative, N} values set via advanced.config
Merge pull request #2965 from rabbitmq/rabbitmq-server-2964
Cosmetics
Handle {absolute, N} free disk space limit values
CLI: format infinity high VM memory watermark in status
CLI: handle {:relative, val} cases when formatting memory watermark
Normalize amqp10_client bazel build file
Turn down parallel buildbuddy jobs
Fixup previous commit
Add rabbitmq_event_exchange to bazel
Fix rabbit -> systemd dependency in bazel
Handle "undefined" PID when writing osiris tracking
Handle closed osiris reader when dispatching chunk
Add rabbitmq_peer_discovery_common to bazel
Mark feature_flags_SUITE-clustering as flaky in bazel
Merge pull request #2961 from rabbitmq/fix-edoc-errors
Doc: Fix all errors reported by edoc
Fix for the consolidation of erlang.mk and rabbitmq-components.mk
Merge pull request #2957 from rabbitmq/notify-systemd-using-erlang-systemd
Systemd: Use erlang-systemd to notify systemd of service status
Correctly provide log arguments here
Update a couple of AWS-related license headers
Merge pull request #2959 from thuandb/imdsv2
Add rabbitmq_consistent_hash_exchange to bazel
fix a typo in a config name
Handle creation of stream with different parameters
Test sharding and flaky annotations
Adopt change of suite_name -> name in ct_suite from @bazel-erlang
Resolve a rebase artifact
Merge branch 'thuandb-imdsv2'
address review feedback
address review feedback
address review feedback
address review feedback
introduce the IMDS abbreviation
added section on IMDS version to the readme
address review feedback
address review feedback
address review feedback
address review feedback
update doc on `aws.prefer_imdsv2` flag
update parse 4xx responses from instance metadata service
Support rabbit_peer_discovery_aws to work with instance metadata service v2 (IMDSv2).
Use a more typical unit test suite name here
Remove an unused function
Add rabbitmq_aws tests to bazel
Adjust rabbitmq_amqp1_0 dotnet tests to run in bazel rbe
Update build status badge in README
Naming
A typo
AMQP 1.0 binary parser: treat arrays with extra or missing input as fatal errors
Bump timeouts for peer discovery suite
Increase rabbit_stream_queue_SUITE timetrap
Fix bazel rbe for amqp10_client system_SUITE
Increase timeout for bazel exclusive tests
2nd attempt "Run "exclusive" bazel tests in GitHub Actions"
Run "exclusive" bazel tests in GitHub Actions
Add deps/rabbitmq_auth_mechanism_ssl to bazel build
Add new configuration variable to BUILD.bazel
Add queue_index_segment_entry_count configuration
unit_log_management_SUITE: Use $RABBITMQ_LOGS to configure logging
Bump erlef/setup-beam from v1 to v1.7
Bump (c) year in README.md
Maintain dependencies for GitHub Actions
Build & push container image on every commit
Attempt to avoid incomplete build results in buildbuddy
Logging: Add journald support
Add the rabbitmq_auth_backend_oauth2 suite
Mark the eager_sync_SUITE/eager_sync test case as flaky
Shard the eager_sync_SUITE by case
Logging: Allow to set timezone in rfc3339- and format-string-based time formats
Test that proxy dest address is picked up in all plugins
Update proxy protocol test cases
get destination address from PROXY protocol
Increase test timeout until we have more workers
Adopt enhancements from @bazel-erlang
Make buildbuddy builds public
Update rabbit PROJECT_ENV bazel equivalent
config_schema_SUITE: Stop testing log configuration
Handle 4 reserved bytes in osiris chunk
Logging: Add configuration variables to set various formats
Remove extra spaces in the RABBITMQ_PLUGINS_DIR during tests
type fix in stream coordinator
Fix self-referencing recursive make variable
Remove unused GitHub Actions workflow files
erlang.mk: Update to add support for Rebar lock file version 1.2.0
Use master branches of the rabbitmq-ct*-helpers
Add a partial Bazel build (#2938)
Add rabbitmq_aws tests to bazel
Adjust rabbitmq_amqp1_0 dotnet tests to run in bazel rbe
Update build status badge in README
address review feedback
address review feedback
address review feedback
address review feedback
introduce the IMDS abbreviation
added section on IMDS version to the readme
address review feedback
Merge pull request #2953 from rabbitmq/mk-amqp10-parser-infinite-loop
Bump timeouts for peer discovery suite
Naming
A typo
AMQP 1.0 binary parser: treat arrays with extra or missing input as fatal errors
address review feedback
address review feedback
address review feedback
Increase rabbit_stream_queue_SUITE timetrap
Fix bazel rbe for amqp10_client system_SUITE
Increase timeout for bazel exclusive tests
2nd attempt "Run "exclusive" bazel tests in GitHub Actions"
Run "exclusive" bazel tests in GitHub Actions
Add deps/rabbitmq_auth_mechanism_ssl to bazel build
Merge pull request #2939 from rabbitmq/configurable-segment-entry-count
Add new configuration variable to BUILD.bazel
Add queue_index_segment_entry_count configuration
unit_log_management_SUITE: Use $RABBITMQ_LOGS to configure logging
update doc on `aws.prefer_imdsv2` flag
update parse 4xx responses from instance metadata service
Merge pull request #2951 from rabbitmq/dependabot/github_actions/erlef/setup-beam-v1.7
Bump erlef/setup-beam from v1 to v1.7
Support rabbit_peer_discovery_aws to work with instance metadata service v2 (IMDSv2).
Bump (c) year in README.md
Merge pull request #2945 from rabbitmq/container-image-for-every-commit
Maintain dependencies for GitHub Actions
Build & push container image on every commit
Attempt to avoid incomplete build results in buildbuddy
Merge pull request #2940 from rabbitmq/support-journald-logging
Add the rabbitmq_auth_backend_oauth2 suite
Mark the eager_sync_SUITE/eager_sync test case as flaky
Shard the eager_sync_SUITE by case
Logging: Add journald support
Merge branch 'be-timezone-agnostic-in-logging-testsuite'
Logging: Allow to set timezone in rfc3339- and format-string-based time formats
Merge pull request #2942 from carlhoerberg/proxy-protocol-dest
Increase test timeout until we have more workers
Test that proxy dest address is picked up in all plugins
Adopt enhancements from @bazel-erlang
Make buildbuddy builds public
Update proxy protocol test cases
get destination address from PROXY protocol
Update rabbit PROJECT_ENV bazel equivalent
config_schema_SUITE: Stop testing log configuration
rabbit_ct_config_schema: Remove default value for {rabbit, [{log, _}]}
Handle 4 reserved bytes in osiris chunk
Merge branch 'add-logging-config-support'
Logging: Add configuration variables to set various formats
Remove extra spaces in the RABBITMQ_PLUGINS_DIR during tests
type fix in stream coordinator
Fix self-referencing recursive make variable
Remove unused GitHub Actions workflow files
erlang.mk: Update to add support for Rebar lock file version 1.2.0
erlang.mk: Update to add support for Rebar lock file version 1.2.0
erlang.mk: Update to add support for Rebar lock file version 1.2.0
Use master branches of the rabbitmq-ct*-helpers
Add Bazel Build (#4)
Add Bazel build (#47)
Add a partial Bazel build (#2938)
Fix variable match
Merge pull request #2935 from rabbitmq/rabbitmq-queue-int-tests
Fix integration tests to wait until ra cluster is ready
Increase startup delay range in peer_discovery_classic_config_SUITE
rabbitmq.conf.example: mention pause_minority
Restore retry in peer_discovery_classic_config_SUITE
Fix Makefile for feature_flags_SUITE_data/my_plugin
rabbit_prelaunch_errors: Handle exception stacktraces with args list
Fixup the behavior of rabbit_mnesia:is_virgin_node/0
Merge pull request #2925 from rabbitmq/mk-drain-revive-with-disabled-feature-flag
Revisit what drain and revive do when their feature flag is not enabled
Update rabbitmq-diagnostics {drain, revive} tests
fix rabbit_fifo_int_SUITE
CLI tools: bump dependencies
CLI tools: gitignore ./sbin
Reinstate the `prepare-dist` tasks for rabbitmq components
Update rabbitmq_auth_mechanism_ssl docs
AMQP 1.0: make stream tests enable feature flag
Merge pull request #2909 from rabbitmq/ra-systems
Only fetch the monorepo once in rabbitmq-components.mk
Fix Grafana dashboards when importing from URL
Use "quorum_queues" for QQ Ra system
MQTT ra systems changes
fixes
ra systems wip
Stacktrace arity can be an argument list in some cases
STOMP: remove a flaky Python test already covered in Erlang
Merge pull request #2918 from rabbitmq/dedupe-rabbitmq-components-mk
Remove duplicate rabbitmq-components.mk and erlang.mk files
Merge pull request #2917 from rabbitmq/add_stream_commandctl
Add the rabbitmq-streams command
Use the standard domain for quorum queue doc guides
Merge pull request #2916 from rabbitmq/capabilities-renaming
Rename policies to unsupported_policies in capabilities/0
Merge pull request #2899 from rabbitmq/parallel-stream-suite
Merge pull request #2902 from rabbitmq/unsupported-stream-rebalance
Merge pull request #2910 from rabbitmq/configure-num-conns-sup
Ranch max connection is per connection supervisor in Ranch 2.0
Merge pull request #2911 from rabbitmq/RABBITMQ_LOGS-envvar-does-not-override-configured-log-level
rabbit_prelaunch_logging: $RABBITMQ_LOGS doesn't override log level
fix missing Ra deps updates
Make ranch parameter `num_conns_sups` configurable
Wait between retries if nxdomain
Update rabbitmq-components.mk
dockerignore deps
Filter out stream queues from rebalance command
Run most stream tests in parallel
AMQP 1.0 plugin: upgrade .NET test dependency
Stream coordinator bug fix
rabbitmq_sharding README updates
Mgmt agent: format stream queue type
Add logging to config decryption test
Adjust secondary umbrella fetch
Merge pull request #2898 from rabbitmq/dockerfile-otp-24
Update dotnet SDK version for dockerimages
Merge pull request #2876 from rabbitmq/stream-coord-refactor
erl_interface is required in OTP-24+
stream coordinator fall back to consistent query
Merge pull request #2891 from rabbitmq/mk-adapt-to-latest-stomp.py
STOMP: upgrade Python suite(s) to stomp.py 6.x
STOMP: add a runner to transactions.py
Merge pull request #2890 from rabbitmq/mk-await-onlinequorum-plus-one-in-single-node-clusters
Make 'rabbitmq-queues await_online_quorum_plus_one' a no-op for single node clusters
Sync rabbitmq-components.mk in a few more places
Merge pull request #2888 from rabbitmq/additional_plugins
Merge pull request #2887 from rabbitmq/erlang_ls
Check PID on leader lookup in stream plugin
Stream coordinator: handle commands for unknown streams
Throw resource error when no local stream member
Use right map fields to compute streams info
Adapt stream plugin after coordinator refactoring
Stream Coordinator: primitive backoff
Move stream coordinator unit tests into ct suite
Stream Coordinator refactor
Add ADDITIONAL_PLUGINS variable
erlang_ls config file for better dev experience
Squash a compiler warning introduced in #2878
STOMP: continue modernizing stomp.py test suites
STOMP: stomp.py suite cosmetics
STOMP: further stomp.py suite modernization steps
Rename a STOMP test suite
Merge pull request #2886 from rabbitmq/mk-fix-mqtt-machine-logging-typo
MQTT: correct a typo in mqtt_machine
Merge pull request #2885 from ansd/flip-conditions
STOMP: run Python tests on Python 3
Avoid unnecessary network calls
Merge pull request #2861 from rabbitmq/use-builtin-logger
Drop trailing newlines from logged messages where possible
Use Cuttlefish master for now
rabbitmq_peer_discovery_{common,consul}: Switch to Logger macros
Switch from Lager to the new Erlang Logger API for logging
Squash two more warnings on Erlang 24
This message arguably belongs to the channel category
rabbitmq-diagnostics remote_shell: squash a compiler warning
Make start-cluster work when run in the top-level
Naming
Merge branch 'otp-24-ranch'
STOMP: modernize Python test suite
Update ranch supervisor structure on list/0 command
Delete unused var
Update ranch supervisor structure on list/0 command
Update ranch supervisor name
Make this test more agnostic to stacktrace shape
Merge pull request #2879 from rabbitmq/otp-24-crypto
Replace cryto:hmac/3 by crypto:mac/4
Update to ranch 2.0
Fix colors for node names that include digits in Grafana dashboards
Cuttlefish 2.7.0 for Erlang 24 compatibility
Merge pull request #2869 from rabbitmq/mk-remove-unused-federation-is-up
Remove two now unused functions
Merge pull request #2860 from rabbitmq/cli-remote_shell
Merge pull request #2868 from rabbitmq/otp-24-federation
Sync rabbitmq-components.mk
Remove federation_up/0 check
Merge pull request #2867 from rabbitmq/otp-24-federation
Await for links to start/fail to start on test suite
Revert "Make rabbit_log:log/2 return 'ok' unconditionally"
Make rabbit_log:log/2 return 'ok' unconditionally
Revert "Squash one more Erlang 24 warning"
Squash one more Erlang 24 warning
Merge pull request #2864 from rabbitmq/mk-lager-3-9-0
Drive-by: squash an Erlang 24-specific warning
Drive-by: squash an Erlang 24-specific warning
Bump Lager to 3.9.1
Use scope on pg groups and skip `go` call from the app
Retry if we could not start links because the plugin wasn't yet running
Synchronize federation_up/0 logic for both link types
pg2 => pg for OTP 24 compatibility
Clean up rabbit_fifo_usage table on queue.delete
Erlang client: drop some Erlang 19-specific code
Require Erlang/OTP 23 for RabbitMQ 3.9
Remove Erlang 22 from GitHub Actions
Merge pull request #2859 from rabbitmq/mk-otp-24-compat-pg2-to-pg-migration
Use scope on pg groups and skip `go` call from the app
Retry if we could not start links because the plugin wasn't yet running
Synchronize federation_up/0 logic for both link types
pg2 => pg for OTP 24 compatibility
Merge pull request #2846 from rabbitmq/cleanup-rabbit-fifo-usage
Erlang client: drop some Erlang 19-specific code
Require Erlang/OTP 23 for RabbitMQ 3.9
Cosmetics
Remove Erlang 22 from GitHub Actions
Add rabbitmq-diagnostics remote_shell
Remove an stdout log entry
Restore Erlang 22.3 compatibility for direct reply-to
Replace Async threads warning with Dirty I/O
Bump observer_cli to 1.6.1
Only export RABBITMQ_NODE_PORT when it is not the default
Stop logging unblock client access unconditionally
Allow rabbitmq to run in a larger cluster composed of also non-rabbitmq nodes
Update heartbeat timeout docs in rabbitmq.conf.example
Correct a child spec typo
Regular supervisor is sufficient here
Extract a constant
Cosmetics
OTP 24 compat: switch management and management_agent to use pg
Add comment
Use unsigned ints in stream protocol, when appropriate
Move most packaging goal implementations to rabbitmq-packaging
Revert "Remove directories used by the server release pipeline"
Start constants at 1 for stream plugin
Use port 5551 for streams when starting cluster
Use MSB in keys to distinguish requests/responses
Merge pull request #2857 from rabbitmq/mk-direct-reply-to-erlang-22.x-compat
Restore Erlang 22.3 compatibility for direct reply-to
Merge pull request #2854 from rabbitmq/dirty-io-warnings
Replace Async threads warning with Dirty I/O
Bump observer_cli to 1.6.1
Merge pull request #2853 from mbaldessari/openstack-fixes
Only export RABBITMQ_NODE_PORT when it is not the default
Stop logging unblock client access unconditionally
Allow rabbitmq to run in a larger cluster composed of also non-rabbitmq nodes
Update heartbeat timeout docs in rabbitmq.conf.example
Merge pull request #2850 from rabbitmq/mk-otp-24-compat-pg2-to-pg-migration
Correct a child spec typo
Regular supervisor is sufficient here
Extract a constant
Cosmetics
OTP 24 compat: switch management and management_agent to use pg
Add comment
Use unsigned ints in stream protocol, when appropriate
Merge pull request #2849 from rabbitmq/rabbitmq-server-2848
Start constants at 1 for stream plugin
Use port 5551 for streams when starting cluster
Move most packaging goal implementations to rabbitmq-packaging
Use MSB in keys to distinguish requests/responses
Revert "Remove directories used by the server release pipeline"
Adaptation to Lager 3.9
Upgrade Lager to 3.9.0 for OTP 24 compatibility
Be more defensive when removing federated queue links
Set stream plugin default port to 5551
Merge branch 'super-streams-publishing'
Add route and partitions command to stream plugin
Merge pull request #2804 from rabbitmq/rabbitmq-server-2756
Clean up rabbit_fifo_usage table on queue.delete
Merge pull request #2843 from rabbitmq/consumer-capacity
Small code enhancements
rabbit_env: Use consistent style
rabbitmq_stream_management: Ignore more dirs created by `gmake dist`
mk/rabbitmq-run.mk: Compute rabbitmq_stream TCP port based on $(RABBITMQ_NODE_PORT)
rabbit_env: pass Dialyzer again
rabbit_env: remove one more direct call to os:list_env_vars/0
Try ignore_xref
Pass xref on OTP 22 and 23
os:list_env_vars/0 was renamed to os:env/0 in OTP 24
Squash a warning on OTP 24
As of Lager 3.8.2, Lager has a log_root default
OTP 22 compatibility
Consumer utilization => consumer capacity in Prometheus metrics
Improve UI help hint for consumer capacity
Whitelist consumer_capacity in 'rabbitmqctl list_queues'
Merge pull request #2842 from rabbitmq/mk-vesc-1003-shorter-direct-reply-to-key
Adapt to the types used by string:lexemes/2
Correctly use string:lexemes/2
Revisit type signatures that tripped up Dialyzer
Fall back to v1 direct reply-to encoding
Limit direct reply-to identifier length growth
Extract direct reply-to PID encoding into a new module
Rename consumer_utilisation to consumer_capacity
Bump observer_cli to 1.6.0
Bump Lager to 3.8.2 for OTP 24 compatibility
Merge pull request #2838 from rabbitmq/rabbitmq-server-2837
Fix the docker image for use with uncompressed plugins
Adjust the version and tag selection mechanism for `make docker-image`
`make docker-image` no longer pushes the image by default
Remove directories used by the server release pipeline
Remove redundant SOURCE_DIST_FILE
Build the docker image, don't just echo
Fix OPENSSL_PGP_KEY_IDS ENV in Dockerfile
Use same docker config as the official rabbitmq image
Revert "Remove the packaging directory"
Log Shovel restart events
Merge pull request #2791 from Appva/feature/jwks
Merge pull request #2833 from rabbitmq/oauth2-cuttlefish-support
No global response code for metadata in stream protocol
Fix stream protocol documentation after review
Destructure in the function head
Remove a clause that would never match
Bindings in Erlang use CamelCase
cuttlefish:unvalid/1 expects a string
Merge pull request #2830 from rabbitmq/fix-amqp1_0_reader-crashes
Make the tests green
Log loaded config schema snippets
Mention stream protocol responses can have extra info
WIP: cuttlefish support for oauth2 plugin
Don't crash on rabbit_net:setopts
Fix conserve_resources alarm handling
Fix notify_decorators and policy notifications
Merge pull request #2829 from rabbitmq/mk-opt-out-of-separate-channel-use
Add a single channel mode-specific test
Make it possible to use a single channel for message transfers and commands
Select applicable policies from exclusion list
Ditto for ERTS_MINIMUM
Bump validated Erlang/OTP version minimum to 22.3
Enable jwks_http to run embedded without requiring a separate OTP application
Add federation support for quorum queues
Move jwks_http modules into the test folder
rabbit_looking_glass: add an xref ignore
Bump Cuttlefish to 2.6.0
Correct a health check unit validation message
Merge pull request #2824 from luos/fix-search-containing-spaces2
fix search field for values containing spaces
Ignore commonly used profiling file names
Don't filter out lz4 and looking_glass from dependency list
Use an up-to-date Looking Glass repo name
Make it possible to start Looking Glass without starting tracing
Merge pull request #2820 from rabbitmq/fix_old_link
fix old link
Correct TLS settings not compatible with TLSv1.3
rabbitmq.conf.example: clarify TLS settings incompatible with TLSv1.3
Bump (c) year
Bump (c) year
Merge pull request #2814 from rabbitmq/config_example
Document TLSv1.3-specific cipher suites in rabbitmq.conf.example
More TLS-related edits in rabbitmq.conf.example
Drive-by change: correctly format connection name
fix space
Add tls info
Add tls info
LDAP plugin: handle undefined app env values, pass Dialyzer
Correct a duplicate snippet name
Add logging to stream subscription
.NET test suite: target netcoreapp3.1, use .NET Core SDK 3.1.x for now
Split a test that uses stream queues into its own group
Skip QQ-specific tests in mixed version mode
Merge pull request #2806 from rabbitmq/rabbitmq-server-2805
New configuration settings for TLS
Merge pull request #2803 from carlhoerberg/default-no-busy-wait
Merge pull request #2773 from rabbitmq/is-unresponsive-stream
Disable Erlang busy wait by default
Merge pull request #2802 from rabbitmq/rabbitmq-server-2798
x-arg validation fixes, improved error reporting for queue declaration
Make it possible to specify optional queue arguments for dynamic Shovels
Merge pull request #2801 from rabbitmq/rabbitmq-server-2796
Drive-by change: improve wording used by 'rabbitmq-queues rebalance'
Avoid unintentional matching here
Handle queue deletions in the middle of leadership transfers
Set correct offset metrics on stream consumer creation
Use new crypto API cipher name here
Import runtime parameters after the topology
Merge pull request #2797 from rabbitmq/rabbitmq-server-2795
Don't consider exclusive classic queues to be mirrored
Exclude aes_ige256 in one more test suite
Skip aes_ige256 in config value encryption/decryption tests
Use credentials_obfuscation master in RabbitMQ master
Add inet_tcp_metrics Grafana dashboard & cluster example
Document JWKS support
JWKS tests
Bump (c) year in header files
Merge pull request #2792 from rabbitmq/mk-bump-cache-gen-server-call-timeout
Bump gen_server:call timeuts for rabbitmq_auth_backend_cache operations
Support fetching JWT signing keys from JWKS endpoint
Refactor this test in attempt to help a scoping issue on Concourse
Merge pull request #2778 from rabbitmq/update-reference-docs-link
Update link to the reference docs
Bump JOSE dependency to 1.11
Merge pull request #2742 from rabbitmq/issue-2685
Merge pull request #2771 from rabbitmq/issue-2715
Correct a type spec
Use await_condition/2 in these tests
Wording
Use a record here
Merge pull request #2772 from rabbitmq/rabbitmq-server-2756
Compile
Implement `is_unresponsive` for stream queues
New command: `rabbitmqctl close_all_user_connections`
Avoid federation crashes for non-classic queue types
Add a .gitignore to rabbitmq_stream_prometheus
Merge branch 'issue-2685' into master
Wording
Check whether the file is readable
Remove a leftover binding
Check whether the file is readable
Merge pull request #2765 from rabbitmq/cmq-leader-log
Remove a log line related to CMQ leader transfer
Add stream prometheus plugin to plugins.mk
Merge pull request #2763 from rabbitmq/mk-erlang-client-2750
Naming
Fix unused variable
Merge remote-tracking branch 'gh-2750/master' into mk-erlang-client-2750
Merge pull request #2759 from rabbitmq/default-quorum-cluster-size
Be extra defensive when fetching initial quorum group size
Correctly fetch 'rabbit.quorum_cluster_size'
Fix capture of `application:get_env` return value
WIP: close_all_user_connections command
Set default cluster size to 3
Fix default cluster size config name
Disable stream failure test
Merge pull request #2755 from rabbitmq/mk-remove-cmq-leadership-transfer-from-maintenance-mode
Don't perform CMQ leadership transfer when entering maintenance mode
Add stream prometheus plugin to GH actions
Remove unnecessary file
Merge pull request #2712 from rabbitmq/rabbitmq-stream-prometheus
Fix stream prometheus tests
Merge pull request #2729 from rabbitmq/rabbitmq-stream-consumers-in-queue-details
Merge pull request #2751 from rabbitmq/rabbitmq-server-2749
Improve a log message
Less intrusive CMQ leadership transfer
rabbit_amqqueue:maybe_rebalance/4: only consider nodes not under maintenance
Synchronously add mirrors when transferring ownership
Resolve DNS until first success
Filter out gauges from per-object metrics
Merge pull request #2741 from rabbitmq/single-auth-attempts-declarations-on-per-object_2740
Always show aggregated auth_attempts, add detailed when per object enabled
Single auth_attempts declarations when per-object metrics enabled
rabbit_ct_client_helpers:consume/3: don't expect the queue was fully drained
Bump (c) year
More README edits
List more prominent doc guides in README
Disable stream failure test until coordinator is fixed
Merge branch 'tomyouyou-vm_memuse' into master
Refactor #2733 a bit more
Use slightly more idiomatic Erlang
Add help tooltip for consumers channel column
'get_memory_use(ratio)' will have an exception when MemoryLimit is 'infinity'
Prometheus metric collector: correct wording in labels
Merge pull request #2731 from rabbitmq/rabbitmq-server-2730
Avoid double resolving client hostname
Adapt consumer link in queue details page
Merge pull request #2728 from rabbitmq/qq-bug-fix-service-queue-conv
Report stream consumers as regular consumers in management
rabbit_fifo: handle unhandled commands
Fix crash bug in QQ state conversion
Remove unnecessary dependencies
Merge branch 'rabbitmq-stream-publisher-consumer-cli'
Add list_stream_publishers CLI command
Add list_stream_consumers CLI command
Turn off parallelization of ct-suites in rabbit
Bump all Grafana dashboards dep versions to latest
Filter Grafana dashboards by namespace (#2719)
Add response codes to stream protocol page
Merge branch 'master' into rabbitmq-stream-prometheus
Re-order stream command constants
Handle a 'noport' clause here
Merge pull request #2722 from rabbitmq/rabbitmq_epmd_wait
Naming, wording
Add log
Add spec
Fixup previous commit
Remove 'package-generic-unix' job from the GitHub Actions workflow
Add retry for epdm name (hostname)
Make sure legacy rabbit_management_load_definitions step does not block boot
Bump test dependencies in stream plugins
Merge pull request #2680 from rabbitmq/rabbitmq-managenet-2615
Don't unintentionally gitignore HTTP API doc reference
HTTP API doc reference: wording, markup
type name fix
Merge pull request #2713 from rabbitmq/stream-queue-failover
Test stream prometheus
MQTT auth_SUITE: synchronise concurrent setup with the test
Remove debug log message
bugfix
Stream: Channel resend on leader change
Merge pull request #2695 from rabbitmq/update-retention
Remove use of non-deterministic function
Start test suite for stream prometheus
stream coord: fixes
Apply retention policy in all osiris members
Update retention when only stream retention policy has changed
Merge pull request #2681 from rabbitmq/stream-coordinator-restart-failure
Remove unused value
Fix typo
Add stream prometheus plugin
Merge pull request #2656 from rabbitmq/run-plugins-boot-steps-during-rabbit-start
Merge pull request #2708 from rabbitmq/rabbitmq-shovel-2655
Clean up specs of autodeleted Shovels once every 60 seconds
rabbit: Run plugins' boot steps during rabbit start/2
Use a timer to clean up stale child specs
Dynamic Shovels: avoid log spam
Only check for a shovel parameter for dynamic shovels
Add parameter detection to rabbit_shovel_worker start_link
Use a Shovel-specific logger here
Merge pull request #2707 from rabbitmq/mk-remove-ranch-dependency-from-common
Remove Ranch dependency from rabbit_common
Format stream and stream management plugins code
Add logs to some stream tests
Add Stream Management plugin to GHA
Merge pull request #2650 from rabbitmq/rabbitmq-stream-management
Ditto
Squash a warning
Spring Boot controller: improve logging
Bump Spring Boot parent
Restore a portion of the packaging directory
tools/terraform: Fix warning reported by Terraform
Remove the packaging directory
Merge branch 'rabbitmq-stream-management' of github.com:rabbitmq/rabbitmq-server into rabbitmq-stream-management
Merge branch 'master' into rabbitmq-stream-management
Merge pull request #2697 from rabbitmq/stream-manager-check-queue-exists
Check that the queue exists before calling declare
Merge pull request #2693 from rabbitmq/mqtt-machine-opt
bug fixes
MQTT machine versions
Merge pull request #2692 from rabbitmq/mqtt-machine-opt
Optimise MQTT state machine
Bump credentials_obfuscation version
Merge pull request #2686 from rabbitmq/bypass-pem-cache
Expose `bypass_pem_cache` through rabbitmq.conf
Update fetching of rabbit and rabbit_common deps
Once again raise an error when add_code_path_to_node fails
Add additional logging when adding code paths to remote nodes
Add offset & consumed column to stream consumer in management
Add offset & consumed metrics to stream consumer
Merge pull request #2676 from rabbitmq/rabbitmq-server-2667
Merge pull request #2682 from Y2Nk4/patch-1
Add \d for the cd command
Ensure leader is deleted from supervisor in case of re-election
Add documentation for the pagination
rabbitmq-upgrade(8): add missing commands
Fixup workflow caching (#2678)
Do not split user tags in management UI
Remove invalid `docker pull` in workflows
Revert "Use artifacts rather than cache in github actions"
Use artifacts rather than cache in github actions
Fixup args for `docker load` in workflows
Another image caching attempt for the workflows
Refactor workflow sources
Attempt to fix up the docker image cache key conflicts
Clean up workflow warnings
Merge branch 'update-gh-actions-docker-tests'
Adapt HTTP API test suite expectations
docker/build-push-action does not support load and push both true
Try to add caching of docker image pulls
HTTP API: format user tags the same way 'rabbitmqctl export_definitions' now does
Merge branch 'master' into rabbitmq-stream-management
Update extern docker actions for test workflows
Add chunk header parameter to send_file callback
Use v2 of the docker build-push-action for ci base images
Clarify what version will be the first to use this format
Remove a stray debug logging line
Add proper title to stream connections page
Export user tags as a list
Merge pull request #2674 from rabbitmq/rabbitmq-server-2673-followup
Support importing users with arrays of tags
Update the aws key references for peer_discovery_aws
Merge branch 'master' into rabbitmq-stream-management
Fix failure tests in stream plugin
Fix metrics table GC test in stream plugin
Update external github action reference
Pass RABBITMQ_NODENAME via Windows service environment
Merge pull request #2673 from luos/allow_configuring_rabbitmq_base_multiple_times2
Make sure to return 404 in stream management plugin
Add publishers in stream connection details page
Add stream connection publishers REST endpoint
Add consumers in stream connection details page
Add stream connection consumers REST endpoint
Add publisher reference to stream endpoint
allow configuring multiple rmq bases for multiple services
Add publisher REST endpoint to stream consumer management
Merge branch 'master' into rabbitmq-stream-management
Send shutdown message to non network/direct connection
Wait longer for replicas to come up in stream plugin
Track publishers in stream plugin
Handle errors in crashing_queues_SUITE
Fix some dialyzer warnings in stream plugin
Merge pull request #2669 from rabbitmq/rabbitmq-server-2668
Handle undefined args case
Add test that fails prior to the change for #2668
Add GC to stream consumer monitoring table
Filter records based on user in stream consumer endpoint
Add connection details to stream consumer endpoint
Test stream consumers endpoint
Start stream consumer REST endpoint
Merge branch 'Ayanda-D-call-timeout-safety' into master
Use ?assertEquals here
Wording
Remove unused code line.
Change per-object endpoint to `/metrics/per-object`.
Document `/metrics/per_object` endpoint.
Deleted unnecessary pattern
Add /metrics/per_object endpoint
Convert AMQP 091 timestamp to millisecond
Support timestamp offsets for stream consumers
Remove stream field from publish command
Include publisher state management
Enforce publisher ID uniqueness
Add query publisher sequence
Declare publisher in stream test
Start adding publishing dedup support for streams
Include publish dedup in stream protocol
GitHub Actions tweaks
Merge pull request #2659 from rabbitmq/per-object-endpoint
Merge branch 'master' into rabbitmq-stream-management
Merge pull request #2506 from rabbitmq/stream-timestamp-offset
Convert AMQP 091 timestamp to millisecond
Add failing direct connection safe call timeout test/mock
Merge pull request #2657 from rabbitmq/rabbitmq-stream-writer-dedupe
Remove stream field from publish command
GitHub Actions tweaks
Add erlang client safe_call_timeouts tests
Include publisher state management
Add timeouts to direct connection establishment operations. At some point, these have to timeout to avoid having lingering connection processes attempting remote connections under unstable conditions.
Ensure safe amqp client call timeouts on connection establishment. This guarantees that the effective call timeouts are always safe, i.e. granting enough time to the underlying network operations, which must always timeout first in case of any unexpected lingering operations leading to timeouts. This eliminates the chance of leaking connection processes when call timeouts elapse, while underlying remote cconnection establishment call was still taking place.
Enable tests in github actions for all plugins
Enforce publisher ID uniqueness
Remove unused code line.
Change per-object endpoint to `/metrics/per-object`.
Add query publisher sequence
Document `/metrics/per_object` endpoint.
Deleted unnecessary pattern
Declare publisher in stream test
Start adding publishing dedup support for streams
rabbit_ct_helpers: Use timer:send_after/2 instead of erlang:start_timer/4
Add `make monorepo-distclean` [ci skip]
Fix a job ordering problem in the Erlang git master workflow
Add additional testing dependencies to the temporary docker images
Enable testing of rabbitmq_amqp1_0 in GitHub Actions
Get rid of unchecked warnings in Java test
Remove system.out call
Add permission tests for stream management
Fixup the Maintenence workflow to keep needed images [ci skip]
AMQP 1.0 Java tests: bump dep versions
AMQP 1.0 Java client tests: target a reasonably modern lang version
Also allow manual triggering of scheduled workflows [ci skip]
Simplify 'Maintenance' GitHub Actions Workflow [ci skip]
Use workflow matrix for ci base images [ci skip]
Fix up ci paths broken by previous commit
Add a workflow for testing with erlang/otp master
Remove unnecessary files
Add first tests for stream management
Update the Maintenance GitHub Actions workflow [ci skip]
Fix small typo
Add instructions for running specific test suites, and only running certain tests in GH actions
Add connection endpoint to stream management
Add connections/:vhost endpoint to stream management
Remove 'Turnstyle' step from the prepare step in GHActions [ci skip]
Include publish dedup in stream protocol
Add rabbit_ct_broker_helpers:set_ha_policy_all/2
Add missing env var in GitHub actions step
Add a timeout to the 'prepare' GitHub Actions job
Filter stream connections where metrics are disabled
Merge pull request #2651 from rabbitmq/qq-basic-get-snapshots
Add /metrics/per_object endpoint
Display only stream connections in plugin
QQ: Emit release cursor for empty basic gets
Merge pull request #2636 from rabbitmq/rabbitmq-stomp-gh-153-monorepo
Merge pull request #2582 from rabbitmq/rabbitmq-amqp1.0-gh-104-monorepo
Introduce stream management plugin
Skip dialyzer for rabbitmq_stream plugin
Fix generation of workflow_sources/deps.yml on darwin [ci skip]
Correct the condition on some GitHub Actions jobs
Add rabbitmq_stream plugin suites to GitHub Actions test run
Merge pull request #2649 from rabbitmq/rabbitmq-server-2497
Merge remote-tracking branch 'origin/master' into stream-timestamp-offset
Ensure pg2 group is created only when links are created and removed with them
Make it possible to skip ci in a commit with `[ci skip]`
Make ct-suite parallelization in GitHub Actions explicit
README edit: Pivotal => VMware
Test stream queues with STOMP
rabbit_common: Remove the rabbitmq-github-actions Erlang.mk plugin
Add rabbitmq_stream to the github-actions releated make goals
Switch the Maintenance GitHub Actions workflow to a schedule
Merge pull request #2627 from rabbitmq/stream-purge
Hide Purge option for stream queues
Remove unused .github directories
Move issue and PR templates to monorepo root
Drive by change: ignore ebin/*
Wording and additional usage docs
Allow "all" as a feature flag name
Check if member processes are alive in metadata command
Test stream queues with AMQP 1.0
Merge pull request #2504 from rabbitmq/qq-credit-mode
Add rabbitmq_stream to .gitignore
Merge remote-tracking branch 'rabbitmq_stream/master'
Makefile: Exclude more things from the source archive
plugins.mk: Sort plugins alphabetically
packaging/docker-image: Move Docker files to their own directory
Only perform mixed version testing on oldest Erlang
Remove unused function
Use correct credit mode x-credit
Add mixed version testing for the deps/rabbit suites
Move (copy) the README file back into place
Ensure that `make distclean` does not remove vendored deps
Record workflow conclusions in a GCS bucket
Update new ct suites with timing info
Fix honeycomb build traces
Correct use of dialyze in GitHub Actions
Use Elixir 1.10.4 in GitHub Actions
Refactor GitHub Actions workflow templates
Adjustments for rabbitmq-cli tests
Add support for bringing topic branches into the monorepo
Add a manually triggered workflow for builing base ci docker images
Turn on GitHub Actions intermediate docker image cleanup
Rework `make xref` execution in GitHub Actions
Monorepo GitHub Actions
Merge remote-tracking branch 'rabbitmq_server_release/master'
Merge remote-tracking branch 'rabbitmq_web_stomp_examples/master'
Merge remote-tracking branch 'rabbitmq_web_stomp/master'
Merge remote-tracking branch 'rabbitmq_web_mqtt_examples/master'
Merge remote-tracking branch 'rabbitmq_web_mqtt/master'
Merge remote-tracking branch 'rabbitmq_web_dispatch/master'
Merge remote-tracking branch 'rabbitmq_trust_store/master'
Merge remote-tracking branch 'rabbitmq_tracing/master'
Merge remote-tracking branch 'rabbitmq_top/master'
Merge remote-tracking branch 'rabbitmq_stomp/master'
Merge remote-tracking branch 'rabbitmq_shovel_management/master'
Merge remote-tracking branch 'rabbitmq_shovel/master'
Merge remote-tracking branch 'rabbitmq_sharding/master'
Merge remote-tracking branch 'rabbitmq_recent_history_exchange/master'
Merge remote-tracking branch 'rabbitmq_random_exchange/master'
Merge remote-tracking branch 'rabbitmq_prometheus/master'
Merge remote-tracking branch 'rabbitmq_peer_discovery_etcd/master'
Merge remote-tracking branch 'rabbitmq_peer_discovery_consul/master'
Merge remote-tracking branch 'rabbitmq_peer_discovery_k8s/master'
Merge remote-tracking branch 'rabbitmq_peer_discovery_aws/master'
Merge remote-tracking branch 'rabbitmq_peer_discovery_common/master'
Merge remote-tracking branch 'rabbitmq_mqtt/master'
Merge remote-tracking branch 'rabbitmq_management_agent/master'
Merge remote-tracking branch 'rabbitmq_management/master'
Merge remote-tracking branch 'rabbitmq_jms_topic_exchange/master'
Merge remote-tracking branch 'rabbitmq_federation_management/master'
Merge remote-tracking branch 'rabbitmq_federation/master'
Merge remote-tracking branch 'rabbitmq_event_exchange/master'
Merge remote-tracking branch 'rabbitmq_consistent_hash_exchange/master'
Merge remote-tracking branch 'rabbitmq_codegen/master'
Merge remote-tracking branch 'rabbitmq_cli/master'
Merge remote-tracking branch 'rabbitmq_aws/master'
Merge remote-tracking branch 'rabbitmq_auth_mechanism_ssl/master'
Merge remote-tracking branch 'rabbitmq_auth_backend_oauth2/master'
Merge remote-tracking branch 'rabbitmq_auth_backend_ldap/master'
Merge remote-tracking branch 'rabbitmq_auth_backend_http/master'
Merge remote-tracking branch 'rabbitmq_auth_backend_cache/master'
Merge remote-tracking branch 'rabbitmq_amqp1_0/master'
Merge remote-tracking branch 'amqp10_common/master'
Merge remote-tracking branch 'amqp10_client/master'
Merge remote-tracking branch 'amqp_client/master'
Merge remote-tracking branch 'rabbit_common/master'
Change repo "root" to deps/rabbit
Support timestamp offsets for stream consumers
Upgrade RabbitMQ Overview dashboard to Grafana 7
Merge pull request #61 from rabbitmq/grafana-publisher-fix
Bump Grafana, Prometheus & Node Exporter to latest
Move all protocol errors from inside the queue types to the channel (#2503)
Prevent non-zero publisher count when aggregating metrics
Implement stream credit required by amqp 1.0 (#2496)
Merge pull request #2502 from rabbitmq/rabbitmq-server-2500
Definition export: correctly format binding arguments
Merge pull request #21 from rabbitmq/lrb-confirm-timeout-is-seconds
Merge pull request #138 from rabbitmq/lrb-confirm-timeout-is-seconds
Move some code to utils module
type spec fix
Throw protocol error in channel
Fix dialyzer error
Remove unused variable
Merge pull request #2494 from rabbitmq/rabbitmq-server-2493
Update error message.
Merge pull request #2482 from rabbitmq/stream-parallel-tests
Merge pull request #2483 from rabbitmq/stream-purge
Merge pull request #2484 from rabbitmq/stream-policies
rabbit_exchange_type_consistent_hash_SUITE: Bump wait_for_confirms to 5 minutes
rabbit_exchange_type_consistent_hash_SUITE: Use ?assertEqual instead of matching
rabbit_exchange_type_consistent_hash_SUITE: Remove trailing whitespaces
Modify "byte" validator to allow 255
Add test for a depth setting of 255
Fix "byte" validator message.
Modify "byte" validator to allow 0
"byte" validator for cuttlefish schema disallows 0
rabbit_ct_helpers: Dump command output every 30 seconds
rabbit_exchange_type_consistent_hash_SUITE: Wait for confirms for 60 seconds
quorum_queue_utils: Switch arguments to ?assertEqual in wait_for_messages()
quorum_queue_SUITE: Delete `restart_queue` queue
No longer use amqp_util:call_timeout/0 for wait_for_confirms. Allow specifying integer dimension via a tuple
Document the Timeout parameter to wait_for_confirms
Call rabbit_log:warning/2
Merge pull request #2492 from rabbitmq/ack-after-queue-delete
Merge pull request #2490 from rabbitmq/lrb-confirm-timeout-is-seconds
Merge pull request #864 from rabbitmq/lrb-confirm-timeout-is-seconds
Merge pull request #50 from rabbitmq/lrb-confirm-timeout-is-seconds
Add stream plugin to plugins.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk to include stream plugin
remove unused function
Avoid crash when acking deleted queue
Return Erlang node long name in metadata
wait_for_confirms timeout is in seconds
wait_for_confirms timeout is in seconds
Update all other usages.
wait_for_confirms timeout is in seconds
Merge pull request #423 from rabbitmq/revert-rabbitmq-common-418
Revert "Handle potential undefined value returned from process dictionary"
quorum_queue_SUITE: Wait for the two queues to start in restart_all_types/1
Merge pull request #2491 from rabbitmq/dialyzer-type-fixes
rabbit_ct_broker_helpers: Catch another possible exception in force_vhost_failure/4
publisher_confirms_parallel_SUITE: Don't run `confirm_minority` in parallel
rabbit_stream_queue_SUITE: Increase timeout in receive_batch/3
Fix unknown type specs
Merge pull request #2489 from rabbitmq/rabbitmq-server-2488
amqp_channel:wait_for_confirms timeout is in seconds
Merge pull request #2485 from rabbitmq/stream-protocol-interoperability
rabbit_variable_queue: Ensure modified state is not discarded in ifold
Merge pull request #422 from rabbitmq/mk-rabbitmq-auth-mechanism-ssl-12
Part of rabbitmq/rabbitmq-auth-mechanism-ssl#12
Merge pull request #13 from rabbitmq/mk-rabbitmq-auth-mechanism-ssl-12
Merge pull request #2487 from rabbitmq/mk-rabbitmq-auth-mechanism-ssl-12
Coerce extracted username to a binary, more logging
Make it possible to extract username from certificate SANs
Add missing 'byte' type to amqp 0.9.1 record conversion
Improved wording
Improved wording
Merge pull request #861 from rabbitmq/gen-server-call-on-closing-connection-request
Add initial-cluster-size as a stream policy
RPM: Use same build & runtime dependencies for all RPM-based distributions
Unsupported queue purge on stream queues
Merge pull request #462 from rabbitmq/mk-add-user-hint
Provide an extra hint in 'rabbitmqctl add_user' output
Update README.md
Update README.md
RPM: Do not depend on `epmd`
Use global locks to avoid parallel declares aborting the coordinator startup
Run some stream tests in parallel
Merge pull request #1 from rabbitmq/management-integration
Merge pull request #2481 from rabbitmq/add-external-connections-for-refresh-event
Use non_amqp_connection name for force_refresh_event
Rename process group to non_amqp_connection
Add gen_server:call to PID on closing connection request
Support shutdown call from management plugin
Add comments on force_event_refresh handling
Increase rabbitmq_federation test timeouts
Register connections and handle force_event_refresh
Add rabbit_external_connections process group
Merge branch 'master' into management-integration
tools/terraform: Fix warnings reported by recent versions of Terraform
rabbit_ct_vm_helpers: Always pass `-auto-approve` to terraform(1)
rabbit_mgmt_http_health_checks_SUITE: Remove trailing whitespaces
rabbit_mgmt_http_health_checks_SUITE: Don't import unused functions
rabbit_mgmt_http_health_checks_SUITE: Pay attention to rabbit_ct_broker_helpers:enable_feature_flag() return value
Restore the default gen_server timeout around ssl:setopts/2
Check stats timer in listen loop
Merge pull request #460 from rabbitmq/queue-type-info-keys
Merge pull request #2475 from rabbitmq/queue-type-info-keys
Support max-age in stream creation
Merge branch 'master' into queue-type-info-keys
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #81 from rabbitmq/rabbitmq-trust-store-80
Merge pull request #137 from rabbitmq/rabbitmq-trust-store-80
Treat ssl:setopts/2 timeout as a valid failure reason in test
Additional error handling while a connection is opened
Merge pull request #860 from rabbitmq/stream-queue-cluster-args
Arrange queue arguments in UI
Be more defensive with the SSL socket when opening connections
Support leader locator strategies
Merge pull request #2471 from rabbitmq/stream-queue-leader-locator
Update assertions in rabbitmq_trust_store system_SUITE
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'update-cowboy-dep' into master
Fix conflict
Merge branch 'master' into stream-queue-leader-locator
Merge branch 'master' into update-cowboy-dep
Merge pull request #2478 from rabbitmq/rabbitmq-server-2473
Merge pull request #420 from rabbitmq/rabbitmq-server-2473
Remove a (now) unused delegate
Remove all code related to RABBITMQ_IO_THREAD_POOL_SIZE
Remove code to guess thread pool size
Add event notification during authentication
Update Cowboy to 2.8.0
rabbitmqctl(8): remove deprecated node_health_check
Emit stats for management
Add missing queue arguments for stream and quorum queues
Merge pull request #119 from Ayanda-D/horrible-connection-and-channel-leaks-on-link-failure
Merge pull request #2477 from rabbitmq/remove-arguments-validation
Avoid Elixir compiler warnings about unknown modules
List Elixir 1.11 as supported
Remove queue arguments validation
Merge pull request #461 from rabbitmq/rabbitmq-cli-limit-cli-names
If amqp_connection:start/2 succeeds, it would be very rare for amqp_connection:open_channel/2 to timeout and result in the same fate of direct connection and channel leaks. However, it can't be ruled out in an unstable TCP network. This commit prevents possibility of process leaks on such failed channel establishment cases.
Simplify node ID generation to just a random number [0, 1024]
Squash compiler warnings
Merge pull request #2476 from rabbitmq/rabbitmq-server-2474
mix format
Use the current epoch seconds to generate CLI name
Fix some bad direct connection and channel process leaks on failed upstream connection attempts due to AMQP client timeouts. On long running nodes, these have potential to eventually take down a node on reaching or exceeding the the process limit.
Stop local quorum queue followers after transferring leadership
Merge pull request #459 from rabbitmq/rabbitmq-server-2469
Refactor info queues on queue types
Add relevant info keys for stream and quorum queues
Don't consider nodes in maintenance mode to be quorum critical
Merge pull request #859 from rabbitmq/rabbitmq-management-857
Include top-level port property for TLS listeners
Add missing consumer args to queue type capabilities
Update tests to not use foobar x-arguments
Use stream ID hash to pick "random" leader
Use stream queue name hash to choose leader
Merge pull request #858 from rabbitmq/document-health-checks
Clarify
Further updates to health check endpoint docs
Simpler wording for new health check endpoint docs
Use named queues for single_active_consumer test
Support initial-cluster-size argument on creation
Merge pull request #2467 from rabbitmq/stream-initial-cluster-size
Add missing classic queue capability
Document new health check endpoints
Merge pull request #2466 from rabbitmq/rabbitmq-server-2296
Check stream name before creation
Add CLI command to list stream connections
Merge pull request #856 from rabbitmq/rabbitmq-management-855
Update README.md
Merge pull request #418 from rabbitmq/lrb-handle-undefined-get
Stream queue-leader-locator argument and policy
rabbit_stream_queue_SUITE: Give more time for expired messages to go away
Handle potential undefined value returned from process dictionary
Merge pull request #838 from rabbitmq/auth-attempt-metrics
Merge pull request #450 from rabbitmq/auth-attempt-metrics
Merge pull request #100 from rabbitmq/auth-attempt-metrics
Merge pull request #238 from rabbitmq/auth-attempt-metrics
Merge pull request #58 from rabbitmq/auth-attempt-metrics
Merge pull request #2436 from rabbitmq/auth-attempt-metrics
Merge pull request #409 from rabbitmq/auth-attempt-metrics
Auth attempt command naming, add JSON --formatter support
Merge pull request #2470 from Ayanda-D/deprecated-kernel-poll-option
Kernel poll option (+K) was deprecated in OTP-21, on its release, June-2018. Kernel-space poll has, since then, been set as the new default I/O polling mechanism at compile time. This removes the deprecated kernel poll option from `rabbimq-server` start script.
/auth-attempts => /auth/attempts in one more place
Merge pull request #2468 from rabbitmq/avoid-double-channel-count-decrease
Merge pull request #136 from rabbitmq/lrb-take-limits-into-account
/api/auth-attempts/ => /api/auth/attempts
Document auth attempts endpoints
Split get auth attempts API into global counters and detailed by source
Query and rest auth attempt metrics
Reset detailed auth attempt metrics when gc'ing metrics
Add protocol to auth attempt metrics
Add auth attemp metrics
Update Travis CI config
Use -include directive when appropriate
erlfmt
Take error scenarios into account
quorum_queue_utils: wait_for_messages/2 now waits up to 30 seconds
rabbit_channel_tracking: Don't update channel tracking directly when a connection is closed
Take connection / channel limits into account
Travis CI: Update config from rabbitmq-common
Merge pull request #103 from rabbitmq/dependabot/maven/test/system_SUITE_data/java-tests/junit-junit-4.13.1
Small changes to follow name and quote style.
Capture and return rabbitmq-plugins exit code in rabbitmq-script-wrapper
per_user_connection_channel_tracking_SUITE: Wait for conditions
many_node_ha_SUITE: Limit timetrap to 5 minutes
Travis CI: Update config from rabbitmq-common
Bump junit from 4.12 to 4.13.1 in /test/system_SUITE_data/java-tests
Travis CI: Test against Erlang 22.3+23.0 and Elixir 1.10
rabbitmq_federation: use dynamic waits where possible
Rework two more tests
Merge pull request #458 from rabbitmq/rabbitmq-cli-457
mix format
Travis CI: Update config from rabbitmq-common
Add rabbitmq_ct_client_helpers dependency
Add ct_client_helpers dependency
Correct status suite expectations
Travis CI: Update config from rabbitmq-common
test: Remove assertions around `mnesia_dir_not_found`
Add INI-type configuration support
mix format
Handle offline remote node in rename_cluster_node
Set default heartbeat to 60 seconds
Select initial cluster size on stream queue declaration
Merge pull request #417 from rabbitmq/fix-conf_env_file-output-parsing
Correct upstream URIs in this test
Fix start offset for first offset consuming
Disable server-named queues for quorum and stream queues
Refactor: queue capabilities on queue types
Merge pull request #51 from morsok/patch-1
Merge pull request #54 from SimSmith/patch-1
Fix md linking error
Merge pull request #854 from rabbitmq/rabbitmq-management-844
Merge pull request #2462 from rabbitmq/rabbitmq-management-844
Finish cluster-wide and local alarm health check tests
Introduce rabbit_ct_broker_helpers:clear_all_alarms/2
Test health checks
Deleted queue should not crash channel
rabbit_env: Fix parsing of $CONF_ENV_FILE output
Fix mixed-versions test assertion
Move rabbit_mics:confirm_to_sender/3 to server
Move rabbit_misc:confirm_to_sender/3
Backwards compatibilty fixes
HTTP API health check test suite WIP
Merge pull request #416 from nicocaille/master
remove TLSv1.3 from BAD_SSL_PROTOCOL_VERSIONS
Switch to new CT helpers
More alarm-related helpers
queue_type_SUITE setup fix
Fix credit flow related HA queue regression
Introduce more alarm related broker helpers
Strip trailing whitespace
Introduce health checks
Correct a Dialyzer spec
Introduce GET /api/health/checks/local-alarms
Introduce rabbit_alarm:get_local_alarms/{0,1}
Squash a compiler warning
Introduce rabbit_alarm:format_as_map/1, format_as_maps/1
Introduce rabbit_alarms:get_alarms/1
Add alarm details to GET /api/health/checks/alarms
Return info message as a binary
Introduce rabbit_alarms:get_alarms/1
Workaround for dialyzer error
Debian: Bump minimum required Elixir to 1.10.4
GitHub Actions: Regen workflows
rabbitmq-github-actions.mk: Use Elixir 1.10.4
rabbitmq-github-actions.mk: Test with Erlang 23.1
mix.exs: Bump requirement to 1.10.4
rabbit_log: Restore alphabetical order in the defintion of category()
Dialyzer fix for rabbit_amqqueue:deliver/2
Merge pull request #2459 from rabbitmq/restore-rabbit_amqqueue-deliver
Backwards compatibility fixes
rabbit_core_ff: Declare that `stream_queue` depends on `quorum_queue`
amqqueue: Pass `Type` to amqqueue_v1:new/9
rabbit_amqqueue: Broaden the scope of the "cannot declare because disabled feature flag" error message
Restore rabbit_amqqueue:deliver/2
Do not run queue_parallel agains stream queue
Fix queue master locator regression
Quorum Queue reject publish bug fix
Add correlation ID field in commit offset frame
Dialyzer fixes
Fix crash bug when consumers are removed
Merge pull request #57 from rabbitmq/lrb-use-newer-elixir
Merge pull request #853 from rabbitmq/lrb-use-newer-elixir
Use newer Elixir for testing
Use newer Elixir for testing
Merge pull request #456 from rabbitmq/lrb-use-newer-elixir
Update minimum required Elixir version
Publish confirm fixes
Merge pull request #451 from rabbitmq/stream-queue
Fix stream commands
Move set stream retention policy to rabbitm-streams
Add/delete stream replica commands
Set stream retention policy command
Merge pull request #45 from rabbitmq/stream-queue
Add stream TCP port to start broker
Merge pull request #845 from rabbitmq/stream-queue
Merge pull request #2347 from rabbitmq/stream-queue
Merge pull request #396 from rabbitmq/stream-queue
Dialyzer fix
Stream Queue
Take stream queue dir into account
Add stream plugin port in start-cluster target
Add osiris logger sink
Add osiris logging shim
change return message format
Stream queue data dir
Uncomment some tests
Add stream policies
Stream queues memory breakdown
Hide 'Get messages' drop down for stream queues
Stream queue
Restore the pre 23.1 behavour of lists:sublist/3
Merge pull request #411 from rabbitmq/lrb-update-supervisor
Merge pull request #2457 from rabbitmq/lrb-update-supervisor
Merge branch 'master' into lrb-update-supervisor
Migrate a supervisor2 suite by @lukebakken from rabbitmq-server
Move supervisor2_SUITE to rabbit_common (next to the module under test)
Merge pull request #2456 from rabbitmq/lrb-fix-syslog-logging
configure_handler_backend/1: return a value expected by the caller
erlfmt changes
Fix transient type handling
Add test for intrinsic supervisor2 type
Fix function ordering to restart correctly. Reduce log spam.
Use application:ensure_all_started/1 to start syslog
Merge pull request #118 from rabbitmq/queue-suite-flake
Replace a fixed test suite delay with a dynamic
Merge pull request #412 from rabbitmq/lrb-update-mix_task_archive_deps
Bump dependencies in Java test suite
Explicitly start syslog application
Merge pull request #2451 from rabbitmq/qq-consumer-priorities
Adapt failure tests
Merge pull request #454 from rabbitmq/rabbitmq-server-2414
Merge pull request #2453 from rabbitmq/shrink-when-down
Pass stricter Dialyzer on OTP 23
Update mix_task_archive_deps version
Merge pull request #40 from rabbitmq/rabbitmq-peer-discovery-aws-39
Merge pull request #2455 from rabbitmq/rabbitmq-server-2421
Update rabbit_fifo consumers test to exclude suspected down ones from count
Exclude consumers suspected as down from the consumer count
Correct returned error value to match the list_nodes/0 contract
Merge branch 'master' into lrb-update-supervisor
Update GH Actions badges
Exclude dialyzer job from dependencies
Define a (no-op in this repo) dialyzer job for GH Actions
Merge pull request #849 from rabbitmq/github-actions-otp-22.3-and-23.0
Commit Dialyzer action override
Disable Dialyzer, use Elixir 1.8.0
Merge pull request #850 from rabbitmq/mk-dialyzer-fixes
packaging: Bump minimum Erlang version of 22.3
Shrink quorum queues on forget cluster node command
return an error when an AWS API fails so that peer discovery will be retried
Shrink quorum queue must succeed if the target node is down or rabbit is stopped
maintenance_mode_SUITE: Skip leader election check
per_user_connection_channel_limit_SUITE: Wait for channel/connection to terminate
Quorum queue consumer priorities
Correct more Dialyzer errors
Simplify
Correct more Dialyzer errors
Some Dialyzer error fixes
Update rabbit_definitions:apply_defs specs to feature returned errors
rpc module calls can return a {badrpc, term()}
Stop testing on OTP 21.3
GitHub Actions: test on OTP 22.3 and 23
Add --by-source option to list auth attempts command
More test massaging
Regular HTTP API suite: bring back samples test
Test suite massaging to reduce flakiness of some tests
Make it easy to close all connections on a node
Make it easy to close all connections on a node
Merge pull request #848 from rabbitmq/rabbitmq-management-839
Change error to something more verbose.
Respond with a Bad Request when client provides double-encoded JSON
Erlang 21.3 is no longer supported, drop the CI badge
Merge pull request #2441 from rabbitmq/erlang-22
Test with Erlang 22.3 and 23.0
Make maintenance mode tests that involve QQs conditional
Add get_auth_attempts_by_source api
Add protocol to auth attempt metrics
Fix one more timing-sensitive per_user_connection_channel_limit suite test
Use auth attempt detailed metrics only when reporting per object
Rename auth attempt commands
Add protocol to auth attempt metrics
exchange_SUITE: Fix format string
Merge pull request #828 from rabbitmq/qq-reject-publish
Remove tabs
Several bug fixes found when running tests
Merge remote-tracking branch 'origin/master' into auth-attempt-metrics
Split auth attempt metrics into global and detailed
Include protocol in auth metrics
Merge pull request #452 from rabbitmq/qq-peek-command
Merge pull request #2447 from rabbitmq/qq-peek-command
rabbit_fifo: type the messages lqueue
Test invariant: peek must not drain the queue
Quorum Queue Peek command
Squash a couple of compiler warnings
Remove old supervisor2 module
Begin migration of code from supervisor2 to the 22.3.4.10 version
Skip another mixed versions test
per_user_connection_channel_limit_SUITE: Wait for channel/connection to terminate
quorum_queue_SUITE set lower aten poll interval
Handle cases when there's no message to peek at
Switch per_user suite to query feature flag
'rabbitmq-queues peek': tighter position validation, basic JSON formatter support
Merge pull request #70 from rabbitmq/rabbitmq-peer-discovery_co_353
formatting
'rabbitmq-queues peek': use MergesDefaultVirtualHost
peek command: limit to rabbitmq-queues
Merge branch 'master' into qq-peek-command
Merge pull request #453 from rabbitmq/reclaim-qq-memory
Merge pull request #2448 from rabbitmq/reclaim-qq-memory
Change Reason Messages Parameters
Ignore some tests when for mixed versions
Merge pull request #2450 from rabbitmq/aten-poll-interval
Change a log message to be more accurate
Improve error handling, including with --formatter=json
Increase aten poll interval
rabbitmq-queues reclaim_quorum_memory: restore --vhost mention in usage
Introduce RabbitMQ.CLI.Core.MergesDefaultVirtualHost
Wording
quorum_queue_SUITE test reliability
Merge pull request #2449 from rabbitmq/lrb-revert-unintentional-assertion
Use rabbit_durable_queue to check if stream exists
Merge pull request #115 from rabbitmq/rabbitmq-federation-114
Merge pull request #117 from rabbitmq/lrb-restore-timer-rabbitmq-federation-113
Revert unintentional assertion
Revert "Remove timer"
Merge pull request #113 from rabbitmq/mk-flexible-cycle-detection-node-identifier
Merge pull request #53 from Robert-Gustafsson/only_extra_scopes_source
Remove timer
Give links more time to initialize [for CI]
await_bindings for a limited amount of time
Use await_binding, add vhost support
Add support for using extra scopes standalone
Quorum queue: API to reclaim quorum memory
Reclaim quorum memory command
Log payloads received in exchange federation tests
More exchange federation test massaging
More selective assertions on link status
Begin splitting test groups to reduce the amount of shared state
Compile
Make this test clean up its resources at the end
Take virtual host into account when detecting binding propagation cycles
Add offset tracking commands
A WIP integration test for multi-hop intra-cluster exchange federation
Merge pull request #2407 from rabbitmq/qq-reject-publish
Use mirrored_supervisor for queue federation
More debug logging for runtime parameter updates
Add system time to unit test
Quorum queue peek command
Introduce set_policy_in_vhost/{7,8}
Merge pull request #2443 from rabbitmq/mk-new-ra-wal-settings-in-conf-schema
Support recently introduced Ra WAL settings in rabbitmq.conf
Merge pull request #841 from coderanger/patch-1
Fix destructuring assignment.
Make healthchecks failures return an HTTP 500 instead of 200.
Use a combination of cluster name and virtual host when detecting cycles
Extract cycle detection node identifier function
Allow QQs to use expired/queue ttl
Allow quorum queues to use reject-publish
Add a couple of more fields to overview
rabbit_fifo: lower min snapshot interval
Quorum queue 'Queue TTL' support.
Add some unused fields to rabbit_fifo records
Don't assert on message count
rabbit_fifo test change
rabbit_fifo: convert enqueuers
fix typo
Better handle version check
Skip more tests
quorum_queue_SUITE skip 2 node tests for mixed versions
Skip test that cannot work with mixed machine versions
Switch to 3 node clusters instead of 2
Skip test in mixed mode
Test fixes
Make some test suite 3 node instead of 2
test fixes
Remove debug log statement
Implement reject_publish for QQs
Leave release cursors as they are
rabbit_fifo: convert state
rabbit_fifo: Fixes for move to lqueue
rabbit_fifo: change messages map to queue
rabbit_fifo machine version 1
Adjustments for test flakes
Adapt test to additional chunk type field in chunk
GitHub Actions: Run recently added testsuites
Extract user limits FF tests into its own group
Run dead lettering test cases sequentially
Merge pull request #4 from rabbitmq/lrb-remove-fixed-version
Use await_condition in this timing-sensitive test
per_vhost_connection_limit_SUITE: Use rabbit_connection_tracking:clear_tracked_connection_tables_for_this_node/0
Add publisher ID
Erlang 21.3 -> 22.3 for `make github-actions`
Merge branch 'lrb-add-multicall-timeout-to-force-event-refresh'
Merge branch 'lrb-add-multicall-timeout-to-force-event-refresh'
Merge branch 'lrb-add-multicall-timeout-to-force-event-refresh'
Check return value
Revert "tcp_listener_sup: use maps for supervisor flags and child spec"
'make dialyze' passes past the per-user limit changes
README: link to Kubernetes Cluster Operator
Remove a stray README link
README badge for the Erlang 23.0 workflow
Correct typos detected by xref
Rework a flaky test
More per_user_connection_channel_limit suite massaging
Cleanly close connections in this test
Try to address more of per_user_connection_channel_limit suite test flakes
Use rabbit_ct_helpers:await_condition/1 for assertions
Refer to running nodes using rabbit_nodes:all_running/0
Minor improvements to log message formatting
A typo
set_user_limits/3: return an error if feature flag is disabled
Naming
Bump tracking execution timeout to 15s
Add events & include acting-user in user-limit operations
New function to list limits for all users
Switch to Mozilla Public License 2.0 (MPL 2.0)
Remove unused functions in vhost connection limit partitions test suite
Added new user_limits feature flag
Updated internal_user record access to use new APIs
Added new internal_user_v1 record api
Added new internal_user_v2 record api
Add per_user_connection_channel_limit_partitions test
Make formatting of user channel-limit exceeded consistent
Add per_user_connection_channel_limit test suite Ensure channel tracking tables are cleared in tracking tests Use new counting API in vhost test suites
Update formatting and cosmetics for user-limit error messages
Added function clause to clear all limits for given user
Introduce per-user channel tracking
Update connection/channel limit context and error messages in rabbit_direct
User connection/channel limit for direct connections
Use count_tracked_items_in
Checking allowed channel count for user before channel creation
Add rabbit_auth_backend_internal:exists/1 predicate
Update per-vhost connection count references to new API
Checking user connection limit before starting connection
Setting connection/channel limits for user
Add rabbit_tracking behaviour
Introduce per-user connection tracking
Do not change the behavior of rpc_call
Set RPC_TIMEOUT to 15 seconds
Add function to allow setting timeout on multicall
Remove use of current_rmq_ref
Merge pull request #2439 from rabbitmq/rabbitmq-mqtt-revert-233-changes
Merge pull request #239 from rabbitmq/rabbitmq-mqtt-revert-233-changes
Merge pull request #52 from SimonAlling/simplify-post_process_payload_keycloak
Use byte for sub ID in credit notification
Change sub ID to byte in protocol reference
Use byte for subscription ID
Simplify post_process_payload_keycloak
'make dialyze' passes past the per-user limit changes
README: link to Kubernetes Cluster Operator
Remove a stray README link
README badge for the Erlang 23.0 workflow
Correct typos detected by xref
Revert "tcp_listener_sup: use maps for supervisor flags and child spec"
Revert "Switch to classic OTP supervisor for two modules"
Revert "Closes #233"
Fix typo
Refer to running nodes using rabbit_nodes:all_running/0
Wording
Naming and cosmetics
Avoid using deprecated http_uri:encode/1
Per-user limits preload users select list
Per user-limits API documentation
Per user-limits tests
Per user-limits dispatcher & route handlers
Per user-limits frontend UI
New field limits for internal_user record
Merge branch 'Ayanda-D-rabbitmq-per-user-connection-channel-limits'
Merge branch 'Ayanda-D-rabbitmq-per-user-connection-channel-limits'
Merge branch 'Ayanda-D-rabbitmq-per-user-connection-channel-limits'
Merge branch 'Ayanda-D-rabbitmq-per-user-connection-channel-limits'
Merge branch 'Ayanda-D-rabbitmq-per-user-connection-channel-limits'
Rework a flaky test
More per_user_connection_channel_limit suite massaging
Cleanly close connections in this test
Try to address more of per_user_connection_channel_limit suite test flakes
Use rabbit_ct_helpers:await_condition/1 for assertions
Refer to running nodes using rabbit_nodes:all_running/0
Introduce rabbit_ct_helpers:await_condition/1
Add set_user_limits/{3,4} and clear_user_limits/{3,4} helpers
Add forget_cluster_node/{3,4} broker helper
Add timeout to rpc:multicall usage
Add auth attempt metrics
Add enable/disable and list auth attempt metrics
Add auth attempt metrics
Add auth attempt metrics
Add auth attemp metrics
Minor improvements to log message formatting
A typo
Merge pull request #33 from rabbitmq/lrb-update-gun-eetcd
set_user_limits/3: return an error if feature flag is disabled
Update gun and eetcd deps
Naming
set_user_limits: mention <username> in parameter docs
Bump tracking execution timeout to 15s
Wording
Add events & include acting-user in user-limit operations
New function to list limits for all users
Switch to Mozilla Public License 2.0 (MPL 2.0)
Remove unused functions in vhost connection limit partitions test suite
Added new user_limits feature flag
Updated internal_user record access to use new APIs
Added new internal_user_v1 record api
Added new internal_user_v2 record api
Add per_user_connection_channel_limit_partitions test
Make formatting of user channel-limit exceeded consistent
Add per_user_connection_channel_limit test suite Ensure channel tracking tables are cleared in tracking tests Use new counting API in vhost test suites
Update formatting and cosmetics for user-limit error messages
Added function clause to clear all limits for given user
Introduce per-user channel tracking
Update connection/channel limit context and error messages in rabbit_direct
User connection/channel limit for direct connections
Use count_tracked_items_in
Checking allowed channel count for user before channel creation
Add rabbit_auth_backend_internal:exists/1 predicate
Update per-vhost connection count references to new API
Checking user connection limit before starting connection
Setting connection/channel limits for user
Add rabbit_tracking behaviour
Introduce per-user connection tracking
Merge pull request #2435 from rabbitmq/mk-peer-discovery-dns-tests
Update peer_discovery_dns suite
Merge pull request #837 from luos/fix-display-of-0-time-interval
fix zero time formatted as empty string
[DOC] Add info about additional_rabbitmq_scopes
Merge pull request #2433 from rabbitmq/lrb-cuttlefish-2.4.1
cuttlefish 2.4.1
Merge pull request #134 from rabbitmq/lrb-add-licensefinder-workarounds
Avoid double spacing between command lines
Update rabbitmq-components.mk
Include total amount of memory used into 'rabbitmq-diagnostics status' output
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
More reliable drain and revive command assertions
Revert drop of Exhibit B on MPL 2.0
Update LICENSE
Bump credentials_obfuscation to 2.2.0
rabbit_nodes_common: Disable Dialyzer warning for diagnostics_node/1
rabbit_nodes_common: Handle `noport` return value from net_adm:names/1
rabbitmq-dist.mk: Exclude `ebin/dep_built` from plugin packaging
rabbitmq-dist.mk: Package plugins as directories by default
Avoid using os:find_executable to find erl
rabbitmq-components.mk: Improve top-level DEPS_DIR detection for rabbit_prelaunch
rabbitmq-components.mk: Improve top-level DEPS_DIR detection
Update method to determine dependency directories
Bump credentials_obfuscation to 2.1.1
GitHub Actions: Default to Erlang 21.3 and 23.0
Update erlang.mk
Bump stdout_formatter to 0.2.4
Bump sysmon_handler to 1.3.0
Bump JSX to 2.11.0
Revert drop of Exhibit B on MPL 2.0
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Revert drop of Exhibit B on MPL 2.0
Update LICENSE
Merge pull request #2432 from rabbitmq/lrb-cuttlefish-2.4.0
Bump cuttlefish
Add files to specify license info
rabbitmq.conf.example: mention how to disable non-TLS listeners
Squash a compiler warning introduced in #56
Merge pull request #56 from tstorck/handle-detach-55
Handle detach frame when closed set to false
Merge pull request #112 from rabbitmq/mk-coerce-upstream-password-before-encrypting
Coerce password to a binary
Bump credentials_obfuscation to 2.2.0
Merge pull request #2430 from mnxumalo/fix-getmetadata-function-in-vhost
Fix bug in get_metadata function in vhost.erl module.
ci: Remove unused files
rabbit_nodes_common: Disable Dialyzer warning for diagnostics_node/1
rabbit_nodes_common: Handle `noport` return value from net_adm:names/1
definition_import_SUITE: Skip import_case13 if quorum_queues are unsupported
Merge pull request #2426 from rabbitmq/fix-queue-args-definitions
Add a definition import test for #2426
Fix parsing of queue arguments on definitions list
packaging/generic-unix: Fix the way we path files list to tar(1)
rabbitmq-dist.mk: Exclude `ebin/dep_built` from plugin packaging
feature_flags_SUITE: Use rabbit_file:recursive_*() to manage test plugin
Merge pull request #407 from rabbitmq/lrb-find-erl-safely
Merge branch 'master' into lrb-find-erl-safely
Examples have graduated to a separate repository
Merge pull request #408 from rabbitmq/package-plugins-as-directories-by-default
rabbitmq-dist.mk: Package plugins as directories by default
Avoid using os:find_executable to find erl
Add debug log during deletion
GKE example: add links to ToC
Ditto
GKE example: more README edits
Ditto
GKE example: more README edits
Examples: suggest the most basic readinessProbe by default
Cosmetics
Merge branch 'gke-examples'
examples/gke: README edits
Add missing link
Remove trailing new-lines
Add README
Add gke examples
Refactor Java tests after Client package change
system_SUITE: Adapt to Erlang 24's ssl application
Avoid double spacing between command lines
Add function to kill connection based on name
Merge pull request #54 from sircinek/remove-ct-pal
Update amqp10_client_session.erl
rabbitmq-components.mk: Improve top-level DEPS_DIR detection for rabbit_prelaunch
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Wording changes to follow-up with #834
Merge pull request #834 from johanrhodin/patch-4
Update global.js
Merge pull request #449 from rabbitmq/mk-total-used-memory-in-breakdown-output
Include total amount of memory used into 'rabbitmq-diagnostics status' output
Merge pull request #2419 from GitHubPang/master-doc-typo
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Improve top-level DEPS_DIR detection
Fixed typo in doc for list_unresponsive_queues
Fixed typo in doc for list_unresponsive_queues
Merge pull request #1 from rabbitmq/master
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update method to determine dependency directories
Bump credentials_obfuscation to 2.1.1
MPL 2 license update for bin/rabbitmqadmin
integration_SUITE: Bump timetrap to one hour
Merge pull request #2398 from rabbitmq/salvage-1
A typo
READMEs: link to the now open source Cluster Operator for Kubernetes
Merge pull request #53 from rabbitmq/gen-statem
tools/terraform: Use Debian package for Erlang 23
Switch remaining processes to gen_statem
Merge pull request #2417 from rabbitmq/mark-node-as-ready-after-it-is
GitHub Actions: Default to Erlang 21.3 and 23.0
GitHub Actions: Switch from Erlang 22.3 to 23.0
GitHub Actions: Terminate 30-CT_SUITE.yaml with a newline
rabbit_networking: Re-enable Dialyzer in this file
rabbit: Move critical code back to before we mark the node as ready
Convert frame reader to `gen_statem`
Add type specification
Merge pull request #50 from rabbitmq/github-actions
maintenance_mode_SUITE, queue_master_location_SUITE: Enable `maintenance_mode_status` feature flag
rabbit_prelaunch_errors, rabbit_core_ff: Fix style consistency
Use ssl:sslsocket instead of ssl:socket
Corrections for various dialyzer warnings
First attempt at generating workflows
Fix frame reading in test
tools/terraform: Switch to m5.large instance type by default
rabbit_ct_broker_helpers: Remove trailing whitespaces
tools/terraform: Switch to m4.large instance type by default
GitHub Actions: Regen workflows
GitHub Actions: Regen workflows
rabbitmq-diagnostics node_health_check is deprecated, remove its test suite
GitHub Actions: Regen workflows
rabbit_prelaunch_conf: Integrate application load error to existing message
Merge branch 'rabbitmq-server-2321'
Explicitly add `master` to work around ninenines/erlang.mk#898
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump stdout_formatter to 0.2.4
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
More reliable drain and revive command assertions
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump sysmon_handler to 1.3.0
Bump JSX to 2.11.0
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbit_prelaunch_conf: log application loading failures
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Revert drop of Exhibit B on MPL 2.0
Merge pull request #833 from furkhat/master
prevent sending authorization: null header
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Update LICENSE
Merge pull request #2415 from GitHubPang/master-fix-typo
Update LICENSE
Corrected a typo.
Drop Exhibit B from our version of MPL 2.0
A typo
Improve a couple of error messages
Update LICENSES.txt for the MPL2 (and VMware) age
user_limits feature flag implementation
Update list_user_limits command defaults
Update license, ref: #447
Include acting-user in user-limit operations & doc-guides
New command added to list user limits
Test case added for command to set both max-connections and max-channels Clearing all user limits Testcase to test clearing all limits for user
Test cases for setting and clearing user connection/channel limits
Clearing user connection/channel limits
Setting user connection/channel limits
user_limits feature flag implementation
Per-user connection and channel tracking records, definitions, types
New field limits in #internal_user to store the user limits
Merge pull request #133 from rabbitmq/switch-to-MPL2
Include full MPL 2.0 text into debian/copyright
Switch to MPL 2.0
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Update MPL2 license file, drop Exhibit B
Fix Erlang cookie when running with Docker Compose on Windows
Add more logging and verify inet_tcp_proxy_dist return values
Merge pull request #2413 from rabbitmq/rabbitmq-server-2349-2
Catch case where feature flag is not enabled
Handle more pgroup_name_cluster_id values
Merge branch 'mk-pgroup_name_cluster_id-fallback'
Handle cases where rabbitmq_federation.pgroup_name_cluster_id is undefined
Merge pull request #20 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #130 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #4 from rabbitmq/switch-to-MPL2
Switch to MPL2
Cosmetics
Merge pull request #69 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #44 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #78 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #35 from rabbitmq/switch-to-MPL2
Switch to MPL2
Cosmetics
Merge pull request #36 from rabbitmq/switch-to-MPL2
Add some missing license headers
Switch to MPL2
Merge branch 'seadog007-master'
Drive by: make connection bandwidth rates easier to read
Debug log vhost access check result
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #831 from rabbitmq/rabbitmq-auth-backend-http-100-2
Debug log vhost access check result
Merge pull request #151 from rabbitmq/switch-to-MPL2
Remove unused file
Switch to MPL2
Merge pull request #41 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #75 from rabbitmq/switch-to-MPL2
Add a missing license file
Switch to MPL2
Merge pull request #40 from rabbitmq/switch-to-MPL2
Switch to MPL2
Merge pull request #34 from rabbitmq/switch-to-MPL2
Merge pull request #2349 from rabbitmq/rabbitmq-server-2321
Merge pull request #234 from rabbitmq/rabbitmq-server-2321
Merge branch 'master' into rabbitmq-server-2321
Merge pull request #67 from rabbitmq/rabbitmq-server-2321
Merge pull request #149 from rabbitmq/rabbitmq-server-2321
Merge pull request #125 from rabbitmq/rabbitmq-server-2321
Merge pull request #43 from rabbitmq/rabbitmq-server-2321
Merge pull request #419 from rabbitmq/rabbitmq-server-2321
Merge pull request #399 from rabbitmq/rabbitmq-server-2321
Switch to MPL2
Merge pull request #53 from rabbitmq/switch-to-MPL2
Merge pull request #5 from rabbitmq/switch-to-MPL2
Switch to MPL2
Switch to MPL2
Correct LICENSE file post the MPL2 transition
Merge pull request #67 from rabbitmq/switch-to-MPL2
Merge pull request #15 from rabbitmq/switch-to-MPL2
Switch to MPL2
Switch to MPL2
Merge pull request #31 from rabbitmq/switch-to-MPL2
Merge pull request #46 from rabbitmq/switch-to-MPL2
Add license files to repo root
Switch to MPL2
Switch to MPL2
Merge pull request #36 from rabbitmq/switch-to-MPL2
Switch to MPL2
Correct two minor issues discovered by Dialyzer
Sync license headers with MPL2 in master
rabbitmq-upgrade {drain,revive}: produce a sensible error when target node does not support maintenance mode
Report node maintenance status in 'rabbitmq-diagnostics cluster_status'
Report node maintenance status in 'rabbitmq-diagnostics status'
Introduce 'rabbitmq-upgrade drain' and 'rabbitmq-upgrade revive'
Add doc guide links to {suspend,resume}_listeners
Follow our standard file naming convention for commands
Introduce 'rabbitmqctl {suspend,resume}_listeners'
Sync license headers with MPL2 in master
Hide maintenance mode behind a feature flag
Extract rabbit_networking:stop_ranch_listener_of_protocol/1
Be more defensive when computing Ranch ref from protocol name
Report node maintenance status in 'rabbitmq-diagnostics status'
Make sure MQTT plugin closes its connections when a node is put into maintenance mode
More integration tests for maintenance mode
More integration tests for maintenance mode
Initial integration tests for maintenance mode
Correctly compute local QQ replica/Ra server name when reviving
Ditto
Strip some trailing whitespace
Node entering maintenance will shut down its local quorum queue replicas
More logging for revival operations
Unify Ranch ref construction for all listeners
Maintenance mode: transfer leadership (primary replicas) of local CMQs
Introduce rabbit_maintenance:{drain,revive}/0
Typos
Integrate node maintenance information into queue master locators
Initial API bits for marking a node as being drained (or not)
Add a table for tracking node maintenance/draining state
rabbit_maintenance: simplify return values of listener suspension functions
Introduce rabbit_maintenance:{suspend,resume}_all_client_listeners/2
Extract a function that computes Ranch listener references
tcp_listener_sup: use maps for supervisor flags and child spec
Introduce rabbit_networking:node_client_listeners/1
Drive by change: squash a compiler warning
Initial API bits for marking a node as being drained (or not)
Introduce node maintenance state record
Merge pull request #236 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #94 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #830 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #19 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #33 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #108 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #45 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #2406 from rabbitmq/rabbitmq-server-2405
Log a message when listeners are about to be started
Use new style configuration format in examples
Merge pull request #43 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #2 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #48 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #11 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #447 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #10 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #49 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #124 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #102 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #31 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #51 from rabbitmq/switch-to-MPL-2.0
Merge pull request #98 from rabbitmq/switch-to-MPL-2.0
Merge pull request #134 from rabbitmq/switch-to-MPL-2.0
Merge pull request #4 from rabbitmq/switch-to-MPL-2.0
Merge pull request #2408 from rabbitmq/switch-to-MPL-2.0
Merge pull request #403 from rabbitmq/switch-to-MPL-2.0
Switch to Mozilla Public License 2.0 (MPL 2.0)
Switch to Mozilla Public License 2.0 (MPL 2.0)
Switch to Mozilla Public License 2.0 (MPL 2.0)
Switch to Mozilla Public License 2.0 (MPL 2.0)
Switch to Mozilla Public License 2.0 (MPL 2.0)
Merge pull request #235 from rabbitmq/mqtt_machine_bug
Merge branch 'master' into switch-to-MPL-2.0
Send heartbeat from the reader process
Handle error case when creating a stream
Correct a comment typo
Extract rabbit_networking:stop_ranch_listener_of_protocol/1
Extract rabbit_networking:stop_ranch_listener_of_protocol/1
Extract rabbit_networking:stop_ranch_listener_of_protocol/1
Extract rabbit_networking:stop_ranch_listener_of_protocol/1
Close Web MQTT client connections when the node enters maintenance mode
Move networking boot step to end of startup
Fix mqtt_machine crash bug
Close Web STOMP client connections when the node enters maintenance mode
Changed bytes converter
Pass in monitor reference, not stream name
More maintenance mode helpers
A typo
More maintenance mode-related functions
Node maintenance mode helpers for rabbitmq/rabbitmq-server#2321
Merge pull request #2401 from rabbitmq/redirect-logger-msgs-to-lager
Make sure STOMP plugin closes its connections when a node is put into maintenance mode
Cosmetics
Cosmetics
Make sure MQTT plugin closes its connections when a node is put into maintenance mode
Merge pull request #402 from rabbitmq/prefixed-env-var-takes-precedence-in-CONF_ENV_FILE
Switch to Mozilla Public License 2.0 (MPL 2.0)
rabbit_env: Give precedence to $RABBITMQ_* prefixed variables in the output of $CONF_ENV_FILE
Merge pull request #400 from rabbitmq/add-logger-handler-API-support
Merge pull request #2402 from rabbitmq/metrics-flakiness
Add consumer failure test
rabbit_prelaunch_early_logging: Configure `rabbit_log` as a Logger handler
rabbit_log: Add Logger handler's log/2 API
Attempt to further de-flake metrics/connection_metric_idemp_test
Reduce chances of variable capture in ?awaitMatch
Increase timeout in dynamic_ha:nodes_policy_should_pick_master_from_its_params
Re-categorize some rabbitmq-diagnostics commands
Merge pull request #446 from rabbitmq/mk-erlang-cookie-sources-command
Wording
erlang_cookie_sources: support Windows-specific HOMEDRIVE and HOMEPATH
Introduce 'rabbitmq-diagnostics erlang_cookie_sources'
Add publishing failure test
One more definition export/import roundtrip case
Merge pull request #2400 from rabbitmq/mk-resurrect-runtime-parameter-values-as-maps
Speed up definition import tests
Squash a compiler warning
rabbit_definitions: format exchange, queue and binding arguments the same way HTTP API would
Merge pull request #445 from rabbitmq/rabbitmq-cli-443
Make RABBITMQ_ERLANG_COOKIE deprecation message pop [as in colors]
Revert 460a432ddb2337dad6a7ca350497a8e2aee5063f
Expose some message index related functions for salvage tool
synchronized -> synchronised
Temporarily switch back an unfortunate atom
Merge pull request #42 from rabbitmq/await-match
Add ?awaitMatch macro
Deprecate RABBITMQ_ERLANG_COOKIE env variable support
Merge pull request #444 from rabbitmq/rabbitmq-cli-439
More end-to-end integration tests for #439
Introduce a first class autocomplete command
Merge pull request #101 from rabbitmq/rabbitmq-auth-backend-http-100
Merge pull request #74 from rabbitmq/rabbitmq-auth-backend-http-100
Mount .erlang.cookie file
Merge pull request #442 from rabbitmq/rabbitmq-cli-432-part-2
Merge pull request #2399 from rabbitmq/mk-check-if-node-is-mirror-sync-critical-should-ignore-exclusive-queues
Special case single node clusters for 'rabbitmq-queues check_if_node_is_quorum_critical'
list_with_minimum_quorum_for_cli: convert readable names to binaries
Exclude exclusive queues from list_local_mirrored_classic_without_synchronised_mirrors
Merge pull request #441 from rabbitmq/rabbitmq-cli-438
rabbitmqctl eval: consume multiple lines from standard input
Merge pull request #2352 from rabbitmq/honeycomb
Add honeycomb integration for tests
Introduce 'rabbitmqctl eval_file [file path]'
'rabbitmqctl eval': accept expression to evaluate from stdin
Merge pull request #440 from rabbitmq/rabbitmq-cli-432
Merge pull request #2397 from rabbitmq/rabbitmq-cli-432
rabbit_nodes:is_single_node_cluster/0: don't check running node count
if a node is the only cluster member, pass on the mirror sync critical check
Format readable name as a binary
Introduce a function that checks if a node is the only one in its cluster
Add GitHub templates
Handle publishing sub-entries (batch)
Log unexpected result from check_vhost_access
Handle `undefined` case for AuthzData
Merge pull request #2395 from rabbitmq/rabbitmq-server-2394
Re-enable CTL_ERL_ARGS and dist port settings
Disable failure test
Merge pull request #437 from rabbitmq/mk-help-command-exit-status
Make --help, help usage help messages consistent
Clarify that the delay is in ms in these log messages
Remove an unused import, spotted by @essen
Fix closing sequence
Avoid using unfortunate terms in more places
Avoid using unfortunate terms in more places
Avoid using unfortunate terms in more places
Avoid using unfortunate terms in code comments and log messages
Drop a low importance test that only fails in one environment
An attempt to fix a test failing only on Concourse
Merge pull request #436 from rabbitmq/rabbitmq-cli-435
rabbitmqctl export_definitions: ensure that parameter value is a map
Merge pull request #2396 from rabbitmq/rabbitmq-server-2384
Avoid seeding default data if there are configured definitions to load on boot
Export definitions on boot after all plugins have been enabled
Merge pull request #434 from rabbitmq/mk-move-atom-coercion-to-core
Rename Rabbitmq.Atom.Coerce to RabbitMQ.CLI.Core.DataCoercion
Bump listed version requirements
Merge pull request #2393 from rabbitmq/upgrade-cuttlefish
Merge pull request #433 from rabbitmq/rabbitmq-server-2392
Merge pull request #2392 from fenollp/nohipe
Make 'rabbitmqctl hipe_compile' a no-op
Add failure test
Ignore non-responding brokers in metadata command
Makefile: Upgrade Cuttlefish from 2.2.0 to 2.3.0
Keep the flag for backwards config compatibility.
Merge pull request #51 from rabbitmq/add-zdbbl-metric-demo
Add erlang_vm_dist_node_queue_size_bytes to metrics.md
Fix metric name & description in zdbbl graph, Erlang Distribution
Fix specific_erlang_metrics_present_test
Add failing test for erlang_vm_dist_node_queue_size_bytes
Fix a typo spotted by @VVD
drop deprecated HiPE compilation
Unify Ranch ref construction for all listeners
Unify Ranch ref construction for all listeners
Unify Ranch ref construction for all listeners
Unify Ranch ref construction for all listeners
Unify Ranch ref construction for all listeners
Update README.md
Merge pull request #2389 from rabbitmq/restore-dist-port-configuration-for-windows-service
Use the same Ranch listener ID pattern as in the core
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Change response code label
Use Erlang monitor to detect stream deletion/failure
Pass in node information to Java test suite
Merge pull request #431 from rabbitmq/mk-hostname-resolution-diagnostics-command
Move these helpers to Core.Networking
Introduce 'rabbitmq-diagnostics resolver_info'
Introduce 'rabbitmq-diagnostics resolve_hostname'
scripts/rabbitmq-service.bat: Configure Erlang distribution port
Add credit response to protocol reference
Notify client when it credits an unknown subscription
Merge pull request #49 from rabbitmq/expose-product-info
Add authorisation on publishing
Add authorisation for subscription
Add authorisation for creation/deletion
Build Docker image from latest 3.9 dev release + this PR
Add tests for product name & version
Clean manager listener code
Adjust licensing
Use coordinator to get notified on stream deletion
Closes #233
Switch to classic OTP supervisor for two modules
Merge pull request #65 from rabbitmq/rabbitmq-web-mqtt-64
Use a supervisor flag map here
Merge pull request #123 from rabbitmq/rabbitmq-web-stomp-121-followup
Merge pull request #107 from rabbitmq/mk-handle-internal-exchange-check-timeouts
Log effective internal exchange check interval
Stop on errors
Handle more failures around one-off connection calls
Ensure that framing error is logged
prometheus_rabbitmq_core_metrics_collector: Expose product info
Change copyright holder from Pivotal to VMware
Decrease internal exchange check frequency
Use rabbit_log
Avoid using erlang:get_stacktrace/0
Avoid using erlang:get_stacktrace/0
README updates
Merge pull request #47 from rabbitmq/mk-chx-ring-inspection
Cosmetics
Introduce a CLI command for consistent hashing ring inspection
ctl add_user: use a more suitable exit code when no password is provided
Merge pull request #122 from rabbitmq/rabbitmq-web-stomp-121
Use the new-style return value.
Use correct close code and provide error information
Merge pull request #46 from rabbitmq/rabbitmq-consistent-hash-exchange-45
Python examples: bump Pika to 1.1
Integration tests for #45
Formatting
Improve formatting of exchange source and destination in a log message
Explain
Manually recover ring state from durable exchanges and bindings
Mention routing locality in the README
Squash a compiler warning
Stop on errors
Ditto for the Python example
Explain what the [Ruby] example does
Update Bunny dependency
Fix cluster tests
Make max_frame consistent between makefile and application
Add Java-based tests for clustering
Add specs t stream manager
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Fix dialyzer errors
GitHub Actions: Fix mentions of "rabbitmq-cli"
GitHub Actions: Trigger rabbitmq-server workflows after a commit
Merge pull request #2378 from rabbitmq/load-conf-before-erlang-dist-setup
Add type specifications
Remove some unnecessary comments
Separate changing state from (almost) immutable state
rabbit_prelaunch: Load configuration before Erlang dist. is started
Introduce PeerProperties command
Sync rabbitmq-components.mk
Merge pull request #822 from rabbitmq/rabbitmq-management-821
Make it possible to configure db cache multiplier via rabbitmq.conf
Merge pull request #2375 from rabbitmq/rabbit-fifo-int-test-stability
Merge pull request #2374 from rabbitmq/metrics-suite-test-stability
Merge pull request #2376 from rabbitmq/simple-ha-test-stability
Support client properties
rabbit_prelaunch_conf: Style fixes
GitHub Actions: Only dispatch from the master branch
Stricter setup in the confirms_survive_* tests
Merge pull request #819 from rabbitmq/rabbitmq-management-818
Improve readme
Load definitions from rabbitmq.load_definitions via a boot step
More logging for boot time definition import
Don't try to load management.load_definitions in the core
Merge pull request #2373 from rabbitmq/revert-2368-lrb-fix-definition-import
Revert "Ensure rabbitmq_management is loaded"
Merge pull request #809 from rabbitmq/github-actions
Replace connection_metric_idemp_test with specific cases
Attempt to increase rabbit_fifo_int_SUITE stability
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
Bump Recon to 2.5.1
 Restrict build badges to the release branch
Merge pull request #132 from rabbitmq/fix-console-redirection
Merge pull request #2371 from twjs76/support_paths_with_brackets
scripts/rabbitmq-script-wrapper: Don't mess with console redirection
packaging: Use $RABBITMQ_SERVER_CONSOLE_OUTPUT_DIR to configure stdout/stderr redirections
Support RABBITMQ_HOME paths containing brackets on windows
Use MPL 2.0
User and permission management command: adopt a more suitable exit code
Update test expectation
Merge pull request #2368 from rabbitmq/lrb-fix-definition-import
Ensure rabbitmq_management is loaded
Merge pull request #395 from rabbitmq/rabbitmq-cli-424
Merge pull request #428 from rabbitmq/rabbitmq-cli-424
Remove unused variable
rabbitmq-diagnostics list_network_interfaces: support --offline mode
Merge branch 'master' into rabbitmq-cli-424
Introduce a way to list available NICs in a more presentable format
Introduce 'rabbitmq-diagnostics list_network_interfaces'
Merge pull request #393 from rabbitmq/rabbitmq-common-392
rabbit_env_SUITE: Prevent load of `$CONF_ENV_FILE` for the entire testsuite
rabbit_env_SUITE: Test context_to_code_path() for Windows as well
rabbit_env: Use the context's OS type in get_user_lib_dirs()
rabbit_env: Organize Unix' do_load_conf_env_file as the Window version
rabbit_env: Add support for RABBITMQ_CONF_ENV_FILE on Windows
Merge pull request #427 from rabbitmq/rabbitmq-cli-426
Merge pull request #2366 from rabbitmq/rabbitmq-cli-426
Update rabbitmqctl(8) man page
Deprecate 'ctl node_health_check'
Deprecate 'ctl node_health_check'
rabbit: Use `rabbit_prelaunch` to get context
rabbitmq-defaults.bat: Allow to override `$CONF_ENV_FILE`
Merge pull request #425 from rabbitmq/rabbitmq-server-2363
Merge pull request #2364 from rabbitmq/rabbitmq-server-2363
Merge pull request #816 from rabbitmq/rabbitmq-management-815
Upgrade jQuery to 3.5.1, closes #815
Merge pull request #2365 from rabbitmq/simple_ha-test-stability
Attempt to increase stability of simple_ha_SUITE
Log a message when 'ctl set_policy' succeeds
Improve logging of 'ctl authenticate_user' failures
Improve reporting of 'ctl change_password' failures
Improve reporting of 'ctl change_password' failures
Improve reporting of 'ctl set_user_tags' failures
Improve reporting of 'ctl set_user_tags' failures
Improve reporting of 'ctl delete_user' failures
Improve reporting of 'ctl add_user' and 'ctl delete_user' failures
Improve reporting of 'ctl add_user' failures
Improve reporting of 'ctl clear_topic_permissions' failures
Improve reporting of 'ctl clear_topic_permissions' failures
Cosmetics
Cosmetics
Cosmetics
Improve reporting of 'ctl clear_permissions' failures
Improve reporting of 'ctl clear_permissions' failures
Improve reporting of 'ctl set_topic_permissions' failures
Improve reporting of 'ctl set_topic_permissions' failures
Improve reporting of 'ctl set_permissions' failures
Improve reporting of 'ctl set_permissions' failures
Merge pull request #2362 from rabbitmq/rabbitmq_server_2324
Merge pull request #394 from rabbitmq/rabbitmq_server_2324
Message store settings we already have use the "msg_store" prefix
Message store settings we already have use the "msg_store" prefix
Expose new message store worker timeout setting to rabbitmq.conf
Update README.md
Test cases for short peer discovery mechanism alias
Test cases for short peer discovery mechanism alias
Test cases for short peer discovery mechanism alias
Test cases for short peer discovery mechanism alias
Test cases for short peer discovery aliases
Merge pull request #27 from rabbitmq/rabbitmq-peer-discovery-etcd-26
Correct rabbit_peer_discovery_etcd:lock/1 return value
Make xref pass
Correct a typo, references #65, #66
Merge pull request #44 from rabbitmq/rabbitmq-peer-discovery-consul-43
Alias rabbit_peer_discovery_consul as rabbitmq_peer_discovery_consul
Merge pull request #66 from rabbitmq/rabbitmq-peer-discovery-k8s-65
Merge pull request #231 from rabbitmq/mk-higher-raft-election-start-timeout
Use a higher Ra operation timeout
Alias rabbit_peer_discovery_k8s as rabbitmq_peer_discovery_k8s
Merge pull request #35 from rabbitmq/rabbitmq-peer-discovery-aws-34
Alias rabbit_peer_discovery_aws as rabbitmq_peer_discovery_aws
Merge pull request #2359 from rabbitmq/rabbitmq-server-2317-part-1
Support first/last/next/offset/timestamp offset spec
Add a specific shutdown timeout macro and property for message stores
Use the newly defined MSG_STORE_WORKER_WAIT for rabbit_msg_store
Update link to osiris for data format
Fix typo
rabbit_mnesia:is_virgin_node/0: take overridden Ra data directory into account
Merge pull request #423 from rabbitmq/rabbitmq-server-2354
Merge pull request #2355 from rabbitmq/rabbitmq-server-2354
List Raft data directory in status
Expose Ra data directory in rabbit:status/0
Regenerate GitHub Action workflows post #2356
Merge pull request #391 from rabbitmq/rabbitmq-server-2356
Merge pull request #2357 from rabbitmq/rabbitmq-server-2356
New policy validators test suite
Introduce rabbit_types:error/2
Introduce raft.data_dir to new style configuration schema
Consume from a local member
Add advertised host/port settings
Merge pull request #422 from rabbitmq/rabbitmq-cli-421
Rely on rabbit_env to infer node name
Merge pull request #813 from johanrhodin/patch-3
Fix net_timetime typo
Merge pull request #120 from rabbitmq/rabbitmq-web-stomp-119
Expose use_http_auth in new style config schema
Polish documentation
Document authentication sequence
Fix link in documentation
Cover all commands in protocol documentation
Fix links in documentation
Start documenting protocol
GitHub Actions: Regen workflows
GitHub Actions: Pass files between jobs using artefacts
Update README.md
Squash a compiler warning
Merge pull request #42 from rabbitmq/rabbitmq-peer-discovery-consul-41
Merge pull request #14 from rabbitmq/rabbitmq-peer-discovery-consul-41
Merge pull request #390 from rabbitmq/mk-rabbit_pbe-type-specs
Update type specs in rabbit_pbe
Update type specs to communicate the idea
Get configured Consul port as an integer value
rabbit_peer_discovery_config: introduce a way to get integer values
Merge pull request #420 from rabbitmq/credentials-obfuscation-2.0.0
Merge pull request #2351 from rabbitmq/credentials-obfuscation-2
Merge pull request #389 from rabbitmq/credentials-obfuscation-2.0.0
Brush up encode and decode commands
Adapt one more test
Add function heads to rabbit_pbe to take credentials-obfuscation 2.0 into account
Fix rabbit_pbe and rabbit_control_pbe to take credentials-obfuscation 2.0 into account
Pass expected {encrypted, _} form to credentials_obfuscation
Update for version 2 of credentials-obfuscation
Cosmetics
Update to credentials_obfuscation 2.0
rabbitmq-build.mk: Don't add rabbitmq_cli to compiler path in amqp_client
Debian control file: mark Erlang 23.0 as compatible
Update README.md
Reword a confusing sentence
Refresh credentials_obfuscation configuration
Set credentials_obfuscation secret to cookie
Add arguments for stream creation
Revert switch to sys:get_log/1
Address deprecation of erlang:get_stacktrace/0 and sys:get_debug/3
Fix several type specs
Merge pull request #418 from rabbitmq/rabbitmq-cli-409-followup
Update test assertion expectations
Default timeouts must be in milliseconds
Correct a typo in function name
Copy upstream changes
Fix dependency
Update dependencies to use rabbitmq-common stream-queue branch
Merge pull request #417 from rabbitmq/mk-os-env-flexible-assertion-take-3
Explain
Merge pull request #416 from rabbitmq/mk-os-env-flexible-assertion-take-2
Handle variable case in this test
Merge pull request #415 from rabbitmq/mk-os-env-flexible-assertion
Don't depend on a single env variable in this test
tools/terraform: Add support for Erlang 24 (Git master)
rabbit_ct_helpers: `fail_if_no_peer_cert` must be false if `verify` set to `verify_none`
Merge pull request #130 from nicolasbock/watch
rabbit_reader: Use `selected_cipher_suite` instead of `cipher_suite`
rabbit_amqp1_0_reader: Use `selected_cipher_suite` instead of `cipher_suite`
amqp_direct_connection: Use `selected_cipher_suite` instead of `cipher_suite`
Update debian/watch file to pull from GitHub
Merge pull request #2342 from rabbitmq/rabbitmq-server-2341
Revert "Merge pull request #49 from AntoineGagne/feature/migrate-to-gen-statem-frame-reader"
Emit a consumer.created event for quorum queues
python_SUITE: Add more log messages to test_util.py
Merge pull request #2328 from rabbitmq/revert-rabbitmq-server-2308
dynamic_ha_SUITE: decrement the number of attempts left
Only run dynamic_ha CT suite
Refactor to include retries
Revert "Remove publisher_confirms & confirm_nack from mirrored_queue tests"
Revert "Remove rejects_survive test flake"
Revert "Remove tests from ct-simple_ha that fail frequently"
Revert "Remove variable_queue_fold test flake"
Revert "Remove calculate_client_local test flake"
Revert "Remove mixed_dead_alive_queues_reject test flake"
Revert "Remove member_death test flake"
Merge pull request #2340 from rabbitmq/mk-missing-license-headers
Add some missing license headers
GitHub Actions: Regen workflows
Regenerate workflows with 'make github-actions'
GitHub Actions: Regen workflows
Merge pull request #2339 from rabbitmq/fix-dialyzer-errors
Run test suite via GitHub Actions on every push
Dedupe calls to rabbit_mgmt_test_util:reset_management_setting/1
GitHub Actions: Run Dialyzer with the latest Erlang version
GitHub Actions: Recreate secondary umbrellas in case of cache failure
rabbit_vhost: Vhost limits are never `undefined`
rabbit_ssl: Fix return value of `get_highest_protocol_version/0`
rabbit_quorum_queue: Fix type spec
rabbit_peer_discovery: Fix type spec of lock/0
rabbit_feature_flags: Fix type specs
rabbit_definitions: Use maps:update_with/4 directly
rabbit_connection_tracking: Disable `race_conditions` check for register_connection/1
rabbit_auth_backend_internal: Removed never used case clause
rabbit_amqqueue: Fix spec of list_local_mirrored_classic_without_synchronised_mirrors_for_cli/0
Merge pull request #49 from AntoineGagne/feature/migrate-to-gen-statem-frame-reader
Convert frame reader to `gen_statem`
Add type specification
Merge pull request #48 from bougueil/sasl_outcome_failure_codes
sasl supports more errors
GitHub Actions: Regen workflows
Merge pull request #413 from rabbitmq/mk-rabbitmq-diagnostics-os-env-in-report
Include 'rabbitmq-diagnostics os_env' output into 'rabbitmq-diagnostics report'
Wording
upgrade_preparation_SUITE: Skip test if quorum queues are unsupported
GitHub Actions: Regen workflows
GitHub Actions: Improve caching of secondary umbrellas
Make sure queue is stream queue
Merge pull request #412 from rabbitmq/mk-rabbitmq-diagnostics-os-env
Introduce 'rabbitmq-diagnostics os_env'
Merge pull request #386 from rabbitmq/add-get_used_env_vars
rabbit_env: Add get_used_env_vars/0 to fetch variables used by rabbit_env
rabbit_ct_broker_helpers: Override node name in stop_rabbitmq_node()
Use stream coordinator to manage streams
rabbit_ct_broker_helpers: Use same make(1) vars for node start & stop
Merge pull request #76 from mgrafl/patch-2
Reduce log level when refreshing certificates
Use stream instead of target
rabbit_mgmt_rabbitmqadmin_SUITE: Reset $HOME in end_per_testcase
Merge pull request #30 from skbenraven/patch-1
Broken links fix
rabbit_ct_broker_helpers: Skip build only if starting node from cwd
rabbit_mgmt_wm_definitions: Adapt call to `rabbit:product_*`
Restrict build badges to specific branch
Merge pull request #2334 from rabbitmq/change-quorum-defaults
Merge pull request #47 from rabbitmq/rabbitmq-amqp1.0-client-45-2
Trigger tests on new-commit-to-dep-release-branch repository events
Trigger test workflows on new-commit-to-dep-release-branch events
Dispatch webhook to rabbit/rabbitmq-server via workflow
Changed or overridden default configuration values related to quorum queues
Merge pull request #410 from rabbitmq/improve-product-info-in-status
Encode boolean values specifically
Merge pull request #46 from rabbitmq/rabbitmq-amqp1.0-client-45
Take atoms into account
Fix README build badges
Revert nodes clustering in parallel
Merge pull request #2326 from rabbitmq/improve-product_info-api
Merge pull request #383 from rabbitmq/github-actions-improvements
rabbit: Include base product name & version in "Starting" logged message
rabbit: Report base and overridden product info separately
GitHub Actions: Add mixed-version cluster testing
GitHub Actions: Move `make bats` to rabbitmq-server
Revert "Merge pull request #2325 from rabbitmq/revert-rabbitmq-server-2308-dead_queue_rejects"
GitHub Actions: Rename template chunks to leave room
GitHub Actions: Remove '/' from workflow names
GitHub Actions: Pass FAIL_FAST=1 and SKIP_AS_ERROR=1 to `make ct`
GitHub Actions: Regen workflows
GitHub Actions: Set vim shiftwidth & expandtab in headers
Merge pull request #2332 from rabbitmq/lrb-handle-closed-from-port_please
Merge pull request #382 from rabbitmq/fix-rabbitmq-plugin-copy-paste-error.mk
rabbitmq-plugin.mk: Fix copy-paste error
Handle "closed" return value
Update README.md
Update README.md
Use a 2 minute timeout when renaming nodes in cluster_rename_SUITE
Add the option for a timeout in rabbit_ct_helpers:exec
Express connection count assertion more generally
Merge pull request #2331 from rabbitmq/mk-remove-outdated-comment
Merge pull request #381 from rabbitmq/github-actions-improvements
GitHub Actions: Regen workflows
GitHub Actions: Upload rabbitmq-deps.mk to S3 only for `master` & release branches
rabbitmq-github-actions.mk: Set `DO_COMMIT=yes` to automatically commit
rabbitmq-github-actions.mk: Use $(base_rmq_ref) from rabbitmq-components.mk
Remove an outdated comment
Merge pull request #2330 from rabbitmq/qq-delivery-limit-bug
QQ: Fix crash bug when reaching delivery limit
Merge pull request #40 from rabbitmq/vhost-failure
Increase vhost failure retries
Merge pull request #380 from rabbitmq/remove-hard-coded-erlang-version-in-github-actions-workflows
GitHub Actions: Regen workflows
GitHub Actions: Replace a hard-coded "21.3" by $(ERLANG_VERSION)
Merge pull request #2325 from rabbitmq/revert-rabbitmq-server-2308-dead_queue_rejects
GitHub Actions: Regen workflows
Use Grafana 6.7.2 schema defaults in Erlang-Distribution
Improve make targets & aliases
Merge pull request #379 from rabbitmq/gen-github-actions-workflows
Add GitHub code owners
GitHub Actions: Generate workflows using `make github-actions`
Git: Ignore rabbitmq-deps.mk file
GitHub Actions: Use GitHub Actions "run_id" when uploading rabbitmq-deps.mk to S3
GitHub Actions: Don't cache `ebin` for now
rabbitmq-github-actions.mk: New Erlang.mk plugin to help manage GitHub Actions workflows
Merge pull request #378 from rabbitmq/add-project-info-to-rabbitmq-deps.mk
rabbitmq-tools.mk: Add project name & commit hash as a comment in rabbitmq-deps.mk
Merge pull request #73 from rabbitmq/rabbitmq-shovel-72
Fall back to delete-after where src-delete-after is used in a few more places
Merge pull request #377 from rabbitmq/mk-rabbit-event-accepts-maps
rabbit_event:notify/{2,3}: support map events
Don't cache app modules
Add build & Grafana dashboard badges
Use shields.io for better badges
Merge pull request #38 from rabbitmq/test-branch-protection
Shorten text on build badges
Fix test that was made to fail on purpose
Print the response body by default
Run tests on GitHub Actions on every push
cluster_status_command: Show product name & version if any
status_command: Don't display product info if they are unset
rabbit_runtime_parameters:set_globa/3: add debug logging
Revert "Remove dead_queue_rejects test flake"
Merge pull request #2277 from rabbitmq/always-handle-config-files-with-cuttlefish
rabbit_config: Deprecate schema_dir/0
rabbit_prelaunch_conf: Always handle config. files with Cuttlefish
Merge pull request #2323 from rabbitmq/rabbitmq-server-2322
Fix GitHub Actions workflow badges
Bump versions across a number of deps
Merge pull request #34 from Aakcht/grafana_change_color_labelling
Merge pull request #2270 from rabbitmq/github-actions
Assert amqp_connection_close is OK
Run checks & tests in GitHub Actions on every push
Merge pull request #71 from rabbitmq/shovel-issue-70
Import rabbit_data_coercion:to_binary/1
Reintroduce DefaultOutput.output/1
Do not run tests in parallel, default MAX_CASES to 1
Default mix text cases to number of CPUs
Increase meta-data fidelity
Merge pull request #373 from rabbitmq/gen-rmq-deps.mk
rabbitmq-tools.mk: New `rabbitmq-deps.mk` target
Run both authn and authz steps when rabbit_auth_backend_cache module is used
Typo fix
Merge pull request #409 from rabbitmq/rabbitmq-cli-408
Merge pull request #2320 from rabbitmq/rabbitmq-cli-408
Introduce 'rabbitmq-upgrade await_online_synchronized_mirror'
Rename a command file to follow the standard convention
Introduce rabbitmq-upgrade await_online_quorum_plus_one
Drive by change: correct a typo
Drive by change: help command should be available in all scopes
Feature Flags and QQ guides are now available on rabbitmq.com
Introduce rabbit_upgrade_preparation
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Merge pull request #376 from rabbitmq/update-erlang-mk
Update erlang.mk
rabbit_ct_broker_helpers: Call `make stop-node` directly
rabbit_ct_broker_helpers: nodes clustering in parallel
Attempt to make unit_log_managment_SUITE less flaky
Merge pull request #2315 from rabbitmq/use-new-inet_tcp_proxy_dist
Merge pull request #375 from rabbitmq/rabbitmq-common-374
Use PLATFORM to determine hostname command
Merge pull request #805 from rabbitmq/rabbitmq-management-804
Merge pull request #39 from rabbitmq/use-new-inet_tcp_proxy_dist
rabbit_feature_flags: Improve timeout computation in `mark_as_enabled_remotely()`
*_SUITE: Use the new API for inet_tcp_proxy_dist
*_SUITE: Don't setup dist module when not needed
Simplify
Explain that the endpoint is at /metrics
rabbitmqadmin: make --cli-switches take precedence over config file values
Ignore .vscode
Use "hostname -s" only on Darwin
Merge pull request #129 from nicolasbock/timeout
Add timeout to rabbitmqctl wait statement
Handle RpcStream.receive_list_items_with_fun/6 with a timeout of 0 precisely
Merge pull request #803 from rabbitmq/lrb-add-federation-links
Add info for federation links
Merge pull request #2316 from rabbitmq/lrb-fixup-schema-sync
Fix schema sync for parameters
Merge pull request #801 from rabbitmq/rabbitmq-management-800
Merge pull request #802 from rabbitmq/lrb-fix-export-python3
Fix export using python 3
One more test
Merge pull request #35 from rabbitmq/rabbitmq-management-800
Remove a function that's no longer used
Handle the combination of TLS options and cowboy_opts
Handle the combination of TLS options and cowboy_opts
Simplify and adapt listener_config_SUITE
Squash a compilation warning
Merge pull request #372 from rabbitmq/fix-incorrect-quoting
rabbitmq-dist.mk: Fix incorrect quoting in install-cli-scripts
Squash a compilation warning
rabbit_ct_broker_helpers: Use new inet_tcp_proxy_dist API
Return TLS listener correctly
Return TLS listener correctly
Improve handling of errors related to unsiffient permissions
Merge pull request #371 from rabbitmq/improvements-to-erlang.mk-plugins
Color labelling grafana fix
Log selected virtual host
rabbitmq-run.mk: Replace two CLI calls with fast equivalents
rabbitmq-dist.mk: Defer computation of `$rabbit_scripts_dir` to install-cli-scripts recipe
tools/terraform: Fix warnings reported by Terraform 0.12.x
Remove a couple of highly timing-sensitive tests
dynamic_ha_SUITE: make some tests less timing-dependent
Simplify a flaky test that overlaps with other tests and suites
Add more minors to erlang_version_to_system
Merge pull request #2308 from rabbitmq/remove-flaky-tests
Merge pull request #2311 from rabbitmq/rabbitmq-cli-389-docs
Add docs for check_if_node_is_mirror_sync_critical and check_if_node_is_quorum_critical
Merge pull request #2310 from rabbitmq/t-list-queues-online-and-offline
Wait until node detects new cluster configuration
Attempt to correct a test
Use rabbit_ct_helpers:await_condition/2 to detect rate changes
init-etcd.sh: add /usr/sbin to PATH
Merge pull request #797 from rabbitmq/rabbitmq-management-794
Make pretty_json Python 3 compatible
Remove tests from ct-simple_ha that fail frequently
Remove publisher_confirms & confirm_nack from mirrored_queue tests
Remove rejects_survive test flake
Remove variable_queue_fold test flake
Remove calculate_client_local test flake
Remove mixed_dead_alive_queues_reject test flake
Remove member_death test flake
Remove dead_queue_rejects test flake
Merge pull request #2307 from rabbitmq/fix-log_management_SUITE
Remove all ct-partition test flakes
unit_log_management_SUITE: Simplify code of `log_file_fails_to_initialise_during_startup`
Merge pull request #2304 from rabbitmq/skip-reginit-if-no-ff-from-unknown-apps
rabbit_feature_flags: Add a FIXME to try_to_write_enabled_feature_flags_list()
rabbit_feature_flags: Restart registry regen if it changed meanwhile
rabbit_feature_flags: Fix concurrent registry module reload
rabbit_feature_flags: Log more details during registry reloading
feature_flags_SUITE: Fix Lager configuration
feature_flags_SUITE: New testcase to test concurrent registry loading
rabbit_feature_flags: Translate a comment to English
rabbit_feature_flags: Don't re-initiliaze registry if no feature flags
Remove an outdated example
Merge pull request #25 from rabbitmq/rabbitmq-peer-discovery-etcd-22
Fix syntax errors
More idempotent tests
Small re-work for test instructions
Merge pull request #2305 from rabbitmq/test-rabbit-fifo-int
Merge pull request #2306 from rabbitmq/test-unit-connection-tracking
Use rabbit_ct_helpers:await_condition/2
Fix flaky test - connection tracking is asynchronous
Use eetcd 0.3.2 from Hex.pm
Fixes race conditions on rabbit_fifo_int
Remove a few integration tests that rely on sigkill
Explain
Merge pull request #2300 from rabbitmq/remove-segment-max-entries-default
Merge pull request #2303 from rabbitmq/handle-deadlocks-in-peer_discovery_classic_config_SUITE
Bump zhongwencool/eetcd to 337c07ebf86
Merge pull request #106 from rabbitmq/rabbitmq-federation-105
Ditto
Wording
Factor out common code, add multiple tries
peer_discovery_classic_config_SUITE: Handle dead-locks
Remove overly cautious comment from sample config
Travis: require Bionic which provides daemonize
Merge pull request #2302 from rabbitmq/work-around-cli-circular-dep-in-feature_flags_SUITE
Manually patch .travis.yml
Make .travis.yml.patch more -p0-friendly
We use a Debian package now, drop install_daemonize.sh
Store .travis.yml modifications as a .travis.yml.patch
Undo changes to .travis.yml
Merge pull request #370 from rabbitmq/fix-install-cli-scripts
rabbitmq-dist.mk: Fix `install-cli-scripts` when rabbit is top-level
rabbitmq-env: Fix indentation
feature_flags_SUITE: Work around CLI/rabbitmq-server circular dependency
Introduce TLS support for connections to etcd
Introduce a new upstream parameter, resource-cleanup-mode
Merge pull request #2301 from rabbitmq/lrb-fix-flaky-peer_discovery_classic_config-test
Ensure randomized_startup_delay_range custom value is used
Output init-etcd.sh exit code and output on failures
Adapt init-etcd.sh for Linux
Remove Ra segment_max_entries override
README updates
Add a script that install daemonize(1)
Obfuscate password in etcd v3 client state
Initial support for authentication with etcd
Credit value is signed
Bump eetcd dependency ref
New integration tests
Introduce a script that starts an etcd node
Merge pull request #2295 from rabbitmq/rabbit-fifo-fix
Bump test timeouts
Remove a log message we ended up not adding
Handle one more possible termination reason
Exchange federation: do not clean up internal queue on abnormal link termination
rabbit_fifo: set timer when publish rejected
Initial tests for v3 API-based implementation
Move statem_data to a header file
Introduce sensible minimums for node key and lock lease TTLs
Maintain node key's lease continuously
Reduce randomized startup delay range for this test
Wait for up to 90s in this test
Merge branch 'cloudamqp-tls-sni'
Await cluster formation for 40s
Update unit test assertions
Merge pull request #2294 from rabbitmq/fix-clustering_management/erlang_config
Switch eetcd dependency back to mainline
clustering_management_SUITE: No need to stop node after start_app failure
Handle client heartbeat
dont enable peer verification by default
Belated Gun messages only arrive when client timeouts are unreasonably low
Extract a function
More debug logging around peer discovery locking
Reimplement lock and unlock ops in rabbit_peer_discovery_etcd
enable SNI and TLS hostname verification by default
Switch to michaelklishin/eetcd@a1f8cccc12a1
Rename one more test suite
Rename one more test suite
Rename one more test suite
peer_discovery_classic_config_SUITE: re-evaluate cluster formation condition for up to N seconds
Introduce rabbit_ct_helpers:await_condition/2 and await_condition_with_retries/2
Rename a test suite
Merge pull request #2293 from rabbitmq/fix-rabbit-channel-record
unit_log_management_SUITE: handle erofs returned on macOS
Merge pull request #2292 from rabbitmq/rabbit_fifo_int_tweaks
Add heartbeat
Move rabbit_channel config value to config record
Increase wait timeouts in rabbit_fifo_int
Merge pull request #123 from rabbitmq/restore-correct-travis-conf
Travis CI: Restore correct configuration
Merge pull request #102 from rabbitmq/fix-in-ci
README.md: Add Travis CI badge
Refactoring before introducing heartbeat
etcd v3 API lease TTL is in seconds
Remove a test suite split artifact
Finish splitting unit_*_SUITE suites
Rename a suite to group better together with unit_access_control
Continue splitting unit_*_SUITE suites
Extract several more focused test suites
unit_SUITE: extract tests for memory monitor and pg_local
Move VM memory monitor unit tests into their own suite
Split the rest of unit_inbroker_non_parallel_SUITE
Move app management unit tests into their own suite
Move disk space monitor tests into their own suite
Move file handle cache tests into their own suite
Move log management tests into their own suite
Add todo task
exchange_SUITE: Remove the `binding_recovery` testcase
queue_SUITE: Wait for federation in `dynamic_plugin_stop_start`
Send close when client sends frame too large
exchange_SUITE: Bump wait in several testcases
exchange_SUITE: Add a wait condition in `dynamic_plugin_stop_start`
Refactor tune
exchange_SUITE: Review all wait conditions
exchange_SUITE: Improve wait condition in `binding_recovery`
exchange_SUITE: Wait for federation on the correct node
Add test for close
exchange_SUITE: Bump a few more timeouts
Update test for opening sequence
exchange_SUITE: Throw an exception if wait_for_federation() times out
Add support to send close
Merge pull request #121 from rabbitmq/setup-slapd
Travis CI: Update config from rabbitmq-common
system_SUITE: Setup slapd(8) at the beginning of the testsuite
example/README.md: Record the source of those LDIF files
rabbit_ldap_seed: Remove trailing whitespace
Handle close command from client
Check virtual host access in open
Add skeleton for tune and open
rabbit_ct_broker_helpers: Stop node if start-background-broker failed
rabbit_ct_broker_helpers: Fix indentation
Avoid the dependency on rabbit_ct_helpers in worker_pool_SUITE
Use constants in tests
Add test for authentication
Add rabbitmq_ct_helpers to test dependencies
Create SECURITY.md
Merge pull request #2279 from rabbitmq/startup_memory_fix
Merge pull request #368 from rabbitmq/worker_pool_dispatch_sync
Output a more realistic example in this message
More logging around peer discovery backend initialisation
Refactor to pre/post authentication frame handling
Be less generous in empty whitespace use in setup_all functions
Handle null binary in SASL authenticate
Update CONTRIBUTING.md
WaitCommandTest: make sure distribution is started before used
TestHelper.await_rabbitmq_startup/0: introduce retries
More debug logging
Bump eetcd
Explain
product_info_SUITE: Try to grep several times
Handle SASL authenticate
Merge pull request #120 from rabbitmq/ldap-gsuite-171933299
Setting idle_timeout to 0 will request a connection for every operation
Merge pull request #2285 from rabbitmq/test-wait-for-confirms
Compile from scratch
Wait for commits on test suite
Setting idle_timeout to 0 will request a connection for every operation
feature_flags_SUITE: Make sure `rabbit` is not recompiled
Move worker_pool_SUITE to rabbitmq-common
Move over worker_pool_SUITE from rabbitmq-server
use is_process_alive for a cleaner test
Handle SASL handshake
rabbit_ct_broker_helpers: Do not rebuild RabbitMQ when starting a node
Fail vhost startup if index workers are queued unsuccessfully
Refactor after some Osiris changes
Add worker_pool:dispatch_sync funtion
Improve worker_pool worker utilization
feature_flags_SUITE: Adapt `registry` test
List existing cluster members via etcd v3 API
Make the list of discovered nodes unique before using it
Make sure peer discovery module is loaded before initialisation
Merge pull request #2281 from rabbitmq/fix-ff-registry-loading+improve-ff-testing
Cuttlefish schema: comment edits
Merge pull request #146 from gor181/stomp-default-nack-requeue
Avoid using application:get_env on hot code path
rabbit_feature_flags: Wait for old registry to be purged
rabbit_feature_flags: Add an API for testsuites to add their own feature flags
Rework etcd client management so that it does not block application stop
Explain
Anchor etcd v3 API client under rabbit_sup
Don't use persistent cluster ID in etcd cluster name calculation
Merge pull request #365 from rabbitmq/remove-RABBITMQ_SCHEMA_DIR-var-uses
rabbitmq-run.mk: Remove uses of $RABBITMQ_SCHEMA_DIR
Allow controlling nack requeue on plugin level
Reduce memory usage during startup
Initialise etcd v3 API client early
Default TAR to tar, use gtar on FreeBSD & Darwin
rabbitmq-tools.mk: Exclude nodes' `mnesia` directory form archive
Initial steps towards switching to v3 API
Merge pull request #364 from rabbitmq/add-compress-ct-logs-target
rabbitmq-tools.mk: Add compress-ct-logs target
rabbitmq-run.mk: Build RabbitMQ once when using start-{brokers,cluster}
rabbitmq-run.mk: Use := instead of ?= in target-specific var. assignment
rabbitmq-run.mk: Re-use $(comma) from Erlang.mk
rabbit_fifo_SUITE mock log better
Bump OTP to 22.3 for Docker image
Merge pull request #120 from rabbitmq/pjk25-patch-1
Add instructions to build and run
Add license information
Merge pull request #2272 from rabbitmq/rabbit-fifo-force-gc
Initial import
Initial commit
Merge pull request #363 from rabbitmq/lrb-fix-color-formatting
Fix leading tabs
Merge pull request #2276 from rabbitmq/mk-peer-discovery-retries
Make default peer discovery retry settings consistent
(c) updates for 2020
rabbit_nodes_common:make/1: support node parts that are not strings
Double-escape \ so that the config file is generated correctly
Use `J` tar flag for extracting `.tar.xz`
Retry on [some] peer discovery failures
Update type spec to include errors
Classic config peer discovery: conditionally support registration
rabbit_nodes: introduce make/2 for convenience
Integration tess for classic config peer discovery backend
Log it when schema tables were successfully synced
rabbit_ct_broker_helpers: introduce reset_node/2, force_reset_node/2
Merge pull request #793 from rabbitmq/rabbitmq-management-785
Encode data to bytes here
Read / write files in binary mode
Merge pull request #69 from rabbitmq/rabbitmq-shovel-68
Use a better colour for all debug logs
Keep test_rabbitmq_config_with_tls in sync with the default one
Log full GC sweep as debug, not info
Change error_string to error as the return is not from the parameters module any more
Merge pull request #791 from rabbitmq/rabbitmq-management-787
Merge pull request #40 from rabbitmq/rabbitmq-shovel-68
Introduce rabbit_ct_broker_helpers:cluster_members_online/2
Fix restart banner by using a default for vhost
Fix function clause
Add a test case that imports definitions on boot
rabbit_fifo: force gc when queue is empty
Make sure definition import work pool is started before actual import boot step
Revert "Use default work pool for definition import"
Add a comment to remind us to discuss IMPORT_WORK_POOL
Log if definitions are imported sequentially vs concurrently
Use default work pool for definition import
Use Python 3 explicitly in Dockerfile for rabbitmqadmin
Speed-up Docker image builds by re-using generic-unix package archive
Bump OTP to 22.2.8 for Docker image
Hide consumers when stats are disabled
Add warning popup for shovel restart
Merge pull request #2273 from luos/fix_crashed_queues_on_startup
Differentiate between shovel restart and deletion
Add utility function to restart a shovel
Merge pull request #788 from rabbitmq/db-cache-gc
Comment wording
Merge pull request #790 from rabbitmq/revert-789-rabbitmq-management-787
Revert "Hide consumers on queue page when stats are disabled"
Add utility function to delete a shovel
Merge pull request #789 from rabbitmq/rabbitmq-management-787
Enable colourful debug logging by default
Hide consumers on queue page when stats are disabled
Try reclaiming memory better in db cache process
rabbitmqadmin: update shebang to run on Python 3 by default
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Windows: Change organization from Pivotal to VMware
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Update copyright (year 2020)
Remove unused old `check_xref` and `quickcheck` scripts
Merge pull request #45 from rabbitmq/rsa_keys
dynamic_ha_SUITE: Increase the chance of concurrent rebalances
rabbitmq-run.mk: Set Ra's wal_sync_method to `sync`
Log authentication rejection messages
Add a docker based example of rsa_keys
Debian: Bump minimum required Elixir to 1.8.0
Merge pull request #31 from spring-operator/polish-urls-remaining-master
Merge branch 'master' into polish-urls-remaining-master
Bump jose to 1.10.1
Update license file name
Correct misleading licensing info
/rebalance/queues: allow OPTIONS requests
Merge pull request #783 from rabbitmq/rabbitmq-management-782
Merge pull request #2268 from rabbitmq/rabbitmq-management-782
Update example path
Update routes
Move logging outside of the trampoline process
Compile
More logging
More logging
Rename rebalancing module
Add API docs
Add test that should fail
Add API endpoint /api/rebalance
rabbitmq-dist.mk: Change the condition again to match $(PORJECT) instead
rabbitmq-dist.mk: Consider $TEST_DEPS when installing CLI (or not)
rabbitmq-dist.mk: Don't install CLI if the project dost not depend on `rabbit`
Update rabbitmq-components.mk
Makefile: Add rabbit_common to $BUILD_DEPS
Travis CI: Update config from rabbitmq-common
Update rabbitmq-components.mk
Makefile: Include Erlang.mk plugins
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Use dev prometheus.erl in RabbitMQ master (3.9.x)
Merge pull request #359 from rabbitmq/erlang-mk-query-deps
Travis CI: Add configuration
Update mock_rabbitmq_plugin_for_3_8 to support RabbitMQ 3.9.x
mix.exs: Bump Elixir requirement from 1.7 to 1.8
Merge pull request #401 from rabbitmq/bump-csv-dependency-to-2.3.x
mix.exs: Bump `csv` to version 2.3.x
Add erlang.mk query-deps* family of targets
Merge pull request #2267 from rabbitmq/rabbit-fifo-release-cursor-fix
rabbit_fifo: change release cursor calculation
rabbitmq-tools.mk: Only update `.travis.yml` if branches match
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Refresh config patch
Travis CI: Refresh config patch
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Set $current_rmq_ref based on Travis variables
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Ensure Elixir is installed
rabbit_fifo_prop: revert config change
rabbitmq-run.mk: Skip builds in `make run-broker NOBUILD=1`
rabbitmq-tools.mk: Don't add .travis.yml is there none in the first place
Makefile: Move $ERLANG_MK_* variables before `-include erlang.mk`
Travis CI: Update config from rabbitmq-common
Travis CI: Add config patch to ensure we use `make ct-fast`
system_SUITE: Give a chance to all messages to be queued
Travis CI: Update config from rabbitmq-common
Travis CI: Update .NET repository URL
README.md: Add Travis CI build status (master branch)
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
rabbit_fifo_props: add tests that tests config changes
Travis CI: Refresh config patch
Travis CI: Refresh config patch
Travis CI: Refresh config patch
rabbitmqlogo.svg: Convert text to path
Fix timing sensitive test
Merge pull request #2261 from rabbitmq/add-signal-handling-testsuite
signal_handling_SUITE: New testsuite to check the signal handlers behavior
(c) year
RPM: Adapt build/runtime dependencies to the OpenSUSE Erlang package
rabbit_peer_discovery_consul: Remove unused header
lower size of property test
rabbit_fifo: release cursor effect ordering
Merge pull request #779 from IvanKaloyanov/change-rabbitmqadmin-remove-binding-no-properties-key
properties_key default value on binding deletable
Add some essential debug logging of requests issued
Django example: white list localhost
Merge pull request #2264 from rabbitmq/add-product_info-testsuite
product_info_SUITE: New testsuite to check product name & version overrides
min length validator: handle passwordless users gracefully
Remove unused variable
Merge pull request #2263 from rabbitmq/qq-dead-letter-bug
Take snapshots when messages are returned
Merge pull request #2262 from rabbitmq/qq-dead-letter-bug
Fix QQ dead letter crash
Merge pull request #400 from rabbitmq/wait-loop-sleep-down-to-one-second
Merge pull request #2258 from rabbitmq/load-several-config-files
python_SUITE: Use Pika 1.1.0
rabbit_prelaunch_conf: Load additional Cuttlefish configuration files
rabbit_prelaunch_conf: Remove out-of-date comment
rabbit: Do not load configuration twice
wait_command.ex: Change `wait` internal sleep to one second
Merge pull request #119 from rabbitmq/rabbitmq-auth-backend-ldap-118
Remove spammy log message
Avoid using erlang:get_stacktrace/0 for improved OTP 23/24 compat
Avoid using erlang:get_stacktrace/0 for improved OTP 23/24 compat
Avoid using erlang:get_stacktrace/0 for improved OTP 23/24 compat
Avoid using erlang:get_stacktrace/0 for improved OTP 23/24 compat
Avoid using erlang:get_stacktrace/0 for improved OTP 23/24 compat
Merge pull request #2260 from rabbitmq/optimise-qq-recovery
Optimise messages_ready function by keeping counts of prefix messages rather than taking length/1. There could be a lot of prefix messages during during recovery which could make recovery unbearably slow.
Merge pull request #357 from rabbitmq/load-several-config-files
Merge pull request #2259 from rabbitmq/fix-dialyzer-error-in-sighandler
rabbit_prelaunch_sighandler: Comment out code which is unused
rabbit_env: Add `$RABBITMQ_CONFIG_FILES`
Randomized Raft node startup delay
Synchronise plugin start with that of Raft node
Merge pull request #777 from rabbitmq/highdef-logo-and-favicon
Replace RabbitMQ logo and favicon by higher definition versions
Merge pull request #2255 from rabbitmq/qq-remove-member-fix
Merge pull request #776 from rabbitmq/show-product_info-in-ui
quorum_queue suite: remove a couple of stray comments
Merge pull request #2256 from rabbitmq/rabbit-fifo-dead-letter-bug
Merge pull request #399 from rabbitmq/show-product_info-in-status
Merge pull request #2257 from rabbitmq/export-product_info-in-status
Show product info (if available) in the web UI
status_command: Show product info
rabbit: Export product info in `status()`
Fix QQ crash recovery bug
Split QQ remove member into two operations
Inject a delay before joining client ID tracking cluster
Make Erlang-Memory-Allocators dashboard look better on light
Bump Prometheus & Grafana to latest stable
Sum resident set size on Erlang-Memory-Allocators
Merge pull request #2253 from rabbitmq/skip-signal-handler-on-windows
rabbitmq_prelaunch: Skip signal handler on Windows
Ignore client ID tracker timeouts on connection closure
Support lists of endpoints
Merge pull request #2247 from rabbitmq/support-configurable-product-name-and-banner
Add ability to customize product name, version & banner
Remove RabbitMQ from HTTP listener registry log warning
Use PROJECT_VERSION in Docker image build
Package generic-unix before building Docker image
Bump OTP to 22.2.7 when building Docker image
Compiles from scratch
Merge pull request #356 from rabbitmq/support-configurable-product-name-and-banner
rabbit_env: Add $RABBITMQ_{PRODUCT_NAME,PRODUCT_VERSION,MOTD_FILE}
Merge pull request #2244 from rabbitmq/only-handle-SIGHUP-and-SIGTSTP
Only handle SIGHUP and SIGTSTP
Merge pull request #2248 from rabbitmq/mk-concurrent-definition-import
Make it possible for connection starter to opt out of failure notifications
Factor out some common code
Catch and report errors when importing definitions concurrently
gatherer:stop/1 now does the unlinking
rabbit_definitions:concurrent_for_all/4: avoid an unintentional match
Import definitions concurrently
Do not export definitions of built-in exchanges
Make gatherer:stop/1 unlink the process
Makefile: Ignore `docker` subdirectory when creating source archive
Merge pull request #2246 from Ayanda-D/speedup-bootsteps
Speedup bootstep execution by removing unnecessary filtering and grouping of MFA specifications. This improves speed of execution by factor of 2N, where N is number of attributes per step, matching the passed `AttributeName`. Dropping constants, overall time complexity remains O(N), but cant be neglected for modules with multiple bootstep attributes.
rabbitmq-run.mk: Set console log level to debug
Bump to latest unverified generic-unix 3.9 dev build
Use unverified generic-unix build for the Docker image
Merge pull request #44 from rabbitmq/handle-heartbeat-in-close_sent
amqp10_client_connection: Handle heartbeat in close_sent/2
Delist internal stats mode from rabbitmq.conf.example
Log less on abrupt socket closure
rabbitmq.conf.example: this should be a comment line
Add management.path_prefix to rabbitmq.conf.example
Transitionary step for OTP 23 [master] compatibility
Transitionary step for OTP 23 [master] compatibility
Transitionary step for OTP 23 [master] compatibility
Transitionary step for OTP 23 [master] compatibility
Bump prometheus.erl & observer_cli to latest
Merge pull request #2241 from rabbitmq/dialyzer-fixes-in-rabbitmq-prelaunch
rabbitmq_prelaunch: Fix all warnings reported by Dialyzer
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Build image with latest RabbitMQ 3.9.0 dev + local
Clean up NODES table on RabbitMQ-Overview
Use publisher confirms for Quorum Queue workload
Improve config for returning metrics per object
Merge pull request #226 from rabbitmq/async-mqtt-node
Bump Grafana & Prometheus to latest
Bump Docker image to latest RabbitMQ 3.9 dev
Make interactions with Ra async
Merge pull request #2239 from rabbitmq/fix-setting-log-level-without-file
Fix setting log level to debug
Merge pull request #354 from rabbitmq/extract_sd_notify
Merge pull request #2231 from rabbitmq/extract_sd_notify
Convert systemd notification to prelaunch steps
Merge pull request #2238 from rabbitmq/various-fixes-post-issue2180
rabbit: Change boot state to `stopping` in prep_stop/1
rabbit: Merge start_apps/2 and start_loaded_apps/2
Merge pull request #2237 from rabbitmq/adapt-unit-log_config_SUITE
unit_log_config_SUITE: Adapt after fixes to rabbit_lager
Merge pull request #2236 from rabbitmq/fix-logging-after-issue2180-related-changes
rabbit_lager: Fix log level being set from the configuration file
rabbit_lager: Only use "\r\n" with the console backend
Transitonal step for OTP 23 [master] compat
Merge pull request #2233 from Ayanda-D/handle-absent-alive-queues
Format pid correctly
Wording
improve handling of absent queues assumed to be alive
rabbit_binding: a few helpers to make it easier to delete bindings
rabbit_misc:sort_field_table/1: support map arguments
Fix make target for building Docker image using local RabbitMQ dev
Add make target to build docker image using the local RabbitMQ dev
Do not use tar flags for reproducible builds on macOS
Makefile: Improve Hex cache export
Fix 0/0 and enable all tests
Aggregate metrics by default
Remove systemd_notify_socket
Bump to latest RabbitMQ 3.9.0 dev build & Erlang/OTP v22.2.6
Replace histogram type with gauge for raft_entry_commit_latency_seconds
Merge pull request #769 from rabbitmq/lrb-fix-csp
Add unsafe-inline to CSP policy
Remove K8S config related to rabbitmq/rabbitmq-prometheus#24
Merge pull request #397 from hallazzang/patch-1
fix typo
Merge pull request #116 from bogdando/fix_ci
Merge pull request #353 from rabbitmq/fix-rabbit_env-test-with-mixed-versions
rabbit_env_SUITE: Check if $RABBITMQ_FEATURE_FLAGS is overridden
Merge pull request #28 from rabbitmq/metrics-aggregation
Use 2-node and rise time limits for Jepsen case
add GitHub templates
Merge pull request #2216 from rabbitmq/move-all-os-getenv-to-rabbit_env
Merge pull request #352 from rabbitmq/record-var-origin-in-rabbit_env
Merge pull request #114 from bogdando/fix_ci
Fix upstream Travis CI for rabbitmq-server-ha
rabbit_mnesia_rename: Use the new rabbit_nodes_common:name_type() function
Move all RabbitMQ-specific environment variables to `rabbit_env`
Refactor definition import functions to log less
Introduce rabbit_{exchange,amqqueue}:lookup_many/1
rabbit_exchange:lookup/1: support lists of keys
rabbit_guide:string/2: support binary prefixes
Skip persistent cluster ID test for mixed version clusters
Revert "Fixes a function_clause in httpc:request/5"
Merge pull request #37 from rabbitmq/rabbitmq-management-767
Merge pull request #2228 from rabbitmq/rabbitmq-server-2222-2
Merge pull request #768 from rabbitmq/rabbitmq-management-767
Fixes a function_clause in httpc:request/5
Add test for CSP headers
Add function head to get static content
Set CSP headers for static content requests
Ignore SIGUSR2 signal as well
Merge pull request #2227 from rabbitmq/rabbitmq-server-2222
Merge pull request #2226 from rabbitmq/mk-persistent-internal-cluster-id
Merge pull request #113 from mbaldessari/rabbitmq-ha-iptables
Allow operator to disable iptables client blocking
Override OTP handlers to gracefully shut down on SIGTERM, SIGQUIT
Log message wording
Introduce a persistent internal cluster ID
rabbit_definitions: introduce a few types
Bump upper supported Elixir version bound to 1.10
Merge pull request #2221 from loguntsov/patch-1
Formatting.
Fix bad type of result of ack function.
Merge pull request #2219 from rabbitmq/revisit-rabbit-start_apps-2
rabbit_env: Set $RABBITMQ_ENABLED_PLUGINS to an empty string to disable all plugins
rabbit: Change start_apps/2 to call application:ensure_all_started/2
Merge pull request #2220 from rabbitmq/fix-bootsteps-run-vs-app-start-order
rabbit: Fix plugins' run_boot_steps() vs. start order
Allow ;charset=utf-8 in content-type header
Makefile: Expand the list of slow testsuites
Merge pull request #2218 from Gsantomaggio/rabbitmq_server_2214
Always allow OPTIONS for /api/login
Merge pull request #765 from rabbitmq/post-login-endpoint
Expose two rabbitmq-queues health checks to rabbitmq-diagnostics
rabbitmq-queues quorum_status: move to Observability section in help
Handle timeout error on the rebalance function
Add missing web module
Merge pull request #2211 from rabbitmq/unsupported-if-flags-delete-qq
rabbit_nodes_common: New name_type/1 function
rabbit_env: Improve how we locate the plugins directory
rabbit_env: Record variables' origin
rabbit_env: Fix an error reported by Dialyzer
rabbitmq-dist.mk: Don't install CLI when testing rabbitmq-common
Acting user not used in qq queue.delete with flags
Add GitHub templates, update CONTRIBUTING from rabbitmq-server
Accept integer watermark values as well
More sensible JSON formatting for some commands
Partially replicate the deployment mentioned in #24
quorum_queue_SUITE: Remove an unused variable
unit_SUITE: Declare test plugins' dependencies
Revert "unit_SUITE: Fix test plugin's dependencies"
POST /login endpoint
unit_SUITE: Fix test plugin's dependencies
test/fixtures: Fix mock plugins' dependencies
Merge pull request #2212 from rabbitmq/filter-non-plugins-out
include/rabbit.hrl: Plugins' dependencies are a list of atom()
rabbit_plugins: Filter non-plugins out
Bump RabbitMQ to latest dev & OTP to latest stable
Make rabbitmq_prometheus compile
Unsupported if_empty and if_unused flags for delete quorum queues
Use {pem, <<PEM>>} style configuration for asymmetric keys sample
Fix QQ PerfTest instance name in Prometheus config
Merge pull request #91 from rabbitmq/rabbitmq-management-agent-90-reduce-log-spam
Merge pull request #2210 from rabbitmq/filter-applicable-policies
Introduce rabbit_ct_broker_helpers:set_vhost_limit/5
Store last error log in state
Filter policies that cannot be applied to quorum queues
rabbit_feature_flags: Lookup feature flags in RabbitMQ-related applications only
rabbit_prelaunch_early_logging: Setup all categories early
rabbit_feature_flags: Use new `feature_flags` log category
Merge pull request #2209 from rabbitmq/tomyouyou-tomyouyou-autoheal-l
unit_log_config_SUITE: Take new `feature_flags` category into account
Sort feature_flags/federation log categories alphabetically
Add `rabbit_log_feature_flags` log category
rabbit_misc: Add `rabbitmq_related_module_attributes/0`
Log missing handle.exe warnings as such, closes #90
Make autoheal state transition timeout configurable
Autoheal: loser node may miss the "autoheal_safe_to_start" notification from the winner
Merge pull request #3 from nopjia/master
Merge pull request #38 from spring-operator/polish-urls-apache-license-master
Option to aggregate channel, queue and connection metrics
fix topic name to remove "topic" prefix
Update README.md
Minor doc updates
rabbit_definitions: ditto for global parameters
rabbit_definitions: ditto for permissions
rabbit_definitions:list_users/0: make key type match other similar fns
rabbit_feature_flags: Remove module part in local function calls
This feature flag log message should be a debug one
rabbit_definitions: export more functions
Merge pull request #2204 from rabbitmq/vesc-959-change-msg-to-debug
Chang proxy protocol error message to debug
Use $(JQ) instead of jq to reference the cli
Convert raft_entry_commit_latency to seconds & be explicit about unit
Update Docker image to latest dev
Merge pull request #8 from gmr/master
Merge branch 'master' into master
Merge pull request #9 from gmr/queue-name
Merge branch 'master' into queue-name
Merge pull request #10 from gmr/message-count
Merge pull request #2201 from rabbitmq/lrb-fix-powershell
Use the message-count domain
Ensure powershell.exe runs without profile
Use the queue-name domain
Change exchange from shortstr to the exchange-name domain
Merge pull request #42 from rabbitmq/rabbitmq-management-760
Include user in access logs
rabbit_variable_queue: Adapt to new rabbit_recovery_terms:open_table/1
rabbit_variable_queue: Normalize indentation
Update README.md
EUnit expects a list here
Avoid doubling leading slash that messed up request signing
Make sure instance metadata URLs are correct post uri_string refactoring
Export rabbitmq_aws_config:instance_role_url/0
Remove a debugging trace
This test breaks on OTP 21's uri_string
OTP 21 and 22 compatibility
Reformatted #2197 by @nyczol, references #2199
Reduce dependency on http_uri for warning-free OTP 23 compatibility
Ignore xrefr
Migrate away from http_uri for warning-free OTP 23 compatibility
Migrate away from http_uri for warning-free OTP 23 compatibility
Adapt to rabbitmq/rabbitmq-peer-discovery-common API changes
Adapt to rabbitmq/rabbitmq-peer-discovery-common API changes
Adapt to rabbitmq/rabbitmq-peer-discovery-common API changes
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
(c) bump
More links in README
Remove an assertion that doesn't make much sense post-#2195
Wait for virtual host recovery longer, ref #2195
vhost_SUITE: update expectations post-#2195
Merge pull request #2195 from rabbitmq/rabbitmq-server-2194
More type specs
Handle potential dets:open_file/2 errors with up to 10 retries
Update rabbit_recovery_terms.erl
Cuttlefish schema: introduce socket_writer.gc_threshold
Ignore ./sbin and ./escript
rabbit_writer state: gc_threshold => writer_gc_threshold, references #343
rabbit.gc_threshold => rabbit.writer_gc_threshold, references #2182
amqp_client.gc_threshold => amqp_client.writer_gc_threshold
Merge pull request #762 from rabbitmq/rabbitmq-management-761
Drive by change: reduce cyclomatic complexity highlighted by linter
Drive by change: address a couple of linter warnings
Add support for queue_type argument
Merge branch 'velimir-cmd-channel'
Error handling around command channel
Merge branch 'cmd-channel' of https://github.com/velimir/rabbitmq-federation into velimir-cmd-channel
Pass xref on OTP 23 [master]
Compile on OTP 23 [master]
Bump grafana version to latest stable since flant-statusmap-panel v0.2.0
Bump OTP to latest stable & RabbitMQ to latest dev in Dockerfile
Merge branch 'nyczol-configurable_gc_threshold'
Merge branch 'nyczol-configurable_gc_threshold'
Merge branch 'nyczol-configurable_gc_threshold'
Introduce a fallback GC threshold value of 1GB
Bump default GC threshold to the same 1GB
Bump default GC threshold to 1GB
Bump default GC threshold to 1GB
Merge branch 'configurable_gc_threshold' of https://github.com/nyczol/rabbitmq-server into nyczol-configurable_gc_threshold
Merge branch 'configurable_gc_threshold' of https://github.com/nyczol/rabbitmq-erlang-client into nyczol-configurable_gc_threshold
Merge branch 'configurable_gc_threshold' of https://github.com/nyczol/rabbitmq-common into nyczol-configurable_gc_threshold
Merge pull request #62 from Gsantomaggio/master
Merge pull request #392 from rabbitmq/rabbitmq-cli-389-part2
Merge pull request #2188 from rabbitmq/rabbitmq-cli-389-part2
Rename to this commands name
Rename QQs to ClassicQs
Merge pull request #2187 from rabbitmq/lrb-apply-config-earlier
rabbitmq_prelaunch: Run rabbit_prelaunch_conf:setup/1 earlier
rabbitmq_prelaunch: Fix xref errors
Introduce rabbitmq-queues check_if_node_is_mirror_sync_critical
More support functions for rabbitmq/rabbitmq-cli#389
Rmove $
Merge pull request #344 from rabbitmq/lrb-mqtt-stomp-start-cluster
Review README Connect
Review README clean
Review README
Add details README PV
Add details README
Add details
Add and example using KIND
Merge pull request #345 from rabbitmq/lrb-remove-generated-config-dir
Merge pull request #74 from rabbitmq/rabbitmq-trust-store-73
Make sure to update certificate store even after fetching no certificates
Correct log message formatting
Be more defensive when refreshing certificates
Cosmetics
Remove RABBITMQ_GENERATED_CONFIG_DIR
unit_inbroker_parallel_SUITE: Fix use of `?config()`
Merge pull request #2185 from rabbitmq/qq-aux-eval-changes
Fix rabbit_fifo tests after aux eval/tick changes
rabbit: Notify systemd after marking RabbitMQ as ready
packaging: Don't load rabbitmq-env from init scripts
Merge pull request #759 from rabbitmq/rabbitmq-management-758
Fix misplaced brace
rabbitmq-tools.mk: Add `sync-gitignore-from-master` helper
Update rabbit_fifo with Ra aux changes
clustering_management_SUITE: Adapt behavior to pre-prelaunch nodes
stop_command.ex: Read PID file before stopping the node
Merge branch 'lrb-delete-federation-exchange'
Merge pull request #99 from rabbitmq/delete-federation-exchange
Merge pull request #391 from rabbitmq/rabbitmq-cli-389-part1
Merge pull request #2183 from rabbitmq/rabbitmq-cli-389-part1
Add MQTT and STOMP port calc to start-cluster
Ensure list_local_quorum_queues works
Update rabbitmq-components.mk
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Tests for the CLI part of rabbitmq-queues check_if_node_is_quorum_critical
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
A typo
Git: Ignore copied CLI
Introduce `rabbitmq-queues check_if_node_is_quorum_critical'
Initial tests for rabbit_quorum_queue:list_with_minimum_quorum/0
Drive-by change: correct a typo
rabbit_{amqueue,quorum_queue}: add several listing and sampling functions
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Git: Ignore copied CLI
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Locate Umbrella relative to $(APPS_DIR)/my_app as well
rabbit_env: Fix typo in comment about Dialyzer
rabbit_env: Fix Dialyzer warnings
quorum_queue_SUITE: Verify rabbit_ct_helpers:run_steps() return value
Filter by vhost for federated queues
add test that fails for queue
make garbage collector threshold configurable
make garbage collector threshold configurable
make garbage collector threshold configurable
Merge pull request #110 from rabbitmq/rabbitmq-server-script-replacement
Merge pull request #35 from rabbitmq/rabbitmq-server-script-replacement
Merge pull request #382 from rabbitmq/rabbitmq-server-script-replacement
Merge pull request #2142 from rabbitmq/rabbitmq-server-script-replacement
Merge pull request #337 from rabbitmq/rabbitmq-server-script-replacement
rabbit_lager: Use log levels from prelaunch context
Move most of shell scripts to Erlang code
Merge pull request #2181 from rabbitmq/rabbitmq-server-2044
Load `rabbit_env` context to know about node configuration
Make tests that mess with node or quorum state sequential
include/rabbit.hrl: Move Erlang/OTP required versions to `rabbitmq_prelaunch`
rabbitmq-dist.mk: Empty `$(DIST_AS_EZS)` to distribute plugins as dirs
rabbitmq-run.mk: Don't run rabbitmq-plugins(8) to enable plugins
rabbitmq-dist.mk: Fix concurrent runs of `make {,test-}dist` and `make install-cli`
rabbitmq-dist.mk, rabbitmq-run.mk: Copy scripts & escripts
rabbitmq-dist.mk: Create an .ez archive for `rabbit` too
Add `rabbit_log_prelaunch` log category
rabbit_env: New module to prepare context based on environment
Rename a test file
Clarify the intent
Use vhost to delete federated exchange
Merge branch 'Gsantomaggio-add_events'
Merge branch 'Gsantomaggio-add_post_parameters'
Introduce a supervision tree for node monitoring
Ensure syslog application is started when used as backend
Wording
Naming, take two
Naming
Merge pull request #42 from antondalgren/master
Added missing comma in configuration example
Code formatting
Code formatting
Rename source, add test
Add headers to the post method missing documentation
Add headers to the post method
Add more info to the event
Merge pull request #41 from rabbitmq/papugamichal-support-predefined-jwt-section-as-additional-scope-source
Set `$RABBITMQ_SCRIPTS_DIR` when calling CLI
Makefile: Don't copy rabbit's `ebin` and `priv` dirs to install dir
Makefile: cuttlefish(1) is gone
packaging: Cleanup of Debian and RPM packages
packaging: Remove standalone package
mix.exs: Explicitly list `goldrush` and `lager` as dependencies
Makefile: Don't remove/recreate files if source and target are equal
`wait` command: Wait for the system process to appear
rabbitmq-dist.mk: Ensure `make test-dist` is not always out-of-date
Move up aud/scope binary to array conversion
Polish extra scopes source tests
rabbit_misc: Use PowerShell to check process aliveness on Windows
rabbitmq-build.mk: Don't add Elixir lib dir to `$ERL_LIBS`
rabbit_mnesia: Be more flexible in is_virgin_node()
rabbit_mnesia: Do not include `rabbit.hrl`
unit_inbroker_non_parallel_SUITE: Skip log file test if dir writable
scripts/rabbitmq-env.bat: Replace `where.exe` by a PowerShell command
Add events POC
Make this code less unorthodox, take 2
Make this code less unorthodox, take 1
Resolve PR comments - rename variables.
rabbit_misc:append_rpc_all_nodes/4: wrap non-list return values
Move the __inputs partial out of the Grafan dashboards dir
Publish Erlang-Distribution Grafana dashboard to grafana.com
Implement support for gathering scopes from predefined JWT section and combine them with existing ones in post_process_payload () method. Create unit_SUITE and system_SUITE test cases.
rabbit_ct_broker_helpers: Run `make test-dist` first
rabbit_ct_broker_helpers: Bump node start wait timeout to 3 minutes
rabbit_ct_broker_helpers: Set `$RABBITMQ_KEEP_PID_FILE_ON_EXIT`
rabbit_ct_broker_helpers: Use PowerShell to kill a process on Windows
rabbit_ct_broker_helpers: Enable debug logging for rabbitmq_prelaunch
rabbit_ct_config_schema: Use rabbitmq_prelaunch_conf to generate conf
rabbit_ct_helpers, rabbit_ct_broker_helpers: Scripts are in the plugin being tested
Drop Visualise in Erlang-Memory-Allocators dashboard description
Publish Erlang-Memory-Allocators Grafana dashboard to grafana.com
Drive-by change: return a check failure error
Drive-by chane in check_local_arlarms: return an error here
Rename two command files to follow our convention
Merge pull request #21 from rabbitmq/rabbitmq-peer-discovery-etcd-20
Only start heartbeat when backend configured
Merge pull request #12 from rabbitmq/rabbitmq-peer-discovery-etcd-20
Merge pull request #38 from rabbitmq/rabbitmq-peer-discovery-etcd-20
Version control descriptions for all our grafana.com dashboards
Publish RabbitMQ-Quorum-Queues-Raft Grafana dashboard to grafana.com
Decrease load on qq deployment
Add auto-generated test rabbitmq_management.schema
Bump RabbitMQ to latest alpha
Move BACKEND_CONFIG_KEY definition to a header
Merge pull request #757 from rabbitmq/rabbitmq_management-627
Only run healthcheck when backend is configured
Export function to facilitate config
Update API docs with existing behavior
rabbit_ct_helpers: Find Elixir in the module
Merge pull request #117 from rabbitmq/rabbitmq-web-stomp-116
Merge pull request #142 from rabbitmq/rabbitmq-web-stomp-116
Naming
examples/minikube: adapt README to latest Make file changes
Make default minikube example make target wait for cluster formation
Merge pull request #2176 from rabbitmq/duplicated-consumers-metric
Take consumers from `handle_tick` arguments, as stats from `infos` are not yet updated
Squash a compiler warning
Remove duplicated consumers metric in quorum queues
feature_flags_SUITE: Cleanup other plugins in `my_plugin/plugins`
feature_flags_SUITE: Use `ff_from_testsuite` wherever possible
feature_flags_SUITE: Check feature flag support state
Add support for client certificate authentication
Add case for undefined state, as this will be the case when errors / exits are raised early
Export ssl_login_name
List formatting
Merge pull request #60 from rabbitmq/convert-examples-to-minikube
RabbitMQ 3.6 is out of support, don't mention it
Wording
Final README touches
Don't overpromise
Ditto
Ditto
Moar README edits
Use a smaller VM disk
feature_flags_SUITE: Just set the extra plugin path
Rename the target that installs Minikube
rabbit_ct_broker_helpers: Prepend regular plugins dir to `rmq_plugins_dir`
More README edits
Move Minikube Make file under examples/minikube
More README edits
Rearrange READMEs to fit the new example structure
Add run-in-minikube make target that resolves all deps
Ensure example manifests work in latest Minikube
Merge pull request #88 from rabbitmq/mgmt-less-improvements
Merge pull request #753 from rabbitmq/mgmt-less-improvements
Merge pull request #2165 from rabbitmq/mgmt-less-improvements
A follow-up to f502aa7f3415271e02da43dbaa4cce6c7bddc31b, rabbitmq/rabbitmq-server#2171
Adapt another test for rabbitmq/rabbitmq-server#2171
Merge pull request #59 from linehrr/master
Update Prometheus & Grafana to latest stable
Bump RabbitMQ to latest dev version + master
Use pgpkeys.uk instead of pgpkeys.eu
If one of the OpenSSL GPG keys does not load, do not fail
Update OTP to v22.1.8
Update OpenSSL to latest 1.1.1 release
fixed statefulSet deployment to be compatible to new k8s definition
Use a more compact h target view
Update metrics doc with new queue metrics, improve formatting
Merge pull request #20 from rabbitmq/fix-queue-metrics-refs
rabbit_ct_broker_helpers: Use rabbit_channel:start_link/11 again
rabbit_channel: Restore start_link/11 for backward compatibility
Add test for authn/authz context propagation
A typo
Update this test to use a consumer in a separate process
Fix queue_metrics references
Merge pull request #2167 from rabbitmq/basic-get-sac-qq
Adapt test_channel/0 to rabbitmq/rabbitmq-server#2169
Merge pull request #223 from rabbitmq/velimir-avoid-get-amqp-params-call
Merge pull request #755 from velimir/replace-chsrc-with-authz-context
Merge pull request #2172 from rabbitmq/velimir-avoid-get-amqp-params-call
Merge pull request #128 from rabbitmq/velimir-amqp-params-for-direct-channel
Make it possible to override client ID in some tests
Remove log statement
Continuation to #2169 by @velimir
Adapt a test for rabbitmq/rabbitmq-server#2171
Merge pull request #2171 from rabbitmq/rabbitmq-server-2170
Add one more definition import test case
Skip importing queues and exchanges with invalid names
Use assertMatch from EUnit here
system_SUITE: Bump timetrap from 1 to 2 minutes
dynamic_ha_SUITE: Ensure conditions for `rebalance_exactly` are met
Reject basic.get operations on quorum queues with single active consumer enabled
Merge branch 'avoid-get-amqp-params-call' of https://github.com/velimir/rabbitmq-server into velimir-avoid-get-amqp-params-call
pass authorisation context instead of channel source
pass amqp parameters for direct channel to avoid sync call
avoid synchronous call to a connection process from a channel process
Forward more functions moved to rabbit_misc
Merge pull request #340 from rabbitmq/lrb-epmd-starter-tweak
Fix a rabbit_mgmt_util extraction leftover
Extract parse_bool/1 and parse_int/1 from rabbit_mgmt_util
Merge pull request #388 from rabbitmq/lrb-stacktrace-tweaks
Ensure stack trace is always printed for certain errors
Merge pull request #750 from rabbitmq/rabbitmq-management-749
Merge pull request #387 from rabbitmq/rabbitmq-management-749
Merge pull request #2160 from rabbitmq/rabbitmq-management-749
Merge pull request #89 from rabbitmq/rabbitmq-management-749
Merge pull request #339 from rabbitmq/rabbitmq-management-749
Handle case where import file does not exist or is zero-sized.
Add newline
ctl export_definitions: fail validation w/o positional args
Forward functions extracted into rabbit_misc
Option to list queue totals when statistics are disabled
Add format/1 for classic queues and totals/type_specific info for all types
Format queue info proplist
rabbit_definitions:import_parsed/{1,2}: support proplists
Finish ctl import_definitions
DefaultOutput: propagate {:error, exit_code, message} tuples
Initial version of rabbitmqctl import_definitions
Refactoring for CLI-driven definition import
Merge pull request #342 from rabbitmq/rabbitmq-common-341
Special-case x-queue-type classic/undefined
Merge pull request #2146 from rabbitmq/qq-local-delivery
Merge pull request #87 from rabbitmq/rabbitmq-management-agent-86
Merge pull request #17 from MarcialRosales/master
Be extra defensive when inferring how many file descriptors are used
rabbit_fifo_SUITE: assert less strictly
Document all metrics exposed via the prometheus endpoint
Reintroduce replicas information
Log spam
Definition import: refactor for future ctl command
Definition import: refactor for future ctl command
Reformat one test case
A typo
Cosmetics
This invariant is impossible here
Definition export: alias rabbit_version as rabbitmq_version
Introduce rabbitmqctl export_definitions [path]
epmd-starter improvements
New command group section: definitions
Cosmetics
Merge pull request #2163 from rabbitmq/consumer-timeout-schema
Add validator
Add schema test
Add consumer_timeout to config schema
Export general and topic permissions
Inline
Export explicitly defined bindings
Export runtime parameters and policies
Definition export WIP
Merge pull request #2162 from rabbitmq/rabbitmq-server-2161-empty-metadata-on-upgrade
Set virtual host metadata defaults on upgrade
Merge pull request #2154 from rabbitmq/improve-error-handling-qq
Normalize policy definitions before merging them
A typo
Memory breakdown: clarify
Use decent language to refer to follower mirrored queue replicas
Joint definition import
Support pluginless definition import in config schema
Move definition import machinery to core
Extract rabbit_definitions from rabbitmq-management
Move some helpers from rabbitmq-management
Merge pull request #748 from rabbitmq/remove-direct-login-route
Ignore test/config_schema_SUITE_data/schema/
Update README.md
Remove direct login route
Merge pull request #217 from velimir/cache-topic-access
Merge pull request #216 from velimir/convert-cache
limit topic permission cache size
cache topic permission access
cache topic translation results
use separate channel for command operations
Merge pull request #2159 from rabbitmq/rabbitmq-server-2158
Take infinity timeout into account
Merge pull request #215 from rabbitmq/rabbitmq-mqtt-214
Update .travis.yml
Use a topic name that has R and W permissions
Downgrade QoS 2 to QoS 1 when sending Last Will
Merge pull request #84 from rabbitmq/exometer-slide-remove-orddict
Replace use of orddict with map
hipe_compile: deprecate
Warn about HiPE deprecation
Merge pull request #2155 from rabbitmq/format-reason-in-rabbit_reader
rabbit_reader: Format `Explanation` before passing it
Refactor to use ranch:start_listener/5
Refactor to use ranch:start_listener/5
Merge pull request #117 from rabbitmq/rabbitmq-auth-backend-ldap-116
Ensure results match expected rabbit_authz_backend behaviour
Merge pull request #58 from rabbitmq/lrb-add-github-templates
Add GitHub issue and PR templates
Formatting
Add make target for import-friendly rabbitmq-exporter_vs_rabbitmq-prometheus dashboard
Bump to latest RabbitMQ 3.9.x alpha, OTP & PerfTest stable
Handle errors and timeouts in local queries
Revert "Update rabbitmq-components.mk"
Update rabbitmq-components.mk
Merge pull request #2153 from rabbitmq/remove-rabbit-fifo-assertion
Make intervals consitent with other dashboards
Compare rabbitmq-exporter to rabbitmq-prometheus
rabbit_fifo: remove assertion
rabbit_mqtt_collector: Pass several node IDs to ra:query_leader()
Merge pull request #141 from rabbitmq/rabbitmq-stomp-140
Fix test by adding hide_server_info to schema
Add support for hide_server_info
Finish Erlang-Memory-Allocators dashboard v1
Handle timeouts in info calls so we still report all other stats
Make sure raft.segment_max_entries is a power of 2 in examples
Add Erlang-Memory-Allocators Grafana dashboard WIP
Merge pull request #2149 from rabbitmq/rabbitmq-server-2140
Make a bunch of Ra settings configurable rabbitmq.conf
Merge pull request #2148 from rabbitmq/rabbitmq-cli-386
Correctly pass Ra leader here
Make rabbit_amqueue:is_unresponsive/2 QQ aware
Sanitize node and virtual host names
Sanitize node and virtual host names
Merge pull request #19 from rabbitmq/rabbitmq-peer-discovery-common-11-followup
Merge pull request #36 from rabbitmq/rabbitmq-peer-discovery-common-11-followup
Merge pull request #32 from rabbitmq/rabbitmq-peer-discovery-common-11-followup
Ensure rabbit_peer_discovery_httpc:maybe_configure_inet6 is called
Ensure rabbit_peer_discovery_httpc:maybe_configure_inet6 is called
Ensure rabbit_peer_discovery_httpc:maybe_configure_inet6 is called
Also use local option for log effects
Send QQ deliveries as local
Merge pull request #2141 from rabbitmq/reserve-qq-file-handles
Merge pull request #336 from rabbitmq/reserve-qq-file-handles
Merge pull request #56 from Gsantomaggio/master
Add ipv6 call in the k8s module
Merge branch 'master' into reserve-qq-file-handles
Merge pull request #35 from rabbitmq/rabbitmq-peer-discovery-consul-34
Merge pull request #11 from rabbitmq/rabbitmq-peer-discovery-k8s-55
If inet6 is defined in inetrc, use it in httpc
Whitespace
Merge pull request #385 from Gsantomaggio/master
Add support for IPv6
Squash a compilation warning
Compile
Remove a debug log message
Allow service metadata to be defined
RPM: New targets to build RHEL8 packages
Make it possible for config entries to not have an env variable
(c) year
Merge pull request #384 from rabbitmq/rabbitmq-cli-383
Add erlang formatter function heads
Typos
Wording
Merge pull request #2145 from rabbitmq/head-timestamp-test
Make test more resilient to timing changes
Add RabbitMQ-Overview screenshots published to grafana.com
Bump Erlang/OTP & RabbitMQ versions to latest
Bump Prometheus & Grafana versions to latest stable
Rename RabbitMQ-Raft to RabbitMQ-Quorum-Queues-Raft
Display RabbitMQ & Erlang/OTP version on RabbitMQ-Overview dashboard
Do not limit max CPU utilisation to 100%
Merge pull request #338 from Haster2004/little-fix
add forgotten ldap type
Merge pull request #2138 from rabbitmq/optimise-qq-memory-use
Merge pull request #2143 from rabbitmq/mark-down-queue-core-metrics
Travis CI: test on Ubuntu Bionic, OTP 22.1
Use distribution name of "bionic" here
Use distribution name of "bionic" here
Use distribution name of "bionic" here
Travis CI: test on Ubuntu Bionic, OTP 22.1
Travis CI: test on Ubuntu Bionic, OTP 22.1
Travis CI: test on Ubuntu Bionic, OTP 22.1
Travis CI: test on Ubuntu Bionic
Travis CI: test on Ubuntu Bionic
Merge pull request #32 from rabbitmq/rabbitmq-tracing-31
Merge pull request #2144 from rabbitmq/await_boot_finish_avoid_infinity_division
Catch error when getting trace file info
Handle infinity timeout when awaiting boot finish
Update core metrics with down state
rabbit_fifo: Optimise peak memory use
Limit memory & disk units to 2 decimals on RabbitMQ Overview
Revert "Merge pull request #2136 from rabbitmq/mark-down-queue-core-metrics"
Merge pull request #2136 from rabbitmq/mark-down-queue-core-metrics
rabbit_fifo_int_SUITE: stub out FHC reservation calls
More test updates
Update tests for rabbit_fifo:state_enter/2
Naming
Naming
Merge branch 'master' into mark-down-queue-core-metrics
rabbit_fifo:state_enter/2: restore catch-all clause
Reserve file handles in quorum queues
Mention queue master locator problem fixed in 3.8.1
Reserve the 3 fixed ra file handles
Accept content type parameters such as text/plain;version=0.0.4
Merge pull request #54 from barryib/automount-sa-api-token
automount service account API token
Reserve file handles for quorum queues
Test reserve file handles on the cache
Merge pull request #114 from rabbitmq/lrb-warn-settings
Add a Dockerfile for running integration tests
Add a Dockerfile for running integration tests
Merge pull request #35 from rabbitmq/ignore-queue-master-locator
Merge pull request #2139 from rabbitmq/ignore-queue-master-locator
Add warning messages when configuration values do not make sense
Allow multi RabbitMQ cluster selection when comparing Erlang Distribution
Add screenshots used for RabbitMQ-Overview on grafana.com
Add descriptions to Grafana dashboards
Add screenshots used for Erlang-Distributions-Compare on grafana.com
Rename vm to host, fix CPU expressions
Ignore queue master location
Ignore queue master locator
Finish Erlang-Distributions-Compare GRafana dashboard
Make Erlang-Distribution-Compare dashboard 15"-friendly
Set all datasources to null, simplify dashboard tags
Use RabbitMQ 3.8 image on this branch
Merge branch 'wawa0210-master'
beta.kubernetes.io/os is deprecated in favor of kubernetes.io/os
Bind rabbitmq statefulset to linux nodes to avoid Windows scheduling on kubernetes cluster includes linux nodes and windows nodes
Merge pull request #126 from primait/timerRef-dont-match-with-state
rabbit_feature_flags: Prevent load of the module on pre-feature-flags nodes
Optimise QQ memory use
don't check timerRef when handling timeout this avoids a `no function clause matching` error that prevents connection restart
quorum_queue_SUITE: Use rabbit_ct_broker_helpers:stop_node/2
python_SUITE: Skip quorum queue test if they are unavailable
Update core metrics with down state
Improve unit label in check_certificate_expiration
Merge pull request #139 from rabbitmq/rabbitmq-stomp-138-x-queue-type-support
Wait for a bit longer
rabbit_feature_flags: define on_load/1 in non-test environments
More #2133-related wording changes
Improve on #2133 wording a bit
rabbit_feature_flags:on_load/1: EUnit test env compatibility
Merge branch 'prevent-rabbit_feature_flags-load-on-old-node'
Merge pull request #381 from rabbitmq/check-certificates
Merge pull request #2133 from rabbitmq/check-certificates
Clarify that the certificate commands are node-local
Wording
diagnostics check_certificate_expiration: wording, new default
Simplify these assertions a bit
Squash a warning
Add test for certificate expiration verification
Remove unused variable
Add flag usage in check_certificate_expiration
Doc: man pages for certificate commands
Check certificates command
rabbit_feature_flags: Prevent load of the module on pre-feature-flags nodes
rabbit_feature_flags: Improve comments around 3.7.x pre-feature-flags nodes
Fix a couple more inconsistencies in Erlang-Distributions-Compare
Fix Erlang-Distributions-Compare network panels title
Fix Erlang-Distributions-Compare title, reset time_options
Compare different Erlang Distributions
Add screenshots that have been used for RabbitMQ-PerfTest
Add hidden file to quickly activate shell autocompletion
Remove shared __requires & update-dashboards make target
Make license line in startup banner more specific
Support x-queue-type argument
Update tags for all Grafana dashboards
Add RabbitMQ-Perftest Grafana dashboard & wire all PerfTest instances
Extract __requires from Grafana dashboards, template all datasources
Merge pull request #2131 from rabbitmq/rabbitmq-server-2130
Format host atoms as strings
Error handling improvements in rabbit_epmd_monitor:check_epmd/1
Update OTP, RabbitMQ & PerfTest images to latest versions
Add make targets for import-friendly Grafana dashboards
Extract __inputs from Grafana dashboards
Minor README updates
README-for-packages: more doc links
README-for-packages: updates for 3.8
Merge pull request #742 from rabbitmq/rabbitmq-management-741
Merge pull request #740 from rabbitmq/rabbitmq-management-739
Merge pull request #34 from rabbitmq/rabbitmq-management-739
is_classic should return true if x-queue-type not present
Ensure all data is read for multipart data
Add test that fails for rabbitmq-management#739
Allow setting content-type header
Certificates command
Merge pull request #2127 from luos/fix_healthcheck_partition_result
Squash a warning
fix health check returning ok in case of partition
Fix typo
Merge pull request #2126 from rabbitmq/ac-polish-manpages
Put parameter management description in the right place
Minor fixes and polishing in rabbitmq-diagnostics manpage
A follow-up to  7e2021c588784c2c190f3318b94344cb048d3e68
Clearer log message when peer discovery yields an empty list
More annotations for the example manifest
man pages: bump revision dates
Merge pull request #2123 from rabbitmq/ctl-diagnostics-docs-update
More rabbitmqctl(8) edits
rabbitmqctl(8): eliminate all man(1) warnings
rabbitmqctl(8): drop some misplaced .Oc macros
rabbitmqctl(8): correct a number of formatting issues
rabbitmqctl(8): add a few missing .Bls
rabbitmqctl(8): remove some extraneous .Els
rabbitmq-diagnostics(8): correct fomatting of optional args
Docs: man formatting
Remove extra .El macros
Merge pull request #33 from rabbitmq/lrb-use-tcp_config
Do not use deprecated configuration value
Docs: add missing diagnostics and ctl commands
Add option to disable stats in management to overview example
Bump OTP to latest stable & RabbitMQ to latest 3.8 dev
rabbitmq-queues(8): formatting
rabbitmq-queues(8): use list formatting suggested by @dumbbell
More rabbitmq-queues(8) man page edits
Merge pull request #137 from rabbitmq/rabbitmq-stomp-136
Remove use of dict: module
Update README.md
Expose endpoint path configuration, references #8
amqp10_SUITE: Don't ack in `no_ack` mode
Merge branch 'rabbitmq-prometheus-8'
New style configuration schema for listeners
Minor Prometheus listener description edits
Cross-linking for newly added man pages
quorum-queues(8): list arguments, add examples, wording
Move quorum_status to rabbitmq-queues, add basic tests
rabbitmq-queues [add, remove]: doc wording
Expand rabbitmq-queues shrink argument docs
Expand rabbitmq-queues grow argument docs
rabbitmq-queues(8): document rebalance command args
Add missing usage arguments for rabbitmq-queues rebalance
Merge pull request #2121 from rabbitmq/cli-docs-update
Merge pull request #42 from rabbitmq/rabbitmq-event-exchange-41
Merge pull request #83 from rabbitmq/format-queue-type
Merge pull request #380 from rabbitmq/rabbitmq-cli-handle-empty-output-in-json-stream
Handle empty output in JSON stream
Ensure added/removed first binding event
Format queue type field
More startup banner tweaks suggested by @gerhard
New man pages for rabbitmq-upgrade and rabbitmq-queues
Merge pull request #2119 from rabbitmq/queue-rate-fix
Merge pull request #2120 from rabbitmq/startup-banner-improvements
Rearrange startup banner items
Startup banner improvements
Fix regression where queue exchange rates were too high
Update README.md
A typo
Wording
Make the datasource configurable for all dashboards
log_tail_stream_command_test: Bump stream duration to 15 seconds
Remove rabbitmq.config.example from packages
docs/rabbitmq.config.example is Tuesday's gone
Correct command_line_arguments delegation in report
Merge pull request #378 from rabbitmq/consume-events-command
Merge pull request #2114 from rabbitmq/consume-events-command
Update test expectations
diagnostics consume_event_stream: --quiet by default
Merge pull request #379 from rabbitmq/command-line-arguments-command
Wording
Move command_line_arguments to rabbitmq-diagnostics
Merge pull request #2117 from jeckersb/binary_refs_race
Merge pull request #2116 from rabbitmq/rabbitmq-server-2084
Set ERL_MAX_ variables in rabbitmq-env.bat so they will be available in rabbitmq-server.bat and rabbitmq-service.bat
Merge pull request #210 from rabbitmq/rabbitmq-mqtt-java-test-suite-dependency-upgrades
rabbit_diagnostics: handle race in binary_refs
Command line arguments command
Allow setting ERL_MAX_PORTS in rabbitmq-env-conf.bat
Merge remote-tracking branch 'origin' into consume-events-command
Diagnostics: test consume_event_stream_command
Install a new CLI, `rabbitmq-upgrade`
Modernize Java test suite
Add scripts for newly introduced rabbitmq-upgrade
Merge pull request #375 from rabbitmq/post-upgrade-command
rabbitmq-upgrade: basic tests for post_upgrade, polishing
Queue master balancing: log the "no-op" case at info level
Merge pull request #209 from rabbitmq/lrb-java-test-refactor
Remove two unnecessary class variables
Ensure each test has a meaningful client id
diagnostics: consume_events_stream => consume_event_stream
Introduce a formatter for infinite streams of JSON objects
Remove another snowflake topic
Merge pull request #377 from Whitespirit0/patch-1
Restore rabbitmq-cli specific test directions
Consume events stream command
Event handler for consume events command
Remove another snowflake topic
Remove "mid" topic and replace with test-topic
Update set_parameter test to match new output
Fix set_parameter command output
Use per-testcase instance of TestMqttConnectOptions
Formatting
Merge pull request #208 from rabbitmq/lrb-fix-java-tests
Fix willIsRetained test
Fixed the lastWillNotSentOnRestrictedTopic test
Increase debug level
tools/terraform: Erlang 22 is available on Debian Stretch
Java integration suite: reduce use of shared mutable state
Merge pull request #2113 from Whitespirit0/patch-1
Replace additional.config file by advanced.config
An attempt to avoid Paho Java state exceptions
Ignore IDEA project files
New Paho version does not handle null passwords
Bump RabbitMQ and Paho clients used in tests
Merge branch 'vanseverk-issues/2085-Friendlier-behavior-when-configuration-setting-is-unknown-clearer-error-message'
Wording
Added more helpful message in case the config file failed to generate
Post upgrade command
Debian: support Erlang 22.x
Fix queue type split
Merge pull request #738 from rabbitmq/rabbitmq-management-737
Small update to password/password_hash docs
Merge pull request #736 from rabbitmq/rabbitmq-management-735
Two more management.ssl.* options
Merge pull request #49 from st3v/master
Refer to actual service name in example pods
Remove trailing spaces from example
Merge pull request #2108 from rabbitmq/rebalance-all-queues
sync_detection_SUITE: Wait for sync for 90 seconds
Return number of queues per type
Merge pull request #374 from rabbitmq/rebalance-quorum-queue
Use pretty table formatter
feature_flags_SUITE: Use ";" as plugin path separator on Windows
feature_flags_SUITE: Bump timetrap from 10 to 15 minutes
dead_lettering_SUITE: Bump timetrap from 3 to 8 minutes
consumer_timeout_SUITE: Bump timetrap from 3 to 7 minutes
clustering_management_SUITE: Bump testcase timetrap to 15 minutes
clustering_management_SUITE: Just wait for PID file content to change
clustering_management_SUITE: Account for the fact that the PID file is removed
rabbit_ct_helpers: Attempt at supporting Unicode command output
rabbit_ct_broker_helpers: Remove debug log message
feature_flags_SUITE: Increase a timer:sleep/1 to help with timing issues
Merge pull request #373 from rabbitmq/rebalance-quorum-queue
Merge pull request #2106 from rabbitmq/rebalance-all-queues
Test rebalance
rabbitmq-run.mk: Fix generated rabbitmq-server configuration
Refactor rebalance of mirrored and quorum queues
Rebalance mirrored queues
Rebalance quorum queues
test/feature_flags_SUITE_data/my_plugin: Convert symlinks to Makefiles
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Change Ra dep back to git master
README updates
Patch 2x persistent XSS in HA policy and queue parameters
README updates
(c) year
Patch persistent XSS in vhost on the limits page
Merge pull request #734 from rabbitmq/rabbitmq-management-720
Ensure range type is set for new churn stats
Rebalance command
Update README.md
Update README.md
Update README.md
Update README.md
rabbit_ct_broker_helpers: Support Windows in kill_node()
Add package changelog entries for 3.8.0-rc.1
Merge pull request #2100 from tomyouyou/master
force to flush segments when recovering a message with last non-CleanShutdown.
Merge pull request #7 from rabbitmq/describe-all-rabbitmq-overview-panels
Finish adding descriptions to all RabbitMQ-Overview panels
Merge pull request #207 from rabbitmq/rabbitmq-mqtt-206
Rename sparkplug_b to sparkplug
Disable Sparkplug support by default
Use AMQP topic name in translation test
Merge pull request #2096 from tomyouyou/master
Review incoming messages nodes panels with @michaelklishin
Review nodes panels description with @michaelklishin
unit_inbroker_non_parallel_SUITE: Adapt `log_file_fails_to_initialise_during_startup` to Windows
Merge pull request #2097 from rabbitmq/rabbitmq-website-502
Modify html docs to not use smart quotes
unit_inbroker_non_parallel_SUITE: Support `disk_monitor_enable` testcase on Windows
unit_inbroker_non_parallel_SUITE: Mark log files as writable before deleting them
unit_SUITE: Use `;` as the plugins path separator on Windows
Start adding missing descriptions to RabbitMQ-Overview panels
Correctly set topic permissions for sparkplug B prefix, and use correct topics in test
Use new translation funs in library
Topic translation CT tests pass
Add CT tests for topic translation funs, failing currently
Use string: functions rather than regexes
Start working on MQTT/AMQP translation funs that take sparkplug into account
Add failing test involving MQTT/Sparkplug B and AMQP interop
Fix test for mqtt.sparkplug_b
Add failing test for mqtt.sparkplug_b schema element
Merge pull request #6 from rabbitmq/revise-metric-types-and-naming
Update Grafana dashboards to account for metric name changes
Fix build & identity info metrics
Clarify the type of sockets we report metrics for
Bump RabbitMQ & PerfTest Docker image versions
Use the correct metric types & capture perspective when naming
update ra dep
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
call "add_to_journal" before "maybe_flush_pre_publish_cache"
Merge pull request #5 from rabbitmq/convert-all-time-metrics-to-seconds
Revert erlang_uptime_seconds to gauge, not counter
Merge pull request #2095 from rabbitmq/disk-monitor-and-long-paths-on-windows
Convert all time metrics to seconds
rabbitmq-run.mk: Set $RABBITMQ_BASE
rabbitmq-run.mk: Bump `rabbitmqctl wait` timeout from 10 to 60 seconds
rabbitmq-dist.mk: Sort files inside the .ez archives
Merge pull request #43 from rabbitmq/lrb-add-github-templates
Add GitHub issue and PR templates
Merge pull request #4 from rabbitmq/review-global-labels-with-brian-brazil
Use standard naming for metrics expected from the client library
rabbitmqctl.ex: Don't call System.stacktrace()
Merge pull request #2092 from tomyouyou/master
Rename process-related metrics to stay closer to conventions
rabbitmq-dist.mk: Ensure rsync(1) arg is a Unix-like path
Finish updating Erlang-Distribution dashboard to use new info metric
Bump Grafana Docker image to latest stable
Start updating Erlang-Distribution dashboard to use new info metric
Finish updating RabbitMQ-Raft dashboard to use the new info metric
Start updating RabbitMQ-Raft dashboard to use new info metric
Clarify connections & channels help
rabbit_disk_monitor: Tell Win32 API to not enforce path limits to dir's argument
Merge branch 'master' of github.com:rabbitmq/rabbitmq-shovel-management
Use rabbit_mgmt_util:list_login_vhosts_names/2
rabbit_disk_monitor: Fix format string to correctly log an integer
Virtual host tags are comma-separated
rabbit_ct_broker_helpers: Ensure the generated config file is Unicode
rabbit_ct_helpers: Convert command to exec & its args to Unicode binary
Update HTTP API documentation with vhost metadata changes
Update HTTP API response samples in documentation page
Update rabbit_queue_index.erl
scripts/*.bat: Exit with CLI's exit status, not 1
rabbit_ct_helpers: Don't create symlink on Windows
Merge pull request #2091 from rabbitmq/remove-ra-hrl
Remove use of ra.hrl
Merge pull request #33 from rabbitmq/vhost-description
Merge pull request #204 from rabbitmq/vhost-description
Merge pull request #730 from rabbitmq/vhost-description
Merge pull request #371 from rabbitmq/vhost-description
Merge pull request #2080 from rabbitmq/vhost-description
Merge pull request #333 from rabbitmq/vhost-description
Handle vhost description and tags fields
remove unused header
Use `rabbit_vhost:list_names/0'
Use rabbit_vhost:list_names/0
rabbit_types:vhost/0 now delegates to vhost:name/0
Make virtual host record versioned
feature_flags_SUITE: Stop nodes if feature flags are unavailable
The vhost record moved to a versioned record in rabbitmq-server
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Merge pull request #732 from rabbitmq/lrb-clarify-user-admin
Typos
Merge pull request #48 from Gsantomaggio/change_ip_to_name
Merge pull request #2089 from rabbitmq/use-werl-on-windows-for-interactive-shell
scripts/rabbitmq-server.bat: Use `werl.exe` when user wants a shell
Merge pull request #2088 from rabbitmq/fix-rabbitmq-env.bat-filter_paths-quoting
rabbitmq-env.bat: Quote the expansion of %1 in `filter_path`
Merge pull request #2087 from rabbitmq/lrb-ensure-env-var-set-win32
Refer to rabbitmqctl.bat using .bat extension on win32
Set RABBITMQ_FEATURE_FLAGS_FILE_source=environment correctly on win32
Change from POD IP to POD Name
rabbitmqctl add_vhost: parse tags
Finish updating RabbitMQ-Overview dashboard to use the new info metric
Bump Prometheus & Grafana Docker images to latest stable
Continue updating RabbitMQ-Overview dashboard to use the new info metric
Merge branch 'master' into vhost-description
Add GitHub issue templates
Revert change to text on "Add user" page, add an informative popup if a user is modified
Merge branch 'master' into review-global-labels-with-brian-brazil
Update README.md
Mention `rabbitmq-diagnostics observer` as a CLI alternative
Update README.md
Remove redundant prometheus.yml config
Merge pull request #38 from rabbitmq/rabbitmq-auth-backend-oauth2-37-keycloak-support
Add management config settings to the symmetric key demo
Clarify that action can update an entity
Support Keycloak token format in post-processing
Add package changelog entries for 3.8.0-beta.7
Depend on credentials_obfuscation 1.1.0
A typo
Use credentials_obfuscation from Hex
Merge pull request #92 from rabbitmq/handle-refused-access
Gracefully handle refused access in session process
channel_source suite: remove an assertion that relies on unobfuscated password
Merge pull request #41 from rabbitmq/optimise-erlang-timers
Merge pull request #731 from rabbitmq/optimise-erlang-timers
Replace timer:send_after/3 by erlang:send_after/3
Replace timer:send_after/3 by erlang:send_after/3
Merge pull request #334 from rabbitmq/optimise-erlang-timers
Merge pull request #2082 from rabbitmq/optimise-erlang-timers
Merge pull request #94 from rabbitmq/rabbitmq-erlang-client-123-crypted-password-in-state
Merge branch 'codeadict-gen_server2_stop'
Switch to eunit macros for assertions
Add stop{1,3} functions to gen_server2
Replace timer:send_after/3 by erlang:send_after/3
Replace timer:send_after/3 by erlang:send_after/3
Obfuscate credentials for federated queues and exchanges.
Merge pull request #124 from rabbitmq/rabbitmq-erlang-client-123-crypted-password-in-state
Merge pull request #332 from rabbitmq/rabbitmq-erlang-client-123-crypted-password-in-state
Start using the new rabbitmq_identity_info metric to filter by cluster
Use a higher config_port when testing
Match build_info & identity metric type to the exported value
Replace global labels with build_info & identity_info metrics
assert_item/2: use ?assertEqual instead of matching
ctl add_vhost: suggest a comma-separated list of tags
ctl add_vhost: make it possible to provide a description
Merge pull request #2081 from rabbitmq/fix-consumers/1-when-queue-is-gone
Merge pull request #3 from rabbitmq/review-metric-naming-with-brian-brazil
Use different names for *_process_reductions_total metrics
Start obfuscating credentials for federated queue
channel_source_SUITE: Wait for channel termination
cluster_rename_SUITE: Bump timetrap from 8 to 15 minutes
rabbit_amqqueue: Return empty list in consumers/1 when the queue is gone
Fix test that fails when the metric is empty
rabbitmq-{build,run,tools}.mk: Pass several variables to sub-makes
rabbitmq-run.mk: No need to find erl_call(1)
rabbitmq-run.mk: Use GNU Make functions to prepare $(DIST_ERL_LIBS)
Makefile: Don't set `$(ELIXIR_LIB_DIR)` here
Makefile: Don't set `$(ELIXIR_LIB_DIR)` here
Makefile: Don't set `$(ELIXIR_LIB_DIR)` here
Bump jQuery to 3.4.1
Bump jQuery to 3.4.1
Merge pull request #2078 from rabbitmq/rabbitmq-server-2059-log-rotation-master
Remove short name formatting
Reorder elements in metric names & improve naming
Use past-tense in metrics that capture what happened
Increase Prometheus scrape to 15s & match across all metrics
Use new 'description' and 'tag' items on list vhosts
Review metric naming with @brian-brazil
Set cluster name via config
Use credentials obfuscation application
Use credentials_obfuscation module
Merge pull request #2075 from rabbitmq/configure-cluster-name
Mention cluster_name in rabbitmq.conf.example
Only send force_event_refresh events to classic queues
Merge branch 'master' into rabbitmq-erlang-client-123-crypted-password-in-state
Merge branch 'master' into rabbitmq-erlang-client-123-crypted-password-in-state
Make it possible to pre-configure cluster name via config
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Log file management suite: adapt to Lager 3.8
Config snippet tests: log output file paths
diagnostics log_tail_stream: remove a fragile test
Bump Lager to 3.8.0
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump Lager to 3.8.0
Merge pull request #40 from AntoineGagne/feature/attach-properties
rabbitmq-tools.mk: Fix tags counting in `commits-since-release`
Fix type specification
Add working properties
WIP: Add sketchy properties
WIP: Add attach properties
Update RabbitMQ version to latest alpha
Ensure that a request without auth header does not return a basic auth prompt
Add helper function that doesn't send an authentication header
Merge pull request #2 from rabbitmq/version-label
Fix test failure message description
Merge pull request #2072 from rabbitmq/mk-cuttlefish-upgrade
Bundle Cuttlefish 2.3.0 escript produced on Erlang/OTP 21.3
Log Cuttlefish command at debug level
Merge pull request #726 from rabbitmq/validate-disable-flags
Naming
Merge pull request #2062 from rabbitmq/queue_type_scaffolding
Validate flags to disable features on runtime
Add marker rabbit_queue_type behaviour
Merge pull request #2070 from rabbitmq/dialyzer-fixes
Dialyzer fixes
Makefile: Remove all useless bits
Merge pull request #3 from cthulhuology/empty_objects
Adding handling for empty objects
Remove duplicate filter
Merge pull request #2066 from rabbitmq/qq-persistent-stats
Publish messages_persistent
Label all metrics with Erlang and RMQ version
Add package changelog entries for 3.8.0-beta.6
Revert "Bump bundle cuttlefish to Kyorai/cuttlefish@fff866a3a22dc2a8f3d23aa13933b90542485728"
Bump bundle cuttlefish to Kyorai/cuttlefish@fff866a3a22dc2a8f3d23aa13933b90542485728
Merge pull request #2064 from rabbitmq/get-empty-qq
Merge pull request #724 from rabbitmq/disable-basic-http-auth
Merge branch 'master' into disable-basic-http-auth
Merge pull request #722 from rabbitmq/mgmt-oauth
Merge branch 'mgmt-oauth' into disable-basic-http-auth
Wording
Add get empty counter to quorum queues
Merge pull request #2063 from rabbitmq/qq-persistent-stats
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Publish persistent stats for quorum queues
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump observer_cli and sysmon_handler deps
Wording
Merge pull request #1 from rabbitmq/list-prometheus-port
Merge pull request #370 from rabbitmq/list-prometheus-port
Merge pull request #41 from rabbitmq/list-prometheus-port
Use protocol specific name for listener listing i.e. Prometheus
List Prometheus port
Add prometheus protocol type to listener options - listed in status command
Merge pull request #203 from rabbitmq/rabbitmq-mqtt-202-duplicate-connections-list-command
Do not reach out to all nodes when listing connections
Document how to get short-lived OAuth token
Merge pull request #201 from rabbitmq/rabbitmq-mqtt-200
Allow redirect to any RMQ page from UAA
Squash a couple of warnings
Reverse case clause
Avoid performing a Ra operation on an empty list of nodes
Disable basic auth for definitions
Disable basic HTTP auth
Use a tick timeout value connected to node's nettick
Use 'token' in definitions import/export
Log connection errors as such
Add credentials obfuscation module
Encrypt password in state
Use more diverse return values from process_request for CONNECT
This list is a list of compatible peers
Merge pull request #725 from rabbitmq/rabbitmq-management-723
Update tests
Parse routing keys with values of `null` and `undefined` to their respective atoms
Return an empty list of client IDs if Raft cluster query times out
Link to Monitoring with Prometheus & Grafana guide to RabbitMQ-Overview
Update Nodes panels descriptions on RabbitMQ-Overview
Make sure client ID tracker can rejoin the cluster
Review RabbitMQ-Raft Dashboard with @michaelklishin
Add new config parameters to cuttlefish scheme
Use Bearer in the Authorization header instead of Basic
rabbitmq-run.mk: Compute MQTT and STOMP TCP ports for `run-broker`
Minor fixes
Merge pull request #65 from rabbitmq/rabbitmq-shovel-63
Improve error handling and reporting around connection termination
Clean seed script to OAuth demo
Document /auth endpoint
Test /auth endpoint
Add forgotten template
Remove unnecessary console output
Management UI can obtain an OAuth 2 token from UAA/CF SSO service
amqqueue_SUITE: Format protocol version as e.g. "1_0" in test group names
Update metrics images to latest
Merge pull request #38 from rabbitmq/rabbitmq-shovel-management-37
Handle undefined URL in shovel status
Merge pull request #32 from rabbitmq/rabbitmq-shovel-management-35-refresh-link-prefix
Merge pull request #36 from rabbitmq/rabbitmq-shovel-management-35-refresh-link-prefix
Use prefix for refresh link name
Bump RabbitMQ & PerfTest images to latest
Use prefix for refresh link name
Fix link to exchange details
Cosmetics
Merge pull request #721 from rabbitmq/highlight-leading-and-trailing-whitespace-in-names
Highlight leading and trailing ws individually
Highlight leading and trailing ws in names
Remove jQuery Migrate plugin
Merge pull request #7 from spring-operator/polish-urls-remaining-master
Merge pull request #8 from rabbitmq/lrb-update-templates
Add GitHub templates
Merge pull request #95 from rabbitmq/lrb-add-templates
Merge pull request #28 from rabbitmq/lrb-add-templates
Add GitHub templates
Add GitHub templates
Merge pull request #112 from rabbitmq/lrb-update-templates
Merge pull request #34 from rabbitmq/lrb-add-templates
Update GitHub templates
Add GitHub templates
(c) year
Merge pull request #369 from rabbitmq/rabbitmq-cli-367
Merge pull request #368 from rabbitmq/observer-does-not-depend-on-rabbit-app
diagnostics status: require rabbit app to be running on target node
Make sure the app is started in these tests
Do not require rabbit app for rabbitmq-diagnostics observer
Add Code of Conduct and Contributing files
Merge pull request #719 from rabbitmq/rabbitmq-management-714
Build on top of latest published RabbitMQ alpha version
Add event object argument on keypress event
Enable JQuery migrate plugin
Upgrade jQuery to 3.4.1
Correct a typo in fn name
Merge pull request #718 from rabbitmq/rabbitmq-management-711-part-two
Update exports and tests for 4960f0117da58e1c4a14b49a5a8ba82eb0150f0d
Don't report defs import progress using 102 Processing
Merge pull request #716 from rabbitmq/rabbitmq-management-715
rabbitmqadmin: accept 102 Processing responses
rabbitmq-tools.mk: Handle RabbitMQ components without tags
Merge pull request #32 from rabbitmq/rabbitmq-auth-backend-oauth2-24-strings-for-aud-scope
Support simple strings in aud and scope fields
Merge pull request #366 from rabbitmq/rabbitmq-cli-365
Drop --[no-]interactive support
Ditto for ctl change_password
Merge pull request #31 from rabbitmq/rabbitmq-auth-backend-oauth2-30
ctl add_user: make password optional, accept it via stdin
uaa_jwt:get_jwk/1: return an error if there are no configured signing keys
Deal with unused parameter
Add early plugin dependency to compile command
Remove extra parameters from output call
ctl authenticate_user: make password optional, accept it via stdin
Address an Elixir 1.9 warning
RabbitMQ 3.6.x has long been out of support
RabbitMQ 3.6.x has long been out of support
README edits to match rabbitmq-web-stomp
README edits
Add package changelog entries for 3.8.0-beta.5
Document tag support
Update README.md
Update README.md
Add OAuth2 plugin
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add OAuth 2 plugin to rabbitmq-components.mk
Merge pull request #707 from rabbitmq/management-only-api
Merge pull request #2024 from rabbitmq/management-only-api
Wording
Merge branch 'master' into management-only-api
Merge branch 'master' into management-only-api
Merge pull request #363 from gmile/patch-1
Fix typo in description for "stop" command
Merge pull request #82 from rabbitmq/rabbitmq-management-701
Format blank effective policy definitions as a JSON object
Cosmetics
Squash a few more compiler warnings
Require Elixir 1.7
Future proof test_util:fake_pid/1
Merge pull request #80 from rabbitmq/management-only-api
Squash a compile warning
Same as d3c01b3a1f1a65d1d935c3e6e0441388da44ba57 in more places
Let Lager's log message rate lapse before logging in these tests
Merge pull request #360 from rabbitmq/rabbitmq_cli_log_commands
Merge pull request #2047 from rabbitmq/rabbitmq_cli_log_commands
Wording
Cosmetics
diagnostics log_location: support JSON formatter
Wording
Await log update in this test
Test expectation update
Display 50 lines by default; cosmetics
Merge pull request #2046 from rabbitmq/qq-sync-op-fixes
Update test expectations
Merge branch 'master' into qq-sync-op-fixes
Wording
Merge branch 'master' into rabbitmq_cli_log_commands
Merge branch 'master' into rabbitmq_cli_log_commands
Merge pull request #27 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #111 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #94 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #199 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #122 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #29 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #2050 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #331 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #7 from rabbitmq/oauth2-credential-expiration-support
Merge pull request #361 from rabbitmq/qq_add_member_timeout_enhancements
Merge pull request #2053 from rabbitmq/qq_add_member_timeout_enhancements
Revert "rabbitmq-queues add-member: increase default timeout to 15s"
rabbitmq-queues add-member: increase default timeout to 15s
Provide timeout to add_member command
Provide timeout to add_member command
Adapt to rabbit_authz_backend interface changes in rabbitmq/rabbitmq-auth-backend-oauth2#28.
Adapt to rabbit_authz_backend interface changes in rabbitmq/rabbitmq-auth-backend-oauth2#28.
channel_source_SUITE: Wait for server channel
Adapt to rabbit_authz_backend interface changes
When permissions can expire, clear cache on periodic ticks
Merge pull request #81 from rabbitmq/pt-166962656-stats-failure-38-lre
Merge pull request #2049 from rabbitmq/pt-166962656-stats-failure-38-lre
Merge branch 'check-expiration-on-authentication' into oauth2-credential-expiration-support
Return false here as this module does not provide an update_state/2
Add state_can_expire/0 to mock authn/authz backend
Check token expiration on authentication
Avoid permission cache when at least one backend supports credential expiration
Integration suite: don't attempt to close channels on a closing connection
Integration suite: correctly compute expiration
Finish an incomplete comment sentence
Remove a test we decided against
Merge branch 'master' into rabbitmq_cli_log_commands
Merge branch 'master' into rabbitmq_cli_log_commands
Merge pull request #713 from rabbitmq/policy-param-grouping
Avoid a case clause by renaming a binding, spotted by @lukebakken
Integration tests for JWT token/secret updates; improved error reporting
Remove deprecation of force_event_refresh message
Check rval
Revert "Remove forced event refresh"
More OAuth 2 token refresh tests (WIP)
Merge branch 'master' into oauth2-credential-expiration-support
Add github templates
Group policy parameters by queue type
rabbitmq-dist.mk: Don't assume the plugin lives in `$(DEPS_DIR)`
erlang.mk: Remove the `protobuffs` plugin
Merge branch 'master' into oauth2-credential-expiration-support
Merge branch 'master' into oauth2-credential-expiration-support
Merge branch 'master' into oauth2-credential-expiration-support
Update rabbitmq-components.mk
Update erlang.mk
Cosmetics
Assert on operations on both new and existing channels
rabbitmq-dist.mk: Exclude `ebin/dep_built` from the files to distribute in plugins
Token refresh integration tests
Introduce amqp_connection:update_secret/3
Return a complete connection record
Remove a debug log line that's meant to be temporary
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
rabbitmq-components.mk: Force rebuild of all RabbitMQ components
Update user authn/authz state correctly
Implement secret (token) update
Error reporting for invalid secrets (tokens) WIP
Add greedy-consumer to simulate unhealthy unack'ed messages
Do not abbreviate values for fds & sockets
Log commands tests
Log streaming duration limit.
Fix switches and help section for log commands
Stream log for N seconds. Fix line cropping when reading entire log.
Extract a constant
Extract a constant
Wording
rabbitmq-mix.mk: Still set `$HOME` in addition to `$MIX_HOME`
rabbitmq-mix.mk: Set `$MIX_HOME` instead of `$HOME`
Pass all members to synchronous Ra operations
packaging: Set `$XDG_*_HOME` variables on Make command lines
Token/state renewal stub
Command to stream new log entries from a remote node.
Make it possible to specify a custom printer for commands. Add std_io_raw printer.
Functions to support log streaming to a CLI node.
Functions to support getting last N log entries from the remote node via CLI.
Command to print last N log messages from the default log.
Merge branch 'd21d3q-master'
examples/README edits
Wording
Command to get log file locations.
rabbitmq-mix.mk: Moved to rabbitmq-server-release
Improve error stacktrace reporting.
Add docker files, update readme
rabbitmq-mix.mk: Ensure `$HOME` does not come from the command line
Disable csfr check, update allowed hostname in settings, setup looging
packaging/generic-unix: Make tarball suffix configurable
packaging: Set `$HOME` on Make command lines
Do not allow entry commit latency to display below 0 on RabbitMQ Raft
Fix messages redelivered critical threshold on RabbitMQ Overview
Make it easy to spin up various containers, e.g. metrics qq
Build Docker image with latest alpha & make it easier next time
Enable quorum queue feature flag when runnin e2e metrics tests
rabbitmq-*test.mk: Fix latest regressions on our side w.r.t *-on-concourse
packaging: Log Elixir version before compiling
Set new-secret type to longstr
Update Docker image to latest
Use rabbit master, no need to copy this specific file into the image
Explain Raft panels & add link to QQ docs
Merge pull request #2043 from rabbitmq/qq_metrics_tweak
Allow for Elixir 1.9
Improve Erlang Dist & Overview dashboards based on recent learnings
Visualise Ra entry commit latency & members with many log entries
Build Docker image with latest ra metrics tweaks
Enable rabbitmq_top plugin
Propagate updated user/authn/authz state to channels
Set ra wal_max_size_bytes default if not set
WIP: credential expiration support prototyping
WIP: credential expiration support prototyping
Merge pull request #2041 from luos/fix_cleanup_of_exclusive_queues_master
add test for cleanup of exclusive queues in case of restart or partition
Add first version of RabbitMQ Raft metrics
Bump Erlang to latest stable & RabbitMQ to latest alpha
pass metrics key
Clarify for which alarms publishers get blocked
Introduce connection.update-secret[-ok] methods
Mention arguments to change token validity for client
Merge pull request #711 from rabbitmq/definitions_import_timeout
Merge pull request #710 from rabbitmq/multiple_definitions_import_error
Prefer assertMatch over pattern matching for better failure reporting
Log message wording
Delete server if add_member fails
Use fewer vhosts in this test
Improve node naming, standardise the colour pinning regex
Report definitions import progress to the client.
Test long definitions import
Disable idle_timeout for definitions import.
Improve node colour pinning
Increase erlang_vm_dist_node_queue_size threshold to 64MB & expand info
Fix erlang_vm_dist_node_queue_size graph
Propagate validation error when importing definitions from a directory.
Merge pull request #72 from rabbitmq/rabbitmq-trust-store-69
Cosmetics: prefer application:application:ensure_all_started/1
Add connection info module
Replace spaces by underscores when forging module name
HTTP proxy support
Add Maven wrapper to Spring Boot example
Add debug interceptor to Spring Boot example
Merge pull request #1982 from rabbitmq/rabbitmq_prelaunch_ipv6
Merge pull request #2034 from rabbitmq/rabbitmq-server-2030
Merge pull request #329 from rabbitmq/rabbitmq-server-2030
Make default worker pool size configurable
Make default worker pool size configurable
Merge pull request #358 from rabbitmq/rabbitmq-cli-330
Merge pull request #2033 from rabbitmq/rabbitmq-cli-330
Wording
These two annotations are not used
Schema information in mnesia for cli command
Command to log schema information
amqqueue*: Uniformize API
include/amqqueue.hrl: Fix indentation
Use latest RabbitMQ 3.8.0 alpha release
Merge pull request #61 from rabbitmq/rabbitmq-shovel-60
Merge pull request #2031 from rabbitmq/rabbitmq-shovel-60
Merge pull request #328 from rabbitmq/rabbitmq-shovel-60
Avoid double quoting of Shovel names in log entries
Refactor worker lifecycle event logging
Update log configuration tests for rabbitmq/rabbitmq-common#328
New Lager sink for Shovel
Java testsuite: Use a third RabbitMQ node for the cluster-wide client ID tracking test
test/java_SUITE_data/pom.xml: Make it compatible with Java 12
Handle queue-length option in worker sup
Correct log message
Rework Shovel restarts
Merge pull request #197 from rabbitmq/client-ID-tracking-in-mixed-versions
Respond to learnings from a LRE PromStack & Erlang Distribution metrics
mqtt_node: Skip incompatible nodes when configuring Ra cluster
Test new queue, connection and exchange count functions
rabbit_auth_backend_mqtt_mock: Move this test module to `test/`
Merge remote-tracking branch 'origin' into management-only-api
Test disabling the stats on the HTTP API using the query string
cluster_SUITE: Bump suite timestrap to 5 minutes
tools/terraform: Use Debian Stretch to test against Erlang 23
tools/terraform: Adapt lists to Terraform 0.12.x, take #2
Head message timestamp: make the test more robust
Merge pull request #195 from rabbitmq/rabbitmq-mqtt-91
Refactor
More tests
Include the queue type in queue formatting
Management only UI and HTTP API
 Queue, connection and exchange count functions
Reference a public IPv4 that has a PTR record
Merge pull request #104 from walro/patch-1
Add link to Publishers guide from Messages published / s panel
Consider exit code 69 as success again
Update to latest RabbitMQ 3.8 alpha
Update to latest perf-test
Merge pull request #56 from rabbitmq/rabbitmq-web-mqtt-55
Merge pull request #114 from rabbitmq/rabbitmq-web-stomp-113
Merge pull request #326 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #2019 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #196 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #27 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #26 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #110 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #92 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #59 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge pull request #705 from rabbitmq/rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge branch 'master' into rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge branch 'master' into rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Merge branch 'master' into rabbitmq-server-1767-protocol-specific-ctx-in-authn-authz
Be more tolerant in rabbit_channel:get_amqp_params/2
Configure Ranch to use max_connections value of 'infinity' by default
Don't include max_connections into socket options
Make sure web_mqtt.tcp.max_connections accepts 'infinity' as value
Default max_connections to infinity
Make web_mqtt.tcp.max_connections configurable via ini-style config file
Bump to latest RabbitMQ & PerfTest images
Layer on top of latest 3.8.0 alpha
Re-sync with the official image Dockerfile
tools/terraform: Use our own Erlang packages
tools/terraform: Fix missing `erlang_git_ref` variable definition
rabbit_ct_vm_helpers: Update Terraform map parsing
tools/terraform: Adapt to Terraform 0.12.x
Add mock auth backend
Add test to check client id propagation
Handle rejected queues on confirm.
Switch msg_id_to_channel from gb_tree to maps.
Reject a message before discarding it from BQ.
Compile
Remonitor connections on short disconnects and after recovery
Merge pull request #706 from rabbitmq/ra-metrics
Merge pull request #2022 from rabbitmq/ra-metrics
Remove a clause that's no longer used
Do not snapshot when a new client is registered
Add protocol-specific context
Only emit snapshot effects when client ID map changes
Add channel info for pending raft commands
Expose pending raft command metric
Switch rabbit_mqtt_collector:list/0 to use a leader query
Update environment variable to configure uaa
Client tracking: notify existing connections in a one-off process
Install cf-uaac gem, not uaac
A typo
decommission_mqtt_node only belongs to the ctl scope
decomission_mqtt_node: wording
Consistency
Correct a typo
Client ID tracking: make more transitions leader node-only
Wording
Define a state_enter/2 fun to clean up on disk state
Use a function call effect
Show legends on process states
Capture learnings from ERL-959 into Erlang Distribution Grafana dashboard
Improve Memory available panel title & description
Modify the default distribution link buffer
Bump Erlang/OTP to 22.0.2
Propagate protocol-specific context
Add topic URL in readme
Propagate protocol-specific context
Do not unregister a client ID if it does not belong to the terminating connection
Propagate protocol-specific context to HTTP backend
Add topic URL in example readme
Logging: mention client ID when accepting a connection
Add forgotten files
Merge branch 'master' into rabbitmq-mqtt-91
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS
Default docker-compose file target to up & tail logs
Add make target to clean all containers & volumes in Docker
Use consistent naming for the Erlang Distribution cluster
Enable filtering Erlang Distribution metrics in Grafana by cluster
Enable filtering RabbitMQ Overview metrics in Grafana by cluster
Set up separate clusters for Overview & Distribution metrics
Extract metrics services into a separate docker-compose file
Update Distribution & Overview dashboard tags
Bump Grafana & Prometheus images to latest stable
Awlays install Grafana plugins
Put more pressure on the distribution
Type fixes to keep dialyzer happy
Improve RabbitMQ Overview Grafana dashboard
Finish Erlang Distribution Grafana dashboard
Call rabbit_access_control:check_vhost_access with empty context
Call rabbit_access_control:check_vhost_access with empty context
Merge pull request #356 from rabbitmq/rabbitmq-cli-302
Merge pull request #2018 from rabbitmq/rabbitmq-cli-302
Add reject-publish-dlx to the help message in rabbitmq-management UI.
Merge pull request #2015 from Invizory/dead-letter-rejected-published
Update test assertions
Allow check_failed errors provide additional context
Basic tests for Diagnostics.CheckVirtualHostsCommand
Diagnostics.CheckVirtualHosts should be Diagnostics.CheckVirtualHostsCommand
check_alarms: correct result value in case of an error
Modify authz to propagate protocol-specific context
Propagate protocol-specific context to authorization
Health check command for virtual hosts
'check' function for health check of virtual hosts
Add remaining tests for `reject-publish-dlx`
Add overflow tests to `confirms_rejects_SUITE`
Add an option to dead-letter rejected publishes
Improving confirms test stability and error reporting
Improve error handling and increase timeout in confirm-reject test
Update error message in the assertion
Merge pull request #2014 from rabbitmq/quorum-status
Merge pull request #355 from rabbitmq/quorum-status
Improve quorum_status command
Replace Keyword.keyword? with proplist? checks.
Switch to pretty table formatter
Error message wording
Merge pull request #91 from mentels/do-not-error-on-deny-from-http-server
Correctly recognise when access is denied for user
Add tests for user authentication
Fix invalid docker-compose
Pin RabbitMQ nodes to colours in all Grafana panesl
Do not install Grafana plugins all the time
Bump Grafana, Prometheus & PerfTest versions to latest
Bump Erlang/OTP to 22.0.1 in Docker image
Stress Erlang Distribution metrics on OTP 21
Display the number of Erlang Distribution links
Compile
Merge pull request #58 from rabbitmq/rabbitmq-shovel-48
Merge pull request #34 from rabbitmq/rabbitmq-shovel-48
Handle Shovel names that are a single term
Merge branch 'master' into rabbitmq-shovel-48
Commit the renamed restart_shovel command
Naming and vhost argument changes per discussion with @dcorbacho
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Take observer_cli from Hex.pm
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
HTTP API endpoint to restart a dynamic shovel
mix.exs: Take `observer_cli` from Hex.pm
CLI command to restart a dynamic shovel
Switch back to zhongwencool/observer_cli now that it is 1.5.0
observer_cli 1.5.0
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
mix.exs: Use `michaelklishin/observer_cli` fork
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump Recon 2.5.0 for Erlang 22 compat, depend on our fork of observer_cli that uses it
Change banner
tools/terraform: provision Erlang 22 via Debian packages (now that it is GA)
Cluster-wide MQTT client id tracking
Mirror slow-consumer-persistent queue to all 3 nodes
Debian: Bump Erlang support upper limit to 22.0
Review metrics with @dcorbacho
Default Erlang Distribution Grafana dashboard to 10 minutes
Merge pull request #39 from rabbitmq/lrb-github-templates
Add GitHub templates
Bump Erlang/OTP version to 21.3.8.1
Merge pull request #2011 from rabbitmq/fix-notify-limiter-after-consumer-timeout-change
Fix premature prometheus dep version bump
Adapt clause in notify_limiter to consumer timeout changes
mix.exs: Ensure we pull observer_cli 1.4.5
Merge pull request #704 from rabbitmq/rabbitmq-management-703
Allow but ignore charset if set for HTTP request
test: Increase some timeouts so the testsuite passes on slow VMs
Merge pull request #352 from rabbitmq/endian_insensitive
Add Grafana dashboard for Erlang Distribution
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Depend on observer_cli 1.4.5
Merge pull request #1 from rabbitmq/rabbitmq-peer-discovery-aws-25
Merge branch 'master' into rabbitmq-peer-discovery-aws-25
Merge pull request #353 from rabbitmq/observer-cli
mix.exs cosmetics
Merge branch 'master' into observer-cli
Add a dependency on observer_cli, references #353
Add a dependency on observer_cli, closes #2006
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: add observer_cli dependency
Merge pull request #1893 from rabbitmq/do_not_confirm_on_unreachable_queue
Reference observer_cli from GitHub, not hexpm
Cosmetics
Cosmetics
Cosmetics
Handle observer_cli return value when user quits (again)
Re-enable a Diagnostics.ObserverCommand test
Bump observer_cli to 1.4.4
Adapt to latest zhongwencool/observer_cli#54 API changes
Change publisher confirms behaviour to reject messages if no queues confirmed.
Basic tests for Diagnostics.ObserverCommand
Handle Observer CLI return value when user quits
Depend on observer_cli 1.4.3 from hex.pm
rabbitmq-diagnostics: introduce a CLI observer command
Add a dependency on observer_cli
Add package changelog entries for 3.8.0-beta.4
Merge pull request #2001 from rabbitmq/rabbitmq-server-2000
Compaction: more logging, a test
Fix start-brokers / start-cluster make target
rabbit_ct_client_helpers: introduce consume_without_acknowledging/3
Merge pull request #700 from johanrhodin/patch-2
Missed get empty Grafana panel
Adjust info box for export definitions
Review all metrics to ETS mappings
Fix top-level app reference in README config example
Merge pull request #38 from rabbitmq/uri-parser-improvements
URI parser: allow the container_id to be set
Uri parser: return error when path segments are used
Merge pull request #57 from rabbitmq/better-amqp10-error-handling
Merge pull request #85 from rabbitmq/access-failures
Merge pull request #2004 from rabbitmq/send-drained-type-fix
Merge pull request #25 from rabbitmq/echo-flow-state
Increase msg redelivered / s thresholds to 20 & 100
Recompile all regexes.
Force connection, channel & queue churn
Add redelivered thresholds & make unroutable panels red
Add consumer that nacks messages every 0.5s
Fix basic.get metrics on Grafana dashboard
Bump Erlang to latest stable, 21.3.8
better handle resource access failures
Fix type issues with send_drained message
test/ctl/*feature_flags*: Use arbitrary feature flags, not `quorum_queue`
Makefile: Mark `test` target as phony
Ditto
Log deferred file compaction at debug level
Merge pull request #86 from rabbitmq/default_vhost_setting_application
Get default_vhost setting from rabbitmq_amqp1_0 application first.
Move check for reader to action function for message store GC.
Merge pull request #44 from rabbitmq/lrb-github-templates
Merge pull request #18 from rabbitmq/lrb-github-templates
Merge pull request #33 from rabbitmq/lrb-github-templates
Merge pull request #29 from rabbitmq/lrb-github-templates
Add GitHub templates
Add GitHub templates
Add GitHub templates
Add GitHub templates
Improve amqp 1.0 error handling
feature_flags_SUITE: Bump testcase timeout to 10 minutes
rabbit_feature_flags: Export initialize_registry/1 for the testsuite
Merge pull request #1998 from rabbitmq/consumer_timeouts_take_2
Log consumer timeout as a warning
Drive by change: squash a compiler warning
When consumer hits an ack timeout, log timeout value used
rabbit_queue_location_validator: Fix pattern in validate_policy/1
Merge pull request #10 from rabbitmq/lrb-github-templates
Add GitHub templates
Merge pull request #1999 from rabbitmq/queue-master-location-validation
Wording, explain
Test invalid policy returns an error
Use latest PerfTest, with consumer rate fix
Use full descriptions in titles
Policy validation must return 'ok' or an error
feature_flags_SUITE: Do not depend on the `quorum_queue` feature flag
Fix rate interval for / s metrics
Fix "like" expression in message selector
mix.exs: Require at least stdout_formatter 0.2.3
Expose queue created metric, fix queue deleted metric
Expose Erlang distribution port
Add object churn panels
formatting
Always close channel on consumer timeout
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update prometheus to v4.3.0 to benefit from global_labels
Bump prometheus.erl to v4.3.0
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbit_pretty_stdout: Remove module
formatters/pretty_table: Adjust comment, we don't use `rabbit_pretty_stdout` anymore
rabbit_ff_extra: Use stdout_formatter to display `info()` table
rabbitmq-components.mk: Pin stdout_formatter version to 0.2.2
Merge pull request #1995 from rabbitmq/sac-qq-fix
QQ SAC: process all consumers on noconnection
Merge pull request #1994 from rabbitmq/rabbitmq-server-1980
Merge pull request #698 from rabbitmq/disable-sendfile
Merge sendfile default using maps
Make use of variable message size
formatters/pretty_table: Switch to use stdout_formatter library
Use string instead of list of chars in clause
Add vhosts instead of exchanges in global counts
Merge pull request #42 from spring-operator/polish-urls-remaining-master
Cosmetics
rabbit_ssl: support Erlang 21 and 22 suite formatting API
Merge pull request #31 from rabbitmq/federation-cusom-consumer-tag
Merge pull request #92 from rabbitmq/federation-cusom-consumer-tag
fix consumer-tag name in help messages
Custom consumer tag for federaion.
Allow to set and display consumer tag for federation.
Merge pull request #91 from rabbitmq/federation-consumer-name
Chenge federation consumer name from "consumer" to "federation-link-<upstream_name>".
Merge pull request #351 from rabbitmq/rabbitmq-cli-345
Disable sendfile in cowboy by default.
Merge pull request #1989 from rabbitmq/rabbitmq-erlang-client-91
Merge pull request #325 from rabbitmq/rabbitmq-erlang-client-91
Merge pull request #120 from rabbitmq/rabbitmq-erlang-client-91
Add global counts to RabbitMQ Overview dashboard
Make all rates vary, force messages to be read from disk
Merge branch 'master' into rabbitmq-erlang-client-91
Merge branch 'master' into rabbitmq-erlang-client-91
Naming
Reset overflow queue property to drop-head if policy is unset.
rabbit_ssl: less confusing wording around xref exclusions
xref: OTP 21/22 compatibility :(
Merge pull request #695 from rabbitmq/rabbitmq-server-1904
Merge pull request #79 from rabbitmq/rabbitmq-server-1904
Merge pull request #1988 from rabbitmq/rabbitmq-server-1904
Merge pull request #324 from rabbitmq/rabbitmq-server-1904
Make use of PerfTest variable rate
Improve error reporting of invalid node names
Clarify which Erlang/OTP version is being printed when --offline
Drive by change: squash a few compiler warnings
Change cipher_suites command description cipher_suites returns default suites by default and needs a flag to return all
Explain better why some messages were returned vs dropped
Merge pull request #350 from rabbitmq/rabbitmq-cli-315
Add panel for dropped messages / s
Add rabbit beam files relevant to rabbitmq/rabbitmq-server#1988
Expose channel_exchange_drop_unroutable gauge
diagnostics erlang_version: support --offline
Merge pull request #349 from rabbitmq/rabbitmq-cli-346
Cosmetics, wording
Merge branch 'master' into rabbitmq-cli-346
Merge pull request #1993 from velimir/newline-config-validation
Wording improvements
Include feature flag status in cluster status
Build Docker image based on latest alpha release
print cuttlefish validation error on a new line
Merge pull request #693 from rabbitmq/overview-rates
Merge pull request #692 from rabbitmq/quorum-ets-memory-breakdown
Merge pull request #347 from rabbitmq/rabbitmq-cli-342
Merge pull request #1991 from rabbitmq/rabbitmq-cli-342
Wording
Merge branch 'velimir-schema-check-boot-failed'
Rework log initialisation tests and boot error reporting
unit_inbroker_non_parallel suite: split log management test into two smaller ones
Update this test for #1904
Replace multiple format flags with a single `--format` flag.
Merge branch 'schema-check-boot-failed' of https://github.com/velimir/rabbitmq-server into velimir-schema-check-boot-failed
Remove check for OTP-20.3 compatibility when formatting cipher_suites.
Merge pull request #1983 from rabbitmq/quorum-ets-memory-breakdown
Merge branch 'master' into quorum-ets-memory-breakdown
Add persistent messages panels, improve panel grouping
Use a stricter amqp version dependency (1.2.x)
Typo
Add more flags to cipher_suites command to return all available suites and more formats.
Upgrade to amqp ~> 1.2, start amqp app before connecting
Give queue proceess and client some time to boot before consuming in slower CI environments
Depend on amqp ~> 1.1
Add functions to get erlang or openssl formatted ciphers.
show output from cuttlefish when conf validation fails
Display more message metrics, simulate different types of publishers/consumers
Merge pull request #1972 from rabbitmq/consumer_timeouts
Core metrics suite: publish unroutable messages, too (for #1904)
Increment drop_unroutable un deliver_to_queues/2
Export newly added functions
Hide drop_unroutable metric behind a feature flag
New channel metric: dropped unroutable messages
Hide drop_unroutable metric behind a feature flag
rabbit_mgmt_metrics_collector:aggregate_entry/4: update to include a new metric
Merge pull request #88 from soumen1102/soumen1102-readme.md-updated
Updated Readme.md to include HTTP Method in conf
Merge pull request #697 from rabbitmq/combined-http-api-docs
Add stats HTTP redirect test
Fold stats documentation into the main HTTP API doc guide
Move rabbit_queue_collector to rabbit_common repo.
Move rabbit_queue_collector to rabbit_common repo.
Move rabbit_queue_collector to rabbit_common repo.
New channel metric: dropped unroutable messages
channel_exchange_metrics now has one more metric: dropped unroutable messages
Track messages that were not routed anywhere and also not published as mandatory
Fix eunit_formatters test dependency resolution
Fix missed rabbitmq-components.mk update
Set demo-friendly memory & disk-space limits
Bump to latest rabbitmq-prometheus Docker image
Use today's date for the Docker image tag
Merge pull request #694 from rabbitmq/fix_si_unit_symbol
Merge pull request #1987 from rabbitmq/clarify_si_unit_symbols
Clarify unit symbols
Revert "Clarify unit symbols"
Clarify unit symbols
Fix bytes prefix symbol
spelling
Move consumer timeout handler
Cancel tick timer if there are no pending acks
Move consumer timeout tests to own SUITE
Refactor channel state
Implement consumer channel timeouts
Update rabbitmq-components.mk
Make RabbitMQ container fd limit better-suited for demos
Add ctop make target
Publish messages as mandatory, with publisher confirms
Bump Docker image version used in docker-compose
Lower docker-compose file version
Use nc to check that all nodes are listening on AMQP
Set msg rates in overview to global and basic in queue pages
Merge pull request #344 from rabbitmq/rabbitmq-cli-343
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add rabbitmq_prometheus plugin
Merge branch 'rabbitmq-prometheus'
Build Docker image with the latest management & management_agent
Merge pull request #691 from rabbitmq/disable-metrics-collection
Merge pull request #112 from rabbitmq/ngoossens-fix/connect-default-login
Tests for #110
enable_feature_flag: handle cases where target node does not support the flag
If target node does not support feature flag, consider that none are available
list_feature_flags: handle missing rabbit_ff_extra modules on target node
Makefile: Remove cipher/hash/iterations default values from default app. env.
rabbit_pbe: Default cipher's name depends on Erlang version
rabbit_pbe: Use the new `crypto:supports/1` function in Erlang 22
Require Elixir 1.7.4 for building
Restore Elixir 1.6.6 compatibility
One more JSON formatting test case
New integration suite: JSON formatter
cluster_status: list RabbitMQ and Erlang versions
Don't print stack trace if no option is provided explicitly
Bump json to ~> 1.2
rabbit_misc: introduce rabbitmq_and_erlang_versions/0
Squash a warning
Extract Core.Version
Naming
Print stack trace if command execution fails and --print-stacktrace was passed
clustering_management_SUITE: don't depend on `cluster_status` output, querry alarms via rpc
cluster_status: rework output format, support JSON formatter
Merge pull request #28 from hommeabeil/play-with-filter
Allow RABBITMQ_CONFIG_FILE make variable to be overwritten
Merge pull request #78 from rabbitmq/disable-metrics-collection
Add cuttlefish schema for agent/disable_metrics_collector
Extract Core.ANSI from status and help commands
Preconfigure Grafana on boot
Increse PerfTest publish rate to 10 msg/s per publisher
Make PerfTest wait longer for RabbitMQ nodes to start
Expose management & prometheus ports for all RabbitMQ nodes
Remove a stray IO.inspect/1
status: support absolute watermark values
rabbit_resource_monitor_misc:parse_information_unit/1: coerce input to a list
Revert "Clarify"
Clarify
Display memory used by the ETS tables of the ra log
Report memory used by the ETS tables of the ra log
Add amqp_client build dep
Explain the change in #54
Merge pull request #54 from velimir/close-connection
Add rabbitmq_prometheus dep
rabbit_mgmt_gc_SUITE: Skip `quorum_queue_stats` if quorum queues are unsupported
Remove table legend from metrics
Capture a 3-node RabbitMQ & Prometheus + Grafana stack
tools/terraform: Use precompiled Elixir when using Erlang 22
close connections properly even if init step failed
Add RabbitMQ Overview Grafana dashboard
tools/terraform: Fix use of `$elixir_version` in setup-erlang.sh
rabbit_ct_vm_helpers: Bump CT peers wait from 20 to 40 minutes
Add make targets to build & publish Docker image
clustering_management_SUITE: Support 3.7.x status format as well
Avoid an extra function call, prepend_node_label
clustering_management_SUITE: Adapt `status_with_alarm` to the new `cluster_status` output
rabbit: Compute `totals` in status() only if RabbitMQ is running
Merge pull request #341 from rabbitmq/rabbitmq-cli-340
Merge pull request #1977 from rabbitmq/rabbitmq-cli-340
status: include RabbitMQ server information
rabbit:status/0: include server version information
status: include node's data directory path
rabbit:status/0: include node's data directory
status command: add --unit support for memory and disk space metrics
Introduce rabbit_vhost:count/0
ctl status: add a section on totals
rabbit:status/0: new section on basic (topology) totals
Introduce rabbit_vhost:count/0
status: add config file, log file and basic plugin information
rabbit:status/0: add config file, log file and enabled plugin info
MacOS => macOS
Naming
Format alarms as maps when formatter is JSON
Update a test to be forward compatible with rabbit:status/0 format changes
Fix rabbit_fifo tests
Merge branch 'master' into rabbitmq-cli-340
Reset an unintionally lowered timeout in this test
Reset an unintionally lowered timeout in this test
status: remove leading new line
New status command: add file descriptors usage section
Core.Memory.compute_relative_values/1: support map breakdowns
New status command: add memory watermark and usage section
Core.Memory.compute_relative_values/1: support map breakdowns
Move compute_relative_values/1 to Core.Memory
Move compute_relative_values/1 to Core.Memory
Core.Listeners.listener_map/1: assume that map inputs are preformatted
status: free disk space and listener sections
Core.Listeners.listener_map/1: assume that map inputs are preformatted
Merge branch 'master' into rabbitmq-cli-340
Update :badrpc test cases to be more resilient (part 2)
rabbit:alarms/0: return more information about the alarm
Update helper tests
Extract Core.Memory from Core.Helpers
Core.Alarms: support a simplified alarm format
Update :badrpc test cases to be more resilient
Update helper tests
Increase wait timeout in tests to avoid false positives.
New status command output WIP
Extract Core.Memory from Core.Helpers
Core.Alarms: support a simplified alarm format
Fix tests by make quorum queue discovery defensive
Merge pull request #77 from rabbitmq/cleanup-queue-stats
Merge pull request #689 from rabbitmq/hide-SAC-lable
Merge pull request #685 from rabbitmq/in-memory-limits
Merge pull request #1970 from rabbitmq/in-memory-limits
status command: convert raw data to a machine-friendly map
correct log effect type
Correct log effect return type
Merge pull request #1975 from rabbitmq/connection_tracking_no_transactions
Formatting
rabbit:listeners/0: return full listener records
Merge pull request #323 from rabbitmq/blacklist-tls1.3-until-client-implementation-is-finished
Merge pull request #1976 from rabbitmq/rabbitmq-server-1973-2
rabbit_ssl_options: Blacklist TLS 1.3 until Erlang client implementation is finished
New ctl status output WIP
Merge pull request #1978 from rabbitmq/calculate-quorum-memory
Update quorum queue supervisor for memory calculation
Add code to declare amq.rabbitmq.log exchange immediately after the / vhost is added or recovered
Extract Core.Alarms and Core.Listeners from Diagnostics.Helpers
Do not use transactions in connection tracking process.
amq.rabbitmq.log really should be an internal exchange
Option to disable metrics collector on startup
Stop management application if metrics collection is disabled
Reset in-memory counts after purging
Merge pull request #1974 from rabbitmq/rabbitmq-server-1973
Squash a warning
Fix prefix msgs types
Reduce duplication
Log amq.rabbitmq.log declaration failures as errors
Prepend node label to all metrics, including totals
Make sure amq.rabbitmq.log is accessible to client connections
Convert certain metrics from gauges to counters
Remove prometheus_cowboy & prometheus_httpd deps
Do not import functions that are not being used
Extract several modules from RabbitMQ.CLI.Core.Helpers
close_all_connections test: reduce duplication
Use register_collector/1 and the default registry
Bigger timeouts to reduce false-positives
Merge pull request #35 from rabbitmq/rabbitmq-top-34
Compiler warning
Merge pull request #690 from rabbitmq/queue-type-column
Take undefined return value from ets:info into account
Use latest deps, depend on rabbitmq_management_agent + add node label
ping command: rely on Core.AcceptsDefaultSwitchesAndTimeout
ping: cosmetics, declare --timeout in switches
Cosmetics
DefaultOutput: handle error triplets
Squash a warning
Merge pull request #322 from rabbitmq/dont-support-ctr
ctl delete_queue: help message improvements
ctl delete_queue: fix a typo in alias definition
Extra tests that helped narrow #339 down
Don't support aes_ctr ciphers until OTP-22+
Rename $ra_no_return to $ra_no_reply
Clean up of non-local queue stats
Merge pull request #337 from rabbitmq/rabbitmq-cli-336
DefaultOutput: correct normalize_output/2 for #336
One more test
Update assertions for #336
rabbit_auth_cache_SUITE: Bump `random_timing` expiry to 30 seconds
Merge branch 'master' into rabbitmq-cli-336
Clarify
ctl close_all_connections command test suite improvements
Explain, references rabbitmq/rabbitmq-server#1971
ctl close_all_connections: don't fail when --vhost is missing in options
Restore rabbit_connection_tracking_handler:close_connections/3
Merge pull request #321 from rabbitmq/handle-32bit-creation-field-in-compose_pid
Merge pull request #1971 from rabbitmq/connection_tracking_process
rabbit_misc: Generate a `NEW_PID_EXT`-based binary in compose_pid/4
Handle connection tracking events in a separate process.
Add queue type column in queues page
Merge pull request #688 from rabbitmq/do_not_fail_on_no_user_vhost
Naming: catch_no_user_vhost => catch_no_such_user_or_vhost
Hide SAC label if x-single-active-consumer=false
Clarify that not every command supports every formatter
runtime_thread_stats: mention the new Runtime Tuning guide in help
Ensure enumerable value is returned from RpcStream
Catch failures when there is no user/vhost.
Merge pull request #687 from rabbitmq/cors_header_bindings
Fix function clause in bindings when using CORS headers. Enable OPTIONS method for bulk delete.
Test that the indexes in the log effect are never lower than previous release cursor
Apply memory limit on returns
activemq_ct_helpers: Skip test if waiting for ActiveMQ fails
Merge remote-tracking branch 'origin/master' into in-memory-limits
Fix in-memory counters
Retry Mnesia tables wait in the `quorum_queue` feature flag migration
Merge pull request #319 from rabbitmq/rabbit-common-318
Merge pull request #317 from rabbitmq/new_pid_ext-otp22-bis
Handle missing getconf command
Merge pull request #1967 from rabbitmq/mk-idempotent-quorum-queue-add-member
Support both PID_EXT and NEW_PID_EXT simultaneously
Change default port to 15692
README updates, point out project immaturity
Sync Code of Conduct doc with other RabbitMQ subprojects
License files
Quorum queue; make membership changes [more] idempotent
rabbitmq-plugins formatter: don't print legend if --silent or --quiet is used
Tweak argument names in rabbitmq-queues command help
Update README.md
A typo
Expand help information for more commands (part 4)
Expand help information for more commands (part 3)
Merge pull request #87 from rabbitmq/rabbitmq-auth-backend-cache-20
Merge pull request #311 from rabbitmq/rabbitmq-auth-backend-cache-20
Merge pull request #22 from rabbitmq/rabbitmq-auth-backend-cache-20
Merge pull request #684 from rabbitmq/rabbitmq-auth-backend-cache-20
Merge pull request #1961 from rabbitmq/rabbitmq-auth-backend-cache-20
Expand help information for more commands
Rename function
Merge pull request #108 from rabbitmq/rabbitmq-auth-backend-cache-20
Document arguments/options and relevant guides for more commands
Merge pull request #316 from rabbitmq/lxv-vm-memory-monitor-fix
vm_memory_monitor: handle KB as well as kB
Merge pull request #686 from johanrhodin/patch-1
Remove extra "to"
Merge pull request #99 from spring-operator/polish-urls-apache-license-master
Merge pull request #97 from spring-operator/polish-urls-remaining-master
Merge pull request #31 from spring-operator/polish-urls-apache-license-master
Merge pull request #1963 from rabbitmq/rabbitmq-server-1962
Merge pull request #1960 from rabbitmq/mnesia_use_ram_schema_on_consistency_check
Merge pull request #32 from rabbitmq/limit-erlang-to-2-schedulers
Display in-memory stats for quorum queues
Publish in memory stats
Batch log effect
Start integration test nodes with 24 I/O threads
Merge pull request #1965 from rabbitmq/quorum-queue-node-removal-cleanup
rabbit_ct_broker_helpers: Limit Erlang VM to two schedulers
Allow fallback to default_login when using a CONNECT frame
Sort the list of exchange types returned by the HTTP API
Purge stale node state from quorum queues
Use in memory limit for quorum queue tests
Return msg in basic.get when in-memory limit is reached
Quorum queue in memory message limits
Add x-max-in-memory-length and x-max-in-memory-bytes arguments to quorum queues
Merge branch 'master' into mnesia_use_ram_schema_on_consistency_check
Correctly format blank command description
A typo
CLI commands: provide more information to the new help command
CLI commands: provide more information to the new help command
CLI tool: wording
CLI commands: provide more information to the new help command
CLI commands: provide more information to the new help command
(c) year bump
CLI commands: provide more information to the new help command
Merge pull request #1964 from rabbitmq/fix-no-return-function
Add a no_return() type spec to silence a Dialyzer warning
join_cluster: minor doc updates
Recommend doc guides in --help for more commands
A way for commands to provide a list of relevant doc guides
Dialyzer: disable no_match for decompose_pid/1
Compile
usage_additional/0 can return a list of pairs
Merge pull request #314 from rabbitmq/improve-rabbit-pbe-otp22-bis
We don't support aes_ctr before OTP-22
Merge pull request #1950 from rabbitmq/rabbit-fifo-bugfixes
Merge pull request #313 from rabbitmq/new_pid_ext-otp22
Merge branch 'master' into new_pid_ext-otp22
Merge pull request #308 from rabbitmq/improve-rabbit-pbe-otp22
gen_server2: don't emit deprecation warnings on OTP 22
Support the NEW_PID_EXT format introduced in OTP-22
Rework how command-specific options are displayed in help
Take peeraddr as binary() into account
Update authz_data type to include binaries
Add comments
Rename function to convert forward slashes, use it in another place
Merge remote-tracking branch 'gh-1962/master' into rabbitmq-server-1962
Fix issues with forward slashes
Keep IP address in tuple format
Ensure tuple IP is formatted correctly
Test successfull clustering if there is a garbage schema in the work dir
Convert check_vhost_access/3 to new API
Finish converting check_vhost_access/3 to new API
Finish converting check_vhost_access/3 to new API
Use ram schema_location for mnesia consistency checks.
Rename unused variable to reflect changes
Ensure correct argument is passed for AuthzData
Rename Sock to AuthzData
Remove unused code
Merge branch 'masaki-furuta-toggle_disk_monitor'
Pattern match in function heads
Merge branch 'toggle_disk_monitor' of https://github.com/masaki-furuta/rabbitmq-server into masaki-furuta-toggle_disk_monitor
Merge pull request #190 from spring-operator/polish-urls-apache-license-master
Update rabbit_disk_monitor.erl
Modify check_vhost_access/3 to use map of data
Modify check_vhost_access/3 to use map of data
Modify check_vhost_access/3 to use map of data
Debug: Applying patch to disable disk_monitor on the fly by rabbitctl eval.   To disbale:     rabbitmqctl eval 'rabbit_disk_monitor:set_enabled(false).'   To re-enable:     rabbitmqctl eval 'rabbit_disk_monitor:set_enabled(true).'
Merge branch 'dherrera-safecard-federation-upstream-regex'
Error message wording
Minor test improvements
Merge pull request #1953 from spring-operator/polish-urls-apache-license-master
Merge pull request #1917 from rabbitmq/rabbitmq-server-1906
Merge pull request #29 from spring-operator/polish-urls-apache-license-master
Merge pull request #676 from spring-operator/polish-urls-apache-license-master
Change regex to pattern
Merge pull request #683 from velimir/upstream-uris
Cosmetics
Remove a stray stack trace dump
Disable test that cannot currently pass
Debian, RPM: Require Erlang 21.3
allow uri with credentials formatter to accept multiple uris
rabbitmq-hexpm.mk: Always download the latest hexpm-cli
Merge pull request #81 from spring-operator/polish-urls-apache-license-master
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
Implement some tests
Implement federation-upstream-regex upstream parameter
update all the filters
Revert part of "URL Cleanup"
Merge pull request #89 from spring-operator/polish-urls-remaining-master
URL Cleanup
Revert part of "URL Cleanup"
update
dirty hack the filter
Merge pull request #14 from spring-operator/polish-urls-remaining-master
URL Cleanup
Quorum queue: make leader repair more defensive
tools/terraform: Add Erlang 21.3 support
Use HTTP in this test, references bc7749584442451818e8c38e0046aab0546c5936
Merge pull request #29 from spring-operator/polish-urls-remaining-master
Merge pull request #1 from spring-operator/polish-urls-remaining-master
rabbit_fifo: propery tests for single active consumer
Update test expectations to match the change in 882876297bd360c34745d64eff198cb486a07e04
Merge pull request #37 from spring-operator/polish-urls-remaining-master
Merge pull request #54 from spring-operator/polish-urls-remaining-master
Merge pull request #1 from spring-operator/polish-urls-remaining-master
Merge pull request #109 from spring-operator/polish-urls-remaining-master
Merge pull request #71 from spring-operator/polish-urls-remaining-master
Merge pull request #28 from spring-operator/polish-urls-remaining-master
Merge pull request #33 from spring-operator/polish-urls-remaining-master
Merge pull request #134 from spring-operator/polish-urls-remaining-master
Merge pull request #33 from spring-operator/polish-urls-remaining-master
Merge pull request #53 from spring-operator/polish-urls-remaining-master
Merge pull request #32 from spring-operator/polish-urls-remaining-master
Merge pull request #1949 from spring-operator/polish-urls-remaining-master
Merge pull request #27 from spring-operator/polish-urls-remaining-master
Merge pull request #8 from spring-operator/polish-urls-remaining-master
Merge pull request #27 from spring-operator/polish-urls-remaining-master
Merge pull request #188 from spring-operator/polish-urls-remaining-master
Merge pull request #76 from spring-operator/polish-urls-remaining-master
Merge pull request #6 from spring-operator/polish-urls-remaining-master
Merge pull request #334 from spring-operator/polish-urls-remaining-master
Merge pull request #23 from spring-operator/polish-urls-remaining-master
Merge pull request #309 from spring-operator/polish-urls-remaining-master
Merge pull request #42 from spring-operator/polish-urls-remaining-master
Merge pull request #119 from spring-operator/polish-urls-remaining-master
Merge pull request #38 from spring-operator/polish-urls-remaining-master
Merge pull request #27 from spring-operator/polish-urls-remaining-master
Merge pull request #13 from spring-operator/polish-urls-remaining-master
Merge pull request #673 from spring-operator/polish-urls-remaining-master
Merge pull request #107 from spring-operator/polish-urls-remaining-master
Merge pull request #21 from spring-operator/polish-urls-remaining-master
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Travis: use Erlang 21.3, Elixir 1.8.1
Require Erlang 21.3
Travis: use Erlang 21.3
Merge pull request #187 from spring-operator/polish-urls-xml-master
Merge pull request #78 from spring-operator/polish-urls-xml-master
Merge pull request #26 from spring-operator/polish-urls-xml-master
Merge pull request #85 from spring-operator/polish-urls-xml-master
Merge pull request #5 from spring-operator/polish-urls-xml-master
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
URL Cleanup
Reduce generic options section per discussion in #333
Additional help content for CLI command
Additional help content for CLI command
Additional help content for CLI command
Wording
Additional help content for CLI commands
Help section improvements for CLI commands
Make rabbit_pbe work for OTP-22
Handle 21.3 tls_alert error format.
Handle 21.3 tls_alert error format.
Rename some types to make it build on 21.3.
Handle OTP-21.3 TLS errors.
rabbit_fifo: Ensure checkout is performed
rabbit_fifo bugfixes
rabbitmq-hexpm.mk: Switch to hexpm-cli 0.3.0
Reduce general options section
Replace [-p vhost] in help messages with [--vhost vhost]
Rename <*infoitem> in help messages to <column>
Sort info items in command help
Revert "rabbitmq-run.mk: Increase lager message rate threshold from 50 to 5000"
rabbit_lager: Multiply high watermark on startup as well
Document more command-specific arguments and switches
Document more command-specific arguments and switches
Info item arg processing test: handle multi-line return values
Move printer module name resolution to PrinterBehaviour
Normalize formatter name
delete_queue: document switches in --help
Cosmetics
list_channels: @info_keys are meant to be atoms
Merge pull request #331 from rabbitmq/list-queue-type
Merge pull request #1918 from rabbitmq/list-queue-type
Global options: mention --formatter=pretty_table
ctl close_all_connections: additional usage docs
Do not indent lines in usage_additional
Cosmetics
Handle info keys that are strings
Rework command-specific help
Help command descriptions, cosmetics
Provide a help description for CLI tools
exec: trim command name/path
Correctly format management_agent and other multi-segment plugin names
Cosmetics
restart_vhost belongs to the Virtual Hosts section
Update rabbitmq-components.mk
Add a spec for rabbit_federation_util:fail/2
One less Dialyzer warning
Merge branch 'master' into rabbitmq-server-1906
Type spec: amqqueue:get_policy/1 returns a proplist
Merge pull request #87 from rabbitmq/lrb-fix-already_started
Correctly handle already_started case
Explain why last_applied is initialised to -1
Add queue type to list queues command
Add queue type to queue listing commands
Resend messages if first messages are lost
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #1912 from rabbitmq/bump-lager-high-watermark-if-level-is-debug
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Recon 2.4.0
Lager 3.6.9
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #1913 from rabbitmq/rabbitmq-server-1869
Fix snapshot bug in rabbit_fifo
Replace use of erl_call with rabbitmqctl
Merge branch 'thedrow-patch-1'
Simplify further with a macro, suggested by @dumbbell
rabbit_auth_mechanism_amqplain: refactor, improve error message
Allow shortstr in AMQPlain authentication method
Log boot steps as they run
Treat rabbit_direct boot step as enabling listeners
Undo recovery step dependency
Start TCP and TLS listeners later in boot process
Add check for integer value
rabbit_lager: Multiply high watermark by 100 when log level is debug
Support only text format and (optional) gzip encoding
Metrics rename to follow Prometheus naming convetions
Remove dependency from prometheus_httpd and prometheus_cowboy
Core metrics prometheus collector
Drive-by change: cosmetics
Merge pull request #96 from rabbitmq/fix-service-restart-after-upgrade
Merge pull request #1910 from spring-operator/polish-urls-build-master
URL Cleanup
Merge pull request #182 from spring-operator/polish-urls-build-master
Merge pull request #81 from spring-operator/polish-urls-build-master
Merge pull request #72 from spring-operator/polish-urls-build-master
URL Cleanup
URL Cleanup
URL Cleanup
Merge pull request #671 from rabbitmq/rabbitmq-management-665
Cosmetics
Add some tests for #665
Update rabbitmqctl(8) man page link
RPM: Fix service restart after upgrade
Add some error logging
file:list_dir does not include directory itself
Allow loading definitions from file or directory
ctl shutdown: consider @localhost nodes to be local
Merge pull request #85 from rabbitmq/mk-idempotent-rabbit_federation_exchange_link_sup_sup
Make link sup sup startup idempotent
Drive by change: format this message as one line
Merge pull request #328 from rabbitmq/rabbitmq-cli-327
ctl shutdown: infer hostnames from node names
Add function to request flow state from sender
Add package changelog entries for 3.8.0-beta.3
Merge pull request #670 from rabbitmq/rabbitmq-management-666-docs
Clarify /api/vhost-limits/vhost/name PUT request
Merge pull request #669 from rabbitmq/remove-unused-put-from-vhost-limits-endpoint
Merge pull request #668 from rabbitmq/rabbitmq-management-667
/api/vhost-limits/{vhost} does not support PUT
rabbitmqadmin: add a missing mandatory parameter to {declare,delete} vhost_limit
Merge pull request #664 from rabbitmq/management_terminated_queue_status
Merge pull request #75 from rabbitmq/management_terminated_queue_status
Remove type check
rabbit_fifo_prop_SUITE: `fake_pid` was removed
Bump Elixir client dependency to ~> 1.0
Format {terminated_by, Name} status for queues.
Format terminated status for queues as yellow.
Merge pull request #663 from rabbitmq/fix-missing-queue-consumers
Merge pull request #1903 from rabbitmq/single-active-noconnection
Remove a helper test erlc considers unused, per discussion with @kjnilsson
Feature flags: Handle plugins' feature flags only present on some nodes
rabbit_ff_extra: Honor the `UseColors` flag
Makefile: Add `feature_flags_SUITE` to the slow testsuites
rabbit_ct_broker_helpers: Allow to set `$RABBITMQ_PLUGINS_DIR`
rabbit_pretty_stdout: Honor the `UseColors` flag in `*_table()`
rabbitmq-run.mk: Set `$LEAVE_PLUGINS_DISABLED` to start broker without plugins
rabbitmq-run.mk: Allow to set `$RABBITMQ_PLUGINS_DIR` when starting a broker
Change stats merge function to concatenat strings
Emit inactive when no consumer can be activated
Tweak qourum queue tick interval for tests
Merge pull request #70 from rabbitmq/roundtrip-091
Add roundtrip to 091 test
Merge pull request #1900 from rabbitmq/binding-lock-optimisation
Merge branch 'master' into single-active-noconnection
Ensure waiting consumers can receive credit
rabbit_fifo_SUITE: Fix include of `rabbit_fifo.hrl`
rabbit_ct_broker_helpers: Don't set secondary Umbrella env. if it's not configured
Merge pull request #1902 from rabbitmq/rabbitmq-server-1901
Handle error triples, improve logging
Ensure resources are cleaned up
README updates
Post space-separated tags, add tests
Bump Spring Boot dependency
Pass tags to http backends
rabbit_fifo: cancel should not remove single active consumer
Merge pull request #307 from rabbitmq/fix-otp-22
Fix rabbit_pbe for OTP-22
Update README.md
rabbit_fifo: change single active consumer on noconnection
Less aggressive locking for bindings add/reomve.
Merge pull request #324 from rabbitmq/improved-error-handling-of-forget_cluster_node
ctl forget_cluster_node: improve error formatting
Add rabbitmq-queues(8) to the list of scripts to install
Merge pull request #662 from rabbitmq/poison-handling-qq
Merge pull request #1889 from rabbitmq/poison-handling-qq
These tests use CT now
Naming
Remove file added by mistake
Merge pull request #1898 from rabbitmq/defend-conn-created-tracking
Handle premature termination in conn tracking handler
Introduce new dlx reason for delivery limit
Add delivery limit argument
Formatting
Move rabbit_fifo unit tests into own SUITE
Restructure rabbit_fifo state
Merge pull request #133 from samnela/patch-1
Fixed rabbitmq-plugins link
Merge pull request #322 from jsoref/spelling
spelling: unrecognised
spelling: successful
spelling: success
spelling: script
spelling: providing
spelling: protocol
spelling: precede
spelling: passed
spelling: parameterised
spelling: overridden
spelling: mysterious
spelling: javascript
spelling: inaccessible
fix dialyzer issues
Add nodeup commands to rabbit_fifo_prop
Fix rabbit_fifo poison handling
Remove poison message from indexes
Include poison message handling in snapshot testing
Poison handling in quorum queues
Merge pull request #70 from rabbitmq/rabbitmq-trust-store-68
Ensure new modified date is used in state
A typo
Compile
Correct a JSON output inconsistency spotted by @hairyhum
Merge pull request #320 from rabbitmq/rabbitmq-queues-descriptions
New command group: replication
Merge branch 'master' into rabbitmq-queues-descriptions
Merge pull request #321 from rabbitmq/force_gc_command
Merge branch 'help-wip'
Wording
Merge branch 'help-wip'
Wording
Merge branch 'help-wip'
Wording
Merge pull request #306 from rabbitmq/rabbitmqctl-force-gc-command
Merge branch 'help-wip'
Merge branch 'help-wip'
Wording
Wording
Improve formatting of protocol plugin help sections
Add descriptions to rabbitmq-queues commands
Squash a couple of compiler warnings
Wording, typos
New command: `rabbitmqctl force_gc`
Introduce rabbit_runtime:gc_all_processes/0
Combine virtual host management, limits, tracing into a single group
More/slightly improved command descriptions
Help sections for rabbitmq-diagnostics commands
Update help command tests for the new grouped output
Command groups: naming, rearranging
Handle mixed version clusters in test suite
Merge branch 'master' into help-wip
rabbit_fifo: formatting
Merge pull request #1883 from rabbitmq/unavailable-qq-publish-fix
Merge branch 'master' into unavailable-qq-publish-fix
Merge pull request #1894 from rabbitmq/quorum-queue-grow-cmd
Merge pull request #318 from rabbitmq/quorum-queue-grow-cmd
Merge pull request #27 from rabbitmq/rabbitmq-queues-helpers
Quorum queue shrinking/growing: improve log messages
Log exec failures with regular importance; a typo
Merge branch 'master' into quorum-queue-grow-cmd
Correct usage line
Match on error tuples only here
Return a human-friendly validation error
Correct a copy-paste artifact
Cosmetics
Description for help command.
Description for help command.
Description for help command.
Description for help command.
Description for help command
Debian, RPM: Don't source `/etc/profile` in the `postinst` script
Change rabbit_quorum_queue:grow/3
rabbitmq-queues: add --errors-only to grow command
Merge branch 'master' into quorum-queue-grow-cmd
rabbitmq-env: Pass remote node name ro child rabbitmqctl(8)
add rabbitmq-queues grow command tests
grow command banner refinement
rename grow command
Feature flag tests belong under test/ctl
Banner message: be more specific
Handle errors returned by the rpc call
Add tests for rabbitmq-queues commands
Make `rabbitmq-queues` commands follow standard naming pattern
Format, inline
Reuse RabbitMQ.CLI.Core.AcceptsOnePositionalArgument here
version command test: remove an environment-specific test
Return :ok from setup_all
Squash a couple of test warnings
New command: version, closes #314
Add integration test for grow command
Add rabbit_quorum_queue:grow/4 function
Helpers for rabbitmq-queues cli tool
Merge pull request #24 from rabbitmq/scheme-defaults
Provide scheme defualts when parsing URIs
Rename test suite for consistency
Quorum queue suite: CT logging tweaks
Feature flag tests belong under test/ctl
Try to make node name mismatch message clearer, provide a hint
Add command to grow quorum queues
Improve queue index migration
Merge branch 'master' into pre-node-removal-tool
Merge pull request #661 from Ayanda-D/channel-source
Merge pull request #1886 from Ayanda-D/channel-source
Add cluster size to shrink result
Merge pull request #1888 from rabbitmq/rabbitmq-server-1887
Grammar
Queue ownership check: provide more details in the messaage
Check exclusive owner before durable argument
rabbitmq-queues-shrink better formatting
Merge pull request #26 from Ayanda-D/channel-source
add test for 'network' type arbitrary channel sources
store and retrieve channel source from state
Introduce originating source to channels, to help avoid synchronous channel requests back to the connection process
set channel source (as ?MODULE) for the rabbit_channel:handle_method/6 rpc call executed in rabbit_mgmt_util.
rabbit_ct_broker_helpers: export test_writer/1 and user/1
Merge pull request #1878 from rabbitmq/rabbitmq-server-1873-binding-recovery
Merge branch 'master' into rabbitmq-server-1873-binding-recovery
Merge pull request #1884 from rabbitmq/allow_binding_if_tables_inconsistent
Filter duplicate default exchange binding in `rabbit_binding:list_for_destination/1`
Revert error handling removal for backwards compatibility.
feature-flags.ejs: Center `Enable`button in the column
Do not fail on bind/unbind operations if the binding records are inconsistent.
Support custom help sections.
Do not use defcmd macro.
Formatting of the help message
Make help sections and descriptions similar to man page.
Add rabbitmq-queues shrink command
Disallow removal of the last quorum member
Add shrink_all/1 function
version command test: remove an environment-specific test
Return :ok from setup_all
Squash a couple of test warnings
New command: version, closes #314
Fix channel liveness issue
Merge pull request #1882 from rabbitmq/rabbitmq-server_conf_example
Remove inet_dist_listen_* configuration
Remove inet_dist_listen_min / max from ini schema since they do not work
Assing RABBITMQ_CONFIG_ARG_FILE variable
Use the new feature flags helper in `rabbit_ct_broker_helpers`
rabbit_ct_broker_helpers: Add helpers to manage feature flags
dynamic_ha suite: remove a racy assertion
Merge pull request #659 from jsoref/spelling
Compile
An attempt to make dynamic_ha suite more resilient
spelling: github
spelling: exchange
spelling: environment
spelling: enabled
spelling: already
spelling: abstract
spelling: requested
spelling: rabbitmq
spelling: protocol
spelling: policy
spelling: macro
spelling: javascript
spelling: integer
spelling: github
spelling: definitions
spelling: augmentation
spelling: abstract
Merge branch 'master' into rabbitmq-server-1873-binding-recovery
Naming
Naming
Naming
Recover bindings for all durable queues including failed to recover.
Merge pull request #313 from rabbitmq/jaro-distance-suggestions
Merge pull request #1875 from rabbitmq/fix-more-dialyzer
Merge pull request #117 from jsoref/spelling
Merge branch 'master' into fix-more-dialyzer
spelling: various
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Use elixir internal distance function instead of a library for command similarity comparison.
spelling: protocol
spelling: macro
spelling: license
spelling: javascript
spelling: immediately
spelling: heartbeat
spelling: existing
spelling: exercise
spelling: abstract
Clarify that list_connections command ony applies to AMQP 0.9.1
Fix a type that caused a Dialyzer warning
Merge branch 'jsoref-spelling'
Merge branch 'jsoref-spelling'
Fix a typo in rabbitmq-components.mk
Merge branch 'spelling' of https://github.com/jsoref/rabbitmq-common into jsoref-spelling
Merge branch 'spelling' of https://github.com/jsoref/rabbitmq-server into jsoref-spelling
spelling: within
spelling: variable
spelling: theoretically
spelling: synchronous
spelling: support
spelling: specifying
spelling: simplified
spelling: runtime
spelling: rotation
spelling: resetting
spelling: relevant
spelling: registry
spelling: refresh
spelling: redirect
spelling: redelivered
spelling: queuing
spelling: protocol
spelling: priority
spelling: predicate
spelling: possibilities
spelling: positives
spelling: permutation
spelling: overridden
spelling: output
spelling: optimisation (en-GB)
spelling: notification
spelling: monitor
spelling: maximum
spelling: maintenance
spelling: macro
spelling: javascript
spelling: invocation
spelling: inconsistent
spelling: include
spelling: ideally
spelling: greater
spelling: float
spelling: explicitly
spelling: existent
spelling: exception
spelling: everything
spelling: doesn't
Merge pull request #1874 from rabbitmq/queues-testing
spelling: discovery
spelling: disabled
spelling: directory
spelling: delegate
spelling: deferring
spelling: connection
spelling: conflicts
spelling: confirming
spelling: compared
spelling: cancelled
spelling: between
spelling: arguments
spelling: abstract
rabbif_fifo: refactor and fix tests
Bump erlang version requirement.
Fix a spec that caused two warnings
Fix another Dialyzer warning
Fix more Dialyzer warnings
Follow-up to #298: descriptions and aliases for TLS-enabled listeners
spelling: synchronization
spelling: subsequently
spelling: significant
Merge pull request #32 from rabbitmq/shovel_properties_parsing_error
Merge pull request #51 from rabbitmq/shovel_properties_parsing_error
spelling: requests
spelling: registered
spelling: protocol
spelling: originally
spelling: occurring
spelling: messages
spelling: javascript
spelling: implicitly
spelling: grammar
spelling: function
spelling: explicitly
spelling: during
spelling: chosen
spelling: asynchronous
spelling: aggregator
spelling: additional
Sync erlang.mk from rabbitmq-common
Sync rabbitmq-components.mk from rabbitmq-common
spelling: exactly
spelling: following
Use more parameters in the HTTP API tests to create AMQP1.0 shovels.
Add tests to for AMQP1.0 shovel message properties parsing.
Fix error when trying to set properties for AMQP 1.0
Merge branch 'master' into queues-testing
rabbitmq-diagnostics(8): wording
Example of using defcmd to define constant command callbacks
Add more command descriptions
Cleanup help command. Support plugin sections in command list.
Add behaviour helpers.
Do not return unacked messages in basic.cancel by quorum queues
Move some quorum queue tests to a generic queue type suite.
More descriptions for commands
rabbitmq.conf.example: minor edits
Default num_acceptors.ssl is 10
list_feature_flags_command.ex: Add `doc_url` to the columns list
Merge pull request #658 from rabbitmq/rabbitmq-management-657
Use rabbit_mgmt_util:read_complete_body/1 in several more places
Consume request body in full
More command descriptions.
A new way to display basic usage.
unit_inbroker_SUITE: Create `#amqqueue{}` on the broker
fix rabbit_fifo test setup
Remove rabbit_fifo_client priority toggle
Merge pull request #1871 from rabbitmq/leader-tracking
Update unit_log_config_SUITE now that we have an LDAP sink
Merge branch 'Haster2004-add-lager-sink-for-ldap'
Merge pull request #301 from Haster2004/add-lager-sink-for-ldap
Drive by change: use a Bionic VM to run OpenLDAP for tests
Drive by change: Lager adds a trailing new line
Merge pull request #180 from rabbitmq/rabbitmq-mqtt-179-handle-reconnect
Wording
fix whitespaces
replace rabbit_log by rabbit_log_ldap
rabbit_log_ldap external sink was added
Update unit_inbroker suite to support amqqeueue module.
Handle duplicate CONNECT frame
Merge pull request #300 from rabbitmq/rabbitmq-common-299-crash-with-empty-binary-payload
Merge pull request #116 from rabbitmq/fix-dialyzer
QQ: Repair amqqrecord leader info on tick
Ignore PLT files
Add Cuttlefish mapping for RA logging category
Merge branch 'master' into fix-dialyzer
rabbitmqctl_integration_SUITE: Use `?assertMatch()`
unit_SUITE: Set the `feature_flags_file` app parameter
dead_lettering_SUITE, publisher_confirms_parallel_SUITE: Handle case where quorum queues are unsupported
rabbit_feature_flags: Require the `feature_flags_file` app parameter
rabbit_ct_broker_helpers: Don't expect to get a path to `enabled_feature_flags_file`
rabbit_ct_broker_helpers: Only push specific paths to the remote node
Handle empty binary payload when delivering message
Improve error message produced by `rabbitmqctl shutdown`
Debian: require OTP 21.2
Require OTP 21.2
Merge pull request #1868 from rabbitmq/fix-dialyzer
rabbitmq-diagnostics(8): format examples correctly
Merge branch 'rabbitmq-diagnostics-man-page'
New man page: rabbitmq-diagnostics(8)
Update test expectations now that we have one more sink
Remove commented out code
Fix many Dialyzer warnings
Merge pull request #312 from rabbitmq/rabbitmq-cli-311
Cosmetics
Mention --longnames in the generic diagnostics message
Output a friendly error if a long node name is used but --longnames not specified
Merge pull request #298 from rabbitmq/fix-dialyzer
Fix many Dialyzer warnings
Ensure longnames option is passed to normalise_node
test/unit_inbroker_dead_letter_SUITE.erl -> test/dead_lettering_SUITE.erl
Merge pull request #1867 from rabbitmq/publisher-confirms-testing
Ditto
Give the recovering node more time to start here
Rename test suite
Merge branch 'master' into publisher-confirms-testing
Add active consumer fields if necessary
Publisher confirms test suite for all queue types
Merge pull request #1866 from rabbitmq/qq-log-formatting
Merge pull request #297 from rabbitmq/qq-log-formatting
Use friendly name for Ra logs
Rename rabbit_log_ra
Actually help exits successfully
rabbitmq-diagnostics man page WIP
Wording
rabbitmqctl(8) WIP
rabbitmq-diagnostics(8) WIP
Merge pull request #178 from rabbitmq/mk-socket-write-error-handling
Handle socket write failures and log them
rabbit_mgmt_db: Add the new `active` and `activity_status` fields in consumer stats
rabbit_mgmt_data_compat: New `fill_consumer_active_fields()` function
gm_SUITE: Increase receive timeout from 1 to 5 seconds
wait_command.ex: Fix function clause with validate/2
system_SUITE: Compare both IPv4 and IPv6 in close_remote_socket()
rabbit: Load plugins and init feature flags before we check cluster consistency
Reuse existing modules more, rearrange functions
Merge pull request #1861 from rabbitmq/lrb-issue-template-revision
Remove markdown formatting
shutdown: add a test for 56ac8d1cf77165d110690019eb4dd899a126d806
This clause is no longer necessary
shutdown: correctly wrap badrpc responses in validate/2
Merge pull request #309 from rabbitmq/shutdown_require_local_host
Further improvements to the shutdown command
Formatting
Merge branch 'rsandbach-master'
Cosmetics
Move the node locality to a validator
Merge branch 'master' into shutdown_require_local_host
No more "error, operation completed successfully" jokes necessary
Squash a couple of warnings
Test modules should be named *_test.exs
Refactor
Make all list_* commands available to rabbitmq-diagnostics
Merge pull request #1860 from rabbitmq/lrb-shorter-issue-template
While at it, update the PR template as well
Wording
fix template because variable-width font is used
Make the GitHub issue template shorter and more to the point
forget_cluster_node_command_test: Set `feature_flags_file` config
rabbit_ct_broker_helpers: Set `$RABBITMQ_FEATURE_FLAGS_FILE` when running rabbitmqctl(8)
Set `feature_flags_file` app env for {forget,rename}_cluster_node
Merge pull request #19 from samnela/patch-1
Fixed typo
Merge pull request #310 from samnela/fixed-typos
Fixed typos
Merge pull request #1857 from rabbitmq/rabbit-fifo-snapshotting-fix
Merge pull request #308 from rabbitmq/rabbitmqctl-cli-307
rabbit_fifo_prop_SUITE: remove some dead code, ct:pal/2 only errors
Merge branch 'master' into rabbit-fifo-snapshotting-fix
Merge pull request #1858 from rabbitmq/dead-letter-testing
Merge branch 'master' into dead-letter-testing
Minor comment edits
Merge pull request #68 from rabbitmq/backward-compatible-amqqueue
Merge pull request #31 from rabbitmq/backward-compatible-amqqueue
Merge pull request #648 from rabbitmq/backward-compatible-amqqueue
rabbit_mgmt_http_SUITE: Skip quorum queue tests if quorum queues are unsupported
rabbit_mgmt_db: Convert several stats to RabbitMQ post-3.7.x format if needed
Make #amqqueue{} a private record
Add a new admin panel to list and enable feature flags
formatters.js: Fix a typo
Merge pull request #72 from rabbitmq/backward-compatible-amqqueue
Merge pull request #82 from rabbitmq/backward-compatible-amqqueue
Merge pull request #291 from rabbitmq/backward-compatible-amqqueue
records.ex: The `#amqqueue{}` record is now private
New `pretty_table` formatter
Add `list_feature_flags` and `enable_feature_flag` commands
Merge pull request #1818 from rabbitmq/backward-compatible-amqqueue
Merge pull request #291 from rabbitmq/backward-compatible-amqqueue
Make shutdown command require a node to be local.
Support bare --help
Trailing whitespace
amqp10_client_SUITE: Test and enable the `quorum_queue` feature flag
Merge pull request #656 from rabbitmq/add-queue-qq-tweaks
Add queue: move type before name
Use queue name instead of ra name to query messages metric
Reject quorum queue messages with reason maxlen on drop-head
Test suite for dead letter: classic, mirrored and quorum queues
Ensure rabbit_fifo snaphots are emitted
rabbit_binding: Small style improvements
Use the new try/catch syntax to get the stacktrace in several testsuites
Fix errors reported by Dialyzer
Move `-spec()` near their function
Restore `mandatory_received` message handling
Restore the `rabbit:force_refresh_event()` feature
Convert explicit default bindings removal to a feature flag
Handle races with quorum_queue feature flag migration fun
Make #amqqueue{} a private record + add a feature flag
rabbit_plugins: Use `rabbit_misc:strict_version_minor_equivalent()` to check compatibility
New "Feature flags" subsystem to ease upgrades with breaking changes
Fix errors reported by Dialyzer
Makefile: Add missing dependencies to `$(LOCAL_DEPS)`
rabbitmq-run.mk: Increase lager message rate threshold from 50 to 5000
rabbitmq-run.mk: Log debug messages when using `make run-broker`
rabbitmq-run.mk: Configure `$RABBITMQ_FEATURE_FLAGS`
rabbit_misc: Consider 3.7.x and 3.8.x+ compatible
Make #amqqueue{} a private record
rabbit_pretty_stdout: New module to pretty-print a table
New tests for retainer translation.
Use translation for retained messages.
Cosmetic: move default switches and aliases to the top of the parser module
fix dialyzer error
Merge pull request #1856 from rabbitmq/ra-logger
Merge pull request #296 from rabbitmq/ra-logger
Add package changelog entries for 3.8.0-beta.2
Adapt man page styling for recent website CSS changes
rabbitmqctl(8): correct a reference
Merge pull request #49 from rabbitmq/mk-idempotent-rabbit_shovel_dyn_worker_sup_sup-start-link
Help message copywriting
Merge pull request #655 from rabbitmq/rabbitmqadmin-pycodestyle
Update rabbitmqadmin
Merge pull request #306 from rabbitmq/command_help_flag
Mention --help in the global option section
Two more warnings
Make it possible to get command help by typing 'rabbitmqctl mycommand --help'
Fix almost all Flake8/pycodestyle warnings
Move table_headers parameter definition to formatter.
Format with `gmake format`
Add `gmake format`
memory_breakdown: correctly format for CSV
Merge pull request #638 from rabbitmq/qq-queue-length
Present correct name for `rabbitmq-diagnostics check_alarms`
move ra logging shim
Add rabbit_log_ra shim
Configure Ra to log using lager
Update (c) year
Make rabbit_shovel_dyn_worker_sup_sup:start_link/0 idempotent
Merge pull request #1854 from rabbitmq/lrb-disable-large-heap-sysmon-msgs
Disable large heap sysmon messages
rabbit_mgmt_data: Convert several stats to RabbitMQ 3.7.x format if needed
Make #amqqueue{} a private record
A typo
Merge pull request #1849 from rabbitmq/basic_get_message_ready_count
Merge pull request #1851 from rabbitmq/rabbitmq-server-1850
Remove code that sets syslog listen IP
Merge pull request #303 from rabbitmq/await_startup_with_a_timeout
Merge pull request #1848 from rabbitmq/await_startup_with_a_timeout
Fix basic get message ready count
New command: `rabbitmqctl await_startup`
Spacing
Reintroduce the comment added in b0dd88351314cb4e0afca79cafa6bf315b42cbee
rabbit:await_startup: progress reporting
await_startup: use default timeouts in ms, naming
Merge pull request #653 from rabbitmq/rabbitmq-server-1838-active-field-for-consumers
Merge pull request #74 from rabbitmq/rabbitmq-server-1838-active-field-for-consumers
Merge pull request #297 from rabbitmq/rabbitmq-server-1838-active-field-for-consumers
Merge pull request #1839 from rabbitmq/rabbitmq-server-1838-active-field-for-consumers
Merge pull request #295 from rabbitmq/rabbitmq-server-1838-active-field-for-consumers
Add activity status field to consumer created
Add comment
Drive-by change: remove a TODO
rabbit:await_startup/{0,1,2}: move spec definitions to definition
rabbit:await_startup/2: correct type spec
rabbit_ct_broker_helpers: Override paths to RabbitMQ scripts
rabbit_ct_broker_helpers: Pass secondary Umbrella variables as make(1) vars
Add make target for displaying GitHub release stats
Introduce rabbit:await_startup/2
Merge branch 'master' into rabbitmq-server-1838-active-field-for-consumers
Merge pull request #1834 from rabbitmq/qq-queue-length-drop-head
Ensure purge clears out returned messages
Fedora/RPM: update service description
Merge branch 'master' into qq-queue-length-drop-head
rabbitmq-plugins.8: document more flags, link to the relevant doc guide
Man page edits and updates
Man pages: update dates
remove a few stale TODOs
Merge pull request #132 from rabbitmq/rabbitmq-stomp-94
Add active to default fields for list_consumers
tidy up
Add test for default_topic_exchange, fixup parse_routing
Quorum queue queue length limit by byte size and number of messages
rabbit_ct_broker_helpers: Move `get_queue_sup_pid()` to rabbitmq-server
backing_queue_SUITE:: Move `get_queue_sup_pid()` from rabbitmq-ct-helpers
dynamic_qq_SUITE: "force delete" was implemented, remove the TODO
Show x-max-length-bytes for quorum queues
Fix dynamic_qq test expectation
Merge pull request #1845 from rabbitmq/rabbitmq-server-1843-always-copy-schema
Add consumer activity status column
Add activity status to consumer metrics
Add consumer activity status to metrics
Merge branch 'master' into rabbitmq-server-1838-active-field-for-consumers
RestartVhostCommandTest stability and efficiency improvements
Rearrange test files
Merge pull request #301 from rabbitmq/formatter_switches
Move get_formatter/2, get_printer/2 and friends to RabbitMQ.CLI.Core.Config
Merge branch 'master' into formatter_switches
Merge pull request #300 from rabbitmq/rabbitmq-cli-292-listener-checks
Correct protocol labels for STOMP and MQTT
Always copy rabbit.schema file
Make it possible for formatters to define arguments.
Introduce 'rabbitmq-diagnostics check_port_connectivity'
Add cuttlefish config and test
Add rabbitmq_stomp.default_topic_exchange configuration parameter
Introduce 'rabbitmq-diagnostics check_port_listener <port>'
Introduce 'rabbitmq-diagnostics check_protocol_listener'
Make #amqqueue{} a private record
Make #amqqueue{} a private record
Standardize on :not_enough_args
More typos
One more typo
Clarify
Correct a moduledoc typo
Remove an unused alias
Format generic error triplets
ExUnit defaults to async: false for test cases
Update tests to use the new default exit code
New check command: 'rabbitmq-diagnostics check_running'
Use exit code of 69 (EX_UNAVAILABLE) by default
Refactoring
Change rabbitmq-diagnostics is_booting and is_running to be info commands
Follow command naming pattern in file names, too
Update README
Fix Dialyzer warnings
Fix compiler warnings
Relax this assertion
Merge pull request #296 from rabbitmq/rabbitmq-cli-292-diagnostics-alarms
Tests and revisions for 'rabbitmq-diagnostics check[_local]_alarms'
Rename a few test files
Introduce rabbitmq-diagnostics check[_local]_alarms
Correct local vs. global alarm filtering
Tests for 'rabbitmq-diagnostics alarms'
Initial version of rabbitmq-diagnostics alarms
Merge pull request #298 from rabbitmq/rabbitmq-cli-292-diagnostics-listeners
Merge pull request #654 from rabbitmq/rabbitmq-mqtt-152-client-id-in-connection-metadata
Merge pull request #172 from rabbitmq/rabbitmq-mqtt-152-client-id-in-connection-metadata
Truncate client ID, product and platform info at 120 characters
Display client ID in connection list
Add client ID to connection metadata
Add tests for 'rabbitmq-diagnostics listeners'
Enquote listener interface for machine-readable formats, too
Initial version of the 'rabbitmq-diagnostics listeners' command
JSON formatter: flatten the stream before formatting
Drive-by change: start iex REPL with distribution
Rename a few test files
Update these tests to only operate on ctl commands
Add active and activity status fields to list_consumers
Return active and activity status when listing consumers
Merge pull request #295 from rabbitmq/rabbitmq-cli-292-plugins-is-enabled
Copy, list plugins that are not enabled
Code style
Use return code of 69 Unavailable here
Merge branch 'master' into rabbitmq-cli-292-plugins-is-enabled
Update (c) year in tests
Introducee rabbitmq-plugins is_enabled [plugin 1] [plugin 2] [...]
Extra whitespace
Be more resilient to net_kernel internal process management
Squash a warning
Use correct node hostname here
Merge pull request #294 from rabbitmq/rabbitmq-cli-292-diagnostics-is-running
An attempt to make request/reply tests more stable on Concourse
Introoduce rabbitmq-diagnostics is_running, is_booting
Introduce rabbit:is_booted/0, is_booting/0
Export rabbit:is_booting/1
Update (c) year
Merge branch 'master' into rabbitmq-server-1838-active-field-for-consumers
Add help and link to explain active consumer flag
Update active consumer flag
Update active flag for consumers
rabbit_fifo: refactoring
fix consumer_created test setup
Merge pull request #293 from rabbitmq/rabbitmq-management-649-single-active-consumer
Fix test setup
Merge pull request #292 from rabbitmq/rabbitmq-management-649-single-active-consumer
Merge pull request #73 from rabbitmq/rabbitmq-management-649-single-active-consumer
Merge pull request #650 from rabbitmq/rabbitmq-management-649-single-active-consumer
Merge pull request #1826 from rabbitmq/rabbitmq-management-649-single-active-consumer
Merge pull request #1832 from rabbitmq/default-binding-cleanup-upgrade-function
Merge branch 'master' into rabbitmq-management-649-single-active-consumer
Monitor waiting consumers when entering state
Only remove durable bindings for durable queues.
Add single active field to list_consumers command
Add single active field when listing consumers
Define ConnectionRefusedError on Python 2.x
Merge pull request #1831 from rabbitmq/make-mandatory-based-on-routing-only
Merge pull request #114 from rabbitmq/no-async-recv
Travis: use Erlang 21.2 since 21.2.2 is not available
Merge pull request #294 from rabbitmq/mk-heartbeat-timeout-type-specs
Use heartbeat_timeout/0 in more places
Introduce a new type, heartbeat_timeout, for documentation purposes
Merge pull request #293 from rabbitmq/lrb-heartbeat-debugging
Merge pull request #1823 from rabbitmq/delete_quorum_queue_fixes
Debug the start of heartbeat senders
Extract function, add logging
Wording
Upgrade functions are expected to return a 'ok'
Merge branch 'master' into make-mandatory-based-on-routing-only
Merge pull request #1836 from rabbitmq/rabbitmq-server-1835
Remove use of accept_ack
Closes #36
Change quorum queue delete timeout
Log this as a warning
Improve quorum queue deletion
Add column for single active consumer in consumers view
Add single active consumer flag in consumer metrics
Integrate single active consumer with metrics
Integrate single active consumer with metrics
Use {active,once} instead of async_recv
Add an upgrade function to remove all default bindings.
Make mandatory based on route data only
Merge branch 'master' into rabbitmq-management-649-single-active-consumer
Allow for Elixir 1.8.0
Don't use a function deprecated in 1.8.0
Merge pull request #1819 from rabbitmq/qq-testing
Merge branch 'master' into qq-testing
Merge pull request #1827 from rabbitmq/rabbitmq-server-1825-single-active-consumer-in-qq-leaks-consumers
Merge pull request #18 from rabbitmq/rabbitmq-auth-backend-cache-17
Support the cache_refusals conf setting
Remove an unused record
Add waiting consumers when listing consumers in QQ
(Un)suspect waiting consumers when node goes down or up
Merge branch 'master' into qq-testing
Merge pull request #1830 from samnela/fix/copyright-year
Bump (c) year in startup banner
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
.travis.yml: use 21.2 as 21.2.2 builds are no available
Fixed years in copyright
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
.travis.yml: sync Erlang and Elixir versions, require Erlang/OTP 21.2
Merge pull request #7 from rabbitmq/rabbitmq-peer-discovery-aws-25
Merge pull request #26 from rabbitmq/rabbitmq-peer-discovery-aws-25
Set connect and request timeouts
Set connect and request timeouts
Set connect and request timeouts
Unregister waiting consumers in QQ when channel goes down
Add single active consumer monitoring info to classic queue
Support x-single-active-consumer queue parameter
Filter single active consumer pid
Merge remote-tracking branch 'origin/master' into qq-testing
Default exchange bindings are implicit as of rabbitmq/rabbitmq-server#1721
Update rabbitmq-components.mk
Merge pull request #1821 from rabbitmq/lrb-update-sysmon_handler
Debug log message
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update to sysmon_handler 1.1.0
Correct a max message size config setting typo
Refactor quorum_queue_SUITE for dynamic_qq_SUITE
Update ct-config_schema expectations to include sysmon_handler defaults
Squash a couple of warnings
Merge pull request #1816 from rabbitmq/rabbitmq-server-952
Merge pull request #288 from rabbitmq/rabbitmq-server-1799-single-active-consumer-in-qq
Merge pull request #1802 from rabbitmq/rabbitmq-server-1799-single-active-consumer-in-qq
Merge branch 'master' into rabbitmq-server-1799-single-active-consumer-in-qq
Merge branch 'master' into rabbitmq-server-1799-single-active-consumer-in-qq
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'rabbitmq-server-952'
NbMessages => MessageCount
Simplify consumer cancellation in QQ for single active consumer
Clarify comments
Formatting
Formatting
Add unit test for single active consumer in quorum queues
Add dynamic_qq_SUITE for quorum queues
Travis CI: Update config from rabbitmq-common
Consider quorum queues in forget_cluster_node
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
rabbit_fifo_props: handle impossible case
Makefile: Add verbose testsuites to slow testsuites
Makefile: Update the list of slow testsuites
per_vhost_connection_limit_partitions: Check connections count in a loop
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Use Ubuntu Xenial image
Merge pull request #1817 from rabbitmq/ra_server_supervision
Address comments after single active consumer review
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Makefile: Remove the Hex.pm `maintainers` field from .app
Travis CI: Test against Erlang 21.2 only
Travis CI: Use Elixir 1.6.6
Makefile: Remove the Hex.pm `maintainers` field from .app
Add rabbitmq-sysmon to RabbitMQ
Add sysmon_handler dependency
New style config file example: list settings added in 3.7.9 and 3.7.10
Update rabbitmq_statefulsets.yaml
unit_inbroker_parallel_SUITE: Bump suite timetrap to 3 minutes
Merge pull request #41 from rabbitmq/rabbitmq-consistent-hash-exchange-40
More tests for #40
Refactor test code
Make sure binding's bucket keys are sorted as they form a range
More tests for #40
Add a failing test for the scenario outlined in #40
Update with Ra server supervision changes
Implement rabbit_quorum_queue:stat/1
Merge pull request #1721 from rabbitmq/remove-default-bindings
Filter out default exchange bindings that may already be in the database
Missing var(s), condition braces, semicolons
Escape filter values
Variable naming
Rename a function
Remove a comment that's no longer relevant
Correct a typo in function name
Additional tests extracted from rabbitmq/rabbitmq-stomp#130
New style config: support stomp.tcp_listen_options.*
Merge pull request #290 from rabbitmq/more-defensive-amqp-params/2
Check queue existence when checking for fake bindings existence.
rabbit_ct_helpers: Put a space between application name and "source"
rabbit_ct_helpers: Always use primary app path when there is no secondary Umbrella
Be more defensive when requesting connection parameters
Merge pull request #1812 from rabbitmq/max_msg_size
Merge pull request #289 from rabbitmq/max_msg_size
Wording
Rework message size limit test
Open the channel after max length limit is configured
Merge branch 'master' into max_msg_size
Merge pull request #53 from rabbitmq/rabbitmq-server-1814
Merge pull request #108 from rabbitmq/rabbitmq-server-1814
Merge pull request #645 from rabbitmq/rabbitmq-server-1814
Merge pull request #1815 from rabbitmq/rabbitmq-server-1814
Reverse order of ciphers in generated file to ensure they match rabbitmq.conf. The ct helpers will not verify this as the snippets and results are deep sorted
Modify test so generated ciphers are in the expected order
Reverse order of ciphers in generated file to ensure they match rabbitmq.conf. The ct helpers will not verify this as the snippets and results are deep sorted
Modify test so generated ciphers are in the expected order
Reverse order of ciphers in generated file to ensure they match rabbitmq.conf. The ct helpers will not verify this as the snippets and results are deep sorted
Modify test so generated ciphers are in the expected order
Reverse order of ciphers in generated file to ensure they match rabbitmq.conf. The ct helpers will not verify this as the snippets and results are deep sorted
Modify test so generated ciphers are in the expected order
Revert "Pad info items in the table formatter to be at least as wide as header."
Merge branch 'pad_table_items'
Pad info items in the table formatter to be at least as wide as header.
Add fake bindings to list functions.
Make master locator min-masters count queues and not bindings.
Do not create default bindings for queues.
Move application environment read to the channel intialisation.
Introduce a configurable limit to message size.
Reduce max message size to 512MB.
Merge pull request #644 from rabbitmq/rabbitmq-management-643
Support cipher suites and more TLS listener options
HTTP API docs: be a bit more specific
Merge pull request #642 from wishdev/password_hash_algorithm_docs
Add docs for password_hash_algorithm to HTTP api
Merge branch 'wishdev-password_hash'
Use more realistic hash values in tests
declare user: support --hashing_algorithm, improve mandatory option formatting, more tests
Merge branch 'password_hash' of https://github.com/wishdev/rabbitmq-management into wishdev-password_hash
Allow for password_hash instead of password when declaring users
Use ESL packages for Erlang 21.1 and 21.2
Terraform variables: list Erlang 21.1 and 21.2
Squash a few compiler warnings
Merge pull request #1809 from rabbitmq/qq-purge-bug-fix
Merge pull request #289 from rabbitmq/diagnostics-tls-versions
New command: rabbitmq-diagnostics tls_versions
Revert "Revert "Use {active,once} instead of async_recv""
Revert "Revert "Use {active,once} instead of async_recv""
Revert "Use {active,once} instead of async_recv"
Revert "Use {active,once} instead of async_recv"
Merge pull request #128 from rabbitmq/no-async-recv
Merge pull request #171 from rabbitmq/no-async-recv
Quorum queue: purege should not remove checkout out messages.
Merge branch 'master' into rabbitmq-server-1799-single-active-consumer-in-qq
Merge pull request #1808 from rabbitmq/ra_machine_apply_3
Merge pull request #640 from rabbitmq/rabbitmq-management-467
Restore code removed in 456c3a0 that links an exclusive owner connection
Add in augmented details to queue information
rabbit_fifo: apply/4 -> apply/3
Makefile: Restore cache.ets conditionally
Makefile: Use separate flags for GNU tar and BSD tar
Makefile: Only remove $@.git-times.txt at the end
Makefile: Only format timestamp if the dependency is a Git repository
Makefile: Fix strftime format for rabbitmq-server-release timestamp
Makefile: Make the source archive build reproducible
Merge pull request #285 from rabbitmq/rabbitmq-cli-284
Format changed file with "mix format"
Add chunks equal to number of nodes
Merge pull request #1807 from rabbitmq/redlivery-count-fix
Merge pull request #283 from rabbitmq/improved-rabbitmq-plugins-error-messages
Do not include x-delivery-count header on first delivery.
Squash a warning
Merge pull request #1806 from rabbitmq/report-message-bytes
quorum queue: reset message bytes on purge
Improve error message formatting for rabbitmq-plugins commands
Merge pull request #1803 from rabbitmq/vanlightly-bugs
Merge pull request #639 from rabbitmq/rabbitmq-management-635
RabbitMQ may return a range that represents last minute, do not double-add it. Sort the list of ranges returned by RabbitMQ
Quorum queue: fix crash bug after reconnection
Use {active,once} instead of async_recv
Use {active,once} instead of async_recv
Remove debug tracing
Lower the timeout since it's expected here
Squash a warning
Merge branch 'karenbajador-lastwill-not-firing-on-client-ungraceful-disconnection-fix'
Integration tests for #52
Last Will is now sent in terminate/2
Merge pull request #1685 from rabbitmq/rabbitmq-server-1682
Merge pull request #16 from romainbou/master
Update README.md
Quorum queue: return messages in order
Bug fixes
Send will on client's ungraceful disconnect
Simplify to basically removing the pattern match that crashes
Merge branch 'master' into rabbitmq-server-1799-single-active-consumer-in-qq
Support single active consumer in quorum queue
Take "true" case into consideration
Merge pull request #1796 from rabbitmq/report-message-bytes
Report message bytes in quorum queue stats
Merge branch 'master' into rabbitmq-server-1799-single-active-consumer-in-qq
Merge branch 'master' into rabbitmq-server-1799-single-active-consumer-in-qq
Merge pull request #1801 from rabbitmq/qq-list-consumers
fix rabbit_fifo SUITE
Implement consumer listing for quorum queues
Merge pull request #1800 from rabbitmq/qq-ghost-consumer-fix
Add sample retention policies to overview
Merge pull request #51 from rabbitmq/lrb-fix-schema-port
Fix port in schema
Show x-max-length for quorum queues
Merge pull request #50 from rabbitmq/tcp-config-port-defaults
Make sure a TCP listener is started by default
Merge pull request #107 from rabbitmq/tcp-config-port-defaults
Make sure a TCP listener is started by default
Ensure quorum queue consumers are cleaned up
Merge pull request #637 from rabbitmq/lrb-fix-publish-template-in-exchange-mode
Take mode into account before accessing queue variable
Merge pull request #1798 from rabbitmq/remove-unused-truncate-module
Merge pull request #287 from rabbitmq/remove-unused-truncate-module
Merge pull request #106 from rabbitmq/rabbitmq-web-stomp-104
Support web_stomp.ssl.listener combined with other web_stomp.ssl.* settings
Merge pull request #101 from rabbitmq/ciphers-in-new-style-config
Merge pull request #49 from rabbitmq/rabbitmq-web-mqtt-48
Support web_mqtt.ssl.listener combined with other web_mqtt.ssl.* settings
Snippet verification: print pre-sorted values, too
Merge pull request #105 from rabbitmq/rabbitmq-web-stomp-100
Add settings to disable TCP and TLS listeners explicitly
Merge branch 'master' into rabbitmq-server-1743-exclusive-consumer
Remove a macro related to the removed truncate module
Merge branch 'master' into rabbitmq-server-1743-exclusive-consumer
Remove the unused truncate module
Merge pull request #1791 from rabbitmq/wal-roll-over
Merge pull request #45 from rabbitmq/ciphers-in-new-style-config
Merge branch 'master' into ciphers-in-new-style-config
Merge pull request #170 from rabbitmq/remove-duplicate-call
Merge pull request #103 from rabbitmq/rabbitmq-web-stomp-102-close-on-termination
Merge pull request #44 from rabbitmq/rabbitmq-web-mqtt-31
Remove a duplicate control_throttle
Merge pull request #47 from rabbitmq/rabbitmq-web-stomp-46-proxy-protocol-new-config-format
Close STOMP connection on termination
Add proxy_protocol flag to new configuration format
Bring web_mqtt.ssl.ip back in this test
Support more web_mqtt.ssl.* options, including cipher suites
Support more web_stomp.ssl.* options, including cipher suites
Add settings to disable TCP and TLS listeners explicitly
Merge pull request #99 from rabbitmq/proxy-protocol-in-new-style-config
New style config: support proxy protocol
Merge pull request #1792 from rabbitmq/qq-dlx-fix
Merge pull request #282 from rabbitmq/msacc-command
Merge pull request #286 from rabbitmq/msacc-command
rabbit_channel: Import `queue_fold()` from rabbit_misc
Merge pull request #1795 from rabbitmq/rabbitmq-website-633
Add awk rule for new mandoc "Bd Bd-indent" class
Merge pull request #636 from rabbitmq/rabbitmq-server-1783
Merge pull request #1794 from rabbitmq/rabbitmq-server-1783
Add rabbit_fifo snapshot property test
New diagnostics command: runtime_thread_stats
Stop microstate accounting after sampling
Merge branch 'master' into msacc-command
Explain how man pages are generated
Document new cli switches
Take timeout case into account
Add code to enforce deadline when getting channel info items. Standardize return value from info gen_server handler
rabbitmq-hexpm.mk: Switch to hexpm-cli 0.2.0
Re-merge: oass on unwrapped socket here
Compile
Correct a merge
Ignore error when dead letter exchange cannot be found
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: remove SockJS, rabbitmq_clusterer, rabbitmq_management_visualiser
Log a warning if dead letter exchange cannot be found
Replace a couple instances of queue with lqueue
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Support hostnames with dashes in these tests
Update rabbitmq-components.mk
Merge pull request #280 from rabbitmq/rabbitmq-cli-278-2
Port Erlang/OTP node name code to Elixir
Roll wal on memory alarm
Merge branch 'master' into msacc-command
Introduce rabbit_runtime
Merge pull request #97 from rabbitmq/rabbitmq-web-stomp-40
Merge pull request #40 from rabbitmq/rabbitmq-web-stomp-40
Merge branch 'master' into rabbitmq-web-stomp-40
Merge branch 'master' into rabbitmq-web-stomp-40
Merge pull request #43 from rabbitmq/ranch_proxy_header
Merge pull request #98 from rabbitmq/ranch_proxy_header
Merge pull request #127 from rabbitmq/ranch_proxy_header
Merge pull request #167 from rabbitmq/ranch_proxy_header
Merge pull request #1747 from rabbitmq/ranch_proxy_header
Merge pull request #279 from rabbitmq/ranch_proxy_header
Support rabbit_proxy_socket tuples in rabbit_net:getstat/2
Default to port 15675 for TLS, too
Merge branch 'master' into ranch_proxy_header
Merge pull request #1787 from rabbitmq/dialyze-qq
Minor improvements to test stability
Remove inet_tcp_proxy modules
Merge branch 'master' into dialyze-qq
license files
Merge branch 'master' into ranch_proxy_header
Merge branch 'master' into ranch_proxy_header
Fix test to account for new event
Merge pull request #1782 from rabbitmq/qq-confirm-availability
Compile
Merge branch 'master' into dialyze-qq
Merge pull request #1774 from noxdafox/master
Merge pull request #283 from noxdafox/master
rabbit_channel: revert changes to IS_QUORUM macro
uncomment commented gc call
Better handle changing quorum queue leaders
Notify all enqueuers and consuers on leader change
rabbit_fifo: ensure credit is regained
Use correct key for recording quorum queue confirms
Merge pull request #1788 from rabbitmq/delivery-count-header
Rename x-redelivery-count to x-delivery-count to align with AMQP1.0
Add PROXY protocol support
Allow giving the peer address directly for initial_state
Merge branch 'master' into dialyze-qq
Add PROXY protocol support
Give valid cluster name to rabbit_fifo_client
Use the built-in Ranch PROXY protocol support
Use the built-in Ranch PROXY protocol support
Use the built-in Ranch PROXY protocol support
Use the built-in Ranch PROXY protocol support
Contributors are welcome on the mailing list
README updates
README edits
Merge pull request #31 from samnela/patch-1
Fix enabled plugin
Merge pull request #1785 from rabbitmq/rabbitmq-server-1784
Implement delete_immediately_by_resource
Use ra nodes to intialise rabbit_fifo_client
Fix rabbit_quorum_queue:status type spec
Optimise quorum_queue SUITE
Merge pull request #1764 from rabbitmq/qq-dlx-policy
Merge pull request #632 from rabbitmq/memory-breakdown-qq
Merge pull request #1772 from rabbitmq/memory-breakdown-qq
Add comment about not all ra servers being queues
Merge pull request #1771 from rabbitmq/return-unack-any-down-reason
remove unused variable
Ensure delivery doesn't happen when consumers are suspected down
Return delivered but unack messages to the queeu for noconnection reason
Update rabbitmq.conf.example for #1784
Make it possible to configure kernel.inet_dist_listen_{min,max} via new style config
Merge pull request #279 from rabbitmq/rabbitmq-cli-278
Make sure distribution is stopped first in these tests
Adapt this test for environments where inet:get_rc/0 returns no domain info
Do not raise error as offline commands will crash
Fix merge defaults test, fix warnings
Add tests for normalising name with :longnames
Fix test for @hostname case
Rename parse_node to normalise_node
Merge pull request #630 from rabbitmq/hide-classic-only-fields
Add function to normalise :node option after distribution started
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #284 from rabbitmq/ranch-1.7.1
Don't use exclusive consumer info item for single active consumer
Add x-redelivery-count header to quorum messages
Merge pull request #47 from rabbitmq/rabbitmq-shovel-46
More tests that use empty publish properties
Merge pull request #277 from rabbitmq/rabbitmq-cli-276
Merge pull request #1776 from rabbitmq/rabbitmq-cli-276
Validate log level values, format unsupported level errors in a more human-friendly way
Update Ranch to 1.7.1 and Cowboy to 2.6.1
Merge pull request #1778 from rabbitmq/rabbitmq-server-1777
Add command to set log level
Correct argument order for -pa
Add method to set log level at runtime
Add a few basic tests that use blank AMQP 0-9-1 publish properties
Merge branch 'master' of github.com:rabbitmq/rabbitmq-server
rabbit_mirror_queue_master: is_duplicate drop duplicate messages
rabbit_amqqueue_process: handle is_duplicate instructions
rabbit_backing_queue: extend is_duplicate callback return values
Travis: update Elixir version, test only on OTP 21
Merge pull request #634 from rabbitmq/rabbitmq-management-628
Add a basic definition import case that includes a vhost connection limit param
Merge branch 'master' into qq-dlx-policy
Add parameters to vhost definitions export/import.
Use single active consumer term when appropriate
Merge branch 'master' into rabbitmq-server-1743-exclusive-consumer
Use argument x-queue-type to figure out the queue type
Merge branch 'master' into rabbitmq-server-1743-exclusive-consumer
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #282 from rabbitmq/cowboy-2.6
Report quorum queues memory usage in rabbit_vm
Report quorum queues memory usage in node overview
Merge pull request #1765 from rabbitmq/remove-dead-letter-process
Merge pull request #275 from rabbitmq/rabbitmq-cli-274
Update one more test
Update Cowboy to 2.6 and Ranch to 1.7
Hide delivery mode for quorum queues
Implement credits flow
Merge pull request #1770 from rabbitmq/vhost_recovery_memory
Garbage collect after vhost recovery
Quorum queue: Run cancel_consumer handler async
Implement credits flow
Document --no-table-headers
Merge pull request #91 from mbaldessari/rabbitmq-ha-containers
Use ocf_attribute_target instead of crm_node
Merge pull request #1761 from rabbitmq/quorum-data-cleanup
Wording
Merge pull request #281 from jeckersb/fix-stop-brokers
rabbitmq-run.mk: Fix stop-brokers with NODES > 1
A follow-up to 35114e5dd48427cd434f05a6ce3bb4c5ebfdd020
Update this test for 3.8
Travis: use Elixir 1.6.6, test on Erlang 21.1
Travis: use Elixir 1.6.6, test on Erlang 21.1
Merge pull request #96 from rabbitmq/rewrite-more-like-web-mqtt
Drive by cosmetic changes
Merge pull request #39 from rabbitmq/add-missing-hibernates
Drive by cosmetic changes
Add two missing hibernate in returned tuples
Refactor Web-STOMP to be closer to Web-MQTT
Add aux functions is_quorum/is_classic
Merge pull request #90 from rabbitmq/rabbitmq-server-release-37
Revert "No need to use a global var here"
No need to use a global var here
Add document describing how to set up an env for Linux packaging
Windows doc tweaks
Add instructions to build Windows package on Windows
Merge pull request #89 from rabbitmq/lrb-windows-build
Hide classic fields irrelevant for quorum queues
Remove dead letter process
Add package changelog entries for 3.8.0-beta.1
Rename ra_machine_state to ra_machine_config
Merge pull request #1762 from rabbitmq/refactor-consumer-tag
Use temp file instead of pipeline in case a command is missing - it will make make exit
Support dlx policy changes in quorum queues
Remove use of elinks and mandoc
Refactor consumer tag in record_sent
Run cleanup test independently
Cleanup data for missing quorum queues
Handle errors while deleting quorum queue on minority
Use Maven wrapper for Java test suite
Fix Maven tests for CI environment
Use Maven wrapper for Java test suite
Fix Maven tests for CI environment
rabbitmq-run.mk: Add AMQP and management TCP ports to `test_rabbitmq_config`
Merge pull request #76 from asomov/minor-improvement
Refactor: remove AuthController.check() since it is used only once
Upgrade Spring Boot example to Spring Boot 2.1.0
Polish Spring Boot Kotlin example
Merge pull request #75 from asomov/spring-2
Format license headers, update (c) years
Merge pull request #104 from rabbitmq/rabbitmq-auth-backend-ldap-97
Merge pull request #1740 from rabbitmq/rabbitmq-server-161167716-2
Merge pull request #626 from rabbitmq/plugin-disable-ordering
Merge pull request #1758 from rabbitmq/plugin-disable-ordering
Rather than crash return error if search results in referrals
Merge pull request #625 from rabbitmq/rabbitmq-management-csp-hsts
Merge pull request #101 from Mutisk/patch-1
Add failing test for rabbitmq/rabbitmq-auth-backend-ldap#100
Fix LDAP evaluation resulting in list of strings.
Test that listeners are removed from mnesia when web dispatch is disabled
Call rabbit:stop_apps in reverse order
Add test for deny
rabbit_fifo: state_enter fix
rabbit_fifo: clarify prefix_msg_count
Improve CSRF configuration
Set CSP and HSTS response headers if configured
Minor log change
Use Kotlin 1.3.0
Simplify AuthController
Rename Kotlin project to use underscores as other examples
Implement and test all POST methods
Implement POST method
Add controller and its test
Rename classes to be shorter
Rename package to be shorter
Add Kotlin project created by SPRING INITIALIZR
Merge pull request #272 from rabbitmq/idempotent-stop
Update tests
Merge pull request #37 from rabbitmq/rabbitmq-server-1722
Naming
Merge pull request #271 from rabbitmq/rabbitmq-cli-270
Rename ignore-stopped flag to idempotent
Make stop idempotent using --ignore-stopped flag
Make CSV formatter return a string from format_output
Improve scenario where inet:get_rc/0 does not return domain info
Merge pull request #71 from rabbitmq/serialise-decimal
Ensure cli name ends with correct hostname
Merge pull request #30 from lerox/master
Fixing http method to create a shovel
Merge branch 'master' into serialise-decimal
Use an exchange decorator to drop all events when no binding is present
Merge pull request #103 from rabbitmq/lrb-add-user_bind_pattern-to-schema
rabbitmq-env.bat: Define `$RABBITMQ_QUORUM_DIR`
Add user_bind_pattern to schema
Add user_bind_pattern
Serialise decimal arguments
Remove syslog from DEPS
Configuration schema keys for CSP and HSTS
(c) year
packaging: Require Erlang 21.0
Merge pull request #269 from rabbitmq/rabbitmq-cli-267
Update test titles
Use a custom formatter for cipher_suites
Output in erlang term format that can be pasted into a config file
More warnings
More warnings
Squash a warning
Merge pull request #622 from rabbitmq/abbitmq-management-563-followup
Merge pull request #35 from rabbitmq/abbitmq-management-563-followup
Wording
Wording
Fix context restart and use two contexts (TLS and TCP) in rabbitmq-management web dispatch.
Make dispatch context removal idempotent.
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
add Ra as external dependency
Merge pull request #259 from rabbitmq/quorum-queue
Merge pull request #66 from rabbitmq/quorum-queue
Merge pull request #611 from rabbitmq/quorum-queue
Merge pull request #66 from rabbitmq/quorum-queue
Quorum queues (#1706)
Merge pull request #274 from rabbitmq/quorum-queue
Merge pull request #111 from rabbitmq/quorum-queue
rabbitmq-diagnostics: make cipher_suites default to --openssl-format
Merge pull request #99 from rabbitmq/lrb-tokenize-netbios-usernames
Add unit test for ad_domain / ad_user
Tokenize NetBIOS logins on the backslash character
Improve error reporting for quorum queues commands.
Delete quorum member command
Add quorum queue member command
Add quorum status command to report local ra state
rabbit_ct_broker_helpers: Add ability to use a secondary Umbrella
Remove forced event refresh
Revert "Revert "Collect ra open file stats""
Revert "Collect ra open file stats"
Retrieve quorum status from amqqueue record
Format follower/leader details into mirroring format
Update ra_log_segment_writer name
Revert "Revert "Collect ra open file stats""
Collect ra io stats
Revert "Collect ra open file stats"
Collect ra open file stats
Retrieve quorum status from amqqueue record
Format follower/leader details into mirroring format
Remove queue type option from arguments table
Select only relevant options to declare a quorum queue
Copy by reference as the object is not used anymore
Fix minority calculation
Revert "Revert "Display ra open file stats on queue and node overview pages""
Revert "Display ra open file stats on queue and node overview pages"
Display ra open file stats on queue and node overview pages
Display members and online information for quorum queues
Ensure connection is closed for quorum queue test
Test metrics removal on queue delete for quorum queues
Add type option to queue declare in queues page
remove commented code
Correct a typo
Remove commented out code
README updates
README updates
Bump EC2 API endpoint request timeout to 10s
Merge pull request #620 from rabbitmq/rabbitmq-management-604
Revert change of range in vhost stats introduced in 505c45fb
Make logo lead to /#: it works better with a path_prefix
Handle basic.credit_drained frame
Use x-single-active-consumer queue argument
Add test for quorum queues
Add API for client to pass the drain flag
Use --no-table-headers with list_* CLI commands
Merge pull request #268 from rabbitmq/mk-header-suppression-flag
Check exclusive consumer isn't blocked before delivery
Add member/2 to priority_queue module
Make it possible to suppress table headers for list_* commands
Forbid AMQP exclusive consume in exclusive consumer queue
Merge pull request #266 from rabbitmq/rabbitmq-server-1712
Merge pull request #1745 from rabbitmq/rabbitmq-server-1712
Output cipher suites one by one
Merge pull request #265 from rabbitmq/table-formatter-headers
Pick new exclusive consumer after channel goes down
Expose cipher configuration to new style config format
Merge pull request #278 from rabbitmq/lrb-update-heartbeat-sock-stats-after-sending-frame
Update socket stats after running handler
Merge pull request #619 from rabbitmq/rabbitmq-management-563-advanced-opts
Support advanced Cowboy options via management.{tcp,ssl}.*
Implement exclusive consumer (WIP)
Add headers to the table formatter.
remove duplicated code
Set node name for rabbit_prelaunch step in Windows scripts
Remove unused -nodename argument to erl, ensure that RABBITMQ_NAME_TYPE is used correctly in Windows batch files
remove created_at from amqqueue record
Merge pull request #1738 from ar7z1/master
Unroll fmt/1 into fmt/2 for performance enhancement
Update test cases
Merge pull request #618 from rabbitmq/rabbitmq-management-563
Clarify a comment
Start TCP and TLS listeners based on what app environment keys are present
modernise pmon
Introduce new configuration settings for separate TCP and TLS listeners
Improve error reporting in rabbitmq-server.bat
Merge pull request #1736 from ar7z1/master
Optimisation: store vhost in gen_event state
Cleanup EXIT case-style
Improve error reporting in rabbitmq-diagnostics.bat
Improve error reporting in rabbitmq-plugins.bat
Optimise rabbit_exchange_type_event:key/1
Optimise fmt_proplist performance
Fixes #1735: Improve error reporting in rabbitmqctl.bat
Remove dependency on erlang-src
Increase queue churn metrics when queues are deleted in bulk by node down
New connection churn metrics table
Merge pull request #70 from rabbitmq/rabbitmq-server-1723
Request churn rates for the given node
Merge pull request #1733 from rabbitmq/lrb-fix-logger-badmatch
Merge pull request #616 from rabbitmq/rabbitmq-management-615
Catch one more error when disabling default logger
Request target node data only in /api/nodes/<node>
Merge pull request #614 from rabbitmq/rabbitmq-server-1723
Modal description for churn rates
Merge pull request #88 from rabbitmq/rabbitmq-server-release-87
Merge pull request #1728 from rabbitmq/rabbitmq-server-1718-syslog-localhost
Only start syslog application if it is required
Do not rename existing rabbitmq.conf file
Merge pull request #1731 from rabbitmq/rabbitmq-server-1709
Ensure EPMD env vars are exported if set
Merge pull request #166 from rabbitmq/rabbitmq-server-1729
comment
Merge pull request #126 from rabbitmq/rabbitmq-server-1729
comment
Merge pull request #36 from rabbitmq/rabbitmq-server-1729
Merge pull request #92 from rabbitmq/rabbitmq-server-1729
include/rabbit.hrl: Bump Erlang requirement to 21.0
Use 10 TLS connection acceptors by default
Use 10 TLS connection acceptors by default
Use 10 TLS connection acceptors by default
Use 10 TLS connection acceptors by default
Merge pull request #1730 from rabbitmq/rabbitmq-server-1711
Merge pull request #69 from rabbitmq/rabbitmq-server-1723
Merge pull request #613 from rabbitmq/rabbitmq-server-1723
Merge pull request #1726 from rabbitmq/rabbitmq-server-1723
Merge pull request #277 from rabbitmq/rabbitmq-server-1723
Refactor listener startup error handling
Use Pika 0.12.0 for Python 3.7 compatibility
Merge pull request #20 from rabbitmq/cuttlefish-lock-timeout-alias
Merge pull request #16 from rabbitmq/cuttlefish-lock-timeout-alias
Merge pull request #19 from rabbitmq/rabbitmq-peer-discovery-consul-18
Alias cluster_formation.etcd.lock_timeout to cluster_formation.etcd.lock_wait_time
Commit missing tests
Alias cluster_formation.consul.lock_timeout to cluster_formation.consul.lock_wait_time
Make it possible to configure Consul service tags via new style config
Merge pull request #35 from rabbitmq/rabbitmq-web-mqtt-34
formatting
Add connection/queue/channel churn rates tests
Merge pull request #276 from rabbitmq/remove-erlang-src-dependency
Remove dependency on erlang-src
Increase queue churn metrics when queues are deleted in bulk by node down
Report connection/channel/queue churn
Merge pull request #91 from rabbitmq/rabbitmq-web-stomp-90
formatting
Propagate WebSocket options; enable compression by default
Enable compression by default
Make it possible to configure WebSocket options such as compression
Handle unspecified ws_opts, references #89
Supprot more web_stomp.ws_opts.* options
Report connection/channel/queue churn
Report connection/channel/queue churn in node/overview pages
New connection churn metrics table
Merge branch 'yjh0502-ws_compress'
Basic tests for WebSocket options in config schema
Keep Cowboy WebSocket options under web_stomp.ws_opts.*
allow websocket compression extension
A testcase to verify confirms-rejects race condition fixed in 8b37501451d2ef66dbf16b62b84684b74157dcbc.
Merge pull request #263 from rabbitmq/rabbitmq-cli-261
Merge pull request #1720 from rabbitmq/rabbitmq-cli-261
Merge pull request #1719 from rabbitmq/rejects-confirms-interdependency
Use the correct key name for plugin archive directory
Retrieve plugin directory and file information via Config
plugins_dist_dir/0 => plugins_dir/0
removed TODO
Merge branch 'master' into rabbitmq-cli-261
Merge pull request #1715 from rabbitmq/bindings-optimisation
Merge pull request #68 from rabbitmq/rabbitmq-management-agent-67
Make warning a bit more verbose
Fix min function to lists:min instead of erlang:min.
Simplify clauses, make --offline more robust
Don't force -q in rabbitmq-plugins
Wording
Wording
Naming; use erlang:min/2 instead of lists:min/1
Merge branch 'master' into rabbitmq-cli-261
Drive by cosmetic changes
New command: rabbitmq-plugins directories
Take reject into account when sending confirms and vice-versa.
Makefile: Stop producing the source archive compressed using Zip
Merge branch 'master' into quorum-queue
rabbit_pbe: re-format NotSupportedByUs list
rabbit_pbe: add function clauses to match sha3 hashes
Merge branch 'master' into rabbitmq-cli-261
Don't force --formatter=plugins on rabbitmq-plugins commands
Add a few applications to PLT_APPS
rabbitmq_plugins: export plugins_dist_dir/0, plugins_expand_dir/0, introduce enabled_plugins_file/0
Replace match_object with dirty_match_object for binding cleanup.
Use delete instead of delete_object and read instead of match_object in bindings where possible.
Update test expections
Merge pull request #262 from rabbitmq/rabbitmq-cli-260
Merge pull request #1714 from rabbitmq/rabbitmq-cli-260
Delete vhost at the end of this test
Merge pull request #32 from rabbitmq/ignore-ping-pong
Merge pull request #275 from rabbitmq/rabbitmq-server-1654-add-error-message
Improve error case if erl / erl.exe is not in PATH
Fix bug in metrics gc
Ignore ping/pong Websocket frames
Expect rabbitmqctl add_vhost to be idempotent
Make rabbit_vhost:add/2 idempotent
Merge pull request #608 from rabbitmq/get-empty-stats
Merge pull request #65 from rabbitmq/get-empty-stats
Merge pull request #1701 from rabbitmq/get-empty-stats
Merge pull request #273 from rabbitmq/get-empty-stats
Remove duplicated code
Merge branch 'master' into get-empty-stats
Merge branch 'master' into get-empty-stats
packageing: Consider older releases in `update-changelog.sh`
Revert "Configure ra metrics handler"
Configure ra metrics handler
remove quorum_mapping table
Export block/unblock for flow control
dialyzer fix
Revert "Add quorum_leader to amqqueue record"
Add quorum_leader to amqqueue record
Add quorum_nodes to amqqueue record
Add created_at field to amqqueue record
Revert Revert "Extend amqqueue record to include queue type"
 Use RABBITMQ_QUORUM_DIR as ra data_dir when starting a node
Create quorum_mapping table to obtain queue name from a ra id
Set the ra data_dir when starting a node
Merge pull request #17 from rabbitmq/rabbitmq-peer-discovery-consul-16
Drive-by change: remove a file that should be ignored
Expose locking settings via Cuttlefish config
Merge pull request #610 from rabbitmq/rabbitmq-management-609
Ensure that login success clears a warn popup
rabbit_pbe: Mark AES-CCM as unsupported
Makefile: Add ranch to the `BUILD_DEPS`
rabbitmq-components.mk: Bump Ranch to 1.6.2
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
tcp_listener_sup: Switch to ranch:child_spec/5
rabbit_ct_broker_helpers: Bump Lager flood limit from 200 to 10000
Add basic.get_empty stats
Add get empty stats as a new counter
Add get empty stats as a new counter
Add get empty stats as a new counter
Merge pull request #1700 from rabbitmq/rabbitmq-server-1699
Clarify
Combine two clauses here
Make pg_local:member_died/2 more resilient
Merge pull request #84 from rabbitmq/lrb-set-open-files-limit-systemd
Merge pull request #86 from rabbitmq/rabbitmq-server-release-85
Use template in rabbitmq-script-wrapper for RabbitMQ user and group
Ensure ~rabbitmq/.erlang.cookie is readable after running a command as root
Travis: try OTP 21.0
Travis: test against OTP 20.3.x and 21.x
Check for Elixir 1.6.6
Install Elixir 1.6.6 on Travis
Explain why each group uses a dedicated node
Start a node per test group
Don't assert on function name
Tear down whitelisted certificate dir between group runs
rabbit_pbe: Mark ChaCha20 as unsupported
rabbitmq-components.mk: Bump 3rd-party dependencies' pinning
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #15 from rabbitmq/rabbitmq-peer-discovery-etcd-14
Simplify
Whitespace, add a couple tests for cluster name with slash
Handle keys for which node name extraction returned an error
Extract node name from a /nodes/{name} sequence
Failing tests for #14
Merge pull request #1695 from rabbitmq/lrb-error-text-formatting
Merge pull request #607 from rabbitmq/absolute-link-rabbitmqadmin
Merge pull request #22 from rabbitmq/absolute-link-rabbitmqadmin
Add test helper for asserting permanent redirects
Add tests for /cli & /api redirects
Use 32768 as the default open files limit
Use redirects for /api and /cli
Format errors and warnings with regard to config files in a manner similar to lager
Use the base tag so that rabbitmqadmin href is built correctly
Merge pull request #1694 from rabbitmq/lrb-fix-badmatch-file-extension
Use absolute link for rabbitmqadmin
Fix a potential badmatch error
move amqp1.0 dependency to TEST_DEPS
Merge pull request #606 from rabbitmq/enforce-default-port-if-missing
Make sure listener has a port even if it's not provided in the config
Merge pull request #87 from rabbitmq/rabbitmq-web-stomp-86
Make WebSocket endpoint configurable
debian/control: Mark Erlang 22+ as incompatible
Merge branch 'tsauzeau-feat/ws-path-as-parameter'
One more config schema test case
debian/control: Replace erlang-nox by "leaf" packages
Retrieve ws path from config
Make chi squared test an observation we log, not an assertion
Move schema dir creation to the point it's going to be used.
Merge pull request #1691 from rabbitmq/remove-bindings
Remove a couple of sentences that may be slightly misleading now
Idempotent binding removal
Merge pull request #1689 from rabbitmq/forgiving-binding-removal-on-queue-deletion
Don't error when a queue that's being deleted has no bindings to remove
Merge pull request #39 from rabbitmq/hash-ring-management-fixes
packaging/standalone/Makefile: Copy `no_dot_erlang.boot` to the package
Remove table locking
Create a new map with the updated buckets
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Update git-commit-msgs link
Use only a subset of queues in routing tests
Commit a new header file
More tests, more idempotent binding management operations
Store hash ring state in a single table
Ignore debug/*
Merge pull request #21 from rabbitmq/tls-server-certificate-add-localhost-in-san
Merge pull request #1686 from rabbitmq/lrb-set_parameter-docs
Merge pull request #258 from rabbitmq/rabbitmq-cli-256-followup
Change example to use parameter that exists
Add global parameters to rabbbitmqctl report
Use sed to set DNS.1 in SAN since LibreSSL does not do env vars correctly
Ensure HOSTNAME is exported
Add HOSTNAME as DNS.1 in server_alt_names
Add localhost as SAN to server certificate
rabbit_ct_vm_helpers, tools/terraform: Pin Elixir version
Merge pull request #1671 from rabbitmq/config_files_check
Explain
Update bucket numbers for each queue just once
WIP More hash ring management fixes
Comments
WIP: Hash ring management fixes
Merge pull request #34 from rabbitmq/cowboy-compress
Include stream handlers into debug log message
Replace compress option by cowboy_compress_h
Merge pull request #1681 from rabbitmq/topology-recovery-in-status
Use process status to pass the auto_delete flag
Correct a PR template typo
Link to the examples directory
Examples: correct plugin repo links
Minor README improvements
A typo
Executable examples for Ruby
README: Unify Ruby examples
Executable examples for Python
Increase sample count to pass Chi squared test in more environments, reorganise tests
Bring back the Chi squared test assertion, bump the number of samples
Fix a warning
Use an OTP 19.3 compatible seed generation algorithm
Merge pull request #164 from rabbitmq/rabbitmq-mqtt-163
Make dialyzer ignore missing gen_event:start_link/2
Session flag must be calculated before declaring the queue
Don't assert on Chi squared test value
Erlang/OTP 19.3 compatibility for #37
Test suite improvements
Don't try to parse every routing key as an integer
A typo
Merge pull request #34 from rabbitmq/rabbitmq-event-exchange-33
Drive by change: use more modern version of Elixir in .travis.yml
Use eunit macros for assertions
Delete exchange when unregistering/disabling plugin
A typo
Add Ch-squared test results to implementation details
Merge pull request #38 from rabbitmq/rabbitmq-consistent-hash-exchange-37
Extract a few test helpers
More code examples in Java, minor doc edits
Add a Java code example
Test different bucket sizes
Test - and fix - binding cleanup
More code examples, minor edits
Code examples in more languages for the header routing example
Provide examples in Python and Ruby
More documentation updates
Documentation updates
Verify distribution using chi-square test
Merge pull request #1675 from rabbitmq/topology-recovery
Generate an intermediate hash value for every non integer value to hash
Fix routing on jump consistent hashing
Merge branch 'master' into topology-recovery
Rework bucket management, use jump consistent hashing
Increase performance of auto_delete queues deletion on channel down
Merge pull request #1673 from rabbitmq/lrb-add-channel_max-detail
A typo
A more precise comment
Log errors as, well, errors
Improve formatting of logged connection.tune errors/exceptions
Add detail for channel_max 0 value
Remove typo
Remove -Wunmatched_returns from default dialyzer options.
Merge pull request #32 from rabbitmq/rabbitmq-event-exchange-31
Expose rabbitmq_event_exchange.vhost to new style config
Add extension to default advanced config file name on windows
Batch file syntax errors. Config check error format
Use file:consult to check if .conf is of the old format. Add more errors to the .config check
Improve the error message when a config file is not in the correct format
Move file with no extension variable assignment before it's used
Do not add ./ to NOEX files if the file is in the current dir
Do not show non-existent .conf file as a configuration file in logs
Better warning and error messages in scripts.
Fix function removing extension.
Simple validation for config file content and extension.
Expect extensions in config filename arguments
Refactor config file discovery. Make advanced config load if no old format config is used
Update rabbitmq.conf.example
Merge pull request #45 from rabbitmq/handle_amqp_encoded_values
Merge pull request #22 from rabbitmq/handle_amqp_encoded_values
Merge pull request #2 from rabbitmq/handle_amqp_encoded_values
Merge pull request #1669 from noxdafox/priority-info
Handle amqp encoded body values.
Add amqp10_msg:body_bin/1 function
Make amqp_sequence roundtrippable
OTP 19.3 compatibility
Handle generic data structures in priority queue info callback
Merge pull request #44 from rabbitmq/azure-sb-compat
Merge pull request #21 from rabbitmq/uri-improvements
Merge pull request #29 from rabbitmq/azure-sb-compat
fix shovel management display
Wait for credit when setting up destination
URI decode user and password when parsing
Merge pull request #108 from rabbitmq/rabbitmq-erlang-client-107
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Switch back to Ranch 1.5.0
AMQP(S) URI that specifies port without host is an error
Merge pull request #20 from rabbitmq/uri-improvements
Merge branch 'master' into uri-improvements
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Bump 3rd-party dependencies' pinning
improve URI support
Merge pull request #1666 from rabbitmq/lrb-ssl_dist_optfile-windows-159602360
Set two environment variables in the same manner as on Unix systems
Edit wording so that it makes sense
Clarify who maintains the image
Merge pull request #63 from rabbitmq/rabbitmq-management-601
Remove duplicates from proplists in one more case
Avoid duplicate keys in rabbit_mgmt_format:strip_pids/1
Merge pull request #600 from rabbitmq/rabbitmq-management-596
Expose more Cowboy listener options in Cuttlefish schema
Expose more Cowboy listener options in Cuttlefish schema
Expose more Cowboy listeners in Cuttlefish schema (WIP)
Expose Cowboy listeners in Cuttlefish schema (WIP)
Merge pull request #597 from ankit-maverick/fix-typo
Fix typo in www/js/global.js
Merge pull request #257 from rabbitmq/require-elixir-1.6.6
Extra debug logging for HTTP[S] listeners
RabbitMQ.CLI.Core.Parser: Set `allow_nonexistent_atoms` in OptionParser
mix.exs: Require Elixir >= 1.6.6 and < 1.8.0
Merge pull request #1658 from rabbitmq/lrb-add-hostname-syslog-support
Remove requirement that ip or host be set, since the default is 127.0.0.1
Add translation to support .host and .ip setting syslog.dest_host
Merge pull request #1660 from rabbitmq/rabbitmq-server-1659
Max number of atoms hasn't changed in 118b448631a699736f1380d7990989c7e61f94ff, back out my changes
Correct resource limit defaults: Erlang distribution buffer size and others
Add support for syslog server hostname
Merge pull request #595 from rabbitmq/rabbitmq-management-593
Mention "seconds" here as well
no need for aliased exception
update request timeout docstring
Print request timeout value when socket.timeout happens, more friendly connection refused formatting
More friendly display of timeout error and other exceptions that getresponse may raise
rabbitmqadmin: introduce a new flag, --request-timeout
Merge pull request #20 from rabbitmq/lrb-travis-ci
Since we install Erlang, use generic language
Ignore elixir error
Add Travis CI build status to README.md
Update Travis CI configuration
Merge pull request #19 from rabbitmq/lrb-rename-uaa_jwt
Rename uaa_jwt app env setting to key_config
Merge pull request #256 from Ayanda-D/include-policies-and-parameters-to-report
Filter out option username and password
Merge pull request #25 from rabbitmq/consumer-user-pass-api
Naming
Merge branch 'master' into consumer-user-pass-api
Merge pull request #24 from rabbitmq/api-cluster-support
Fix formatting
Doc edits
Documentation improvements
/n/ => /nodes/ in API endpoint list
/n/ => /node/ in routes
More README edits
Merge branch 'xneg-dotnet_core_example'
Wording and README edits
Merge branch 'dotnet_core_example' of https://github.com/xneg/rabbitmq-auth-backend-http into xneg-dotnet_core_example
* Updated Readme.
Merge pull request #591 from kitsirota/increase-vhost-start-timeout
Bumping vhost start timeout
Document prefix HTTP api calls with node with '/n/' to distinguish from the others
Provide consumer username and password in HTTP api
Prefix HTTP api calls with node with '/n/' to distinguish from the others
Fix typos in readme
* Added standard logging. * Changed user checked response for correct tags placement.
Include node in HTTP API and UI
Fix typo
Merge pull request #1650 from rabbitmq/binding-global-recover
Merge pull request #1647 from rabbitmq/cancel-sync-slaves
Cosmetics
debian/control: Remove package revision from version requirement
Compile from scratch
Prepare bindings table in a separate recover function.
ASP .NET Core 2.1 example
Ninja fix: correct a type spec typo
Merge pull request #18 from rabbitmq/lrb-no-uaa_jwt-app-fixes
Merge pull request #80 from Ayanda-D/use-upstream-queue-name-on-upstream-exchange-name-definition
Cancel synchronisation when memory alarm is triggered
Reduce code footprint on aliases
Add internal backend to symmetric_keys rmq config
Add missing rabbitmq_ct_client_helpers dependency needed by system_SUITE.erl
uaa_jwt is no longer a separate application
Auth backend module rename
avoid multiple creation of upstream queue name when defining upstream exchange name. Use that already held in the link state.
tools/terraform/direct-vms/templates/setup-erlang.sh: Use packages for Erlang 21.0
Merge pull request #590 from rabbitmq/scroll-to-top-after-navigate
Formatting
Scroll to the page top when rendering a new template.
Merge pull request #17 from rabbitmq/lrb-misc-fixes
Miscellaneous build and doc fixes
README edits and line ending conversion
rabbitmq_auth_backend_uaa => rabbitmq_auth_backend_oauth2
Fold uaa_jwt into this plugin
Add a missing \ to the seed script
Be explicit about supported etcd versions
More integration tests
rabbitmqctl.8: Wrap a long line
Merge pull request #1641 from blgm/rename_node_docs_improvement
More integration tests
More integration tests
Merge pull request #43 from Ayanda-D/remove-unused-macros
remove unused 'IGNORE_FIELDS' & 'EXTRA_KEYS' macros
Initial integration tests
Merge pull request #270 from rabbitmq/rabbit_event_not_fail_on_boot
Make rabbit_event:notify NOT fail if rabbit_event is not started yet.
Updates based on feedback in PR #1641
Merge pull request #1643 from rabbitmq/rabbitmq-server-1642
Correctly call rabbitmq-env.bat
Include policies and parameters in report command
Ditto in close_all_connections_command_test
This test requires code_server_cache to be started
(c) year
An attempt to make this test more robust
Merge pull request #79 from Ayanda-D/acquire-link-conn-name-once-and-make-name-util-more-explicit
acquire upstream & downstream connection names once per exchange or queue link initialization
make federation util name/1 helper for resource translation more explicit (it translates both exchange and queue resources, from both links)
Merge pull request #32 from rabbitmq/not_named_ets_tables
Merge pull request #78 from Ayanda-D/fix-exchange-link-childspec-module
Additional info for `rabbitmqctl rename_cluster_node` man page
fix exchange link child-spec release handling module
Restore OTP 21 compatibility
Merge pull request #1640 from rabbitmq/lrb-vesc-888
Merge pull request #125 from rabbitmq/lrb-vesc-888
Add rabbit_stomp_connection_info module
Add code_server cache to prevent code:get_object_code abuse
Don't await a logger process that won't ever be started on OTP 21
Python test suite: compatibility with Python 3.5+
Don't await a logger process that won't ever be started on OTP 21
Merge pull request #70 from xneg/master
Added a missing type declaration.
Include not named_tables on top overview
Include tag tests in more cases
Extract tags from the provided JWT token
[Re]add tag authorities to the seed script
Set access token validity to 24 hours
Revert "Add tag authorities to the seed script"
Logging, naming
Adopt uaa_jwt:client/2 and uaa_jwt:sub/2
Add tag authorities to the seed script
Ditto
Example README edits
More comments and links in the stateful sets example
Log which module in the chain successfully authenticated the user
Pass decoded token so that effective username is computed from it
Merge pull request #14 from RickCarlino/patch-1
Very minor typo in README.md
Expect access token in the password field
Merge pull request #13 from rabbitmq/rabbitmq-server-1633
Accept authentication context in user_login_authorization/2
Merge pull request #96 from rabbitmq/rabbitmq-server-1633
Merge pull request #69 from rabbitmq/rabbitmq-server-1633
Merge pull request #1634 from rabbitmq/rabbitmq-server-1633
Merge pull request #268 from rabbitmq/rabbitmq-server-1633
Merge pull request #82 from rabbitmq/rabbitmq-server-release-81
Delete cookie if present, then copy
Accept authentication context in user_login_authorization/2
Accept authentication context in user_login_authorization/2
Pass authentication context to Mod:user_login_authorization/2
Pass authentication context to Mod:user_login_authorization/2
Copy from "new" location of .erlang.cookie file
Wording
Split the unsuccessful authorization test into 3
Convert all suites to use EUnit matchers
More test massaging, remove debug logging
Split and simplify unit tests; naming
Sync rabbitmq-components.mk, drop Elixir build system bits
Merge pull request #31 from rabbitmq/erlang-otp-21-compatibility
Add a seed script for development
Remove the 'id' info that cannot be serialised by jsx
Make ./examples more discoverable
Merge pull request #33 from rabbitmq/fix-sendfile-access-logs-crash
Handle sendfile bodies when writing access logs
Merge pull request #13 from rabbitmq/rabbitmq-peer-discovery-consul-12
Make it possible to use NIC for service name calculation when svc_addr_auto is set to true
Merge branch 'ricardobcl-rabbitmq-federation-76'
Wording
Better errors when validating the decoded token
Fix demo script. Add rabbit_client client to request token.
When trying to open a channel, don't expect that the connection is up and running. Protect against connection being down or closing.
debian/control: Bump Elixir requirement to 1.6.6
Fixes the "zombie" direct connections, when using Federated Exchanges and forcibly closing the upstream connections. This happens deterministically 100% of the time. The fact that direct connections do not close, causes a process and memory leak on RabbitMQ.
Merge pull request #16 from rabbitmq/erlang
Use master branch of uaa_jwt
rabbit_ct_vm_helpers, tools/terraform: Add Erlang app version in VM names
Use OTP 21 GA, pin OTP 22 to a recent master commit
Erlang/OTP in master is now 22.0
Merge pull request #584 from rabbitmq/configurable_login_session_timeout
Switch management.login_session_timeout to minutes
Use erlang version of uaa_jwt and jose
Add test to config_schema_SUITE for new management.login_session_timeout setting
Update main.js
Make login session expiration configurable
Merge pull request #30 from 007/patch-1
change probe period from 10s to 60s
Merge pull request #1626 from Duske/patch-1
(doc) fix typo in mqtt vhost section
Merge pull request #95 from rabbitmq/rabbitmq-auth-backend-ldap-94
Allow auth_ldap.dn_lookup_bind to be set to anon in rabbitmq.conf, closes #94
Make the ping command available in rabbitmq-diagnostics as well
Wording
Merge pull request #254 from rabbitmq/rabbitmq-cli-253
Pass current node as is_auth "argument"
Introduce rabbitmqctl ping
Doco updates based on recent mailing list discussions/feedback
rabbit_mgmt_http_SUITE: Percent-encode `^` in URLs
Use %2F instead of %2f to percent-encode the `/` vhost
rabbit_ct_helpers: Don't stop testsuite monitor if it's not running
Merge pull request #80 from skazi0/sysexists-in-ocf
rabbit_ct_vm_helpers, tools/terraform: Support Erlang built from sources
Use sysexists exit codes in OCF agent script
Use rabbit_ws_handler as a regular module, not a parameterized one
Compile on OTP 21 from scratch
Compile on OTP 21 from scratch
Merge pull request #19 from rabbitmq/erlang-otp-21-compatibility
Merge pull request #64 from rabbitmq/erlang-otp-21-compatibility
Merge pull request #161 from rabbitmq/erlang-otp-21-compatibility
Merge pull request #1615 from rabbitmq/erlang-otp-21-compatibility
Merge pull request #265 from rabbitmq/erlang-otp-21-compatibility
system_SUITE: Remove unused variable in init_per_testcase()
system_SUITE: Accept Erlang 21 stacktrace in channel_death()
Makefile: Use our emqttc fork, at least temporarily
Compile Erlang/OTP 21
Compile Erlang/OTP 21
Be more defensive about what output rabbitmqctl eval produces here
Compile Erlang/OTP 21
rabbirmq-run.mk: Use rabbitmqctl(1) instead of erl_call(1)
rabbit_pbe: Mark ChaCha20-Poly1305 as unsupported
Compile Erlang/OTP 21
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Update lager to 3.6.3
Same as 2c2597e56ef7050c196d82c22e73c441bd85e5b5 but for int_tcp_proxy
Compile Erlang/OTP 21
Handle file descriptor (I/O) stats as returned by OTP 21
Use rabbit_data_coercion:to_list/1 to coerce discovered node name to a string
Don't await for error_logger handlers to initialise
More test stability improvements
Less fragile diagnostics tests, squash a few warnings
Minor README updates
rabbit_ct_config_schema: Remove debug message
rabbit_ct_helpers: Use get_config() instead of ?config()
Log exit code when the test rabbitmqctl invocation fails
Reduce false-positive test failures by increasing timeouts
Merge pull request #1617 from notque/patch-1
fix default heartbeat in example conf file to 60
Merge pull request #1604 from essen/better-default-allocs
Merge pull request #93 from rabbitmq/rabbitmq-auth-backend-ldap-92
Log message wording
Purge defunct connections in more cases
Erlang/OTP 19.3 compatibility
Merge pull request #251 from rabbitmq/rabbitmq-cli-235
Merge pull request #1611 from rabbitmq/rabbitmq-cli-235
An integration test for rabbit_nodes:await_running_count/2
Tests for await_online_nodes, drive by wording changes
Explicitly state that this is just an example
Update example liveness probe frequency
New command: await_online_nodes <count> [--timeout <timeout>]
rabbit_nodes:await_running_count_with_retries/2: correct type spec and base clause return value
Use better default memory allocators
Merge pull request #12 from rabbitmq/rabbitmq-peer-discovery-etcd-10
Revert "Bump dependencies"
Add test for etcd_prefix and cluster_name
Merge pull request #1601 from rabbitmq/rabbitmq-server-1596-connection-name-to-connection-closed-event
Add connection name to connection created/closed events if necessary
Introduce rabbit_nodes:await_running_count/2
Bump dependencies
Make sure internal_server_error/4 is exported
Restore Erlang/OTP 19.3 compatibility
Merge pull request #579 from anup5512/master
Merge pull request #577 from rabbitmq/rabbitmq-management-575
Merge pull request #1608 from rabbitmq/rabbitmq-management-575
Naming
Return result from waiting for vhost to start in put_vhost function.
Merge pull request #4 from anup5512/url_encoding_fix
Using quote() instead of quote_plus()
Clarify what MPL version is used, references #1609
Merge pull request #3 from anup5512/url_encoding_fix
Replaced '+' encoded space with "%20"
Merge pull request #2 from anup5512/url_encoding_fix
Fixed quote() breaking 'list' subcommand
Merge pull request #1 from anup5512/url_encoding_fix
Replaced quote_plus() with quote()
Fix to replace encoded space as '%20' instead of '+'
Merge pull request #59 from rabbitmq/rabbitmq-management-agent-58
Update tests to fail in more informative ways
Update tracing settings even when the vhost does not exist
Introduce rabbit_vhost:await_running_on_all_nodes/2
Await for virtual host to fully initialise on all nodes when it is added
Force events refresh when the management plugin is enabled
Merge pull request #1600 from rabbitmq/syslog
Syslog formatter is different from e.g. the file one now, update the tests
Add connection_user_provided_name to connection created/closed events
Make syslog a proper dependency of rabbit application, just like lager.
Remove date and time from lager formatter when logging to syslog.
Pin syslog library version to 3.4.2
Fix syslog config translation tests.
Bring back transactional match_object for bindings cleanup.
Add client properties to connection.closed events
Merge pull request #572 from rabbitmq/warning-colour
Use red colour
Do not parse syslog IP in schema transformer. String IPs are supported anyway.
Cuttlefish schema to configure syslog application.
Use hex instead of colour name in abbr warnings
Merge pull request #571 from rabbitmq/rabbitmq-management-531
Add a second user to the Spring Boot example
Manually apply #68 with reduced duplication
Typo/weird wording
Remove two files that were not meant to be committed in ee9a02429
Integrate syslog library into rabbitmq logging
Merge pull request #1589 from rabbitmq/exclusive-queues-cleanup-optimisation
Only try to set permissions for existing internal users
Merge pull request #1597 from rabbitmq/rabbitmq-server-1590
Use MAX_SUPPORTED_PRIORITY constant for argument validation
Ignore lock kind argument when dirty-deleting a route
Follow-up to 08168de6b0c3c4d7f6429f2c3d098e5080ff7b1a
Revert "Take policy-configured max-priority into account"
Do dirty deletes when cleaning up bindings.
Use the constant across the board
Do not lock entire routing table when cleaning up bindings.
Merge pull request #264 from rabbitmq/rabbitmq-server-1590
Take policy-configured max-priority into account
Reject max-priority arguments >= 256
Introduce MAX_SUPPORTED_PRIORITY
Make policy validation aware of the max-priority argument
Merge pull request #105 from rabbitmq/rabbitmq-server-1593
Merge pull request #1594 from rabbitmq/rabbitmq-server-1593
Use 2047 instead of 2048
Use 2047
Change channel_max default to 2048
Change channel_max default to 2048
Merge pull request #41 from rabbitmq/rabbitmq-shovel-40
Fix bug generating AMQP 0.9.1 connection name.
Use assertEqual in rabbitmqadmin tests
A more explicit version of #569 by @pjmyburg
only call maybe_utf8 if val is not None
Test reliability
rabbit_misc:pget/{2,3}: support maps
Coerce upstream set element to a proplist
rabbit_misc:pget/{2,3}: move spec to the defition, use modern list type signature
Merge pull request #57 from rabbitmq/convert-sni_hosts-to-jsx-compatible-struct
Skip SNI option to avoid recursive TLS option formatting
rabbit_mgmt_format: Convert `sni_hosts` to something compatible with jsx
Unused variable.
Do not try to stop all slaves from slave process. Stop it and let another be promoted
Merge pull request #67 from rabbitmq/lrb-do-not-use-utf8-bom
Ensure that BOM is not sent in UTF8-encoded response
Merge pull request #566 from rabbitmq/rabbitmq-management-565
Merge pull request #1586 from rabbitmq/rabbitmq-management-565
Merge pull request #564 from rabbitmq/queue-not-promote-on-crash
Merge pull request #1578 from rabbitmq/queue-not-promote-on-crash
One more place where a map definition must be converted to proplist before validation
Make sure import failures trigger Common Test failures
Add a test case for #565.
Merge pull request #1583 from rabbitmq/rabbitmq-server-1582
Fix a typo
Merge pull request #1 from rabbitmq/qpid-jms-client-support
Merge pull request #18 from rabbitmq/qpid-jms-client-support
Merge pull request #63 from rabbitmq/qpid-jms-client-support
Handle bump_reduce_memory_use non-true case
tidy up
Make compatible with amqp10_common changes
Tolerate the modified outcome
User larger symbol type for arrays
Merge pull request #1580 from rabbitmq/lrb-more-forgiving-hostname-lookup
Fix array serialization
Export rabbit_net:hostname/0
Makefile, mix.esx: Use `deps.get --only prod` to build from the source archive
Makefile: Move `--no-recursion` before `-T`
Use rabbit_net:hostname
Makefile: Pass `--only prod` to `mix deps.get`
Do not mention gm_deaths in error message.
Test that ha-promote-on-failure takes precedence over ha-promote-on-shutdown
Add helpers for ha-promote-on-failure policy
Test for ha-promote-on-failure policy key
Introduce a new policy: ha-promote-on-failure (always by default)
Makefile: New targets to print Git repoository URLs
rabbitmq-tools.mk: New targets to print Git repoository URLs
Merge pull request #562 from rabbitmq/fix-api-docs-master
Merge branch 'fix-api-docs' into fix-api-docs-master
Ensure stats documentation uses correct field names
Merge pull request #24 from rabbitmq/rabbitmq-peer-discovery-k8s-23
Merge pull request #1577 from rabbitmq/rabbitmq-peer-discovery-k8s-23
Travis CI: Update config from rabbitmq-common
Update erlang.mk
Update rabbitmq-components.mk
Make it possible for peer discovery backends to provide their own RSD range
Support randomized startup delay with a lower default range
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Update other third-party dependencies
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Update Ranch to 1.5.0
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge pull request #78 from rabbitmq/require-elixir-1.6.0
Reflect the Elixir 1.6.0+ requirement in control file
A typo
A typo
Use the [safe] default cluster_formation.node_cleanup.only_log_warning value in examples
Use the [safe] default cluster_formation.node_cleanup.only_log_warning value in examples
Use the [safe] default cluster_formation.node_cleanup.only_log_warning value in examples
Merge pull request #74 from rabbitmq/rabbitmq-federation-73
Merge pull request #1575 from rabbitmq/rabbitmq-federation-73
Be more defensive when operating on proplists
rabbit_parameter_validation: support maps in proplist validator
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Ensure Elixir 1.6.0 is installed
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Install Elixir 1.6.0
rabbit_ct_vm_helpers: Wait CT peers for 7 minutes
Merge pull request #17 from patrickdet/filter
tools/terraform: Add support for Erlang 20.3
rabbit_event: Add `gen_event:start_link/2` to `-ignore_xref()`
translate_filters tests
fix dialyzer errors
export attach_receiver_link/6
Merge branch 'reduce-mnesia-contention-when-nodes-restart-master'
Merge branch 'reduce-mnesia-contention-when-nodes-restart-master'
Export the new function
Merge branch 'master' into reduce-mnesia-contention-when-nodes-restart-master
Makefile: Remove existing links before creating new ones
Makefile: Remove `deps` from scripts' dependencies
Makefile: Do not hard-code the supposed name of GNU Make's executable
Re-apply f2ab0b40f034cda6bca4294735b493f20550b93c
Merge branch 'reduce-mnesia-contention-when-nodes-restart-v3.7.x' into reduce-mnesia-contention-when-nodes-restart-master
Merge branch 'reduce-mnesia-contention-when-nodes-restart-v3.7.x' into reduce-mnesia-contention-when-nodes-restart-master
Require Elixir ~> 1.6.0
Fix Erlang 19.3 support
Use ETS operations that are available in Erlang 19.3
Python 3 compatbility: cosmetic drive-by changes
Ditto
Python 3 compatibility
Add a missing parenthesis
Python 3 compatibility
Use Pika 0.11.x
One more test
README updates
Merge pull request #66 from instabledesign/add-php-example
Add auth backend PHP example
Merge pull request #39 from rabbitmq/rabbitmq-shovel-38
More coercion to proplists, more cases in tests
Merge pull request #91 from rabbitmq/rabbitmq-auth-backend-ldap-90
Convert Shovel definitions to proplists before validating
Merge pull request #1567 from rabbitmq/revert-1527-reduce-mnesia-contention-when-nodes-restart-master
Revert "Reduce lock contention when nodes restart (master)"
Merge pull request #260 from rabbitmq/revert-259-reduce-mnesia-contention-when-nodes-restart-master
Revert "Delete metrics for all deleted queues in 4 ETS operations (master)"
Merge pull request #1527 from rabbitmq/reduce-mnesia-contention-when-nodes-restart-master
Merge pull request #259 from rabbitmq/reduce-mnesia-contention-when-nodes-restart-master
Log this as a warning
Always run a full GC on rabbit_event
Build smaller match spec conditions rather than a single big one
Delete metrics for all deleted queues in 4 ETS operations
Run binding deletions in a Mnesia transaction
Delete metrics for all deleted queues in a single operation
Group queue deletions on_node_down into 10 operations per transaction
Add back INTERNAL_USER info to on_node_down function
Split single Mnesia transaction that runs on_node_down
Wait at most 5 secs for a node to reply to rabbit_node_monitor:partitions/0
Do not read exchange & queue before deleting, simply delete
Delete bindings from mnesia without full table scan
Extract a constant
Handle gen_tcp errors here, too
Retry LDAP operations on eldap reported connection errors
Remove a test that need reworking to be more predictable
Run binding deletions in a Mnesia transaction
Delete metrics for all deleted queues in a single operation
Group queue deletions on_node_down into 10 operations per transaction
Add back INTERNAL_USER info to on_node_down function
Split single Mnesia transaction that runs on_node_down
Wait at most 5 secs for a node to reply to rabbit_node_monitor:partitions/0
Do not read exchange & queue before deleting, simply delete
Delete bindings from mnesia without full table scan
Always run a full GC on rabbit_event
Build smaller match spec conditions rather than a single big one
Delete metrics for all deleted queues in 4 ETS operations
Merge pull request #83 from rabbitmq/rabbitmq-web-stomp-82
Remove an unused default key
Begin updating schema tests
Travis CI: Test against Erlang 20.3 instead of 20.1
Travis CI: Don't send notifications for successful builds
export filter type and add comment
Merge pull request #27 from rabbitmq/rabbitmq-web-mqtt-26
Add support for a listener configuration parameter that uses the cuttlefish ip datatype, and associated tests
test azure filtering
more readable formatting
Allow passing of filters in attach receiver
Merge pull request #89 from rabbitmq/rabbitmq-auth-backend-ldap-88
Make it possible to configure TLS options via auth_ldap.ssl_options
Cuttlefish schema: wording
Improve background_gc docs in example config files
Improve background_gc docs in example config files
Merge pull request #87 from rabbitmq/rabbitmq-auth-backend-ldap-85
Make it possible to configure group_lookup_base via new style config file
Ninja fix for #86
Terraform/setup-erlang.sh: Install xz-utils
Terraform/setup-erlang.sh: Reduce wget(1) output
rabbit_ct_broker_helpers: Handle error from `rpc:call()`
README edits, references #65
Make is_booted function compatible with pre-3.7.4 remote nodes
Check that default vhost is started on all nodes after restart
Compile from scratch
Include current node to the to-start list
Wording
Clarify
Test concurrent application start with no data.
Do not try to start a vhost supervisors on not fully booted nodes.
Merge pull request #1556 from rabbitmq/vhost-sup-race
Make is_booted function compatible with pre-3.7.4 remote nodes
Check that default vhost is started on all nodes after restart
Compile from scratch
Add special case in handle_other for normal TCP port exit
Include current node to the to-start list
Merge pull request #1550 from rabbitmq/rabbitmq-server-544
Wording
Clarify
Wording, compile from scratch
Make error message when refusing to delete non-empty message less radical.
Force-delete queues, which have no live master or slave processes.
Test concurrent application start with no data.
Do not try to start a vhost supervisors on not fully booted nodes.
Add special case in handle_other for normal TCP port exit
Merge pull request #1549 from rabbitmq/delete-dead-queue
Wording, compile from scratch
Makefile: Load Erlang.mk early plugins
Makefile: Load Erlang.mk early plugins
Makefile: Load Erlang.mk early plugins
Merge pull request #83 from rabbitmq/rabbitmq-auth-backend-ldap-81
Merge pull request #1544 from rabbitmq/rabbitmq-server-1538-master
Merge pull request #255 from rabbitmq/rabbitmq-server-1538-master
Merge pull request #1539 from rabbitmq/rabbitmq-server-1538
Merge pull request #253 from rabbitmq/rabbitmq-server-1538
Timeouts are in milliseconds
Make error message when refusing to delete non-empty message less radical.
Force-delete queues, which have no live master or slave processes.
One more doco example
Merge pull request #84 from rabbitmq/rabbitmq-auth-backend-ldap-82
Recreate LDAP connection and retry on all TCP socket errors
Explain how to override LDAP server port for running tests locally
Correct target directory path in Vagrantfile
A more sensible TESTING.md
README-tests.md => TESTING.md
Terraform: Define lifecycle for launch configuration + ASG
Terraform: Adapt `setup-vms.sh` to latest changes
Terraform: Set default value of `erlang_nodename`
Merge branch 'add-erlang-20.2-setup'
rabbit_ct_vm_helpers: Don't pass directories to `erl_tar`
Change idle_timeout default to 300 seconds
Terraform: Move to a single Erlang setup template
Merge pull request #7 from rabbitmq/rabbitmq-peer-discovery-aws-23
Compute API endpoint TLD from configured region
Merge pull request #248 from rabbitmq/accept-timeout-flag-before-command-name
Explain why --timeout is on the global flag list
Accept -t/--timeout before command name [again]
Merge pull request #22 from rabbitmq/initial-integration-testsuite
Explain test prerequisites
Merge pull request #247 from rabbitmq/rabbitmq-cli-236-tweaks
Whitespace changes
integration_SUITE: Initial cluster formation testsuite
Merge branch 'vm-framework'
Merge pull request #246 from rabbitmq/timeout-in-help-messages
Axe some [now] dead code
Merge pull request #21 from rabbitmq/consider-all-hosts-in-instancesset
Merge branch 'sync-changes-from-v3.7.x'
Take all hostnames from an `instancesSet`
Merge branch 'v3.7.x'
Merge branch 'v3.7.x'
Merge branch 'v3.7.x'
Don't depend on transient metrics; use the same counter as everywhere else
Show timeout in help messages only for commands supporting timeout.
Merge branch 'v3.7.x'
Bump stats incremention timeouts
Support both python2 and python2.7 in this test
Do not show timeout option for rabbitmq-plugins tool.
Missing test helper to lookup queues
Fix tutorial module to make it work.
Command to delete a queue.
Initial version of the VM-based test framework
Wait longer for stats here
rabbit_ct_helpers: Add delete_config() helper
Check rabbitmqctl(1) and rabbitmq-plugins(1) in broker steps
Makefile: Load the rabbitmq-run.mk plugin
Merge branch 'v3.7.x'
Rework clustering_SUITE
Accept 201 and 204 responses
Don't mind leftover messages in this test
Revert "Assert on consumer stats before closing the channel"
Assert on consumer stats before closing the channel
Swap these tests
Wait longer for stats refresh
Merge pull request #256 from rabbitmq/hide-common_test-node-37
Merge pull request #257 from rabbitmq/hide-common_test-node-master
Merge pull request #1542 from rabbitmq/master-locator-min-masters-group-bindings-3.7
Wording
rabbitmq-early-test.mk: Start common_test node with `-hidden`
rabbit_misc:is_process_alive(): Consider hidden nodes
Merge pull request #1541 from rabbitmq/master-locator-min-masters-group-bindings
rabbitmq-early-test.mk: Start common_test node with `-hidden`
rabbit_misc:is_process_alive(): Consider hidden nodes
Merge branch 'rabbitmq-server-1538' into rabbitmq-server-1538-master
Merge branch 'rabbitmq-server-1538' into rabbitmq-server-1538-master
Check process before getting amqp_params
Test that min-masters counts bound queues but not bindings
Test that min-masters counts bound queues but not bindings
Make min-masters locator count uniqueue queue names instead of bindings.
Make min-masters locator count uniqueue queue names instead of bindings.
Check process before getting amqp_params
Human readable messages for ehostunreach, nsdomain, econnreset
Revert "rabbitmq-early-test.mk: Start common_test node with `-hidden`"
Merge branch 'hide-common_test-node'
rabbitmq-early-test.mk: Start common_test node with `-hidden`
Merge pull request #1536 from rabbitmq/rabbitmq-server-1535
Merge pull request #1537 from rabbitmq/rabbitmq-server-1535-master
Merge remote-tracking branch 'origin/rabbitmq-server-1535' into rabbitmq-server-1535-master
Handle bump_reduce_memory_use info message
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Merge pull request #558 from rabbitmq/rabbitmq-management-556
Merge pull request #557 from rabbitmq/rabbitmq-management-556
Ninja fix a typo
Add ha-promote-on-shutdown to policy definition fields
Merge pull request #18 from rabbitmq/rabbitmq-peer-discovery-aws-17
Merge pull request #1533 from rabbitmq/rabbitmq-server-1531
Merge pull request #19 from rabbitmq/rabbitmq-peer-discovery-aws-17-master
Merge pull request #1532 from rabbitmq/rabbitmq-server-1531-master
Log a message when we fall back to randomized startup delay
Log a message when we fall back to randomized startup delay
Correct generated randomized startup delay range key
This mechanism should support randomized startup delay
Correct generated randomized startup delay range key
This mechanism should support randomized startup delay
Test RABBITMQ_var vs var behaviour when using rabbitmq-env.conf
Merge pull request #1528 from rabbitmq/configurable-max-procs-max-atoms
Fix default maximum number of Erlang processes
Test RABBITMQ_var vs var behaviour when using rabbitmq-env.conf
Merge pull request #1529 from rabbitmq/configurable-max-procs-max-atoms-master
Remove merge artifact
Merge branch 'configurable-max-procs-max-atoms' into configurable-max-procs-max-atoms-master
Ensure SERVER_ERL_ARGS are set on Windows
Merge branch 'configurable-max-procs-max-atoms' into configurable-max-procs-max-atoms-master
Variables in rabbitmq-env.conf and rabbitmq-env-conf.bat do not begin with RABBITMQ_, adjust Unix and Windows files accordingly
Make maximum number of Erlang atoms configurable via env
Make maximum number of Erlang processes configurable via env
Make maximum number of Erlang atoms configurable via env
Make maximum number of Erlang processes configurable via env
Merge pull request #1523 from rabbitmq/rabbitmq-server-1522-net-ticktime-in-new-config-format
Merge pull request #251 from rabbitmq/rabbitmq-server-1522-net-ticktime-in-new-config-format
Handle {ongoing_change_to, NewValue} responses from net_kernel:set_net_ticktime/2
Address minor issues discovered in rabbit_config
Merge pull request #1524 from rabbitmq/rabbitmq-server-1522-net-ticktime-in-new-config-format-master
Merge pull request #250 from rabbitmq/rabbitmq-server-1522-net-ticktime-in-new-config-format-master
Address minor issues discovered in rabbit_config
Use a more sensible project version
Squash a warning
Handle {ongoing_change_to, NewValue} responses from net_kernel:set_net_ticktime/2
Merge branch 'rabbitmq-server-1522-net-ticktime-in-new-config-format' into rabbitmq-server-1522-net-ticktime-in-new-config-format-master
Add 1 or greater validator, since tick time can not be zero
Add a validator for net_ticktime
Support kernel.net_ticktime in Cuttlefish configuration
Support kernel.net_ticktime in Cuttlefish configuration
Merge pull request #1514 from rabbitmq/rabbitmq-server-1508
Merge pull request #1521 from rabbitmq/rabbitmq-server-1508-master
Merge pull request #245 from rabbitmq/rabbitmq-server-1508-master
Merge branch 'master' into rabbitmq-server-1508-master
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Ensure RABBITMQ_USE_LONGNAME is set as that is what rabbitmqctl escript reads from the env
Ensure another string case is taken care of
Set node name for rabbit_prelaunch step in Windows scripts
Fixed typo
Merge pull request #555 from CodingSpiderFox/master
Fixed typo
Merge pull request #1518 from rabbitmq/revert-1516-rabbitmq-server-1508-master
Merge pull request #1517 from rabbitmq/revert-1515-rabbitmq-server-1508-master
Revert "Final merge of rabbitmq-server-1508 to master"
Revert "Merge rabbitmq-server-1508 to master"
Merge pull request #1516 from rabbitmq/rabbitmq-server-1508-master
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Remove unused -nodename argument to erl, ensure that RABBITMQ_NAME_TYPE is used correctly in Windows batch files
Merge pull request #1515 from rabbitmq/rabbitmq-server-1508-master
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Fix line continuation
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Add line continuation
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Remove unused -nodename argument to erl, ensure that RABBITMQ_NAME_TYPE is used correctly in Windows batch files
Merge branch 'bump-copyright' into v3.6.x
Merge branch 'bump-copyright'
Bump copyright year to 2018
Explain how to "install" this plugin
Explain how to "install" this plugin
Link to the peer discovery subsystem announcement post
(c) year
Explain how to "install" this plugin
Explain how to "install" and enable this plugin
Explain how to "install" and enable this plugin
Merge pull request #553 from rabbitmq/rabbitmq-management-552
Merge pull request #554 from rabbitmq/rabbitmq-management-552-master
Merge branch 'rabbitmq-management-552' into rabbitmq-management-552-master
Ensure definition value is passed as proplist, not map
Merge pull request #242 from rabbitmq/rabbitmq-cli-241
Format "plugins not found" errors better
Merge pull request #243 from rabbitmq/rabbitmq-cli-241-master
Format "plugins not found" errors better
Merge branch 'rabbitmq-cli-241' into rabbitmq-cli-241-master
Add function clause for set: case
Merge pull request #1509 from rabbitmq/rabbitmq-server-1508
rabbit_router:match_bindings/2 optimize (uses ets:select directly); improves rabbit_exchange_type_headers, should improves rabbitmq_jms_topic_exchange too
Merge pull request #1510 from rabbitmq/rabbitmq-server-1508-master
Merge branch 'rabbitmq-server-1508' into rabbitmq-server-1508-master
Fix batch file issues with env variables
Merge pull request #1506 from rabbitmq/rabbitmq-website-495-v3.7.x
Merge pull request #1507 from rabbitmq/rabbitmq-website-495-master
Merge branch 'rabbitmq-website-495-v3.7.x' into rabbitmq-website-495-master
RABBITMQ_BASE is Windows only
Merge branch 'sylvainhubsch-rabbitmq-server-match-bindings-optimize'
Cosmetics
Merge branch 'rabbitmq-server-match-bindings-optimize' of https://github.com/sylvainhubsch/rabbitmq-server into sylvainhubsch-rabbitmq-server-match-bindings-optimize
rabbit_router:match_bindings/2 optimize (uses ets:select directly); improves rabbit_exchange_type_headers, should improves rabbitmq_jms_topic_exchange too
Example file does not match the correct syntax
Merge pull request #1502 from almorelle/patch-3
Example file does not match the correct syntax
Merge pull request #551 from rabbitmq/table-improvements-post-sc-chad-console-ui
Merge pull request #1499 from rabbitmq/rabbitmq-server-1497
Merge pull request #1498 from rabbitmq/rabbitmq-server-1497-master
Merge pull request #1495 from rabbitmq/rabbitmq-server-1187-master
Merge pull request #1494 from rabbitmq/rabbitmq-server-1187
Add delegate_count to Cuttlefish schema
Add delegate_count to Cuttlefish schema
Make connection names subdued, same as all other extra properties
Use consistent & healthy padding for table headers, even when sorting
Manually backport #541
Merge pull request #71 from rabbitmq/rabbitmq-federation-70
Merge pull request #541 from sc-chad/console-ui
Remove unnecessary call to xmerl_ucs:from_utf8
Merge pull request #550 from rabbitmq/rabbitmq-management-optimize-queue-get
resolving merge conflict
2px 4px as requested
removing middle alignment and reducing bottom padding to 0
reverting removing vertical align from all pages and just applying vertical alignment to queue table rows
adding back slight padding to fix graph layouts and different resolutions
reduces the wasted space in the console and tightens up the columns while giving better readibility
Merge pull request #72 from rabbitmq/rabbitmq-federation-70-master
Coerce upstream definition to a proplist
Coerce upstream definition to a proplist
Remove unnecessary call to xmerl_ucs:from_utf8
rabbitmq.conf.example: add more tcp_listen_options examples
Merge branch 'master' into console-ui
Add management.path_prefix to Cuttlefish schema
Consistently close tags
Make documents consistent, meta tag must be within head tag
Update rabbitmq-components.mk
Update rabbitmq-components.mk
HTML content charset
include HTML charset
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Set selected on the option we want to be the default
Make requeue the default option in the Get Messages section to avoid accidentally deleting messages
removing middle alignment and reducing bottom padding to 0
Merge branch 'rabbitmq-server-1187' into rabbitmq-server-1187-master
Find systemd unit via ps
Merge pull request #548 from rabbitmq/rabbitmq-management-547
Merge pull request #549 from rabbitmq/rabbitmq-management-547-master
Add management.path_prefix to Cuttlefish schema
Add management.path_prefix to Cuttlefish schema
Merge branch 'fix-dialyzer-errors-part2' into v3.7.x
Merge branch 'fix-dialyzer-errors-part2'
Use error_logger instead of rabbit_log for inet_tcp_proxy log messages.
rabbit_net: Ignore Dialyzer warnings in socket_ends() and unwrap_socket()
Explicitly ignore return values we don't care about
lager_forwarder_backend: Fix spec of #state{}
rabbitmq-build.mk: Only add rabbitmq-cli to compiler path for plugins
Merge branch 'fix-dialyzer-errors' into v3.6.x
Merge branch 'fix-dialyzer-errors' into v3.7.x
Merge pull request #68 from rabbitmq/rabbitmq-federation-67
Merge pull request #69 from rabbitmq/rabbitmq-federation-67-master
Merge branch 'fix-dialyzer-errors' into fix-dialyzer-errors-in-master
vm_memory_monitor: Fix spec of get_cached_process_memory_and_limit()
gen_server2: Document that terminate() doesn't return
rabbit_core_metrics: Fix return values of several functions
rabbit_log: Document that handle_damaged_io_system() doesn't return
rabbit_misc: Fix specs of rpc_call() and get_gc_info()
rabbit_heartbeat, rabbit_writer: system_terminate() doesn't return
supervisor2: #state.dynamics can be 'undefined'
Merge branch 'add-dialyzer-attr-support-to-code_version'
Explicitly ignore return values we don't care about
worker_pool_worker: Fix set_timeout() specifications
app_utils: Document explicitly anonymous functions which throw exceptions
.gitignore: Ignore PLT files from Dialyzer
Merge branch 'add-dialyzer-attr-support-to-code_version' into v3.6.x
Merge branch 'add-dialyzer-attr-support-to-code_version' into v3.7.x
ssl_compat: Restore Dialyzer attribute now that `code_version` works with it
code_version: Handle `-dialyzer` attributes
Merge branch 'seslattery-master'
Add more Cuttlefish schema tests
Merge branch 'master' of https://github.com/seslattery/rabbitmq-peer-discovery-k8s into seslattery-master
Coerce upstream set definition to proplists
Coerce upstream set definition to proplists
Use gen_server instead of gen_server2 for caches
Merge pull request #1489 from rabbitmq/rabbitmq-server-154674858
Merge pull request #545 from asgs/patch-3
Consistently close tags
Make documents consistent, meta tag must be within head tag
Merge pull request #1491 from rabbitmq/rabbitmq-server-154674858-master
Merge branch 'rabbitmq-server-154674858' into rabbitmq-server-154674858-master
Set defaults
Add DIST_PORT settings to Windows batch files
Add DIST_PORT settings to Windows batch files
Update rabbitmq-components.mk
Merge branch 'limit-rabbitmq-components.mk-update-to-same-branch' into v3.6.x
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #1490 from rabbitmq/rabbitmq-server-154674858-master
Merge branch 'limit-rabbitmq-components.mk-update-to-same-branch' into v3.7.x
Merge branch 'cowboy-update-154176350' into v3.7.x
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'limit-rabbitmq-components.mk-update-to-same-branch'
rabbitmq-tools.mk: Move `rabbitmq-components.mk`-related targets there
rabbitmq-components.mk: Compare branch names before updating `rabbitmq-components.mk`
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'cowboy-update-154176350'
Update cowboy to 2.2.2
Merge branch 'rabbitmq-server-154674858' into rabbitmq-server-154674858-master
Set distribution port range for run_escript
Improve test error ouput.
Merge pull request #240 from rabbitmq/revert-239-rabbitmq-cli-237-master
Revert "Merge #238 to master"
Merge pull request #1488 from rabbitmq/revert-1487-rabbitmq-cli-237-master
Revert "Merge rabbitmq/rabbitmq-server#1486 to master"
Merge pull request #239 from rabbitmq/rabbitmq-cli-237-master
Merge branch 'rabbitmq-cli-237' into rabbitmq-cli-237-master
Merge pull request #1487 from rabbitmq/rabbitmq-cli-237-master
Use port 35672 instead of 55672
Use port 35672 instead of 55672
Add a missing line continuation
Merge branch 'rabbitmq-cli-237' into rabbitmq-cli-237-master
Specify dist port range
Merge branch 'rabbitmq-cli-237' into rabbitmq-cli-237-master
Specify dist port range
README updates
README updates
Merge pull request #26 from gmr/add-api-docs
Add API endpoint examples
Merge pull request #1482 from rabbitmq/rabbitmq-server-vhost-sup-sup-badarg
Merge pull request #249 from rabbitmq/fix-v3.6.x-ssl-tests
Revert "ssl_compat: Silence Dialyzer warning about ssl:connection_info/1"
Quick typo fix
typo
Merge branch 'rabbitmq-server-vhost-sup-sup-badarg'
include HTML charset for one more file.
HTML content charset
include HTML charset
Merge pull request #1484 from almorelle/patch-2
Quick typo fix
Merge branch 'take-hostname-from-server-test-certificate'
system_SUITE: Take SNI hostname from server's certificate
Merge branch 'v3.7.x' into rabbitmq-server-vhost-sup-sup-badarg
Merge pull request #1477 from rabbitmq/rabbitmq-server-channel-interceptor-hang
Revert "Change rabbit_nodes:all_running/0 behaviour."
Merge branch 'rabbitmq-server-channel-interceptor-hang' (again)
Add a test to check channel interceptor hang.
Merge branch 'rabbitmq-server-channel-interceptor-hang'
Make sure rabbit_misc:pmap callbacks do not throw.
Change rabbit_nodes:all_running/0 behaviour.
Make it safier to call RPCs if a supervisor is not started yet.
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
.gitignore: Ignore PLT files
rabbitmq-components.mk: Fix $(possible_base_rmq_ref) value
Merge pull request #1481 from rabbitmq/revert-1478-rabbitmq-server-story-154472130
Revert "Declare a quorum queue using the queue.declare method"
Merge pull request #248 from rabbitmq/revert-247-rabbitmq-server-story-154472130
Revert "Extend amqqueue record to include queue type"
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'sort-components-alphabetically' into v3.6.x
Merge branch 'sort-components-alphabetically' into v3.7.x
Merge branch 'sort-components-alphabetically'
rabbitmq-components.mk: Sort components alphabetically
Merge pull request #1479 from almorelle/patch-1
typo
fix broken schema mappings
Merge pull request #10 from rabbitmq/rabbitmq-peer-discovery-consul-8-master
Set initial health check status to Passing
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'rabbitmq-common-story-154472152'
Merge branch 'rabbitmq-common-story-154472152' into v3.7.x
mk/rabbitmq-components.mk: Add ra as a dependency
Merge pull request #1478 from rabbitmq/rabbitmq-server-story-154472130
Merge pull request #247 from rabbitmq/rabbitmq-server-story-154472130
ssl_compat: Silence Dialyzer warning about ssl:connection_info/1
Extend amqqueue record to include queue type
Declare a quorum queue using the queue.declare method
Make sure rabbit_misc:pmap callbacks do not throw.
Clarify what this plugin is and isn't [ci skip]
Clarify what this plugin is and isn't [ci skip]
Clarify what this plugin is and isn't [ci skip]
Clarify what this plugin is and isn't [ci skip]
Link to doc guide
Clarify what this plugin is and isn't [ci skip]
Merge branch 'remove-testing-plugins-from-erlang.mk' into v3.7.x
Merge branch 'remove-testing-plugins-from-erlang.mk'
Makefile: Remove testing plugins from Erlang.mk
Add a README for ./docs
Add a README for ./docs
Set selected on the option we want to be the default
Make requeue the default option in the Get Messages section to avoid accidentally deleting messages
Merge branch 'dparkinson-messages/requeue-default'
Set selected on the option we want to be the default
Merge remote-tracking branch 'origin/allow-to-use-apps-directly-instead-of-ez-archives-in-umbrella' into v3.7.x
Merge remote-tracking branch 'origin/allow-to-use-apps-directly-instead-of-ez-archives-in-umbrella'
rabbitmq-run.mk: Use plugins from `$(DEPS_DIR)` if `PLUGINS_FROM_DEPS_DIR` is defined
Relax Elixir version requirement to support 1.6
Relax Elixir version requirement to support 1.6
Optimise some commands by not starting erlang distribution
Add a callback to control erlang distribution.
Merge branch 'rabbitmq-cli-command-distribution'
Make requeue the default option in the Get Messages section to avoid accidentally deleting messages
Merge pull request #79 from rabbitmq/rabbitmq-auth-backend-ldap-78
Merge branch 'master' into rabbitmq-auth-backend-ldap-78
Add missing [single value] LDAP config properties to Cuttlefish schema
Bump (c) year
Bump (c) year
Bump (c) year
Merge pull request #16 from rfancn/master
add notes for why to need deploy rbac yaml file
reverting removing vertical align from all pages and just applying vertical alignment to queue table rows
Merge pull request #1472 from rabbitmq/rabbitmq-server-1471
Merge pull request #1473 from rabbitmq/rabbitmq-server-1471-master
Merge branch 'rabbitmq-server-1471' into rabbitmq-server-1471-master
Temporarily raise log high water mack when node boots
adding back slight padding to fix graph layouts and different resolutions
Merge pull request #539 from rabbitmq/rabbitmq-management-537-v3.7.x
Merge pull request #1469 from rabbitmq/rabbitmq-server-story-153436163-v3.7.x
Merge pull request #536 from rabbitmq/rabbitmq-management-533-v3.7.x
reduces the wasted space in the console and tightens up the columns while giving better readibility
Restore option order here
Merge branch 'rabbitmq-management-537-master' (again)
Restore option order here
Merge pull request #1468 from rabbitmq/rabbitmq-server-story-153436163
Merge pull request #535 from rabbitmq/rabbitmq-management-533-master
Merge pull request #540 from rabbitmq/rabbitmq-management-537-master
Merge branch 'rabbitmq-management-537' into rabbitmq-management-537-v3.7.x
Merge branch 'rabbitmq-management-537' into rabbitmq-management-537-master
Set up password dropdown based on user password presence
Make sure this user is actually passwordless
Make sure this user is actually passwordless
Improve test coverage for rabbit_auth_backend_internal:set_tags/3
Update user tags when password is cleared
Update user tags when password is cleared
rabbitmq.conf.example: 3.7.x uses 10 TLS acceptors by default
rabbitmq.conf.example: 3.7.x uses 10 TLS acceptors by default
Merge pull request #1465 from rabbitmq/rabbitmq-server-story-153435857-37x
rabbitmq.conf.example: update MQTT keys related to anonymous connections
rabbitmq.conf.example: update MQTT keys related to anonymous connections
rabbitmq.conf.example: re-arrange and edit logging configuration
rabbitmq.conf.example: re-arrange and edit logging configuration
Improve test coverage for rabbit_auth_backend_internal:set_tags/3
Merge pull request #1467 from rabbitmq/rabbitmq-server-story-153435857-master
Add RBAC configuration to example
Log message typos
Cosmetics
Log message typos
Merge branch 'add-commits-since-release-target' into v3.6.x
Merge branch 'add-commits-since-release-target' into v3.7.x
Cosmetics
Merge branch 'add-commits-since-release-target'
rabbitmq-tools.mk: Add `commits-since-release` target
Prevent internal authN backend from accepting blank passwords
Prevent internal authN backend from accepting blank passwords
Merge branch 'fix-node-rows-selectors'
Fix node & rows selector post jQuery 1.12 upgrade
Merge pull request #100 from rabbitmq/fix-tests-port-fb82f5b8
Port fb82f5b8 to v3.6.x
Merge branch 'rabbitmq-management-528' into v3.7.x
Merge branch 'rabbitmq-management-528'
Explain the heads in rabbit_auth_backend_internal:user_login_authentication/2.
Explain the heads in rabbit_auth_backend_internal:user_login_authentication/2.
Merge branch 'rabbitmq-management-528'
Doc remarks recommended in #24
Merge branch 'rabbitmq-management-528' into v3.7.x
Merge branch 'rabbitmq-management-528'
Do not quote RABBITMQ_CTL_ERL_ARGS and ignore shellcheck warning
Do not quote RABBITMQ_CTL_ERL_ARGS and ignore shellcheck warning
Definition import: coerce maps to proplists
Ignore debug/*
Support maps as well as proplists when fetching global runtime params
Introduce rabbit_data_coercion:{to_map/1, to_proplist/1}
Merge pull request #1462 from rabbitmq/rabbitmq-server-1461
Merge pull request #1463 from rabbitmq/rabbitmq-server-1461-master
Merge branch 'rabbitmq-server-1461' into rabbitmq-server-1461-master
Run escript and use RABBITMQ_CTL_ERL_ARGS env variable
As of rabbitmq/rabbitmq-server#1459 amq.rabbitmq.log is no longer declared by default
As of rabbitmq/rabbitmq-server#1459 amq.rabbitmq.log is no longer declared by default
rabbit_mgmt_http_SUITE: compute number of pages here
rabbit_mgmt_http_SUITE: compute number of pages here
More rabbit_mgmt_http_SUITE stability improvements
More rabbit_mgmt_http_SUITE stability improvements
As of rabbitmq/rabbitmq-server#1459 amq.rabbitmq.log is no longer declared by default
As of rabbitmq/rabbitmq-server#1459 amq.rabbitmq.log is no longer declared by default
Merge pull request #1459 from rabbitmq/rabbitmq-server-1456
Give stats a chance to refresh in this test, too
Give stats a chance to refresh in this test, too
Merge pull request #1460 from rabbitmq/rabbitmq-server-1456-master
log.rabbit => log.exchange
log.rabbit => log.exchange
Merge branch 'rabbitmq-server-1456' into rabbitmq-server-1456-master
Add lager backend that logs to amq.rabbitmq.log
Merge branch 'rabbitmq-server-1456' into rabbitmq-server-1456-master
Add lager backend that logs to amq.rabbitmq.log
Merge branch 'rabbitmq-server-1456' into rabbitmq-server-1456-master
Add lager backend that logs to amq.rabbitmq.log
Wording
Use get_env/2 here to avoid a badmatch
Change the Pivotal Docker image with the Official RabbitMQ image
Change the Pivotal Docker image with the Official RabbitMQ image
Merge pull request #15 from rabbitmq/rabbitmq-amqp1.0-client-14
Add test for large message sizes.
Merge pull request #13 from rabbitmq/rabbitmq-peer-discovery-k8s_example_official_docker_image
cosmetics
cosmetics
typo numbers
Change the Pivotal Docker image with the Official RabbitMQ image
Link to doc guide
Link to doc guide
Link to doc guide
Link to doc guide
README updates
Turn node_node_metrics into maps
Merge pull request #526 from rabbitmq/rabbitmq-management-525
Merge pull request #56 from rabbitmq/rabbitmq-management-525
Merge pull request #76 from vuntz/ocf-clustered-with
Only return metrics_gc_queue_length metrics for the requested node.
Turn node_node_metrics into maps
OCF RA: Do not consider local failures as remote node problems
Merge pull request #13 from rabbitmq/rabbitmq-amqp1.0-client-11
Merge branch 'rabbitmq-management-153802689' into v3.6.x
Ensure content-type is only set once
Merge pull request #524 from rabbitmq/rabbitmq-management-153802689-master
Merge branch 'rabbitmq-management-153802689' into rabbitmq-management-153802689-master
Ensure content-type is only set once
Handle transfer frames without deliver_id
Add HTTP method field to Cuttlefish schema
Merge pull request #72 from cloudamqp/readable-etc
Add missing data fields for creating dynamic shovels.
Merge pull request #25 from rabbitmq/rabbitmq-shovel-management-24
Merge pull request #522 from rabbitmq/rabbitmq-shovel-management-24
More 3.7.0 README updates
Speciaised dispatch route for move messages.
Add missing data fields for creating dynamic shovels.
adjust the dropdown width
adjust the dropdown width
Merge pull request #520 from asgs/patch-1
Mention that this plugin is distributed with RabbitMQ as of 3.7.0
Mention that this plugin is included into 3.7.0
Revert "Change to 2750"
Merge pull request #71 from rabbitmq/rabbitmq-server-release-153734997-master
Merge branch 'rabbitmq-server-release-153734997' into rabbitmq-server-release-153734997-master
Ensure files created by RabbitMQ are not world-readable. Add gid bit to /var/log/rabbitmq to ensure sub-directories and files are group-id "adm"
Make adm group owner of /var/log/rabbitmq
Merge pull request #98 from rabbitmq/rabbitmq-erlang-client-153560538-master
adjust the dropdown width
Merge branch 'rabbitmq-erlang-client-153560538' into rabbitmq-erlang-client-153560538-master
Only log a warning if the user has not set verify
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Configure HTTP client proxy at init step
Fix a typo spotted by xref/Concourse
Add an optional init step for peer discovery mechanisms
Peer discovery backend: add an optional init callback
Merge branch 'read-cert-name-from-cert-part2' into v3.7.x
Merge branch 'read-cert-name-from-cert-part2'
java_SUITE_data: Ignore target/
java_SUITE: Get certificate name from the certificate itself
Merge branch 'read-cert-name-from-cert' into v3.6.x
Merge branch 'read-cert-name-from-cert' into v3.7.x
Merge branch 'read-cert-name-from-cert'
auth_SUITE: Get certificate name from the certificate itself
Compile
Fix a typo spotted by xref/Concourse
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Change the docker image link
Merge pull request #7 from rabbitmq/rabbitmq-peer-discovery-common-5
Configure HTTP client proxy at init step
Export init/0
Merge pull request #1451 from rabbitmq/rabbitmq-peer-discovery-common-5
Merge pull request #7 from rabbitmq/rabbitmq-peer-discovery-common-5
Merge pull request #245 from rabbitmq/rabbitmq-peer-discovery-common-5
Merge pull request #10 from rabbitmq/rabbitmq-peer-discovery-common-5
Merge pull request #5 from rabbitmq/rabbitmq-peer-discovery-common-5
Travis CI: The base branch may become v3.8.x one day
Travis CI: The base branch is v3.7.x
Travis CI: Update config from rabbitmq-common
Travis CI: `stable` was renamed to `v3.6.x`
Configure HTTP client proxy at init step
Peer discovery backend: add an optional init callback
Add an optional init step for peer discovery mechanisms
Configure HTTP client proxy at init step
Configure HTTP client proxy at init step
Use a constant for HTTP client module here as well
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Switch base branch to `v3.6.x`
OCF RA: Fix syntax error
OCF RA: Fix syntax error
OCF RA: Avoid promoting nodes with same start time as master
Extra debug logging, references #6
Extra debug logging, references #6
Clarify a confusing log message
Add package changelog entries for 3.7.1-beta.1
Merge pull request #59 from rabbitmq/lrb-specify-nofile
Merge pull request #95 from rabbitmq/otp-19-verify-hostname
Merge branch 'stable'
Fix test syntax yet again for /bin/sh
Merge branch 'stable'
Fix test syntax for /bin/sh
Merge branch 'stable'
hostname behaves differently between Darwin and Linux of course
Merge branch 'stable'
Use "hostname -s" to drop domain part of DNS name
Add integration test that parses an amqp uri
Merge pull request #64 from vuntz/ocf-fix-notify-start
Merge pull request #63 from vuntz/ocf-no-promote-same-start-time
Merge pull request #1436 from rabbitmq/looking-glass-id-processes
Merge pull request #241 from rabbitmq/looking-glass-id-processes
Merge pull request #65 from rabbitmq/lrb-specify-nofile-master
Explicitly set our recommended open files limit
Explicitly set our recommended open files limit
typespec fixes
Merge pull request #97 from rabbitmq/rabbitmq-erlang-client-153560059
Merge pull request #8 from rabbitmq/lrb-fix-sasl-user-pass-encoding-master
Add a macro to identify processes in Looking Glass
Enable the process_dump option in Looking Glass by default
Trace all modules by default in Looking Glass
Add a macro to identify processes in Looking Glass
Merge branch 'lrb-fix-sasl-user-pass-encoding' into lrb-fix-sasl-user-pass-encoding-master
Merge pull request #6 from rabbitmq/rabbitmq-amqp1.0-client-153560059-master
Ensure user and pass are binaries
Merge pull request #5 from rabbitmq/rabbitmq-amqp1.0-client-153560059
Merge branch 'rabbitmq-amqp1.0-client-153560059' into rabbitmq-amqp1.0-client-153560059-master
Add support for server_name_indication in AMQP URI
Merge branch 'otp-19-verify-hostname' into rabbitmq-erlang-client-153560059
Ensure that verify_fun and server_name_indication are added to .config params, too
Merge pull request #65 from rabbitmq/lrb-fix-tests-master
Merge branch 'lrb-fix-tests' into lrb-fix-tests-master
Fix remaining tests
Begin fixing tests
Merge branch 'fix-offline-build' into v3.7.x
Merge branch 'fix-offline-build'
Makefile: Force-install Hex before calling `mix deps.get`
README updates
README updates
Merge pull request #233 from rabbitmq/rabbitmq-cli-232
Wording
Wording
Merge pull request #234 from rabbitmq/rabbitmq-cli-232-master
Merge branch 'rabbitmq-cli-232' into rabbitmq-cli-232-master
Fixing SetParameterCommand and tests
Merge pull request #96 from rabbitmq/otp-19-verify-hostname-master
Fix tests broken by rabbitmq/rabbitmq_ct_helpers#17
OCF RA: Fix logging in start notification handler
OCF RA: Do not start rabbitmq if notification of start is not about us
OCF RA: Fix test for no node in start notification handler
OCF RA: Avoid promoting nodes with same start time as master
Merge pull request #62 from rabbitmq/fix-offline-build
Merge pull request #231 from rabbitmq/fix-offline-build
Merge pull request #244 from rabbitmq/fix-offline-build
Add config schema entry for total_memory_available_override_value
Add config schema entry for total_memory_available_override_value
Fix tests broken by rabbitmq/rabbitmq_ct_helpers#17
Merge branch 'import-rabbitmq-components.mk-changes'
Makefile: Bundle Elixir dependencies in the RabbitMQ source archive
Revamp how we manage dependencies
Change docker image link
Optimise some commands by not starting erlang distribution
rabbitmq-mix.mk: New Makefile to integrate with Mix in the source archive
Change docker image link
Change link image
Merge pull request #17 from rabbitmq/otp-19-verify-hostname
Remove extra option, it's ignored anyway
Merge branch 'otp-19-verify-hostname' into tmp-merge-otp-19-verify-hostname
Fix test errors in OTP 20 due to empty tuple in list
Add a callback to control erlang distribution.
Ensure that verify_fun and server_name_indication are added to .config params, too
Add test for the application of message-ttl policy retroactively
Tweak keyUsage field to make Erlang happy
Merge pull request #1425 from rabbitmq/retroactive-operator-policy
Fix the rabbit_mgmt_wm_redirect handler
Merge pull request #518 from rabbitmq/rabbitmq-web-dispatch-31
Merge pull request #32 from rabbitmq/rabbitmq-web-dispatch-31
[152879230] Add failing tests Tests pass Enable SNI in SSL test Add server_name_indication when host is a hostname Make verify_peer the default for amqps connections, requiring the user to opt-out
Merge pull request #94 from rabbitmq/support-sni
Fix the rabbit_mgmt_wm_redirect handler
[152879230] Add failing tests Tests pass Enable SNI in SSL test Add server_name_indication when host is a hostname Make verify_peer the default for amqps connections, requiring the user to opt-out
Fix rabbit_cowboy_redirect and remove unused optional callbacks
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Import changes from `master`
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Import changes from `master`
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: check-rabbitmq-components.mk is always successful for rabbitmq-common
Merge pull request #242 from getong/ranch_proxy_protocol_1.4.4
ranch_proxy_protocol 1.4.4
Add package changelog entries for 3.7.0
Require Erlang 19.3 to install RabbitMQ on windows.
Require Erlang 19.3 to install RabbitMQ on windows.
Merge branch 'rabbitmq-federation-63' into v3.7.x
Merge pull request #64 from rabbitmq/rabbitmq-federation-63
Use assert macros. Wait for link to be recreated
upgrade: Testsuite was moved to rabbitmq-ci
upgrade/upgrade-to-3.8-helpers.sh: Add v3.8.x helper
Merge branch 'restore-log-files-in-UI' into v3.7.x
Merge pull request #517 from rabbitmq/restore-log-files-in-UI
priv/www/js/tmpl/node.ejs: Restore the list of log files
Merge branch 'rabbitmq-cli-228' into v3.7.x
Merge branch 'rabbitmq-server-1434' into v3.7.x
Merge pull request #1435 from rabbitmq/rabbitmq-server-1434
Merge pull request #229 from rabbitmq/rabbitmq-cli-228
Remove an unused variable
Pick the max of totals, just like HTTP API reporter does
Cosmetics
Adapt rabbitmq-diagnostics memory_breakdown to server master
Change application environment variable names for logs in windows scripts.
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Set Cowboy pinning to 2.0.0 and Ranch to 1.4.0
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Makefile: Add inets to LOCAL_DEPS
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Revert "rabbitmq-components.mk: Skip CI when updating rabbitmq-components.mk"
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Skip CI when updating rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Switch base branch to `v3.7.x`
Merge pull request #227 from rabbitmq/rabbitmq-cli-226
Merge pull request #1433 from rabbitmq/rabbitmq-cli-226
Cosmetics
Merge branch 'stable'
Merge pull request #516 from rabbitmq/lrb-fix-those-dang-selectors
Fix multiple event addition due to auto-refresh
Merge pull request #515 from rabbitmq/rabbitmq-management-511
Check that rabbit application is running when trying to enable plugins.
Fix rabbitmq-plugins enable/disable/set behavior for --online flag.
Attach event handlers to multi-field forms correctly
Merge pull request #225 from rabbitmq/rabbitmq-cli-224
Correctly format the list of missing plugins
packaging: Bump minmum Erlang version to 19.3 in Debian & RPM packages
Cleanup internal exchanges and queues after plugin is disabled or policy removed
rabbit_ct_broker_helpers: Handle failure of get_message_store_pid() in force_vhost_failure()
rabbit_ct_broker_helpers: Do not use M:F() for local calls
Merge branch 'stable'
Merge branch 'stable'
README updates
README updates
Merge branch 'stable'
Merge pull request #1431 from rabbitmq/rabbitmq-server-gm-avoid-infinite-loop
Avoid infinite loop when dropping gm queue entries.
Merge pull request #1428 from rabbitmq/rabbitmq-server-1427
gm: adapt has_pending_messages/1 for maps
Merge pull request #4 from rabbitmq/rabbitmq-peer-discovery-etcd_example
Merge branch 'stable'
Replace broken link with correct Markdown
Merge pull request #150 from schwarz/readme-formatting
Replace broken link with correct Markdown
Add package changelog entries for 3.7.0-rc.2
Add etcd example
Merge pull request #5 from rabbitmq/rabbitmq-peer-discovery-consul_compose_example
It's an interval in ms
Revert default value and add * 500
Merge pull request #489 from rabbitmq/rabbitmq-server-995
Merge pull request #1374 from rabbitmq/rabbitmq-server-995
Increase the consul_svc_ttl time out
Merge branch 'master' into rabbitmq-server-995
Merge branch 'stable'
Store correct TLS listener info
Use naming closer to web-stomp
Add test for the application of message-ttl policy retroactively
Merge branch 'master' into rabbitmq-server-995
Merge branch 'stable'
Merge pull request #149 from rabbitmq/gh-132
Merge branch 'stable' into gh-132
Merge branch 'stable'
Travis CI: Skip testsuite with Erlang R16B03
Ensure maximum message id value is used when saving to process state
Travis CI: Add initial configuration
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Only run fast testsuites
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Link to the expanded Memory Use Analysis guide
Travis CI: Update config from rabbitmq-common
Copy README from master
Use -include() for local headers
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Add initial configuration
Travis CI: Add initial configuration
Travis CI: Add initial configuration
Travis CI: Add initial configuration
Travis CI: Add initial configuration
Travis CI: Add initial configuration
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
rabbitmq-tools.mk: Remove set -x from replace_aws_creds
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'master' into rabbitmq-server-995
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
rabbit_mgmt_http_SUITE: Increase memory_test margin to 30% on Travis
Allow for a safety marging in this fragile test
Travis CI: Update config from rabbitmq-common
Travis CI: Only compile-test
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Merge pull request #510 from rabbitmq/rabbitmq-management-499-breakdown
rabbitmq-tools.mk: It's ok if the existing .travis.yml has no encrypted env. vars
Use `rss` memory to calculate the percentages
Merge branch 'stable'
Remove inline comments from example systemd service file
Merge branch 'stable'
Merge pull request #508 from rabbitmq/rabbitmq-management-507
Merge branch 'stable'
systemd does not support trailing comments, so don't use them
Ensure partial updates restore click handlers
Merge branch 'stable'
rabbitmq-tools.mk: Restore AWS creds when syncing .travis.yml
Travis CI: Refresh configuration patch
Merge branch 'stable'
Travis CI: Refresh configuration patch
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
rabbitmq-tools.mk: Set AWS credentials in the `travis-yml` target
Travis CI: Publish logs to Amazon S3 in case of failure
Travis CI: Configuration patch not needed fox 3.7.x
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Travis CI: Only test build with Erlang R16B03-1
Travis CI: Update config from rabbitmq-common
Increase the margin some more
Allow for a safety marging in this fragile test
Travis CI: Update config from rabbitmq-common
Travis CI: Adapt `.travis.yml.patch` to 3.7.x needs
Merge branch 'stable'
Travis CI: Update config from rabbitmq-common
Merge branch 'stable'
Merge branch 'stable'
rabbitmq-tools.mk: New target to help keep `.travis.yml` synchronized
Travis CI: Update config from rabbitmq-common
Travis CI: Install .NET Core 2.0 and Maven
system_SUITE: Target Java 1.6 in the Java testsuite
Merge branch 'master' into rabbitmq-server-995
system_SUITE: EADDRNOTAVAIL can be returned when IPv6 is not configured
Merge pull request #1393 from rabbitmq/rabbitmq-server-batch-betas-lrb
Merge pull request #239 from rabbitmq/rabbitmq-server-batch-betas-lrb
rabbitmq-early-test.mk: Do not use ct_styled_out on Travis CI (take #2)
rabbitmq-early-test.mk: Do not use ct_styled_out on Travis CI
Travis CI: Import .travis.yml from rabbitmq-common
erlang.mk: Disable `proper` plugin
Merge branch 'stable'
Travis CI: Run `make xref` in addition to `make tests`
Merge branch 'stable'
Remove the "young and experimental" part
Use rabbit_queue_behaviour and callback
Travis CI: Run `make xref` in addition to `make tests`
Introduce handle_info callback
erlang.mk: Disable `proper` plugin
Move cleanup to end_per_testcase
Expand popup help text
Merge branch 'master' into rabbitmq-server-995
Merge branch 'master' into rabbitmq-server-995
Add queue-overflow help text
Merge pull request #506 from rabbitmq/rabbitmq-management-499-followup
Merge pull request #55 from rabbitmq/rabbitmq-management-499-followup
Merge pull request #1414 from rabbitmq/rabbitmq-management-499-followup
Merge pull request #238 from rabbitmq/rabbitmq-management-499-followup
Wording
Use strategy as key
Select specific total for memory calculations depending on strategy
Merge branch 'master' into rabbitmq-management-499-followup
Merge pull request #505 from rabbitmq/rabbitmq-management-481-master
Adapt to rabbitmq/rabbitmq-server#1413
Merge branch 'stable'
Merge pull request #1413 from rabbitmq/mk-dont-throw-when-connection-pid-is-non-local
Include memory calculation strategy and details on the breakdown.
Merge branch 'stable'
Revert "Add erlang memory to node stats."
Remove `random_exchange.app.src`
rabbit_exchange_type_random: Implement info() callbacks
Add API to get rss memory
Report memory calculation strategy on node stats
Report strategy, erlang total, rss and allocated memory
Compile on OTP 20
rabbit_exchange_type_random: Use rand:uniform() directly
Merge branch 'stable'
rabbit_exchange_type_random: Use rand_compat:uniform()
Merge branch 'stable'
plugins.mk: Add rabbitmq_random_exchange to the distribution
fixup
Merge branch 'stable'
Merge branch 'master' into rabbitmq-server-995
Merge branch 'master' into rabbitmq-server-995
Merge branch 'stable'
Merge pull request #495 from rabbitmq/rabbitmq-management-481
Merge pull request #16 from rabbitmq/rabbitmq-management-481
Compile on OTP 20 from scratch
Merge branch 'stable' into rabbitmq-management-481
Revert "Plot erlang memory on memory graph."
Plot erlang memory on memory graph.
Add erlang memory to node stats.
Make rabbit_networking:close_connection/2 more benign
Merge branch 'stable'
Replace orddicts with maps
Merge pull request #1412 from rabbitmq/rabbitmq-server-1411
Accept strings and atoms for queue_master_locator setting
Replace orddicts with maps
Merge branch 'stable'
Handle Shovel names that are pairs in one more place
Handle Shovel names that are pairs in one more place
Merge pull request #57 from rabbitmq/packaging-deb-shutdown
Remove in-line comments from RPM systemd file because systemd complains about them
Use `rabbitmqctl shutdown` on RPM-based systems
Use `rabbitmqctl shutdown` with systemd
Merge branch 'stable'
Handle Shovel names that are pairs
Handle Shovel names that are pairs
Merge branch 'stable'
Backport more specific connection error messages from master
Merge branch 'stable'
When multiple URIs are provided, try them all before giving up
Link channel processes; log unsuccessful connections to the main log
Merge branch 'stable'
Bump rabbit.num_ssl_acceptors default to 10
Don't assert on node start success
Merge pull request #1408 from rabbitmq/rabbitmq-server-1367
Explain
Compile from scratch
Merge branch 'stable'
Merge branch 'stable'
Fix types after merge stable
Merge branch 'stable'
Update clustering management test to support transient rabbit app
Merge pull request #504 from rabbitmq/rabbitmq-management-493
Merge pull request #1406 from rabbitmq/rabbitmq-server-1216-backport
Merge pull request #237 from rabbitmq/rabbitmq-server-1216-backport
Configurable default consumer prefetch for new channels
Merge pull request #1407 from rabbitmq/rabbitmq-server-1378-revert
Cosmetic change to debug messages
Make policy clickable.
Merge branch 'stable'
Merge pull request #502 from rabbitmq/jquery-html-selectors-vuln
Wording
Fix link so it works with and without a prefix
Add a root redirect if a prefix is in place
Add path_prefix tests and fixup existing test suite to pass
Add new test group to run all tests with path_prefix setting
Add prefix from env variable
Rewrite code to be a bit more understandable
Remove commented CSS
Address jQuery HTML selector vulnerability + UI improvements
Merge branch 'stable'
Set consumer bias to 2 to prioritise consumers
Revert "Remove consumer bias & allow queues under max load to drain quickly"
Start `rabbit` application as transient.
Start `rabbit` application as temporary in tests.
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #500 from rabbitmq/rabbitmq-management-499
Merge pull request #1404 from rabbitmq/rabbitmq-management-499
Merge pull request #236 from rabbitmq/rabbitmq-management-499
Wording
Merge pull request #501 from rabbitmq/cowboy-upload-multipart
Use read_part to get the form headers in cowboy2
Add support for rabbitmq_management path_prefix in tests
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'performance-stable' into stable
Merge branch 'stable'
Merge pull request #1403 from rabbitmq/performance
Merge branch 'stable'
Merge pull request #498 from rabbitmq/rabbitmq-management-497
Merge pull request #1402 from rabbitmq/lrb-qa-152075395
An API to get non-cached process memory.
Review changes
Make error processing a bit smarter and add comments as to why
Report unused memory in different color.
Add more sections to the memory breakdown.
Avoid lists when generating channel stats
Handle catch all (error) case
Merge pull request #235 from rabbitmq/performance
Simplify gen_server2:cast
Use read_concurrency on core tables
Comment optimisation in format channel stats
Optimise formatting of channel stats
Trigger error in shutdown
Fix Cowboy 1.1 API references spotted by xref
Fix Cowboy 1.x function calls spotted by xref
Merge pull request #28 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #24 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #79 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #13 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #22 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #23 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #26 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #496 from rabbitmq/rabbitmq-management-cowboy2
Merge pull request #30 from rabbitmq/rabbitmq-management-cowboy2
Make DELETE /api/connections/{name} handler more defensive
Merge pull request #53 from rabbitmq/performance
Avoid the update of creation stats which have already been collected
Performance enhancement: replace dict by maps
Makefile: Update Apache ActiveMQ download URL
Merge branch 'stable'
Merge branch 'stable'
Improve readability
Merge pull request #1388 from rabbitmq/rabbitmq-server-batch-betas
Merge pull request #234 from rabbitmq/bump-erlang-requirement-to-19.3
Format any HTTP version returned by cowboy.
include/rabbit.hrl: Bump Erlang requirement to 19.3 (ERTS 8.3)
Revert "Revert "Support cowboy2""
Cowboy 2 consistently uses "stop" now - https://github.com/ninenines/cowboy/blob/master/doc/src/guide/migrating_from_1.0.asciidoc#changed-behaviors
Support cowboy2.
Support cowboy2
Add web-stomp TLS port. Add helper function to get app env.
Support cowboy2. Drop support for SockJS.
Remove SockJS support
Improve readability
Support rabbit.connection_max in Cuttlefish schema
Cowboy 2 consistently uses "stop" now - https://github.com/ninenines/cowboy/blob/master/doc/src/guide/migrating_from_1.0.asciidoc#changed-behaviors
Merge branch 'stable'
Merge branch 'cloudamqp-max_connections' into stable
Add rabbit.connection_max to rabbitmq.config.example
Merge branch 'master' into rabbitmq-management-cowboy2
rabbit.max_connections => rabbit.connection_max
Merge branch 'max_connections' of https://github.com/cloudamqp/rabbitmq-server into cloudamqp-max_connections
Support cowboy2
use rabbit_misc:get_env/3 for backward compability
Merge branch 'stable'
rabbitmq-hexpm.mk: Allow to override version pinning
Merge branch 'stable'
More footer links, wording
CSS changes discussed during the sync-up today
Merge branch 'stable'
Merge branch 'rabbitmqctl-shutdown-custom-exit-code-to-indicate-server-reported-failure' into stable
Use a special exit code when server reports an error on shutdown
Ensure "rss" is the default in cuttlefish configuration example
Merge branch 'stable'
Ensure "rss" is the default in configuration example
Merge branch 'stable'
It's 2.7.9, not 2.6.7
Improve rabbitmqadmin intro page
Merge branch 'stable' into rabbitmq-server-batch-betas
Merge branch 'default-to-rss-152081051-master'
Merge branch 'master' into default-to-rss-152081051-master
Merge branch 'stable'
Merge pull request #1397 from rabbitmq/default-to-rss-152081051
Merge pull request #233 from rabbitmq/default-to-rss-152081051
Merge pull request #231 from rabbitmq/ensure-apps-started
Merge branch 'stable'
Make entity list links black
Merge branch 'stable'
Default mem calc strategy should be "rss"
Default mem calc strategy should be "rss"
Allow configuring max connections through config
Default mem calc strategy should be "rss"
Link to our GitHub org without any search queries
Merge pull request #4 from akissa/forward-port-3.6.x-changes
Merge branch 'akissa-forward-port-3.6.x-changes'
Ignore test/config_schema_SUITE_data/schema/
Fix the flag value for queue waiting message paging continuation
Flush messages to disk in batches.
Upgrade jQuery to v1.8.3
Add utility as_list function
Add header support to the put method
Add support for Consul tags
Make global count links stand out
Re-order footer links
Revert "Support cowboy2"
Remove explicit TLS disable from Caddyfile
Make favicon background transparent
Add useful links in the footer
Support cowboy2
Support cowboy2
Merge branch 'stable'
Merge pull request #1396 from rabbitmq/lrb-fix-shutdown-tests
Add CORS settings to Cuttlefish schema
Shutdown cannot fail
Integrate with Caddy to make it easy to make UI changes
Style node names consistently on the Overview page
Merge branch 'stable'
packaging/standalone: Include `rabbit` dependencies when creating the release script
Ignore indirect dependencies of rabbit in rabbit_plugins
Capture flot version in filename
Do not git ignore jquery*.js files
Update json2 to latest version, capture version in filename
Capture Sammy.js version in filename
Capture EJS version in filename
Sync 3rd party licenses, add missing ones
Merge branch 'stable'
package/standalone: Remove rabbit_release.beam on cleanup
plugins.mk: Sync with the list in rabbitmq-ci
Support cowboy2.
Squash a couple of warnings
Fixing more cowboy_req API
Merge branch 'stable'
Reduce delta between rabbitmq.conf.example and rabbitmq.config.example
Typo
Merge branch 'stable'
Wording
Corrections
Merge branch 'stable'
Edits, links
Update rabbitmq.conf.example
Update rabbitmq.conf.example
Wording
Updates to management plugin section
Cowboy 2 requires Ranch 1.4
Port ensure_all_started and modify to use RestartTypes map
Merge branch 'master' into rabbitmq-management-cowboy2
With Erlang 20, turn off warning about deprecated gen_fsm
Merge branch 'stable'
rabbitmq-macros.mk: Move `compare_version` macro to its own file
Makefile: Do not include rabbitmq-build.mk
app_utils: Make `rabbit` app transient again
Merge branch 'stable'
Merge branch 'stable'
This should be MIN_ERTS_VER
Remove Fsharp.Core reference
Properly update fsharp project file format
Manually apply #230 to master
Merge branch 'stable'
Merge pull request #230 from feng19/new_sup2_state
Upgrade AmqpNetLite to 2.0.
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Add GitHub templates and contributing doc
Update to cowboy 2.0.
Add no-op #/ route for Sammy.js, fixes 404 not found error
Fix dotnet tests.
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
rabbitmq-components.mk: Add AMQP 1.0 client & common library
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Remove rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add random exchange plugin
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-hexpm.mk: No need to override version pinning for `rebar.config`
Merge branch 'stable'
rabbitmq-hexpm.mk: Copy 3rd-party dependencies to rabbitmq-componentS.hexpm.mk
rabbitmq-components.mk: Take 3rd-party dependencies from Hex.pm
fix supervisor2's state for get {badrecord,state} error when release upgrade
Revert updating cuttlefish script
Merge branch 'stable'
Ensure elements line up and look consistent
Return link to logo
Merge branch 'stable'
Fix a syntas error resulting from a bad merge in formatters.js
Merge pull request #1394 from rabbitmq/rabbitmq-common-224-master-lrb
Merge branch 'rabbitmq-common-224-master-lrb'
Merge branch 'stable'
Merge branch 'master' into rabbitmq-common-224-master-lrb
Update default allocator strategy to match rabbitmq/rabbitmq-common#224
Ignore maps:from_list in xref
Use maps:from_list so that it compiles on R16B03
Update cuttlefish script. Built with OTP-19.2
whitespace
Merge branch 'master' into rabbitmq-common-224-master-lrb
Update default allocator strategy to match rabbitmq/rabbitmq-common#224
Ignore maps:from_list in xref
Use maps:from_list so that it compiles on R16B03
Merge branch 'stable'
Merge branch 'stable'
Fix a DEPS merge
Merge pull request #229 from rabbitmq/rabbitmq-common-224-compat-fixes
Merge branch 'rabbitmq-common-224-compat-fixes'
Add recon license file
Default to allocated after doing more testing
Handle edge case where gen_server is not running
Cache more info in state, use /proc to get RSS memory on Linux and ps on other systems, recon on Win32
Simplify memory strategy code a bit
Revert "Revert "Merge branch 'rabbitmq-common-224' into stable""
Change recon to a build dep to remove applicaton dependency
Update Makefile
Add additional vm_memory_calculation_strategy values to cuttlefish conf
Fix issues uncovered after merging #224
Merge branch 'stable'
Merge pull request #1389 from rabbitmq/rabbitmq-common-224
Merge pull request #92 from rabbitmq/rabbitmq-common-224
Merge pull request #227 from rabbitmq/rabbitmq-common-224
Update cuttlefish script
Add recon license file
Line up Login button with the input fields
Add required alt tag to logo img
Use HTTP API, API is not clear enough
Keep links orange, make hovers grey
Update default allocator strategy to match rabbitmq/rabbitmq-common#224
Default to allocated after doing more testing
Merge branch 'stable'
Merge branch 'arif-pathan-master'
Wording, formatting
Improve gen_server2 buffer help, fix process page
Make links, buttons & abbr (former acronyms) stand out
Handle edge case where gen_server is not running
Cache more info in state, use /proc to get RSS memory on Linux and ps on other systems, recon on Win32
Updated Example Apps for DotNet-WebApi
Added solution file
Update WebApiHttpAuthService.csproj
Update README.md
Removed unwanted file
rabbitmq_auth_backend_webapi_dotnet example
Create newfile
Merge branch 'stable'
Group plugins together with Erlang applications
Revert "Rearrange node stats, expand all sections by default"
Rearrange node stats, expand all sections by default
Link to configuration guide
Make it more obvious that these links will display more node metrics
Enable underline for hovered anchors
Display uptime column by default
Merge branch 'stable'
Make Erlang mailbox and gen_server2 buffer sortable fields
Make gen_server2 mailbox length a truly sortable field
Update URL to use shortener, whitespace
Add GitHub issue and pull request templates, update CONTRIBUTING.md
Update CLA URL
Simplify memory strategy code a bit
Revert "Revert "Merge branch 'rabbitmq-common-224' into stable""
Since apps have deps, we should be using ensure_all_started
Change recon to a build dep to remove applicaton dependency
Merge branch 'stable'
Revert "Merge branch 'rabbitmq-common-224' into stable"
Merge branch 'stable'
Merge branch 'rabbitmq-common-224' into stable
Explain
Add some additional calculation strategy options
Use recon_alloc:memory for all memory calculation
Merge pull request #1384 from rabbitmq/integrate-looking_glass
Ignore maps:from_list in xref
Use maps:from_list so that it compiles on R16B03
Integrate looking_glass
Use recon_alloc:memory on Win32
Merge branch 'stable'
Merge pull request #1382 from rabbitmq/rabbitmq-server-1379
Merge branch 'stable'
Correct field name for json response
Merge pull request #62 from mgrafl/patch-1
Correct field name for json response
Merge branch 'stable' into rabbitmq-server-1379
Drop head after changing a policy to drop-head. Clarify TODOs
Ensure the new tests are run as part of the cluster_size_3 group
Rename overflow values to use dashes instead of underscores
Add configurable queue overflow strategy
Merge branch 'stable'
Merge pull request #1378 from rabbitmq/always-prioritise-consumers
Merge branch 'stable'
Missing test expectation update from #121
Merge branch 'stable'
Fixed typo.
Merge pull request #121 from InvertedAcceleration/patch-1
Fixed typo.
Merge branch 'stable' into always-prioritise-consumers
Merge pull request #10 from rabbitmq/rabbitmq-uaa-demo
Bump Travis CI Erlang to 20.1
Merge branch 'stable'
Merge pull request #52 from rabbitmq/rabbitmq-server-release-51
Add setting to consider exit code 69 as success
Merge pull request #223 from rabbitmq/rabbitmq-cli-222
Cosmetics
Add rabbit to TEST_DEPS
Ditto
Use a standard algo name here
Make sure "superuser" information is output last
Make sure demo/setup.sh doesn't stop on subsequent runs
README edits
Move name_type/0 to rabbit_nodes
Remove rabbit_cli module
Merge branch 'stable'
Revert "Revert "Ensure that exit code 0 is used for "stop" command""
mk/rabbitmq-hexpm.mk: Take rabbit_common deps from Hex.pm
Makefile: Remove a stale definition of $(dep_rabbitmq_cli)
mk/rabbitmq-components.mk: Pin jsx and lager versions
Use HTTP to talk to the local UAA
Do not limit paging to disk if hibernated or resumed after credit
Make demo/setup.sh executable
Merge branch 'stable'
Revert "Ensure that exit code 0 is used for "stop" command"
Remove consumer bias & allow queues under max load to drain quickly
Merge branch 'stable'
Merge pull request #1376 from rabbitmq/rabbitmq-server-1362
Two more test cases
Rename overflow values to use dashes instead of underscores
Initial definitions import test
Merge branch 'stable'
Merge pull request #222 from rabbitmq/rabbitmq-server-1343
Wording
Ensure that exit code 0 is used for "stop" command
Revert to using erlang:memory() on Win32
rabbitmq_aws_urilib: Replace edoc_uri by http_uri
Management UI helpers for `overflow` queue setting.
An error message for rejected messages during publish.
Merge pull request #488 from rabbitmq/rabbitmq-management-487
Don't discard the new Req object after reading the body
Merge pull request #6 from rabbitmq/move-to-rabbit_json
Start elixir app to be able to call rabbitmqctl commands directly from tests
rabbitmq_aws_json: Revert to the old proplist-based API
rabbitmq_aws_config_tests: Replace erlang:now() by erlang:timestamp()
rabbitmq_aws_sign: Use crypto:hmac() directly
rabbitmq_aws_sign: Remove support for integers in header's value
rabbitmq_aws_config: Fix indent of parse_body_response()
Fix all -spec()
rabbitmq_aws: No need to rewrite unchanged record fields
Makefile: Add edoc and xmerl to LOCAL_DEPS
Merge branch 'stable'
Set the shell to /sbin/nologin for security
Merge pull request #50 from matrixbnpnd/patch-1
Improve logging and naming around definitions import
Don't attempt to automatically grant permissions to a stub user
Undo #470, improve naming.
Wording
Update README.md
Set the shell to /sbin/nologin for security
Merge branch 'stable'
Merge pull request #1372 from rabbitmq/rabbitmq-server-1371
Be smarter about when to use all cluster nodes vs just those specified by ha-mode:nodes when picking initial queue master node
Fix test for ha-mode exactly. Requires sync-ing the queues to ensure slave pids are started
Squash a warning => compiles from scratch
Add three tests for different ha-mode scenarios with min-masters
Handle suggested_queue_nodes output when slave nodes are empty
Use EUnit assertions here
Cosmetics
Take ha-mode into account in choosing queue master
Merge branch 'stable'
Merge pull request #1366 from rabbitmq/sync-rabbitmq-config-example-with-configure-page
Edits, more links
Additions & changes to example config as per rabbitmq-server#1366
Merge pull request #486 from rabbitmq/rabbitmq-management-485
Support more error formats for http error messages
UAA configuration demo
Merge branch 'stable'
Replace commented line with empty line
Remove redundant for
Fix typo: SSH -> SSFix typo: SSH -> SSL
Merge branch 'stable'
Merge pull request #49 from rabbitmq/rabbitmq-server-1359
Add last missing config properties to example config
Switch to rabbit_json:decode()
Makefile: Add meck to TEST_DEPS
Add a few extra missing properties & correct defaults in example config
Add other missing config properties from PROJECT_ENV to example config
Add settings to have systemd restart RMQ on failure
Remove extra details from new config properties added to example config
Add msg_store_io_batch_size to example config
Remove extra details from msg_store_credit_disc_bound from example config
Explain the IoBatchSize role in push_betas_to_deltas
Clarify IO_BATCH_SIZE in betas -> deltas (not gammas!) comment
Add msg_store_credit_disc_bound to example config
Add mirroring_sync_batch_size to example config
Add delegate_count to example config
Add queue_master_locator to example config
Correct pem_file key type
Add support for pem public key
Update rabbitmq-components.mk
Merge branch 'stable'
Fix segmented cache expiration timeouts.
Fix segmented cache expiration timeouts.
Merge branch 'stable'
Makefile: Update to the best practices
Makefile: Update to the best practices
Merge branch 'stable'
Remove build.config to use default Erlang.mk content
Merge pull request #45 from rabbitmq/rabbitmq-server-release-44
Detect util-linux version of runuser
Use runuser in non-su-compatible mode
Merge pull request #1369 from rabbitmq/lrb-add-exec-stop
Add additional ExecStop line from rabbitmq-server-release
Add optional Restart and RestartSec configuration
Merge branch 'stable'
Merge pull request #1368 from rabbitmq/rabbitmq-server-1359
wording
Add optional Restart and RestartSec configuration
Merge branch 'stable'
Merge pull request #422 from rabbitmq/lrb-fix-travis-ci
Minor fixes
small simplification
Add travis scripts from rabbitmq-server
Update TCI file
turn off sudo
Ensure elixir 1.4.4 is available
Merge pull request #482 from rabbitmq/rabbitmq-management-pt-150971897-2
Wording
Add all log categories to example config mentioned on the configure page
Merge branch 'stable'
Merge pull request #480 from rabbitmq/rabbitmq-management-pt-150971897
Be less demanding
PT #150971897 comments
Merge branch 'stable'
Correct a header
Merge branch 'stable'
Backport examples from master
Merge branch 'stable'
Merge pull request #221 from rabbitmq/rabbitmq-server-1343
Merge branch 'stable'
Merge pull request #477 from rabbitmq/rabbitmq-management-473
Do not remove rabbit@ prefix
Add package changelog entries for 3.7.0-rc.1
Merge branch 'stable'
Markdown links are not particularly useful in GitHub templates
Merge branch 'stable'
Merge pull request #478 from rabbitmq/github-templates-pt-150971897
Further edits to CONTRIBUTING.md, issue template, PR template
Merge branch 'stable' into rabbitmq-server-1343
Merge branch 'stable'
Merge pull request #1365 from rabbitmq/rabbitmq-server-1364
Further improve logging around enable plugin set changes
Address comments from review
Do not log anything when list of apps to stop is empty
Update rabbitmq-components.mk
Update readme to mention RabbitMQ version requirement.
Improve CONTRIBUTING.md, and add GitHub templates
Ensure node name is html formatted as option
Format node names consistently
debian/dirs: Fix typo in /ets/profile.d; should be /etc
Remove unused define
revert whitespace change
Store cached process memory in the gen_server state
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq_vlc => rabbitmq_vlc_exchange
Merge pull request #48 from rabbitmq/set-logdir-permissions-on-fresh-install
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Switch to rabbitmq/mix_task_archive_deps
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Wording
Add random exchange plugin
Merge branch 'stable'
README edits
README edits
Merge branch 'stable'
README edits
Ignore [binding] routing keys
Remove a file with an absolute system-specific path hardcoded
Merge pull request #1358 from rabbitmq/rabbitmq-server-1348
packaging: Set log directory permissions on fresh install
Merge branch 'stable'
Tweak more timeouts in tests
Merge branch 'stable'
Tune timeout in tests.
Merge branch 'stable'
packaging/RPMS/Fedora/scripts/update-changelog.sh: .spec is now optional
Fix typo in RABBITMQ_LOGS environment setup
Merge branch 'stable'
Add package changelog entries for 3.7.0-beta.20
Bump the wait interval here
Merge branch 'stable'
Merge pull request #1357 from rabbitmq/rabbitmq-server-1356
Commit package change logs
Do not start direct connections if the direct connection supervisor is not started
packaging/RPMS/Fedora/scripts/update-changelog.sh: .spec is now optional
Increase memory cache period to 1 second
Cache process memory for 500 ms.
Make it possible to configure randomized startup delay range via new style config
Merge pull request #1352 from rabbitmq/rabbitmq-server-1332
Merge branch 'stable'
Switch to double licensing
README updates
Merge branch 'stable'
More README updates
Update README.md
Be consistent with license headers in the code
Add license files
Merge branch 'stable'
Update LICENSE
Update .gitignore
Correct plugin name
Adapt to the current build system used by RabbitMQ plugins
Do not use interval timer to update the process state.
Merge branch 'stable'
Remove duplicate (and presumed invalid) "AVR32"
packaging/debs/apt-repository/distributions: Add more valid `Architectures`
Merge pull request #47 from tianon/dpkg-arches
Remove duplicate (and presumed invalid) "AVR32"
Handle cases where the headers table is undefined
Introduce x-first-death-{exchange,queue,reason}
packaging/debs/apt-repository/distributions: Add more valid `Architectures`
Merge pull request #220 from rabbitmq/rabbitmq-cli-219
Don't require RabbitMQ node to be running for `rabbitmq-plugins list'
Merge pull request #7 from rabbitmq/rabbitmq-peer-discovery-k8s_5
cosmetics
Remove unsed variables
Merge pull request #3 from rabbitmq/rabbitmq_peer_discovery_common_k8s_6
Add normalize on service_discovery_nodes
Add K8s example with statefulsets
Merge branch 'stable'
packaging/RPMS: Do not sign sles11 packages
Revert "packaging: Force GPG v3 signatures for the SLES 11 RPM package"
packaging/RPMS: Do not sign sles11 packages
Revert "packaging: Force GPG v3 signatures for the SLES 11 RPM package"
Merge branch 'stable'
Merge pull request #1347 from rabbitmq/autoheal-deadlock
Merge branch 'stable'
packaging: Force GPG v3 signatures for the SLES 11 RPM package
packaging: Force GPG v3 signatures for the SLES 11 RPM package
Fix includes
Fix an include.
Trap exits on spawned process so it's not killed on monitor restart
Merge branch 'stable' into autoheal-deadlock
Merge branch 'stable'
packaging: Rename `suse1012` to `sles11`
Effectively link the spawned process
Define shell explicitly for runuser command
Merge branch 'stable'
Add meck to test deps
Add meck to test deps
Emit stats when gen_server2 process is started.
Add meck to test deps
Remove time_compat
Merge branch 'stable'
Support R16B03
Link process responsible of restart during autoheal, and abort if needed
Add test helpers
Merge branch 'stable'
Add missing end_per_suite.
Merge branch 'stable'
Add test deps
Fix fetch-deps.
Fix fetch-deps.
Merge branch 'stop-gen_server2-stats-emissions-when-preparing-to-hibernate' into stable
Merge pull request #220 from rabbitmq/stop-gen_server2-stats-emissions-when-preparing-to-hibernate
More logging
Port HTTP[S] proxy settings from rabbitmq-autocluster
Merge branch 'stable'
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update default category loglevel to `inherit`
Refactor gen_server2 stats callbacks.
Merge pull request #472 from rabbitmq/rabbitmq-federation-management-15
Merge pull request #25 from rabbitmq/rabbitmq-federation-management-15
Merge pull request #20 from rabbitmq/rabbitmq-federation-management-15
Default lager sink for logs configuration
Snippets to test log config.
Make tests compatible with R16B03
Add replace_state handler for R16. Used in tests
Add more checks to stats timer test. Fix expectations
Restart stats timer for gen_server2 process.
Redact passwords out of upstream URIs
Merge branch 'stable'
Merge pull request #42 from rabbitmq/rabbitmq-server-release_41
Slash a few slashes
The +, - and . characters are allowed in URI schemes
Redact passwords from endpoint URIs
Introduce a function that redacts passwords in URIs
Refactor script names
Change the packages name
Add stats emission tests cleanup. Fix some expectations.
Emit pre-hibernation stats when stopping the stats timer
Test gen_server2 stats emission.
Fix stats emission callbacks.
Default values for stats emission
Merge branch 'stable'
Merge pull request #219 from binarin/patch-1
Merge branch 'stable'
rabbitmq-run.mk: Add `start-brokers` and `start-cluster` targets
rabbitmq-run.mk: Fix indentation
Create two different packages for OpenSuse
Fix dep fetching on detached HEAD
Make paths configurable via new style config
Header files belong to ./include
Use critical service deregistration key as provided in Consul docs
Add cluster_formation.consul.deregister_after to Cuttlefish schema
cluster_formation.consul.domain => cluster_formation.consul.domain_suffix
cluster_formation.node_cleanup.only_log_warning should be set true by default
Headers belong to ./include
Add vm_memory_calculation_strategy to rabbitmq.conf.example
Merge branch 'stable'
Add rabbit.vm_memory_calculation_strategy to config example
Separate stats emission callback from stats timer
Stop gen_server2 stats emissions before preparing to hibernate
Make cluster name and lock acquisition time configurable
New style config schema: add more etcd backend settings
etcd_region does not exist
Merge branch 'stable'
Merge pull request #1341 from rabbitmq/rabbitmq-server-1340
Do not GC channel-queue metrics on mirror migration
AWS_DEFAULT_REGION => AWS_EC2_REGION
Merge branch 'stable'
Merge pull request #1339 from rabbitmq/rabbitmq-server-1338
Add target to run bats tests to Makefile
Read rabbitmq-env.conf a bit earlier to pick up two variables
Change runuser arguments to support more platforms
Merge pull request #1335 from rabbitmq/rabbitmq-website-418
Use ?assertEquals where possible
Create .erlang.mk if it's missing
Wording
Merge remote-tracking branch 'origin/stable'
Move verify_steps function into upgrade-helpers
Extract common 3.6 & 3.7 upgrade-to-helpers
Make upgrade verification errors more descriptive for 3.6
Log configuration tests
Update docs
Remove -l alias from help_command. It iss conflicting with default alias
Refactor log configuration to be consistent with log doc guide
Export a helper function to get a sink name from a log category
Merge pull request #40 from rabbitmq/rabbitmq-server-release-32
Error message change from review.
Fixes for SELinux support
Merge branch 'stable'
Commit package change logs
Merge branch 'rabbitmq_management_master_locator_ui' into stable
Add queue-master-locator shortcut to policy form
Update expectations in force_boot_command_test
Squash a warning
Change validation for the force_boot command
Error message if a command has duplicate global switches
Remove duplicate global switches.
Remove timeout swithch from the node_health_check command.
Merge pull request #470 from rabbitmq/rabbitmq-server-1329
Merge pull request #216 from rabbitmq/rabbitmq-cli-214-take-two
Merge branch 'master' into rabbitmq-cli-214-take-two
Run dialyzer tests. Fix warnings.
Avoid attempts to grant dummy "internal" user permissions when loading definitions
Enable rabbit app validation for list_parameters and clear_permissions. Disable the validation for shutdown
Add single quotes around commands given in output
Remove extra whitespace
Extend execution environment validation to more commands
Update command type specs
Make sure we format errors here
Merge branch 'stable'
Update README.md
Update README.md
rabbit_mqtt_process: Close channels after send_will()
reader_SUITE: Increase timer in expect_publish() to 5 seconds
These commands don't really require the rabbit app to be running
Merge pull request #147 from rabbitmq/rabbitmq-mqtt-146
Add a type spec for validate_execution_environment/2
rabbit_mqtt_process: Close channels after send_will()
reader_SUITE: Increase timer in expect_publish() to 5 seconds
Add the queue label for master locator queues
Merge branch 'stable'
Merge branch 'stable'
Introduce RabbitMQ.CLI.Core.RequiresRabbitApp{Running,Stopped}
Closes #1330
Merge pull request #38 from rabbitmq/rabbitmq-server-1324
Merge pull request #1326 from rabbitmq/rabbitmq-server-1324
Merge branch 'stable'
debian/control: Revert the use of ${misc:Depends}
debian/control: Revert the use of ${misc:Depends}
rabbit_ct_broker_helpers: Adapt rabbitmqctl_list() to new `list_queues` output
Merge branch 'stable'
debian/control: Use ${misc:Depends} instead of hard-coding dependencies
debian/control: Use ${misc:Depends} instead of hard-coding dependencies
packaging: rpms: Add systemd support for openSUSE
Merge branch 'master' into rabbitmq-cli-214-take-two
Merge branch 'rabbitmq-common-log-sink-qualifiers'
Revert the change of log qualifiers.
Merge branch 'stable'
Move delays to the test where they belong
Merge branch 'stable'
Inject a delay after killing node
Merge branch 'stable'
Merge pull request #1325 from rabbitmq/rabbitmq-server-1323
Add test for cleaning up dead exclusive queues
Merge pull request #1313 from rabbitmq/rabbitmq-cli-207
Merge pull request #212 from rabbitmq/rabbitmq-cli-207
Merge branch 'master' into rabbitmq-cli-207
Merge branch 'master' into rabbitmq-cli-207
Different list of info items for unresponsive queues
Begin adding test for #1323
Merge pull request #218 from rabbitmq/timeout_list_queues
Add timeout message to list_queues command test
Make sure *validation_error_output/2 functions are used correctly
Make validate/2 and validate_execution_environment/2 use the same tuple tag
Configure shortcuts to run as admin.
Merge branch 'master' into rabbitmq-cli-214-take-two
Assume this match is exhaustive
Update test expectations
Correctly check for exclusive queue
Make validate_execution_environment/2 use a different tuple tag for failures
Merge pull request #1322 from rabbitmq/rabbitmq-server-1255
Start/stop windows service using `net` utility instead of `erlsrv`
Add is_exclusive to queue deletion clause
Override timeout
rabbit_core_metrics: Use `ets` directly
Merge branch 'stable'
rabbit_core_metrics: Move ets wrappers to a dedicated module, `ets_compat`
rabbitmq-plugins: refactor to validate_execution_environment/2 and R.C.C.Validators.chain/2
Set a timeout on list_queues and a warning if unresponsive ones are found
Use lager sink API for logs.
Use connection sink for logs.
Use lager sink API for logs.
Use lager sink API for logs.
rabbitmq-plugins set: switch to validate_execution_environment/2
Use lager sink API for logs.
Use lager sinks for logging.
Use lager sink style for logs.
Use info items to list unresponsive queues
Use info items to list unresponsive queues
rabbitmq-plugins enable: switch to validate_execution_environment/2
rabbitmq-plugins disable: switch to validate_execution_environment/2
Merge branch 'stable'
Wording
Merge branch 'stable'
Use queue.exclusive here
Merge pull request #466 from rabbitmq/rabbitmq-management-459
Mark exclusive queues with Excl, like before
Add UI marker for exclusive queue
Merge pull request #465 from rabbitmq/rabbitmq-server-1321
Merge pull request #217 from rabbitmq/rabbitmq-server-1321
Squash a couple more warnings
Update restart_vhost usage
Add vhost start api to documentation
forget_cluster_node: switch to validate_execution_environment/2
Fold execution environment validation into a single optional fn
Do not run a message store migration if there are no durable queues.
Simplify, explain
Factor in rabbit app state and execution env validation
Cleanup test warnings
Inline validate_and_run_command/3 for greater flexibility
API to restart a crashed vhost.
Test that vhost is restarted after running restart_vhost
The command to restart a vhost.
Add upgrade log sink to windows scripts.
Merge pull request #213 from rabbitmq/rabbitmq-management-460
Merge pull request #462 from rabbitmq/rabbitmq-management-460
Merge pull request #1318 from rabbitmq/rabbitmq-management-460
Ditto
Set ERL_CRASH_DUMP location to rabbitmq log directory
Merge branch 'stable'
packaging: Add scripts for format RabbitMQ version to match package constarints
Update test expectations
Merge branch 'master' into rabbitmq-management-460
Merge branch 'master' into rabbitmq-management-460
Merge branch 'master' into rabbitmq-management-460
Merge pull request #1316 from rabbitmq/rabbitmq-server-1314
Allow for Elixir 1.5.x
Make already_started error explicit in start_vhost. Export start_vhost/2
Merge branch 'stable'
packaging/debs/Debian/Makefile: Display Erlang version *after* installing it
packaging: Log the version of Erlang used to compile packages
packaging/debs/Debian/Makefile: Display Erlang version *after* installing it
packaging: Log the version of Erlang used to compile packages
Merge branch 'stable'
packaging/debs/apt-repository/distributions: Add `arm64` architecture
Merge branch 'master' into rabbitmq-server-1314
Merge pull request #463 from rabbitmq/rabbitmq-management-461
Merge pull request #464 from rabbitmq/rabbitmq-management-452
Add option to disable all SSL verification
Grant administrators access to all policies, update test suite
Raise a protocol error when declaring a queue on a stopped vhost
Change vhost status from down to stopped
Format per-node vhost state on the vhost page. Change vhsot status from down to stopped
Cosmetics
Merge pull request #1320 from rabbitmq/rabbitmq-server-1319
Repeat `rabbit_amqqueue:with` operation for a stopped queue.
packaging: Bump build/runtime requirement to Erlang 19.2
Make filter_vhost/3 treat administrators as having access to all vhosts
Merge pull request #15 from rabbitmq/fix-build-otp-20
Use nowarn_export_all
Small wording change
Remove -Werror as it prevents build
Merge branch 'stable'
Merge pull request #36 from rabbitmq/run-rabbitmq-plugins-as-root
Authorize users tagged with 'administrator' can perform vhost-scoped operations
Cosmetics
Remove a debug logging line
After-merge test fix. Restart vhost supervisor with start_vhost
Change the vhost API to have cluster_state instead of state.
Change state in vhost info to cluster_state
Change the `state` field in vhost info to `cluster_state`.
scripts/rabbitmq-script-wrapper: Run rabbitmq-plugin as root only
Test suite updates
Wording
Merge branch 'master' into rabbitmq-server-1314
Merge pull request #1315 from rabbitmq/rabbitmq-server-1310
Merge pull request #14 from rabbitmq/rabbitmq-server-1310
Restore delays used earlier
Make connection tracking handler more defensive
Fix compile warning
Merge branch 'master' into rabbitmq-server-1310
Merge branch 'stable'
packaging/*/rabbitmq-server.service: Wait for RabbitMQ to stop in ExecStop
Merge pull request #455 from rabbitmq/rabbitmq-server-1303
Merge pull request #1309 from rabbitmq/rabbitmq-server-1303
Merge pull request #216 from rabbitmq/rabbitmq-server-1303
Start slave queues after vhost recover, instead of node start.
Do not format errors using to_string. Let rabbitmqctl core do the formatting
Wording
Merge branch 'stable'
Merge pull request #145 from rabbitmq/rabbitmq-mqtt-136
Merge pull request #1287 from rabbitmq/fix-travis-ci-build
Provide a no-op implementation of MQTT retainer
Do not start multiple vhost supervisors for a single vhost
Test that a node can start with a dead vhost and potential slaves on it
Consider vhost can be deleted when cleaning vhost limits.
Delete vhost data even if the vhost supervisor is not running.
Test that a queue master do not fail when adding a dead-vhost node
Check if vhost supervisor is running when starting slaves.
Refactor vhost supervisor access functions.
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'master' into rabbitmq-server-1303
Merge branch 'master' into rabbitmq-server-1303
Bump Elixir, only test against one OTP version on Travis
Merge branch 'master' into fix-travis-ci-build
Merge branch 'rabbitmq-script-wrapper-refactor'
Ensure we are in a readable dir when running RabbitMQ scripts
Refactor rabbitmq-script-wrapper
Merge branch 'stable'
Merge pull request #33 from rabbitmq/rabbitmq-server-release-rabbitmq-plugins-wrapper-require-root
Change API for getting a vhost supervisor
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #458 from rabbitmq/rabbitmq-management-424
Make sure GET /api/consumers formats consumer arguments
Export one more formatting function
Merge branch 'stable'
Merge pull request #1312 from rabbitmq/rabbitmq-server-1306
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #90 from rabbitmq/fix-channels-being-killed-on-connection-close
Merge pull request #1311 from rabbitmq/rabbitmq-server-1307
amqp_network_connection: Expect the socket_closed just after `Connection.Close`
amqp_channel_sup_sup: Set `amqp_channel_sup` restart strategy to `infinity`
rabbit_ct_client_helpers: Be sure to wait for connection/channel process exit
Command to report unresponsive queues
exchange_SUITE: Cleanup policies at the end of `restart_upstream` testcase
Functions to list unresponsive queues
Fix test expectations.
Bump DEFAULT_DISTRIBUTION_BUFFER_SIZE to 128 MB
Merge pull request #144 from rabbitmq/rabbitmq-mqtt-142
Correct comment
Log this to stderr
Handle float rate values
Test stopped queue deletion
Do not try to perform a queue operation in `rabbit_amqqueue:with` if the queue is stopped.
Log MQTT processor log messages with connection sink.
Update HTTP API docs to match #453 and #454
Merge pull request #454 from rabbitmq/users_bulk_delete
Log a more sensible error message when running on an Erlang version that's too old
Merge branch 'rabbitmq-server-1305'
Erlang/OTP 19.2 is now the minimum supported version.
Naming + export type
Minor dialyzer fix
Merge branch 'rabbitmq-server-1305'
merge from master
Change users bulk delete to use a deletion resource.
Merge pull request #78 from rabbitmq/rabbitmq-server-1305
Merge pull request #22 from rabbitmq/rabbitmq-server-1305
Merge pull request #29 from rabbitmq/rabbitmq-server-1305
Merge pull request #61 from rabbitmq/rabbitmq-server-1305
Merge pull request #21 from rabbitmq/rabbitmq-server-1305
Merge pull request #27 from rabbitmq/rabbitmq-server-1305
Merge pull request #120 from rabbitmq/rabbitmq-server-1305
Merge pull request #18 from rabbitmq/rabbitmq-server-1305
Merge pull request #34 from rabbitmq/rabbitmq-server-1305
Merge pull request #23 from rabbitmq/rabbitmq-server-1305
Merge pull request #26 from rabbitmq/rabbitmq-server-1305
Merge pull request #143 from rabbitmq/rabbitmq-server-1305
Merge pull request #52 from rabbitmq/rabbitmq-server-1305
Merge pull request #12 from rabbitmq/rabbitmq-server-1305
Merge pull request #23 from rabbitmq/rabbitmq-server-1305
Merge pull request #61 from rabbitmq/rabbitmq-server-1305
Merge pull request #28 from rabbitmq/rabbitmq-server-1305
Merge pull request #35 from rabbitmq/rabbitmq-server-1305
Merge pull request #5 from rabbitmq/rabbitmq-server-1305
Merge pull request #6 from rabbitmq/rabbitmq-server-1305
Merge pull request #73 from rabbitmq/rabbitmq-server-1305
Merge pull request #56 from rabbitmq/rabbitmq-server-1305
Merge pull request #54 from rabbitmq/rabbitmq-server-1305
Merge pull request #1308 from rabbitmq/rabbitmq-server-1305
Travis CI: Bump Erlang and Elixir versions
Merge branch 'master' into rabbitmq-server-1303
Cleanup test variable queue for channel operation timeout test.
Update new style config example as well
Merge branch 'stable'
Improve docs
An error message for queues, stopped by a vhost supervisor.
Test that list_queues return stopped state for queues taken down by vhost supervisors
Set queue state to 'stopped' when terminating.
Test stopped queues in management.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Erlang/OTP 19.2 is now the minimum supported version.
Bump Erlang versions in .travis.yml
Require Erlang/OTP 19.2 (erts 8.2)
Report queues, stopped by a supervisor, using red color
exchange_SUITE: Use a dedicated key in `cycle_detection`
exchange_SUITE: No need to import rabbit_federation_test_util:no_plugins()
Merge pull request #453 from rabbitmq/rabbitmq-management-447
Add the helper to bring vhost supervisor down
Rename orphan -> without-permissions
Merge branch 'master' into rabbitmq-management-447
Introduce an endpoint that lists orphaned users
Bump Cowboy to 1.1.2
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump Ranch to 1.3.2
Support ~> Elixir 1.5.0, not just RCs
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #449 from rabbitmq/rabbitmq-management-446
Merge pull request #211 from rabbitmq/rabbitmq-management-446
Merge pull request #1304 from rabbitmq/rabbitmq-management-446
Merge pull request #450 from rabbitmq/rabbitmq-management-448
Merge pull request #13 from rabbitmq/rabbitmq-management-448
Merge branch 'master' into rabbitmq-management-446
HTTP DELETE with a body
Document endpoint for bulk delete users
Test endpoint for bulk delete users
Merge branch 'stable'
Fix unused variable
Merge pull request #445 from rabbitmq/rabbitmq-management-444
Fix tests that check vhost permissions
Spelling
Merge pull request #1293 from rabbitmq/rabbitmq-server-close-connection-on-vhost-down
Introduce an endpoint for bulk delete users
Wording
Merge pull request #1302 from rabbitmq/stable-gm-mem-usage-during-constant-redelivery
Remove debug log
Add vhost down warning on Overview page
Check vhost state on tests
Report vhost status is vhost(s) pages
Report vhost status on vhost info
Report vhost status on list_vhosts command
Run garbage collection in GM every 250ms
Give vhost access to the user creating it
Merge pull request #210 from rabbitmq/rabbitmq-server-1296
Copy
Require root or rabbitmq user for rabbitmq-plugins.
Do not crash command loading if unable to read enabled plugins file.
Remove hibernate from GM
Merge branch 'stable'
Merge pull request #60 from rabbitmq/rabbitmq-federation-59
Cleanup test groups
Merge branch 'master' into rabbitmq-server-close-connection-on-vhost-down
Merge branch 'stable'
Merge branch 'stable'
Detect internal upstream exchange deletion and restart the link
Remove the debug message about deleting queues without vhosts
Merge pull request #443 from rabbitmq/rabbitmq-management-434
Merge branch 'stable' into rabbitmq-management-434
Merge pull request #1301 from rabbitmq/rabbitmq-server-1300
Merge branch 'stable'
Merge branch 'rabbitmq-management-434' into stable
Merge branch 'rabbitmq-management-434'
Merge branch 'rabbitmq-management-434' into stable
Merge branch 'rabbitmq-management-434' into stable
Do not show queues with deleted vhost.
whitespace
Begin trying to add node_node_metrics data back into response
rabbit_mgmt_wm_definitions: Copy maps:update_with/4 locally
test/close_all_connections_command_test.exs: Wait for one second for connections to close
Fix return type of start_vhost
Begin trying to add node_node_metrics data back into response
Just use ets:tab2list
Merge pull request #442 from rabbitmq/rabbitmq-management-441
Allow permissions to be "preconfigured" when user is created
Include node_node_metrics in node_data
Merge pull request #209 from rabbitmq/rabbitmq-cli-208
Merge pull request #436 from rabbitmq/rabbitmq-server-1294
Merge pull request #1295 from rabbitmq/rabbitmq-server-1294
Recompile pid_regex at runtime, too
Recompile regexes at runtime.
More tests for user creation
Do not crash on vhost recovery failure if vhost strategy is `continue`
Merge pull request #1282 from rabbitmq/rabbitmq-management-423
Merge pull request #428 from rabbitmq/rabbitmq-management-423
Wording
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #22 from rabbitmq/restart-link
Merge pull request #28 from rabbitmq/rabbitmq-web-dispatch-27
Ensure that cowboy_req:peer return values will not crash
Add would_exceed_queue_limit function
Merge branch 'master' into rabbitmq-management-423
Merge branch 'stable'
Don't use ports in --base-uri tests as test runner already specifies one
Don't use ports in --base-uri tests as test runner already specifies one
Use node to restart link in the owner node
debian/control: Depend on erlang-dev and elixir
Merge branch 'stable'
debian/control: Depend on erlang-src
debian/control: Try with erlang-nox 1:16.b.3-3
debian/control: Add version restriction on erlang-dev and esl-erlang
Test connection closures when vhost supervisor fails.
Refuse connections to dead vhosts.
Change vhost supervision recovery process.
packaging/debs/Debian/Makefile: Install build dependencies
packaging/debs/Debian/Makefile: Use cp(1) instead of rsync(1)
Merge branch 'stable'
Merge pull request #439 from rabbitmq/rabbitmq-management-437
Merge pull request #440 from rabbitmq/rabbitmq-management-438
Catch ImportError, thanks Windows!
Add SIGPIPE handling
rabbitmqadmin: add --base-uri
Merge pull request #1298 from rabbitmq/rabbitmq-server-1297
Enable tracing of messages sent by default when using LG
Revert "rabbit_mgmt_http_SUITE: Comment out test on memory breakdown values"
Report a difference between RSS and erlang total memory only if RSS is bigger.
Merge pull request #435 from rabbitmq/rabbitmq-management-383
Merge branch 'stable'
rabbit_mgmt_http_SUITE: Comment out test on memory breakdown values
rabbit_mgmt_http_SUITE: Use spaces to indent
Update README.md
Spam
Allow users w/o password or password hash to be created
Merge pull request #53 from rabbitmq/rabbitmq-amqp1.0-52
Merge pull request #206 from rabbitmq/rabbitmq-cli-205
Supress banners for machine readable format
Merge pull request #204 from rabbitmq/memory_breakdown_command
Use gb and bytes units
Tests, refactoring
Merge branch 'stable'
Merge pull request #25 from rabbitmq/rabbitmq-top-23
Merge pull request #26 from rabbitmq/rabbitmq-top-24
Ensure session process has time to finish processing on connections shutdown.
Cosmetics
Redirect to ETS pages when selecting node in ETS pages
Return empty processes/ets lists if rabbitmq_top is not enabled on remote nodes
output formatter now can rely on command defaults
Make sure that command-provided defaults are available to output formatting fns
Whitespace
Merge branch 'master' into memory_breakdown_command
rabbitmq-diagnostics memory_breakdown: WIP
Merge branch 'stable'
Merge pull request #203 from rabbitmq/rabbitmq-cli-202
Make arguments in this fn head easier to identify
Merge branch 'master' into rabbitmq-cli-202
Squash a warning
Avoid streaming if no nodes are available
Merge branch 'stable'
rabbit_core_metrics_gc_SUITE: Wait for condition in a loop
Add vm_memory_calculation_strategy to ctl status
Expose get_memory_calculation_strategy/0
Use rabbit_misc:get_env/3
Spam
Introduce rabbitmq-diagnostics erlang_version
Switch to rabbit_misc:otp_system_version/0
Make rabbit_misc:otp_system_version/0 return a string
Introduce rabbit_misc:otp_system_version/0
Introduce rabbitmq-diagnostics server_version
Cosmetics
Merge remote-tracking branch 'origin/stable'
Replace timer:sleep with a loop waiting on a predicate.
Merge branch 'stable'
Simplify
Merge branch 'stable'
Merge branch 'stable'
Fix a merge
Merge pull request #1290 from rabbitmq/rabbitmq-server-1285
Merge pull request #213 from rabbitmq/rabbitmq-server-1285
Wording
Remove OsTotal - ErlangTotal mem calculation from other_system mem
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1278 from rabbitmq/rabbitmq-management-427
Merge pull request #49 from rabbitmq/rabbitmq-management-427
Move state record back into vm_memory_monitor, it's only used here
Add test for set_vm_memory_high_watermark
Add TODO for queue limit validation
Merge branch 'stable' into rabbitmq-management-427
Merge branch 'stable' into rabbitmq-management-427
Default memory high watermark to 1.0 when using a higher value
Merge pull request #432 from rabbitmq/rabbitmq-management-421
Merge pull request #1286 from rabbitmq/rabbitmq-management-421
Merge pull request #50 from rabbitmq/rabbitmq-management-421
Compile
Drive-by change: handle properties passed as "null" or "undefined"
Drive-by change: be benign about concurrent vhost deletes
Merge branch 'stable'
Use returned request data
Fix error messages
Merge branch 'stable'
Improve test assertion in metrics:node test.
Merge branch 'stable'
Merge branch 'stable'
rabbit_mgmt_http_SUITE: Wait in a loop for the connection to disappear
Merge branch 'master' into rabbitmq-management-421
Let already formatted AMQP tables pass through
Remove unused function
sort_field_table/1: add a shortcut for empty tables
rabbit_mgmt_format: don't confuse format_args/1 and format_arguments/1
Merge branch 'stable'
Merge pull request #212 from rabbitmq/use-sysctl-for-total-memory-on-darwin
Remove an unused fn
Use sysctl to get the total memory on Darwin (OS X)
Merge branch 'master' into rabbitmq-management-421
Merge branch 'master' into rabbitmq-management-421
Merge pull request #1283 from rabbitmq/rabbitmq-server-1280
Merge pull request #1288 from rabbitmq/fix-parseInt-usage
Merge pull request #433 from rabbitmq/fix-parseInt-usage
Merge pull request #33 from rabbitmq/rabbitmq-shovel-32
Use the same reconnection delay default everywhere
Improve error logging; don't log credentials
Fix usage of parseInt()
Fix verbiage to read a little better
Use Travis config from rabbitmq-erlang-client
Use rabbit_log module
Remove space chars from blank line
Remove extra space character
Use exit() rather than returning error to ensure UI reports error and not `badmatch`
Fix xref issue.
Wording, correct a type spec
Merge branch 'master' into rabbitmq-management-421
Extract common parts of handle_method to be used directly from HTTP API
Do not use AMQP 0-9-1 connections in HTTP API
Merge branch 'stable'
mk/xrefr: Add Elixir-based applications to code path
Log error returned from amqp_connection:start
Merge branch 'rabbitmq-management-427' of github.com:rabbitmq/rabbitmq-management-agent into rabbitmq-management-427
remove stale comment
Remove comment as it is not relevant
Merge branch 'stable'
rabbit_ct_client_helpers: Wait for 5 seconds in consume()
Wording
Rename function
Wording
It can be any error, log it as such
Wording
Return an error here
Revert unnecessary function addition
Merge branch 'stable'
Merge pull request #33 from rabbitmq/rabbitmq-consistent-hash-exchange-32
Emit vhost_deleted first, like before
Merge pull request #430 from rabbitmq/rabbitmq-management-427
Merge branch 'master' into rabbitmq-server-1280
Create queue_msg_stats as non-incremental.
if rabbit_amqqueue_sup_sup:start_for_vhost/1 fails, log the reason and throw
rabbit_vhost_sup_watcher: log a warning
Make this message up-to-date
rabbit_vhost:delete/2: reduce log noise when vhost is already deleted
Make rabbit_vhost:add/2 return an error when it fails
Log before throwing here
Virtual host watcher: stop vhost's top level supervisor instead of exiting
rabbit_nodes_common: Fix the "can't establish TCP connection" format string args, take #2
rabbit_nodes_common: Fix "can't establish TCP connection" format string args
Merge branch 'stable'
mk/rabbitmq-early-test.mk: Do not set XREFR if target is `distclean{,-xrefr}`
Merge branch 'master' into rabbitmq-server-1280
Revert ceil change
sync_detection_SUITE: Wait for sync status for 30 seconds
This file was removed unintentionally
rabbit_nodes_common: diagnostics messages improvements
Wording
Make CLI tools diagnostics message more detailed
Use rabbit_nodes_common here
Squash a warning
rabbit_nodes: move a few more functions to rabbit_nodes_common
rabbit_nodes_common: move more functions from rabbit_nodes
A typo
Terminate when message stores fail to start
Drop the "ignore" clause
Merge branch 'master' into rabbitmq-server-1280
Correct a typo
term_to_binary_compat:queue_name_to_binary/1 was superseded
Clean up queue metrics on queue termination.
Merge branch 'stable'
Add defaults to queue payload.
Make exchange consistent across restarts
Clean up deleted queue metrics in collector.
Merge branch 'stable'
Update man entries for encode and decode commands correspond to commands API.
Do not require a node to be running to execute decode, list_ciphers and list_hashes commands
Mention ctl decode arguments on manpage.
Merge pull request #1250 from rabbitmq/rabbitmq-server-1246-master
Merge pull request #31 from hwoarang/improve-opensuse-spec
Merge pull request #201 from rabbitmq/rabbitmq-cli-encode-commands
Improve error messages
Merge branch 'master' into rabbitmq-server-1246-master
Merge branch 'master' into rabbitmq-cli-encode-commands
Merge pull request #1281 from rabbitmq/rabbitmq-common-208-master
Merge pull request #211 from rabbitmq/rabbitmq-common-208-master
Split encode command tests to separate commands
rabbit_looking_glass: Tell xref to ignore call to lg:trace/4
Merge branch 'stable'
rabbit_mqtt_util: Export used functions only
Merge branch 'stable'
rabbit_mgmt_metrics_collector: Do not auto-import ceil/1
metrics_SUITE: Use wait_until() in `node` testcase
Merge pull request #72 from rabbitmq/rabbitmq-auth-backend-ldap-71
Handle concurrent vhost creation and deletion better
Use delegate:invoke and delegate:invoke_no_result
Reduce binary heap growth in delegate:cast/2
Merge branch 'stable'
Handle map when in template arguments
mk/xrefr: Skip missing directories
Reduce probability of running into server#1280
rabbit_misc: Tell xrefr(1) to ignore the call to maps:get/2
mk/xrefr: Adapt how the script ignores results to our needs
code_version: Export get_otp_version/0
Whitespace
list_vhost_limits: handle errors before serialising results
mk/xrefr: Provide our own xrefr(1) escript
Clarify
A typo
Merge branch 'stable'
Sync rabbitmq-components.mk with common
xref.config: Exclude *_compat modules
packaging: rpms: Add systemd support for openSUSE
Merge branch 'stable'
unit_SUITE: Adapt rabbitmqctl_encode testcase to the new rabbit_control_pbe API
rabbit_runtime_parameters: Pass `ActingUser` to clear_component()
rabbit_exchange_parameters, rabbit_runtime_parameters: Remove unused imports
docs/rabbitmqctl.8: Add list_hashes, list_ciphers and decode commands
Merge branch 'stable'
docs/rabbitmqctl.1.xml: Fix quoting of {encrypted, <<"...">>}
Merge branch 'master' into rabbitmq-server-1246-master
Split encode command to encode, decode, list_ciphers and list_hashes commands
Add list_local_names function
rabbit_vhost: Pass ActingUser to rabbit_auth_backend_internal:clear_topic_permissions()
Only GC local queue metrics
Filter queue list by local pid
Force some GC
Add sleep to ensure sync_mirrors settles
Check rpc return values
Issue is reproduced
Use rpc to synchronize queues
Fixes setting ha policy
Add test skel to repro gh-427 in rabbitmq-management
rabbit_runtime_parameters: Remove module name for local calls
Merge pull request #1276 from rabbitmq/rabbitmq-server-ctl-decode
CLI: ditto for decode
CLI: add list_hashes and list_ciphers in rabbitmqctl(1)
rabbit_plugins_main: Remove unused module
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-server-ctl-decode
rabbit_ct_broker_helpers: Use rabbitmq-plugins(8) to play with plugins
rabbit_cli: Remove all rpc_call() clauses
docs/rabbitmqctl.8: Fix various syntax errors
rabbitmqctl man page grammar
Add CTL commands to decode encoded value and list ciphers and hashes
Merge pull request #210 from rabbitmq/rabbitmq-common-208
Typo
Wording
Wording
Merge branch 'stable' into rabbitmq-common-208
Improve formatting for list_vhost_limits command.
Added command manuals for commands provided by plugins.
Merge pull request #1225 from rabbitmq/rabbitmq-common-198
Merge pull request #199 from rabbitmq/rabbitmq-common-198
Ignore callgraph.dot*
Merge pull request #140 from rabbitmq/rabbitmq-mqtt-139
Merge pull request #1274 from rabbitmq/rabbitmq-mqtt-139
rabbit_ct_client_helpers: Set amqp_client gen_server:call timeout to infinity
Improve options section in rabbitmqctl man page
Add 3.7 commands to rabbitmqctl man page.
Reduce binary heap growth in delegate:cast/2
Merge branch 'master' into rabbitmq-mqtt-139
Log when Looking Glass is enabled
Merge branch 'master' into rabbitmq-mqtt-139
Merge branch 'master' into rabbitmq-common-198
Merge branch 'master' into rabbitmq-common-198
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1275 from rabbitmq/add-otp-version-to-server-properties
Merge pull request #209 from rabbitmq/add-otp-version-to-server-properties
Merge branch 'stable'
Fix rabbitmqadmin link on /cli page. Make its URI absolute so it always works, even when /cli page gets accessed without trailing slash, like http://rabbitmq.server:15672/cli
Add OTP version to server properties during connection negotiation
Add OTP version to server properties during connection negotiation
Remove dead tests
Merge pull request #54 from rabbitmq/rabbitmq-auth-backend-http-53
Use rabbit_data_coercion here as well
Merge branch 'master' into rabbitmq-mqtt-139
Compile
Log this as an error, provide more details
Simplify
distribution.ex: ensure_epmd() was moved to rabbit_nodes_common
Merge branch 'stable'
Merge branch 'stable'
rabbit_nodes_common: Move ensure_epmd() from rabbitmq-server
rabbit_nodes_common: Move ensure_epmd() from rabbitmq-server
unit_SUITE: Move auth_backend_internal_expand_topic_permission() from rabbitmq-common
unit_SUITE: Move auth_backend_internal_expand_topic_permission() to rabbitmq-server
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'resolve-deps-circles-in-master'
Merge branch 'stable'
Merge branch 'resolve-deps-circles-in-master'
Merge branch 'stable'
Merge branch 'master' into rabbitmq-mqtt-139
Merge branch 'resolve-deps-circles' into stable
Merge branch 'resolve-deps-circles' into stable
Move rabbit_net:accept_ack() to rabbit_networking
rabbit_auth_backend_internal: with_user_and_vhost() was moved
Merge branch 'resolve-deps-circles' into stable
Merge branch 'resolve-deps-circles' into stable
Merge branch 'resolve-deps-circles' into stable
Handle map in HTTP parameters
Move rabbit_net:accept_ack() to rabbit_networking
xref: Add configuration to disable deprecated function checks
Move modules which don't belong here to rabbitmq-server
Move modules which don't belong to rabbitmq-common here
rabbit_vhost: Move with_user_and_vhost/3 from rabbit_misc in rabbitmq-common
mnesia_sync: Move to rabbitmq-common
mnesia_sync: Move from rabbitmq-server
worker_pool: Move from rabbitmq-server
worker_pool: Move to rabbitmq-common
rabbit_misc: Move with_user_and_vhost to rabbit_vhost in rabbitmq-server
Move rabbit_queue_collector:delete_all/1 to rabbit_queue_collector_common
rabbit_writer: Use rabbit_amqqueue_common instead of rabbit_amqqueue
Move rabbit_nodes functions used by amqp_client to rabbit_nodes_common
Move rabbit_channel functions used by amqp_client to rabbit_channel_common
Move rabbit_basic functions used by amqp_client to rabbit_basic_common
Move rabbit_networking and rabbit_reader from rabbitmq-common
Move rabbit_networking and rabbit_reader to rabbitmq-server
Move rabbit_networking:{hostname,ip_port}() types to rabbit_net
Move rabbit_networking:tcp_host() to rabbit_net
rabbit_net: Remove useless module name when calling a local function
Move rabbit_basic:maybe_gc_large_msg() and rabbit_basic:msg_size() to rabbit_writer
rabbit_log: Move it from rabbitmq-server to rabbitmq-common
rabbit_log: Move it from rabbitmq-server to rabbitmq-common
vm_memory_monitor, rabbit_resource_monitor_misc: Move to rabbitmq-common
vm_memory_monitor, rabbit_resource_monitor_misc: Move from rabbitmq-server
Merge branch 'stable'
Move rabbit_net:accept_ack() to rabbit_networking
xref: Add configuration to disable deprecated function checks
Move modules which don't belong here to rabbitmq-server
mnesia_sync: Move from rabbitmq-server
worker_pool: Move from rabbitmq-server
rabbit_misc: Move with_user_and_vhost to rabbit_vhost in rabbitmq-server
Move rabbit_queue_collector:delete_all/1 to rabbit_queue_collector_common
rabbit_writer: Use rabbit_amqqueue_common instead of rabbit_amqqueue
Move rabbit_nodes functions used by amqp_client to rabbit_nodes_common
Move rabbit_channel functions used by amqp_client to rabbit_channel_common
Move rabbit_basic functions used by amqp_client to rabbit_basic_common
Move rabbit_networking and rabbit_reader to rabbitmq-server
Move rabbit_networking:{hostname,ip_port}() types to rabbit_net
Move rabbit_networking:tcp_host() to rabbit_net
rabbit_net: Remove useless module name when calling a local function
Move rabbit_basic:maybe_gc_large_msg() and rabbit_basic:msg_size() to rabbit_writer
rabbit_log: Move it from rabbitmq-server to rabbitmq-common
vm_memory_monitor, rabbit_resource_monitor_misc: Move from rabbitmq-server
Move rabbit_net:accept_ack() to rabbit_networking
rabbit_auth_backend_internal: with_user_and_vhost() was moved
Move modules which don't belong to rabbitmq-common here
rabbit_vhost: Move with_user_and_vhost/3 from rabbit_misc in rabbitmq-common
mnesia_sync: Move to rabbitmq-common
worker_pool: Move to rabbitmq-common
Move rabbit_networking and rabbit_reader from rabbitmq-common
rabbit_log: Move it from rabbitmq-server to rabbitmq-common
vm_memory_monitor, rabbit_resource_monitor_misc: Move to rabbitmq-common
Merge branch 'stable'
Merge branch 'stable'
Support Elixir-1.5.0-rc.0
Merge pull request #30 from rabbitmq/rabbitmq-server_1129
Merge branch 'master' into rabbitmq-server-1246-master
Add a mapping for ssl_options.honor_ecc_order
Small changes to Travis CI build
Propagate client ID to authn with dedicated module
Don't use export_all
Change to 2750
Merge pull request #88 from rabbitmq/fix-travis-ci-build
Ensure ensure_kiex is called
rewrite shell script to RMQ team standard
Try to fix enotsup error by using latest kiex
Pass in extra arguments to authentication backend
Add chmod g+s to rpm spec
Put back augmented/2 functions
Fix log_management test in OTP 20
upgrade fsharp tests project file
Fix issue when binary payload is send wrapped as an AmqpValue.
Add chmod g+s to /etc/rabbitmq
Remove duplicate README
Merge pull request #1270 from rabbitmq/rabbitmq-server-1223-fix
Merge pull request #426 from lukaswoj/rabbitmqadmin-link-fix
Use wmic instead of tasklist to get Windows process memory
rabbit_net:accept_ack() was moved to rabbit_networking
rabbit_net:accept_ack() was moved to rabbit_networking
Fix term_to_binary_compat tests in R16B03
Merge branch 'stable'
rabbit_mgmt_external_stats: Use vm_memory_monitor:get_process_memory()
Merge branch 'stable'
rabbit_vm, vm_memory_monitor: Use spaces to indent
Move total_memory() from rabbit_vm to vm_memory_monitor
Fix rabbitmqadmin link on /cli page. Make its URI absolute so it always works, even when /cli page gets accessed without trailing slash, like http://rabbitmq.server:15672/cli
Merge branch 'stable'
Merge pull request #425 from rabbitmq/rabbitmq-management-419
Merge branch 'master' into rabbitmq-server-1246-master
Escape queue filter input value when regex is used
Improve naming for test iterations & properties which are tested
Fix binary comparison in OTP R16B03
Adapt this test for master (maps and all)
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1265 from rabbitmq/rabbitmq-server-1264
Merge pull request #48 from rabbitmq/rabbitmq-server-1223
Merge pull request #1259 from rabbitmq/rabbitmq-server-1223
add memory_monitor_interval test
Merge pull request #207 from rabbitmq/fix-unit-tests
Merge pull request #87 from rabbitmq/add-topic-unit-test
fix Travis CI build
Add unit test for topic permissions map
Ensure amqp_client is a test dependency
Merge branch 'stable' into rabbitmq-server-1223
Merge branch 'stable'
Merge pull request #418 from rabbitmq/rabbitmq-management-417
Merge branch 'stable' into rabbitmq-management-417
replace lists:splitwith with lists:partition
Handle {halt, _, _} responses from augment_resources better
Add unit test for columns filter with pagination
Wording
Merge pull request #116 from rabbitmq/rabbitmq-stomp-115
Merge pull request #1268 from rabbitmq/rabbitmq-server-1243
Merge branch 'stable' into rabbitmq-server-1243
Revert "Revert "Using square brackets could cause an error""
Merge branch 'stable'
Manually re-apply #1269
Revert "Using square brackets could cause an error"
Merge pull request #114 from rabbitmq/rabbitmq-server-1229
Merge pull request #138 from rabbitmq/rabbitmq-server-1229
Merge pull request #1232 from rabbitmq/rabbitmq-server-1229
Merge pull request #200 from rabbitmq/rabbitmq-server-1229
Merge branch 'stable'
Wording
Merge branch 'master' into rabbitmq-server-1229
Merge branch 'stable'
Using square brackets could cause an error
Merge pull request #1269 from rabbitmq/fix-windows-empty-string
Using square brackets could cause an error
Merge pull request #200 from rabbitmq/rabbitmq-cli-199
Sync with upstream
Fix compiler warnings that hinted at a typo in atom name
Prefix atom with :
Merge pull request #198 from rabbitmq/rabbitmq-cli-197
Make these tests more resilient to node data variations
Handle error in `rabbit_mnesia:cluster_nodes/1` on cluster_status command
Revert "Revert "Compile""
Merge pull request #12 from rabbitmq/find-rabbit-schema
Merge pull request #1267 from rabbitmq/rename-schema-file
Revert "Compile"
Compile
Fix timed out message
Use term_to_binary with minor_version to generate queue names
Use the output of multirpc to report the down or timed out nodes
Make term_to_binary_compat generate binaries using minor_version 1.
Extend resource augmentation optimisation.
Merge pull request #205 from rabbitmq/fix-travis-ci-build
Remove Travis badge :(
First step in trying to fix Travis CI
Move getting amqp_params to dedicated module and use channel operation timeout for the gen_server call
Remove dependency on amqp_client by using gen_server:call directly
Merge pull request #86 from rabbitmq/rabbitmq-erlang-client-85
Whitespace
Correctly find schema for rabbit application named "rabbitmq.schema"
Merge branch 'master' into rabbitmq-server-1229
Bump call timeout to 60s
Rename rabbitmq.schema to rabbit.schema so that the name matches the application name
Add an output formatter for report command
Add functions to get info keys to list_* commands
Change banner for list_queues and list_exchanges to show vhost
Replace infinite timeouts with sensible defaults.
Merge pull request #11 from rabbitmq/fix-schema
Merge pull request #194 from rabbitmq/rabbitmq-cli-193
Merge pull request #195 from rabbitmq/naming
Merge pull request #1266 from rabbitmq/cluster_formation
Merge pull request #196 from rabbitmq/list_queues_local
Display --local option in list_queues help
Rename <user> to <username> to standarise all rabbitmqctl commands
Depend on inets to ensure it is started when peer discovery begins
Revert commit 0dde05a6d
Move function that reports total used memory
Account for get_memory_use -> total_memory
Clarify what request body is expected for binding creating POSTs
Merge pull request #117 from rabbitmq/rabbitmq-server-1229-python-test
Add test demonstrating topic permissions using Python
Merge pull request #415 from rabbitmq/rabbitmq-server-1246-master
Merge pull request #47 from rabbitmq/rabbitmq-server-1246-master
Change vm_memory_use_process_rss config to vm_memory_calculation_strategy
Check `rabbit_mnesia:status` return value
Merge pull request #10 from rabbitmq/rabbitmq-ct-helpers-find-rabbitmq-schema
Find the rabbitmq.schema in the same way as other schemas
Use vm_memory_monitor when reporting total mem_used
Use OS memory total when reporting memory usage
Remove assumption on {total, _} position in the list
Merge branch 'rabbitmq-server-1229' of github.com:rabbitmq/rabbitmq-server into rabbitmq-server-1229
Change wording for topic authz variable expansion
Merge branch 'master' into rabbitmq-server-1229
Merge branch 'master' into rabbitmq-server-1229
Merge branch 'master' into rabbitmq-server-1229
Merge branch 'master' into rabbitmq-server-1229
Merge branch 'master' into rabbitmq-server-1229
Do not assume `#resource` is a 4-element tuple.
Merge branch 'rabbitmq-cli-191'
Generate queue names using compat function instead of term_to_binary.
Merge pull request #58 from rabbitmq/rabbitmq-server-1246-master
Merge branch 'stable'
Merge branch 'stable'
Change algorithm for federation link ID generation from term_to_binary to phash2.
Use rabbit_mgmt_format:args_hash to get args hash in bindings API and in tests.
Replace term_to_binary with phash2 for args hash.
Current process system memory functions for various OSes.
Use the new rabbit_*_common modules in rabbitmq-common
Merge pull request #1260 from rabbitmq/improve-partitions_SUITE
Remove debug commands in clustering management test
Change directory name generation function for queue indexes and vhosts.
partitions_SUITE: Try to improve partial_pause_minority
partitions_SUITE: Try to improve partial_false_positive
rabbit_node_monitor: Normalize indent and remove trailing spaces
rabbit: Remove trailing space in log message
Log enabled and disabled plugins in offline mode.
Document topic permissions in rabbitmqctl man page
inet_tcp_proxy: Add log messages to help debug testcase
Merge branch 'stable' of github.com:rabbitmq/rabbitmq-amqp1.0 into stable
merge
inet_tcp_proxy: Log proxy crash to stderr and error_logger
inet_tcp_proxy: Fix logging of "BLOCKED"/"allowed" events
rabbit_ct_broker_helpers: Fix race condition with inet_tcp_proxy startup
More tests
Add a test for extract_nodes/1
Merge pull request #3 from rabbitmq/rabbitmq-peer-discovery-k8s-2
Merge pull request #3 from rabbitmq/rabbitmq-peer-discovery-etcd-2
Add cuttlefish schema tests and cuttlefish schema. Fixes #2
Add cuttlefish schema tests and cuttlefish schema. Fixes #2
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add peer_discovery_etcd and peer_discovery_k8s to rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #2 from rabbitmq/rabbitmq-server-1257
Merge pull request #1 from rabbitmq/rabbitmq-server-1257
Merge pull request #1 from rabbitmq/rabbitmq-server-1257
Merge pull request #3 from rabbitmq/rabbitmq-server-1257
Merge pull request #3 from rabbitmq/rabbitmq-server-1257
Merge pull request #204 from rabbitmq/rabbitmq-server-1257
Merge pull request #1258 from rabbitmq/rabbitmq-server-1257
Merge branch 'master' into rabbitmq-server-1257
Add lock and unlock to peer discovery backend
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add peer_discovery_etcd and peer_discovery_k8s to rabbitmq-components.mk
Merge branch 'master' into rabbitmq-server-1257
Less compile warnings
Less compile warnings
Less compile warnings
Use system process rss memory when reporting vm memory
Removed time_compat and rand_compat usages.
Set default cluster name to 'default' as in all other backends
Lock support
Merge pull request #84 from rabbitmq/rabbitmq-erlang-client-83
Support variable expansion in topic authz
Match on function head per @Ayanda-D's advice
Correctly invoke rabbit_log:log/4 here
Don't fail with badrecord when adapter_info is undefined
Make this test more robust
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #77 from rabbitmq/rabbitmq-stomp-112
Merge pull request #113 from rabbitmq/rabbitmq-stomp-112
Add failing test that shows custom headers are not returned.
Fix off-by-one error in amqp10 shovel
Add passing tests for stomp->stomp messaging with headers, AMQP test not running correctly yet
Merge branch 'stable'
Documentation updates
Locking support
Locking support
Rename test suite
Locking support
Fix compile warnings about unused args.
Use https github link for amqp10 dependency
Merge branch 'stable'
remove duplicate info item for mqtt connections
Use plugins formatter as default formatter for plugins list command
Locking support in cluster formation
Return httpc error as a string
Initial commit
util: migrate stringify_error/1 from rabbitmq-autocluster
Actually log key and config mapping
Squash a warning
More peer discovery backend shortcuts
Merge pull request #2 from rabbitmq/rabbitmq-shovel-26
Merge pull request #1246 from rabbitmq/rabbitmq-server-1243
Exec command tests
Return :ok in validation.
Improve wait command.
Add an API to await for node startup from a remote node.
Merge branch 'stable'
rabbitmq-early-test.mk: Include `$(RMQ_CI_CT_HOOKS)` in TEST_DEPS
APi to start_apps with different modes. Required by tests to not stop the common_test node
API to start applications in different modes
Use binaries as queue names in tests
Start rabbit application as temporary in tests
Do not depend on rabbit module in rabbit_nodes.
Merge pull request #2 from rabbitmq/rabbitmq-peer-discovery-aws-1
fix test broken by change of value from secret_key_id to secret_key
tags must be convertible into a map
Merge branch 'stable' into rabbitmq-server-1243
Add schema that passes tests
Merge pull request #1 from rabbitmq/rabbitmq-server-1247
Add failing CT tests for cuttlefish schema
Add Cuttlefish schema
Naming, wording
Add schema test suite from rabbitmq-management and skeleton files
Merge pull request #9 from rabbitmq/rabbitmq-ct-helpers-8
Cleanup cluster members that are not known to peer discovery backend
Merge branch 'stable'
Merge pull request #1253 from FabianPonce/fix-gc-docs-stable
Merge pull request #1254 from rabbitmq/lrb-remove-stale-comment
Remove stale comment
Merge pull request #190 from rabbitmq/rabbitmq-cli-189
Update README with transfer_limit_margin connection config
Merge pull request #1252 from FabianPonce/fix-gc-docs
Refine and comment connection config
Only auto flow based on settled transfers.
rabbit_authn_backend:user_login_authentication/2: allow maps as context info
Do not try to connect to the RabbitMQ node before executing command
Modify the documentation and background_gc.erl default value for background_gc_enabled to false to match the behavior of the Makefile.
Modify the documentation and background_gc.erl default value for background_gc_enabled to false to match the behavior of the Makefile.
Quiet mode for wait command will suppress log messages
Add client_id as an topic authz expandable variable
Get topic variables to expand from AMQP params
Merge branch 'rabbitmq-cli-wait-stages'
Do not fail info emitter collector on normal exit.
Typo
Merge pull request #31 from rabbitmq/rabbitmq-shovel-26
Cache forward headers
simplify code
Try to find app-specific schema in deps/App, otherwise try deps/../priv
Merge branch 'stable'
Merge branch 'rabbitmq-server-1233-v2' into stable
Merge pull request #412 from rabbitmq/rabbitmq-management-405
Update README.md
Merge pull request #398 from rabbitmq/rabbitmq-shovel-26
Merge pull request #16 from rabbitmq/rabbitmq-shovel-26
Merge pull request #30 from rabbitmq/rabbitmq-shovel-26
Make sure read and write topic permissions are not swapped
Change cluster node type to selected type
Merge branch 'master' into rabbitmq-management-405
Make wait take the actual function execution time to account
Log MiB instead of MB and report total of bytes
Update clustering management test to support new CLI output. Already joined node message. Changing disk node to disk should not fail
Ignore this erlang.mk artefact
Comment on binary format values
OTP-20 compatibility workaround for queue directory names.
Fix match exception bug
Define input type 'map'
Use map type for AWS tags
Ignore ./test/config_schema_SUITE_data/schema/rabbitmq.schema
Fix function arity when testing handle_command_output
Handle multiple expected HTTP codes as one_of when testing management API
Change argument order for output processing function
Merge branch 'stable'
Mention that HTTPS requires Python 2.6.7 or later
Update python version compatibility on rabbitmqadmin page
Callback for exec_command function to process output
Test exec command
Merge pull request #413 from tkren/master
Add new test to check argument processing typical to multiple commands.
Fix typo
clustering_management_SUITE: join_cluster returns `ok` if successful
Merge remote-tracking branch 'origin' into rabbitmq-server-1229
Merge remote-tracking branch 'origin' into rabbitmq-server-1229
join_cluster_command: Format the `already_member` return value
Update python version compatibility on rabbitmqadmin page
Use maps and new json library, migrate test suite
Rename autocluster -> cluster_formation
Finish Cuttlefish schema, fixes #2
Support short peer_discovery_backend values
Cuttlefish schema WIP
Log expected and generated snippets
Kubernetes discovery implementation
Initial commit
Use Erlang maps for tags
Manage topic permissions from the UI in user and vhost tabs
TODO: support Consul node name calculation from IPv6 interfaces
rabbit.autocluster => rabbit.cluster_formation in tests
rabbit.autocluster => rabbit.cluster_formation
autocluster => cluster_formation in Cuttlefish schema
rabbit.autocluster => rabbit.cluster_formation
rabbit.autocluster => rabbit.cluster_formation
Explain the origin
Fix broken help tags
Merge branch 'stable'
Merge pull request #408 from rabbitmq/rabbitmq-management-407
Update link anchor to what is used in rabbitmq/rabbitmq-website
Report queue name on static shovel
Display static shovel endpoint on status page
Merge branch 'stable'
Merge branch 'stable'
Wait in stages.
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add rabbitmq_aws
Typo in info message
Fix formatting of static shovel name
Port remaining tests
Check that there are no errors in report command output
Trace on/off commands output test
Include the endpoint (address, queue, exchange) in status command
Sync with upstream
Merge branch 'stable'
Do not match arguments in merge_defaults.
Less strict help arguments
Print result in trace_on/off commands
Unused clause
Unfold stream subcommand output in report command.
Do not stramify keyword lists (proplists)
Helper function to parse info_keys arguments
Set default formatter for environment command to erlang
New CLI helpers API
New CLI helpers API. Better federation_status banner message
New CLI helpers API
New CLI helpers API
New CLI helpers API
New CLI helpers API
Merge branch 'stable'
crashing_queues_SUITE: Remove an unused variable
More tests
More tests
Merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable' into master
merge branch 'stable' into master
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add peer discovery plugins (3.7.0+)
rabbitmq-test.mk: Add a *-on-concourse target
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add peer discovery plugins (3.7.0+)
More tests
More tests, meck failure debugging WIP
Sync Makefile with recent erlang.mk changes
Sync Makefile with recent erlang.mk changes
Sync erlang.mk
Sync erlang.mk
Fix monitor message patterns for collect_monitors.
rabbit_control_helper: Elixir.RabbitMQCtl:exec_command() takes a single argument
file_handle_cache: Use `rand` directly, not `rand_compat`
Do not try to close a connection that has never been established
Merge branch 'stable'
Merge branch 'stable'
Explain
Avoid formatting message of no peers discovered.
Refactor of duplicated code
Merge branch 'stable'
Follow up to db928bceb551c4160be2d28d772f8caf68948698
Merge branch 'stable'
Remove cleanup of non-existent option.
Merge branch 'stable'
Do not assume bindings args hash in test.
Do not assume bindings args hash in test.
Add rabbitmq_aws as a dependencies
Remove failing end_per_testcase clause.
Merge branch 'stable'
Merge branch 'stable'
rfc6455_client: Replace crypto:rand_bytes/1 by crypto:strong_rand_bytes/1
*_SUITE: Replace crypto:rand_bytes/1 by crypto:strong_rand_bytes/1
Merge pull request #1239 from rabbitmq/rabbitmq-server-1221
Merge branch 'stable'
Merge pull request #399 from binarin/filter-before-sorting-clean
Merge pull request #201 from aartamonau/master
Merge pull request #1241 from rabbitmq/rabbitmq-server-1238-stable
Merge pull request #202 from rabbitmq/rabbit-common-201-stable
Merge pull request #1238 from aartamonau/master
Fix sup_delayed_restart_SUITE.
Configure MNESIA_BASE and MNESIA_DIR on dev environment
Fix sup_delayed_restart_SUITE.
More tests
Merge branch 'stable'
Merge pull request #7 from binarin/ct-stacktrace-in-assertions
Merge pull request #6 from binarin/unicode-environment
Ensure that stacktraces are present in assertions
Fix environment logging for Unicode systems
Delay augmenting for all basic queue columns
Fix sorting and also its relationship to filtering
More tests
More tests
Actually return the default node prefix doc string advertises
More tests
Export a few more functions for tests
Initial tests
[supervisor2] Mark child restarting when delaying restart.
[supervisor2] Mark child restarting when delaying restart.
Merge branch 'master' into rabbitmq-common-198
Merge branch 'master' into rabbitmq-common-198
Merge branch 'stable'
Merge pull request #1226 from binarin/dont-expand-dir-plugins-stable
Merge pull request #1234 from rabbitmq/rabbitmq-server-1224
Disable debug logging
Merge branch 'stable'
Missing comma in config example
Augment queues after sorting (if possible)
Use new config parameter total_memory_available_override_value to set total memory
Add protocols used to shovels status command
Add variable_map to topic access context type
Change variable map key in context for topic authz
Change variable map key in context for topic authz
Rename rabbit_tracer to rabbit_looking_glass
Ensure URIS are all binaries.
Update shovel UI for AMQP 1.0 shovels
Add shovel specific css
Commit .deb and .rpm change logs
Log message tweaks
Change all return errors into log messages and empty node list
Correct a couple of misplaced parentheses
Add a .gitignore
Initial commit
Merge branch 'stable'
Ditto
Ditto
time_compat is gone in master
Merge branch 'stable'
Ditto
Update README.md
Move a misplaced parenthesis
Avoid double quotes in this log entry
Sync erlang.mk with rabbit_common
Add tests for variables expansion in topic authz
Expand username & vhost variables in topic perms
Fix tests
Better error management with stream outputs from list_ commands.
Format runtime parameters using info items
Improve error reporting.
Add test for amqp10 shovels
Emit protocol in shovel report.
Use autocluster tag around peer_discovery_backend in Makefile
Naming, wording
Merge branch 'binarin-dont-expand-dir-plugins-master'
Naming, wording
config_map/1 moved from consul backend
Use config_map/1 from common application
Fix runtime parameter formatting.
Fixing erlang and string formatters.
Use plugins dist dir as primary source of truth about presen plugins
Merge 'dont-expand-dir-plugins-stable'
Don't expand plugins that are already unpacked
Merge pull request #3 from rabbitmq/rabbitmq-aws-2
Bumped a dependency version to fix some warnings
Initialise credentials on demand
Refactor configuration validation
Revert "rabbitmq-build.mk: Enable -Werror for testsuites too"
Makefile: Fix how we patch rabbit_common.app for compat modules
Ignore more tracing tool artifacts
Makefile: Do not set -Werror when building src/*_compat.erl
ssl_compat: Fix comment which explains the use of nowarn_deprecated_function
ec_semver*: Update from upstream to support Erlang 20
file_handle_cache: Move it from rabbitmq-server to rabbitmq-common
file_handle_cache: Move it from rabbitmq-server to rabbitmq-common
rabbitmq-build.mk: The `nowarn_export_all` flag was moved
rabbit_upgrade_functions: Turn off `export_all` warning
rabbitmq-early-test.mk: Remove a stale comment about cth_styledout
rabbtmq-early-test.mk: Always enable cth_styledout
rabbitmq-build.mk: Enable -Werror for testsuites too
file_handle_cache: Move RabbitMQ-specific functions to rabbit_fhc_helpers
Move rabbit_memory_monitor:memory_use/1 to vm_memory_monitor
Merge branch 'stable'
Add nowarn_export_all to erlang compile options
Do not assume Node part format in Pid binary.
Change the way we filter supported ciphers and hashes.
Bump dependencies versions
Bump Elixir version requirement.
Add Looking Glass support
Merge branch 'stable'
Wording (take 2, spotted by @dcorbacho)
Merge pull request #397 from rabbitmq/rabbitmq-management-389
Wording
Add rabbit_tracer boot step for running Looking Glass
Merge pull request #197 from rabbitmq/rabbitmq-common-196
Stop stats only if they have been initialised
Merge branch 'stable'
Merge pull request #195 from rabbitmq/augment-closed-connection-log-entries
Only submit import definitions if a file has been selected
Add confirm dialog to import definitions
Usability: import / export definitions in different forms
Stop emitting stats before hibernate on gen_server2
Ditto for prematurely [but explicitly] closed client TCP connections
Remove unreachable code
import pget/2 and pget/3
Add license headers Only decrement counters for known tags
Log vhost and username for cleanly closed connections
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Fix an typo
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #22 from rabbitmq/fix-node-select-input
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
rabbit_ct_helpers: Split lines to fit into 80 columns
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Fix switching nodes
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-plugin.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-test.mk` early-stage plugin
Update erlang.mk
Makefile: Load the new `rabbitmq-early-test.mk` early-stage plugin
Makefile: Load the new `rabbitmq-early-test.mk` early-stage plugin
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Use the new early-stage plugin support from Erlang.mk
Update erlang.mk
Use backwards compatible (deprecated) milli_seconds tag
Merge pull request #49 from rabbitmq/rabbitmq-amqp1.0-47
Comment debug flag
Merge pull request #48 from rabbitmq/rabbitmq-amqp1_0-43
Update README.md
Merge pull request #194 from rabbitmq/rabbitmq-server-1216
Merge pull request #1220 from rabbitmq/rabbitmq-server-1216
Change the way we filter supported ciphers and hashes.
Start/stop test node after VM stops because of rabbit app failures
Merge branch 'stable'
supress warning for handlers when reason is shutdown
Merge pull request #80 from lazedo/patch-1
Do not warn about export_all in modules
Do not assume Node part format in Pid binary.
Rebuilt the cuttlefish escript to support OTP-20.0 smp flags
supress warning for handlers when reason is shutdown
Link Gatherer when rebuilding a message store index.
Merge branch 'stable'
Delegate generic EXIT handling to implementation modules
Delegate generic EXIT handling to implementation modules
Merge branch 'stable'
Merge pull request #135 from rabbitmq/rabbitmq-mqtt-134
Avoid emitting stats when state is undefined
rabbitmq-build.mk: Format -ct_hooks value dynamically
rabbitmq-build.mk: Fix typo in "concise"
Tidy up logging
Make rabbit application transient
Revert "Introduce supervisor2 prep_stop callback"
Revert "Make callback prep_stop/0 optional"
Revert "Use new supervisor2:prep_stop to stop rabbit dependencies on shutdown"
Merge branch 'stable'
Merge pull request #70 from Ninja3047/anon_auth
Add option to enable anonymous authentication
Merge branch 'stable'
Naming
restore project.json so that CI can build it
Write SASL Outcome frame on auth failure.
Merge remote-tracking branch 'origin/stable'
Merge pull request #1217 from rabbitmq/improve-wait-when-clustering-1214
Replace await_startup with new implementation
Add test for rabbitmqctl wait when node fails to cluster
Refactor static configuration validation.
Makefile: Use manpages and mandoc(1) to create `readme-service.txt`
Update man page filenames
Merge branch 'stable'
Merge pull request #60 from rabbitmq/rabbitmq-trust-store-58
Merge branch 'stable'
Improve logging
Fix HA OCF script
Enlist OCF_RESKEY_limit_nofile_default on comment
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #79 from bitwalker/bitwalker/handle-trapped-exits
Merge pull request #1201 from rabbitmq/convert-manpages-to-mdoc
Properly handle trapped exits in amqp_gen_connection
Ensure rabbit is running after the boot process finishes
Merge pull request #1158 from rabbitmq/rabbitmq-server-1146-full
Merge pull request #5 from rabbitmq/rabbitmq-server-1146
Merge pull request #188 from rabbitmq/rabbitmq-server-1146-full
Fix mnesia_table_loading_retry_timeout example config & add retry limit
upgrade fsharp tests project file
Merge pull request #29 from matelakat/fix-ocf-scripts
Fix HA OCF script
Fix wm modules that did not call 'with_decode' with the right number of arguments.
Merge pull request #28 from matelakat/minor-comment-fix
Enlist OCF_RESKEY_limit_nofile_default on comment
Merge branch 'stable'
Re-do #21
Merge pull request #27 from matelakat/readd-limits
Fix bug in handling auth mechanism response tuple
add attach_sender_link_sync/5
Re-do #21
Remove a few redundant includes
merge branch 'stable' (continued)
Merge branch 'stable'
Translate multi-acks into amqp 1.0 disposition range.
Merge branch 'master' into rabbitmq-server-1146-full
Merge branch 'master' into rabbitmq-server-1146-full
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'master' into rabbitmq-server-1146
Schema mapping for vhost_restart_strategy
Merge pull request #1215 from rabbitmq/rabbitmq-server-1213
Merge pull request #193 from rabbitmq/rabbitmq-server-1213
Minor naming improvement
Merge pull request #46 from rabbitmq/rabbitmq-management-393
Merge pull request #394 from rabbitmq/rabbitmq-management-393
Promote slaves only for actual cluster members when forgetting cluster nodes
Test single slave restart after forget_cluster_nodes in offline mode
Format Web contexts
Format ssl_opts in HTTP API listeners and Web contexts
mixed dynamic tests
Wording
Rename rabbit.vhost_restart_strategy options
Merge pull request #1210 from binarin/more-defaulting-for-plugins-expand-dir-master
Merge pull request #1209 from binarin/more-defaulting-for-plugins-expand-dir-stable
Merge branch 'master' into rabbitmq-server-1146-full
Add api overload to configure durability during attach
Add vhost_restart_strategy to default app config.
Allow 2 restarts per hour for vhost msg stores
Add a certificate hash to cert_id in the file provider.
dialyzer fixes
Monitor reader in case socket is closed
Do not check directory change time.
Use plugins expand dir with default fallback value
Use plugins expand dir with default fallback value
amqp10 autodelete
rabbit_amqqueue: Fix notify_sent_queue_down() wrapper
amqp_channel: Use the new rabbit_amqqueue_common module
Move rabbit_amqqueue:notify_sent*() to rabbit_amqqueue_common
rabbit_amqqueue: Replace tabs with spaces
Move rabbit_networking:fix_ssl_options() to rabbit_ssl_opions
merge
amqp_network_connection: Use the new rabbit_ssl_options module
amqp_direct_connection.erl: Use rabbit_cert_info
Skip erlang.mk dependencies when building mix dependencies.
Merge pull request #390 from rabbitmq/rabbitmq-management-379
Fix typo in x-credit arguments.
Merge pull request #392 from rabbitmq/rabbitmq-management-382
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Reload apps on config update.
rabbit_tracing_wm_trace: Update rabbit_mgmt_util:with_decode() usage
Pre-select vhost in 'Add/update policy form'
Move dynamic calls to the module defining the behaviour.
rabbit_tracing_SUITE: Include rabbit_mgmt_test.hrl from rabbitmq-ct-helpers
http_SUITE: Include rabbit_mgmt_test.hrl from rabbitmq-ct-helpers
federation_mgmt_SUITE: Include rabbit_mgmt_test.hrl from rabbitmq-ct-helpers
Pick a random value over the range in ms
Merge pull request #391 from rabbitmq/rabbitmq-management-377
test/*_SUITE.erl: Include amqp_client.hrl in various testsuites
Ensure cowboy Req is returned from `with_decode`
Merge branch 'master' into rabbitmq-management-379
Pass username to apply_defs
Merge branch 'stable'
Be Python 3 compatible
More Python 3 compatibility tweaks
Be Python 3 compatible
Merge branch 'stable'
src/rabbit_mgmt_test_util.erl: Fix include path
include/rabbit_mgmt_test.hrl: No need for amqp_client.hrl
Make callback prep_stop/0 optional
Post-merge fixes
Post-merge fixes
Merge remote-tracking branch 'origin/stable'
Merge remote-tracking branch 'origin/stable'
Merge remote-tracking branch 'origin/stable'
Merge branch 'stable'
Log rabbitmqctl's output on failure
Merge branch 'stable'
Merge pull request #26 from matelakat/log-rabbitmqctl-output
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #111 from rabbitmq/rabbitmq-web-stomp-75
Log rabbitmqctl's output on failure
Wording
Fix dialyzer warnings and termination during initialisation of the reader
rabbitmq-build.mk: Enable cth_styledout on Travis and Concourse
Merge pull request #76 from rabbitmq/rabbitmq-web-stomp-75
Explain
Fix types and dialyzer warnings
Pass undefined instead of a blank #stomp_frame
rabbit_stomp_processor:cancel_consumer/3 returns a triplet
Make sure maybe_delete_durable_sub/3 handles server-initiated cancelation
Use a long lived process to start Consul health check timer
Log at info level by default
Explicitly return ok here
Set Consul health check up in post_registration/0
Compile
A no-op implementation of post_registration/0 for core backends
Introduce a post_registration/0 callback for peer discovery backends
Merge pull request #133 from rabbitmq/rabbitmq-management-agent-45
Merge pull request #110 from rabbitmq/rabbitmq-management-agent-45
Default to 0 for stats calculation
Default to 0 for stats calculation
Fix list_nodes/0 return value, improve naming a bit
Replace LinkRef with Sender or Receiver
Merge pull request #1205 from rabbitmq/rabbitmq-server-1202
Ensure ERL_LIBS starts with a valid path
Merge pull request #1204 from ebelew/erl_libs_windows_fix
add crypto to LOCAL_DEPS
Make maybe_re_register/0 handle {NodeList, NodeType}
Treat unexpected socket closures as errors.
Terminius durabuility
Handle undefined delivery state.
Drop {ok, Nodes :: list()} from the spec as it is not actually supported
Add a missing peer discovery backend callback
Use a more meaningful example
Inject a randomized startup delay for peer discovery backends that support registration
Merge branch 'rabbitmq-management-384' into stable
Ensure ERL_LIBS starts with a valid path
Compile from scratch
Merge pull request #185 from rabbitmq/rabbitmq-cli-discovery-peers-command
This command belongs to diagnostics, not ctl
Don't output backend information; declare a formatter instead of delegating to it
Merge pull request #387 from lukebakken/lrb-clarify-api-user-password-hash
Add example of password_hash that is generated according to the expected algorithm.
Rename list_discover_peers with discover_peers
Format result
Calculate average time per operation samples and averages
Move rabbit_mgmt_test_util to rabbitmq_ct_helpers to use in mgmg plugins tests
Move management test helpers here to test management plugins
amqp10 dynamic tests
scripts/rabbitmq-server: Work around signal handling issue with Dash
Add case
Add list_discovery_peers command.
Replace dicts with maps
Merge pull request #190 from binarin/elixir-plugin-dist-regen
docs: Convert manpages from DocBook to mdoc(7)
simple dynamic ampq10 shovel
Regenerate Elixir-based .ez-s after changes
Fix flaky dynamic test.
Merge pull request #1196 from rabbitmq/rabbitmq-server-1194
Update type spec
Revert "Minor doc improvement"
Minor doc improvement
Merge branch 'stable'
Merge pull request #1195 from rabbitmq/rabbitmq-server-1180
Support integers in memory relative free disk space limits
Makefile: Fix malformed manpages
Merge pull request #1189 from rabbitmq/rabbitmq-server-1171
Merge branch 'master' into rabbitmq-server-1171
refactor parameter validation towards multi-protocol
Log all discovered peers, too
Merge pull request #1175 from rabbitmq/rabbitmq-server-1143
Registration, listing peers and unregistration are functional
Move functions around, don't reference autocluster_log, cosmetics
Replace dicts with maps
Replace dicts with maps
Merge branch 'stable'
Extend rabbit_data_coercion:to_list/1 to atoms
Add unit test for AAAA record.
Replace dicts with maps for internal structures
Replace dicts to maps for internal structures
Replace dicts to maps for internal structures
Replace dicts with maps for internal structures
Replace dicts with maps for mqtt.
amqp10 parameters configuration parsing
Change the IPv6 support
Typo
Refactor parameter parsing
Initial commit
Port httpc wrapper and util modules from rabbitmq-autocluster
Add a local dependency on inets
Merge branch 'stable'
Compile in non-test environment
Remove a debug trace
Add a note on project maturity
Initial cut at revisited configuration module
Add support for IPv6
Replace dicts with maps for queue mirroring logic.
Use new supervisor2:prep_stop to stop rabbit dependencies on shutdown
Make rabbit_vhost_sup permanent so it can be restarted once without bringing down the whole supervision tree and rabbit app
Ignore exceptions on the msg store while terminating a client on queue shutdown.
Introduce supervisor2 prep_stop callback
Replace dicts with maps for queue index segments
Merge pull request #67 from rabbitmq/rabbitmq-auth-backend-ldap-66
Fix badmatch exception when purging connections
dialyzer fixes, renames and refactoring
Replace dict with maps for proplist merge/group helpers
Replace dicts with maps in channel process internal state.
Replace dicts with maps in message store GC
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Use default value in config:get_env/2
Merge remote-tracking branch 'origin/master' into rabbitmq-shovel-26
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
merge from master
Remove build.config re-update erlang.mk
Refactor towards multi-protocol
dialyzer fixes
rabbitmq-tools.mk: Remove syntastic-related targets
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
correctly tag timestamps
message and delivery annotation setters
Shutdown cannot fail
Merge pull request #189 from binarin/dist-elixir-plugin
Allow building plugins written in Elixir
Remove.
Placeholder, remove later.
fix issues encoding/decoding application_properties
fix rountrip serialization
Replace update_with with find and put
Ignore .envrc files
Merge pull request #183 from rabbitmq/rabbitmq-cli-shutdown
Turn certain debug messages into full error logs
Add application_properties
Add local deps
Remove debug logs
Merge branch 'master' into rabbitmq-server-1143
Merge branch 'stable'
Queue supervisor location for per-vhost supervisor
Support per-vhost stop/start API for backing queue behaviour.
Ignore pid from supervisor:start_child
Configurable vhost restart strategy
Move test fixes from unit_inbroker to backing_queue
Use wrapper supervisor one level above vhost supervisors
Create default vhost after rabbit recovery, so vhosts supervisor will be started
Migrating to per-vhost supervisor message store.
Queue and msg store supervisor locations
Per-vhost supervision trees for queues and message stores.
Merge pull request #1179 from rabbitmq/rabbitmq-server-1178
Naming
Merge branch 'stable'
Wording
Merge pull request #378 from rabbitmq/rabbitmq-management-377
disable debug logging
Add license headers
Commit 3.6.9 package change logs
Set Connection:close header after POST requests.
Log message wording
Re-enable disk_monitor in case of parser failures
Make file_handle_cache a map instead of dict in message store internal structures.
Merge branch 'stable'
Sync README.md with master
Reduce the possibility of confusion, see #9
Move clients and cref_to_msg_ids from dicts to maps
Use Make variables to produce application descriptor
Merge pull request #374 from rabbitmq/rabbitmq-management-243
Merge branch 'stable' into rabbitmq-management-243
Merge pull request #376 from rabbitmq/rabbitmq-management-375
Merge pull request #44 from rabbitmq/rabbitmq-management-375
Ensure numeric defaults, so atoms are not passed through
Default rates to 0 if any of the values is not available
Simpler way to create amqp methods in binding deletion.
Merge branch 'stable'
Call init:stop() during rabbitmqctl stop even if logging fails.
Merge pull request #2 from rabbitmq/rabbitmq-autocluster-104
Merge branch 'master' into rabbitmq-cli-shutdown
Handle response errors
Handle URIs without fragments
Merge pull request #184 from Ayanda-D/rabbitmq-cli-grammar
Grammar and typo fix
Merge pull request #373 from rabbitmq/rabbitmq-management-372
Merge branch 'stable'
Merge branch 'master' into rabbitmq-cli-shutdown
Support maps in deep-sorting
Merge pull request #43 from rabbitmq/rabbitmq-management-agent-41
Throw an error if retention policies are missing
Merge branch 'stable'
Do not emit stats if connection has not been stablished
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #74 from rabbitmq/rabbitmq-management-agent-42
Merge pull request #20 from rabbitmq/rabbitmq-management-agent-42
Merge pull request #131 from rabbitmq/rabbitmq-management-agent-42
Remove RABBITMQ_HEXPM_DEFAULT_FILES for now
Do not emit stats if connection has not been stablished
Do not emit stats if connection has not been stablished
Do not emit stats if connection has not been stablished
add tls options to uri parser
Merge branch 'master' into rabbitmq-server-1143
Merge branch 'stable'
Merge pull request #1176 from rabbitmq/rabbitmq-server-1172
fix type spec
basic amqp uri parser
Make queue master locator treat queue args as AMQP table.
Merge branch 'stable'
Manually backport #20, #21, #24, #25 by @vuntz and @aplanas to stable
Merge branch 'stable'
Manually backport #20, #21, #24, #25 by @untz and @aplanas to stable
OCF RA: Add new limit_nofile parameter to rabbitmq-server OCF RA
Merge pull request #21 from vuntz/ocf-limit_nofile
Mention where to get 3.6.x support
Mention what plugin that is
Initial commit
Add erlang.mk and rabbitmq-components.mk, update Makefile
License files
Initial commit
Avoid duplicate unregistration
Merge branch 'master' into rabbitmq-server-1143
Merge branch 'stable'
Merge branch 'stable'
(c) year
(c) year
Merge branch 'master' into rabbitmq-server-1143
(c) year
(c) year
(c) year
Merge branch 'master' into rabbitmq-server-1143
Merge pull request #182 from rabbitmq/rabbitmq-cli-180
Merge branch 'master' into rabbitmq-cli-180
Change rabbitmqctl integration tests for shutdown command to support the new CLI
Unused obsolete functions
Test shutdown command validation.
Do not import modules. Import only protocols and records.
Merge branch 'stable'
README.md: Document how Windows' PRODUCTVERSION is computed by default
Implement shutdown command
Docs and refactor to use link_refs in amqp10_link events
OCF RA: Only set limit for open files when higher than current value
Merge pull request #24 from vuntz/ocf-vhost
OCF RA: Add new limit_nofile parameter to rabbitmq-server-ha OCF RA
Optimize rabbitmqctl startup.
OCF RA: Add default_vhost parameter to rabbitmq-server-ha.ocf
Naming; make sure ensure_cookie/1 always returns :ok
Merge branch 'stable'
move hrl file as not meant to be shared
README updates
Add README.md
Make it possible to specify erlang cookie from command line
Merge branch 'stable'
Merge branch 'rabbitmq-web-stomp-72' into stable (again)
Use correct order of arguments here
Merge branch 'stable'
Merge pull request #73 from rabbitmq/rabbitmq-web-stomp-72
document api modules
Handle the case where Cowboy HTTP listener is already started.
handle tcp errors
implement flow auto-renewal
rabbit_control_main: Indicate node name in the "successfully shut down" line
Merge branch 'stable'
Merge pull request #1169 from rabbitmq/more-info-during-shutdown
Merge branch 'stable' into more-info-during-shutdown
report reason in detached event
Ignore test/config_schema_SUITE_data/schema/
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
(c) year
OCF RA: Don't hardcode primitive name in rabbitmq-server-ha.ocf
Merge pull request #25 from vuntz/ocf-resource_name
add service bus test to test suite without adding it to the all() groups
rabbit_epmd_monitor: call register_node on Mod, not its default
Merge pull request #1170 from srenatus/sr/better-call-Mod
set default message_format
rabbit_epmd_monitor: call register_node on Mod, not its default
Merge branch 'stable'
OCF RA: accept 1 as valid exit code from "rabbitmqctl status"
OCF RA: Use rabbitmqctl_action wrapper for stop action
Merge pull request #20 from vuntz/ocf-fixes
OCF RA: Don't hardcode primitive name in rabbitmq-server-ha.ocf
Keep all shutdown print statements together
Tweaks for Servicebus
Add more info during rabbitmqctl shutdown
OCF RA: accept 1 as valid exit code from "rabbitmqctl status"
OCF RA: Use rabbitmqctl_action wrapper for stop action
Print diagnostics on nodedown error
Remove remote node shutdown behaviour from rabbitmqctl man
OCF RA: Add new limit_nofile parameter to rabbitmq-server OCF RA
Add shutdown test for non-running node
Add tests to check for errors during node shutdown
Re-throw exception when stopping RabbitMQ
Ignore tmp generated docs
Add shutdown command to rabbitmqctl documentation
Use tls for roundtrip test
Add basic ssl/tcl support
Merge branch 'stable'
rabbit_ct_broker_helpers: Execute `make test-dist` once only
Add shutdown to a list of rabbitmqctl commands [#142699191]
Merge pull request #1166 from rabbitmq/rabbitmq-server-1162
Introduce rabbitmqctl shutdown command.
Implement PLAIN SASL auth
Merge pull request #1 from rabbitmq/rabbitmq-autocluster-124
Flatten text lists
Merge branch 'stable'
Merge pull request #57 from rabbitmq/rabbitmq-federation-56
Handle more numerical types for the "hops" property
Merge branch 'stable'
Merge branch 'stable'
Management UI: be more defensive
make link attach/detach async
README.md: Document how to build the source archive and packages
packaging/windows: Try to compute a valid default `PRODUCTVERSION`
Merge branch 'stable'
rabbitmq-run.mk: Add rabbitmq_management SSL configuration
Merge branch 'stable'
Merge pull request #46 from mbuhot/patch-1
Fix typo in README
Merge branch 'stable'
rabbitmq amqp10 plugin returns undefined for the link detach close parameter
client initiated link detach
Do not expose delivery ids in api
Strip HTML tags from filter inputs
Merge branch 'binarin-mgmt-no-sort' into stable
Merge branch 'binarin-embed-friendly-lager-init'
Merge branch 'mgmt-no-sort' of https://github.com/binarin/rabbitmq-management into binarin-mgmt-no-sort
Merge branch 'binarin-json-alternatives' into stable
Merge pull request #59 from Ayanda-D/error-message-typo
Typo fix: 'sertificate' -> 'certificate'
Naming
Naming, correct a comment
Merge branch 'json-alternatives' of https://github.com/binarin/rabbitmq-management into binarin-json-alternatives
Add elvis Fix dialyzer issues in tests
Add support for non-JSON encoding of replies
Add ability to skip sorting of results
Merge branch 'embed-friendly-lager-init' of https://github.com/binarin/rabbitmq-server into binarin-embed-friendly-lager-init
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Use proper version of get_env during init
Default to 0 for stats calculation
Default to 0 for stats calculation
Escape more error values that can include user-provided inputs
Merge pull request #366 from rabbitmq/rabbitmq-management-agent-39
Merge pull request #40 from rabbitmq/rabbitmq-management-agent-39
Strip off pids and format consumer details for 2 endpoints
Format consumer arguments in clean_consumer_details/1
Don't html escape all popup text
Catch errors from message publish
Html escape displayed messages.
Merge branch 'stable'
Sync README with master
Update README.md
Update README.md
Update README.md
Update README.md
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'binarin-embed-friendly' into stable
Add back mnesia dir reset/restore
Provide some defaults for embedding
Naming
Merge branch 'stable' into binarin-embed-friendly
Merge pull request #365 from binarin/unused-define
Merge branch 'embed-friendly' of https://github.com/binarin/rabbitmq-server into binarin-embed-friendly
Mention make tests
Document new make targets that run tests
test: A few minor style fixes
Rename suites and run testscases in parallel
Update copyright and compiler warnings
Use fast and slow targets from new Makefile plugin
Split test suites into fast and slow Makefile targets
Wording
Wording
Wording
Log message store stopping
partitions_SUITE: Replace tabs with spaces
partitions_SUITE: Do not import rabbit_ct_broker_helpers
partitions_SUITE: Decrease timetrap to 5 minutes
Test and clean up metrics dependent on both process and entity
Switch to rabbit_misc:is_process_alive/1
unit_inbroker_SUITE: Adapt channel_statistics testcase after gc improvements
Check process aliveness on remote nodes
Attempt to make metrics_SUITE more rubust
Log stopping applications
Escape HTML tags in policy definition fields
Shamelessly steal a tag escaping fn from Mochiweb
Fix lager initialization code
Remove unused define
Don't echo provided encoding value back
Store authentication details in the cookie again
Filter current node from the list of peers we're logging
Register with peer discovery backend on start if the backend supports it
packaging/debian: Fix Erlang dependency at runtime
Merge branch 'stable'
Merge pull request #38 from rabbitmq/rabbitmq-management-364
Filter out ciphers as well
Port config schema tests from Web STOMP
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
rabbitmq-components.mk: Disconnect sockjs from the Umbrella and pin its version
Ignore test/config_schema_SUITE_data/schema/
Ignore test/config_schema_SUITE_data/schema/
Ignore test/config_schema_SUITE_data/schema/
Ignore test/config_schema_SUITE_data/schema/
Ignore test/config_schema_SUITE_data/schema/
Ignore test/config_schema_SUITE_data/schema/
Ignore test/config_schema_SUITE_data/schema/
Unregister from peer discovery backend on shutdown
Merge branch 'stable'
Sync README with master
Update README.md
Merge branch 'stable'
Sync README with master
Update README.md
Update README.md
Update README.md
3.6.1 is certainly no longer pending
Merge branch 'stable'
Merge pull request #37 from rabbitmq/rabbitmq-management-agent-36
Filter out two more options
Wording
Filter out socket options that cannot be sensibly serialised to JSON
Merge branch 'stable'
Sync README with master
Merge branch 'stable'
Merge branch 'stable'
Commit .deb and .rpm change logs
Config schema test for plugin
Reusable config snippet test
Config schema test for plugin
Config schema test for plugin
Config schema test for plugin
Config schema test for plugin
Config schema test for plugin
Config schema test for plugin
Config schema test for plugin
Split config snippets test
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #361 from rabbitmq/rabbitmq-management-360
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #35 from rabbitmq/rabbitmq-management-agent-34
Fix appending
Return 401 when opening a connection or channgel fails with {error, not_allowed}
Convert single atom options to {Option, true}
Makefile: Load rabbitmq-hexpm.mk Erlang.mk plugin
mk/rabbitmq-hexpm.mk: Extract plugin from rabbitmq-build.mk
Add back mnesia dir reset/restore
Merge branch 'stable'
packaging/standalone: Copy `start_clean.boot` to bin driectory
packaging/standalone: Fix path to the source `rabbit.rel` file
packaging/standalone: Remove the source `rabbit.rel` file
packaging/standalone: Do not use NUL-separated filenames in manifest
packaging/standalone: Use an intermediate file to list files to archive
packaging/standalone: Remove temporary `expand` directory
.gitignore: Remove trailing line
Merge branch 'stable'
Commit .deb and .rpm change logs
system_SUITE: Work around file provider issue in `list` testcase
Handle `eacces` errors in addition to `eperm` in `hipe_compile` command
Merge pull request #1144 from rabbitmq/rabbitmq-cli-178
Merge pull request #179 from rabbitmq/rabbitmq-cli-178
scripts/rabbitmq*: Use `exec` to call escript(1)
scripts/rabbitmq*:  Use escript(1) from `${ERL_DIR}`
packaging/standalone: Copy `start_clean.boot` to bin driectory
packaging/standalone: Fix path to the source `rabbit.rel` file
packaging/standalone: Remove the source `rabbit.rel` file
packaging/standalone: Do not use NUL-separated filenames in manifest
packaging/standalone: Use an intermediate file to list files to archive
packaging/standalone: Remove temporary `expand` directory
hipe_compile: reject blank, non-existent paths and those with insufficient permissions
rabbit_hipe: handle eperm errors better
rabbit app is loaded during validation; handle "already compiled" cases
Merge branch 'master' into rabbitmq-cli-178
rabbit_mnesia: rename a couple of functions
system_SUITE: Accept `{error, closed}` as connection failures
Change cluster_size_2 test ordering to fix failing test
Merge branch 'stable'
Mention make tests
Document new make targets that run tests
Merge branch 'stable'
Merge pull request #70 from rabbitmq/rabbitmq-web-stomp-69
Cosmetics
Finish hipe_compile command
rabbit_hipe:compile_to_directory/1 should coerce argument to list
Test and clean up stats dependent on both process and entity
Default LDAP server port should be 389
Support typical RabbitMQ TCP socket options
ctl hipe_compile WIP
rabbitmqctl hipe_compile WIP
Merge branch 'stable'
Wording
Log every stopping application
Fix help command test
Merge branch 'stable'
Merge branch 'rabbitmq-server-1136' into stable
Reintroduce make test
Revert "Remove test make target"
Merge branch 'stable'
Merge branch 'binarin-stats-doc-relative-link' into stable
Merge branch 'stats-doc-relative-link' of https://github.com/binarin/rabbitmq-management into binarin-stats-doc-relative-link
Merge branch 'stable' into rabbitmq-server-1136
Update CONTRIBUTING.md
test: A few minor style fixes
Rename suites and run testscases in parallel
Update copyright and compiler warnings
Use fast and slow targets from new Makefile plugin
Split test suites into fast and slow Makefile targets
Update CONTRIBUTING.md
Merge branch 'stable'
Add info about running a single test & running in verbose mode
Remove test make target
Update erlang.mk
Merge branch 'stable'
Merge pull request #1141 from rabbitmq/rabbitmq-server-1122
Merge pull request #187 from rabbitmq/rabbitmq-server-1122
Wording
Wording
Wording
Merge branch 'stable' into rabbitmq-server-1122
Merge branch 'stable' into rabbitmq-server-1122
Wording
Use dynamic_connection_name/1 just like we do for similar log entries
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #77 from rabbitmq/rabbitmq-erlang-client-76
rabbitmq-build.mk: Set -ct_hooks before -erl_args
Add spec and test for URI parsing
Log message store stopping
Log every stopping application
partitions_SUITE: Replace tabs with spaces
partitions_SUITE: Do not import rabbit_ct_broker_helpers
partitions_SUITE: Decrease timetrap to 5 minutes
Merge pull request #186 from rabbitmq/rabbitmq-server-1140
More comments for msg_store_index behaviour Describe concurrency behaviour for each callback.
Accept binaries in URI parsing
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
system_SUITE: Wait 5 seconds in wait_for_trust_store_refresh()
reader_SUITE: Match the new `connection_coarse_metrics` field
connections_SUITE: Match the new `connection_coarse_metrics` field
Remove an extra space
Makefile: Load rabbitmq-build.mk before erlang.mk
Test and clean up metrics dependent on both process and entity
Merge branch 'embed-friendly' of https://github.com/binarin/rabbitmq-server into binarin-embed-friendly
Log username and vhost on successful connection.open
Update README.md
rabbitmq-build.mk: Enable `cth_fail_fast` commont_test hook
Call msg_store_index operations via helper functions.
Merge pull request #33 from rabbitmq/rabbitmq-management-agent-32
Merge pull request #1139 from rabbitmq/rabbitmq-management-agent-32
Merge branch 'stable'
Merge pull request #185 from rabbitmq/rabbitmq-server-1136
Makefile plugin for fast and slow test suites
Default LDAP server port should be 389
Test and clean up metrics dependent on both process and entity
Test and clean up stats dependent on both process and entity
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #31 from rabbitmq/rabbitmq-server-1125
Merge pull request #1135 from rabbitmq/rabbitmq-server-1125
rabbit_misc:is_process_alive/1: tiny optimisation for local processes
Switch to rabbit_misc:is_process_alive/1
Switch to rabbit_misc:is_process_alive/1
Merge branch 'stable'
Add `standalone-linux-x86_64` and `standalone-freebsd-x86_64` package targets
Makefile: Exclude `/rabbit{,mq_cli}/escript/` from the source archive
Merge branch 'stable'
unit_inbroker_SUITE: Adapt channel_statistics testcase after gc improvements
Check process aliveness on remote nodes
Check process aliveness on remote nodes
Attempt to make metrics_SUITE more rubust
Merge branch 'stable'
system_SUITE: Remove an unused `Headers` variable to fix a warning
system_SUITE: Remove unbound `Ch` variable to fix build
Correct supported versions we report
Merge branch 'stable'
Fix #357
Merge pull request #1132 from rabbitmq/rabbitmq-server-1131
Wording
Merge branch 'master' into rabbitmq-server-1131
Make HTTP API stats.html link relative
Provide some defaults for embedding
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #30 from rabbitmq/rabbitmq-management-354
Doco
Fix metrics test suite
merge from stable
merge from stable
merge from stable
Update metrics gc to support gc marker
Make aggregate_entry a pure function returning a set of ets operations.
Revert "Update metrics gc to support gc marker"
Merge branch 'stable'
Update metrics gc to support gc marker
Merge pull request #29 from rabbitmq/rabbitmq-management-353
Merge pull request #1130 from rabbitmq/rabbitmq-management-353
Merge pull request #184 from rabbitmq/rabbitmq-management-353
Better message for plugin version requirement
Add missing acting user for internal function
Rename
Merge branch 'stable'
Doco
Correct use of ets:insert for pre-18 erlang
Remove unused argument
Fix delayed first sample
Delete marked core metrics during collection and propagate only aggregated ones
Remove unused gc call
Fix timing dependent test
Mark selected core metrics for deletion by the collector
Update metrics gc to support gc marker
dialyzer fixes
exometer_slide: normalise last_two
Fix all warnings reported by Elixir 1.4.x in the testsuite
lib/rabbitmq/cli/plugins/plugins_helpers.ex: Remove dead code
lib/rabbitmq/cli/plugins/plugins_helpers.ex: Use `deps` to filter plugins
Mark unused variables with '_'
lib/rabbitmq/cli/core/parser.ex: Remove dead code
Merge pull request #183 from binarin/module-attributes-error-handling
Merge branch 'stable'
List another gen_server2 differentiator
Better error handling for module attributes
exometer_slide:     adjust specs     remove unused fields     fix unlikely bug where FirstTS is undefined
Merge pull request #177 from rabbitmq/rabbitmq-server-1124
Merge pull request #1128 from rabbitmq/rabbitmq-server-1124
Merge pull request #182 from rabbitmq/rabbitmq-server-1124
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
rabbit_ct_helpers: Make sure env. variables are strings
system_SUITE: Use os:getenv/1 instead of os:getenv/2
Rename function
Rename function
Exclude apps that are not RabbitMQ plugins from the list of plugins
Add extra_dependencies on plugin record
Exclude applications that are not RabbitMQ plugins from the list of plugins
Merge branch 'stable'
Remove unused imports in Java test suite
Merge branch 'stable'
Fix Java test build and test on Java 9
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Pin PropEr version
rabbit, rabbit_cli: Use rabbit_misc:lists_droplast()
rabbit_misc: Import a copy of lists:droplast()
Merge branch 'stable'
Cowboy headers are supposed to be lowercase
Merge branch 'stable'
Merge branch 'stable'
cache_SUITE: Set log messages importance to ?LOW_IMPORTANCE
rabbit_mgmt_rabbitmqadmin_SUITE: Hard-code UTF-8-encoded queue name
rabbit_ct_helpers:exec(): Pass binary args directory open_port()
Merge branch 'stable'
Merge pull request #128 from rabbitmq/rabbitmq-mqtt-114
Merge pull request #181 from rabbitmq/rabbitmq-server-838
Merge pull request #1123 from rabbitmq/rabbitmq-server-838
Drive by change: squash a warning
Long ugly callback name
Long ugly callback name
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #27 from rabbitmq/rabbitmq-server-1120
Merge pull request #1121 from rabbitmq/rabbitmq-server-1120
Rename msg_store_index:delete_by_file to index_cleanup_undefined_file
Clarify msg_store_index API
Log stopping applications
exometer_slide: Fix an "unused variable" warning
Document alarm events
Test resource alarms
Emit rabbit_event events when alarms go in and out of effect
Merge branch 'stable'
Merge pull request #28 from rabbitmq/rabbitmq-management-352
Revert "Restore "rabbitmq-run.mk: Remove $RABBITMQ_PLUGINS_EXPAND_DIR""
Revert "Restore "Do not expand plugins anymore""
Do not carry forward too old values from buffer2
Merge pull request #176 from rabbitmq/rabbitmq-cli-10
Revert "Make sure to build dist archives before running tests"
Makefile: Use GNU Make functions to set `$(MIX_ERL_LIBS)`
Remove unused variable
Avoid filling towards the past when we have older values available
Avoid filling range towards the past (that'd be TS-Interval < Start)
Wording
Merge branch 'stable'
Call init stats function in enter_loop
Unwrap real socket for SSL info
DESIGN.md edits
Check topic access when sending last will
RABBITMQCTL_ALIASES => RABBITMQ_CLI_ALIASES_FILE
Rework DNS peer discovery test to be less sensitive to local resolver
Merge branch 'master' into rabbitmq-cli-10
Wait a tad to ensure all connections are closed and accounted for
Tiny refactoring
Set enable plugins before running this test
Merge branch 'stable'
fix enter_loop create process bug
Merge pull request #178 from turtleDeng/master
Prefer inet:gethostbyaddr/1 to inet_res:gethostbyaddr/1
Build against 19.2 on Travis
Fix a bad merge
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #27 from rabbitmq/rabbitmq-management-agent-25
Merge pull request #1118 from rabbitmq/rabbitmq-management-agent-25
Merge pull request #179 from rabbitmq/rabbitmq-management-agent-25
No real need to catch ets write exceptions
Whitespace
Merge pull request #1115 from rabbitmq/rabbitmq-server-msg-store-recovery-optimize
Merge branch 'do-not-expand-plugins'
Restore "rabbitmq-run.mk: Remove $RABBITMQ_PLUGINS_EXPAND_DIR"
Merge branch 'do-not-expand-plugins'
Restore "Do not expand plugins anymore"
Improve logging a bit
Merge branch 'master' into rabbitmq-server-msg-store-recovery-optimize
Merge pull request #1102 from rabbitmq/rabbitmq-auth-backend-uaa-3
Test consumer stats
Avoid race condition between created/stats by reading directly from core metrics
Use collect_statistics_interval for node stats
Test stats gc
Wording
Merge branch 'stable'
Merge branch 'master' into rabbitmq-auth-backend-uaa-3
Merge pull request #62 from rabbitmq/rabbitmq-server-1102
Revert "Wording"
Wording
Hide LDAP error from clients
Merge branch 'stable'
Update configurable value test expectation
fix enter_loop create process bug
Adjust fallback credit disc bound value
Merge branch 'stable'
Bump msg_store_io_batch_size according to #1098
Adjust fallback credit disc bound value
API refactor
Handle correctly exchange lookup for topic authz
Merge branch 'master' into rabbitmq-server-msg-store-recovery-optimize
Test gc of core metrics
Merge pull request #5 from rabbitmq/rabbitmq-auth-backend-uaa-3
Scope examples in README
Improve tests
Changed gc_entities function
GC queue-exchange stats
Periodic garbage collection of leaked stats
GC gen_server2 metrics
Garbage collection of core metrics
Function to retrieve all exchange names (keys)
README clarifications
Add cowlib to DEPS
Merge branch 'stable'
Clean broker version requirements
Merge branch 'master' into rabbitmq-auth-backend-uaa-3
Handle json parsing error
Make sure to build dist archives before running tests
Merge pull request #1112 from rabbitmq/rabbitmq-trust-store-56
Merge pull request #57 from rabbitmq/rabbitmq-trust-store-56
Mention auth_backend_cache
Mention auth_backend_cache
Merge pull request #47 from rabbitmq/spring-boot-http-backend
Wording, link to next.rabbitmq.com when covering 3.7.0 features for now
Document aliases. Improve eval command to accept bound arguments
Merge pull request #26 from rabbitmq/rabbitmq-management-350
Function to retrieve all queue names (keys)
Correct typo that caused the ExchangeFun to always return false for channel_queue_exchange_metrics
incoming heartbeats
Merge branch 'stable'
Merge pull request #1114 from rabbitmq/rabbitmq-server-1113
Merge pull request #177 from rabbitmq/rabbitmq-server-1099
Allow any StartFunState for message stores
Skip topic authorisation if exchange doesn't exist
Use new #delta arity introduced to report paged out messages
Wording
Merge pull request #49 from rabbitmq/rabbitmq-server-1099
Merge pull request #176 from rabbitmq/rabbitmq-server-1099
Support aliases
Update README.md
Update README.md
Update README.md
Update README.md
Update README.md
Update README.md
Update README.md
Update README.md
Config schema tests for trust store
Config schema
Document topic authorisation for queue binding
Set copyright year to 2017 in topic_SUITE.erl
Apply consumer topic permissions to queue.{bind, unbind}
Optimize per-vhost message store recovery
Do not use Mix in production code.
Fix a bad merge
Merge branch 'stable'
rabbitmqadmin: only load load_cert_chain if key file is provided
rabbitmqadmin: set http ssl purpose to SERVER_AUTH
Merge pull request #348 from cloudamqp/fix-https
rabbitmqadmin: only load load_cert_chain if key file is provided
rabbitmqadmin: set http ssl purpose to SERVER_AUTH
Merge branch 'stable'
Mention that this plugin ships with 3.6.x; underemphasize building from source
Merge branch 'stable'
Cosmetics
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #21 from rabbitmq/rabbitmq-top-20
Merge pull request #175 from rabbitmq/rabbitmq-top-20
Merge pull request #1111 from rabbitmq/rabbitmq-top-20
Hint for the Internal Buffer column
3.7.0 json decoding
Avoid emitting gen_server2 stats in non-rabbit nodes (i.e. client, CT..)
Test that gen_server2 buffer length stats are generated for a gen_server2
Document Spring Boot sample
Implement Spring Boot authz HTTP backend
Initialize core stats before any gen_server2 starts
Add gen_server2 buffer length to core stats
Remove a comment that's no longer relevant
Include gen_server2 buffer length in process report
Merge pull request #45 from rabbitmq/rabbitmq-amqp10-44
Merge pull request #174 from rabbitmq/rabbitmq-amqp10-44
Merge pull request #175 from rabbitmq/add-install-Makefile-target
Merge pull request #19 from rabbitmq/use-rabbitmq-cli-install-target
Merge branch 'master' into rabbitmq-amqp10-44
Merge pull request #1101 from rabbitmq/fix-escript-hardlinks-copy
Merge pull request #1109 from rabbitmq/proxy-protocol-configuration
Merge pull request #107 from rabbitmq/proxy-protocol-configuration
Merge pull request #126 from rabbitmq/proxy-protocol-configuration
Add proxy protocol Cuttlefish mapping tests
Add proxy protocol Cuttlefish option mapping
Add proxy protocol Cuttlefish mapping test
Add proxy protocol Cuttlefish mapping
Add proxy protocol to configuration
Polish proxy protocol test suite
Polish proxy protocol test suite
Polish proxy protocol test suite
Polish proxy protocol test suite
Merge branch 'master' into rabbitmq-amqp10-44
Add proxy protocol support
Forward proxy socket to AMQP 1.0 reader
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump ranch_proxy_protocol to 1.4.2; ranch to 1.3.2
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1107 from rabbitmq/rabbitmq-management-345
Merge pull request #346 from rabbitmq/rabbitmq-management-345
Merge pull request #173 from rabbitmq/rabbitmq-management-345
Merge branch 'stable'
Example trust store is now under github.com/rabbitmq
Makefile: Add ranch to `DEPS`
Include paged out stats
Merge branch 'stable' into rabbitmq-management-345
Merge branch 'stable'
Report messages paged out
Merge pull request #55 from rabbitmq/rabbitmq-trust-store-54
Merge branch 'stable'
Make dynamic_ha tests more tolerant to timing issues
Calculate memory size of pagged messages
`url` in certificate objects should really be `path`
Filter out verify_fun by name
Filter out functions from listener options
Keep provider state in case of error listing certificates
Ignore certs/*
README updates
They are not necessarily CA certificates
Ignore *.pyc and *.sqlite3 files
Merge branch 'stable' into rabbitmq-trust-store-54
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Clone dependencies using the git protocol, not SSH [for CI]
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #125 from rabbitmq/rabbitmq-server-589
Merge pull request #105 from rabbitmq/rabbitmq-server-589
Merge pull request #1095 from rabbitmq/rabbitmq-server-589
Merge pull request #169 from rabbitmq/rabbitmq-server-589
Update rabbitmq-components.mk
Remove a debug trace
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Makefile: New `install` target to copy escripts
Merge branch 'master' into rabbitmq-server-589
Merge pull request #1106 from rabbitmq/rabbitmq-auth-backend-cache-7
Remove a duplicate head
Merge branch 'master' into rabbitmq-auth-backend-cache-7
Accept `cache` as a shortcut for `rabbit_auth_backend_cache`
Merge pull request #8 from rabbitmq/rabbitmq-auth-backend-cache-7
README tweaks
Merge pull request #48 from rabbitmq/rabbitmq-auth-backend-ldap-59
Merge pull request #60 from rabbitmq/rabbitmq-auth-backend-ldap-59
Merge pull request #1103 from rabbitmq/rabbitmq-auth-backend-ldap-59
Merge branch 'master' into rabbitmq-auth-backend-ldap-59
Support auth backend cache in sysctl config
Sysctl config schema
Makefile: Do not keep `escript/` in source archive
Makefile: Use rabbitmq-cli's Makefile new install target
Makefile: Use rabbitmq-cli's Makefile new install target
Shorter prefix for configuration keys
Rename auth backends prefixes to auth_X
Use auth_ldap for configuration prefix
Merge pull request #26 from rabbitmq/fix-audit_topic_permission-testcase
system_SUITE: set_topic_permissions() takes 6 arguments now
Add support for proxy protocol
Merge pull request #1105 from Jakauppila/rabbitmq-server-1104
Quote -conf_dir/-conf_schema_dir path variables
Shorter prefix for LDAP conf keys in test snippets
Shorter prefix for LDAP plugin conf keys
Makefile: Use pax(1) to copy escripts from rabbitmq-cli
Extend protocol error message with {error, _} from authz backend
Return error instead of error_message to comply with authz_backend API
Test http provider
Update rabbitmq-components.mk
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
Merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add JMS CTS repo to rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Note about erlang version requirement
Fix variable names
Replace maps with proplists
README about HTTP provider
Example Django app to serve certificates
HTTP provider for trust store
Travis CI: Disable test on Erlang 18.3
Travis CI: Import changes from rabbitmq-auth-backend-amqp
system_SUITE: Increase timetrap to 3 minutes
Update README.md
Refactor tests to be provider agnostic
Fix crash when refreshing certificates
Use more realistic hostnames in ldap.servers examples
Merge branch 'stable'
Rework credit_flow test to not depend on application env
Mention #1098
Make sure we return a tuple of options here, references #25, #26
Remove ranch proxy protocol from rabbitmq-components
Remove ranch proxy protocol from rabbitmq-components
Add ranch proxy protocol to rabbitmq-components
Add support for proxy protocol
Update rabbitmq-components.mk to master
Make it compile with R16B03
Since this plugin now ships with RabbitMQ, this section is no longer necessary
Merge branch 'stable'
Merge pull request #344 from rabbitmq/rabbitmq-management-343
Remove a couple of non-essential but fairly fragile tests
Merge branch 'stable'
Update test expectations
switchable debugging
disposition frames _must_ specify role
make dispositions of unsettled messages async
Add unicode test for list queues
Fix Makefile
Merge branch 'stable'
Merge branch 'rabbitmq-web-dispatch-25' into stable
Inline expression in case/of
Merge branch 'master' into rabbitmq-server-589
Parse the ip option when provided as a string
Merge branch 'master' into rabbitmq-server-589
Merge branch 'stable'
Relax accepted content type in all endpoints
Add tests for proxy protocol support
Integrate Ranch Proxy Protocol library
Add config keys to set TLS options
Merge branch 'stable'
Change str to maybe_utf8,
Merge branch 'disable-background-gc-by-default' into stable
Update rabbitmq-components.mk to master
Update rabbitmq-components.mk to master
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add rabbitmq-auth-backend-cache to umbrella components
Merge pull request #6 from rabbitmq/rabbitmq-auth-backend-cache-5
Update README.md
Add read topic permission to tests
Reset only appropriate options after header parsing
Merge pull request #101 from rabbitmq/rabbitmq-server-1085
Merge pull request #116 from rabbitmq/rabbitmq-server-1085
Merge pull request #333 from rabbitmq/rabbitmq-server-1085
Merge pull request #169 from rabbitmq/rabbitmq-server-1085
Merge pull request #58 from rabbitmq/rabbitmq-server-1085
Merge pull request #46 from rabbitmq/rabbitmq-server-1085
Merge pull request #1086 from rabbitmq/rabbitmq-server-1085
Merge pull request #160 from rabbitmq/rabbitmq-server-1085
Only document what is actually implemented so far
This constant isn't used
Copy
Copy
Naming, Elixir code style
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
Bump message store credit flow settings
Disable background GC by default; bump credit flow defaults
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1097 from rabbitmq/move-rabbit_ssl-functions-to-rabbitmq-common
Merge pull request #172 from rabbitmq/move-rabbit_ssl-functions-to-rabbitmq-common
Test token expiration
rabbit_cert_info: New module with functions moved from `rabbit_ssl`
rabbit_ssl: Move most functions to `rabbit_cert_info` in rabbitmq-common
Respect encapsulation of proxy protocol transport
Do not decode token every time permission is checked.
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #170 from rabbitmq/switch-to-cowboy-1.1.0
Merge branch 'rabbitmq-server-release-17'
Support TLS with proxy protocol
Add license to Heroku's Ranch Proxy Protocol files
Test default key support
Test key validation when adding via cli command
Merge branch 'stable'
Don't use UTF-8 when calculating retainer_sup child names
Merge pull request #124 from rabbitmq/rabbitmq-mqtt-123
Don't use UTF-8 when calculating retainer_sup child names
Merge branch 'stable'
Merge pull request #342 from rabbitmq/rabbitmq-management-341
Test command validation
Report empty channel details if the information is missing during deletion
mk/rabbitmq-components.mk: Switch to Cowboy 1.1.0
Revert "Clear broker_version_requirements"
Merge pull request #1091 from rabbitmq/rabbitmq-server-1090
Add proxy protocol support
Add proxy_protocol configuration options
Ignore ./log
Don't match on exact error message
Merge pull request #1089 from rabbitmq/rabbitmq-common-164
Merge pull request #19 from rabbitmq/rabbitmq-common-164
Merge pull request #12 from rabbitmq/rabbitmq-common-164
Merge pull request #21 from rabbitmq/rabbitmq-common-164
Merge pull request #337 from rabbitmq/rabbitmq-common-164
Merge pull request #165 from rabbitmq/rabbitmq-common-164
Command to add UAA signing keys
Provide no options to JSX just like we did here before
A typo
Switch to rabbit_json:decode/1
Switch to rabbit_json:decode/1
Switch to rabbit_json:decode/1
Switch to rabbit_json:decode/1.
Switch to rabbit_json:try_decode/1
rabbit_json:decode/1 and try_decode/1 are meant to be opinionated
latin1 is sufficient (and safer) here
Update test expectations
latin1 is sufficient (and safer) here
latin1 is sufficient (and safer) here
latin1 is sufficient (and safer) here
Merge branch 'stable'
Introduce rabbit_data_coercion:to_atom/2
Include Heroku's Ranch Proxy Protocol transport
merge branch 'master'
merge branch 'master'
merge branch 'master'
merge branch 'master'
merge branch 'master'
merge branch 'master'
Include rabbitmq-diagnostics into Debian and RPM packages
Merge branch 'stable'
Makefile: Include rabbitmq-plugin.mk
rabbit_mgmt_http_SUITE: Fix incorrectly encoded URLs
rabbit_mgmt_http_SUITE: Fix include directive
Makefile: Include rabbitmq-plugin.mk
rabbit_mgmt_http_SUITE: Fix incorrectly encoded URLs
rabbit_mgmt_http_SUITE: rabbit_misc:pget/3 is unused
rabbit_mgmt_http_SUITE: Fix include directive
Merge branch 'stable'
Make sure `inets` is listed as a (provided) dependency
Merge branch 'master' into rabbitmq-auth-backend-cache-5
Merge branch 'stable'
Update rabbitmq-components.mk
Merge branch 'stable'
Merge pull request #168 from rabbitmq/rabbit-common-167
Improve handling of uncontrolled channel termination
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'stable'
Makefile: Load rabbitmq-dist.mk before rabbitmq-run.mk
Merge branch 'stable'
Merge branch 'master' into rabbitmq-server-1085
mk/rabbitmq-builds.mk: Do not warn about export_all in tests
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
Makefile: amqp_client is not needed, remove it from DEPS
Remove build.config; we use a vanilla erlang.mk
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
mk/rabbitmq-dist.mk: mix compile is required before using archive.build.all*
Bump mix_task_archive_deps version
Support topic authorisation for publishing
Decode "L"-prefixed fields in arrays as well
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Bump Ranch to 1.3.1
Merge pull request #166 from rabbitmq/rabbitmq-server-1093
Add acting user in tests
Merge branch 'stable'
Fix build
Decode L (long-long-int) fields
Bump minimal erlang version for RPM packages
Makefile: Add rabbit_common to BUILD_DEPS
Merge branch 'rabbitmq-auth-backend-uaa-3'
mk/rabbitmq-dist.mk: Build .ez archives for Elixir dependencies
Merge branch 'stable'
Makefile: Load rabbitmq-dist.mk before rabbitmq-run.mk
Makefile: Do not depend twice on `rabbit`
Check for rabbitmqctl using `[ -x ]` and not `which` in autocompletion
Correct a typo
Merge branch 'stable'
packaging: package-rpm-suse is an alias for package-rpm-opensuse
Add term() to error spec
Add Reason to error handler
Add Reason to error handler
Merge branch 'stable'
Add Reason to error catch
Merge pull request #103 from rabbitmq/rabbitmq-stomp-102
Add heartbeat to stats
Merge pull request #14 from rabbitmq/rabbitmq-server-release-12
Merge pull request #173 from rabbitmq/rabbitmq-server-release-12
Make these two tests pass
Merge branch 'master' into rabbitmq-server-release-12
Merge pull request #171 from rabbitmq/rabbitmq-cli-170
Move plugin validation from `validate` to `run`
Add try_encode
Instruction to complete rabbtimq-plugins and rabbitmq-diagnostics
De-emphasize "Building from Source"
Test all stats are present
Backported part of: CLI command to list stomp connections
Tests stats are not leaked if connection failed
Avoid emitting stats if connection is not defined
Merge branch 'stable'
Merge branch 'rabbitmq-management-339' into stable
Match ordering in help to message rate label order.
Fix test to represent Jwt decoded extended scope permissions
Update labels in help
Decode and verify UAA JWT tokens without connecting to UAA server
Re-arrange message rate labels, improve naming
Merge branch 'master' into rabbitmq-server-release-12
Return connection pid
Notify reductions, garbage_collection, recv_oct and send_oct in the core metrics
Merge branch 'stable'
Merge pull request #4 from rabbitmq/rabbitmq-auth-backend-uaa-2
Wording, grammar
invalid_resource_authorization => resource_server_authentication_failed
Wording
Wording
This example doesn't actually seem to be case insensitive
Wording
Merge pull request #122 from rabbitmq/rabbitmq-mqtt-121
Wording
Test plugin version validation when enabling all plugins
Validate all plugins if `all` flag is present
Notify recv_oct, send_oct, reductions and garbage_collection in core metrics
Merge pull request #336 from rabbitmq/cowboy-switch-to-priv_file-options
Merge pull request #24 from rabbitmq/cowboy-switch-to-priv_file-options
Backported part of: A CLI command to list mqtt connections
Rename "alpha" to "preview" in version comment
Use `priv_file` and `priv_dir` cowboy_static options
Replace the native call jsx with rabbit_json
Ignore pre-release version part in plugin version requirement validation
Change latin1 to utf8
Change latin1 to utf8
Change latin1 to utf8
Change latin1 to utf8
Merge pull request #172 from rabbitmq/rabbitmq-cli-168
Format user_already_exists error
Validate enabled plugins version requirements
Merge branch 'stable'
Merge pull request #120 from rabbitmq/rabbitmq-mqtt-119
Avoid double quoting connection names
Wording
Improve logging when parsing invalid frames
Change the calls that uses the rabbit_json module
Change the cleanup function
Change the calls that uses the rabbit_json module
Merge pull request #75 from rabbitmq/rabbitmq-event-exchange-10
Add user who performed action to direct connection notifications
Change the calls that uses the rabbit_json module
Merge branch 'master' into rabbitmq-server-release-12
Merge branch 'stable'
Merge pull request #118 from rabbitmq/rabbitmq-mqtt-117
Don't assume stats tables are empty
Change the calls that uses the rabbit_json module
Change the calls that uses the rabbit_json module
Add the Options parameter
Add test for handling invalid frames
Makefile: Remove Cowboy version pinning
Makefile: Remove Cowboy version pinning
Makefile: Remove Cowboy version pinning
Use `priv_file` and `priv_dir` cowboy_static options
Makefile: Remove Cowboy version pinning
Do not print "Command '' not found" for empty command
Skip stats notification without connection pid
Print a hint to enable zsh autocompletion
Reworked ZSH completion. It's now a function that should explicitely loaded on startup
Fix typo in exchange name
Merge branch 'stable'
Merge pull request #163 from rabbitmq/rabbitmq-common-162
Fix autocomplete script paths
Support topic authorization
Install separate autocomplete scripts for BASH and ZSH
Restore accidentally deleted gitignore
Source /etc/profile with shell builtin
Pass auto-completion arguments as argv, not a single argument
Handle auto-completion line as argv, not a single argument
Change the message format
Merge branch 'stable'
More tests for autocomplete
Fix some compiler warnings in tests
Support autocompletion with different script names
Make explose flow_credit api to be able to subscribe
Merge branch 'stable'
Create sync version of connection:open
Allow the container_id to be configured.
Cleanup compiler warnings
Auto complete command called with full path
Rename connection states more in line with the spec.
Merge branch 'stable'
Improve logging when the upstream exchange changes while adding bindings
Merge pull request #54 from rabbitmq/rabbitmq-federation-53
Merge branch 'stable'
packaging/RPMS: Fix SAVE_CHANGELOG handling
mock1 -> insufficient_credit test
Add basic mock_server for testing. Allow connections without sasl. Add sync version of session:begin
Improve logging when the upstream exchange changes while adding bindings
Merge branch 'stable'
packaging/RPMS: Simplify the Makefile wrapping dpkg-buildpackage(1)
packaging/debs/Debian/scripts/udpate-changelog.sh: Show syntax
packaging/debs: Use make conditionals instead of Bourne shell ones
packaging/debs: Derive GNUPGHOME from KEYSDIR
Add topic authorisation for consumption
Add topic authorisation for consumption
Merge branch 'stable'
Merge pull request #334 from rabbitmq/doc-delete-bindings
Wording
packaging/debs: Simplify the Makefile wrapping dpkg-buildpackage(1)
Document where to get the props when querying/deleting bindings
Revert "Fix --auto-complete clauses"
Update profile after installation to enable autocompletion
Add read to topic permission documentation
Add read to topic permissions
Add read to topic permissions
Merge branch 'master' into rabbitmq-server-1085
Merge branch 'master' into rabbitmq-server-1085
Fix --auto-complete clauses
Fix a few compiler warnings
Merge branch 'master' into rabbitmq-server-release-12
Merge pull request #51 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #22 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #25 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #27 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #100 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #327 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #166 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #1082 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #4 from rabbitmq/rabbitmq-event-exchange-10
Merge pull request #159 from rabbitmq/rabbitmq-event-exchange-10
More bookkeeping
Add Spring Boot HTTP backend
Merge branch 'master' into rabbitmq-event-exchange-10
Fall back to ?UNKNOWN_USER if no user is present in options
Define UNKNOWN_USER
Test listing exchanges
Add tests for topic authorisation consumption
link and session bookkeeping
Clarify routing_key parameter meaning
Mention topic authorisation for consumption
Merge branch 'stable'
packaging/windows: Bump copyright of the installer to 2017
Merge pull request #331 from rabbitmq/rabbitmq-management-330
Remove exchange from the apply-to options when creating/updating operator policies.
Add topic authorisation for consumption
Add topic authorisation for consumption
Merge branch 'stable'
packaging/windows: Allow to override `PRODUCTVERSION`
Clear broker_version_requirements
Set broker_version_requirements to [] since it's a built-in plugin
Correct and expand rabbitmqctl(1) examples for vhost limits
Merge pull request #1084 from rabbitmq/use-sh-for-scripts
Disposition handling for receiver links.
Make sure completion call has locale var
Delete autocomplete script when removing deb package
RPM paths for autocomplete scripts
Fix autocomplete scripts file names
Install auto-complete script
Fix auto complete module to support new parser API
Move autocomplete script to server release repo
Move autocompletion scripts to a single file
Merge branch 'stable'
Extract a couple of functions
Merge branch 'upgrade-cowboy' into stable
Fix upgrade to cowboy
Disposition handling for senders
Merge branch 'stable'
Makefile: Remove all targets entering the `upgrade` subdir
Merge branch 'stable'
Merge pull request #52 from rabbitmq/rabbitmq-federation-43
Log when a link stops on init
Modify new scripts to use /bin/sh
Merge branch 'master' into rabbitmq-event-exchange-10
Merge branch 'master' into rabbitmq-event-exchange-10
Merge branch 'master' into rabbitmq-event-exchange-10
Merge branch 'master' into rabbitmq-event-exchange-10
Merge branch 'master' into rabbitmq-event-exchange-10
Merge branch 'stable'
Makefile: Use an intermediate file to list files to put in the source archive
Makefile: Remove more unneeded files from the source archive
Merge pull request #167 from rabbitmq/rabbitmq-cli-165
Merge pull request #329 from rabbitmq/rabbitmq-cli-165
Merge pull request #1083 from rabbitmq/rabbitmq-cli-165
Merge branch 'master' into rabbitmq-cli-165
Close all connections before this test
Merge branch 'stable'
Add write permissions to erl
standalone/src/rabbit_release.erl: Copy `escript` directory to the archive
Merge pull request #13 from rabbitmq/fix-osx-standalone-packaging
Add write permissions to erl
Merge branch 'stable'
Merge pull request #53 from rabbitmq/rabbitmq-trust-store-1
Naming
Removing test logs
Minor log message corrections
Add/delete certificate providers in realtime
Example certificate provider
Certificate name in attributes field
Refactor modules
Pluggable trust stores: tests are passing
Pluggable behaviour for CA cert source
standalone/src/rabbit_release.erl: Copy `escript` directory to the archive
Use cleaner vhost limit listing API
Fix API for listing vhost limits
List vhost limits command
Tidy up comments
Split outgoing transfer frames
Provide cli user as user who performs action for event notifications
Add suport for username in parameters and vhost events
Pass user who performed the action to test fixtures
rabbitmq-build.mk: Note the fact that the plugin is loaded twice
rabbitmq-build.mk: Convert Elixir code path to MSYS2-style path
rabbitmq-build.mk: Move comment back above the code it describes
Notify user who performed the action in all system events
Notify user who performed the action in all system events
Merge pull request #115 from rabbitmq/rabbitmq-server-505
Wording
Makefile: Use `echo y | mix` instead of `mix local.hex --force`
Adopt tests to the new rabbit_vhost_limits:list API
Makefile: Fix creation of rabbitmq-{diagnostics,plugins}
mix.exs: Fix a warning reported by Elixir 1.4.0
rabbit_mgmt_wm_topic_permission: Fix "case claure never matching" warning
Use add_user/5
Notify user who performed the action where needed
Let only message in topic permission violation log
Handle topic authorisation failure properly
Notify user who performed the action in created/deleted events
Test the user taking action is present in topic.permission.* events
Pass username from HTTP requests to all entities that notify events
List topic.permission events
Include options map in queue and exchange records
Add user ID to consumers
Include options map in queue and exchange records
Extend notify and notify_clear to support usernames
Test that the user taking the action is notified in all system events
Merge branch 'stable'
Merge pull request #55 from rabbitmq/rabbitmq-server-505
Merge pull request #316 from rabbitmq/rabbitmq-server-505
Merge pull request #44 from rabbitmq/rabbitmq-server-505
Merge pull request #160 from rabbitmq/rabbitmq-server-505
Merge pull request #1065 from rabbitmq/rabbitmq-server-505
Merge pull request #155 from rabbitmq/rabbitmq-server-505
Don't assume there aren't any topic permissions at the start of this test
Merge pull request #57 from rabbitmq/rabbitmq-auth-backend-ldap-56
Using regular queries here is fine
Handle plain string cases in match query
Merge pull request #1080 from rabbitmq/rabbitmq-management-limit-json
Change  format for Limits API
Merge branch 'master' into rabbitmq-server-505
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-server-505
Use computed binary name
Change JSON format for Limits API
Special case topic resources in `rabbit_misc:rs/1`
Log topic when access to one is refused
List vhost.limits events
Make sure command extensions are enabled during script execution Extensions are required for recursive directory creation via mkdir
Handle multiple incoming transfer frames
Fix path to delete operator policies
Port example Django app to Django 1.10
Fix operator_policies URL in PUT
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Merge branch 'stable'
Makefile: Add rabbitmq_ct_client_helpers to TEST_DEPS
metrics_SUITE: Fix an "unused variable" warning
Do not always match bidirectionnaly
Fix typo Urls, add PUT method in rabbit_mgmt_wm_limits
Merge branch 'stable'
Use amqp10_msg in links api
Use shared code from rabbitmq-amqp1.0-common
development.post.mk: Create `include` directory
Merge branch 'stable'
Move AMQP 1.0 spec XML files to rabbitmq-codegen
Merge pull request #24 from rabbitmq/rabbitmq-management-agent-22-v2
Close connections for every test
amqp10_msg: handle non binary body types
Import AMQP 1.0 spec XML files from rabbitmq-amqp1.0
Merge branch 'stable'
Travis CI: Install .NET Core for the testsuite
New application to share code between AMQP 1.0 plugin and client
Fix typo and add tests to verify stats recover after reset
Merge pull request #1078 from rabbitmq/rabbitmq-server-1054-master
Merge pull request #164 from rabbitmq/reduce-build-time
amqp10_msg: basic setters
Add application_properties, footer and additional amqp body options.
Add amqp_msg module with functions for parsing message data
Makefile, mix.exs: Reduce build time
Update copyright line to year 2017
Merge branch 'stable'
Add default value for idle_timeout option
Require deps target to be executed before building escript Make target tree in parallel mode can try to build escript before loading dependencies. Therefore we set dependencies requirement explicitly. This should be replaced by better mix/erlang.mk integration
One more test
Config schema mappings for credential validators
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-server-1054-master
Merge branch 'stable'
Merge pull request #324 from rabbitmq/rabbitmq-server-1054
test: Automatically download and extract ActiveMQ
system_SUITE: Test against both RabbitMQ and ActiveMQ
More tests
Wire credential validation into PUT /api/users/{user}; fix a bug as a drive-by
Expose add_user_sans_validation/2
route tranfer frames
Merge pull request #163 from rabbitmq/rabbitmq-cli-155
Merge pull request #1074 from rabbitmq/rabbitmq-cli-155
Close all connections first in these tests
Wording
Cosmetics
Cosmetics
Merge branch 'master' into rabbitmq-cli-155
These helpers were moved to rabbitmq_ct_helpers
switch_credential_validator/2, switch_credential_validator/3
Introduce add_user/3, change_password/3; cosmetics
Merge branch 'stable'
Merge pull request #1075 from rabbitmq/rabbitmq-clusterer-19
complete rountrip transfer and sync get
Re-introduce rabbit_table:wait_for_replicated/0 for backwards compatibility
Limit number of connections to close
Test close all connections command
satisfy dialyzer
rabbit_nodes: Use computed binary in set_cluster_name()
rabbit_ct_helpers: Handle Elixir modules in ensure_application_srcdir()
some dialyzer fixes
make reader state names more generic
add tests for sasl frame routing
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #157 from rabbitmq/rabbitmq-server-1054
Merge pull request #1070 from rabbitmq/rabbitmq-server-1054
Export close_connections
Close all connections command with vhost, global and delay options
Compile
Merge branch 'stable' into rabbitmq-server-1054
Merge pull request #1073 from rabbitmq/rabbitmq-server-628
Rename a function
We got transfer
Switch to rabbit_credential_validation:validate/2
rabbit_credential_validation:validate_password/1 => rabbit_credential_validation:validate/2
Merge branch 'stable'
clustering_management_SUITE: Fix "unused variable" warnings
worker_pool_SUITE: Fix "unused variable" warnings
Force close connection when user is deleted
Extract a function
Wire in validation into change_password/2; naming
More tests; wire in validation into change_password/2
Test suite fixes
Rename session states according to spec.
refactoring and first cut transfer
Merge branch 'stable' into rabbitmq-server-1054
More (failing) tests
Merge pull request #1072 from rabbitmq/rabbitmq-server-964
Initial integration tests for credential validation
Merge branch 'stable'
rabbit_reader.erl: Use application's desc. as "product"
Force memory reduction on tests
Introduce rabbit_credential_validation; fix validators for successful integration
Validate credentials when adding a user
Merge branch 'stable'
Merge pull request #50 from rabbitmq/rabbitmq-federation-45
federation_link_restart => restart_federation_link
Merge pull request #323 from rabbitmq/rabbitmq-management-235
Pre-select vhost in 'Add exchange' form
Merge branch 'stable'
Fix include path
Merge branch 'stable'
rabbitmq-tools.mk: Add hard-coded compile flags to show-*ERLC_OPTS
Merge branch 'stable'
Merge pull request #322 from rabbitmq/rabbitmq-management-235
Use strict equality, cosmetics
CLI command to restart a link
Merge branch 'stable'
Merge branch 'rabbitmq-management-284' into stable
Pre-select vhost in 'Add queue' form
Add tag impersonator to UI
Merge branch 'stable'
Merge pull request #318 from rabbitmq/rabbitmq-management-159
Merge branch 'stable' into rabbitmq-management-159
Merge pull request #317 from rabbitmq/rabbitmq-management-158
Use exchange instead of name in topic permission
A doc follow-up to 3bf0f02306b905caaaee3d0bb48f996b6bac23eb
Use exchange when referring to topic authorisation
Merge branch 'stable'
Rename name to exchange in topic permissions
Rename name to exchange in topic_permission_key
Switch operator policies and vhost limit endpoints to use dashes
Merge pull request #320 from rabbitmq/rabbitmq-management-237
Notify UI users of not authorised access
Check only rabbitmqctl is already loaded
Don't hardcode rabbitmqctl
Handle case when rabbitmqctl is already loaded
Merge branch 'stable'
Merge pull request #319 from rabbitmq/rabbitmq-management-205
Add lazy queue argument in queues and policies page
Formatting
Property-based tests for regexp credential validator
Revisit supervision tree and implement sessions
Extract a function
Merge pull request #20 from rabbitmq/rabbitmq-federation-management-17
Merge pull request #49 from rabbitmq/rabbitmq-federation-management-17
Wording
Make delete and purge confirmation messages more explicit
Separate dropdown panels for queue and purge
Include ID in mgmt table
Internal rename of only-down to only_down to satisfy parser
Configure memory reduction for all queue types
rabbit_ct_helpers: Configure rabbitmq_cli paths as a normal setup step
Add restart link to UI
Avoid unnecesary encoding
Use the hex value of the key's sha to avoid encoding/decoding in URLs
Merge branch 'stable'
Use the same max restart intensity across link supervision tree
Introduce rabbit_credential_validator_regexp
{enable,disable}_plugins_command_test.exs: Adapt test
help_command_test.exs: Fix warning about unused alias
Makefile: Use $(verbose) Erlang.mk macros
Makefile: Use Mix aliases to speed up builds
mix.exs: Try `gmake` before `make`
mix.exs: Use aliases to combine Mix commands
rabbitmq-run.mk: Use "rabbitmq-plugins enable --all"
rabbitmq-run.mk: Set RABBITMQ_GENERATED_CONFIG_DIR in "make run-broker"
Launch topic authorisation test in broker
rabbitmq-build.mk: Add CLI ebin dir. to compiler code path
rabbit_ct_helpers: Remove an unused variable
rabbit_ct_helpers: Silence debug messages in CI
Use check_topic_access on publishing
HTTP API endpoint to restart a link
Merge pull request #162 from rabbitmq/enable-disable-all-plugins
{disable,enable}_command.ex: Support --all to enable/disable all plugins
Move plugin_names() from list_command.ex to plugins_helpers.ex
Add tests for federation status/lookup
Implement check_topic_access callback
Implement check_topic_access callback
Add check_topic_access/4 to rabbit_authz_backend
Create topic permission table in upgrades
Basic property-based tests for min length validation strategy
Introduce callbacks that allow to restart a link, listing returns an id
Merge pull request #48 from rabbitmq/rabbitmq-federation-44
Rename option
Cosmetic changes
CLI command option to list down links
Merge branch 'master' into rabbitmq-server-505
Remove not-existing test group reference
Move topic permission tests in their own suite
Update README.md
Fixes #19
Introduce id
Merge branch 'master' into rabbitmq-server-505
Use ^$ instead of '' in permission regex
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Fix topic authorisation test
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Add link to topic authorisation webpage
Document topic permissions endpoints
Merge pull request #1067 from rabbitmq/rabbitmq-server-1058
Merge pull request #54 from rabbitmq/rabbitmq-server-1058
Merge pull request #156 from rabbitmq/rabbitmq-server-1058
Merge pull request #161 from rabbitmq/rabbitmq-server-1058
Merge pull request #3 from rabbitmq/rabbitmq-server-1058
More meaningful log entries
Add topic permissions list functions
Test topic permissions list functions
Add topic permissions endpoints
Actually, don't log anything
Explain; log something more meaningful with CT
Log CLI command execution as a single log entry
Fix a bad merge
Merge branch 'master' into rabbitmq-server-1058
Destructure resource kind in function head
Support topic authorisation
Merge branch 'stable'
Use a less ambiguous word that does not confuse spelling checkers
Fixed various typos across code comments
Use a less ambiguous word that does not confuse spelling checkers
Merge pull request #1069 from AndrewDryga/fix-typos
Fixed various typos across code comments
Merge pull request #766 from rabbitmq/rabbitmq-server-567
Merge pull request #152 from rabbitmq/rabbitmq-server-567
Don't log #resource records
Merge branch 'master' into rabbitmq-server-567
Merge branch 'master' into rabbitmq-server-567
Revert "Do not expand plugins anymore"
Revert to syncronous vhost recovery since there are concurency limitations
Revert "rabbitmq-run.mk: Remove $RABBITMQ_PLUGINS_EXPAND_DIR"
More messages for sync test
Update merged tests for master
Merge branch 'stable'
Add test deps
Do not test global parameters command Should be handled by CLI tests
First attempt at connection supervision tree
Squash a warning
Merge branch 'stable'
Merge pull request #19 from rabbitmq/rabbitmq-federation-management-18
Rename links endpoints
Endpoint to list down links
Fix arguments to restore vm_watermark in test
Switch to the new CLI in tests
Support the new cli in tests
Support tests with the new CLI
Support start from common_test tests
Get rid of rabbit_control_main
Support topic authorisation
Merge remote-tracking branch 'origin/stable'
Merge pull request #47 from rabbitmq/rabbitmq-federation-46
Fix logs. Expect multiple logs during startup
Delete topic permissions on user deletion
Delete topic permissions on vhost deletion
Increase tolerated restart intensity of rabbit_federation_sup children
Clarify HTTP API endpoints
Merge branch 'master' into rabbitmq-server-505
Fix topic authorisation tests
Fix sorting and plugin name access for plugin management commands
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Merge branch 'master' into rabbitmq-server-505
Check user/vhost exist in topic authz queries
Check non-existing user/vhost in topic authz tests
Add topic authorisation commands
Get cluster name using rabbit_nodes to avoid writing not_found
Merge pull request #159 from rabbitmq/rabbitmq-cli-157
Test clear_topic_permissions functions
Add clear_topic_permissions functions
Recover queues after non-clean shutdown
Merge remote-tracking branch 'origin/stable'
Recover vhosts message stores in parallel after a crash
Remove unused code
Detailed error message in memory threshold validation
Merge branch 'stable'
rabbitmq-build.mk: Use the correct URL to fetch `hexpm`
Force recover client references to be maps. Start empty message store for each vhost on migration.
Fix msg_store test
Merge pull request #23 from rabbitmq/rabbitmq-management-agent-22
Fix listing active plugins with multiple plugin directories
Reset old_aggr_stats
Merge branch 'stable'
rabbitmq-tools.mk: Add new target for Vim's Syntastic plugin
Add channel process cache for topic authorization
Improve topic test authorisation test
Move credential validators into rabbitmq-server
Introduce credential validation CT suite
Drive by change: squash a few warnings in worker_pool_SUITE
Add topic check in internal authorization backend
Add rabbit_topic_permission table
change error function with rabbit_log:error
Refs can be undefined
Pass queues and recovery terms to fold
Group recovery client refs by vhost
Merge branch 'master' into rabbitmq-server-567
Merge branch 'master' into rabbitmq-server-567
codegen, Makefile, specs and binary parsers
Ignore indirect dependencies of rabbit in rabbit_plugins
Introduce topic authorisation
Initial commit
fix typo
Merge pull request #41 from rabbitmq/rabbitmq-amqp1.0-35
Tag arrays as arrays, not lists
Readme for new scopes format
Change scope to permission mapping
Merge branch 'stable'
Revert "Give global policies more time to propagate"
Merge branch 'stable'
Give global policies more time to propagate
Merge branch 'stable'
Merge pull request #112 from rabbitmq/rabbitmq-mqtt-111
Log in a more human readable format
Wording
rabbitmq-run.mk: Remove $RABBITMQ_PLUGINS_EXPAND_DIR
Merge pull request #1064 from rabbitmq/do-not-expand-plugins
Use coercion module for integer-to-binary coercion
Merge branch 'stable'
Add atom/integer-to-binary coercion
Do not set `plugins_expand_dir` from $RABBITMQ_PLUGINS_EXPAND_DIR
Merge pull request #39 from rabbitmq/rabbitmq-amqp1.0-12
Use binary for port-to-vhost mapping key
Map client connection vhost to a port
Use the code path to find loaded plugins
Optionally cleanup the old plugins expand dir
Do not expand plugins anymore
Accept list of #plugin records or atoms in maybe_keep_required_deps
Fix issue when binary payload is send wrapped as an AmqpValue.
Merge pull request #1063 from rabbitmq/rabbitmq-server-1057
Create RABBITMQ_GENERATED_CONFIG_DIR
Merge branch 'stable'
Fix a condition test here
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
[travis] Try 18.2 instead of 18.3
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Test against 19.1, 19.2 on Travis
Test against 18.3, 19.1, 19.2 on Travis
Test against 18.3, 19.1, 19.2 on Travis
Test against 18.3, 19.1 and 19.2 on Travis
Merge branch 'master' into rabbitmq-server-567
Add 19.1 and 19.2 to Travis build matrix
Update README.md
Merge pull request #158 from rabbitmq/rabbitmq-mqtt-73
Cosmetics, wording
Replace dying_client_index and dying_clients set with a map Required to decrease ETS tables usage per vhost
Merge branch 'stable'
Coerce global parameter key to atom on deletion
Add global parameters commands
Merge branch 'stable'
Merge pull request #1060 from rabbitmq/rabbitmq-server-1059
Bump the default ets tables limit
Support publish to Hex.pm
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #110 from rabbitmq/rabbitmq-mqtt-73
Merge pull request #310 from rabbitmq/rabbitmq-mqtt-73
Merge pull request #1056 from rabbitmq/rabbitmq-mqtt-73
Merge branch 'stable' into rabbitmq-mqtt-73
Merge branch 'stable'
Fix race condition in test
Support publish to Hex.pm
Merge pull request #38 from rabbitmq/rabbitmq-amqp1.0-13
Ensure amqp1.0 ttls roundtrip as uints
Merge branch 'stable'
Use clean sessions in last will retained test
Merge branch 'stable' of github.com:rabbitmq/rabbitmq-server
Expand pattern in to_expiration to accept other types
Merge branch 'stable' of github.com:rabbitmq/rabbitmq-auth-backend-ldap
Merge branch 'stable'
Use awaitility for Java tests
Merge pull request #53 from rabbitmq/rabbitmq-auth-backend-ldap-7
Merge pull request #1048 from rabbitmq/rabbitmq-auth-backend-ldap-7
merge from stable
Be more specific about what is being stopped on `stop_app`
Make amqp_client a test dependency, to avoid a circular dependency
Merge pull request #156 from rabbitmq/rabbitmq-cli-153
Fix global parameters test
List all global parameters
Polish global parameters documentation
Document global parameters CLI commands
Be more specific about what is being stopped on `stop_app`
Be more specific about what is being stopped on `stop_app`
Cosmetics
Squash a couple of compiler warnings
Merge branch 'master' into rabbitmq-cli-153
Coerce global parameter key to atom
Add CONTRIBUTING.md, move Running Tests to it
Copy Code of Conduct document from rabbitmq-server
Support global parameters in HTTP API
Add tests for load of plugin applications
Add test case for cert user/vhost mapping
Merge branch 'stable'
Add global parameters handling functions
Formatting and corrections in docs
Merge branch 'stable'
Add rabbit_ct_broker_helpers:clear_permissions
Use atom key and JSON value for global parameters
Introduce mqtt_default_vhosts global parameter
Merge branch 'stable'
Merge branch 'stable'
rabbitmq-build.mk: SEt RABBITMQ_CT_SKIP_AS_ERROR on CI
Merge branch 'stable'
configuration_SUITE: Move plugin stop to a setup step
Load .ez plugins without version
rabbitmq-build.mk: Remove obsolete comment about Concourse user
rabbit_ct_helpers: Interpret $RABBITMQ_CT_SKIP_AS_ERROR
Merge branch 'stable'
system_SUITE: Skip basic_get_* if they hit ENETUNREACH
Merge branch 'master' into rabbitmq-server-567
Travis CI: Disable test on Erlang 18.3
Merge branch 'stable'
Travis CI: Disable test on Erlang R16B03
system_SUITE: Ensure SSL listeners are stopped
rabbit_trust_store_app: Import a copy of lists:droplast()
rabbit_trust_store_app: Do not use option `partial_chain` on Erlang R16B03
Merge pull request #1055 from rabbitmq/recursive-mkdir-for-rabbitmq-schema-dir
Improve global runtime parameters support
Merge pull request #37 from rabbitmq/rabbitmq-cli-121
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Whitespace
Add command tests
Merge pull request #154 from rabbitmq/rabbitmq-cli-151
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Correct delegation here
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Merge branch 'stable'
Travis CI: Add initial configuration
Don't include double quotes in cookie hash output
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Merge branch 'stable'
Add tests for Erlang cookie hash command
Merge pull request #309 from rabbitmq/any-content-type-with-queue-get
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Travis CI: Import changes from rabbitmq-auth-backend-amqp
rabbit_mgmt_wm_queue_get: Accept any Content-Type in the request body
Recursively create `RABBITMQ_SCHEMA_DIR`
Erlang cookie hash command
Test connection fails when vhost not allowed for cert user
CLI command to list AMQP 1.0 connections
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Travis CI: Import changes from rabbitmq-auth-backend-amqp
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
metrics_SUITE: Increase the timer after force_channel_stats()
Optionally map user certificate to virtual host
Merge pull request #154 from rabbitmq/fix-erlang-compatibility
Double timetrap timeout for partition test to make CI happy
Travis CI: Add configuration
rabbit_core_metrics: Restore compatibility with Erlang R16B03/17.x
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Makefile: Use a recursively expanded var for `RABBITMQ_VERSION`
rabbitmq-components.mk: Use a simply expanded var for `PROJECT_VERSION`
Do not use -include_lib() with own headers
Do not use -include_lib() with own headers
Merge branch 'stable'
Do not use -include_lib() with own headers
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Merge branch 'stable'
rabbit_mgmt_test_db_SUITE: Double first timer in queue_coarse_test()
Merge pull request #98 from rabbitmq/rabbitmq-cli-121
Use `config` instead of `default` for auth type
Remove login keys
Update info keys
Merge branch 'stable'
Merge branch 'stable'
rabbit_web_mqtt_app: Fix listeners registration
rabbit_ws_sockjs: Fix listeners registration
Merge branch 'stable'
rabbit_web_dispatch_registry: Fix variable shadowing
CLI command to list stomp connections
Specify test timeouts in milliseconds
Give purge queue command test more time
Merge branch 'stable'
Travis CI: Use Ubuntu Trusty image to have access to Elixir
Merge branch 'stable'
Merge pull request #23 from rabbitmq/one-listener-several-ipaddrs
Merge pull request #152 from rabbitmq/rabbitmq-cli-148
rabbit_web_dispatch_registry: Fix listener (un)registrations
Sort commands when printing help
VERBOSE_TEST makefile variable to toggle test output format
Let ciphe_suites command test more time
Merge pull request #150 from rabbitmq/rabbitmq-cli-144
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Install hex before rel target
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Merge branch 'stable'
Merge pull request #139 from rabbitmq/rabbitmq-cli-134
Introduce `rabbitmq-diagnostics maybe_stuck`
Merge branch 'master' into rabbitmq-cli-134
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #147 from rabbitmq/rabbitmq-cli-141
Merge pull request #109 from rabbitmq/rabbitmq-mqtt-100
Expect streams on plugins tests
Merge pull request #1053 from rabbitmq/rabbitmq-server-1052
Drive by change: simplify
Exit with non zero exit code when erlsrv command fails during service install
Use Erlang terms formatter to be compatible with eval 'ssl:cipher_suites().' output
Make the Erlang term formatter concatenate stream elements with commas
Merge branch 'stable'
plugins.mk: The list is overriden by the server-release Concourse pipeline
plugins.mk: Sort list alphabetically
upgrade/Makefile: Remove trailing space
Debian package: No need to pass $(VERSION) around in debian/rules
Makefile: Use echo instead of printf
Makefile: Store the plugins list in the source archive
Don't crash for clients without a last will
Makefile: Move plugins list to `plugins.mk`
Makefile: Call $(MAKE), not plain `make`
Check for hex using makefile capabilities
Introduce `rabbitmq-diagnostics cipher_suites [--openssl-format]`
Merge pull request #67 from rabbitmq/rabbitmq-web-stomp-60
Merge pull request #96 from rabbitmq/rabbitmq-web-stomp-60
Merge branch 'rabbitmq-management-295'
Drive by change: rabbit_log:warning/1 doesn't need a trailing new line
Merge branch 'master' into rabbitmq-management-295
Do not streamify plain maps
Test cleanup
Fix use of default credentials with use_http_auth
Fix force_default_creds to accept binary/list creds
Export rabbit_stomp:parse_default_user/2
CLI command to reset stats DB
Remove useless output
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Merge branch 'stable' into rabbitmq-mqtt-100
Remove unused code
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Move from .app.src to Makefile variables
Update rabbitmq-components.mk
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Real time output in enable/disable/set commands
Move from .app.src to Makefile variables
Gracefully close connections to non-existent virtual hosts
Merge pull request #107 from rabbitmq/rabbitmq-cli-121
Cosmetics
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Merge branch 'stable'
Merge branch 'rabbitmq-mqtt-86' into stable
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Remove `v` prefix from computed version
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #66 from rabbitmq/rabbitmq-web-stomp-65
Merge pull request #18 from rabbitmq/rabbitmq-web-mqtt-17
Merge pull request #22 from rabbitmq/rabbitmq-web-dispatch-14
Makefile: Add eldap to LOCAL_DEPS
Makefile: Forgot PROJECT_MOD in previous commit
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Test list_mqtt_connections command
Register listeners to management UI
Register listeners to management UI
Merge pull request #140 from rabbitmq/rabbitmq-cli-135
Wording
Wording
Merge pull request #1051 from rabbitmq/rabbitmq-server-1050
Move from .app.src to Makefile variables
Makefile: PROJECT_VERSION is set in rabbitmq-components.mk
Makefile: PROJECT_VERSION is set in rabbitmq-components.mk
Makefile: PROJECT_VERSION is set in rabbitmq-components.mk
Makefile: PROJECT_VERSION is set in rabbitmq-components.mk
rabbitmq-components.mk: Use RABBITMQ_VERSION there too
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Compute default PROJECT_VERSION
Register Web listeners as TCP listeners
Test commands suggestions
Makefile: Use a meaningful default version based on git-describe(1)
Merge pull request #153 from rabbitmq/rabbitmq-mqtt-86
Move from .app.src to Makefile variables
rabbit_stomp_processor: Use `rabbit` application description
rabbit: Use application description in banner
Support Erlang string vhosts in retainer supervisor
Backport to_list, to_atom, to_integer
Merge branch 'stable' into rabbitmq-server-1050
Move from .app.src to Makefile variables
Merge branch 'stable'
Merge pull request #151 from rabbitmq/rabbitmq-server-847
Suggest commands by Levenshtein distance
Move from .app.src to Makefile variables
Makefile: Sync exclusion list with rabbitmq-erlang-client
Makefile: Sync exclusion list with rabbitmq-server-release
Ignore hexer and PACKAGES/
Makefile: Use PROJECT_DESCRIPTION in git-revisions.txt
Use rabbit_misc:get_env/3
Makefile: Sort PROJECT_DESCRIPTION before PROJECT_VERSION
Merge branch 'stable' into rabbitmq-auth-backend-ldap-7
Merge remote-tracking branch 'origin/rabbitmq-management-236'
Makefile: Set default `broker_version_requirements`
Makefile: Remove $(VERSION), it is unused
Merge branch 'master' into rabbitmq-cli-121
Move from .app.src to Makefile variables
Move from .app.src to Makefile variables
Fix merge
Merge branch 'binarin-handle-distribution-errors'
Unbreak with_distribution/1
Makefile: Use $(PROJECT_VERSION) instead of $(VERSION)
Coerce default_* configuration entries to binaries
Merge branch 'handle-distribution-errors' of https://github.com/binarin/rabbitmq-cli into binarin-handle-distribution-errors
A CLI command to list mqtt connections
Handle errors from distribution start attempts
Wording
Switch to a documented inet* function
Merge branch 'stable'
unit_inbroker_SUITE: Adapt channel_statistics() to the new metrics
Merge pull request #137 from binarin/rabbimq-server-890
Fix longname-mode on hosts without detectable FQDN
Merge branch 'stable'
Merge branch 'rabbitmq-mqtt-74' into stable
Destructure this right in function head
Update README.md
Merge branch 'stable'
http_SUITE: DELETE method reponds with 204 No Content
Merge branch 'rabbitmq-management-236' into stable
Retain last will message
Merge pull request #133 from rabbitmq/rabbitmq-cli-129
More test cases
Extract function
Ditto
More test cases, wording
Make Hex update conditional in clean
Merge pull request #308 from rabbitmq/rabbitmq-management-307
Lage sink for upgrade logs
Merge branch 'stable'
metrics_SUITE: The helper module is called `rabbit_ct_proper_helpers`
Handle return value from rabbit_health_check
Merge branch 'stable'
Undo addition of mochiweb_util, following merge of stable
Merge branch 'stable'
Move mochiweb_util to rabbitmq-common
Drop dependency to mochiweb
Move mochiweb_util from rabbitmq-management-agent
Merge branch 'stable'
Makefile: Remove mochiweb from TEST_DEPS
http_SUITE: DELETE method reponds with 204 No Content
reset collector old_aggr_stats after each tests in clustering_SUITE
Make it possible to purge the old_aggr_stats for testing purposes
system_SUITE: Increase timetrap to 3 minutes
`time_compat` is gone in master, use os:system_time() directly
typo
reference type name
Timeouts for worker pool worker
Merge branch 'stable'
rabbit_ct_clients_helpers.erl was moved to rabbitmq-ct-client-helpers
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Idle connection expiry tests
Merge pull request #1038 from rabbitmq/rabbitmq-server-1033
Restore `log_files` lost during the merge
Makefile: Replace bashism with plain Bourne shell line
Configure no timeout as infinity
Close idle connections after timeout
Merge branch 'stable'
Merge branch 'rabbitmq-management-236' into stable
Use rabbit_mgmt_records.hrl from the agent
Merge branch 'stable'
Merge branch 'stable'
Use rabbit_mgmt_records.hrl from the agent
Use rabbit_mgmt_records.hrl from the agent
Get worker and supervisor shutdown timeouts from environment variables
Merge branch 'stable' into rabbitmq-server-1033
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'rabbitmq-management-236' into stable
Merge branch 'rabbitmq-management-236' into stable
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #64 from rabbitmq/rabbitmq-management-236
Merge pull request #105 from rabbitmq/rabbitmq-management-236
Merge pull request #19 from rabbitmq/rabbitmq-management-236
Merge pull request #298 from rabbitmq/rabbitmq-management-236
Merge pull request #1034 from rabbitmq/rabbitmq-management-236
Merge pull request #147 from rabbitmq/rabbitmq-management-236
Ditto
Include rabbit_mgmt_records.hrl from the agent
Switch the plugin to use Cowboy REST
Include rabbit_mgmt_records from the agent
Add top supervisor to restart the mgmt db
Comments cleanup
Give preference to rabbitmq_management keys
Merge pull request #132 from rabbitmq/rabbitmq-cli-131
Merge pull request #1045 from rabbitmq/rabbitmq-cli-131
Merge branch 'stable' into rabbitmq-server-1033
Load command specific options from a single command
Fix typo in tutorial file name
Do not call function in list comprehension filter
Use 1 RPC call to get running plugins
Add function returning active plugins and versions
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Link to the new tutorial
Merge branch 'stable'
Merge remote-tracking branch 'origin/rabbitmq-management-236' into stable
Switch to Cowboy REST
Switch to Cowboy REST
Merge branch 'stable'
Don't require WM
Merge branch 'stable'
Drop WebMachine dependency
Switch to Cowboy REST
Merge branch 'stable'
Change some NO_CONTENT into CREATED in the tests
Convert to Cowboy REST
Fix race condition where vhost_msg_stats were not updated after queue delete
Don't update Hex if /Users/antares/.mix/archives exists
Test tidy up
Merge branch 'stable'
Properly detect Cowboy processes
Merge branch 'stable'
Make queue migration batch size configurable
Switch to Cowboy REST
Write per queue upgrade log to a separate file
Undo parts of a bad merge
Merge pull request #125 from rabbitmq/rabbitmq-cli-docs
Edits
Don't link to a section that does not exist in this tutorial
Edits, outro
Editing, WIP
Rename file
Add test plugins EZ archives
Fix plugins formatter test
Use rabbit_semver instead of ec_semver
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
Merge pull request #150 from rabbitmq/rabbitmq-server-789
Merge pull request #1044 from binarin/missing-socat-error-handling
Merge branch 'master' into rabbitmq-server-567
Move rabbit_mgmt_format and mochiweb_util to rabbitmq_management_agent
Support several versions of plugins in directories
Move rabbit_mgmt_format and mochiweb_util to rabbitmq_management_agent. Dialyzer fixes
Use rabbitmqctl wait to wait for upgrade
Properly handle systemd notify errors
Support multiple plugins directories
Merge pull request #303 from rabbitmq/rabbitmq-management-301
Fix CORS preflight requests
Move collectors and related modules to rabbitmq_management_agent
Move metrics collectors to agent
Fix CORS preflight requests
Merge pull request #1042 from rabbitmq/rabbitmq-server-1040
Be more elaborate in background GC config example
Port a version from master
Merge branch 'stable' into rabbitmq-server-1040
Update Ranch to 1.3.0
Update Cowboy to 1.0.4
Return 0 if used fd is not available, log any error
Add background GC settings to new config format
Migrate queues in batches of 100 in parallel. Write recovery terms for migrated queues.
Keep backup between mnesia upgrade and message store upgrade
Merge pull request #1039 from rabbitmq/rabbitmq-server-1026
Add background GC settings in example config
Make it possible to disable background GC
Ensure extra stats info is also passed to core metrics
Merge branch 'stable'
Merge branch 'stable'
Makefile: Remove pinning of rabbitmq-web-dispatch and webmachine
amqp_connection: Start syntax_tools and compiler
rabbitmq_management_visualiser is gone for good
Trigger a Travis build
Trigger a Travis build
Merge branch 'stable'
Merge pull request #9 from bogdando/stable
Merge branch 'stable'
Include rabbitmq_web_mqtt into the distribution
Add Travis tests for Pacemaker OCF RA cluster
Merge pull request #8 from bogdando/travis_ocf_ra
Tidy up removal of the old_aggr_stats table
Add Travis tests for Pacemaker OCF RA cluster
Start syntax_tools and compiler apps explicitly
Reduce GC operations by keeping the old stats in each collector process instead of ETS.
Timeout values are in milliseconds
Log the number of retries left
Log Mnesia reconnection attempts
Update rabbitmq-components.mk
Configure member retries on Mnesia reconnection failures
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1016 from binarin/multiple-plugins-dir
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
rabbitmq-components.mk: Use Basho's mochiweb fork
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Pin version of several 3rd-party deps
Copy
Merge pull request #18 from rabbitmq/rabbitmq-common-139
Merge pull request #7 from rabbitmq/rabbitmq-common-139
Merge pull request #300 from rabbitmq/rabbitmq-common-139
Merge pull request #1037 from rabbitmq/rabbitmq-common-139
Merge pull request #40 from rabbitmq/rabbitmq-common-139
Merge pull request #148 from rabbitmq/rabbitmq-common-139
Merge branch 'stable'
Merge pull request #149 from rabbitmq/rabbitmq-erlang-client-72
Add dependencies on compiler and syntax_tools
Report pending upgrades when listing plugins
Fix vhost dir location in test
Fix bad content-length on 404 responses
Rename mochiweb_util to avoid conflicts
Rename mochinum and mochiweb_util
Rename mochiweb_util
Rename mochinum, mochiweb_util and ec_semver modules
Rollback to sequential queue migration. Move queue directories before migrating messages
Move mochi licensing info to rabbit_common
Rename mochiweb_util to avoid conflicts
Use test name for the RabbitMQ node name
Makefile: Do not pin rabbitmq_web_dispatch version
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Makefile: Convert from CRLF (Dos) to LF (Unix) newlines
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-management-236
Merge pull request #1036 from rabbitmq/rabbitmq-server-1035
Grammar/style corrections
Merge branch 'stable'
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Add rabbitmq_ct_client_helpers to TEST_DEPS
Merge branch 'stable'
Update rabbitmq-components.mk
Move rabbit:prep_stop/1 to stop/1 to avoid master termination crash
Merge pull request #130 from rabbitmq/rabbitmq-cli-123
Make `rabbitmqctl stop` support an optional pid file argument
Support pid arguments that are binaries and integers
Introduce a rabbit_data_coercion:to_list/1 head for integers
Add rabbitmq_ct_client_helpers to TEST_DEPS
Update erlang.mk
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
rabbitmq-components.mk: Add rabbitmq-ct-client-helpers to components
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'master' into rabbitmq-server-567
merge stable
Increase range for mgmt_test_db time-sensitive tests
Fix issue where the slide would occasionally zero pad incorrectly
Delay slide summing until formatting to avoid normalizing twice. Now uses ceil as only normalization strategy. Dialyzer fixes and refactoring
Slightly reduce the chances of incorrect padding at the end of the sliding window.
Ensure buffers are swapped even when input values are being dropped
Set last timestamp when summing slides
Ensure drop expansion is bounded
db_cache_multiplier -> management_db_cache_multiplier
Use MFA instead of funs
Padding fixes and test adjustments
Remove problematic clause from maybe_add_last_sample
Round timestamps when normalizing instead of ceil
exometer_slide:to_list should realise the last sample
Fix issue with summing non-incremental slides as well as recording the first timestamp
Solidify the behaviour of exometer_slide:to_normalized_list to only pad values that are possible to deduce. Dialyzer fixes
Refactor exometer_slide:normalize into to_normalized_list
Make rabbit_mgmt_stats time independent
Remove unused code, simplify tests
Fix sliding window
Fill with zeros samples previous to the beginning of the slide
exometer_slide:foldl only append last sample if the total has changed
exometer_slide fixes
Verify increment is all 0s before applying drop
More exometer:foldl fixes. Run parallel tests in parallel
exometer_slide:foldl fixes
exometer_slide: ensure to_list applies take_since to buf1
Fix storage of unchanged stats
Do not store unchanging stats after two duplicated samples
Insert channel stats directly into ETS tables
optimize slides when read to reduce memory use.
Invalidate management db cache when a different argument is called
Select the correct data window for the query
exometer_slide: only realise an partial/intermediary sample if at least a full interval has passed since the last sample
Add property test to validate connection and channel counts are consistent across the cluster
Set first sample to first available one
Use total for rates, fixed more stats and tests
Initial code documentation for rabbit_mgmt_metrics_collector and rabbit_mgmt_stats
Documentation and some refactoring. Introducing a configuration parameter for the mgmt_db_cache multiplier
Light exometer_slide refactoring
Index cleanup for old_aggr_stats{ch,{q,x}}
Index for old_aggr_stats{ch,{q,x}}
exometer_slide:sum - take the ceil instead of round when summing timestamps to reduce the chance of the last sample only being partial
Refactor exometer_slide:sum and add spec and docs
Increase the retention period of detailed stats to ensure a full 1 minute graph can be displayed
Use most recent timestamp as reference point for exometer_slide:sum instead of current timestamp
augment message stats in delegate call
Include the channel id in old stats key
Make management stats gc match the retention policies defined elsewhere
Improve how exometer_slide sums incremental slides. Add some basic unit tests. Changed exometer_slide:last_two function to only return fully realised samples
Remove stats DB node from overview page
Reset node buttons
Insert stats using the correct retention policies
Cleanup stats indexes
Reset HTTP API
Display GC queue length on the node page
Fix index cleanup in metrics GC
Report metrics_gc queue length on node stats request
More defensive merge function
Don't get detailed stats for channels
Implement caching for channels and connections
Make mgmt_db_cache start new gen_server for non-existent keys
Cache calls don't need to go through worker pool
License headers
Implement adaptive cache to ensure remote queries aren't allowed overflow the system. Ensure exometer_slides are created with a max_n or else they will never truncate the window
Do not update .updatable elements if there are outstanding requests
Minor documentation changes
Remove process_flag priority of management db process as it no longer serves queries
User worker pool to handle management http requests
Assert cluster links are present in nodes query
Detailed stats for nodes
Exchange and channel detailed stats
Implement detailed stats for queue Made strip_pids recursive
Move delegation for consumers query to rabbig_mgmt_db
remove force_all from rabbit_mgmt_metrics_collector
Replace ?FUNCTION_NAME macro by function names to support pre-19
Group functions better in mgmt_db
Fix the last few dialyzer warnings
Fix overview test
Range, samples and avg tests. Fixed JSON output tags.
overview query dialyzer fixes
Always report actual total on stats.
Support multiple plugins directories
Merge pull request #122 from rabbitmq/rabbitmq-cli-118
Merge branch 'stable'
Increase message receive timeout for redelivered.py
Add banner to encode command
Merge branch 'master' into rabbitmq-cli-118
Merge pull request #128 from rabbitmq/rabbitmq-cli-120
Remove empty switches and aliases
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'master' into rabbitmq-cli-118
Make StopCommand#validate/2 accept a pidfile path
Merge branch 'master' into rabbitmq-cli-120
Make switches/0 and aliases/0 optional command callbacks
Fix a merge revert conflict
Enable write concurrency on core metrics ets tables.
Revert "Merge pull request #124 from rabbitmq/rabbitmq-cli-120"
Revert "Remove flags, switches and aliases from CLI command"
Revert "aliases/0 and command-specific switches/0 are now optional"
Merge branch 'stable'
Merge branch 'stable'
Update erlang.mk
rabbitmq-components.mk: Add rabbitmq-cli to components
Merge pull request #42 from rabbitmq/rabbitmq-federation-41
No need for rand_compat
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #1032 from rabbitmq/rabbitmq-cli-118
Merge pull request #146 from rabbitmq/rabbitmq-cli-118
Remove flags, switches and aliases from CLI command
Make it clear that invalid is not nil
Draft docs
Merge pull request #24 from rabbitmq/rabbitmq-shovel-22
aliases/0 and command-specific switches/0 are now optional
Merge branch 'master' into rabbitmq-shovel-22
Merge pull request #124 from rabbitmq/rabbitmq-cli-120
Typos, wording
Include empty fields for csv and table formatters
Remove empty switches/0 and aliases/0 callbacks
Include empty fields for csv and table formatters
Test for command specific parsing
Commit Debian and RPM changelogs
Tests for CLI extension for federation status
Test refactor
CLI extension for federation status
Make switches as aliases callbacks optional
Move rabbit_pbe module to rabbitmq-common
debian/control: Require Erlang 18.3
Move rabbit_pbe module to rabbitmq-common
Adapt to CLI tools master; print binaries as string values in output
Remove `flags/0` callback. Remove command modules helpers from helpers to command_modules
Add encode command
Merge pull request #23 from rabbitmq/rabbitmq-shovel-21
Tests for delete shovel command
Delete shovel command
Tests for shovel status command
CLI extension for Shovel status
Move some auxiliary test functions to utils module
Merge pull request #117 from rabbitmq/rabbitmq-server-1030
Merge pull request #1031 from rabbitmq/rabbitmq-server-1030
Merge pull request #145 from rabbitmq/rabbitmq-server-1030
Merge branch 'master' into rabbitmq-server-1030
Fix stream output for csv formatter
Make rabbit node resolve from environment variable by default
Make all CLI dependencies HEX based
Syntax error
Make amqp dependency test-only
Merge pull request #119 from rabbitmq/rabbitmq-cli-erl-libs
Copy CTL modules to /ebin to be included in ERL_LIBS
Add specs to rabbit_data_coercion, fix to_integer
Use binaries for policy RPC call
Add rabbit_data_coercion:to_integer/1
Use binaries to define policies
Install hex before mix clean
Remove unused value
Printer behaviour
Use Erlang term formatter by default for status
Merge pull request #116 from rabbitmq/rabbitmq-cli-115
RabbitMQ server coerces tags to atoms now
Merge pull request #21 from rabbitmq/rabbitmq-web-dispatch-20
Do not start rabbit_common application in CLI
Remove dependencies
More global switches to control environment
New exec command to execute elixir code locally in command context.
Fix bad content-length on 404 responses
Keep only files related to Erlang client helpers
Format CSV info items with helpers
CSV formatter
Update README
README formatting
Namespace refactoring
Merge pull request #1008 from rabbitmq/rabbitmq-server-988
New dir path for queue index data
Merge pull request #144 from rabbitmq/rabbitmq-common-143
Improve logging
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Convert input user tags into appropriate type
Update config examples
Merge pull request #114 from milmazz/code_consistency
Improve code consistency
Integrate DNS peer discovery backend, more logging
Merge branch 'master' into rabbitmq-server-988
Cosmetics
Towards functional message store migration fn
Fix test expectations, more renames, more logging
We get a tuple from ETS here, not just a pid
Renames
Use a fixed size encoding fn for vhost directory names
Avoid atom exhaustion in vhost message stores
Merge branch 'master' into rabbitmq-server-567
Naming and cosmetics
Fix test timing
Start rabbit_common with ensure_all_started to start all dependencies (e.g. jsx)
Add jsx to runtime dependencies
Use RABBITMQ_NODENAME as default node
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Make tests happy
Merge branch 'master' into rabbitmq-server-567
Merge branch 'master' into rabbitmq-server-988
Call rabbit:alarms instead of rabbit:status to get alarms
Export alarm function to avoid calling status/0 from cluster_status command
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Skip DNS peer discovery backend tests in offline environments
Use seconds in timeout parameter. Better timeout error report
Force non infinity timeout for node health check. Node health check output
Integration tests for rabbit_peer_discovery_dns
Erlang terms formatter name
Erlang terms formatter
Handle non-list format_output in table formatter
Prefix hostnames discovered via DNS
Introduce rabbit_data_coercion:to_list/1
First cut at rabbit_peer_discovery_dns
Merge branch 'master' into rabbitmq-server-988
Rename an upgrade function
Flatten list_consumers output in table formatter
Update README.md
Update README.md
Update README.md
PLUGINS now requires https://github.com/rabbitmq/rabbitmq-server-release
Update DESIGN.md
It's not a map, it's a keyword list
Support --local argument in list_queues
Proper error handling
Merge pull request #113 from rabbitmq/rabbitmq-common-46
Merge pull request #6 from rabbitmq/rabbitmq-common-46
Merge pull request #39 from rabbitmq/rabbitmq-common-46
Merge pull request #19 from rabbitmq/rabbitmq-common-46
Merge pull request #17 from rabbitmq/rabbitmq-common-46
Merge pull request #11 from rabbitmq/rabbitmq-common-46
Merge pull request #294 from rabbitmq/rabbitmq-common-46
Merge pull request #1025 from rabbitmq/rabbitmq-common-46
Merge pull request #142 from rabbitmq/rabbitmq-common-46
Handle non-error outputs in wait command
Make sure rabbitmqctl is built when running tests
Switch JSON library to JSX
Add jsx to dependencies of Rabbit
Install local Hex to build dependencies
Use conversion module for JSON arguments in CLI
Accept both lists and binaries for JSON arguments
Fix JSON arguments parsing in CLI
Merge branch 'rabbitmq-cli-integration'
Merge branch 'stable'
Merge branch 'rabbitmq-cli-integration'
Merge branch 'rabbitmq-cli-integration'
packaging: Specify source directory in RPM
packaging: Distinguish upstream and package versions in RPM
rabbitmq-plugins.bat: Use `escript.exe` to run `rabbitmq-plugins`
Makefile: Rename target to `copy-escripts`
packaging: Be sure to name RPM source archive correctly
packaging: Be sure to name RPM source archive correctly
Do not require ENABLED_PLUGINS_FILE to run ctl, still print an error
Makefile: rabbitmq-* depend on rabbitmqctl
Load commands from plugins
Makefile: Do not rebuild escripts if no source file has changed
Updated build instructions
Load MIX project to make sure modules are built during package creation
Fix tests
script name is overridable via argument
Format disabled plugins
Resolve dependencies using erlang.mk
diagnostics scope name
Get rabbitmq deps using erlang.mk
Erlang.mk in-umbrella integration
Fix tests for plugins commands
Plugins enable/disable command formatter
List plugins formatter
Use DEPS_DIR as deps_path
Bash based integration
Remove unused mochiweb_util function breaking travis
Update the list of magic plugins for rabbit_vm
Remove reference to mochiweb_http in diagnostics
Update mochiweb copyright files
Switch JSON library to JSX
Remove the dependency on mochiweb
Import mochiweb_util from management
Move mochiweb_util to rabbit_common
Use python2 in the rabbitmqadmin test suite
Switch JSON library to JSX
Merge pull request #110 from rabbitmq/rabbitmq-cli-105
Cosmetics
Switch JSON library to JSX
Switch JSON library to JSX
Remove mochijson dependency in the test suite
Makefile: Build rabbitmq-cli *before* copying escripts
Switch JSON library to JSX
Better generic formatting. No tests for format_error
Merge branch 'master' into rabbitmq-cli-105
Merge pull request #111 from rabbitmq/rabbitmq-cli-107
Coordinate environment with config module
Merge pull request #1023 from rabbitmq/rabbitmq-server-1022
Timeout values are in milliseconds
Wording
Add a missing clause
Log the number of retries left
Log Mnesia reconnection attempts
Correct a typo in test file name
Vhost limits test helpers
Vhost limits commands tests
Mix assumes test cases are .exs files
Vhost limits commands
In development environment, check for ENABLED_PLUGINS_DIR for rabbitmqctl too
Configure member retries on Mnesia reconnection failures
Merge branch 'stable'
rabbitmq-components.mk: Add rabbitmq-cli to components
Update README.md
Merge branch 'stable'
No need to patch SockJS anymore
Make table formatter look like in the old CLI
Merge pull request #2 from dmitrymex/detect-stop
Add optional callbacks to the command behaviour
Enable table formatter for each list_ command
Correct IO device name
Refactor error reporting to allow commands specify formatter
Command specific formatters
Install escript to windows package
Windows integration for plugins and diagnostics
Introduce autocluster.peer_discovery_backend
Table formatter
Insert channel stats directly into ETS tables
Use the new cli in windows rabbitmqctl
Add diagnostics tool to installed sctips
Merge branch 'stable'
Merge branch 'multi-app-plugins' into stable
Update README.md
Merge branch 'stable'
Link to website source repo
Merge branch 'stable'
Update README.md
Merge branch 'stable'
Update README.md
Integrate rabbitmq-cli deps to release build
Create .ez for multi-app plugins
Copy escripts to package
Add escript folder to store build ctl escripts
Merge branch 'stable'
Merge pull request #1012 from rabbitmq/rabbitmq-server-960
Merge branch 'stable' into rabbitmq-server-960
Merge branch 'stable'
Merge pull request #1011 from rabbitmq/rabbitmq-server-972
Ignore unknown ack
Merge branch 'stable'
Makefile: Do not patch rabbitmq_web_stomp if it's missing
Compile
Merge branch 'stable'
Merge pull request #1009 from rabbitmq/rabbitmq-server-1006
Merge branch 'stable' into rabbitmq-server-972
Merge branch 'stable'
Merge pull request #1010 from rabbitmq/rabbitmq-server-1007
Merge branch 'stable'
Merge pull request #140 from rabbitmq/rabbitmq-server-1005
Integrate escripts from rabbitmq_cli on make
Initial DNS backend config schema support; decouple autocluster node type key
Ignore policy_changed on slaves
Stop master in receiving sync_start from another master after partition
Avoid duplicates in members list during partial partition
Ignore late answers to the channel
Merge branch 'stable'
Fix bash script
Merge branch 'stable'
Fix markdown tables
Extension for README to show as markdown
Merge branch 'stable'
Upgrade test README. Move upgrade scripts from rabbitmq-ci
Purge vhost storage in transaction
Migration to per-vhost store message
Move queues to vhost storage on upgrade
Allow restart of a vhost message store. purge_messages function to clean message storage (together with message indexes) for a vhost
Terminate message store ignoring file save errors
Tests for per-vhost message store. Stop vhost message store when deleting vhost
Queue index per vhost location
Updated tests to support per-vhost message store
Update tests
Moved directory selection to vhost_dir function
Remove duplicate migration. Match no_ack message
New upgrade scope `queues` started by boot step before queue recovery
wip: migrating to vhost base messge store
wip
Work in progress: Migration to vhost based message store
Migration algorithm
Starting and restarting app
message store supervisor
Do not fail on {cluster_nodes, [node()]} config
Merge pull request #103 from binarin/fix-clean-target
Merge pull request #4 from binarin/repeated-deb-builds
Make .deb build process re-enterable
Fix `clean` make target for source dist tarballs
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #40 from rabbitmq/rabbitmq-federation-39
Merge branch 'stable' into rabbitmq-federation-39
Improve Federation link connection name
Merge pull request #3 from binarin/rebuildable-deb-package
Propagate version when building .deb
Upgrade script compatibility
Merge branch 'stable'
Upgrade testing
Correctly return exit code from stop
Merge branch 'stable'
Merge pull request #999 from rabbitmq/rabbitmq-website-282
Change formatting for rabbitmqctl help
Document configuration encryption
Merge branch 'stable'
Test cleanup
Merge branch 'stable'
Remove version_equivalance entry from test group
Merge branch 'stable'
Use config_entry_decoder key for config encryption
Merge pull request #989 from rabbitmq/rabbitmq-server-486
Merge pull request #135 from rabbitmq/rabbitmq-server-486
Merge branch 'stable'
Support x.y in plugin versioning
Merge branch 'stable'
Merge pull request #138 from rabbitmq/broaden-version-format-support
Merge pull request #997 from rabbitmq/broaden-version-format-support
Add Erlware Commons license, fix LICENSE.
Be more defensive and accept 'disk'
Merge branch 'master' into rabbitmq-server-486
2016, even
Correct (c) years for a file borrowed from rabbitmq-autocluster
Only supporting 'disc' is sufficient
Make Federation connections (links) specify a name
4-number versions and binary versions test
Special case for 3.6.6 in version_minor_equivalent
Support semver-style prerelease identifiers in version parsing
Import ec_semver, exporting normalize/1
unit_SUITE: add version equivalence tests
unit_SUITE: move version equivalence tests to common
Merge branch 'stable'
Merge pull request #994 from rabbitmq/rabbitmq-server-979
Add better message when decryption fails in config
Merge pull request #996 from rabbitmq/rabbitmq-server-987
Support `disk` node type. Test ignore of node_type if there is no nodes
Ignore *.schema files in test dir. Copy them on setup
More tests for cluster config
Change config schema for the classic autoclustering backend
Merge pull request #108 from rabbitmq/rabbitmq-server-621
Ignore rabbitmq-diagnostics
diag, diagnostic => diagnostics
Merge branch 'stable' into rabbitmq-server-979
Create tests for rabbitmqctl encode
Merge branch 'stable'
Merge pull request #2 from rabbitmq/symlink_private_log_dir
Merge pull request #2 from rabbitmq/symlink_private_log_dir
Use terms in rabbitmqctl encode
Merge branch 'stable'
Merge pull request #20 from rabbitmq/rabbitmq-shovel-19
Concatenate binaries directly
Add encode command to rabbitmqctl
remove accidental russian char
Naming
Make read-only commands part of the rabbitmq-diag tool
Inline function specs in rabbit_log
Symlink private_log directory for the last test run inside logs
Symlink private_log directory for the last test run inside logs
Make Shovel connections specify a name
Merge pull request #16 from rabbitmq/revert-15-rabbitmq-management-236
Revert "Switch to Cowboy REST"
Merge pull request #14 from rabbitmq/revert-12-rabbitmq-management-236
Revert "Switch stable to Cowboy"
Merge pull request #10 from rabbitmq/revert-9-rabbitmq-management-236
Revert "Switch the plugin to use Cowboy REST"
Merge pull request #18 from rabbitmq/revert-17-rabbitmq-management-236
Revert "Properly detect Cowboy processes"
Revert "Switch stable to Cowboy"
Merge pull request #292 from rabbitmq/rabbitmq-management-291
Manage vhost limits using rabbitmqadmin
Remove a pointless comment
Add a test for decrypt at start without passphrase
Add tests for decrypting at application start
Add a test to decrypt environment values
Merge pull request #290 from rabbitmq/rabbitmq-management-289
Merge pull request #985 from rabbitmq/rabbitmq-management-289
Merge pull request #1 from rabbitmq/rabbitmq-management-289
Copywriting
Add configuration for decrypting hidden configuration values
Merge branch 'rabbitmq-server-990' into stable
Choose master from intersection of sync slaves and policy nodes
Merge pull request #1 from binarin/non-master-partitions
Drive-by change: reduce log noise
Merge branch 'master' into rabbitmq-server-486
Switch config-driven automatic clustering to the new behaviour
Drive-by change: reduce log noise
Allow rabbit_peer_discovery_backend:list_nodes/1 to return a pair
Document operator policies and vhost_limits HTTP API
Do not fail to render the policies page if there is no VHosts
Clear operator policies
Updated limits page to edit limits. Updated policies page to create operator policies
Vhost limit API functions to set/list/clear specific limits
More helpers to test vhost limits
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #978 from rabbitmq/rabbitmq-server-973
Merge pull request #38 from rabbitmq/rabbitmq-server-980
Merge pull request #981 from rabbitmq/rabbitmq-server-980
Merge pull request #136 from rabbitmq/rabbitmq-server-980
Add comments
Add rabbit_pbe:encrypt_term and decrypt_term
Remove `pg2_fixed`
rabbit_federation_*_link: Use the standard `pg2` module
mirrored_supervisor: Use the standard `pg2` module
Add rabbit_pbe module for password based encryption
Merge branch 'stable'
Show limits to all management users
Use a name that's more to the point
Vhost limits page
Naming, cosmetics
Merge branch 'stable'
Merge branch 'stable'
rabbit_ct_helpers: Use path to `rabbit_common` in rabbit_common_srcdir
rabbit_ct_helpers: Use path to `rabbit_common` in rabbit_common_srcdir
rabbit_ct_helpers: Use path to `rabbit_common` in rabbit_common_srcdir
rabbit_ct_helpers: Use path to `rabbit_common` in rabbit_common_srcdir
Merge branch 'stable'
Remove a constant that's no longer used
OCF RA: Check partitions on non-master nodes
health_check_SUITE: Use a RabbitMQ nodename suffix
Merge branch 'stable' into rabbitmq-server-973
Merge branch 'stable'
Tests timing
Merge branch 'stable'
Reset `DEPS_DIR` inside Debian and RPM package files
packaging: Do not pass command-line variables to potential sub-makes
Merge branch 'stable'
Merge branch 'snepomnyachi-allow-post-login-path' into stable
Cosmetics
Merge branch 'allow-post-login-path' of https://github.com/snepomnyachi/rabbitmq-management into snepomnyachi-allow-post-login-path
Merge branch 'stable'
Do not log java test output
Fix typo: s/Multile/Multiple/
Use lists:foldl instead of dict:from_list
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-management-236
rabbit_web_dispatch_SUITE: Run teardown steps at the end of the suite
Merge branch 'stable' into rabbitmq-management-236
rabbit_web_dispatch_SUITE: Start inets where we need it
Merge branch 'stable'
Makefile: Add rabbitmq_ct_helpers to TEST_DEPS
Remove rabbit_proper_helpers, a duplicate of rabbit_ct_proper_helpers
Merge branch 'stable'
Use quiet mode for Maven
Merge branch 'rabbitmq-management-236' of github.com:rabbitmq/rabbitmq-management into rabbitmq-management-236
merge stable
Distributed query for overview totals
Merge branch 'stable' into rabbitmq-management-236
rabbitmq-tools.mk: Add `make show-branch` to list deps' branch
Makefile: Include `rabbitmq-tools.mk`
Merge branch 'stable'
Use Common Test Helpers directory for certificates
Merge branch 'stable'
Merge pull request #102 from rabbitmq/rabbitmq-mqtt-101
Refactor Java tests
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
metrics_SUITE: Remove `amqp_client.hrl` inclusion
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable' into rabbitmq-management-236
Fix node_persister_stats and add tests for incremental counters
Merge branch 'stable' into rabbitmq-management-236
Merge branch 'stable'
Merge branch 'stable'
New PropEr helpers from branch rabbitmq-management-236 in rabbitmq-common
New PropEr helpers from branch rabbitmq-management-236 in rabbitmq-common
Specify file format for client certificate
Distributed node(s) stats query
Distributed vhost(s) stats query
Merge branch 'stable'
Merge branch 'rabbitmq-server-975' into stable
renamed run_count to gc_run_count
Test format rates
defaul value for run_count
Report java test result in test log
Stop syncer if there is no slaves to sync to
Introduce rabbit_peer_discovery_backend
Distributed exchange(s) stats query
Set up travis to install maven
Distributed connection stats query
Makefile: No need to patch SockJS anymore
Merge branch 'stable'
Makefile: No need to depend on `ranch` now
Cleanup comments
Fix a few dialyzer issues
test dir cleanup
Run tests via maven
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Export opaque type for exometer_slide #slide{}
Makefile: Add missing rabbitmq_ct_helpers to TEST_DEPS
Move delegate calls to mgmt_db for channel queries
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
rabit_ct_client_helpers: Use values from `Config`
rabit_ct_client_helpers: Use values from `Config`
rabbit_ct_client_helpers: Support direct conn. in open_unmanaged_connection()
rabbit_ct_client_helpers: Support direct conn. in open_unmanaged_connection()
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
rabbitmq-components.mk: Add rabbitmq-server-release to the components
Import master-specific changes
Make the GC calls configurable for lazy queues
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Call delegate in mgmt_db instead for queue queries
Makefile: Rename project to rabbitmq_server_release
Update erlang.mk
Reset mgmt storage function
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Makefile: Move install recipes to rabbitmq-release
Makefile: Take install recipes from rabbitmq-server
Makefile: Do not ship *.d, test/ and xrefr in the source archive
Fix and testing of instant rates
Merge pull request #968 from rabbitmq/rabbitmq-server-501
Merge pull request #134 from rabbitmq/rabbitmq-server-501
Merge branch 'rand_compat-seeds-properly-now' into stable
Move all release handling bits to rabbitmq-release
Merge branch 'stable'
scripts: Take package-specific files from rabbitmq-server
packaging: Take `docs` from `deps/rabbit`
Merge branch 'rabbitmq-server-944' into stable
Makefile: Replace rabbitmq-server's version of "0.0.0" by $(VERSION)
Collect vhost_msg_rates per vhost
Only enforce max queue limit for newly declared queues
Add a test that ensures max queue limit isn't enforced for re-declaration
fix bug in delegate
Merge branch 'stable' into rabbitmq-server-944
Use index tables to clean up statistics database
scripts/rabbitmq-script-wrapper: Moved from rabbitmq-server
Correct a comment
Makefile: Perform install from `deps/rabbit`
Makefile: rabbitmq-release is now the root of the source archive
Makefile: Do not load rabbitmq-build.mk
Merge branch 'stable'
Makefile: Do not put `ebin` and `logs` in the source archive
Remove mochiweb from TEST_DEPS
Remove remaining references to mochi/webmachine
Initial commit of RabbitMQ release handling bits
Merge pull request #17 from rabbitmq/rabbitmq-management-236
Merge pull request #13 from rabbitmq/rabbitmq-management-236
Update LICENSE file following switch to Cowboy
Properly detect Cowboy processes
rabbit_shovel_worker: rand_compat was fixed, no need to seed anymore
Merge branch 'rabbitmq-server-953' into stable
Common Test helpers were moved to rabbitmq-ct-helpers
Common Test helpers and scripts were moved to rabbitmq-ct-helpers
Do not send metrics ETS tables to management collector
Collect metrics from ets tables directly
Merge pull request #9 from rabbitmq/rabbitmq-management-236
Stop in request_depth if master is not a member any longer
Merge pull request #15 from rabbitmq/rabbitmq-management-236
rabbitmq_web_stomp_examples.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_web_stomp.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_web_mqtt_examples.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_web_mqtt.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_web_dispatch.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Merge branch 'stable' into rabbitmq-server-953
Update erlang.mk
Switch the plugin to use Cowboy REST
Merge branch 'stable' into rabbitmq-management-236
rabbitmq_trust_store.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_tracing.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_top.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
Change some NO_CONTENT into CREATED in the tests
rabbitmq_shovel_management.app: Depend on rabbit_common
Convert to Cowboy REST
Makefile: Explicitely list all DEPS
Update erlang.mk
Merge pull request #16 from rabbitmq/rabbitmq-management-236
Switch to Cowboy REST
rabbitmq_shovel.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_sharding.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Merge pull request #12 from rabbitmq/rabbitmq-management-236
Remove `other_plugins`, unused these days
Update erlang.mk
rabbitmq_recent_history_exchange.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
Switch the plugin to use Cowboy REST
rabbitmq_mqtt.app: Depend on ranch and rabbit_common
Makefile: Explicitely list all DEPS
Distributed query for consumers
Update erlang.mk
One more test
One more test
Makefile: Remove the `$(PLUGINS)` variable
rabbitmq_management_agent.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Move clean_consumer_details function into rabbit_mgmt_format
Update erlang.mk
Stop slaves once removed from the amqqueue record by other nodes
rabbitmq_management.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_jms_topic_exchange.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
rabbit_jms_topic_exchange.erl: Drop useless dependency to amqp_client
Update erlang.mk
rabbitmq_federation_management.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Update erlang.mk
Implement channel queries using multiple delegate calls. Remove channel_consumer
Remove channel_consumer
Merge branch 'master' into rabbitmq-server-501
Merge branch 'master' into rabbitmq-server-501
More tests
Allow giving path when using #/login
rabbitmq_federation.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_event_exchange.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_consistent_hash_exchange.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Update erlang.mk
Makefile: Remove rabbitmq_ct_helpers from TEST_DEPS for now
Makefile: Remove rabbitmq_ct_helpers from TEST_DEPS for now
rabbitmq_auth_mechanism_ssl.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_auth_backend_ldap.app: Depend on rabbit_common
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq_stomp.app: Depend on rabbit_common
rabbitmq_amqp1_0.app: Depend on rabbit_common
rabbitmq_auth_backend_http.app: Depend on rabbit_common and rabbit
Makefile: Explicitely list all DEPS
Update erlang.mk
rabbitmq-run.mk: Query the location of `erl_call`
More tests
rabbitmq-run.mk: Remove comment about plugins having to add `rabbit` to DEPS
Update erlang.mk
Update erlang.mk
Makefile: Explicitely list all DEPS
Makefile: Explicitely list all DEPS
Makefile: Explicitely list all DEPS
Remove `inet_proxy` Erlang distribution
Makefile: Explicitely list all DEPS
rabbitmq-components.mk: Do not fill DEPS automatically
Merge branch 'stable'
Merge branch 'stable'
rabbitmq_ct_helpers: Base directory lookups on rabbitmq-ct-helpers
rabbitmq_ct_helpers: Base directory lookups on rabbitmq-ct-helpers
inet_tcp_proxy: Use error_logger instead of rabbit_log
inet_tcp_proxy: Use error_logger instead of rabbit_log
Enforce max-queues vhost limit
Enforce max-queues vhost limit
Match shutdown as expected return value
Introduce per_vhost_queue_limit suite
When setting up a node DB, create secondary indexes on queue tables
Introduce rabbit_amqqueue:count/1
Stop queue gracefully on coordinator/GM initialisation shutdown
Queue query refactoring
Makefile: Remove duplicate ERLC_OPTS definition
Distributed querying for channels and channel channel queries now perform an additional query to get the consumer detials once the channel pids are known
Merge branch 'stable'
Merge pull request #966 from bogdando/stable
Stop GM with reason shutdown whenever an error is detected
Fix stdout/stderr redirects
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #961 from rabbitmq/rabbitmq-server-953
Merge pull request #133 from rabbitmq/rabbitmq-server-953
Merge branch 'stable' into rabbitmq-server-953
Update expectations for new credit flow values
Update expectations for new credit flow values
Merge branch 'stable' into rabbitmq-server-953
Make sure MoreCreditAfter is 100 by default even when unset
Make sure MoreCreditAfter is 100 by default even when unset
Merge branch 'stable' into rabbitmq-server-953
Merge branch 'stable' into rabbitmq-server-953
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'master' into rabbitmq-server-501
Merge branch 'master' into rabbitmq-server-501
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Add rabbitmq-ct-helpers to the components
rabbitmq-components.mk: Remove the unused distclean-components target
rabbitmq-components.mk: Disable automatic check-rabbitmq-components.mk
Merge pull request #963 from rabbitmq/rabbitmq-server-962
Fix log message
Verify existing record while finding durable queues
Merge branch 'stable'
Merge branch 'stable'
Initial import of all testsuite helpers (stable branch)
Initial import of all testsuite helpers (stable branch)
Initial import of all testsuite helpers
Initial import of all testsuite helpers
Remove an unused constant and a duplicate test
Add distributed query for queues
Add group_proplists_by function to rabbit_misc
Stop master with reason shutdown on duplicated masters
Check mirrored queue on node down
Handle channel_consumer_deleted event Test refactoring
Emit channel_consumer_deleted event on basic.cancel
Handle channel_consumer_deleted event
Ensure ?CORE_TABLE tuples are deconstructed
Stop including the webmachine header
Merge branch 'stable'
Merge pull request #10 from rabbitmq/rabbitmq-jms-topic-exchange-9
Eliminate client version check
merge
distributed queue query introduce channel consumer stats to track consumers from a channel node
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update test to expect HTTP 201
core metrics: introduce channel_consumers to allow metric queries to map from a queue to a consumer/channel when the queue is hosted on a different node
Accept any content-type
Add CORS support
Add socket options to listener information
Properly redirect on definitions upload success
Accept any content-type for exchange-publish
Add a handler for static files with multiple source directories
Makefile: Add Ranch as a BUILD_DEPS to be sure Ranch 1.2.1 is pulled
Accept files when posting definitions
Use Cowboy REST instead of Webmachine
Save listener socket options in Mnesia
Add upgrade function adding listener socket options
rabbitmq-components.mk: Update the list of targets used to start a broker
rabbitmq-components.mk: Disconnect rabbitmq-test from the Umbrella
Remove all bits of the old test framework
rabbitmq-components.mk: Do not pull rabbitmq-test as a TEST_DEPS
Skip checking the return value on clear_policy
Take update mirroring decision in rabbit_amqqueue_process
add policy_version to amqqueue
Move mochinum to common where it is used.
Wording
Check rabbit_node_monitor during health-check
Add support for listing only local queues
rabbitmq-run.mk: New target to query the location of test TLS certificates
Add `xmerl` dependency to `.app.src`
Make `rand_compat:uniform/1` more uniform
Add web-stomp port generation to common test helpers
Merge branch 'stable'
Merge pull request #957 from rabbitmq/rabbitmq-server-956
Ignore current value of RABBITMQ_IGNORE_SIGINT_FLAG
Merge pull request #958 from rabbitmq/rabbitmq-server-948
Merge pull request #70 from rabbitmq/rabbitmq-server-948
Merge pull request #132 from rabbitmq/rabbitmq-server-948
Merge branch 'stable'
Merge pull request #954 from rabbitmq/rabbitmq-server-908
Merge branch 'stable'
Support direct connection tracking
Merge pull request #955 from rabbitmq/rabbitmq-server-949
Report node and pid in connection start/stop events
type field in tracked_connection record to track direct and network connections
Merge branch 'stable' into rabbitmq-server-956
Merge pull request #946 from dmitrymex/reset-mnesia-schema
Boolean flag to enable/disable +B VM option
Merge pull request #951 from rabbitmq/rabbitmq-server-950
ENV variable to override +B VM option
Merge branch 'stable' into rabbitmq-server-950
Bump default MoreCreditAfter to 100
Make VM distribution buffer size easier to configure, bump default to 32MB
Handle not found outside of verify
merge
basic distributed queue query
Ensure actuals are reported in overview for aggregated data
move delegate to common
move delegete to common
Initialize vhost here
Correct return value
Cosmetics
Table migration fn that fills out rabbit[_durable]_queue.vhost
Add a separate vhost field to amqqueue
Return size 0 if rabbit_metrics does not exist (rabbit app is stopped)
Add original commit number to exometer_slide
ensure federation plugin is enabled when testing parameters
Merge branch 'stable'
rabbitmq-build.mk: Add reference to ninenines/erlang.mk#502
Update erlang.mk
Merge pull request #104 from rabbitmq/rabbitmq-cli-101
Convert error_string char list to string
Operator policies commands
Merge branch 'stable'
Merge branch 'rabbitmq-shovel-18' into stable
Correctly use rand_compat:seed/2.
Merge branch 'stable'
Use publisher confirms before consuming with basic.get in this test
Use publisher confirms before consuming with basic.get in this test
Update vhost stats on queue delete
[OCF HA] Delete Mnesia schema on mnesia reset
Don't use erlang:now/0
Merge branch 'seed_rand_fix' of https://github.com/tombriden/rabbitmq-shovel into tombriden-seed_rand_fix
make_conn_and_chan: call rand_compat:seed before uniform
merge branch stable
Use macros to define metrics content - for doc & clarity only
Use rabbitmq_stomp instead of rabbitmq_metronome
refresh node metrics multiple times whitespace
Merge pull request #103 from rabbitmq/rabbitmq-cli-test-stability
Squash a warning
test for agent collector
Test stability. Enabling federation plugin when needed, do not stop distribution.
update external stats on init
Fixing some tests
Proper helpers
idempotency metric property tests
Merge pull request #942 from dmitrymex/remove-second-monitor
Proper helpers
Rename functions
Add Proper tests for added functionality to exometer_slide
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Align tested Erlang versions with other components
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Bring branch/tag management from rabbitmq-shovel
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Bring branch/tag management from rabbitmq-shovel
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Bring branch/tag management from rabbitmq-shovel
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Bring branch/tag management from rabbitmq-shovel
Travis CI: Test on Erlang 19.0
User management CT helpers
Merge branch 'stable'
Merge branch 'stable'
Added ranch as a dependency to build ranch_protocol behaviour
Added ranch as a dependency to build ranch_protocol behaviour
switch metrics property tests to lists of operations
ensure properties validate the number of things created
[OCF HA] Do not suggest to run the second monitor action
PropEr test for core metrics
A few more open_unmanaged_connection heads
Merge branch 'rabbitmq-management-236' of github.com:rabbitmq/rabbitmq-management into rabbitmq-management-236
Handle queue_deleted on the core metrics
Merge branch 'stable'
Git: No need to ignore SwiftMQ library
Travis CI: Test on Erlang 18.3 and 19.0 only
Merge branch 'stable'
Update http test suite
Make rabbit_mgmt_db local
Fix ETS query
Update DB test suite
Travis CI: Test on Erlang 18.3 and 19.0 only
Merge branch 'stable'
Travis CI: Initial configuration, copied from rabbitmq-shovel
Travis CI: Initial configuration, copied from rabbitmq-shovel
test refactor
lower excessive test sleep
Cosmetics
Fix duplicate content-type in error responses
Enable automatic compression by default
Allow configuring Cowboy options with cowboy_opts
Makefile: Add Ranch as a BUILD_DEPS to be sure Ranch 1.2.1 is pulled
Use Cowboy instead of Webmachine/Mochiweb for Web plugins
add basic metrics tests for external metrics
Add lookups for testing
Clean empty stats
Travis CI: Do not test on Erlang 18.3
add tests for core metrics
Merge branch 'stable'
Merge branch 'stable'
*_SUITE: Stop the broker at the end of the testsuite
rfc6455_client: Remove dead code
*_websocket_SUITE: Stop the broker at the end of the testsuite
Do not force default `default_user` when falling back to non-HTTP auth
Makefile: Add lager to BUILD_DEPS
rabbitmq_stomp.app: default_user credentials should be Erlang binaries
Merge branch 'stable'
Merge pull request #100 from rabbitmq/rabbitmq-cli-90
A bit of docs
Merge branch 'stable'
Wording
Cosmetics
Merge branch 'master' into rabbitmq-cli-90
Fix typo
Merge branch 'rabbitmq-server-803-stable' into stable
Merge branch 'rabbitmq-server-803-stable' into stable
Proper is a test dependency now
Merge branch 'stable' into rabbitmq-server-803-stable
Merge branch 'stable' into rabbitmq-server-803-stable
Implement statistic_db_event_queue
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Makefile: Re-add amqp_client and meck as TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Travis CI: Import various fixes from rabbitmq-web-stomp
Travis CI: Test against Erlang 19.0
Travis CI: Import checkout fixes from rabbitmq-stomp
Travis CI: Test against Erlang 19.0
Travis CI: Do not test against Erlang R16B03
mqmt_agent_collector should stop when mgmt_metrics_collector goes down.
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Update the list of targets used to start a broker
rabbitmq-components.mk: Disconnect rabbitmq-test from the Umbrella
Remove all bits of the old test framework
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: amqp_client is not a runtime DEPS
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Makefile: No need to filter out rabbitmq_test from TEST_DEPS anymore
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Do not pull rabbitmq-test as a TEST_DEPS
Mgmt memory report and test
Merge branch 'stable'
Merge pull request #98 from rabbitmq/rabbitmq-mqtt-96
Rename
Wording, naming
Merge branch 'rabbitmq-server-930' (again)
Make sure the argument to md5 is a binary in this test
Make sure the argument to md5 is a binary in this test
Merge branch 'stable'
Ignore sockjs heartbeats
change stats to include rabbit_mgmt_sup_sup instead of rabbit_mgmt_sup
test comments
Re-introduce rabbit_mgmt_sup_sup for an easy restart
Make MQTT authentication correspond with docs. Added tests
Merge pull request #938 from rabbitmq/rabbitmq-server-930
Merge pull request #282 from rabbitmq/rabbitmq-server-930
Merge pull request #128 from rabbitmq/rabbitmq-server-930
A file missing from fb7550c3b58d72344c3c6cada8bb980b678e28fc
Finish support for operator policies in HTTP API and rabbitmqadmin
Fix formatting of queries results and skip connection details if not yet available
Only administrators are allowed to access ops policies
write connection_stats metrics
write connection_stats metrics
write connection_stats metrics
Document arguments supported by operator policies
write connection_stats metrics
Extract policy tests into a separate suite
Test empty password login
update memory usage stats
Use a separate event key for operator policies
Fix escaping of records on select queries
Format queried stats
Optimize a case clause
Update operator policy commands in rabbitmqctl(1)
Query consumers
Remove unused defines
Merge pull request #33 from rabbitmq/rabbitmq-amqp1.0-32
remove rabbit.hrl and define simple local 'User' record
merge
policy_merge_strategy registry class
Merge branch 'master' into rabbitmq-server-930
Merge branch 'master' into rabbitmq-server-930
Travis CI: Do not test on Erlang 18.3
Merge branch 'stable'
Added new registry class policy_merge_strategy to define policy values merging
Merge pull request #934 from rabbitmq/rabbitmq-server-932
Travis CI: Require ant and ant-optional packages
Merge branch 'stable' into rabbitmq-server-932
Merge branch 'stable'
java_SUITE: Fetch dependencies using Maven
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #941 from lemenkov/move_mochinum_to_rabbitmq_common
Merge pull request #130 from lemenkov/move_mochinum_to_rabbitmq_common
Merge pull request #131 from rabbitmq/rabbitmq-erlang-client-68
Merge pull request #97 from rabbitmq/fix-java-testsuite
Queue TTL operator policy
Travis CI: Only test against Erlang 18.3 and 19.0
translate thrown no_such_vhost exception into not_found protocol error
dynamic_ha_SUITE: Disable random policy tests for now
dynamic_ha_SUITE: Log the failing set of policies
dynamic_ha_SUITE: Add a new kind of failing set of policies
dynamic_ha_SUITE: Handle the change of queue master PID
dynamic_ha_SUITE: Explicitely add failing policies found by PropEr
dynamic_ha_SUITE: Wait for the last policy to apply a little longer
dynamic_ha_SUITE: Use an assertion to possibly fail the test
Skip checking the return value on clear_policy
Take update mirroring decision in rabbit_amqqueue_process
add policy_version to amqqueue
Upgrade amqqueue record with policy_version
Check return value of clear_policy in the test instead of auxiliary function
Test concurrent application of HA policies
Update policy version on set_policy and use it on update_mirroring
Take update mirroring decision in rabbit_amqqueue_process
java_SUITE: Fetch dependencies using Maven
Change mirrored supervisor to normal one
Update exometer_slide copyright note
Remove unused code
Overview stats
Fix vhost stats
Handle node node stats
Node stats
Handle vhost_deleted
Handle deleted events
Check if queue and exchange exist
Queue stats
Exchange stats
Consumer stats
Filter detailed stats
Handle channel_closed event
Channel metrics. Implements aggregation
Handle connection_closed event
Collect connection metrics
Include original exometer_slide
Remove unused code for the new mgmt stats
Merge branch 'master' into rabbitmq-server-930
Merge branch 'master' into rabbitmq-server-930
Change order of dependencies to compile lager_transform correctly
Stubs for exchange specific info
Store node node metrics
Merge pull request #939 from binarin/rabbitmq-server-ocf-is-clustered-check
Merge pull request #891 from rabbitmq/rabbitmq-server-500-squashed
Merge pull request #121 from rabbitmq/rabbitmq-server-500-squashed
per_vhost_connection_limit_SUITE: Add a test around cluster rename
Move mochinum to common where it is used.
Nobody is using mochinum in this repo. Move it to common.
Allow node_health_check retries in OCF HA script
Perform partition checks from OCF HA script
rabbit_ct_broker_helpers: Rename `NodeIndex` to `Node`
Remove dead code left from a previous incarnation of the patch
Usage for operator policy management commands
Test helper to set/clear operator policy
Test policy and operator policy message ttl
Merge branch 'stable'
pass connection_timeout to the SSL upgrade
Merge pull request #65 from cooper6581/master
pass connection_timeout to the SSL upgrade
Merge branch 'stable'
Merge pull request #936 from niclic/rabbitmq-server-935
Docs: Default AMQP heartbeat delay should be 60 seconds
Store raw node and node node metrics
Display operator policies for queues
operator policies data struscture
Operator policy as a separate queue field
cluster_rename_SUITE: Lower the testsuite timeout
per_vhost_connection_limit_SUITE: Sleep 500ms after connection open/close
rabbit_mnesia_rename: Backup local tables only
rabbit_mnesia:forget_cluster_node/2: Skip event if node if offline
Push queue metrics
Store queue and node metrics
Pretend to build on rhel6 and rhel7 during package-rpm
operator_policy runtime parameter
operator policies
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'stable'
Merge branch 'rabbitmq-server-928' into stable
Naming, wording
 Handle late autoheal_finished message
Fix warnings in tests
Example json formatter. Remove IO.puts from commands
Merge branch 'stable' into rabbitmq-server-928
Improve tolerance to partial partitions in autoheal
Merge pull request #274 from rabbitmq/rabbitmq-server-500-squashed
Merge branch 'stable'
Merge pull request #916 from binarin/rabbitmq-server-new-shiny-ocf-health-check
Merge branch 'systemd-fedora-usage-and-tmpfiles' of git://github.com/harlowja/rabbitmq-server into harlowja-systemd-fedora-usage-and-tmpfiles
Merge branch 'master' into rabbitmq-server-500-squashed
Monitor rabbitmq from OCF with less overhead
Merge branch 'stable'
Merge pull request #929 from dmitrymex/start-sequence
Specific output tests
Write to file using file printer
File printer
Merge branch 'stable'
Reworking command outputs
Merge pull request #279 from rabbitmq/rabbitmq-management-278
Test return of duplicated keys in /queues
[OCF HA] Enhance split-brain detection logic
[OCF HA] Rank master score based on start time
removed  reduction key
Merge branch 'stable'
Merge branch 'Ayanda-D-rabbitmq-server-914' into stable
Expect help command to return list of strings
Test GM crash when group is deleted while processing a DOWN message
Merge branch 'rabbitmq-server-914' of https://github.com/Ayanda-D/rabbitmq-server into Ayanda-D-rabbitmq-server-914
Merge pull request #926 from dmitrymex/get-private-attr
Remove duplicate require_rabbit function
[OCF HA] Add ocf_get_private_attr function to RabbitMQ OCF script
Help command return list of strings instead of printing them\
Default output formatting and exit code selection. Inspect printer
Merge branch 'stable'
Merge branch 'master' into rabbitmq-server-500-squashed
Merge pull request #99 from rabbitmq/rabbitmq-cli-97
Make sure rabbit_event is functional
Squash warnings
Merge pull request #925 from bogdando/fix_bashisms
Fix bashisms in rabbitmq OCF RA
record_info/2 is appropriate here
Use lists:foldl/3 only
Reformat with emacs
Add rabbit plugins to path when requiring rabbit to be loaded
Combine map/2 and foldl/3
Merge branch 'stable'
Merge pull request #923 from rabbitmq/rabbitmq-server-922
Typo
Discard any unexpected messages, such as late replies from gen_server
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-health-check-node-monitor' into stable
Merge branch 'binarin-rabbitmq-server-health-check-node-monitor' into stable
Wording
Merge branch 'rabbitmq-server-health-check-node-monitor' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-health-check-node-monitor
Merge branch 'rabbitmq-server-health-check-node-monitor' of https://github.com/binarin/rabbitmq-server into binarin-rabbitmq-server-health-check-node-monitor
Merge branch 'stable'
Merge pull request #919 from mwhahaha/iptables
Merge pull request #920 from mwhahaha/iptables-stable
Update iptables calls with --wait
Update iptables calls with --wait
Merge branch 'rabbitmq-cli-92'
Inline default_opts
Merge branch 'stable'
Docs wording
Fix a copy+paste mistake
Fix merge_defaults implementations
Handle unexpected gm group alterations prior to removal of dead pids from queue
Merge branch 'stable'
Merge branch 'stable'
Adds check_membership/2 clause for handling non-existant gm group
Safely handle (and log) anonymous info messages, most likely from the gm process' neighbours
Merge pull request #911 from binarin/rabbitmq-server-851
Merge pull request #125 from binarin/rabbitmq-server-851
Merge branch 'master' into rabbitmq-server-500-squashed
Rename function
Delete connection tracking tables for nodes removed from the cluster
Fix an IO.puts/1 line ported from io:format/2 too literally
Wording
pong and pang are atoms
Delete a duplicate fn head
Mention rabbitmq-sharding a possible alternative
Add a note and links discussed in #13
Fix trivial typo noticed in error message.
Add support for listing only local queues
Don't assume connection_closed details only contain a pid
Merge pull request #91 from rabbitmq/rabbitmq-cli-rename-cluster-node-command
Don't rely on rabbit_control_main; coerce node names to atoms
Merge branch 'master' into rabbitmq-cli-rename-cluster-node-command
Merge pull request #88 from rabbitmq/rabbitmq-cli-update-cluster-nodes
Wording, add aliases to UpdateClusterNodesCommand
Merge branch 'master' into rabbitmq-cli-update-cluster-nodes
Merge pull request #89 from rabbitmq/rabbitmq-cli-change-cluster-node-type
Brush up tests, support both "disc" and "disk"
Merge branch 'master' into rabbitmq-cli-change-cluster-node-type
Add rabbitmq-server fedora/rhel/centos systemd service integration
Store consumer metrics
Store raw connection and channel metrics
Push consumer metrics
Merge pull request #93 from rabbitmq/rabbitmq-cli-policies-commands
Fix CLI arguments parsing for policies, brush up tests
Push connection created/closed events
Start raw metrics storage
Merge branch 'master' into rabbitmq-cli-policies-commands
Merge pull request #96 from rabbitmq/rabbitmq-cli-9
Merge branch 'master' into rabbitmq-cli-9
Merge pull request #87 from rabbitmq/rabbitmq-cli-force-boot-command
Minor test improvements
Merge branch 'master' into rabbitmq-cli-force-boot-command
Merge pull request #86 from rabbitmq/rabbitmq-cli-78
Wording, cosmetics
Merge branch 'master' into rabbitmq-cli-78
Merge pull request #84 from rabbitmq/rabbitmq-cli-83
Use equality operator in asserts where possible, wording
Cosmetics
Use MapSet.difference/2 here, too
Use sets in more places; rabbit_plugins:ensure/1 expects an Erlang list
Handle duplicates on plugin lists, be more defensive with defaults
Make sure this test case is actually different from the one above
Merge pull request #93 from rabbitmq/rabbitmq-server-909
Merge pull request #917 from rabbitmq/rabbitmq-server-909
Rename auto complete option for consistency
Emit a node_deleted event when a node is removed from the cluster
Non negative integer validator
Non negative integer validator
Non negative validator for tcp linger
Non negative validator for tcp linger
Typos
Add tcp linger option to schema
Add tcp linger option to schema
We can use record_info/2 here; log errors in table creation
Storage of raw metrics
Check rabbit_node_monitor during health-check
Check rabbit_node_monitor during health-check
Merge branch 'stable'
Merge pull request #892 from binarin/rabbitmq-server-890
Raw metrics collector and notification of 'closed' events only
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'stable'
Merge pull request #910 from rabbitmq/rabbitmq-server-850
Cosmetics, extract fn
Use effective program name in help command output
Drop rabbitmq-plugins active_plugins
Group rabbitmq-plugins command tests under test/plugins
Add support for listing only local queues
add resume after flow
Drop _plugins from plugin management module names
Revert "Adapt to RabbitMQ master"
Merge branch 'stable'
merge_defaults_defaults => merge_all_defaults
Adapt to RabbitMQ master
More test cases
Use negative values to disable per-vhost limits, 0 to refuse all connections
Commit .deb and .rpm change logs
fix loop in flow control state
amqp_codegen.py: Create the parent directories of the output file
One more test case
Refactor
Use rabbit_misc:pget/2 here
Simplify
Drop the _test prefixes, remove some dead code
Remove a debug message
Inline
Remove a duplicate comment
Merge branch 'stable'
rabbitmq-run.mk: New target to query the location of test TLS certificates
Merge branch 'stable'
Merge pull request #269 from rabbitmq/rabbitmq-management-224
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-common-uniform-not-so-uniform' into stable
changed disk write color
Merge branch 'rabbitmq-common-uniform-not-so-uniform' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-common-uniform-not-so-uniform
Merge branch 'stable'
Merge pull request #124 from binarin/rabbitmq-common-61
added missing chart colours
Merge branch 'master' into rabbitmq-server-500-squashed
Merge branch 'master' into rabbitmq-server-500-squashed
Merge pull request #900 from johnlonganecker/master
Merge branch 'stable'
Merge branch 'rabbitmq-server-904' into stable
Merge branch 'stable'
Merge branch 'rabbitmq-server-266' into stable
Adapt to recent server changes
Switch to a single table per node for connection tracking
Add `xmerl` dependency to `.app.src`
added rabbit_registry require
Restore db test suite
Use input table index
Make `rand_compat:uniform/1` more uniform
Bump the version
Fix aggregation of messages and queue stats with unnamed tables
make_conn_and_chan: call rand_compat:seed before uniform
fixed typo in config example comment
Merge branch 'stable'
Merge pull request #898 from binarin/rabbitmq-server-868-secs
Merge pull request #1 from binarin/fixing-type-specs
Updated rabbitmq-components.mk
Fix some type specs
Fix some type specs
Merge branch 'stable'
Implement policy management commands
Commit .deb and .rpm change logs
Merge branch 'stable'
Merge pull request #896 from rabbitmq/rabbitmq-server-895
Command auto completion
merge branch 'stable'
Merge branch 'stable'
Travis CI: Test on Erlang 19.0
Travis CI: Import changes from rabbitmq-shovel
Merge pull request #52 from rabbitmq/concourse-ci
Merge branch 'stable'
configure openldap backend allow ldap port to be overridden by environment
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #894 from lemenkov/toctou_in_cluster_status
Bump default VM atom table size to 5M
Don't die in case of faulty node
Missing parenthesis
cleanup tests
cleanup test
Implement forget_cluster_node command
Do not require rabbit as dependency
More validation, error handling and tests
Merge branch 'stable'
Merge branch 'rabbitmq-amqp1.0-31' into stable
In #'v1_0.source'{}, outcomes are of the form `{list, Outcomes}`
Implementing rename_cluster_nodes command
Correct a type spec
Use ?PER_VHOST_COUNTER_TABLE here
Introduce rabbit_ct_broker_helpers:set_permissions/7, update exports
Introduce rabbit_ct_broker_helpers:{add,delete}_vhost/3
Filter out rabbitmq_test
Merge pull request #63 from rabbitmq/rabbitmq-web-stomp-common-test
Merge pull request #122 from rabbitmq/rabbitmq-web-stomp-common-test
Run tests with Common Test instead of EUnit
Merge branch 'stable'
Merge branch 'rabbitmq-stomp-common-test' into stable
Implement change_cluster_node_type command
Implement update_cluster_nodes command
Implement force_boot command
Fix some tests
Implement eval command
Merge branch 'stable'
rabbit_ct_broker_helpers: New rewrite_node_config_file/2 function
Add web-stomp port generation to common test helpers
Move to common test
dynamic_ha_SUITE: Disable random policy tests for now
dynamic_ha_SUITE: Log the failing set of policies
dynamic_ha_SUITE: Add a new kind of failing set of policies
Start CLI as hidden node
Install pika and stomppy when running tests
Moving files around
empty commit
Run python tests from CT
Move eunit tests to common test
Travis CI: Test on Erlang 19.0
Travis CI: Test on Erlang 19.0
Merge branch 'stable'
Travis CI: Import branch handling from rabbitmq-shovel
Fix longname-mode on hosts without detectable FQDN
Keep track of connections, introduce per-vhost limits
Keep track of connections, introduce per-vhost limits
dynamic_ha_SUITE: Handle the change of queue master PID
dynamic_ha_SUITE: Explicitely add failing policies found by PropEr
dynamic_ha_SUITE: Wait for the last policy to apply a little longer
dynamic_ha_SUITE: Use an assertion to possibly fail the test
only run travis build against 18.3+
Merge pull request #262 from rabbitmq/rabbitmq-management-234-master
merge from 'stable' and changes for 'ackmode'
Update README.md
Sync rabbitmq-components.mk
Merge branch 'stable'
Merge branch 'rabbitmq-management-234' into stable
Merge branch 'stable' into rabbitmq-management-234
Translate rabbitmqadmin tests from python to erlang
Merge branch 'rabbitmq-management-258'
Merge branch 'master' into rabbitmq-management-258
Accept any content-type
Merge branch 'stable'
rabbit_mgmt_test.hrl: Remove definition of ?PREFIX
http_SUITE: Use 201 HTTP codes for PUT requests
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'move-to-common_test' into stable
Switch testsuite to common_test
rabbit_ct_broker_helpers: Permit to select TCP port name in node_uri/3
Back port open_unmanaged_connection/{1,2,3} from master
Handle errors from amqp_connection:start/1
Merge branch 'stable'
Makefile: Re-use RMQ_ERLC_OPTS instead of checking Erlang version again
Travis CI: Use Erlang 18.3 and 19.0 on the master branch
Merge branch 'stable'
Enable Travis CI
Merge branch 'stable'
Merge branch 'move-to-common_test' into stable
Switch testsuite to common_test
Merge branch 'stable'
rabbit_ct_helpers: Use `Cmd` unmodified if we can't find it in $PATH
Merge branch 'stable'
rabbit_ct_helpers: Use erl_call(1) in erl_interface directory
Merge pull request #257 from rabbitmq/rabbitmq-management-250
Merge branch 'stable'
Merge pull request #256 from rabbitmq/concourse-ci-stable
Do not reformat proplist from node_node_stats
add rabbit_mgmt_runtime_parameters to break rabbitmq-test dependency squash a few warnings
Merge pull request #255 from rabbitmq/concourse-ci
add mochiweb as a dependency add rabbit_mgmt_runtime_parameters_util.erl to break dependency on rabbitmq-test
merge branch stable
merge branch stable
merge branch stable
merge branch stable
Merge branch 'stable'
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
merge branch stable
use cowboy_req to get timeout header value
Merge branch 'stable'
filter out rabbitmq-test from TEST_DEPS
filter out rabbitmq-test from TEST_DEPS
flter out rabbitmq-test from TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Bring back rabbit_health_check:node/1
Support node healthcheck timeouts
Squash compilation warnings
Merge branch 'stable'
Merge pull request #253 from deadtrickster/check_ext_before_loading
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-common-log-user-specified-connection-name-v2' into stable
Wording
Merge branch 'master' into rabbitmq-cli-83
Adapt to recent server rabbit_health_check changes
Use user specified connection name in logs
Merge branch 'stable'
fixes #251.
Update README.md
Update README.md
Merge pull request #884 from binarin/rabbitmq-server-818-master
Merge pull request #119 from binarin/rabbitmq-server-818-master
Merge remote-tracking branch 'origin/stable'
Merge local `node_health_check` into `master`
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add rabbitmq_jms_client to component list
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add rabbitmq_jms_client to component list
Merge pull request #873 from rabbitmq/rabbitmq-server-612
use the default_bind bind type
Merge branch 'binarin-rabbitmq-server-818' into stable
Merge branch 'binarin-rabbitmq-server-818' into stable
Run client helper tear down steps before broker's
remove stale comment
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Make `rabbit_health_check` completely node-local
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add `node_health_check` test suite
Reuse timeout/error logic for `node_health_check`
Default timeouts: fix global/add per-command
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add RabbitMQ JMS client to components
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add RabbitMQ JMS client to components
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Set scheduler bindings in rabbitmq-env.bat for windows rename SCHEDULING to SCHEDULER in line with erlang documentation
Merge branch 'stable'
Merge branch 'rabbitmq-management-247' into stable
Wording
Amend help message to reflect the rates
Renaming
Add help messages for VM metrics
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-fix-join-cluster-when-already-member' into stable
Merge branch 'binarin-rabbitmq-server-fix-join-cluster-when-already-member' into stable
Wording
Wording
Merge branch 'rabbitmq-server-fix-join-cluster-when-already-member' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-fix-join-cluster-when-already-member
Merge branch 'rabbitmq-server-fix-join-cluster-when-already-member' of https://github.com/binarin/rabbitmq-server into binarin-rabbitmq-server-fix-join-cluster-when-already-member
Merge branch 'stable'
Merge branch 'rabbitmq-management-245' into stable
Merge branch 'stable'
Handle paths with spaces on disk volumes with 8.3 name creation disabled
Merge pull request #882 from rabbitmq/rabbitmq-server-859
Handle paths with spaces on disk volumes with 8.3 name creation disabled
Merge branch 'stable'
Test against a few more versions
Merge branch 'stable'
Merge pull request #90 from rabbitmq/common_test
remove R16 from travis configuration
Avoid using atoms for temporary ETS tables
Move to common test
Merge branch 'stable'
allow certificate password to be overriden add ctp_port_mqtt_tls
Merge branch 'stable'
Typo
Ignore rabbitmq-plugins
Rename
Make sure mix deps.get Running dependency resolution All dependencies up to date mix deps.compile mix escript.build Compiling 65 files (.ex) Generated rabbitmqctl app Generated escript rabbitmqctl with MIX_ENV=dev rm -f rabbitmq-plugins ln -s rabbitmqctl rabbitmq-plugins works from scratch
Update README.md
Improve a couple of error atoms
Merge branch 'master' into rabbitmq-cli-83
Squash a few compilation warnings
Merge branch 'stable'
Bump (c) year
Merge branch 'stable'
Switch to a more standard README
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-lager-internal-sink-overhead'
Merge branch 'rabbitmq-server-lager-internal-sink-overhead' of https://github.com/binarin/rabbitmq-server into binarin-rabbitmq-server-lager-internal-sink-overhead
Merge pull request #855 from rabbitmq/rabbitmq-server-839
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #877 from rabbitmq/rabbitmq-management-244
Merge pull request #116 from rabbitmq/rabbitmq-management-244
Test against 19.0 on Travis
Generate STOMP ports in broker config for CT tests
Improve logging performance
Use rabbit_misc to parse GC stats, supporting maps in R19
Use rabbit_misc to parse GC stats, supporting maps in R19
Merge branch 'stable'
rate_per_second/3 is no longer used
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Clarify
Include metrics for the time it takes to obtain a file handle
Merge branch 'stable'
Merge branch 'stable'
Commit Debian and RPM change logs
Travis CI: Test against Erlang 18.3 and 19.0
exchange_SUITE: Increase timetrap to 5 minutes
Only use new non-builtin types in master
No need to forward-declare tls_atom_version() type
Only use new non-builtin types in master
HelpersTest uses distribution and shouldn't be run concurrently
Merge branch 'stable'
Fix testsuite build on Erlang R16B03 by using macros for old builtin types
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Travis CI: Import branch management from rabbitmq-shovel
Travis CI: Test against Erlang 18.3 and 19.0
Travis CI: Do not set CT_OPTS, it's handled by rabbitmq-build.mk
Use CT_OPTS from rabbitmq-build.mk
Use CT_OPTS from rabbitmq-build.mk
Travis CI: Do not set CT_OPTS, it's handled by rabbitmq-build.mk
rabbitmq-build.mk: Centralize common CT_OPTS flags
system_SUITE: Set importance on all common_test messages
Travis CI: Turn off most messages from the testsuite
Merge branch 'stable'
system_SUITE: Remove two messages which are not that useful
Travis CI: Turn off error_logger messages
Travis CI: Test against Erlang 18.3 and 19.0
Travis CI: Import branch management from rabbitmq-shovel
Travis CI: Test against Erlang 18.3 and 19.0
Fix build on Erlang R16B03 by using macros for old builtin types
Fix build on Erlang R16B03 by adding macros for old builtin types
Merge branch 'stable'
Building on R16B03-1 is no longer supported (running is)
Merge branch 'stable'
Filter out rabbitmq_test as a dependency
Tune scheduling bind flags for Erlang VM
Filter out rabbitmq_test as a dependency
Merge branch 'stable'
Merge branch 'stable'
Move set_partition_handling_mode_globally/2 and set_partition_handling_mode/3 to broker helpers
These are moved to rabbit_ct_broker_helpers
{allow,block}_traffic_between/2 are moved to rabbit_ct_broker_helpers
Move block_traffic_between/2, allow_traffic_between/2 from partition_SUITE
Merge branch 'stable'
Merge branch 'stable'
Move dist_proxy helpers from partitions_SUITE
dist_proxy helpers moved to rabbit_ct_broker_helpers
dist_proxy helpers moved to rabbit_ct_broker_helpers
Move dist_proxy helpers from partitions_SUITE
Missing export
Introduce rabbit_ct_client_helpers:open_unmanaged_connection/3
Merge branch 'stable'
Travis CI: Use "if/then" instead of "cmd && cmd" for conditional steps
Travis CI: Fix the `$GROUP` env. var. matrix
Travis CI: And fix another syntax error...
Travis CI: Fix stupid syntax error
Hardcode init-system-helpers dependency to be Ubuntu 14.04 (or later)-compatible
Update Uploaders list
Travis CI: Lower verbosity of common_test
Travis CI: Import Git branch handdling from rabbitmq-shovel
Don't spew stacktrace on join when already member
Report join_cluster errors more thoroughly
Merge branch 'stable'
rabbit_ct_client_helpers: Lower importance of logged messages
Merge branch 'stable'
rabbit_ct_helpers: Lower importance of logged messages
Use `rand` directly in master because we require Erlang 18.3
Use `rand` directly in master because we require Erlang 18.3
Merge branch 'stable'
Merge pull request #239 from rabbitmq/rabbitmq-management-825
Merge pull request #866 from rabbitmq/rabbitmq-management-825
Clarify
Merge branch 'stable'
Merge pull request #51 from rabbitmq/rabbitmq-auth-backend-ldap-48
Include metrics for the time it takes to obtain a file handle
Include metrics for the time it takes to obtain a file handle
Treat noSuchObject responses as 'false` during 'or' and 'and' clause evaluations
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #232 from rabbitmq/rabbitmq-management-211
Merge pull request #107 from rabbitmq/rabbitmq-management-211
Merge pull request #858 from rabbitmq/rabbitmq-management-211
Merge branch 'stable'
Merge pull request #86 from rabbitmq/rabbitmq-server-860
Use the new -spec format
Git: Ignore `xrefr`
Merge branch 'stable'
Merge pull request #16 from rabbitmq/rabbitmq-server-860
Wording
Use the new `rand_compat` module to transition from `random` to `rand`
Git: Ignore `xrefr`
Use `rand` directly in master because we require Erlang 18.3
Merge branch 'stable'
Merge pull request #19 from rabbitmq/rabbitmq-server-860
Use the new `rand_compat` module to transition from `random` to `rand`
Git: Ignore `xrefr`
Merge branch 'stable'
Merge pull request #87 from rabbitmq/rabbitmq-server-860
Use the new -spec format
Git: Ignore `xrefr`
Use `rand` directly in master because we require Erlang 18.3
Merge branch 'stable'
Merge pull request #238 from rabbitmq/rabbitmq-server-860
Use the new `rand_compat` module to transition from `random` to `rand`
Git: Ignore `xrefr`
Use `rand` directly in master because we require Erlang 18.3
Display reductions graph on individual queue pages
Merge branch 'stable'
Merge pull request #36 from rabbitmq/rabbitmq-server-860
Use the new `rand_compat` module to transition from `random` to `rand`
Git: Ignore `xrefr`
Report reductions and garbage collection options in channel and connection processes
Report reductions and garbage collection options in queue processes
Display reductions graph on individual channel pages
Merge branch 'stable'
Merge pull request #23 from rabbitmq/rabbitmq-server-860
Use the new `rand_compat` module to transition from `random` to `rand`
Git: Ignore `xrefr`
Use `rand` directly in master because we require Erlang 18.3
Merge branch 'stable'
Use the new `rand_compat` module to transition from `random` to `rand`
Merge branch 'stable'
Merge pull request #64 from rabbitmq/rabbitmq-server-860
Use the new -spec format
rabbit_ct_client_helpers: Style
Display reductions graph on individual connection pages
Merge branch 'stable'
Merge pull request #50 from rabbitmq/rabbitmq-auth-backend-ldap-49
Git: Ignore `xrefr`
ldap_seed => rabbit_ldap_seed
Merge branch 'stable'
Merge pull request #30 from rabbitmq/rabbitmq-server-860
Make sure to run apt-get update first
Use the new -spec format
Git: Ignore `xrefr`
Use `rand` directly in master because we require Erlang 18.3
Merge branch 'stable'
Use the new -spec format
setup openldap as part of vagrant provisioning seed openldap as part of the test run
Use `rand` directly in master because we require Erlang 18.3
Fix a few errors in -spec which crept in during the merge of stable
move to common test
Merge branch 'stable'
Show channel reductions and GC options
Change header for reductions from "since start" to "per second"
Display GC and reductions on connection page
Merge pull request #861 from rabbitmq/rabbitmq-server-860
Merge pull request #111 from rabbitmq/rabbitmq-server-860
Merge branch 'stable' into rabbitmq-server-860
Ignore debug/*
Merge pull request #17 from rabbitmq/rabbitmq-management-208
Merge pull request #229 from rabbitmq/rabbitmq-management-208
Report GC and context switches stats in node_stats
Display GC statistics on node page
Use the new `rand_compat` module to transition from `random` to `rand`
Use the new -spec format
Git: Ignore `xrefr`
rand_compat: New module to transition from `random` to `rand`
Use the new -spec format
Merge pull request #865 from rabbitmq/rabbitmq-server-863
Merge pull request #113 from rabbitmq/rabbitmq-server-863
Set rabbit.slave_wait_timeout back to 15s at the end of this test
rabbit_ct_broker_helpers: Fix a typo in `io:forma`
Git: Ignore `xrefr`
Test for stop pending slaves
Ensure old incarnations of slaves are stopped before new ones start
Include slave_pids_pending_shutdown on amqqueue record
Merge branch 'stable'
Update README.md
Update README.md
Merge pull request #857 from rabbitmq/rabbitmq-server-802
Fix tests cleanup
Merge branch 'stable' into rabbitmq-server-802
Re-enable more tests
Restore invoke clause
Merge branch 'stable'
Merge pull request #862 from rabbitmq/rabbitmq-server-854
Use a separate connection per test
Revert "Add rabbitmq [server] dependency"
Be more lenient when deleting dying client entries
Eliminate several warnings
Add rabbitmq [server] dependency
Merge branch 'stable' into rabbitmq-server-839
Ignore *.coverdata files
Merge branch 'stable'
Make amqp_connection:close/4 public
Merge branch 'stable'
Fix compile error with Erlang OTP 19
Merge pull request #63 from dsrosario/erlang_otp_19
Fix compile error with Erlang OTP 19
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'rabbitmq-web-mqtt-12' into stable
Merge branch 'rabbitmq-web-mqtt-12' into stable
gitignore logs/
Naming and dependencies
Merge branch 'stable'
exchange_SUITE: Remove debugging printf
Move to common_tests
Enable generation of mqtt and web-mqtt ports
Avoid index reset when publisher confirms are pending
Merge branch 'move-to-common_test' into stable
Switch testsuite to common_test
Switch test suite to Common Test, fixes #233
Merge branch 'stable'
rabbit_ct_broker_helpers: Allow to start a broker without plugins
rabbit_ct_broker_helpers: New helpers to change parameters and active plugins
rabbit_ct_broker_helpers: Add node_uri() to format the URI for a given node
rabbit_ct_helpers: Rename config_to_testcase_name() to testcase_absname()
Travis CI: Bring latest changes from rabbitmq-shovel
Tests for 802 issues and related race conditions
Merge branch 'stable'
Merge branch 'rabbitmq-trust-store-34' into stable
Correct a typo
Validate the peer in a presented certificate chain
Tests for command modules
Merge branch 'stable'
Typo
Merge branch 'stable'
Update README.md
Plugins command tests
Tests for list plugins command
tests for list plugins command
Plugin management commands
Aliases in behaviour. List plugins command
Make task to build plugins file
Select command scope by namespace
Example plugins command
Removed scopes from command behaviour
Load commands from load path. Specify scope in application config by file name
Use scopes and separate Mix projects to generate escripts
Skip existing channels in list_channels test
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #18 from rabbitmq/common_test
update travis config
Merge pull request #24 from rabbitmq/common_test
Applying policies to exchanges is sufficient in this suite
Switch test suite to Common Test
Introduce parameter management helpers
Merge branch 'stable'
terminate/2 now returns ok
Not really probabilistic
Use a separate exchange per test
Merge pull request #17 from rabbitmq/common_test
remove some unused code
Erase index on crash recovery for any backing queue
Merge pull request #18 from fenollp/patch-1
Switch test suite to Common Test
Merge pull request #853 from rabbitmq/rabbitmq-server-852
Include rabbitmq_top into server distribution
Merge branch 'stable'
Merge pull request #33 from rabbitmq/rabbitmq-trust-store-31
Don't assume at least 1 certificate was deleted
Switch test suite to Common Test
Function to list loaded certs
Use separate index to store dying clients file offsets
Merge branch 'stable'
Merge branch 'stable'
Ignore channel closure return value entirely
List amqp_client in DEPS, not just TEST_DEPS
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #7 from rabbitmq/common_test
Switch test suite to Common Test
Connection and channel closure can return 'closing' so handle it
Introduce open_connection_and_channel/1
Priority queues: retrieve max priority from state in invoke
Update README.md
Begin migration to Common Test
Merge branch 'stable'
Merge pull request #32 from rabbitmq/rabbitmq-trust-store-27
Cosmetics
handle invalid and badly formatted certificatates  - add logging
Merge branch 'stable'
change the use of 'Probabilistic'
rabbit_ct_broker_helpers: Run `make test-dist` before starting nodes
Further clarity
Correct the description of hashing distribution
Merge branch 'stable'
Merge pull request #30 from rabbitmq/rabbitmq-trust-store-29
Move to common test
Merge pull request #22 from rabbitmq/common_test
update travis config
update travis config
Switch test suite to Common Test
rabbit_ct_broker_helpers: Allow testsuite to define extra TCP ports
put eunit reference back
Merge pull request #13 from rabbitmq/common_test
merge
remove eunit include
Merge branch 'stable'
Introduce rabbit_ct_client_helpers:open_channel/1
Switch test suite to Common Test
Merge branch 'stable'
Gracefully handle cases when logging exchange does not exist
Merge branch 'stable'
Merge pull request #104 from rabbitmq/rabbitmq-server-826
Introduce rabbit_amqqueue:pid_of/{1, 2}
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
make run-tls-broker: Fix certificates path on Windows
make run-tls-broker: Honor server's cipher order
Merge branch 'stable'
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
main.js: Use arbitrary options as query string parameters
sammy.js: Remove execution bit on the files
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Bounded OTP worker timeout
Set bounded timeout for OTP workers
Use bound OTP workers timeouts
Merge pull request #62 from rabbitmq/rabbitmq-server-541
Merge pull request #11 from rabbitmq/rabbitmq-server-541
Merge pull request #11 from rabbitmq/rabbitmq-server-541
Merge pull request #14 from rabbitmq/rabbitmq-server-541
Merge pull request #85 from rabbitmq/rabbitmq-server-541
Merge pull request #15 from rabbitmq/rabbitmq-server-541
Merge pull request #85 from rabbitmq/rabbitmq-server-541
Merge pull request #231 from rabbitmq/rabbitmq-server-541
Merge pull request #34 from rabbitmq/rabbitmq-server-541
Merge pull request #29 from rabbitmq/rabbitmq-server-541
Merge pull request #61 from rabbitmq/rabbitmq-server-541
Merge pull request #846 from rabbitmq/rabbitmq-server-541
Merge pull request #106 from rabbitmq/rabbitmq-server-541
Merge pull request #12 from rabbitmq/rabbitmq-top-10
Merge pull request #230 from rabbitmq/rabbitmq-top-10
Merge branch 'rabbitmq-top-11'
Use bound OTP workers timeouts
Bounded OTP worker timeout
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Set bounded timeout for OTP workers
Merge branch 'stable'
Merge pull request #23 from rabbitmq/rabbitmq-event-exchange-22
main.js: Use arbitrary options as query string parameters
top.js: Do not format query parameter manually
Switch from webmachine to cowboy
sammy.js: Remove execution bit on the files
migrate to common_test
Merge branch 'stable'
Introduce rabbit_ct_client_helpers:open_unmanaged_connection/1
Merge branch 'stable'
Merge branch 'stable'
priority_queue_SUITE: Use the new open_connection_and_channel() helper
rabbit_ct_client_helpers: New helpers to open connections
Merge branch 'stable'
Testsuite: Do not stop amqp_client during teardown
Merge branch 'stable'
Merge pull request #843 from rabbitmq/rabbitmq-server-837
Inline
Merge pull request #79 from rabbitmq/rabbitmq-cli-69
Assert that messages were purged; don't assume 0 messages were deleted
Merge branch 'stable'
Merge branch 'rabbitmq-server-687' into stable
Merge pull request #14 from rabbitmq/move-to-common_test
Testsuite: Adapt to the plugins-related changes in rabbit_ct_broker_helpers
Merge branch 'stable'
rabbit_ct_broker_helpers: Get rid of the `plugins` parameter
Merge branch 'stable'
Switch testsuite to common_test
Travis CI: Avoid the GitHub API
Merge branch 'stable'
Travis CI: Improve how we recreate missing branches
Unused const
Merge pull request #80 from rabbitmq/clean_up_duplicate_parse_nodes
Add tests for order of messages within each priority queue
A few Helpers.parse_node calls are no longer necessary
Do not run on_node_down
Purge queue command
Merge branch 'stable'
Travis CI: Bring latest changes from rabbitmq-common
Merge branch 'stable'
rabbit_ct_broker_helpers: Create plugins' .ez files before starting broker
rabbit_ct_broker_helpers: Start broker from `current_srcdir`
rabbit_ct_helpers: Add `current_srcdir` parameter
Restore original order in batch publish messages
Move cleanup to prep_stop
Merge branch 'stable'
Merge pull request #228 from rabbitmq/rabbitmq-management-225
Emit a warning on Python < 2.7.9 is used w/ HTTPS
Mention 2.7.9 in this message
Partially re-enable `rabbitmqadmin` HTTPS support for Python < 2.7.9
Merge branch 'stable'
Support 1.4.7; RJMS_VERSION is no longer used
Merge pull request #223 from rabbitmq/rabbitmq-management-221
Fix typo
Namespace commands, fixes #74
Normalize node names before passing them to Command.run/2
Merge branch 'stable'
Merge pull request #222 from rabbitmq/rabbitmq-management-221
Merge branch 'stable'
Merge pull request #77 from rabbitmq/fix-typo-in-node-name
Merge pull request #835 from rabbitmq/rabbitmq-server-834
Fix typo in node name
Simplify
Significantly bump max restarts intensity for worker_pool_sup, fixes #834
Force configurable backlog size
Merge branch 'stable'
Correct doc typo
Merge branch 'stable'
Display ETS memory in bytes instead of words
Merge pull request #75 from rabbitmq/rabbitmq-cli-70
Normalize node name
Restore original cluster name
Merge branch 'master' into rabbitmq-cli-70
Normalize node names in sync_queue and cancel_sync_queue
Merge pull request #72 from rabbitmq/rabbitmq-cli-67
set_cluster_name
Merge branch 'master' into rabbitmq-cli-67
RabbitMQ.CLI.RabbitMQCtl => RabbitMQ.CLI.Ctl, references #74
More renaming, references #74
Missing file for the previous commit
Namespace more modules under RabbitMQ.CLI, part of #74
Adapt to master
Merge branch 'master' into rabbitmq-cli-67
Move start_distribution into RabbitMQ.CLI.Distribution
Merge branch 'rabbitmq-cli-71'
Squash a warning
0 arity start_distribution
Merge branch 'stable'
Merge pull request #831 from binarin/rabbitmq-server-ocf-bashisms
Fix bashisms in OCF HA script
Dynamically select distribution node
Merge branch 'master' into rabbitmq-cli-67
Missing license header
Implement sync_queue and cancel_sync_queue commands
Introduce RabbitCommon.Records
Merge branch 'stable'
Extract rabbit_mirror_queue_misc:sync_queue/1 and cancel_sync_queue/1
Merge branch 'stable'
Support #amqqueue records in rabbit_amqqueue:sync_mirrors/1
Make usage/0 return a string
Merge branch 'stable'
Merge branch 'rabbitmq-server-828' into stable
Merge branch 'stable'
Merge pull request #9 from rabbitmq/rabbitmq-top-8
Sort by amount of memory used by default
Cosmetics
Report ETS tables info
Performance improvements on file_handle_cache
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #220 from rabbitmq/rabbitmq-management-219
Merge pull request #827 from rabbitmq/rabbitmq-management-219
ETS tables memory consumption info
API endpoint to show per-table ETS memory consumption
Merge pull request #819 from binarin/rabbitmq-server-ocf-cluster-status
Update README.md
Update README.md
Merge pull request #21 from swagataroy/swagata/fix-queue-events
Fix compilation error in QueueEvents
Update README.md
Merge branch 'implement-join_cluster'
Clarify what 'target node' is
Merge branch 'stable'
Merge pull request #217 from rabbitmq/rabbitmq-management-216-leak
Clean up old_stats_fine_index
Implement the `join_cluster` command
Improve "Please stop the node with rabbitmqctl stop_app" message
Merge branch 'stable'
Stop match earlier, and added some comments
Compare values only on headers match
Match on types deleted and shortcuts algo
Merge branch 'rabbitmq-server-760'
.gitignore: Ignore Vim swap files
Mix: Make sure we use GNU Make to build RabbitMQ dependencies
Merge branch 'rabbitmq-server-xh-notypeandshortcuts' of https://github.com/sylvainhubsch/rabbitmq-server into rabbitmq-server-xh-notypeandshortcuts
Merge remote-tracking branch 'upstream/master' into rabbitmq-server-xh-notypeandshortcuts
Merge branch 'stable'
Docs correction
Merge branch 'stable'
Brief docs for rabbit_amqqueue_process state record
Merge pull request #822 from rabbitmq/rabbitmq-server-820
Merge pull request #102 from rabbitmq/rabbitmq-server-820
Revert "Switch to Cowboy REST"
Part of rabbitmq/rabbitmq-server#820
Check cluster_status liveness during OCF checks
Fixes #820.
Merge branch 'rabbitmq-cli-63'
merge
Implement wait command
Merge pull request #62 from rabbitmq/rabbitmq-cli-61
Merge branch 'master' into rabbitmq-cli-61
Merge pull request #60 from rabbitmq/rabbitmq-cli-59
Cosmetics
Squash a warning
Merge branch 'stable'
Drop dependency on `rabbit` in Makefile
Merge pull request #4 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #182 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #18 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #15 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #20 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #31 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #754 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge pull request #89 from rabbitmq/rabbitmq-delayed-message-exchange-3
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Implement rotate_logs command
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Squash a warning
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Implement stop command
Merge pull request #58 from rabbitmq/rabbitmq-cli-57
Cosmetics
Implement reset and force_reset commands
Compatibility with master
Segment optimisation for segmented ets backends
Move expiration functions to rabbit_auth_cache
Merge branch 'stable'
Merge branch 'stable'
unit_inbroker_SUITE: Give one hour for the backing queue tests
Merge pull request #53 from rabbitmq/rabbitmq-cli-51
Brush up ListConnectionsCommandTest
Brush up ListChannelsCommandTest
Brush up ListBindingsCommand
Brush up HelpersTest
Brush up HelpCommandTest
Brush up EnvironmentCommandTest
Brush up DeleteVhostCommandTest
Brush up DeleteUserCommandTest
Brush up CommandModulesTest
Merge pull request #100 from rabbitmq/rabbitmq-auth-backend-cache-2
Handle cases where plugins aren't defined in test config
Extract two test helpers
Handle node healthcheck failures
Extract two test helpers
Merge branch 'master' into rabbitmq-cli-51
Merge pull request #56 from rabbitmq/rabbitmq-cli-55
Ditto
Start RabbitMQ before disconnecting
Merge branch 'master' into rabbitmq-cli-55
Merge pull request #54 from rabbitmq/rabbitmq-cli-52
Add missing asserts
Implement start_app and stop_app commands
Merge branch 'master' into rabbitmq-cli-52
Implement the close_connection command
Brush up cluster_status tests
Brush up clear_permissions tests
Brush up clear_parameter tests
Brush up change_password tests
Brush up authenticate_user tests, fix AuthenticateUserCommand#banner
Brush up add_vhost tests
Fix banner of the add_user command
Implement the node_health_check command
Fix license headers in a couple of tests
Brush up command status tests
Move expiration out of gen_server for ets cache backend
Specify plugins as list of atoms
Set plugins as atoms
Specify plugins to start test broker with
Ensure cache backend is loaded
Merge branch 'rabbitmq-cli-48' (again)
Don't depend on the exact wording
fix list_bindings banner function clause error
Update rabbitmq-components.mk
Merge branch 'stable'
Modernize README
Merge branch 'stable'
Include rabbitmq_jms_topic_exchange into RabbitMQ distribution
Merge branch 'stable'
Backport the use of rabbitmq-build.mk from master
Merge branch 'stable'
rabbitmq-build.mk: Backport from the master branch
Merge pull request #42 from rabbitmq/rabbitmq-cli-41
avoid connecting to rabbitmq before executing help command avoid printing a nil banner
rabbit_control_misc: Do not put {bad_argument, _} inside a {error, _} tuple
rabbit_control_misc: Do not put {error, _} inside another {error, _} tuple
config_schema_SUITE: Copy Cuttlefish schema in the testsuite data directory
rabbitmq-build.mk: Copy Erlang.mk default compiler flags
Restore rabbit_log_channel Lager extra sink
This fn should to be public now
Don't fail with undef when printing command usage info with invalid CLI arguments
Cosmetics
Merge branch 'master' into rabbitmq-cli-41
Merge pull request #47 from rabbitmq/rabbitmq-cli-46
Merge pull request #814 from rabbitmq/rabbitmq-server-803
Merge pull request #99 from rabbitmq/rabbitmq-server-803
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Add routing-node-stamp and Objective-C client to components
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Merge branch 'stable'
Merge branch 'stable'
Introduce a make target that updates contributor code of conduct
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
Update CONTRIBUTING.md, add CODE_OF_CONDUCT.md
update documentation to include details of the new command behaviour functions
Upgrade amqqueue record with policy_version
Check return value of clear_policy in the test instead of auxiliary function
Test concurrent application of HA policies
Update policy version on set_policy and use it on update_mirroring
Print full usage on errors
Print help for selected command
Lager extra sink are renamed to `rabbit_log_*`
Lager extra sinks are renamed to `rabbit_log_*`
Skip checking the return value on clear_policy
Merge branch 'stable'
Include rabbitmq_trust_store into RabbitMQ distribution
Merge pull request #45 from rabbitmq/rabbitmq-cli-39
Take update mirroring decision in rabbit_amqqueue_process
add policy_version to amqqueue
merge
Take update mirroring decision in rabbit_amqqueue_process
update status command with new behaviour
Makefile: Add several plugins to TEST_DEPS
Merge pull request #44 from rabbitmq/rabbitmq-cli-43
Cosmetics
Switch testsuite to common_test, part #4
Merge branch 'stable'
Merge branch 'rabbitmq-server-725' into stable
Switch testsuite to common_test, part #3
Switch testsuite to common_test, part #2
Update erlang.mk
Makefile: Add amqp_client and meck to TEST_DEPS
Makefile: Remove rabbitmq_test as a TEST_DEPS
Squash several small testsuites in unit_SUITE and unit_inbroker_SUITE
Switch testsuite to common_test, part #1
rabbit_ct_broker_helpers: New helpers specific to the broker testsuite
make tests: Do not run tests from rabbitmq-test
Basic check for options overlap
Merge branch 'stable'
Merge pull request #813 from rabbitmq/rabbitmq-server-812
Ability to specify switches in commands
Initialise wait_timeout in slave promotion
Update README.md
Merge branch 'stable'
rabbit_ct_helpers: Verify erl_call(1) is available
Travis CI: Erlang 18.3 is now the minimum supported version
Merge pull request #40 from rabbitmq/rabbitmq-cli-32
unused timeout
Server dependency is no longer needed
Cosmetics
Cosmetics
Wording
Clean up
Document RabbitMQ version requirement from now on
Don't assume there's only a limited set of permissions
Cleanup
unused erg
Listing items in parallel
Return Stream from listing commands
Merge branch 'stable'
Merge pull request #792 from rabbitmq/rabbitmq-server-718
packaging: We only use the signing key ID
Deb repository: Use SIGNING_KEY to select the repository signing key
Merge branch 'stable'
Merge branch 'rabbitmq-server-570' into stable
Enable systemd triggers in deb-package
Merge branch 'binarin-rabbitmq-server-parallel-listing'
Merge branch 'rabbitmq-server-parallel-listing' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-parallel-listing
Update README.md
Recommend `mix compile`
Avoid RPC roundtrips while listing items
Merge branch 'rabbitmq-cli-36'
Initial implementations of cluster_status and report command
Merge branch 'rabbitmq-server-parallel-listing' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-parallel-listing
Merge branch 'stable'
Only set TEST_CONFIG_FILE if not set
Merge pull request #97 from gmr/config-override
Dont rely on edoc_lib
Merge branch 'master' of github.com:gmr/rabbitmq-aws
Fix query arg encoding
Only set TEST_CONFIG_FILE if not set
call close_all_connections with rpc
Merge branch 'stable'
Merge pull request #35 from rabbitmq/rabbitmq-cli-31
Merge pull request #806 from rabbitmq/rabbitmq-server-687
Merge branch 'stable' into rabbitmq-cli-31
Cosmetics
Merge branch 'stable'
list parameters test
Merge pull request #805 from rabbitmq/rabbitmq-server-795
Merge branch 'stable' into rabbitmq-server-687
Use Keyword.equal? to compare proplists
Merge pull request #34 from rabbitmq/rabbitmq-cli-33
Merge branch 'stable' into rabbitmq-server-795
add mem_relative usage option to set_disk_free_limit
Merge branch 'stable'
Rename param to vhost
Parameter list and clear commands
Merge branch 'stable'
rabbit_ct_broker_helpers: Add rabbitmqctl_list()
Merge pull request #207 from rabbitmq/rabbitmq-management-206
Don't log table name and interval as a tuple
This fn is meant to be private
Merge branch 'stable'
Merge pull request #43 from rabbitmq/rabbitmq-auth-backend-ldap-3
onelevel => single_level; compile from scratch
Merge branch 'stable' into rabbitmq-auth-backend-ldap-3
Merge pull request #683 from binarin/rabbitmq-server-parallel-listing
Rename param to vhost in broker display commands
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-cached-hipe-compilation' into stable
Naming
Cosmetics
Merge pull request #30 from rabbitmq/rabbitmq-cli-29
Squash a warning
Merge branch 'stable' into rabbitmq-cli-29
Merge pull request #28 from rabbitmq/rabbitmq-cli-18
This sleep is no longer needed
Ditto for list_vhosts
Ditto for list_user_permissions
Infinity? Come on.
Expect standard users in the result set, not the other way around
Makes tests pass 10 times in a row
Use rpc:call/5 in these helpers
Explicitly delete queues in this test
Untangle a few more test inter-dependencies
Don't mess with VM watermark during setup
Reset VM memory watermark during setup and tear down
Don't assume connections are in a particular state
Cancel consumers at the end of the test
Correctly delete queues
Ditto
Depend less on node state
Ensure there are actually no queues
Make this test less dependent on node state
Make this test depend less on node state
Add a helper that closes all connections to a node
Don't use infinite timeouts; enable confirms on temp channels
rabbit_ct_broker: Add cover_work_factor() stub function
rabbit_ct_broker_helpers: Add stop_node_after() and kill_node_after()
Made all timeout errors return timeout in seconds
Update README.md
5K queues seems sufficient here
This test doesn't need to publish any messages
This timeout should be in seconds
Squash a couple of warnings
Use publisher confirms
Allow caching HiPE-compilation results
Make the test suite a bit more robust
Add a missing import
Squash a few compilation warnings
Merge branch 'stable'
Formatting
Merge pull request #80 from tiagodeoliveira/unnecessary_user_login_check
Formatting
Merge pull request #80 from tiagodeoliveira/unnecessary_user_login_check
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Support for type-specific exchange info
Select type specific info items
Support for type-specific exchange info
Stub for type specific exchange info
Display number of delayed messages
Stub for type specific exchange info
Stub for type specific exchange info
Stub for type specific exchange info
Merge branch 'stable'
Update README.md
Remove rebar3, etc, not needed
update travis config
Dont crash on startup when region cant be loaded
Travis updates
Get the build/test working
WIP first change after renaming all the things
Update rebar3 & config for hex
Fix the packaging info
Update the tagline
Add minimal API documentation to the README
Merge branch 'stable' into rabbitmq-server-795
Increase coverage to include handle_call/3
Update information about the ordering precedence
Implement the full request logic
Return the parsed expiration timestamp
Add another error response format
Renamed "param" to "vhost"
Merge pull request #56 from tiagodeoliveira/access_user_internal_information
Fix tests
Mention consumerinfoitems in usage
More broker display tests
Connection test show vhost
List connections command test
List excahnges command test
RpcStream tests
wip. testing queues command
list_* commands
Connection returns user internal info. It will allows the client connection to return internal user information that is delivered by direct connection.
Mention full ets cache backend
Commit package release notes for 3.6.2
Update README.md
Update README.md
rabbit_auth_cache behaviour
Use max priority for higher priorities when returning backing queue state
Merge branch 'stable'
Merge pull request #50 from rabbitmq/rabbitmq-erlang-client-48
ci/test.sh: Take Ranch from the Docker image
Merge branch 'stable'
Remove systemd dependency on syslog target
Garbage collected cache implementation with minimal gen_server use
Merge pull request #804 from lemenkov/remove_systemd_bogus_dependency
Using internal user from amqp client
Avoid RPC roundtrips while listing items
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Avoid RPC roundtrips in list commands
Merge branch 'stable'
New component: rabbitmq_trust_store
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Remove systemd dependency on syslog target
Update README.md
Merge pull request #26 from rabbitmq/rabbitmq-trust-store-23
README update
Merge pull request #25 from rabbitmq/rabbitmq-trust-store-23
ensure that a replaced certificate with the same name is picked up     - add test for replacing cert with same name     - disable use of ssl session cache     - gitignore     - document use of reuse_sessions
Increate httpc_aws test coverage
Unused functions/code paths
Merge branch 'stable'
Link to firehose docs
Correctly handle single node XML as well
Merge pull request #798 from rabbitmq/rabbitmq-server-546
Merge pull request #96 from rabbitmq/rabbitmq-server-546
Merge pull request #54 from rabbitmq/rabbitmq-server-546
Merge pull request #10 from rabbitmq/rabbitmq-server-546
Merge pull request #84 from rabbitmq/rabbitmq-server-546
Merge pull request #11 from rabbitmq/rabbitmq-server-546
Merge pull request #204 from rabbitmq/rabbitmq-server-546
Merge pull request #33 from rabbitmq/rabbitmq-server-546
Merge pull request #20 from rabbitmq/rabbitmq-server-546
Increase JSON conversation coverage
Increase test coverage
Ignore ContentType in this function
See if we can get 18.3 coverage
Increase test coverage and documentation of httpc_aws
Move tests from binary() strings to string()s
Use httpc_aws_json:decode/1
Remove binary conversion
Break out JSON parsing
Added experimental section
Support separate authn and authz backends
Added README
Functional tests for auth backend
Don't use time_compat in tests either
Update rabbitmq-components.mk
Specify TTL in put
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge pull request #24 from rabbitmq/rabbitmq-trust-store-7
Bump rabbitmq-components.mk
Bump rabbitmq-components.mk
Basic cache tests
test refactoring:         - improve naming         - remove trailing whitespace         - add parens to make logic more explicit         - shorten long lines         - switch to using a proplist getter instead of lists:keyfind
Run travis tests for 18.3 only
Merge pull request #1 from rabbitmq/rabbitmq-server-546
Merge pull request #61 from rabbitmq/rabbitmq-server-546
Merge pull request #10 from rabbitmq/rabbitmq-server-546
Merge pull request #15 from rabbitmq/rabbitmq-server-546
Merge pull request #7 from rabbitmq/rabbitmq-server-546
Merge pull request #8 from rabbitmq/rabbitmq-server-546
Merge pull request #16 from rabbitmq/rabbitmq-server-546
Merge pull request #81 from rabbitmq/rabbitmq-server-546
Merge pull request #10 from rabbitmq/rabbitmq-server-546
Merge pull request #20 from rabbitmq/rabbitmq-server-546
Merge pull request #5 from rabbitmq/rabbitmq-server-546
Merge pull request #44 from rabbitmq/rabbitmq-server-546
Merge pull request #34 from rabbitmq/rabbitmq-server-546
Use erlang 18.3 only in travis
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update rabbitmq-components.mk
List amqp_client in DEPS, not just TEST_DEPS
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge branch 'stable'
New component: rabbitmq_jms_topic_exchange
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
package.mk is no longer needed
Merge branch 'master' into rabbitmq-delayed-message-exchange-3
Stubs for type specific exchange info
Update README.md
Rename LICENSE-MPL-rabbitmq-jms-topic-exchange to LICENSE
Don't use time_compat
Only test against Erlang 18.3
WIP improvements in content parsing logic
Add query_string(undefined) back
Fix XML parser for nested docs
Start httpc_aws tests
API updates
IDE config updates
Reflect the change in typing/records
Revert the encoding method
Update the hrl, streamline, add more typing
Trivial test updates
Update rebar config with more things
Change headers to be all lowercase
Use http_uri:encode/1
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge branch 'master' into rabbitmq-server-546
Merge pull request #3 from rabbitmq/rabbitmq_3_6_x_build_system
Merge branch 'stable'
Merge pull request #801 from binarin/rabbitmq-server-systemd-example-wants-and-after
init.
Migrate from legacy (package.mk) build system to erlang.mk
Add explicit epmd dependency in systemd example
Merge branch 'stable'
Merge branch 'rabbitmq-server-auth-backend-http-25' into stable
Cosmetics
Translate tabs to spaces
fix for undefined address
update README
pass client ip address in vhost path
Fix the doc for httpc_aws_xml
Add auto-endpoint creation, response parsing
Dont overwrite pre-specified headers
Add a simple XML parser
Add case-insensitive sorting of request headers
Initial implementation of the httpc_aws:request method
Move security_credentials() to the include
Fix application startup
Fix signing header sorting to be case insensitive
Move to calendar:local_time_to_universal_time_dst/1
IntelliJ configuration settings
Remove the initial tests for now
Updated application cleanup and base app
AWS Request Signing module
Minor cleanup of rebar config
Add v4request record/type
Add build_query_string/1 method
Merge branch 'stable'
Merge branch 'rabbitmq-event-exchange-12' into stable (again)
Naming
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'rabbitmq-event-exchange-9' into stable
Merge branch 'rabbitmq-event-exchange-12' into stable
Use AckRequired in drop_one as priority queues return tuples {Priority, AckTag}
Merge branch 'stable'
Merge pull request #797 from rabbitmq/rabbitmq-server-795
Merge branch 'stable'
Merge pull request #794 from lefremova/stable
No tim_compat anymore
Limit priority to maximum during synchronisation
add vhost information to binding and policy events
add high resolution timestamp to event message headers
Merge branch 'stable'
make source-dist: Exclude default $(PACKAGES_DIR)
Merge branch 'stable'
(c) year
Private attributes usage in rabbitmq script
Merge branch 'stable'
Wording
Merge branch 'rabbitmq-management-198' into stable
Make search scope for nested groups configurable
Testing and refactoring
Merge branch 'stable'
Merge pull request #94 from rabbitmq/rabbitmq-common-93
rabbitmq-run.mk: Do not use ?= in target-specific variable assignments
Recursive search for parent groups
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Use erlang 18.3 only in travis
Bump minimal erlang version to 18.3
Bump minimal erlang version to 18.3
Do not use time_compat
Do not use time_compat
Do not use time_compat
Do not use time_compat
Do not use time_compat
Bump required erlang version to 18.3
Removing unnecessary check_user_login that executes authentication method twice.
Matching wait
Improve tests timing
Merge branch 'stable'
Line feeds after connection logs
Removed debug logs. Set timestamp to 15 sec.
Check process status with timeout
Delete connection and channel stats indexes
Channel and connection stats GC
Merge branch 'stable'
rabbitmq-run.mk: Replace $(file) with printf + $(subst)
Merge branch 'stable'
rabbitmq-run.mk: Set loopback_users to [] in `make run-broker`
Merge pull request #202 from binarin/rabbitmq-management-lager-newlines
Prevent `~n` from appearing in logs
Merge pull request #786 from binarin/rabbitmq-server-scary-plugins-warning
Linee break in command specific usage
Merge pull request #26 from rabbitmq/rabbitmq-cli-25
Don't scare ops with empty list of failed plugins
Merge pull request #22 from rabbitmq/rabbitmq-cli-21
Merge pull request #20 from rabbitmq/experimental
Parse commands internally in some print_standard_message commands
Re-parse the command on bad option in standard messages
Merge pull request #24 from rabbitmq/rabbitmq-cli-23
Fix clear_permissions default option merge so it doesn't suppress quiet flag
Add administrator tag to guest user fixture to fix flaky spec.
Merge pull request #199 from rabbitmq/rabbitmq-management-68
ackmode documentation
Modified ACK modes in "Get messages"
Print usage on incorrect command behaviour
Merge branch 'stable'
rabbitmq-run.mk: Add "run-tls-broker" target to start a TLS-enabled broker
Merge branch 'stable'
Merge pull request #9 from rabbitmq/rabbitmq-web-mqtt-7
Merge branch 'stable'
Merge branch 'rabbitmq-management-174' into stable
Naming
Merge branch 'stable'
Merge branch 'rabbitmq-management-193' into stable
Merge branch 'rabbitmq-trust-store-9'
Merge branch 'rabbitmq-trust-store-8'
Merge branch 'rabbitmq-trust-store-12'
Merge branch 'stable'
rabbit_ct_broker_helpers: New helpers to set common HA policies
rabbit_ct_broker_helpers: New function to restart an entire node
rabbit_ct_broker_helpers: Use control_action/{2,3,4} from rabbit_test_util
rabbit_ct_broker_helpers: New function to cluster a specific set of nodes
rabbit_misc: New atom_to_binary/1 function
Merge branch 'stable'
rabbit_ct_client_helpers: New function to publish/consume messages
move ranch listener cleanup to prep_stop
Cleanup ranch listener on application stop
Always report sockets_used
rabbit_ct_broker_helpers: Work around OS X behaviour in get_connection_pids()
correct naming according to OTP documentation
handle code_change better
rename whitelisted_ to is_whitelisted
ensure binary directory paths are handled
Merge branch 'stable'
rabbit_ct_client_helpers: New close_channels_and_connection/2 function
rabbit_ct_client_helpers: Fix recursion in close_everything()
Merge branch 'stable'
rabbit_ct_broker_helpers: Allow the caller to specify the node names
rabbit_ct_broker_helpers: Sort NodeConfigs based on their index
rabbit_ct_broker_helpers: New set_node_config/3 function
rabbitmq-run.mk: Allow to override the nodename in paths
Merge branch 'stable'
Merge pull request #200 from rabbitmq/rabbitmq-management-123
Fixing tests
Restart the children using the order provided to the supervisor
add X-UA-Compatible
Some refactorings
Experimental
Update README to reflect new command behavior
Add run to command behaviour
Refactor module command execution in main module
WIP: Change module-specific command name to to run/2
Merge branch 'stable'
Merge branch 'rabbitmq-management-196' into stable
Squash unused variable warning in list_users
Add CommandBehaviour behavior to all command modules
Create command behaviour
Move error_check helper method to test_helpers
Merge unaliased options into parser output (so they can trigger a validation failure later)
Add check for valid flags to main module
Add short flags/0 function to all modules
Introduce fine old_stats index and refactor to reduce number of reductions
rabbitmq_ct_broker_helpers: Split nodes count and cluster flag
Merge branch 'stable'
rabbit_ct_broker_helpers: Include rabbit.hrl using -include()
Merge branch 'stable'
rabbit_ct_client_helpers: Open connections and channels on demand
Add suppressable info message to authenticate_user command
Add suppressable info message to change_password_command
Merge pull request #18 from kjnilsson/rabbitmq-trust-store-10
Add suppressable info message to clear_password command
Add suppressable info message to clear_permissions command
Add suppressable info message to add_user command
Move the default refresh interval value to .app file
Add suppressable info message to delete_user command
Add suppressable info message to add_vhost command
Delete duplicate test from rabbitmqctl
Add suppressable info message to delete_vhost command
Add suppressable info messages to list_permissions command
Merge pull request #17 from kjnilsson/rabbitmq-trust-store-11
Replace usages of get_env/1 with get_env/2
Add suppressable info message to list_user_permissions
Add suppressable info message to list_users command
Merge branch 'stable'
Add suppressable info message to list_vhosts command
system_SUITE: Update after the rabbit_ct_* API refinements
Merge branch 'stable'
rabbit_ct_*: Refine API
Merge branch 'stable'
Merge pull request #42 from rabbitmq/rabbitmq-auth-backend-ldap-41
Test against 18.1 through 18.3, too
Wording
Log LDAP connection error with rabbit_log:warning
Wording
Workaround for closing already closed ldap connection
Add suppressable info message to environment command
Add suppressable info to set_parameter command
Add suppressable info to set_permissions command
Add suppressable info message to set_user_tags command
Fix a test pollution issue in list_users test module
Add suppressable info message to set_disk_free_limit command
Add suppressed info string to set_vm_memory_high_watermark
Fix copy-pasta errors in tracing test strings
Add suppressed info message to trace_on command
Fix test bugs in trace_off command
Add quiet-suppressed info message to trace_on, fix testing bugs
Status command prints info string unless suppressed
Merge branch 'stable'
Merge pull request #773 from rabbitmq/rabbitmq-server-772
Merge branch 'stable'
modified the message
warning message during partition
Merge branch 'stable'
Merge branch 'rabbitmq-server-749' into stable
Allow CLI to use short node names
Return all invalid keys in list_vhost
Remove argument count restriction from list_vhosts
Alter usage formatting to handle commands with multiple usage strings
Merge branch 'stable'
Merge pull request #39 from rabbitmq/rabbitmq-auth-backend-ldap-35
Merge branch 'stable'
Merge pull request #31 from rabbitmq/rabbitmq-auth-backend-ldap-12
Merge branch 'stable'
rabbit_ct_broker_helpers: New function to add path to all brokers
rabbit_ct_helpers: Add a function to compute the testcase number
Ignore scrubbing operations for 'false' log level.
Extends scrubbing of bind request credentials to be carried out on all log levels, except 'network_unsafe'.
Merge branch 'stable'
Bumps up default connection worker pool size from 10, to 64.
Merge branch 'stable'
rabbit_ct_client_helpers: Handle the lack of running channel process
Merge branch 'stable'
rabbit_ct_client_helpers: Handle the lack of connection
Merge branch 'stable'
rabbit_ct_broker_helpers: Support a timeout arg to run_on_broker* functions
rabbit_ct_helpers: New testcases/1 functions to get a flat list of tests
Drop ACKs of messages from lost members of the ring
Adds logging test for 'network_unsafe' log option.
Introduces and adds handling of 'network_unsafe' log type option.
Introduces logging tests, and tests for scrubbing bind request credentials in network traffic logs.
Adds functionality to scrub credentials in LDAP network traffic logs, for bind requests.
Merge branch 'stable'
Merge branch 'rabbitmq-auth-backend-http-29' into stable
Merge pull request #11 from rabbitmq/rabbitmq-web-dispatch-10
README edits, grammar, formatting
Describe HTTPS and http_method in readme
Add ssl options to httpc request
Remove content-encoding header from error responses
Merge pull request #90 from rabbitmq/rabbitmq-server-735
Merge branch 'stable'
Merge pull request #31 from rabbitmq/rabbitmq-server-735
Merge pull request #6 from rabbitmq/rabbitmq-server-735
Merge branch 'stable'
Merge pull request #778 from rabbitmq/rabbitmq-server-690
reconfigure ERLANG_HOME during the update
Set broker version requirement
Set broker version requirement
Merge pull request #776 from rabbitmq/rabbitmq-server-735
Merge branch 'stable'
set broker requirements during package gen
Update rabbitmq-components.mk
Merge pull request #59 from rabbitmq/rabbitmq-server-735
Merge pull request #12 from rabbitmq/rabbitmq-server-735
Merge pull request #9 from rabbitmq/rabbitmq-server-735
Merge pull request #83 from rabbitmq/rabbitmq-server-735
Merge pull request #7 from rabbitmq/rabbitmq-server-735
Merge pull request #10 from rabbitmq/rabbitmq-server-735
Merge pull request #15 from rabbitmq/rabbitmq-server-735
Merge pull request #21 from rabbitmq/rabbitmq-server-735
Merge pull request #79 from rabbitmq/rabbitmq-server-735
Merge pull request #15 from rabbitmq/rabbitmq-server-735
Merge pull request #189 from rabbitmq/rabbitmq-server-735
Merge pull request #9 from rabbitmq/rabbitmq-server-735
Merge pull request #32 from rabbitmq/rabbitmq-server-735
Merge pull request #16 from rabbitmq/rabbitmq-server-735
Merge pull request #19 from rabbitmq/rabbitmq-server-735
Merge pull request #4 from rabbitmq/rabbitmq-server-735
Merge pull request #34 from rabbitmq/rabbitmq-server-735
Merge pull request #28 from rabbitmq/rabbitmq-server-735
Stub for broker_version_requirements
Stub for broker_version_requirements
Merge branch 'stable'
Merge branch 'rabbitmq-server-767' into stable
Wording
Merge pull request #33 from rabbitmq/rabbitmq-auth-backend-ldap-32
Updates tag check tests to accept test environment variables as parameters.
Merge branch 'stable'
Merge branch 'rabbitmq-auth-backend-http-7' into stable
Naming
modified the message
Log invalid x-death header as warning
Ignore non-array x-dead header
Use GET by default
Configurable method for http parameters
Move GET to POST of request method
warning message during partition
rabbitmq-run.mk: Create and use a schema dir in $(NODE_TMPDIR)
Correct some test descriptions
Switch add_user to arg count based usage reporting
Switch add_vhost over to arg count based usage reporting
Switch authenticate_user over to arg count usage reporting
Switch change_password over to arg count error reporting
Switch clear password command over to arg count usage reporting
Switch clear_permissions command over to arg count usage reporting
Switch delete_user to arg-count based usage reporting
Switch delete_vhost to arg-count based usage error reporting
Switched environment command to arg count based usage error system
Switch list_permissions to a arg count-based usage error
Switch list_users to arg count-based usage error
Switch list_vhosts to arg count-based usage errors
Remove generic usage from and add arg counts to set_disk_free_limit
Remove generic usage from set_parameter and use arg count error
Remove general usage from set permissions command and use arg count errors
Remove full usage message and use argument count errors in set_user_tags
Remove full usage message from high watermark command and switch it over to arg count errors
Remove full usage message from list_user_permissions
Remove full usage message from trace_on command
Remove full usage message from trace_off command
Removed full usage from status module
Add argument count error reporting to main module.
Use too_many_args error in trace_off command
Use too_many_args error in trace_on command
Separate argument count error codes from bad argument error codes in rabbitmqctl main
Use too many and not enough args return codes in list_user_permissions
Use too many args return in status command
Add too_many_args and not_enough_args to standard codes
Merge branch 'stable'
Merge pull request #771 from rabbitmq/rabbitmq-server-crash-on-damaged-io
Improve notifications about damaged I/O subsystem
Merge pull request #770 from rabbitmq/rabbitmq-server-dont-hardcode-df-path
Don't use hardcoded path to `df`
Merge pull request #765 from rabbitmq/rabbitmq-server-763
Merge branch 'stable'
Merge pull request #51 from rabbitmq/rabbitmq-mqtt-75
Do not create rabbitmq-env.conf file during installation
Merge branch 'stable'
Merge pull request #78 from rabbitmq/rabbitmq-mqtt-77
Update Paho Java git repo location
Regression matching ssl_info ciphersuite format
Merge branch 'stable'
Merge branch 'rabbitmq-mqtt-61' into stable
Merge branch 'stable'
Merge pull request #186 from rabbitmq/rabbitmq-management-185
Set priority of collectors to high
Support 4 number versions
Stub for broker version requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Stub for broker_version_requirements
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #180 from rabbitmq/rabbitmq-auth-backend-ldap-13
Merge pull request #722 from rabbitmq/rabbitmq-auth-backend-ldap-13
Revert redundant nack
Set session_present flag
Tests message redelivery when resuming session
Merge pull request #29 from rabbitmq/rabbitmq-auth-backend-ldap-13
Merge pull request #87 from rabbitmq/rabbitmq-auth-backend-ldap-13
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Merge branch 'stable'
system_SUITE: Do not generate queue names with non-printable chars
Merge branch 'stable'
rabbit_ct_client_helpers: Use -include, not -include_lib
Merge branch 'stable'
Merge branch 'stable'
rabbit_ct_broker_helpers: Add more helpers to handle clusters
Adds tag checks/tests for variable tag queries.
rabbit_ct_client_helpers: New helpers to prepare AMQP connections
Do not move rabbitmq.conf to rabbitmq-env.conf during RPM and DEB install
Merge branch 'stable'
rabbit_ct_broker_helpers: New helpers to work with node configs
rabbit_ct_helpers: Rename merge_app_env* functions
rabbit_ct_broker_helpers: Move AMQP connection preperation...
Merge branch 'stable'
rabbit_ct_broker_helpers: Add helpers to open a connection+channel
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Merge branch 'stable'
Merge pull request #762 from bogdando/bug/1541471
Stop process when rabbit is running but is not connected to master.
Adds tests for AMQP direct connections. Adds tests for variable tag_queries, for direct connections only.
Adds handling of VHost substitution for tag_queries.
Merge pull request #28 from rabbitmq/rabbitmq-auth-backend-ldap-15
Merge branch 'stable'
Merge pull request #723 from rabbitmq/rabbitmq-server-698
Merge branch 'stable' into rabbitmq-auth-backend-ldap-15
Merge pull request #23 from rabbitmq/rabbitmq-auth-backend-ldap-16
Merge branch 'stable'
Merge branch 'stable'
system_SUITE: Use the new rabbit_ct_broker_helpers:get_node_config/3
rabbit_ct_broker_helpers: Add get_node_config/3
Merge branch 'stable'
Merge pull request #585 from rabbitmq/rabbitmq-server-343bis
Merge branch 'stable' into rabbitmq-server-343bis
Merge branch 'stable'
Merge pull request #745 from rabbitmq/rabbitmq-server-744
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-management-41
Add a test case for bogus connections
Merge branch 'stable'
rabbit_policy: Fix case clause for missing vhost
Test tag attribution with more suitable fixtures
Stop match earlier, and added some comments
Compare values only on headers match
DO NOT MERGE: Make tag query tests more like integration/system tests
Merge branch 'stable' into rabbitmq-server-698
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Merge branch 'stable' into rabbitmq-auth-backend-ldap-13
Match on types deleted and shortcuts algo
Merge branch 'stable'
Add RabbitMQ server as a testing dependency for CI
Merge pull request #47 from rabbitmq/rabbitmq-erlang-client-46
Add CI directory with Concourse files
rabbit_policy: Fix transaction return value in udpate_policies()
rabbit_policy: Forward exit signals update_policies() transaction
Merge branch 'stable'
Adapt system_SUITE.erl to the new rabbit_ct_broker_helpers
Move rabbit_ct_broker_helpers to rabbitmq-common
Merge pull request #181 from rabbitmq/rabbitmq-management-161
Cosmetics
Updates multi atrributes formatting to use string:join/2. Updates is_multi_attr_member/2 to use a short-circuit expression.
Adds success and failure tests for handling multiple attributes, using the 'memberOf' attribute.
Updates LDAP 'match' query to carry out a bidirectional match, in case the REQuery returned multiple attributes, i.e. RE strings.
Adds posix test user accounts, 'Carol' and 'Peter'. Adds test user 'Peter' to all test groups.
Adds 'staff' LDAP testing group.
Adds 'memberOf' attribute overlay configuration.
Adds handling of multiple attribute values, and multiple LDAP entries for the 'attribute' query.
Return relative total as 100%
Merge branch 'stable' into rabbitmq-management-161
Add relative memory endpoint
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #45 from rabbitmq/rabbitmq-server-104
Merge pull request #172 from rabbitmq/rabbitmq-server-104
b in an h1 makes no sense
Display connection ID first; use UI space more wisely
Merge branch 'stable' into rabbitmq-server-104
Support intervals that are integers
Merge branch 'stable' into rabbitmq-server-104
Merge branch 'stable'
Merge pull request #86 from rabbitmq/rabbitmq-trust-store-14
Don't fail if the verify_fun is configured; log a warning instead
Drive by change: correct a type spec
Naming
Remove unused line
Merge branch 'stable' into rabbitmq-trust-store-14
Merge branch 'stable'
Merge pull request #748 from rabbitmq/rabbitmq-server-714
Merge branch 'stable'
Merge pull request #85 from binarin/rabbitmq-common-ephemeral-ports-range
Merge pull request #88 from rabbitmq/rabbitmq-server-710
Strip off both LF and CR, cover {queue,exchange}.{bind,unbind}
Add VHost to authorization properties
Support arbitrary AuthProps proplists
New memory endpoint
Refactor the urilib tests to match the rest of the project
Merge pull request #752 from rabbitmq/rabbitmq-server-750
Changed default schema dir to /var/lib/rabbitmq/schema
Merge branch 'stable'
Merge pull request #179 from rabbitmq/rabbitmq-management-177
Display rates mode on the overview page by default
Remove cleanup for 17.5, no gen_server:stop/1
Maybe fix this in 17.5
Additional test coverage
Merge pull request #751 from rabbitmq/rabbitmq-server-750
SCHEMA_DIR set to writable location by default
Refactor fix_verify_fun. Drop support for pre R14 format
Support OTP style verify_fun
Updated components.mk. Added setup/teardown to tests
Test tag attribution by configuring from within the test-suite
Stop deleted GM member when partial partition is detected
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-dead-user-diagnostics' into stable
Wording
Merge branch 'rabbitmq-server-dead-user-diagnostics' of https://github.com/binarin/rabbitmq-server into binarin-rabbitmq-server-dead-user-diagnostics
Merge branch 'stable'
Merge pull request #743 from rabbitmq/rabbitmq-server-742
Merge branch 'stable'
system_SUITE: Adapt to the new multi-nodes support
Merge branch 'stable'
rabbit_ct_helpers: Allow to start a full cluster
Detect missing 'user' process
tests config
Replace rabbit_misc RPC calls in test helper with basic RPC calls
DRY out some tests
tests for named connection
rabbitmqctl set_policy: Format error messages
Use IANA ephemeral port range for ipv6 checks
retrieve connection name
User specified connection name
rabbit_ct_helpers: Return full error in control_action_opts()
Explain
Merge branch 'stable'
merge stable into master
Merge pull request #176 from rabbitmq/rabbitmq-management-157-master
Check mnesia consistency starting from 3.6.2, OTP consistency in older versions
Additional test coverage
Increase test coverage
Doh, that's why the test failed
See if the path changed
Refactor to consistently use the #uri{} record
Implement specs for each function, additional cleanup
Compatibility with 3.6.x
Add CORS support
Naming
Merge pull request #171 from rabbitmq/rabbitmq-management-163
Merge pull request #729 from rabbitmq/rabbitmq-management-163
Merge pull request #83 from rabbitmq/rabbitmq-management-163
Update comment
Merge branch 'master' into rabbitmq-management-163
Merge branch 'master' into rabbitmq-management-163
Merge branch 'master' into rabbitmq-management-163
Provide an example
Merge pull request #58 from rabbitmq/rabbitmq-server-591
Merge pull request #642 from rabbitmq/rabbitmq-server-591
Wording
Delete all relevant stats when channels/queues are closed/deleted
Merge branch 'stable'
Merge pull request #175 from rabbitmq/rabbitmq-management-173
Merge pull request #14 from rabbitmq/rabbitmq-management-173
Wording
Cosmetics
Merge branch 'stable'
rabbit_ct_helpers: Log a message every minute for long-running testsuites
Log development version ignore
Send channel and queue stats to their own collectors to avoid race conditions
Delete all relevant stats when channels/queues are closed/deleted
Versions "" and "0.0.0" always match
Trailing ws
Update comments
Wording
Naming, cosmetics
Naming
Explain
(c) year
Merge branch 'stable'
Cleanup and refactoring
Setup the OTP side of the API
Add erlang.mk support
Headers are unused
Merge branch 'master' into rabbitmq-server-591
Naming
Naming
Naming
Merge branch 'master' into rabbitmq-server-591
Reverted version in app.src
Merge branch 'stable'
Merge pull request #731 from bogdando/bug/1567355
Stop a rabbitmq pacemaker resource when monitor fails
Merge branch 'stable'
Merge pull request #84 from rabbitmq/rabbitmq-server-401
Wording
Wording
Wording
Merge branch 'stable' into rabbitmq-server-401
Show connection name client property as connection name
rabbit_ct_helpers: Add rabbitmqctl helpers
rabbit_ct_helpers: Move unauthorized user creation to amqp_client
rabbit_ct_helpers: Use common_test suite name in the RabbitMQ node name
system_SUITE: Handle the creation of the unauthorized user
Merge branch 'master' into rabbitmq-management-163
Merge branch 'master' into rabbitmq-management-163
Merge branch 'rabbitmq-management-157' into stable
Merge branch 'stable' into rabbitmq-management-157
Merge branch 'stable'
Merge pull request #155 from rabbitmq/rabbitmq-management-75
Merge pull request #72 from rabbitmq/rabbitmq-management-75
Add note about federation plugin to README
Merge pull request #711 from rabbitmq/rabbitmq-server-691
Remove redundant lines
Remove start arguments log
Unquoting and extension trimming in windows scripts
Support extension in advanced.config
Equality operators and trimming extension
Condition ordering to set RABBITMQ_CONFIG_ARG
Strip off trailing .conf/.config using dirname and basename
Remove debug echoes
Support extensions in config files
Merge branch 'master' into rabbitmq-server-691
Merge branch 'stable'
Merge pull request #170 from rabbitmq/rabbitmq-management-166
Merge pull request #726 from rabbitmq/rabbitmq-management-166
Merge pull request #15 from potatosalad/feature-set_parameter
Convert unrecognized return codes to a standardized system
Merge branch 'stable'
Merge pull request #728 from rabbitmq/rabbitmq-server-210
Merge branch 'master' into rabbitmq-server-591
Test exports
Merge branch 'stable' into rabbitmq-management-166
Merge branch 'stable' into rabbitmq-management-166
Save listener socket options in Mnesia
Add socket options to listener information
Add upgrade function adding listener socket options
Override CONF_ENV_FILE with RABBITMQ_CONF_ENV_FILE
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Ignore debug/*
Move rabbit_ct_helpers to rabbitmq-common
Fix gc of indexes
Move rabbit_ct_helpers to rabbitmq-common
Merge branch 'stable'
Update owner of mgmt_db tables
Remove redundant lines
Merge pull request #724 from binarin/rabbitmq-server-ocf-reset-mnesia-overquoting
Fix half-hearted attempt to erase mnesia in OCF RA
Merge branch 'stable'
Log invalid plugins during startup
Add a hack to properly return an empty JSON object for shovel
Add a special value to term_to_json to allow encoding empty JSON objects
Makefile: Enable Surefire reports in Common Test
Implement the set_parameter command.
Add CORS support
Remove start arguments log
Error messages in rabbitmq-plugins
Test `rpc_client`: Add assertions to rpc_correlation_server/2
Unquoting and extension trimming in windows scripts
Merge branch 'stable'
Test `basic_qos`: Run non-parallel and log timing informations
Merge branch 'master' into rabbitmq-server-691
Improve handling of refused authentication
Handle extra edge case of authenticate_user return tuple
Support extension in advanced.config
Use standardized error code for bad info keys in list_vhosts
Check mnesia consistency by negotiating protocol
Ignore OTP version in clustering
Validate plugins before enabling
Add a dummy reference to disk_free_limit context to silence warnings
Make sure context setups always delete the same user they add
Merge branch 'stable'
Merge pull request #715 from binarin/rabbitmq-server-151
Fix exit code implementation so that it actually returns exit codes
Merge branch 'stable'
Merge pull request #81 from binarin/rabbitmq-server-151
Correct missing argument handling for absolute memory watermark command
Return bad argument for relative vm memory high watermark values > 1.0
Disallow units when setting relative VM memory high watermark
Idiomatic changes to set_vm_memory_high_watermark
Squash a warning
Implement unit parsing and memory-relative versions of set_disk_free_limit
Includes VHost to AuthProps.
Merge branch 'stable'
Travis CI: No need to override RABBITMQ_NODENAME anymore
Merge branch 'stable'
rabbit_ct_helpers: Use arbitrary node name and TCP ports
Merge branch 'stable'
rabbitmq-run.mk: Add `start-background-broker` target
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #14 from rabbitmq/rabbitmq-event-exchange-13
Merge pull request #79 from rabbitmq/rabbitmq-event-exchange-13
Merge branch 'stable' into rabbitmq-event-exchange-13
Merge branch 'stable'
Merge pull request #721 from rabbitmq/rabbitmq-server-717
Allow memory-relative disk-free limits greater than 1.0
Look at the http response status code
Working credentials from instance metadata
Work in process on httpc_aws_config:credentials/1
Documentation and API updates
Delete a binding that's no longer used in this test
Merge branch 'stable'
make docs: Force a dependency to `edoc`
Update README.md
Merge pull request #27 from rabbitmq/rabbitmq-server-550
rabbit_ct_helpers: Use lists:keystore/4 to update Config
Merge branch 'stable'
Merge pull request #81 from rabbitmq/rabbitmq-stomp-57
Equality operators and trimming extension
Merge branch 'stable'
Merge pull request #40 from rabbitmq/rabbitmq-erlang-client-39
Merge branch 'stable'
Merge pull request #74 from rabbitmq/rabbitmq-common-73
Condition ordering to set RABBITMQ_CONFIG_ARG
Merge branch 'stable'
Merge pull request #12 from rabbitmq/rabbitmq-web-stomp-53
Merge pull request #56 from rabbitmq/rabbitmq-web-stomp-53
Merge branch 'stable'
Update precedence documentation
Add httpc_aws_config:value/2
Change config_data/1 to public
Drop older erlang versions
Add httpc_aws_config:region and supporting things
Add badges
Strip off trailing .conf/.config using dirname and basename
Add byte conversions to set_disk_free_limit
Update low level frame parser tests
Switch testsuite to common_test
Introduces a configuration setting, rabbitmq_stomp.hide_server_info
code_version: Acquire a lock to protect concurrent reloads
Merge branch 'stable'
Move test TLS certificates creation to rabbitmq-common
Remove -spec
Refactor to remove nested cases
Wording
Properly handle the Websocket protocol header
Change the pure Websocket example to send protocol header
Increase test coverage of existing functions
Guess thread pool size on startup
Guess thread pool size on startup
Exclude vhost from authentication success events (see below)
Add a test for the user.authentication.success event
Implement absolute version of set_disk_free_limit
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #51 from rabbitmq/rabbitmq-web-stomp-43
Merge pull request #74 from rabbitmq/rabbitmq-web-stomp-43
Merge branch 'stable' into rabbitmq-web-stomp-43
Merge branch 'stable' into rabbitmq-web-stomp-43
Merge branch 'master' into rabbitmq-server-691
Ignore a few things
Add coverage options to rebar config
Add covertool for code coverage reporting
Fix the tests for travis
Add some output for debugging in travis
Update rabbitmq.conf.example
Change multi-line usage output to array
Flatten command usage output array
Reenabling printout in rabbitmqctl for debugging purposes.
Merge branch 'stable'
Merge pull request #43 from rabbitmq/rabbitmq-erlang-client-42
amqp_channel_sup: Change restart type of writer to `transient`
Merge branch 'stable'
Travis CI: Fix typo in comment
Remove debug echoes
Support extensions in config files
Merge branch 'stable'
Add reminder about RabbitMQ users/vhosts to test instructions.
Fixing merge issue. Create advanced config instead of config file for use in windows service
Discard error tuples in the result of a tag query
Merge pull request #79 from userlocalhost2000/example/ruby
Test a less trivial pattern for tagged queries
Enumerate the env vars (stub)
Initial WIP commit
Add rebar3 for testing
Add .editorconfig settings
Add description
Initial setup from rebar3 lib template
Merge pull request #11 from rossjones/vm-memory-high-watermark
Fix overly complex signature for absolute values.
Alias param flag in parser
Refactor default autofills in main module
Not just rabbitmqctl
Correct headers, update License section
Merge pull request #12 from rossjones/clear-permissions-command
added a processing to close connection at the end
added examples which describe how to use 'temp-queue' destination (for #78)
added examples which use '/exchange' destination (for #78)
added an example of publisher which specifies '/amq/queue' destination (for #78)
Allows watermark to be specified as an absolute value
Mention how to run the test suite multiple times
Update README-tests.md
Merge pull request #26 from rabbitmq/rabbitmq-auth-backend-ldap-24
Merge branch 'stable' into rabbitmq-auth-backend-ldap-24
Merge branch 'rabbitmq-auth-backend-ldap-8' into stable
Merge branch 'stable' into rabbitmq-auth-backend-ldap-8
Implements the clear-permissions-command
Implement the set_vm_high_watermark command.
Add use_http_auth option to enable HTTP Basic Auth
Use common placeholder names instead of former of current team members
Update rabbitmq-components.mk
Merge branch 'stable'
Merge pull request #708 from rabbitmq/rabbitmq-server-705
fix RABBITMQ_IO_THREAD_POOL_SIZE
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-688' into stable
Merge branch 'binarin-rabbitmq-server-688' into stable
Merge branch 'rabbitmq-server-688' of https://github.com/binarin/rabbitmq-server into binarin-rabbitmq-server-688
Merge branch 'rabbitmq-server-688' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-688
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'binarin-rabbitmq-server-701' into stable
Fix `rabbitmqctl list_consumers`
Merge branch 'binarin-rabbitmq-server-701' into stable
Fix `rabbitmqctl list_consumers`
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Revert "Merge pull request #6 from rabbitmq/rabbitmq-shovel-management-5"
Revert "Merge pull request #8 from rabbitmq/rabbitmq-federation-management-7"
Revert "Read only access to parameters"
Revert "Management parameters access test"
Check deps versions before missing dependencies
Merge pull request #697 from bogdando/bug/1558627
Put the RabbitMQ OCF RA policy to /usr/sbin
Add support for listing up/down queues
Add support for listing up/down queues
Merge branch 'stable'
Merge branch 'rabbitmq-server-701' of https://github.com/binarin/rabbitmq-server into binarin-rabbitmq-server-701
Fix `rabbitmqctl list_consumers`
Merge branch 'rabbitmq-server-701' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-701
Plugin version key for plugin record
rabbitmq_versions key for plugin
Plugin versions check
plugin versions
Clean version check function
Rabbit broker version check in plugins
Merge branch 'stable'
Inline, remove dead code
Wording
Merge pull request #5 from rabbitmq/rabbitmq-server-550
Merge pull request #52 from rabbitmq/rabbitmq-server-550
Merge pull request #136 from rabbitmq/rabbitmq-server-550
Merge pull request #60 from rabbitmq/rabbitmq-server-550
Merge pull request #61 from rabbitmq/rabbitmq-server-550
Merge pull request #23 from rabbitmq/rabbitmq-server-550
Merge pull request #27 from rabbitmq/rabbitmq-server-550
Merge pull request #575 from rabbitmq/rabbitmq-server-550
Merge pull request #22 from rabbitmq/rabbitmq-auth-backend-http-20
Merge branch 'stable' into rabbitmq-auth-backend-http-20
Connect using an IPv4 address
Implement set_permissions command
Merge pull request #704 from rabbitmq/rabbitmq-server-703
increase IO async to 64 for windows / service
Merge branch 'master' into rabbitmq-server-550
Merge branch 'master' into rabbitmq-server-550
Implement list_permissions_command
Merge pull request #689 from bogdando/rabbit_ocf_ra_travis
Merge pull request #699 from binarin/rabbitmq-server-systemd-logrotate
Inline, don't reinvent rabbit_misc:get_env/3
Make slaves wait timeout configurable instead of hardcoded 15000
Merge branch 'lemenkov-slave_wait_timeout_configurable'
Inline, don't reinvent rabbit_misc:get_env/3
increase IO async to 64 for windows
Merge branch 'stable'
Commit rabbitmq-components.mk changes
Merge branch 'slave_wait_timeout_configurable' of https://github.com/lemenkov/rabbitmq-server into lemenkov-slave_wait_timeout_configurable
Fix `rabbitmqctl list_consumers`
Fix `rabbitmqctl list_consumers`
Removed duplicate assertion from clear_password tests
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
removed _config suffix
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
removed _config suffix
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add design document
Don't validate management.http_log_dir for existence
schema testing fixes
ssl config options fix
typos
Fixing schema
cuttlefish schema
Trailing ws
schema testing fixes
Missing listener options
none option for tcp_listen_options config
cuttlefish schema
Trailing ws
schema testing fixes
listeners schema fixes
Revert "Revert "cuttlefish schema""
Implement clear_password command
Make slaves wait timeout configurable instead of hardcoded 15000
Cuttlefish schema
Cuttlefish schema
Config example in README using app name
README updates
Use full module name
Cosmetics, slightly improved warning messages
Use full module name in configuration schema
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #6 from rabbitmq/rabbitmq-shovel-management-5
Merge pull request #8 from rabbitmq/rabbitmq-federation-management-7
Merge pull request #162 from rabbitmq/rabbitmq-management-156
Implemented change_password command
Implement authenticate_user command
Implement set_user_tags command
Converting some tabs that snuck in into spaces
Read only access to federation parameters for management users
Read only access to shovel parameters for management users
Remove extra print statement from result handler
Management parameters access test
Read only access to parameters
Boolean variable name
Remove unnecessary (and noisy) exit calls
Edit authentication backend and mechanisms examples
Add bad_argument return to delete_vhost command
Add bad_argument return to delete_user command
Add bad_argument return for add_vhost command
Add bad_argument for add_user command
Correct validator description
Add bad_argument to environment command
Enable read-only access to policies for management and monitoring users
Add bad_argument return to list_user_permissions.
Added bad_argument return to list_users command.
Add bad_argument return to list_vhosts.
Add bad_argument return to trace_on on bad arguments.
Add bad_argument return to trace_off on bad arguments.
Implement Unix-style exit codes from server-396
Merge pull request #15 from rabbitmq/rabbitmq-trust-store-13
Remove the `persistent` option passed to `application:env_set/4`
Fix logrotate / systemd incompatibility
Use HTTP/1.1 Retry on connection failures. Requests using HTTP/1.1 and keepalive can fail with socket_closed_remotely if keepalive connection is closed. Added retry to handle connection closing. Retry set to 3 to avoid infinite loop.
Fix copy-pasta error in timeout test.
Link to HTTP API docs
Cosmetics
Merge pull request #8 from rabbitmq/rabbitmq-management-138
Merge branch 'stable'
Merge pull request #160 from rabbitmq/rabbitmq-management-151
Merge branch 'stable'
Compile from scratch
Merge branch 'stable' into rabbitmq-management-151
Merge branch 'stable'
Merge branch 'rabbitmq-management-138-stable' into stable
Merge branch 'rabbitmq-management-138-stable' into stable
Ignore .pem files
Merge branch 'stable'
Merge pull request #75 from binarin/rabbitmq-server-696
Fix listing of down queues
Merge branch 'stable'
rabbitmq-server: Remove trailing spaces
Do not warn about mising kernel polling on Windows
Remove extraneous untracked variable from status command
Merge branch 'stable'
Merge pull request #694 from rabbitmq/rabbitmq-server-693
Ignore extracted plugin schemas
Test the tags that should be recognised for a user
Remove extraneous Erlang calls in rabbitmqctl tests
"rabbitmqctl stop" exits with 0 if it fails to contact the node
Delete duplicate entry in the test-suite configuration
Merge branch 'stable'
Merge branch 'rabbitmq-stomp-76' into stable
no more foo
Merge branch 'stable'
Allow user to disable peer hostname verification
Allows user to specify a CA certificate that we will treat as trusted
Refactor test helpers and add new counting tests to add, delete commands
Ignore .pem files
tests sanity
Stomp errors tests
Cosmetics
Merge branch 'master' into rabbitmq-server-550
Merge branch 'stable'
Rename function
Merge pull request #666 from binarin/rabbitmq-server-664
Merge branch 'master' into rabbitmq-server-550
Add tests to make sure tracing commands don't choke on invalid vhosts
Turn commonly used string literals from tests into module attributes
Refactor tests to aggregate inter-node calls
Handle channel errors in stomp
Implement list_users command
cuttlefish config example
Trailing ws
Added queue_master_locator setting to cuttlefish schema
Auth backend in config example
rename env variable CONFIG_ADVANCED to ADVANCED_CONFIG_FILE
moved snippets tests to rabbitmq_test
AMQP reader throttle refactoring
Implement delete_user command
Implement add_user command.
Check 'systemctl' usability for activaction check
Support abstract unix socket for systemd notify
Merge branch 'stable'
rabbitmq-run.mk: Export $(MAKE) to child processes
Add Travis CI job to deploy and smoke test a rabbit OCF
Fix nonsensical test
Merge pull request #147 from jackar/master
Fix duplicate content-type in error responses
Enable automatic compression by default
Remove any content-encoding header from error responses
Merge pull request #75 from userlocalhost2000/perl_example/rpc_client
Merge pull request #686 from bogdando/master
Using '/temp-queue' destination instead of '/queue' for temporary-queues
Explicitly close `socat` port
Add an explanation about why `socat(1)` is used
Improve systemd integration
Merge branch 'stable'
Merge pull request #685 from bogdando/bug/1556123
Revert "Private attributes usage in rabbitmq script"
Revert "Private attributes usage in rabbitmq script"
Add gzip response support
Allow configuring Cowboy options with cowboy_opts
Merge branch 'stable'
Merge pull request #674 from rabbitmq/rabbitmq-server-553
Add support for list_vhosts (Erlangish output only)
Do not generate config in prelaunch. Copy rabbitmq.schema to SCHEMA_DIR
Env variable for schema dir
Create rabbitmq-env.conf file on installation to prevent copying of rabbitmq.conf
removed check_start_params on stop_rabbitmq_server
Test that non-existent credentials fail to authenticate a client
Test with consistent use of macro substitution for username
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #49 from rabbitmq/rabbitmq-web-stomp-48
Merge pull request #73 from rabbitmq/rabbitmq-stomp-72
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'rabbitmq-management-557' into stable
Merge branch 'rabbitmq-management-557' into stable
Merge branch 'stable'
Add support for trace_on, trace_off.
Remove unnecessary variable bindings.
Add a force_default_creds option
Merge branch 'stable'
Merge pull request #680 from binarin/rabbitmq-server-ctl-no-break-handler
Disable erlang break handler in rabbitmqctl
Heartbeat like in MQTT plugin
Store heartbeat monitor
variable unquoting
Use as base for the first sample the immediately preceding value
remove debug echo
Compile
Merge branch 'stable'
Merge pull request #70 from rabbitmq/rabbitmq-server-679
Emit stats unconditionally
Merge branch 'stable'
Add delete_vhost command.
Add some extra edge-case tests to add_vhost
Add add_vhost command.
Update README with details of command arguments.
changes in heartbeat management
Remove unhelpful autofills from RabbitMQCtl errors.
Add timeouts to list_user_permissions, refactor a bunch of tests.
moved check_not_empty controls, removed double quotes
Calculate average operation times from accumulated time and count
Merge pull request #72 from rabbitmq/rabbitmq-mqtt-71
Merge pull request #71 from rabbitmq/rabbitmq-stomp-70
Emit stats unconditionally
Emit stats unconditionally
fixed message
more error details
removed double quotes for the variables
Avoid average operation time calculations in the agent
Converted options to maps.
Merge branch 'rabbitmq-stomp-68' into stable
Auto-populate empty option[:node] in rabbitmqctl.main
Made new module for testing flag functionality.
Handling of resource alarm message
Merge pull request #660 from rabbitmq/rabbitmq-server-659
Add list_user_permissions, support for commands with args.
Refactor commands to use rpc_call from :rabbit_misc library.
fixed a small syntax error
Merge branch 'stable'
Merge pull request #653 from dmitrymex/log-pid
Merge branch 'stable'
Merge pull request #69 from rabbitmq/rabbitmq-common-68
Updates queue_master_location/1 parameter spec from pid() to #amqqueue{}.
Merge branch 'stable'
Merge branch 'rabbitmq-mqtt-65' into stable
In fact, even more
Wait a bit more
Cosmetics
Explain
skip_publishes => expect_publishes
Trailing ws
Trailing ws
Ignore temp JUnit runner files
Compile
defered => deferred
Merge branch 'stable'
Merge pull request #3 from rabbitmq/rabbitmq-stomp-55
Merge branch 'stable'
Merge pull request #45 from rabbitmq/rabbitmq-stomp-55
Fill out help command.
Add rudimentary usage support, refactoring main command.
Defer last receive after blocking
moving the purge button closer to delete
Add support for multi-underscore command modules.
Generate map of command modules.
mention RABBITMQ_CONF_ENV_FILE
testing snippets from documentation
clarity
Batch writes to the index on requeue
More config options in sysctl format
Merge branch 'stable'
Merge pull request #66 from rabbitmq/rabbitmq-stomp-55
Merge branch 'stable'
Merge pull request #66 from rabbitmq/rabbitmq-stomp-55
Use 0 for frame_max
Use 0 for frame_max
Cosmetics
Cosmetics
Use STOMP client for product name
Set product to "MQTT client"
Cosmetics
Move default config creation to rabbitmq-service.bat
Sync with upstream
Oops
Merge branch 'stable' into rabbitmq-stomp-55
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #572 from rabbitmq/rabbitmq-server-346
Merge pull request #42 from rabbitmq/rabbitmq-server-346
Merge branch 'stable' into rabbitmq-server-346
Merge branch 'stable' into rabbitmq-server-346
Merge branch 'stable'
Merge branch 'stable'
Set up Mix file to generate a standalone executable.
Replace Mix.Utils.camelize with user-defined function.
Don't install rabbitmq service if empty env
Check for env variables in windows script
Check env variables before start
Emit stats for management UI
Add rabbitmq-common as a dependency.
config generation testing
Config generation fixes
Revert SSL socket options when trust-store plugin is disabled
better naming conventions wrt delete / purge
Emit stats for management UI
MQTT connections use exactly one channel
Allow passing the adapter info on processor init
Emit stats for management UI
Handle socket errors when sending stats
Merge remote-tracking branch 'rabbitmq-server-398'
Simplify emit_stats/1
Emit stats for management UI
STOMP connections use exactly one channel
Add a .gitignore
Minor license header correction
Wording
Merge branch 'stable'
Merge pull request #64 from rabbitmq/rabbitmq-mqtt-62
Merge pull request #144 from rabbitmq/rabbitmq-management-143
Accept both list and binary values
Store cluster name as binary from the HTTP API
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #673 from rabbitmq/rabbitmq-server-671
Merge pull request #67 from rabbitmq/rabbitmq-common-65
Merge pull request #101 from rabbitmq/rabbitmq-management-41
Merge pull request #10 from rabbitmq/rabbitmq-management-41
Merge branch 'stable' into rabbitmq-management-41
Merge branch 'rabbitmq-server-398' into stable
Move types and auth_backend modules over from rabbitmq-server.
Move auth_backend and types modules to rabbitmq-common.
Merge branch 'stable'
Merge pull request #648 from rabbitmq/rabbitmq-server-645
'none' option for dn_lookup config
Formatting of error details
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'rabbitmq-server-398' into stable
Merge branch 'rabbitmq-server-398' into stable
Tests for mqtt blocking
Merge branch 'stable' into rabbitmq-server-398
Merge branch 'stable' into rabbitmq-server-398
Merge branch 'stable'
Merge pull request #64 from rabbitmq/rabbitmq-common-63
Completely ignore unused channel's termination reason.
Ignores notify_queues/1 result and removes its matches to 'ok'.
conserve_resources arguments
Merge branch 'stable'
Merge pull request #669 from rabbitmq/rabbitmq-server-667
Bump rabbit.channel_operation_timeout default to 15s
Use strict switch handling in OptionParser.
Filling out new command instructions in README.md.
Removed some noisy contexts from test files.
Add support for environment command.
Merge pull request #3 from rabbitmq/rabbitmq-cli-2
Merge branch 'stable'
Merge branch 'stable'
Commit 3.6.1-1 change log
Merge branch 'rabbitmq-stomp-63' into stable
handle client_timeout in handle_cast
Merge branch 'stable'
Ignore debug/* and PACKAGES/*
Merge branch 'stable'
Merge branch 'deadtrickster-rabbitmqctl-man-fix' into stable
vhostpath => vhost in rabbitmqctl.1
Document rabbitmqctl commands sync_queue, cancel_sync_queue, purge_queue also accept vhostpath.
Missing ssl options
Handle float numbers on stats
Revert timestamp performance improvement
"none" option for listeners
Plural form for pause_if_all_down nodes
Create rabbitmq.config on installation
sysctl format config in README
Run xmlto in more verbose mode
Merge branch 'stable'
Merge pull request #657 from dmitrymex/seamless-promotion
[OCF HA] On neighbor promotion do nothing if we are already clustered
Wording
Wording
Wording
Wording
Merge branch 'stable'
Merge pull request #655 from rabbitmq/rabbitmq-server-596
Return Unix error codes in node health check
Ignore error codes in node health check
Return error codes in node health check
Restore rabbit_cli:rpc_call API
Save initial TLS configuration options to application environment
Unescape list_permission and list_user_permission regexes
none option for ldap_servers
none options for config collections
Minor edits
Restore aggr_queue_stats_queue_msg_rates
[OCF HA] Do not check cluster health if master is not elected
Use code module to avoid naming commands explicitly in RabbitMQCtl.main.
Split status printing methods into separate module.
Merge branch 'stable'
Merge pull request #38 from rabbitmq/rabbitmq-erlang-client-36
Dry out pattern-matching in print functions.
Node health checks endpoint
Add remaining properties to status printout.
Move health checks to rabbit_common and rabbit_cli:rpc_call to rabbit/rabbit_misc
Add node health checks
Move rpc_call from rabbit/rabbit_cli to rabbit_misc
Avoid hipe compile versioned modules
Pass the arity right after the real function name
Avoid unnecesary try/catch
Update doc
Support multiple Erlang versions
Use arity to rename, fix arity spec
Error handling fix
Version support for ssl_compat
Documentation and error control
Version support for time_compat
[OCF HA] Log process id in RabbitMQ OCF script
Merge branch 'stable'
Travis CI: Make sure a "master" branch exists
Honour the password and depth URI parameters
Add a failing test for password and depth parameters
Merge branch 'stable'
Merge pull request #650 from dmitrymex/increase-timeout
Unit tests for TLS parameters in URIs
Travis CI: Fix how we recreate the tested tag/branch
Travis CI: Test with Erlang 18.2 instead of 18.0
Rename aliveness_test to node_health_check
Use net_ticktime + 10s as timeout in the aliveness test and abort with the first error
[OCF HA] Increase tolerable number of rabbitmqctl timeouts
Add aliveness_test documentation
Aliveness check
Refactored table printing into separate module.
Refactor line breaks.
Add memory info printing to status.
Added Erlang OTP, ERTS version to status and refactored running apps display.
Delete directory tree in test cases with a library procedure
Test with a "whitelist" directory under TMPDIR
onfail parameter to erlsrv
Build directories in a portable way (i.e. Linux & Windows)
log_hard_error/3: Prepend lines with ' ' after the first
Merge branch 'stable'
format_hard_error/1: Format Erlang term if it's not a string
Example edits
Capture detailed Erlang logs on connection failure
Default to a whitelist directory that is consistent with others
Merge branch 'stable'
rabbit_stomp_reader: Handle parsing errors gracefully
Style fixes
Remove trailing whitespaces
Build a match specification which matches on just one ETS entry
Merge branch 'master' into rabbitmq-server-550
Ignore debug/*
Merge branch 'stable'
Merge pull request #59 from rabbitmq/rabbitmq-server-248
Ignore result from notify_queues/1.
Application unload on plugins schemas extract
Use more realistic (and unique) filenames
Match on a `1` not `true` upon ETS select delete
Advanced config with pieces of examples
Config location logging
Merge branch 'master' into rabbitmq-server-550
Do not rewrite advanced.config on windows installation
New cuttlefish
Update rabbitmq.config to advanced.config on windows
Fix unit tests
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-management-41
Windows scripts
Merge pull request #636 from rabbitmq/rabbitmq-server-634
Merge branch 'stable'
Merge pull request #639 from lefremova/stable
Merge pull request #630 from dmitrymex/stable
cuttlefish schema
cuttlefish schema
cuttlefish schema
Revert "cuttlefish schema"
cuttlefish schema
Use advanced config as inittial config. Extract plugin schemas
Private attributes usage in rabbitmq script
Merge branch 'stable'
Accept both 201 Created and 204 No Content
Accept both 201 Created and 204 No Content
Merge branch 'stable'
Merge branch 'rabbitmq-server-248' into stable (again)
Revert "Moves channel state update from notify_queues/1 to channel.close"
Merge branch 'rabbitmq-server-248' into stable (again)
Revert "Set state to closing in notify_queues"
Merge branch 'rabbitmq-server-248' into stable (again)
Set state to closing in notify_queues
Emit stats for management UI
STOMP connections use exactly one channel
Merge branch 'stable'
make source-dist: Fix erlang.mk autopatching
Moves channel state update from notify_queues/1 to channel.close handle clause, following discussion with Michael Klishin.
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #56 from rabbitmq/rabbitmq-server-248
Merge pull request #635 from rabbitmq/rabbitmq-server-248
Merge branch 'stable' into rabbitmq-server-248
Merge branch 'stable' into rabbitmq-server-248
Merge branch 'stable'
Makefile: Fix Makefile indentation
make manpages: Fix xmlto(1) failures handling
Merge branch 'stable'
Bump rabbit.channel_operation_timeout to 5s
Merge pull request #134 from rabbitmq/rabbitmq-management-133
Merge branch 'rabbitmq-management-65' into stable (again)
Do not jump to finish in windows uninstall
Do not jump to finish in windows install
Properly redirect on definitions upload success
Add tests
Sets initial channel_operation_timeout to 3s. To update to a higher value in future, for cross-node calls.
Merge branch 'rabbitmq-management-65' into stable (again)
Renames CHANNEL_OPERATION_TIMEOUT dict key.
Adds channel_operation_timeout envionment variable.
Include auth and escape vhost name
Return error if vhost not found
Document definitions with vhost in the API
Adds get_channel_operation_timeout/0.
Adds notify_down_all/3 clause to handle timeouts.
Adds CHANNEL_OPERATION_TIMEOUT macro.
Add empty list clause
Load any schema from plugin schema dir
Typo
Adds caching of channel_operation_timeout in process dictionary. Acquisition of channel_operation_timeout from dictionary on rabbit_amqqueue:notify_down_all/3 call.
Merge branch 'stable'
Merge pull request #631 from rabbitmq/rabbitmq-server-625
Indentation
Support for plugin schemas
added erl with -sname to make sure epmd is started
Merge pull request #131 from rabbitmq/rabbitmq-management-65
Strip trailing ws
Merge branch 'stable' into rabbitmq-management-65
Removed single to plural form mapping
Remove unused tables
Clarify which plugins the trust-store effects in the README
Make & remove a data directory for each test case
Move behaviour declaration so that interfaces are clearer
Support for custom resource kinds
Exit waiting loop once node has unjoined
Resource ID filtering
Bolden important words (don't italicize)
Document more in the README
added import vhost
Fix filtering of bindings
Re-format with Emacs, clarify comments
Strip trailing ws
Wording
Merge branch 'stable'
base_uri => path_prefix, references #130
Merge pull request #130 from barryib/add-api-base-uri-in-stable
Change how `refresh_interval` is configured to be in line with README
add base_uri option for the management API in 3.6.x release
Make configuration parameter `interval` more friendly
Merge branch 'master' into rabbitmq-server-550
Squash a warning
Squash a warning
Merge branch 'master' into rabbitmq-server-550
Update README.md
Merge branch 'stable'
Use basic regular expressions for sed portability
Merge branch 'cbandy-posix-sed'
Ignore PACKAGES/*
Merge branch 'posix-sed' of https://github.com/cbandy/rabbitmq-server into cbandy-posix-sed
Merge branch 'stable'
Merge pull request #52 from binarin/rabbitmq-common-queue-declare-infinite-loop
Merge branch 'stable'
Add license files
New README in .md
Merge branch 'stable'
Merge branch 'rabbitmq-federation-management-5' into stable
Wording
Trailing ws
Merge branch 'stable'
Merge pull request #55 from binarin/rabbitmq-common-53-stable
Merge pull request #128 from barryib/add-api-base-uri
Escape vhost in URI
added vhost on download definition function
add base_uri option for the management API
Remove custom stderr formatting
Add help for import/export on individual vhosts
fixed label
Add import/export at vhost level to UI
added new fields
added help sections
Export/import config on virtual host level
changed upstream form
Merge branch 'stable'
Use 'durable' and 'persistent' interchangeably in more places
Merge pull request #59 from rabbitmq/rabbitmq-stomp-58
Use 'durable' and 'persistent' interchangeably in more places
Give test cases more time and add a timer to the library test
Write a README with documentation
Change configuration option names so that they're more friendly
Test the removal and installation of certificates in quick succession
Merge pull request #54 from binarin/rabbitmq-common-53
Spruce up OTP Application & Rabbit Plugin specifics
Remove custom stderr formatting
Configure manual or automatic whitelist refresh
Refresh whitelist with delta between old & new directory contents
Introduce timers to change directory modification time
Add setup and teardown for the test directory (whitelist)
Refresh whitelist only when directory has been modified
Improve test code on several fronts
Refresh whitelist to reflect changes in directory after a given period
Test the removal and installation of certificates to be whitelisted
Whitelist with & query an ETS table instead of a list
Improve performance of delete stats
Drop long queues of queue_stats and channel_stats
Use ordered_set in key index table
Merge branch 'stable'
Merge pull request #617 from rabbitmq/rabbitmq-server-616
Merge branch 'stable'
rabbit_mirror_queue_sync: Pause the syncer process if memory is low
rabbit_alarm: Fix resource_alarm_source() type
Merge branch 'stable'
Merge pull request #51 from rabbitmq/rabbitmq-management-41
Use basic regular expressions for sed portability
Remove priority of channel/queue stats collector
Fix doc
Additional config gile
Merge branch 'master' into rabbitmq-server-550
Prevent infinite loop on 'queue.declare'
Node name for epmd touch
Touch epmd when installing to windows
Merge branch 'stable'
rabbitmq-env.bat: Do not prepare and escape RABBITMQ_PLUGINS_EXPAND_DIR
Merge branch 'stable' into rabbitmq-management-41
Make service generate config
Config detection in rabbit_config. Always pass generate args to windows script
Revert "run-broker with generated config"
Fixing start args
Optimise GC
run-broker with generated config
Scripts to start erlang node with .conf file to generate config
Minor fix and tests
Merge pull request #611 from rabbitmq/rabbitmq-server-590
Merge pull request #50 from rabbitmq/rabbitmq-server-590
Log connection pid only
Do not log connection ref
More copy edits
Logging queue deletion at debug level
Grammar
Copy
Fix wording
Merge branch 'stable'
Merge pull request #609 from bogdando/bug/1541029
Generation called from inside erlang only
Optimisation
Fix second largest calculation
Optimisations
Remove rabbitmq fork of lager dependency
Merge branch 'master' into rabbitmq-server-590
error_logger_lager_event sink
Federation log sink
Federation sink
Log auto delete with debug level
Resolve category name to sink name
Call config generation from within erlang
Log auto deleting queues
Log deleting exclusive queues. New log category
Fix action_stop for the rabbit OCF
Merge branch 'stable'
Merge pull request #11 from rabbitmq/rabbitmq-event-exchange-8
Wording
Per AMQP 0-9-1 spec, timestamps must be in seconds
Update README.md
Merge branch 'stable'
Merge pull request #604 from rabbitmq/rabbitmq-server-595
Add emitting node info to amq.rabbitmq.log messages
Build whitelisting and querying functionality
Merge branch 'stable'
Merge pull request #602 from dmitrymex/stable
Updated testing section in README.md.
Removed Hex installation stuff, since I do not believe we are using it.
Clarification in README.md.
Add license link to README.md.
A couple of comments and some nicer spacing between public and private methods.
Removed rabbit_cli.hrl file.
Added legal boilerplate.
Generated config usage in windows scripts
Merge branch 'master' into rabbitmq-server-550
Lager integration for windows service script
Renamed app to RabbitMQCtl.
Remove needless SSL client options & match on specific error reason
Streamline checking for cluster partitioning
Merge branch 'stable'
Update README-tests
Move README files to Markdown
Update README-tests
Move README files to Markdown
Add a note to Markdown file.
Add more parser tests, alias for quiet flag.
Rename CLI to ElixirMQCtl.
Merge branch 'stable'
Merge pull request #601 from bogdando/bug/1540936
Add stub for usage message.
Style-guide compliance.
Fix cluster membership check for running master
Removed automatic node name generation.
Initial commit.
Merge branch 'stable'
New section: building from source and packaging
Merge pull request #600 from bogdando/bug/1540936
Fix uninitialized status_master
Hardcode running state and channels count/max
Hardcode running state and channels count/max
Merge pull request #28 from rabbitmq/rabbitmq-server-559
Merge pull request #578 from rabbitmq/rabbitmq-server-559
Merge pull request #49 from rabbitmq/rabbitmq-server-559
Fix wrong protocol name in management UI
Properly fill in SSL information in adapter info
Merge branch 'stable'
Merge pull request #597 from binarin/rabbitmq-server-ocf-quiet-curl
Suppress curl progress indicator in rabbit OCF
Log the `whitelisted/3` procedure's state for better visibility
Cuttlefish generation in windows
COnfig file generation windows
Starting node with generated config
Fixes
Auth backends. conf.example file
Order the `whitelisted/3` clauses from base-like to recursive cases.
Simplify the terminate/shutdown boilerplate
Docs examples in conf file
Merge pull request #34 from rabbitmq/rabbitmq-erlang-client-32
Declare default ERLC_OPTS to work around Erlang.mk issue
Improve the interface skeleton in several ways.
Merge branch 'stable'
Merge pull request #594 from rabbitmq/rabbitmq-server-592
Use -r with sed on Linux, fixes #592
more aftomation for testing config
Merge branch 'stable'
Merge branch 'rabbitmq-server-541' into stable
Merge branch 'stable'
Cherry-pick a fix for #122 to stable, resolve conflicts
Accept either 201 Created or 204 No Content
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #120 from rabbitmq/rabbitmq-management-112
Merge stable into master, tests need #122 and #121 to pass
Cowboy uses 204 No Content
Merge branch 'stable' into rabbitmq-management-112
Merge branch 'stable'
Merge pull request #119 from rabbitmq/rabbitmq-management-117
Merge pull request #588 from rabbitmq/rabbitmq-management-117
Typos, copy edits, cosmetics
Cosmetics
Trailing ws
Trailing ws
Go all the way to 3.0.x
Explain
MD5 hashing for 3.4 and 3.3
Fix config to start broker
Testing schema
Duplicate ssl and tcp options in management and MQTT schemas
Cuttlefish schema for default config
Test fixes
Tests for hashing algorithm in definitions
Add hashing_algorithm for password in user definitions
Specify hash algorithm in change_password_hash
Update README.md
Test fixes
Merge branch 'stable'
Merge pull request #33 from rabbitmq/rabbitmq-stomp-55
Compile (standalone)
updated sammy 0.7.6
Merge pull request #10 from rabbitmq/rabbitmq-web-stomp-examples-2
Update stomp.js to latest version
Fix regression from adding ssl_compat module
Merge pull request #57 from rabbitmq/rabbitmq-mqtt-21
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-server-541
Merge pull request #584 from rabbitmq/rabbitmq-server-581
Increase supervisor timeout to net_ticktime + 10s
Unblock receive after 15s
Introduce timeout in rabbit_channel_sup
More tests to check QoS2 is not ignored
Merge branch 'stable'
rabbit.erl: Do not run systemd-notify on Windows
rabbitmq-server.bat: Properly quote %RABBITMQ_LOG_BASE%
Merge branch 'stable'
Merge pull request #535 from rabbitmq/rabbitmq-server-307
Merge branch 'rabbitmq-server-493' into stable
Create directories and files on Windows before conversion to short filenames
Use master version of lager, instead of rabbitmq fork
Pass whitelist directory down the supervision tree
Refresh timeout for interceptors
Start application with a default path to a whitelist directory
Moved rebbit_registry to rabbit_common
Moved rabbit_registry to rabbit_common
use rabbit_registry to register exchange_decorator
rabbit_registry_class behaviour
rabbit_registry_class behaviour
rabbitmq-server.bat: Honor RABBITMQ_LOGS=- to log to stdout
Use RABBITMQ_HOME to set the path to RabbitMQ ebin directory
Use short filenames in Windows startup scripts
Merge branch 'stable'
Merge branch 'rabbitmq-management-114' into stable
Trailing ws
Indent the first test case properly
Complete the OTP Application and boot strapping procedure
Update channel interceptors on register/unregister
Support for callbacks on register/unregister in registry.
redirect for currect_context
fix IE enter key
Compile, references #574
Merge pull request #574 from binarin/rabbitmq-server-get-rid-of-sd_notify
Remove mentions of `sd_notify` library
Test trust-store allows clients presenting whitelisted certificates
Merge branch 'stable'
Merge pull request #573 from binarin/rabbitmq-server-systemd-notify-zero-deps
Use systemd-notify(1) shell helper as fallback
Merge branch 'stable'
Format test set a little better
Merge pull request #571 from binarin/rabbitmq-server-ocf-shell-quoting
Fix usage of uninitialized variable in OCF script
Update README.md
Update README.md
Merge branch 'stable'
Merge pull request #563 from binarin/rabbitmq-server-ocf-list-channels-diagnostics
Update README.md
Give tests enough time to complete
Test path validation failure
2016
Merge branch 'stable'
Merge pull request #566 from rabbitmq/rabbitmq-server-319
Indent
Workflow info
Improve 'list_channels' diagnostics in OCF
Tests
Remove duplicate code in pre_publish and publish functions
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'rabbitmq-management-110' into stable
Merge pull request #560 from dmitrymex/reset-master-score
Show an error on bad_request and not_found responses
Example moved to rabbitmq-web-mqtt-examples repo
Improve rabbitmq OCF script diagnostics
Test to document successful SSL connection as things stand
Reset master score if we decide to restart RabbitMQ on timeout
Use an additional index to avoid overlap insert/delete
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #558 from galanoff/stable
documents record fields
Arrange to call some of Cowboy's test utilities for certificates
Always report some stats
Merge pull request #109 from rabbitmq/rabbitmq-management-107
Merge branch 'stable'
Merge branch 'rabbitmq-management-97' into stable
Tesing on working UAA
Use indexes
Initial commit
Add optional prefix for RabbitMQ node FQDNs
Merge branch 'rabbitmq-top-4'
Accept any content-type for exchange-publish
Switch to Cowboy REST
Send a 400 error when the range age/incr values are invalid
Merge pull request #8 from rabbitmq/rabbitmq-tracing-7
Change some NO_CONTENT into CREATED in the tests
Start inets explicitly
Convert to Cowboy REST
Merge branch 'stable'
Mention supported versions
Rework README.md
Merge branch 'stable'
Add license files
Add license files
Merge branch 'stable'
Add license files
Add license files
Merge branch 'stable'
Copy, (c) info updates
Wording
Update LICENSE-MPL-RabbitMQ
Update LICENSE-MPL-RabbitMQ
Update LICENSE-MPL-RabbitMQ
2016
Merge branch 'stable'
Merge pull request #527 from binarin/rabbitmq-server-better-startup-diagnostics
Resource id. Scopes README
wrong arity
rabbitmq_oauth2_scope from oauth backend
Merge pull request #548 from binarin/rabbitmq-server-lager-rotate-logs
Update README.md
Init. Make request to /check_token
Initial commit of Rabbit plugin boilerplate
Remove unused tables
Update calls to 'rabbitmqctl rotate_logs'
Performance improvements
Performance improvements
Merge branch 'stable'
Merge pull request #547 from bogdando/bug/1531838
Merge pull request #108 from rabbitmq/rabbitmq-server-94
Merge pull request #11 from rabbitmq/rabbitmq-server-94
Use the new `log_files` property reported by the agent
Use the new rabbit:log_locations/0 API
Merge branch 'stable'
Merge pull request #543 from binarin/rabbitmq-server-rotate-logs-data-loss
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #552 from binarin/rabbitmq-server-549
Merge pull request #48 from binarin/rabbitmq-server-549
Move random helper to rabbit_misc
Limit number of unique node names for rabbitmqctl
Fix rabbitMQ OCF monitor detection of running master
This plugin is on Cowboy REST now
This plugin is on Cowboy REST now
Limit sample ranges sent to the client
Merge branch 'stable'
Merge pull request #47 from rabbitmq/rabbitmq-server-544
Merge pull request #491 from rabbitmq/rabbitmq-server-94
Merge pull request #43 from rabbitmq/rabbitmq-server-94
Adds handling of exit signals from socket process to rabbit_reader during wait_for_channel_termination/3
Use Lager to log RabbitMQ messages
Use Lager to log RabbitMQ messages
Merge pull request #4 from rabbitmq/rabbitmq-shovel-management-3
Merge pull request #4 from rabbitmq/rabbitmq-federation-management-3
Merge pull request #104 from rabbitmq/rabbitmq-federation-management-3
Downgrade publishes if QoS = 2 to QoS = 1
Merge branch 'stable'
Fix crash on SSL connections
Rename nb_acceptors into num_{tcp,ssl}_acceptors
Switch the plugin to use Cowboy REST
Add a handler for static files with multiple source directories
Fix 'rabbitmqctl rotate_logs' behaviour
Switch the plugin to use Cowboy REST
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #55 from rabbitmq/rabbitmq-server-528
Merge pull request #41 from rabbitmq/rabbitmq-server-528
Merge pull request #54 from rabbitmq/rabbitmq-server-528
Merge pull request #542 from rabbitmq/rabbitmq-server-528
Merge pull request #45 from rabbitmq/rabbitmq-server-528
Merge branch 'stable' into rabbitmq-server-528
Merge branch 'stable' into rabbitmq-server-528
Make number of Ranch acceptors configurable
Make number of Ranch acceptors configurable
Make number of Ranch acceptors configurable
Make number of Ranch acceptors configurable
Merge branch 'stable'
Make number of Ranch acceptors configurable
Merge pull request #540 from bogdando/bug/1529897
Merge pull request #539 from rabbitmq/rabbitmq-server-392
Merge branch 'stable'
Include alarm information in output for cluster status
Fix get_status, action_stop, proc_stop then beam's unresponsive
Merge pull request #9 from rabbitmq/rabbitmq-shovel-2
Wording
Include alarm information in output for cluster status
Fix proc_kill then there is no pid found
Tests for adding separate headers
Merge branch 'stable'
Merge branch 'stable'
Shovel headers test
Merge pull request #533 from rabbitmq/rabbitmq-federation-7
Merge pull request #44 from rabbitmq/rabbitmq-federation-7
Merge branch 'stable'
x-shovelled-timestamp header
Merge pull request #538 from bogdando/bug/1529897
Syntax and local vars usage fixes to OCF HA
Clear temporary runtime exchange parameters on boot
New constant
Elaborate
Ensure exchange-delete-in-progress is always cleared
Merge branch 'stable' into rabbitmq-federation-7
Merge branch 'stable'
Merge branch 'rabbitmq-mqtt-36' into stable
Wording
rename flag to received_connect_frame
Log MQTT connection.
Log MQTT connection start and close with debug if no data received
Cosmetics
Make send method configurable and export useful functions
Update rabbitmq.config.example
Update rabbitmq.config.example
Mention mirroring_sync_batch_size
Remove server properties
Rename runtime parameter to exchange-delete-in-progress
Ignore duplicate down_from_ch
Merge branch 'stable'
Cosmetics
Make send method configurable and export useful functions
Merge pull request #53 from rabbitmq/rabbit-mqtt-33
Cosmetics
Merge branch 'stable'
Merge pull request #532 from bogdando/bug/1529897
Make send method configurable and export useful functions
Add a small test suite
Remove unneeded sleep for a graceful stop by PID
Remove the credit/conserve resources for now
Set deleting exchange status
Add support for hearbeats
Merge branch 'stable'
(c) year
Optimise list comprehension and minor fixes
Merge branch 'stable'
Didn't mean to delete this behaviour
Add license header
Send events to queue and channel collectors
Send events to new collector rabbit_mgmt_event_collector
Add forgotten file
Minor changes and doc
Move priority events to their own servers
Aggregate stats in records
Aggregated stats in ETS tables per type
Update authors
Avoid concat on strip and multiple function apply
Unfold augment function
Convert fine stats details in a constant
Refactor append_samples to avoid duplicated calls
Replace list comprehensions for functions when return value is not used
Optimise format call
Use ets:select to optimise queries
Delete orphan ETS tables
Remove unnecessary aggregated_stats_index table
Delete orphan ETS tables
Move stats GC to an independent process
Using ETS in mgmt_stats
Calculate tree total in event-time
Fix split errors
No need to duplicate the comment explaining events and stats.
Have the event_collector message queue length to be reported back to UI.
Split the mgmt db code into writer (rabbit_mgmt_event_collector) and reader (rabbit_mgmt_db).
Merge branch 'stable'
Docs
Docs
Merge pull request #7 from rabbitmq/rabbitmq-server-483
Merge branch 'stable'
Essay doco for rabbit_runtime_parameters
Merge branch 'stable'
Merge pull request #529 from rabbitmq/rabbitmq-server-521
Adds get_queue_master_per_binding/3 handle all clause, to handle exchange type bindings, for example.
Change path to the Web Dispatch log file for the test
Test that a given status is logged
Makefile: Add Ranch as a BUILD_DEPS to be sure Ranch 1.2.1 is pulled
Makefile: Add Ranch as a BUILD_DEPS to be sure Ranch 1.2.1 is pulled
Merge branch 'stable'
Add webmachine to DEPS
Merge branch 'stable'
Add webmachine to DEPS
Add webmachine to DEPS
Merge branch 'stable'
Add webmachine to DEPS
Test that Web Dispatch logs source IP address and path
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Update (c) info
Improve diagnostics in 'rabbitmq-server' script
Merge branch 'stable'
Merge pull request #525 from bogdando/bug/1530150
Ensure rabbit node uptime is reset in the CIB for OCF resource
More details on rabbit.password_hashing_module
Merge branch 'stable'
Merge pull request #523 from bogdando/bug/1529897
Fix stop conditions for the rabbit OCF resource
Merge branch 'stable'
Pin rabbitmq_web_dispatch to stable
Merge branch 'stable'
Wording
indent with emacs
Hint to stop_app if mnesia is running but should not
Proper error report
Hint to stop_app when running rabbitmqctl reset
Merge pull request #510 from rabbitmq/rabbitmq-server-167
Wording
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
Merge pull request #516 from rabbitmq/rabbitmq-server-328
Merge branch 'stable'
Merge pull request #99 from rabbitmq/rabbitmq-management-98
Do not use for .. of from ECMAScript 2015
Add doctype
Merge branch 'stable'
Strip trailing whitespace
Merge branch 'stable'
Added direct_reply_to capability declaration.
Strip trailing whitespace
Added direct_reply_to capability declaration.
Handle more needed messages
Merge pull request #66 from rabbitmq/rabbitmq-management-63
Merge pull request #4 from rabbitmq/rabbitmq-management-63
.gitignore: make absolute paths relative
Merge branch 'stable'
.gitignore: make absolute paths relative
Add README
Use relative paths in .gitignore
Make the example like Web STOMP's echo example
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
Use relative paths in .gitignore
Use relative paths in .gitignore
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge branch 'stable'
.gitignore: make absolute paths relative
Merge pull request #3 from fenollp/patch-1
Merge pull request #31 from fenollp/patch-1
Merge pull request #26 from fenollp/patch-1
Merge pull request #21 from fenollp/patch-1
Merge pull request #16 from fenollp/patch-1
Merge pull request #25 from fenollp/patch-1
Merge pull request #9 from fenollp/patch-1
Merge pull request #51 from fenollp/patch-1
Merge pull request #14 from fenollp/patch-1
Merge pull request #8 from fenollp/patch-1
Merge pull request #53 from fenollp/patch-1
Merge pull request #6 from fenollp/patch-1
Merge pull request #6 from fenollp/patch-1
Merge pull request #39 from fenollp/patch-1
Merge pull request #39 from fenollp/patch-1
Merge pull request #518 from fenollp/patch-1
Initial project
Initial commit
Accept files when posting definitions
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
.gitignore: make absolute paths relative
Update README.md
Update README.md
Update README.md
Update README.md
Link to the archive
Update README.md
Merge branch 'master' into rabbitmq-server-167
Changes rabbit_vm:bytes/1 to return 0 on exception
indent with emacs
Adds try-catch block and returns error on exception
Merge branch 'master' into rabbitmq-management-63
Merge branch 'stable'
Merge branch 'stable' into rabbitmq-server-485
Merge branch 'stable'
Merge branch 'magicpotion-help_fixes' into stable
purge may crash in lazy queue(3.6.0)
Merge pull request #513 from javaforfun/lazy_purge
Sync RPM package description with Debian
help toggle
purge may crash in lazy queue(3.6.0)
Honor cowboy_opts with SSL connections too
Hint to stop_app if mnesia is running but should not
Proper error report
Hint to stop_app when running rabbitmqctl reset
Moves Erlang and OTP functions from rabbit_mnesia to rabbit_version.
packaging: Always use xzcat(1) to decompress xz archive
packaging: tar `-n` is not portable, use --no-recursion instead
Commit Debian and RPM change log entries
packaging: Deorbit macports package
packaging/debian: Update list of files removed in `make clean`
Fix build: the produced archive is now compressed with xz(1)
packaging/generic-unix: Produce tar.xz archive
Use Cowboy REST instead of Webmachine
Use Cowboy instead of Webmachine/Mochiweb for Web plugins
Merge pull request #509 from rabbitmq/rabbitmq-server-508
Rmove `rabbit` from the DEPS
Remove `rabbit` from the DEPS
Remove `rabbit` from the DEPS
Distribute event-exchange, recent-history-exchange and sharding
packaging/generic-unix: Create web manpages
Merge pull request #507 from rabbitmq/rabbitmq-server-506
Datetime in rabbit_diagnostics
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Sync with upstream build.config
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Add several repositories/components
rabbitmq-components.mk: Fallback to the master branch if there is no other refs
rabbitmq-components.mk: Do not set push URL if it matches the fetch URL
rabbitmq-components.mk: Fallback to remote.origin.url
rabbitmq-components.mk: Yet another attempt at getting the current Git ref
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #9 from rabbitmq/rabbitmq-web-stomp-34
Merge pull request #35 from rabbitmq/rabbitmq-web-stomp-34
Merge pull request #38 from rabbitmq/rabbitmq-web-stomp-34
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Reword a comment to avoid it becoming outdated
Update Ranch to 1.2.1
Change the default number of acceptors to 1
Makefile: Allow to override python command
Makefile: Allow to override python command
amqp_codegen.py: Remove shebang line + chmod 644
codegen.py: Sort amqp_method_field_name()
Merge pull request #25 from rabbitmq/rabbitmq-common-36
Merge pull request #37 from rabbitmq/rabbitmq-common-36
Merge pull request #4 from rabbitmq/rabbitmq-common-36
Make codegen.py work with Python 3
Merge pull request #50 from rabbitmq/rabbitmq-mqtt-49
Update test expectation
Change default non-clean subscription TTL to 24 hours, fixes #49
Explain
Merge pull request #33 from rabbitmq/rabbitmq-web-stomp-32
Tell travis to wait for long-running tests.
Merge branch 'master' into rabbitmq-common-36
Merge pull request #503 from rabbitmq/rabbitmq-server-368
Make codegen.py work with Python 3
Make amqp_codegen.py work with Python 3
Merge pull request #30 from weisslj/fix-specs-define
Makefile: rabbitmq-codegen is a build dependency only
GM: Ignore 'DOWN' when the ring is going down
Properly report SSL connections
Fix preprocessor ifdef for specs
Pika is an AMQP client, not a STOMP one, don't override the TCP port...
Use TCP ports 5673/5674 in the testsuite
rabbit_stomp_test: Fix how connections are accounted
erlang.mk: Disable eunit
Trigger a new Travis build
Merge branch 'stable'
Merge pull request #28 from rabbitmq/rabbitmq-erlang-client-27
Reset seqno to 1 with the first `confirm.select` only
Merge branch 'stable'
Commit Debian and RPM release notes
Merge branch 'rabbitmq-server-484'
HIPE compilation moved to rabbit_hipe module
Merge branch 'stable'
Backport #496 to 3.5.x
Merge pull request #496 from rabbitmq/rabbitmq-server-255
Merge branch 'master' into rabbitmq-server-255
Merge branch 'stable'
Merge pull request #495 from rabbitmq/rabbitmq-server-494
Ignore unknown channel acks in queue
Install set_rabbitmq_policy.sh as an example script
Merge branch 'stable'
HIPE compilation moved to rabbit_hipe module
Add Travis CI configuration
Add Travis CI configuration
Add Travis CI configuration
Add Travis CI configuration
Add Travis CI configuration
Add Travis CI configuration
Add Travis CI configuration
rabbitmq-server.bat: Honor $RABBITMQ_ALLOW_INPUT
Disable erl_crash.dump in rabbitmqctl and rabbitmq-plugins
rabbit_mnesia.erl: Remove trailing space in logged message
Merge pull request #489 from rabbitmq/rabbitmq-server-488
Handle queue mode values
Handle a case when newly created (priority) queue may emit some of its stats as default
Ignore tracing tool files
Minor doc improvements
Merge branch 'stable'
Merge pull request #24 from rabbitmq/rabbitmq-amqp1.0-22
Merge pull request #23 from rabbitmq/rabbitmq-amqp1.0-21
Merge pull request #31 from rabbitmq/rabbitmq-web-stomp-30
Compile standalone
Regactoring: AMQP messages, processor state, stop signals
Refactored stomp processor from process to state
erlang.mk: Disable eunit
Ensure queues are created with auto-delete and exclusive set to false
Fix size check when marshalling lists/maps/arrays
Be more precise
Docs
Docs
Docs
Merge pull request #482 from bogdando/related_PR480
uuid dependency
Fix the set_rabbitmq_policy.sh usage
Merge branch 'rabbitmq-stomp-6'
Merge pull request #94 from rabbitmq/rabbitmq-management-93
Depend on RabbitMQ's Webmachine fork
Switch to rabbit_data_coercion:to_binary/1 [from rabbit_common]
Switch to rabbit_data_coercion:to_binary/1 [from rabbit_common]
Introduce rabbit_data_coercion
Rename supervisor child: rabbit_keepalive_sup => rabbit_mqtt_keepalive_sup
Add a couple of TODOs
Merge pull request #481 from rabbitmq/rabbitmq-server-479
Merge branch 'master' into rabbitmq-server-479
A way to detect if a module is HiPE-compiled that's compatible with R16B03
Merge branch 'stable'
Merge pull request #480 from dmitrymex/stable
Allow users to define poliies and parameters in OCF script for HA
port tests to erlang.mk
port to erlang.mk
Merge branch 'master' into rabbitmq-stomp-6
Merge pull request #477 from rabbitmq/rabbitmq-server-169
Wording
Report backup directory if previous update is failed
Port README to Markdown
Merge pull request #5 from rabbitmq/rabbitmq-tracing-1
Make credentials configurable
Merge branch 'stable'
Back port https://github.com/rabbitmq/rabbitmq-common/pull/34
make source-dist: Fix path to erlang.mk in rebar-based dependencies
Merge branch 'stable'
Merge pull request #476 from rabbitmq/rabbitmq-server-470
Makes net_adm:ping/1 be executed whilst in distributed mode, before net_kernel:stop/1. Otherwise it would always fail to ping the node.
Merge pull request #469 from rabbitmq/rabbitmq-server-461
Wording
Merge pull request #475 from rabbitmq/rabbitmq-server-448
Compile
Wrong order of matches
Change capture value spec in regex to support older stdlib
Merge branch 'stable'
drop the quotes
copy
Re-indent with Emacs
copywriting
Don't log anything for non-virgin nodes
Log on startup if starting virgin node, or existing database
Merge pull request #473 from rabbitmq/rabbitmq-server-168
drop the quotes
copy
Re-indent with Emacs
copywriting
Don't log anything for non-virgin nodes
Merge pull request #472 from rabbitmq/rabbitmq-server-20
Merge pull request #32 from rabbitmq/rabbitmq-server-20
Whitespace
Merge pull request #34 from cl-rabbit/fix-failed-integer-value-negotiation-reporting
Log on startup if starting virgin node, or existing database
fix failed integer value negotiation reporting
Added unsigned field types
rpc_call arguments
Syntax errors, wrong variable name
Added rabbitmqctl command to change disk_free_limit
Added unsigned field types
Merge branch 'stable'
Merge pull request #466 from rabbitmq/rabbitmq-server-465
Parsing of additional firld types from AMQP-0-9-1
Merge pull request #468 from rabbitmq/rabbitmq-server-464
Make wait command wait for start_rabbitmq_server command
rabbit_mirror_queue_coordinator: Ensure GM exited before terminating
Merge branch 'stable'
Merge pull request #26 from rabbitmq/rabbitmq-erlang-client-25
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Add rabbitmq-lvc-plugin
modified heartbeat value to 10
Merge pull request #462 from rabbitmq/rabbitmq-server-448
Cosmetics
Use MiB as an example
Convert match to integer, support more suffix values
Re-indent with Emacs
Merge branch 'master' into rabbitmq-stomp-6
Moved parse function to separate module and specific parses to monitor modules
syntax errors
More logging
Support setting vm_memory_high_watermark and disk_free_limit in memory units
Merge branch 'rabbitmq-server-384'
Adapt .travis.yml to erlang.mk
Merge branch 'rabbitmq-test-disconnect-during-resource-alarm' of https://github.com/binarin/rabbitmq-common into rabbitmq-server-384
specs for api functions in processor
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Add many components
rabbitmq_top.app: Clear version field
package.mk is useless with erlang.mk
rabbitmq_event_exchange.app: Clear version field
`amqp_client` is a TEST_DEPS
In fact, `rabbit` is listed in .app
moved ReceiveFun definition for heartbeats to reader
removed temp reader
processor is just module now, all gen_server and amqp consumer logic is in reader now
New stomp reader working
rabbit_stomp_reader as gen_server2
rabbitmq_auth_backend_http.app: Clear version field
`rabbit` is a TEST_DEPS
Fix computation of $push_url
`amqp_client` is also a TEST_DEPS
Load rabbitmq-tools.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add rabbitmq-sharding and rabbitmq-delayed-message-exchange
Fix invalid macro name: s/test_node_rootdir/node_tmpdir/
Set a proper push URL for RabbitMQ cloned repositories
Define rabbitmq_public_umbrella, even though it's not used as a component
Move sync-* and udpate-* targets from the Umbrella to rabbitmq-tools.mk
make tests: Use $MAKE instead of hard-coding `make`
make tests: Automatically prefix config file with "rabbit-"
`rabbit` is a TEST_DEPS, not a normal DEPS
Set RABBITMQ_CONFIG_FILE for the testsuite
Default test node is named rabbit@<hostname>
rabbitmq-run.mk: Implement `make reset-other-node`
rabbitmq-run.mk: Honor OTHER_PLUGINS and OTHER_CONFIG
rabbitmq-run.mk: Move RABBITMQ_ENABLED_PLUGINS_FILE out of macro
Detect connections dropped during resource alarm
package.mk is useless with erlang.mk
make source-dist: Exclude more files
Distributed deps: Move from a blacklist to a whitelist
Switch to erlang.mk
Move to erlang.mk, tests need more work
package.mk can go now
Add start-other-node & friends targets
Add basic_script_env_settings macro to define node runtime variables
Add macros to define various runtime directories
Use RABBITMQ_* variables when creating the node temporary directory
Upgrade to erlang.mk and RabbitMQ 3.6.0
rabbitmq-run.mk: $(NODENAME) is undefined and unused
Upgrade to erlang.mk
Merge pull request #458 from rabbitmq/rabbitmq-server-457
rabbitmq-run.mk: Export RABBITMQ_SERVER
HiPE: Compile modules when RabbitMQ is started on an existing node
Merge branch 'rabbitmq-server-455'
Fix HiPE compilation during startup
Merge pull request #91 from rabbitmq/rabbitmq-management-90
sockets_used always report
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Do not autopatch RabbitMQ components
Add "rabbit" to the TEST_DEPS
Merge branch 'lshift-colons-in-username'
Merge branch 'colons-in-username' of https://github.com/lshift/rabbitmq-mqtt into lshift-colons-in-username
Merge branch 'stable'
Fix the build and a bug
Merge pull request #46 from rabbitmq/rabbitmq-mqtt-41
Fix the build and a bug
This comment is no longer relevant
Merge branch 'stable'
Merge pull request #88 from goodeggs/fix-sort-icon
Fix backwards sort arrow icon.
Merge pull request #87 from rabbitmq/rabbitmq-management-86
Explain that this controls page size now
Merge pull request #30 from rabbitmq/rabbitmq-server-413
Use a more suggestive warning message
logs warning when queues_to_recover > available file handles
Merge branch 'stable'
Merge pull request #452 from gigablah/rabbitmq-server-451
make tests: Fix typo in how $(TARGETS_IN_RABBITMQ_TEST) is constructed
Merge pull request #8 from rabbitmq/rabbitmq-web-stomp-28
Merge pull request #29 from rabbitmq/rabbitmq-web-stomp-28
Merge pull request #49 from rabbitmq/rabbitmq-web-stomp-28
Merge pull request #454 from rabbitmq/rabbitmq-server-453
Merge pull request #45 from rabbitmq/rabbitmq-server-453
Merge pull request #50 from rabbitmq/rabbitmq-server-453
Remove unneeded TCP options from config in .app.src file
Remove unneeded TCP options from config in .app.src files
Cleanup TCP options in example config file
SockJS client doesn't need to disable heartbeats
Completely disable heartbeats for SockJS
Disable heartbeats when start fun is undefined
Fix RABBITMQ_CTL_ERL_ARGS variable in rabbitmq-plugins
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Do not remove repository name from remote URL
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Infer deps URL from current clone URL
Update and rename README to README.md
make *-in-rabbitmq_test: Depend on test-build and TEST_DEPS list
packaging/standalone: Use plain Bourne shell in the patched erl(1) script
packaging/standalone: Take broker dependencies into account
Add rabbit_plugins:list/2
Ranch already handles option sanity checking, so this can go
Ranch takes care of these options already
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: rabbitmq_test is a TEST_DEPS for rabbit
make tests: Run tests in rabbitmq_test as well
Merge pull request #44 from rabbitmq/rabbitmq-server-446
Merge pull request #48 from rabbitmq/rabbitmq-server-446
Merge pull request #29 from rabbitmq/rabbitmq-server-446
Use rabbit_net:accept_ack instead of ranch:accept_ack
Use rabbit_net:accept_ack instead of ranch:accept_ack
Add file_cache_handler and buffer tuning back
Merge branch 'stable'
Merge pull request #450 from rabbitmq/rabbitmq-server-447
Switch absolute memory watermark values to be in bytes
rabbitmq-run.mk: Use $(RABBITMQ_BROKER_DIR) when compiling covered modules
Put `*_usage.erl` dependencies and recipe in a single rule
Merge branch 'stable'
Merge pull request #444 from rabbitmq/rabbitmq-server-433
fix issue 433
Merge branch 'stable'
Merge pull request #442 from rabbitmq/rabbitmq-server-441
rabbitmq-run.mk: Define $(RABBITMQ_BROKER_DIR)
Applications being required by RabbitMQ can't be plugins
rabbit.app: rabbit_common and ranch are required by RabbitMQ
Ignore ./debug
Remove a comment that is fairly obvious
Handle cases where Ranch wasn't yet started
Ignore *.plt files
Merge branch 'stable'
Merge pull request #440 from rabbitmq/rabbitmq-server-438
Bump timeout to 60 seconds
Respond with not_found or {absent, ..., ...} in case of a timeout
Merge branch 'rabbitmq-server-349' of https://github.com/binarin/rabbitmq-common into binarin-rabbitmq-server-349
Merge pull request #25 from rabbitmq/rabbitmq-server-441
Merge pull request #24 from rabbitmq/rabbitmq-common-23
packaging/windows-exe: Use ExecDos plugin to run batch files
Add retry limit to rabbit_amqqueue:with/2,3
fixes dialyzer warnings
fixes specs and warnings
fixes various dialyzer warnings
packaging/windows-exe: Fix quoting of uninstall.exe
Merge branch 'rabbitmq-server-264'
packaging/windows-exe: Allow silent install
packaging/windows-exe: Wait for uninstall to finish before installing
addresses dialyzer warnings
Merge pull request #439 from rabbitmq/rabbitmq-server-435
Fix memory reporting for connections
Merge branch 'stable'
Merge pull request #437 from rabbitmq/rabbitmq-server-436
Makefile: Fix how we modify an autopatched erlang.mk
Merge pull request #76 from rabbitmq/rabbitmq-management-50
fixes clear_read_cache get_env handling
Merge pull request #22 from rabbitmq/rabbitmq-common-21
Restore the handshake timeout functionality in AMQP reader
Merge branch 'stable'
Makefile: Add Ranch as a BUILD_DEPS to be sure Ranch 1.2.0 is pulled
Makefile: Required Ranch version was moved to rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Default Ranch to 1.2.0
Use erlang:min/2, not min/2 which is not available in Erlang R13B03
Merge branch 'rabbitmq-management-50' of https://github.com/rabbitmq/rabbitmq-management into rabbitmq-management-50
fix connections
Merge pull request #20 from rabbitmq/rabbitmq-server-434
Respect authentication failure notification capability here
Merge pull request #430 from rabbitmq/rabbitmq-server-429
Merge pull request #17 from rabbitmq/rabbitmq-server-429
Forward-declare type tls_atom_version() when building with Erlang R16B03
Merge branch 'master' into rabbitmq-server-429
Merge branch 'master' into rabbitmq-server-429
Merge pull request #432 from rabbitmq/rabbitmq-server-428
Merge pull request #19 from rabbitmq/rabbitmq-server-428
Merge branch 'stable'
Merge pull request #18 from binarin/rabbitmq-common-pmon-contract-breach
Merge pull request #431 from binarin/rabbitmq-common-pmon-contract-breach
Merge pull request #42 from rabbitmq/rabbitmq-server-260
Merge pull request #46 from rabbitmq/rabbitmq-server-260
Merge pull request #22 from rabbitmq/rabbitmq-server-260
Merge pull request #414 from rabbitmq/rabbitmq-server-260
Merge pull request #8 from rabbitmq/rabbitmq-server-260
Oops
Handle cases with undefined queue collector
Make pmon:demonitor/2 respect its contract
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-management-50
Make pmon:demonitor/2 respect its contract
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Merge branch 'master' into rabbitmq-management-50
rabbit_ctl_misc => rabbit_control_misc
rabbitmq-dist.mk: Fix an infinite loop
Discards 'rabbit_ctl_misc.erl'
Moves print_cmd_result/2 from discarded rabbit_ctl_misc to rabbit_control_misc.
fix redirect
add option to ignore colons in usernames
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
Merge branch 'master' into rabbitmq-server-260
removes unused export
adds missing state param
changed redirect
adds new zip_msgs_and_acks/4 callback
refactor handling of acks after batch_publish_delivered
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
make test-dist: Use $(ERLANG_MK_RECURSIVE_TEST_DEPS_LIST)
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
unit tests
Merge branch 'master' into rabbitmq-server-260
Merge pull request #377 from rabbitmq/rabbitmq-server-351
Merge pull request #14 from rabbitmq/rabbitmq-server-351
removed unused variable
pagination all contexts
Switch to Ranch for connection handling
Switch to Ranch removed the ssl_socket record
Switch to Ranch for connection handling
Switch to Ranch for connection handling
Switch to Ranch for connection handling
Merge branch 'master' into rabbitmq-server-351
Merge branch 'master' into rabbitmq-server-351
Merge branch 'stable'
Merge pull request #425 from rabbitmq/rabbitmq-server-417
Merge pull request #15 from rabbitmq/rabbitmq-server-417
make tests: Set $RABBITMQADMIN in the Makefile
Add host_ip field
Merge pull request #424 from mattymo/host_ip_param
makes sures the aggregator process doesn't hang
report error back to user
Add host_ip field
Merge branch 'stable'
Explain
Merge pull request #422 from rabbitmq/rabbitmq-server-420
Handle not_allowed results when trying to log in
Oops
refactors credit flow code
Group related headers
Merge branch 'rabbitmq-server-80'
packaging/windows-exe: Append version to program name in "Add/Remove Programs"
packaging/windows-exe: Use rabbitmq.ico in the "Add/Remove Programs" window
packaging/windows-exe: Remove \Program Files\RabbitMQ Server on uninstall
packaging/windows-exe: Always install in \Program Files
filter by name
SwiftMQTests.java: Use a timeout of 10 seconds in consumer.receive()
test/swiftmq/run-tests.sh: Use $MAKE instead of hard-coding `make`
test/swiftmq/Makefile: Use $(ANT) instead of hard-coding `ant`
adds run-lazy-vq-tests make target
Merge branch 'master' into rabbitmq-server-351
brings changes from rabbitmq-server-351
Merge pull request #13 from rabbitmq/rabbitmq-server-419
Move some functions back to reduce distance from master
Reformat with Emacs
More sensible logging of connection-level exceptions on running connections
More sensible logged messages for non-local connections and failing tuning
More sensible formatting for channel-level ("soft") exceptions
fix items
filter by name
Make log entries for "abruptly closed connections" make more sense
Rename fn, group logging functions
Refactor
Special case access_refused errors
packaging: Quote variables passed to sub-makes
packaging: Pass SIGNING_* variables to sub-makes
Delay rabbit_mgmt_db initialization
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Add rabbit to TEST_DEPS during `make check`
Explain
Merge pull request #408 from rabbitmq/rabbitmq-server-62
Merge branch 'master' into rabbitmq-server-62
Merge pull request #6 from rabbitmq/rabbitmq-server-62
Merge pull request #412 from binarin/rabbitmq-server-396
Merge pull request #4 from binarin/rabbitmq-common-3
Merge pull request #411 from binarin/rabbitmq-server-ocf-idempotent-cookie
Merge pull request #410 from binarin/rabbitmq-server-ocf-typo-fix
Distinct exit-codes for CLI utilities
Don't update cookie on every run of HA OCF script
Fix metadata in OCF HA script
packaging/windows-exe: Fix circular variable references
packaging: Add `make clean`
APT repository: Give more control to the caller
packaging: Automatic `make clean` can be disabled
packaging/generic-unix: Do not remove build directories in `make dist`
Merge pull request #407 from rabbitmq/rabbitmq-server-237
Merge pull request #5 from rabbitmq/rabbitmq-server-237
Merge pull request #21 from rabbitmq/rabbitmq-server-237
Slightly better name
Merge pull request #7 from cl-rabbit/double-channel-open-error-fix
make source-dist: Name the archive "amqp_client-$VERSION"
channel.open on opened channel should throw channel_error
Merge branch 'master' into rabbitmq-server-62
merges master into rabbitmq-server-62
uses new emitting_map helpers
refactors emitting_map helper
move mapping helpers to rabbit_common
whitespace
`make clean-source-dist` is PHONY
Adds direct_no_vhost_test/0 and network_no_vhost_test/0 tests.
Adds calls for direct_no_vhost_test/0 and network_no_vhost_test/0.
make distribution: Create documentation, source and binary packages
Updates error tag to 'not_allowed'.
Adds handling of AMQP errors on connection establishment.
Adds handle_exception/3 clause to close connection and send response to client when AMQP error is experienced during handshake.
Updates exception to handle 'not_allowed' error.
Update from 'access_refused' error tag to 'not_allowed' for failed vhost validations. Adds check_access/4 clause to allow passing of error tag as a variable.
make source-dist: Do not distribute the website
Initialize PRNG with unique data
Merge branch 'stable'
Merge pull request #405 from rabbitmq/rabbitmq-server-119
Typo
auth_user => authenticate_user
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Add rabbitmq-website to the components
Add Travis CI configuration
make tests: Pass certificates path down to test/Makefile
Introduce 'rabbitmqctl auth_user' to authenticate user.
Initial commit.
Adds tests for 'auth_user' control command. Adds handling of results of {ok, Result} format.
Adds 'auth_user' control command.
Adds handling of 'auth_user' control command results.
Makefile: Remove a debug "echo"
packaging/Makefile: Remove a debug $(info)
make packages: Move targets to packaging/Makefile
make source-dist: -n means different things for BSD and GNU tar
make source-dist: Do not distribute Mercurial and Travis files
Revert "Disable tests-with-broker and standalone-tests if there is nothing to do"
RJMS-1.4.7-SNAPSHOT
RJMS-1.4.6
Add compatibility check for release RJMS 1.4.6
rabbitmq-env.bat: No need to set a default value in %COMPUTERNAME%
rabbitmq-env: Revert "Use Erlang to determine local hostname"
Update to 1.4.6-SNAPSHOT
make run_test_detached: Set ERL_LIBS in the test environment
test.mk: Explicitely set the target node in rabbitmqctl args
rabbitmq-defaults.bat and rabbitmq-echopid.bat: Fix line ending
rabbitmq-env{,.bat}: Use Erlang to determine local hostname
rabbitmq-env.bat: Fix how we escape double quotes
make tests: Add `rabbit` to $(TEST_DEPS)
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Do not automatically add rabbitmq_tests to amqp_client's TEST_DEPS
make tests: Actually *build* the test modules before using them
make boot_broker: Clean the entire $(TEST_TMPDIR)
New virgin-test-tmpdir target
Do not remove $NODE_TMPDIR before starting a node
Suport verbosity levels
Disable tests-with-broker and standalone-tests if there is nothing to do
rabbitmq-*.mk: Support V=2
make dist: Fix dependencies list for .ez archives
Rename keys
Fix autorefresh when a non-existent page is requested
Short-circut cases with no results
Rename fn
removes rabbit_ctl_timeout_tests.erl from rabbit repo
Adapt .travis.yml to erlang.mk
Connect `make tests`
Merge pull request #2 from binarin/rabbitmq-common-run-background-node-fix
Fix `run-background-brocker` makefile target
More precise name, cosmetics
One more guard
Rename constant
Rename fn
Refactor get_pagination_offset/1
Rename
Cosmetics
Rename test fn
make source-dist: Put distributed archives in $(PACKAGES_DIR)
Makefile: Support V=2
Use a more standard value to represent a lack of something
Ditto
Cosmetics, copy edits
Merge branch 'master' into rabbitmq-management-50
Merge pull request #1 from rabbitmq/rabbitmq-server-379
Merge branch 'master' into rabbitmq-server-379
Merge pull request #395 from rabbitmq/rabbitmq-server-379
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Move script locations & ant variables to rabbitmq-run.mk again
Ignore ./etc
Move definitions of script variables to rabbitmq-components.mk
rabbitmq-un.mk: Use %TEMP% on Windows for the run directory
Git: Ignore editors' backup files
Update erlang.mk
rabbitmq-components.mk: Consider sockjs and toke as 3rd-party deps
Makefile: Make sure the default goal remains `all`
Merge branch 'master' into rabbitmq-server-379
moves emitting_map to rabbit_control_misc
moves emitting_map to rabbit_control_misc
Merge branch 'stable'
Ignore erlang.mk artifacts (when switching from master)
Merge branch 'stable'
Merge pull request #397 from rabbitmq/rabbitmq-server-91
Merge branch 'stable'
rabbitmq-service.bat: Use RABBITMQ_ prefix for *LOGS variables
rabbitmq-service.bat: Set $ERL_LIBS in the service environment
rabbitmq-service.bat: Use RABBITMQ_ prefix for *LOGS variables
rabbitmq-env.bat: Use lazy variable expansion
rabbitmq-env.bat: Use consistent indentation across the file
scripts: Convert Batch files to DOS line endings
packaging/windows-exe: Use explicitely $(VERSION) in the source zip name
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Move definitions of script variables to rabbitmq-components.mk
rabbitmq-un.mk: Use %TEMP% on Windows for the run directory
Git: Ignore editors' backup files
scripts: Pass script name to rabbitmq-env.bat
rabbitmq-env.bat: Adapt to erlang.mk
rabbitmq-env.bat: Use backslashes in paths
rabbitmq-env.bat: Automatically set ERLANG_HOME if "erl" is in the PATH
rabbitmq-env.bat: Take the caller script name as first argument
rabbitmq-defaults.bat: Detect development env on Windows
Git: Ignore editors' backup files
merges master with erlang.mk changes
brings file from old rabbitmq-server-62 branch
Test failure to start disk monitor in unsupported platforms
rabbitmq-env: Ensure RABBITMQ_HOME is an absolute path
rabbitmq-plugins: Don't query rabbitmqctl if env vars are explicitly set
Doc edits
packaging/standalone: Use "cp", not "cp -a"
packaging: Do not pass $(ERL_LIBS) to sub-make
packaging/standalone: Use "xzcat | tar" instead of "tar -J"
make package-standalone-macosx: Only valid on Mac OS X
Makefile: Use "cp -r", not "cp -a"
make source-dist: Mention we should fix file timestamps
packaging: Do not pass $(DEPS_DIR) to sub-make
make source-dist: Replace version in rabbit.app.src as well
make source-dist: Use $(PROJECT) instead of hardcoding `rabbit`
packaging/standalone: Test if `generate_release` succeeded
packaging/standalone: Sort files in final archive
packaging/standalone: Remove patch(1) backup if any
packaging/standalone: Use $(abspath) instead of `pwd`
packaging/standalone: Remove existing build directories
packaging/standalone: Do not pass $(DEPS_DIR) to sub-make
packaging/standalone: Fix path to default $(SOURCE_DIST_FILE)
packaging/standalone: Ensure plugin deps are listed once in the rel script
Doc edits
make source-dist: "find -s" is not portable, use sort(1)
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Consider sockjs and toke as 3rd-party deps
Wording
Ditto
Ditto
Doc edits
make source-dist: Sort files in the source archive
Makefile: USE_PROPER_QC is now a simply expanded variable
Makefile: Make sure the default goal remains `all`
Makefile: Make sure the default goal remains `all`
Makefile: Move .DEFAULT_GOAL to the same place as other Makefiles
Makefile: Make sure the default goal remains `all`
cosmetics
Merge pull request #390 from rabbitmq/rabbitmq-server-369
make source-dist: Only force plugins' version when it's empty
make source-dist: Fix licenses handling to match previous behavior
make source-dist: Do not distribute some subdirectories
make source-dist: Do not distribute rabbitmq-metronome and -toke
Move resource_alert to rabbit-common
Port resource_alarm from rabbitmq-server
rabbit_reader changes from #381, references #379
Merge branch 'fix-alarms' of https://github.com/binarin/rabbitmq-server into rabbitmq-server-379
Merge branch 'stable'
Merge pull request #394 from aboroska/rabbitmq-server-117-fix-function-name
Fix spelling of function name
Merge branch 'stable'
Merge pull request #391 from rabbitmq/rabbitmq-server-117
DEPS: Remove rabbit
DEPS: Remove rabbit
DEPS: Remove rabbit
DEPS: Remove rabbit
DEPS: Remove rabbit
DEPS: Remove rabbit
.app.src: Default vsn is ""
.app.src: Default vsn is ""
Remove stale package.mk
Remove stale package.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Disable disk monitor in unsupported platforms
Merge branch 'rabbitmq-server-386'
make source-dist: Do not distribute plugins/ directories
make source-dist: Properly list distributed components
make source-dist: Filter out `rabbit` from the dependencies list
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Do not check rmq-comp.mk during `make up`
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: `test` is an alias to `tests`
Makefile: `test` is an alias to `tests`
Check port using ipv6
Rename policy parameters, references #369
No need to set -Dpre17_type_specs
Patch SockJS to build with Erlang R16B
Disable FHC read cache by default
Merge pull request #20 from rabbitmq/erlang.mk
Merge pull request #18 from rabbitmq/erlang.mk
Merge pull request #4 from rabbitmq/erlang.mk
Merge pull request #7 from rabbitmq/erlang.mk
Merge pull request #45 from rabbitmq/erlang.mk
Merge pull request #27 from rabbitmq/erlang.mk
Merge pull request #7 from rabbitmq/erlang.mk
Merge pull request #40 from rabbitmq/erlang.mk
Merge pull request #2 from rabbitmq/erlang.mk
Merge pull request #7 from rabbitmq/erlang.mk
Merge pull request #77 from rabbitmq/erlang.mk
Merge pull request #2 from rabbitmq/erlang.mk
Merge pull request #23 from rabbitmq/erlang.mk
Merge pull request #14 from rabbitmq/erlang.mk
Merge pull request #3 from rabbitmq/erlang.mk
Merge pull request #385 from rabbitmq/erlang.mk
Merge pull request #20 from rabbitmq/erlang.mk
Merge pull request #5 from rabbitmq/erlang.mk
Define pre17_type_specs when using Erlang R16B
Move compare_version to rabbitmq-common
Move compare_version macro from rabbitmq-server
rabbit_web_dispatch_test: Fix relative path to docroot
Add amqp_client as a test dependency
Update erlang.mk's build.config
Adapt .travis.yml to erlang.mk
Require cowboy 1.0.3
Adapt .travis.yml to erlang.mk
Adapt .travis.yml to erlang.mk
Adapt .travis.yml to erlang.mk
Adapt .travis.yml to erlang.mk
Adapt .travis.yml to erlang.mk
Adapt .travis.yml to erlang.mk
Update erlang.mk's build.config
Fix project name...
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
Update erlang.mk's build.config
fixes typos
erlang.mk: Disable the eunit plugin
Adapt .travis.yml to erlang.mk
Adapt .travis.yml to erlang.mk
Cosmetics
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Set properties for the Java testsuite
Merge branch 'stable'
Merge pull request #383 from lemenkov/add_cmd_help
Recognize help as a valid sub-command
Fix cluster-wide alarm handling
Merge branch 'master' into erlang.mk
Merge branch 'master' into erlang.mk
Merge branch 'stable'
Merge pull request #378 from rabbitmq/rabbitmq-server-207
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
fix spaces JS
fix code style
Accept absolute values in memory high watermark
fix code style
Merge branch 'stable'
Add `exclusive` item to `rabbitmqctl list_queues`
Merge pull request #373 from binarin/rabbitmqctl-list-queues-exclusive
handle API errors
Merge branch 'stable'
Disable erlang.mk's eunit plugin
merge stable into master
Eliminate warnings
Upgrade JUnit to 4.12
Merge pull request #38 from rabbitmq/rabbitmq-mqtt-37
We'll investigate this scenario in #39
Towards reliably working argument equivalence tests
Merge branch 'stable'
removes whitespace
typo
Rework tests
Merge pull request #376 from rabbitmq/rabbitmq-server-375
fix issue 375
Adapt .travis.yml to erlang.mk
.travis.yml: Use double-quoted flow scalar for all Erlang versions
.travis.yml: Cache apt packages
.travis.yml: Explain why we re-checkout
Re-checkout the tag or branch so git_rmq fetch method works
Typo
Refactor
Adapt .travis.yml to erlang.mk
pre-standalone-tests depends on test-build
rabbitmq-tests.mk: Remove $(TEST_TMPDIR) before running the testsuite
setup-rabbit-test.sh: Take rabbitmqctl location from environment
test/build.xml: Take Java client location from environment
Git: Ignore testsuite artifacts
Fix RabbitMQ configuration file path
ssl_lifecycle: Get SSL certs location from environment
test_util: Take rabbitmqctl location from environment
rabbitmq-tests.mk: Pass $(RABBITMQCTL) to testsuites
rabbitmq-tests.mk: Pass variables to all scripts
Git: Ignore Python testsuite artifacts
test_runner: Let the Makefile setup PYTHONPATH for us
rabbitmq-tests.mk: Use $(WITH_BROKER_TEST_ENVVARS) to pass variables to tests
rabbitmq-tests.mk: Add an alias to restore `make test`
Merge branch 'stable'
Merge pull request #374 from bogdando/ra_ocf_ha
Fix piped exit codes expectations and count processing
Fix the timeout arg for the su_rabbit_cmd
Add tests for queue arguments
Explain
Revert "set auto_delete=false for QoS1 subscriptions"
Add `exclusive` item to `rabbitmqctl list_queues`
Use `sed -E`, not `sed -r`
Fix compatibility with GNU sed
TEST_PLUGINS_ROOTDIR definition was not committed
rabbitmqctl-env: Fix how we locate rabbit_common
fixes test
Merge branch 'master' into rabbitmq-server-351
adds policy validator tests
Update rabbit_queue_decorator from rabbitmq-server master branch
Update rabbitmq-components.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Move password_hashing_tests.erl to rabbitmq-test
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbit_common is added automatically
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Allow to specify temporary $(PLUGINS)
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk and rabbitmq-components.mk
Give path to the source dist to packages' Makefiles
Packages are now "self-hosted": no need for the packaging dir
Remove exec bit from non-executable scripts
Update distributed LICENSE with license_info from plugins
Finish with generic-unix and standalone-macosx packages
Add targets to build packages
Fix "/LANG=${LANG_ENGLISH} language not loaded" warning
Small cleanups to the Windows exe installer
Don't append `.txt` to `rabbitmq.config.example` on Windows
Fix typo, a trailing ')' was left over
RPM: Include manpages
Add install-man target to install manpages
Make the Windows non-exe package work with erlang.mk
Add install target for Windows
sed: Use [[:blank:]] instead of \s
Make the RPM package work with erlang.mk
In source-dist, fix dependencies' erlang.mk
awk: split() takes a list of separators, not a regex
Debian: In fact, unzip(1) is not needed
Modernize Debian package and make it work with erlang.mk
Move scripts list to a variable
Define $(VERSION) earlier
Add plugins dir to ERL_LIBS even for non-dev environment
Overwrite symlink in $(RMQ_BINDIR)
Remove .zip dist file before creating it again
Install script symlinks in $(RMQ_BINDIR)
Remove unused variable $(UNZIP)
Be conservative only with rabbitmq-server-*
Be more conservative with rsync --exclude
Include `packaging` in source-dist
Git: Ignore uncompressed manpages
Do not compress manpages, the packaging system handles that
Remove debugging echo
Add `make install` target
Escape '{' with [] in sed regular expression to please GNU sed
Move common modules from rabbitmq-server to rabbitmq-common
rabbitmq-env: Fix vars for rabbitmq-plugins before setting ERL_LIBS
Git: Ignore /plugins instead of /dist
rabbitmq-env: Adjust RABBITMQ_*PLUGINS* if running from dev env
rabbitmq-defaults: Set RABBITMQ_DEV_ENV...
Use `plugins` as the dist directory directly
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbit.app: Default to version 0.0.0 in source app file
Git: Ignore source distribution files
Use rabbitmq-components.mk to fetch RabbitMQ components
Update erlang.mk
Update erlang.mk
Add all revisions/tags/branches in the source archive
In source-dist, set all applications' version to `$(VERSION)`
Finish `make source-dist` and update erlang.mk
Add `make source-dist` to prepare the source archive(s)
Remove unused scripts & Makefiles
Use dependency branches matching the parent branch
Update erlang.mk
Update erlang.mk and rely on the new makedep feature
Move codegen.py to rabbitmq-common
Tests are moved to rabbitmq-test
rabbitmq-env: Use deps/rabbit_common in ERL_LIBS
Start rabbit_common on boot
rabbit_plugins: Do not consider rabbitmq-common as a plugin
Makefile: Take rabbitmq-common from GitHub
Define ERL_LIBS when RabbitMQ runs from its source directory
Use `$(DEP_PLUGINS)`
Update erlang.mk
`make run*`-related targets were moved to rabbitmq-run.mk
Makefile: Use the rabbitmq-run.mk plugin, not -dist.
Git: Ignore /dist
Use rabbit_common .ez archive instead of deps/
Update erlang.mk
Git: Ignore /doc and /logs
Update erlang.mk and disable `edoc` plugin
`rabbitmq_common` is now `rabbit_common`
Use EXTRA_SOURCES for `*_usage.erl`
Style
Update erlang.mk
Makefile: Add targets to run RabbitMQ
Git: Ignore *.beam
Makefile: Set TEST_ERLC_OPTS
Git: Ignore generated documentation
Makefile: Sort content a bit
Makefile: Connect manpages to the build
erlang.mk: Disable EDoc generation
erlang.mk: Apply experimental speed improvements
Use $(ERL) from erlang.mk
Makefile: Resolve $(USE_PROPER_QC) only when needed
Makefile: Use `erl -version` to do ERTS version tests
Add $(gen_verbose) in front of generated sources
Makefile: Compile behaviors first
Update .gitignore
Move .app file to src/
Move headers to rabbitmq-common
Makefile: Use `erlang.mk`
Move modules to rabbitmq-common
Add `erlang.mk`
Merge branch 'stable'
description/0 is not a behaviour callback
Use an empty version string
adds lazy queue tests
Merge pull request #367 from rabbitmq/rabbitmq-server-366
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
New component: rabbitmq-dotnet-client
Update erlang.mk
Update rabbitmq-components.mk
Initial move to erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Use $RABBITMQ_NODENAME instead of hard-coding nodename
Initial move to erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Initial move to erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Initial move to erlang.mk
Update rabbit_nodes from rabbitmq-server master branch
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Do not add rabbitmq_test if it's already a $(TEST_DEPS)
`with-broker-tests` depends on `pre-standalone-tests`
Automatically add rabbitmq-server to TEST_DEPS
Export variables to use rabbitmq-codegen & the Java client
Add last components
Initial move to erlang.mk
Initial move to erlang.mk
Initial move to erlang.mk
Initial move to erlang.mk
Initla move to erlang.mk
renames according to priority queue internal API
fixes rabbit_priority_queue:batch_publish_delivery/4
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
New component: rabbitmq-amqp1.0
Initial move to erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Several new components
Pass test environment to $(WITH_BROKER_SETUP_SCRIPTS)
Initial move to erlang.mk
Disable eunit
Initial move to erlang.mk
EZ_DIR is now an absolute path
rabbitmq-run.mk: Silence $(ERL_CALL) by default
Merge branch 'stable'
Merge pull request #365 from bogdando/ra_ocf_ha
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add bin/rabbitmqadmin to the distributed EZ
Sync lost change from Fuel HA rabbitmq OCF fixes
Allow applications to modify the distributed EZ
Merge branch 'stable'
Merge pull request #364 from bogdando/ra_ocf_ha
rabbitmq-run.mk: Pass pidfile path to rabbit_tests
Port Fuel fixes for the HA rabbitmq OCF
fixes queue transition from default to lazy
Update to use list_formatted/1 for ordered display of policies.
Updates to call to rabbit_control_main:emitting_map_with_wrapper_fun/5.
Updates to call to rabbit_control_main:emitting_map_with_wrapper_fun/5.
Updates to reference rabbit_control_main:emitting_map_with_wrapper_fun function. Adds map_fun/0 helper function.
Adds emitting_map_with_wrapper_fun/5 and emitting_map_with_wrapper_fun/6. Fixes handling of emitted messages which use 'continue' tag.
Changes call to timeout_tests, to rabbit_ctl_timeout_tests following module renaming.
Renames timeout_tests.erl to rabbit_ctl_timeout_tests.erl. Removes unused imported functions.
Merge pull request #361 from rabbitmq/rabbitmq-server-63
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Move the testsuite to erlang.mk expectations
Git: Ignore files and directories generated with erlang.mk
rabbitmq-tests.mk: Fix several bugs with testsuite handling
rabbitmq-run.mk: Add test-tmpdir target
Adds net_ticktime to rabbitmqctl status output.
pages preferences
rabbitmq-dist.mk: Only remove unexpected EZ in $(DIST_DIR)
During `make tests`, let the node log to stdout/stderr
Be sure to remove the previous enabled_plugins file
rabbitmq-components.mk: Automatically add rabbitmq_test to TEST_DEPS
Merge branch 'stable'
Merge pull request #360 from rabbitmq/rabbitmq-server-84
Remove %%VSN%% in the version field
New component: rabbitmq_management
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Initial move to erlang.mk
rabbitmq-dist.mk: Include priv/ in the distributed EZ file
Move rabbit_mirror_queue_misc:all_nodes/0 to rabbit_nodes:all_running/0
Fix build by removing unused variables
rabbit_common is added automatically
rabbit_common is added automatically
rabbit_common is added automatically
rabbit_common is added automatically
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
New component: rabbitmq_web_dispatch
rabbitmq-components.mk: Automatically add rabbitmq-common to DEPS
Initial move to erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Add "rabbit" to DEPS in rabbitmq-components.mk
Merge branch 'master' into rabbitmq-server-351
Fixes indentation.
fixes gm_qc API
fixes QuickCheck tests for rabbit_backing_queue_qc
Merge branch 'master' into rabbitmq-server-351
Merge pull request #359 from rabbitmq/rabbitmq-server-358
Merge branch 'master' into rabbitmq-server-351
fixes failing test
fixes batch_publish tests
Merge branch 'stable'
restores the rabbit_variable_queue tests
fixes stats/delta handling on publish_delivered
fixes stats for lazy publish delivered
cosmetics
brings comments up to date
fixes in_r/2 implementation for lazy queues
updates state assertion function for lazy queues
makes sure convert_to_lazy terminates
fixes call to queue stats from publish
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update erlang.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update rabbitmq-components.mk
New component: rabbitmq_management_agent
Remove %%VSN%% in version string
Initial move to erlang.mk
implements requeue for lazy queues
do not code with headache
pagination UI
Merge branch 'stable'
Merge pull request #356 from bogdando/ra_ocf_ha
adds mode to backing_queue_status info
implements lazy publish delivered
Update rabbit_backing_queue from rabbitmq-server master branch
Only list EZ targets if target is "do-dist"
Simplify and fix "run-broker" dependencies handling
Changes internal_user_filter/1 name to extract_internal_user_params/1. Changes user_permission_filter/2 name to extract_user_permission_params/2. Restores TODO comment.
uses binary_to_exisiting_atom when handling queue mode policy
fixes unused var warning
merge master into rabbitmq-server-351
Update rabbitmq-components.mk
Update rabbitmq-components.mk
rabbitmq-components.mk: Check diff before committing rabbitmq-components.mk
Auto-commit rabbitmq-components.mk if DO_COMMIT == yes
rabbitmq-components.mk: Add a target to update rabbitmq-components.mk
Merge branch 'stable'
Merge pull request #355 from rabbitmq/rabbitmq-server-112
Missing comma
rabbitmq-components.mk: Check freshness with `make fetch-deps` too
rabbitmq-components.mk: Provide a list of RabbitMQ components
rabbitmq-components.mk: Fix typos
Merge branch 'stable'
Read memory monitor interval from configuration
Merge pull request #354 from Jakauppila/rabbitmq-server-354
Merge pull request #74 from rabbitmq/rabbitmq-management-stable-26
Trailing ws
Empty HTTP API responses replace by null
pagination backend
Move call rabbitmq-ev.bat
Adds call/4 to default ToBinUtf8 to 'false' when calling call/5. Updates some list_* action functions to use call/4.
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Merge pull request #344 from rabbitmq/rabbitmq-server-336
Fix `make distclean` deactivation
Fix to call list_down/1 instead of list/1 when listing down queues.
Update erlang.mk and rabbitmq-components.mk
Update erlang.mk and rabbitmq-components.mk
Update erlang.mk
rabbitmq-components.mk: Add special case when under the Umbrella
rabbitmq-components.mk: Name Java client `rabbitmq_java_client`
Move this constant closer to the only place it is used
Merge branch 'stable'
Merge pull request #69 from rabbitmq/rabbitmq-management-67
Whitespace
Whitespace
Rename a test
Merge pull request #72 from rabbitmq/rabbitmq-management-stable-20
Convert string to boolean in SSL config
removes non batch-sync code path
fixes conflicts
refactors message sync'ing in batches
send msg batch in proper order
get into account unacked messages when syncing
adds default sync batch size on the app config
Clarify this comment
removes unused constant
publish/6 for lazy queues
queue_out/1 for lazy queues
in_r/2 for lazy queues
paging for lazy queues
variable queue state assertion for lazy queues
handles queue-mode policy/argument
adds x-queue-mode argument
adds queue-mode policy
Wording
Merge branch 'master' into rabbitmq-server-336
Merge branch 'rabbitmq-server-270' (again)
Fix migration from 2.1.1
added unit-test 401 json error
added Content-Type json on halt_response
Merge branch 'stable'
Use a public-facing email address
Merge branch 'stable'
Update Debian metadata
Merge branch 'stable'
Merge pull request #44 from rabbitmq/rabbitmq-stomp-43
Update rabbit_authz_backend from rabbitmq-server master branch
Merge branch 'stable'
refactored ensure_endpoint/5 for readability
Removes explicit 'ok' return.
Changes socket to passive. Adds verification of AMQP connection - checks if AMQP method is replied back, with no open channels. Replaces timer:sleep(100) by setting timeout in gen_tcp:recv/3.
Update to use abstraction function rabbit_control_main:emitting_map/4.
Adds emitting_map function to abstract aggregator logic for all list_* backend operations. Adds {Ref,  continue} to handle display of more results before finishing. Removes unsed function call/3.
Update to use abstraction function rabbit_control_main:emitting_map/4. Updates list_permissions/2 to use user_permission_filter/2. Updates list_users/0 to use internal_user_filter/1.
Updates to use abstraction function, rabbit_control_main:emitting_map/4. Updates existing consumers_all/1 to also use get_queue_consumer_info/2. Fixes indentation.
Commit 3.5.6 package release notes
implemented user generated queue names for /exchange & /topic destinations
Use $(VERSION) in app dist file if it doesn't have its own version
Listing dependencies by looking at $(DEPS_DIR) content is incorrect
Removes duplicated code in rpc_call/7.
Removes TIMEOUT_LIST_OPS_PASS macro. Now used in 'timeout_tests' module.
Adds boolean parameter to call/5 to determine whether list_to_binary_utf8/1 is applied to Args. Moves spawning of rabbit_cli:rpc_call/7 to call/5. Moves calling of wait_for_info_messages/4 to call/5.
Moves 'rabbitmqctl' timeout successful tests to separate module.
Update to print command when invalid parameters are passed.
Moves mapping and response message sending to list_formatted/3.
Updates consumers_all/3 to get consumer info in seperate function.
Removes append operation on result list.
Removes 'don't care' sign on Ref variable.
Function name change of wait_info_messages.
Updates 'Pid' variable to 'AggregatorPid'. Updates info_all/3 function and spec.
Updates 'Pid' variable to 'AggregatorPid'.
Updates rpc_call function spec.
Updates info_all/4 function spec. Updates consumers_all/3 function and spec.
Removed TODO comment.
Adds info_all/3 for dynamic display of vhosts.
Adds list_formatted/3 for dynamic display of parameters.
Adds list_formatted/3 for dynamic display of policies.
Adds connection_info_all/3 for dynamic display of connections.
Adds info_all/4 for dynamic display of exchanges.
Updates list_* operations to dynamically display info. Adds notify_if_timeout/3 for terminating display of info process on timeout.
Adds rpc_call/7 for remote calls for dynamic listing of info. Adds 'function_clause' case match to handle commands with invalid parameters.
Adds info_all/3 for dynamic listing of channels.
Adds info_all/4 for dynamic listing of bindings.
Adds list_users/2 for dynamic listing of users. Adds list_user_permissions/3 for dynamic listing of user permissions. Adds list_vhost_permissions/3 for dynamic listing of vhost permissions.
Adds info_all/4 for dynamic listing of queues. Adds consumers_all/4 for dynamic listing of consumers
Merge branch 'stable'
fixes check_xref for erlang:max
Add compatibility check for 1.4.4.
Merge branch 'stable'
Port .travis.yml from master
Tweaks for travis build
Kick off a travis build
Merge branch 'gmr-travis-ci-testing'
Make sure slapd is installed
Merge branch 'travis-ci-testing' of git://github.com/gmr/rabbitmq-auth-backend-ldap into gmr-travis-ci-testing
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #17 from rabbitmq/rabbitmq-server-338
Merge pull request #345 from rabbitmq/rabbitmq-server-338
Cosmetics
Cosmetics
Line things up a wee bit for consistency.
Have the callback spec be backwards compatible.
Be backwards compatible for homegrown auth modules.
Add test cases for mixed authentication&authorisation modules, check tags.
Git: Ignore /plugins
Update rabbitmq-components.mk
Update rabbitmq-components.mk
Update erlang.mk and use rabbitmq-components.mk
Remove debug messages
Use dependency branches matching the parent branch
Update erlang.mk
Update erlang.mk and rely on the new makedep feature
Ensure rabbit_common is running
Makefile: Take rabbitmq-common from GitHub
Update erlang.mk
Set an empty {vsn, ...}
Load rabbitmq-dist.mk
Update erlang.mk
Require rabbit_common application
Git: Ignore *.beam and /logs
Update erlang.mk and disbale `ct` and `eunit` plugins
Git: Ignore /doc
`rabbitmq_common` is now `rabbit_common`
Remove unneeded files
Use erlang.mk
Move common modules from rabbitmq-server to rabbitmq-common
Update modules and headers from rabbitmq-server master branch
Allow test to specify backends dynamically.
restores new line
improves comment
Merge branch 'master' into rabbitmq-server-336
off by one error
fixes arguments passed to batch_publish_*
cosmetics
improves comment about sync batch order
fixes retrieving sync_batch_size from policy
fixes failing test
Merge branch 'stable'
Merge pull request #334 from rabbitmq/rabbitmq-server-324
adds batch publish tests
implements batch publishing for priority queues
implements batch publishing for mirrored queues
uses rabbit_misc:version_compare/3 this time
adds explanation
cosmetics
refactors shared logic
oops
refactors msg broadcast
checks if the current OTP release is >= 18.1
retrieves batch size from policy
Merge branch 'stable'
Merge pull request #342 from rabbitmq/rabbitmq-server-341
Merge pull request #335 from rabbitmq/rabbitmq-server-316
closes the journal handle before erasing the queue index dir
adds ha-sync-batch-size policy
Merge branch 'stable'
Merge pull request #339 from rabbitmq/rabbitmq-server-290
Merge pull request #329 from lshift/initial_frame_max
forces GC after queue paging
Return the permission tags from an explicit separate authorization call.
Add the return tags element into the behaviour callback spec for authorization backends.
Add the permission tags from an explicit separate authorization step into the user record.
Merge branch 'stable'
Merge pull request #41 from rabbitmq/rabbitmq-stomp-39
Merge branch 'stable'
Make trailing LF character optional
Merge pull request #35 from rabbitmq/rabbitmq-mqtt-30
set auto_delete=false for QoS1 subscriptions
implement mirror message sync in batches
implements BQ:batch_publish and BQ:batch_publish_delivered
simplifies delete_log_handlers test logic
improves fetchwhile performance
Merge branch 'stable'
fixes tests
fixes log rotation
fixes OtpVersion handling
cosmetics
initializes logger state depending on OTP release
Merge pull request #331 from rabbitmq/rabbitmq-server-330
typo
clarifies sentence
typo
adds documentation for credit_flow usage
allow initial frame_max to be configured
Git: Ignore /plugins instead of /dist
Git: Ignore /plugins instead of /dist
Use `plugins` as the dist directory directly
handles the error logger state change introduced in Erlang 18.1
Merge branch 'stable'
RPM/deb changelogs for release 3.5.5, package revision 3
Debian: Always build a source+binary package
Merge pull request #327 from CVTJNII/rabbitmq-script-wrapper_quote-fix_stable
Quote arg to prevent shell expansion, Issue-325
Update rabbitmq-components.mk
Define .DEFAULT_GOAL to `all`
Update rabbitmq-components.mk
Don't check rabbitmq-components.mk is IS_DEP=1
rabbitmq-script-wrapper: Use '=', not '==' with Bourne shell's test
Merge branch 'stable'
RPM/deb changelogs for release 3.5.5
Update erlang.mk and use rabbitmq-components.mk
rabbitmq-components.mk: Use cmp -s when checking rabbitmq-components.mk
Update erlang.mk
Centralize RabbitMQ dependencies list in rabbitmq-components.mk
Update erlang.mk
Merge branch 'stable'
adds .travis.yml to stable
ensures /tmp/rabbitmq-test/ exists before writing/reading to a file
Merge branch 'stable'
Merge pull request #32 from rabbitmq/rabbitmq-mqtt-25
Rename function
Two more warnings
Squash a few warnings in tests
Merge branch 'stable'
Merge pull request #318 from ben-page/stable
Merge pull request #19 from rabbitmq/rabbitmq-erlang-client-18
List two more behaviours in rabbit_common modules
Compile with Erlang earlier than 18.0
refactored tests to use rabbitmq_mqtt:env/1
added .app file with some configuration used by tests
added step to copy .app file from test/src to test/ebin
removed unused test
Merge branch 'stable'
Merge pull request #309 from rabbitmq/rabbitmq-server-308
fixed support for arguments containing ` characters
use assertEqual instead of pattern matching
refactored coerce to use to_binary identity function
Merge pull request #310 from rabbitmq/rabbitmq-server-270
Ditto
Ditto
Ditto
coerce default_user & default_pass
Do I even English
Ditto
Please formatting gods
Please code style gods
Merge branch 'master' into rabbitmq-server-270
added unit tests
Merge branch 'stable'
Merge pull request #306 from rabbitmq/rabbitmq-server-143-stable
coerce exchange and vhost to binary
Refactoring, per feedback from @videlalvaro
Merge branch 'stable'
Merge pull request #37 from rabbitmq/rabbitmq-stomp-21
Simplify
fix formatting
added redelivered flag in MESSAGE frame headers
Merge branch 'stable'
Merge pull request #35 from rabbitmq/rabbitmq-stomp-14
Give a client some time to notice that connection was closed
Merge branch 'stable'
Split this test into two cases
fixes connection leaking on tests
We can use transient destinations here
fixes connection leaking on tests
Reformat with Emacs
fixes connection leaking on tests
Add password_hashing_module to rabbitmq.config.example
Extract this test, per discussion with @videlalvaro
More tests
calling error/4 instead of error/3 to correctly format the log message
fix indentation
close connection and terminate without crashing the reader process
fix formatting
cosmetics
tidy terminate the processor
Merge pull request #12 from gmr/hash-on-property
Correct password hashing fn migration
fix indentation
changed error message to be STOMP specific
Merge branch 'stable'
added tests for duplicate consumer tag
log ERROR frame
send an ERROR frame and disconnect when duplicate consumer tag
Some unit tests for pluggable password hashing
rabbit.password_hashing_mod => rabbit.password_hashing_module
We no longer use rabbit_registry for password hashing
Introduce per-user hashing functions, default to SHA-256
adds note on msg_store_credit_disc_bound
adds missing copyright header
Improves dropwhile performance
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Update README.md
priv/www/js/formatters.js: Remove duplicate of fmt_rate_num()
refactors credit flow default config format
Allows credit flow Credits to be set via configuration
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #305 from rabbitmq/rabbitmq-server-304
Merge pull request #302 from rabbitmq/rabbitmq-server-301
unwelps code
refactors betas_from_index_entries/7 > betas_from_index_entries/4
uses remove_msgs_by_id/2 in places where same functionality was duplicated
Merge pull request #6 from rabbitmq/rabbitmq-web-stomp-4
Remove now unused included SockJS file
Update SockJS client to 1.0.3
Merge pull request #25 from rabbitmq/rabbitmq-web-stomp-15
Merge pull request #5 from rabbitmq/rabbitmq-web-stomp-15
Enable STOMP heartbeat for raw Websocket examples
Add support for STOMP heartbeats to raw Websocket endpoint
Merge branch 'stable'
Merge pull request #300 from rabbitmq/rabbitmq-server-295
Merge pull request #24 from rabbitmq/rabbitmq-web-stomp-19
Add new option 'ws_frame' to allow using binary frames
Merge pull request #299 from rabbitmq/rabbitmq-server-297
Add missing raw Websocket tests to 'make test'
Cosmetics
Inline
Use dependency branches matching the parent branch
Use dependency branches matching the parent branch
Update erlang.mk
Update erlang.mk
Port .travis.yml from master
inline qi_deliver_and_ack fun
typo
updates comment
renames function for clarity
refactors purge_pending_ack/2 to handle delete_and_terminate
Merge pull request #23 from rabbitmq/rabbitmq-web-stomp-22
Merge pull request #33 from rabbitmq/rabbitmq-stomp-31
decreased number of concurrent STOMP connections on OSX default max number of open file is 256 (ulimit -n)
wording
renaming
Add cowboy_opts option
Add tcp_config option
Add missing options to the .app env key
Fix default port when option is missing
cosmetics
updates comments
renames wipe_index -> reset_qi_state
uses purge_when_no_pending_acks for delete_and_terminate
adds missing space
moves purge helpers to helpers area
uses index purge callback in betas_from_index_entries
Lower heartbeat timeout default to 60
refactors purge
Merge branch 'master' into rabbitmq-stomp-24
Merge branch 'stable'
Merge branch 'rabbitmq-server-289' into stable
adds missing spec for reset_state
takes into account the delete_and_terminate case
Update erlang.mk and rely on the new makedep feature
Silence `make all`
Use rabbitmq-codegen's master branch
Update erlang.mk and rely on the new makedep feature
added exclusive to STOMP headers parsing
changed fmt_num_thousands issue 35.
updated rabbit_misc:plmerge to use dict:merge
removed PRINT macro
refactoring
fixed failing tests because of changed defaults (/topic is now auto_delete=true)
better formatting
set /exchange and /topic defaults: exclusive=false auto_delete=true
added auto-delete and durable to STOMP headers parsing
sets durable=true as default
fix erlang -spec definition for pset, pmerge and plmerge
implemented rabbit_misc:plmerge/2 to merge property lists
implemented rabbit_misc:pmerge to manage default values in proplists
Improves BQ:purge performance when there are no pending acks
Merge branch 'rabbitmq-management-46'
Merge branch 'master' into rabbitmq-management-46
adds test for Accept: application/json
Add routing on message properties
Do not trash $(NODE_TMPDIR) when starting a background node
Import latest codegen.py from rabbitmq-server
start-cover: Enable cover on RabbitMQ modules, not the testsuite
Do not list `rabbit` as a run dependency
Take RabbitMQ from GitHub
Merge branch 'stable'
Clean up declared queues
Cosmetics
Merge branch 'add-validation' of git://github.com/gmr/rabbitmq-consistent-hash-exchange into gmr-add-validation
Copy .travis.yml over to stable
Merge pull request #58 from gotthardp/enhanced_context
Enable resource handlers to store data into context.
Add targets required by rabbitmq-test
Validate routing key when binding
Add $(test_verbose) helper
Fix `make stop-node` when the node is not running
Support $(STANDALONE_TEST_*) tests
Put test runtime files in /tmp/rabbitmq-test-instances
Merge branch 'stable'
Merge pull request #292 from rabbitmq/rabbitmq-server-291
fetches IndexMaxSize at BQ init time
rabbitmq-tests.mk: Ignore output from erl_call when stopping the node
Makefile: Take rabbitmq-common and rabbitmq-erlang-client from GitHub
Re-enable the testsuite
Use `$(DEP_PLUGINS)`
Update erlang.mk
Git: Ignore /dist
Do not specify an application version
Load rabbitmq-plugin.mk from rabbitmq-common
Update erlang.mk
Update erlang.mk and disable `eunit` plugin
Git: Ignore *.beam, /doc and /logs
Remove unneeded files
Use erlang.mk
Makefile: Take rabbitmq-codegen from GitHub
Import latest headers from rabbitmq-server's master branch
New `rabbitmq-tests.mk` plugin
rabbitmq-run.mk: If a test version was built, do not depend on `dist`
rabbitmq-run.mk: Move erl_call arguments to `$(ERL_CALL_OPTS)`
rabbitmq-dist.mk: New `test-dist` target
Merge stable into master
Reduce distance between rabbitmq-service.bat and -server.bat
Use RABBITMQ_BOOT_MODULE in rabbitmq-service.bat, too
More humble description
GoPivotal => Pivotal Software in a few more places
Do not prepend $(CURDIR)/dist to ERL_LIBS
Markdown README
Update erlang.mk
Add all `make run*`-related targets
Introduce a "DIST" verbose prefix
implements maybe_flush_pre_publish_cache
Merge branch 'stable' into rabbitmq-server-289
cosmetics
cosmetics
removes unnecessary DeltaRam change
refactors QI flushing
removes stats optimization from reduce_memory_use
Merge pull request #283 from rabbitmq/rabbitmq-server-227
Import changes from rabbitmq-server's master branch
Boot steps: Ensure boot step's module is loaded
fixes argument order
improves comment
maybe_write_index_to_disk_paging > maybe_batch_write_index_to_disk
improves push_alpha_to_betas stats calculation
Implement `make run-broker`
Support empty version like `{vsn, []}`
fixes typo
improves limit_ram_acks stats calculation
refactors DeltaRam calculation from stats0
improves push_alphas_to_betas paging performance
improves limit_ram_acks batching performance
reinstates Force parameter to write_index_to_disk_paging
Merge stable into master
Do not define .DEFAULT_GOAL
Define .DEFAULT_GOAL to `all`
rabbitmq-dist.mk: Do not replace {vsn, ...} in .app.src
Do not set a version yet
rabbitmq-dist.mk: Do not compress plugin archives
rabbitmq-dist.mk: Do not distribute the broker itself
Merge pull request #286 from rabbitmq/rabbitmq-server-284
Update erlang.mk
Remove debug $(info)
`run` is an existing target; use `run-broker` instead
Add two erlang.mk; they are merely stubs right now
Makes CREDIT_DISC_BOUND and IO_BATCH_SIZE configurable
fix to add support for application/json in accept header types. References #46
improves push_betas_to_deltas performance
Merge pull request #56 from rabbitmq/rabbitmq-management-40
Adds tests for 'exclusive' field. References #40
Adds 'exclusive' boolean field to the queue information. References #40
rabbitmq-dist.mk: Remove debug $(info)
Add support for "make dist"
Merge pull request #281 from rabbitmq/rabbitmq-server-279
Restore a comment
Trigger a travis build
Merge pull request #5 from gmr/travis-ci-testing
Merge pull request #7 from rabbitmq/rabbitmq-event-exchange-6
Refactor, reformat
Create the vhost if doesn't exist
Allow setting the vhost to a different value
Add mochiweb as a test dependency
Git: Ignore *.beam and /logs
Update erlang.mk and disable `edoc` plugin
Git: Ignore /doc
Rename project to `rabbit_common`
Cleanup after EXTRA_SOURCES addition
Rename project to `rabbitmq_common`
Update erlang.mk and use $(EXTRA_SOURCES) for generated files
rabbitmq-common.app: Quote the application name
Merge pull request #285 from rabbitmq/rabbitmq-server-282
Force essential listen socket options
Converts journal entries in place.
erlang.mk: Apply experimental speed improvements
Restore SEGMENT_ENTRY_COUNT, lower QI journal size but not as much
rabbitmq-script-wrapper: Use '=', not '==' with Bourne shell's test
Trigger a travis build
Trigger a travis build
Merge pull request #1 from gmr/travis-ci-testing
Merge pull request #15 from gmr/travis-ci-testing
Trigger a travis build
Trigger a travis build
Merge pull request #5 from gmr/travis-ci-testing
Merge pull request #21 from gmr/travis-ci-testing
Trigger a travis build
Merge pull request #3 from gmr/travis-ci-testing
Trigger a travis build
Trigger a travis build
Merge pull request #3 from gmr/travis-ci-testing
Merge pull request #20 from gmr/travis-ci-testing
Add travis-ci configuration
Add travis-ci configuration
Add travis-ci configuration
Add travis-ci configuration
Add travis-ci configuration
Add travis-ci configuration
Add travis-ci configuration
Add travis-ci configuration
Trigger a travis build
Merge pull request #2 from gmr/travis-ci-testing
Update README.md
Typo
Nuke old README
Convert README to Markdown
Add travis-ci configuration
Add travis-ci configuration
Merge pull request #55 from gmr/fix-travis-config
Fix travis config
Trigger a travis build, take 3
Trigger a travis build
Trigger a travis build
Trigger a travis build
Merge pull request #54 from gmr/travis-ci-testing
Merge pull request #28 from gmr/travis-ci-testing
Add travis-ci configuration
Add travis badge
Add travis-ci configuration
Oops
Update .travis.yml
Trigger a travis build
Merge pull request #9 from gmr/travis-ci-testing
Add configuration for travis-ci testing
Reduce default QI journal size
Merge branch 'stable'
cosmetics
Merge pull request #27 from rabbitmq/rabbitmq-stomp-13
destructuring in function head
added pika to test dependencies
added python tests for queue properties (i.e. x-message-ttl, etc.)
added x-message-ttl, x-expires, x-max-length, x-max-length-bytes, x-dead-letter-exchange, x-dead-letter-routing-key and x-max-priority parsing in SEND and SUBSCRIBE
Relax this assertion a bit, wait less
Handle blank line responses, references #20
Adapt Erlang framing tests for #20
Make sure we run the Erlang test suite
Merge branch 'stable'
Merge pull request #277 from nishan/stable
On Linux, use -r option for 'sed'. -E is not present in versions earlier versions of 'sed'
Merge pull request #13 from rabbitmq/rabbitmq-sharding-6
Merge branch 'stable'
updates LICENSE and related files
updates file license headers
adds .gitignore
adds note about optional routing key
makes routing key policy optional
Merge branch 'stable'
Merge pull request #269 from erylee/stable
explains routing-key policy behaviour
Merge branch 'stable'
fixes typos
adds note about then consistent hashing plugin
issue #268 - gen_server2 can fail to dispatch messages sent by a process to itself
Merge pull request #1 from rabbitmq/rabbitmq-federation-15
Merge pull request #20 from rabbitmq/rabbitmq-federation-15
reconnect-delay default is now 5 seconds
Bump reconnect-delay default to 5 seconds
Merge branch 'stable'
Nuke old README
Clarify
Port README to Markdown
Merge branch 'stable'
Merge pull request #18 from rabbitmq/rabbitmq-federation-16
Merge branch 'stable'
Fix versions comparison to work on Mac OS X too
Ignore x-headers used by federation when they are garbled by clients
Merge branch 'stable'
Makefile: Resolve $(USE_PROPER_QC) only when needed
Makefile: Use `erl -version` to do ERTS version tests
Generated sources: Do not depend on `deps` as it's a PHONY target
Use Erlang atoms when naming dependencies
Merge branch 'stable'
Merge branch 'stable'
Add `ssl_compat` and `time_compat`
Add `ssl_compat` and `time_compat`
Merge pull request #10 from lshift/new-interceptor-api
Merge branch 'rabbitmq-server-233'
erlang:phash2/1 returns a value in the range 0..Range-1
Avoid division by 0
Merge branch 'stable'
Merge branch 'rabbitmq-server-234' into stable
rabbitmq-server: Don't catch EXIT "signal"
make stop-node: Stop the node synchronously
Merge pull request #18 from rabbitmq/rabbitmq-web-stomp-17
Merge pull request #4 from rabbitmq/rabbitmq-web-stomp-17
Merge pull request #2 from rabbitmq/rabbitmq-web-dispatch-1
Merge pull request #16 from rabbitmq/rabbitmq-web-stomp-13
Add /ws route for STOMP over plain Cowboy Websocket
Update examples to test the plain Cowboy Websocket route
Use path instead of raw_path when dispatching static files
Move headers from rabbitmq-server
.gitignore: Typo
Merge branch 'stable'
Makefile: Silence "echo $message"
Move modules from rabbitmq-server
Add `erlang.mk`
Update Cowboy to 1.0.3
Merge branch 'stable'
Merge pull request #258 from rabbitmq/rabbitmq-server-234
rabbitmq-server: Catch SIG{HUP,INT,TERM,TSTP} and exit gracefully
Merge pull request #25 from rabbitmq/rabbitmq-server-233
Merge pull request #4 from rabbitmq/rabbitmq-server-233
Merge pull request #11 from rabbitmq/rabbitmq-server-233
Merge pull request #2 from rabbitmq/rabbitmq-server-233
Merge pull request #52 from rabbitmq/rabbitmq-server-233
Merge pull request #14 from rabbitmq/rabbitmq-server-233
Merge pull request #254 from rabbitmq/rabbitmq-server-233
Merge branch 'stable'
Warn about exported variables
Merge branch 'stable'
Merge pull request #14 from rabbitmq/rabbitmq-federation-12
Handle cases when x-received-from already exists in the message
Merge pull request #256 from rabbitmq/rabbitmq-server-245
Priority queue: Fix a crash when querying 'head_message_timestamp'
rabbit_misc: Remove now_ms/0 and now_to_ms/1
Replace os:timestamp() with os:system_time(milli_seconds)
GM: Convert the testsuite to use `time_compat`
rabbit_node_monitor: Rework `global` hang workaround
pg2_fixed: Use erlang:system_time(micro_seconds) to pick a "random" node
Use os:system_time() when the time is exposed
Use os:timestamp() to get a non-unique timestamp
Use monotonic_time() to compute elapsed time
Use phash2() and the new Time API as a random seed
Add `time_compat` module
Merge branch 'rabbitmq-server-250'
RPM/deb: Depend on Erlang R16B03
Use os:system_time(micro_seconds) to manage timestamps
Replace os:timestamp() with os:system_time(milli_seconds)
Use monotonic_time() to compute elapsed time
Use phash2() and the new Time API as a random seed
Use phash2() and the new Time API as a random seed
Merge branch 'stable'
Merge pull request #253 from rabbitmq/rabbitmq-server-251
Memory monitor: Log a warning if a 32-bit version of Erlang is used
Merge branch 'rabbitmq-server-250'
Require Erlang R16B03, not R16B03-1
Ignore debug/*
Merge pull request #11 from rabbitmq/rabbitmq-auth-backend-ldap-10
Merge pull request #252 from rabbitmq/rabbitmq-server-250
Require Erlang R16B03-1
Merge branch 'rabbitmq-server-121'
Renames queue-master-location header to x-queue-master-locator Renames rabbit.queue_master_location config key to rabbit.queue_master_locator
eldap-wrapper is useless now that Erlang R16B is required
Use os:system_time() when the time is exposed
Use phash2() and the new Time API as a random seed
Include `time_compat` in rabbit_common
Merge pull request #13 from rabbitmq/rabbitmq-server-246
Merge pull request #247 from rabbitmq/rabbitmq-server-246
Support the new `ssl:connection_information/{1,2}` API
Include `ssl_compat` in rabbit_common
Merge branch 'stable'
gm: Remove an unused variable in terminate/2
RJMS-1.4.5-SNAPSHOT
RJMS-1.4.4
LICENCE
Merge pull request #243 from Jakauppila/rabbitmq-server-243
 Fixes a logic problem with NODE_IP_ADDRESS and NODE_PORT in rabbitmq-env.bat.
Merge branch 'stable'
Missing a backslash
Adding quotes to the !RABBITMQ_CONF_ENV_FILE! call
Modify the default path of RABBITMQ_CONF_ENV_FILE.
Merge pull request #240 from Jakauppila/rabbitmq-server-239
Missing a backslash
Adding quotes to the !RABBITMQ_CONF_ENV_FILE! call
Modify the default path of RABBITMQ_CONF_ENV_FILE.
Merge branch 'stable'
Merge branch 'rabbitmq-server-224' into stable
GM: Remove debug messages added in 08f25ec6
GM: Wait for messages to be ACK'd before exiting
Merge branch 'stable'
Merge pull request #236 from legoscia/remove_nonexistent_bindings
Update version compatibility check for Release 1.4.4.
Don't crash when removing non-existent bindings
RJMS-1.4.4-SNAPSHOT
Merge branch 'stable'
Merge branch 'rabbitmq-server-226' into stable
Merge branch 'stable' into rabbitmq-server-226
Merge branch 'stable'
Merge branch 'rabbitmq-stomp-11' into stable
run ACK/NACK tests for all STOMP versions (1.0, 1.1, 1.2)
Log if FHC buffering is enabled or not during startup
run ACK/NACK tests for all STOMP versions (1.0, 1.1, 1.2)
Merge pull request #189 from bogdando/ra_ocf_ha
Fix indentaion, typos, hardcodes
Fix kill and mnesia removal
Merge pull request #49 from gotthardp/split-base64
Add use_fqdn and fix pidfile
Adds policy validation tests for queue master location
Remove bashisms and sync recent changes
Split base64 encoded message property/header to multiple lines.
Merge pull request #47 from gotthardp/invalid-utf8
Merge pull request #48 from gotthardp/invalid-utf8
The message 'Invalid UTF-8' is not an error.
Commit package change logs
Merge branch 'stable'
src/rabbit_amqp1_0_{reader,writer}.erl: Remove unused variables
file_handle_cache: Add a config option to disable buffering
Merge branch 'stable'
Do not ignore /ebin entirely as it contains rabbit_app.in
Merge branch 'stable'
rabbitmq-echopid.bat is mean to be executable
Load rabbitmq-env.bat in a cwd-independent way
Load rabbitmq-env.bat in a cwd-independent way
cosmetics
expand_shortcut errors were not handled correctly
Merge pull request #214 from lshift/interceptors
change rabbit_channel_interceptor API...
add comment
Updates coding style
fix race condition
update to new rabbit_channel_interceptor api
Merge branch 'stable'
Make sure rabbitmqctl.bat arguments are not overwritten
Bring back ERLANG_HOME check
Remove a misleading comment
Apply the change in 4b12be8f9f287606762cbc1440d979abcebb17f3 to rabbitmqctl.bat
Adds queue_master_locator class module
Moves callback execution to one place Renames functions
Checks if module exists
Takes queue name from #binding.destination
Removes temp variable
Merge pull request #28 from lshift/mqtt-topic-authz
revert warning fix
whitespace changes
don't use `apply/2`
fix compile warnings
rename `K` to `Fn`
change resource kind to `topic`
Merge branch 'stable'
Bump client version
Ignore *.tar.gz archives, too
Simplifies min-masters helper functions
Apply the change in 4b12be8f9f287606762cbc1440d979abcebb17f3 to rabbitmq-service.bat
Merge branch 'stable'
Another typo
Replaced {} with () in server bat files
Merge branch 'scratch-net-Fix_bat_typos'
Another typo
Replaced {} with () in server bat files
Coding style and header updates, #121
Merge branch 'stable'
Revert "set environment to python2"
Change min-masters calculation Remove validate_policy callback from queue location behaviour Create seperate queue location policy validation module Delete function, delay_ms/1. Unused Remove functions not used by other modules from export Update coding style and header to GoPivotal Inc standards
Merge branch 'stable'
Merge pull request #221 from rabbitmq/rabbitmq-server-216
Be less assertive about x-death value types
Merge branch 'stable'
Merge branch 'rabbitmq-server-159' of https://github.com/hairyhum/rabbitmq-server into hairyhum-rabbitmq-server-159
Merge branch 'stable'
Delete round robin callback. Not supported.
Log heartbeat timeout in a human friendly way #159
Fixes #179
Initial commit #121
Merge branch 'stable'
make start-background-node: Use "rabbitmq-server &"
Merge branch 'stable'
Merge pull request #215 from rabbitmq/rabbitmq-server-175
Squash unused variable warnings
Introduce rabbitmqctl purge_queue
Merge pull request #213 from ingwinlu/remove_python_version_detection
Merge pull request #3 from ingwinlu/add_env_shebang
add shebang for python version detection
remove python version detection from Makefile...
Merge branch 'stable'
make run-background-node: Actually run RabbitMQ in the background
Merge pull request #212 from rabbitmq/rabbitmq-server-176
Bump default +A value to 64
Merge branch 'stable'
Merge branch 'stable'
Initialise IO_THREAD_POOL_SIZE in rabbitmq-defaults
Merge branch 'stable' into rabbitmq-server-178
Merge pull request #209 from rabbitmq/rabbitmq-server-208
Introduce BOOT_MODULE in Windows batch scripts
Merge branch 'stable' into rabbitmq-server-208
Merge branch 'stable'
Make it possible to run scripts from dirs other than scripts and sbin
Windows batch file changes to support -env, -defaults, and -conf functionality present on *nix
Add 'rabbitmq-env.bat' execution in rabbitmqctl.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-service.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-server.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-plugins.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-echopid.bat
Make it possible to run scripts from dirs other than scripts and sbin
Merge branch 'rabbitmq-server-154' of https://github.com/Jakauppila/rabbitmq-server into Jakauppila-rabbitmq-server-154
Merge branch 'rabbitmq_v3_5_3_nowait_patch' of https://github.com/operasoftware/rabbitmq-federation
Keep the = alignment with the surrounding code
Introduce RABBITMQ_BOOT_MODULE (for *nix for now)
Merge branch 'stable'
set environment to python2
Merge branch 'stable'
Merge pull request #15 from ingwinlu/fix_env
check authorization at mqtt topic level
add detection for python2.7
Merge pull request #204 from ingwinlu/python_detection
add detection for python2.7
set environment to python2
Merge branch 'stable'
Merge branch 'bug26427' into stable
Ensure the conditions to log "accepting..." match those for "closing..."
Merge pull request #202 from legoscia/bug26427
Be quiet about sockets closed during SSL upgrade
Merge branch 'stable'
Merge pull request #201 from rabbitmq/rabbitmq-server-200
cosmetics
rabbit_amqqueue:on_node_up/1: Check the queue's running slaves list
Merge branch 'stable'
applies emacs formatting to file_handle_cache.erl
Merge branch 'stable'
Merge pull request #199 from rabbitmq/rabbitmq-server-196
Limit clear_read_cache/0 action to the node it is running on
file_handle_cache: Add a command to clear all read buffers
Merge branch 'stable'
Correct a typo in 88b3a971b0f154f1415e5884bcca4afdf2221a37
Windows batch file changes to support -env, -defaults, and -conf functionality present on *nix
Merge branch 'stable'
Merge pull request #198 from rabbitmq/rabbitmq-server-197
adds missing callback to behaviour_info
Merge branch 'stable'
Merge pull request #195 from rabbitmq/rabbitmq-server-194
adds missing callback to behaviour_info
Make no-wait flag on exchange.bind and exchange.unbind configurable
Set no-wait flag on exchange.bind and exchange.unbind methods
Initial import of rabbitmq-common
Merge pull request #45 from ruleant/patch-1
fix typo
Merge branch 'stable'
Adds error message for list_user_permissions missing argument
Merge branch 'stable'
Merge branch 'rabbitmq-server-191' into stable
adds missing find_prioritisers call
Merge branch '96425694-release-1.4.3'
Update version compatibility check for Release 1.4.3.
Merge branch 'stable'
Merge branch 'rabbitmq-stomp-17' into stable
rabbitmq-stomp now ends frame with LF: update the test suite
Merge branch 'stable'
Merge pull request #187 from rabbitmq/rabbitmq-server-186
Merge branch 'stable'
Only process the content-length header on the SEND command
Merge pull request #18 from kerneldemon/ignore-the-content-length-header
Merge branch 'stable'
Merge pull request #20 from rabbitmq/rabbitmq-stomp-17
This test can be much higher level
Unbreak highlighting in python-mode
Added a newline character at the end of the frame
Update README.md
Add OCF Pacemaker RA for HA A/A cluster
Only process the content-length header on the SEND command
Merge pull request #188 from weisslj/fix-digraph-type
Update digraph type
Merge branch 'stable'
Merge branch 'rabbitmq-server-62-part1' into stable
action/5 calls action/6 with default timeout for unknown commands
Support warn log level (an alias for warning)
Fix set type
Merge pull request #184 from weisslj/fix-set-type
Fix set type
Merge branch 'stable'
Merge branch 'rabbitmq-server-62-part1' into stable
Avoid float_to_list/2
Merge branch 'stable'
Merge pull request #181 from rabbitmq/rabbitmq-server-62-part1
Handle negative timeout values
Improve timeout handling in ctl
Mention timeout in rabbitmqctl(1)
Add timeout option to list_* commands
RJMS-1.4.3-SNAPSHOT
RJMS-1.4.2
add licenses file
add licenses file
Add compatibility validation for 1.4.1
Update README.md
Make it possible to override the +A VM flag with an env variable
Merge branch 'stable'
Merge branch 'bug26421' into stable
Testsuite: Update to stomp.py 4.0.16
Merge pull request #174 from rabbitmq/rabbitmq-server-163
moves boot steps to its own module
Initial rabbit_writer doc essay
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
(c) year
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
Merge branch 'stable'
(c) year
(c) year
(c) year
rabbit_disk_monitor documentation
Merge branch 'stable'
RPM/deb changelogs for release 3.5.3
bumps app version to 1.2.1
Merge branch 'stable'
Merge branch 'rabbitmq-server-157' into stable
After starting the fhc, ensure it is working
Merge branch 'stable'
Merge pull request #165 from rabbitmq/rabbitmq-server-162
Adds TLS suggestion
Merge branch 'stable'
Merge branch 'rabbitmq-management-43' into stable
Merge branch 'stable'
Merge branch 'stable'
Merge pull request #6 from rabbitmq/rabbitmq-management-agent-4
Fixes #4
Merge pull request #160 from rabbitmq/rabbitmq-server-157
Start rabbit_alarm before file_handle_cache
partition.ejs: Be more constructive in the "partition detected" warning
Merge branch 'stable'
Adapt to Java client API change in stable
Add 'rabbitmq-env.bat' execution in rabbitmqctl.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-service.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-server.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-plugins.bat
Add 'rabbitmq-env.bat' execution in rabbitmq-echopid.bat
Merge branch 'stable'
RPM/deb changelogs for release 3.5.2
Merge branch 'stable'
Merge pull request #153 from rabbitmq/rabbitmq-server-152
Re-format for 80 characters wide
Re-format with Emacs
Merge branch 'stable'
Merge branch 'rabbitmq-server-138' into stable
Use a set to look up previously seen {queue, reason} keys
Refactor
Refactor
cosmetics
Support x-death event proplists from before #78
adds missing word
Make credit flow state transition interval 1s instead of 5s
Merge branch 'stable'
test/Makefile: Use $MAKE instead of hard-coding "make"
Merge pull request #139 from rabbitmq/rabbitmq-server-137
creadit_flow.erl: Indent both TRACE_* macros the same way
Merge branch 'stable'
Merge branch 'rabbitmq-server-129' into stable
Merge branch 'stable'
Merge pull request #146 from rabbitmq/rabbitmq-server-134
Merge branch 'stable'
Merge branch 'rabbitmq-mqtt-23' into stable
Use $MAKE instead of hard-coding "make"
Merge pull request #149 from rabbitmq/rabbitmq-server-148
removes dictionary from the PROCESS_INFO keys
Rename
File handle cache: Pay attention to memory use
Merge pull request #144 from rabbitmq/rabbitmq-server-143
Allows credit flow Credits to be set via configuration
Include more information about processes blocked by credit_flow
Merge branch 'master' into rabbitmq-server-137
Make it possible to publish credit_flow events to rabbit_event
Update README
Merge pull request #136 from rabbitmq/rabbitmq-server-135
Merge branch 'stable'
Ignore test/.idea
Merge branch 'stable'
Use os:timestamp/1 instead of erlang:now/0 in credit_flow and rabbit_reader
Don't use deprecated erlang:now/1
Don't use deprecated erlang:now/1
Merge branch 'stable'
Merge branch 'rabbitmq-server-128' into stable
rabbitmq-server: Add a way to send log messages to stdout
Merge branch 'stable'
Merge pull request #133 from rabbitmq/rabbitmq-server-114
Reduce number of possible values of rabbit.mirroring_flow_control
Move mirroring flow control setting into rabbit_channel:init
Update README.md
Update README.md
Merge pull request #131 from rabbitmq/cosmetics-54
cosmetics
tests cleanup
A typo
Use a higher call timeout here
Merge pull request #22 from rabbitmq/rabbitmq-mqtt-16
Merge branch 'master' into rabbitmq-mqtt-16
Merge pull request #130 from rabbitmq/rabbitmq-server-54
Merge pull request #54 from alexethomas/sla_tracking_v2
Remove Python/HTTP API tests
Merge branch 'sla_tracking_v2' of git://github.com/alexethomas/rabbitmq-server into rabbitmq-server-54
Tests for retained messages
Don't crash if we get a PUBACK for unknown message
Change how retained message delivery QoS is calculated
Fix a badmatch
Warn of potentially dangerous config values
rabbitmq-script-wrapper: Don't use "exec" in front of "su"
Implement a DETS-based message store, refactor
Merge branch 'stable'
Merge branch 'rabbitmq-server-127' into stable
rabbitmq-env: Ignore user's RABBITMQ_PID_FILE if set by init script
Merge branch 'stable'
Merge branch 'rabbitmq-server-126' into stable
Debian init script: Use $PID_FILE, not $RABBITMQ_PID_FILE
Handle vhost creation and deletion events
Refactor
Trap exits so that terminate/2 is invoked
Merge branch 'rabbitmq-server-118'
Undo this accidental change
Switch to permanent type
put/get/delete operations for retained message store
rabbitmq-env: Remove trailing slash from configurable paths
Merge branch 'stable'
Merge branch 'rabbitmq-server-120' into stable
rabbitmq-env: Use "$path" in rmq_realpath(), not "$dir"
Merge branch 'stable'
Merge branch 'rabbitmq-server-120' into stable
rabbitmq-env: Check the Mnesia directory is not used for other purposes
Merge branch 'stable'
Suggestion on how to fix https://github.com/rabbitmq/rabbitmq-erlang-client/issues/11
Merge pull request #12 from gotthardp/shutdown
Make pipeline fail in build-all-in-vm if any stage fails; quieten checkouts.
Suggestion on how to fix https://github.com/rabbitmq/rabbitmq-erlang-client/issues/11
Process bits for retained message stores
RJMS-1.4.2-SNAPSHOT
RJMS-1.4.1
Update README.md
Update README.md
Merge branch 'stable'
Correct a typo
Correct a typo
Make gm flow control configurable
Merge branch 'authz_socket_info'
Correct typespec
Implement authz_socket_info structure passed to authorization plugins.
Merge branch 'stable'
adds start.boot to bin folder for mac-standalone release
adds start.boot to bin folder for mac-standalone release
Merge branch 'stable'
adds OTP_VERSION to standalone mac
Merge pull request #107 from rabbitmq/rabbitmq-server-106
Ignore test/.idea
adds OTP_VERSION to standalone mac
Merge pull request #39 from rabbitmq/rabbitmq-management-38
Export resource_exists/2
updates install instructions
removes binaries
updates install instructions
removes binaires
Merge pull request #15 from cloudamqp/routing-key
Allow backward compatibility with 1.3.4
update-to-1.4.1-SNAPSHOT
Merge pull request #37 from rabbitmq/rabbitmq-management-34
Axe a path we ended up not using
Add /api/vhosts/{vhost}/connections and /channels to the docs
indentation styling
Save the full message as is in mnesia
Introduce GET /api/vhosts/{vhost}/channels and /connections
Extract DELIVERY_MODE and DURABLE to globals
Temporary addition of Python test script to help track down initially-blank head_message_timestamp problem
Store the routing key along with the message
Move timestamp() to rabbit_types
Clarify
Minor improvements to rabbit_msg_store docs
Reformat docs
Merge pull request #6 from rabbitmq/pr-4
Merge pull request #4 from lshift/connection-pool
Extract seed.sh, add a couple more users for testing
Merge pull request #103 from rabbitmq/rabbitmq-server-88
Add tests for head message timestamp queue statistic. Distinguish the former statistics tests as channel (_ch) statistics. Expand name.
Update rabbitmqctl doc to include head_msg_timestamp stat.
Change head_msg_timestamp to peek at all internal queue heads and find the oldest timestamp among them instead of taking the first found as per PR comment #7.
Move head_msg_timestamp from backing_queue_status property to top-level queue stat as per PR comment #7.
Remove head_msg_timestamp from #vqstate as per PR comment #2 as this is a relic from a previous version of the change.
Track and expose the AMQP Timestamp property of the first (usually oldest) message in a queue.
Merge branch 'stable'
Merge branch 'rabbitmq-management-33' into stable
Merge branch 'stable'
Merge branch 'rabbitmq-management-33' into stable
Support configuring mgmt agent via rabbitmq_management_agent
Add rabbit_misc:get_env/3
Merge branch 'stable'
Merge branch 'rabbitmq-server-66' into stable
rabbitmq-script-wrapper: Escape '$' characters in arguments
Merge branch 'stable'
Merge branch 'rabbitmq-stomp-9' into stable
package.mk: Use $(MAKE) instead of hard-coding "make"
Merge pull request #8 from rabbitmq/rabbitmq-stomp-7
Ignore stomp.py checkout
Notify stomp_processor when reader fails with an exception
rabbitmq-env: Prevent multiple load of the script
Merge branch 'stable'
Merge pull request #32 from rabbitmq/rabbitmq-management-30
append_sample: Fix indentation of case clauses
Record samples when old value is not a number (treat it as 0)
Ensure that both old and new sample values are numeric
Merge pull request #99 from dallasmarlow/bounded-gc-backoff
max gc interval backoff bounded by specifying a max interval of 4x the ideal interval
rabbit_channel documentation improvements
rabbit_reader documentation improvements
Restore a single line README
New README.md
Briefly document rabbit_reader records
Doc comment
Init scripts: Honor RABBITMQ_LOG_BASE for {startup,shutdown}_* location
Merge branch 'stable'
Commit package changelogs for 3.5.1
Move connection error detection up a level to catch anon access error.
Move LDAP pool creation from app init to a boot step.
Merge branch 'stable'
Merge branch 'pull-request-10-fixups' into stable
Remove inadvertent / un-needed unification.
Recover from closed connection to server.
Merge branch 'stable'
Merge branch 'rabbitmq-server-86' into stable
erase_ch/2 should return ctags for just the erased channel, not all of them. This was not noticed for a long time because the only use of those ctags was to emit consumer_deleted events which were handled by the management database, and it ignored invalid {channel, ctag} combinations. However, it did end up doing more work - and closing n channels out of m became O(nm) instead of just O(n). References #86.
Minor cleanups Factor out the rebinding bit to stop the function getting out of hand, reinstate a TODO since while better it is still not perfect, clean up a few indent issues to conform to our poorly documented code standards.
Merge branch 'master' into pull-request-83-fixups
Merge branch 'pull-request-83-fixups'
Minor tidy-ups Reify the default pool name a bit more, rename DEFAULT_SERVER to DEFAULT_POOL since that's what it identifies.
fix(incoming_link): respect clients incoming delivery count
Ignore test/.idea/*
Merge branch 'stable'
Merge pull request #79 from rabbitmq/rabbitmq-server-78
rabbit_dead_letter.erl: Fix shadowing of variable 'Info'
Merge pull request #82 from rabbitmq/rabbitmq-server-72
Merge pull request #81 from rabbitmq/rabbitmq-server-74
Refactoring, x-death.counter => x-death.count
Merge branch 'master' into reusable-worker-pool
Make LDAP worker pool size configurable.
rabbitmq-server.ocf: Pass ${RABBITMQ_PID_FILE} to "rabbitmqctl stop"
Identify x-death events by {queue, reason}, add a counter
use worker_pool from rabbitmq-server
Update README.md
Update mailing list link
allow multiple instances of worker_pool
Add 'channel' as a new log category
Merge branch 'stable'
Merge branch 'rabbitmq-server-69' into stable
Improvements to tune_read_buffer_limit
file_handle_cache: Remove the "no read buffer" comment in the essay
Tune the read buffer size to prevent pathological behaviour ...such as when we are reading backwards through a file. References #69.
Merge branch 'stable'
Merge branch 'rabbitmq-amqp1.0-8' into stable
Merge branch 'rabbitmq-amqp1.0-6' into stable
Correct return type on heartbeat. Sigh, this has been broken since 2010. References #6.
Protocol error rather than crash if we receive a disposition without a state Apparently Proton might do this sometimes. References #8.
Limit x-death growth to one entry per queue
Merge branch 'stable'
Merge branch 'rabbitmq-server-68' into stable
Alter RabbitMQ database directory permissions for .deb and .rpm packages
no message
Merge branch 'stable'
Merge branch 'rabbitmq-server-65' into stable
Merge branch 'rabbitmq-server-67' into stable
Make sure we have the properties before trying to use them. References #65.
Priority queue ram_duration/1 should be the minimum of sub-queues', not the sum. (References #67)
RJMS-1.3.5-SNAPSHOT
RJMS-1.3.4
Updates to the API for 3.5.0. Fixes #8, #9.
Update for modern-ish (1.6) Django
Ignore Django's database file
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Merge branch 'master' into stable
Deb changelogs for release 3.5.0 (rerolled)
Merge branch 'bug26638'
More reliable way to find the erl executable. The old way did not work if erl was not in ${ERLANG_HOME}/bin. The new way looks like it should only work if erl is on the ${PATH} - but in fact the Erlang VM arranges things so that is always true!
RPM/deb changelogs for release 3.5.0
Add some help on the subject of max payload. And show "unlimited" not "?" if it is.
Ignore ./etc/*
Merge branch 'bug26278'
Merge branch 'bug26636'
Rename things to be slightly clearer
Fix crash when performing tag query using invalid other_bind creds Not actually harmful since the crash was caught higher up and reinterpreted as "permission denied" anyway, but this give us cleaner logs.
rabbit_node_monitor: Exclude Mnesia-synced nodes when clearing partitions
rabbit_node_monitor: In handle_dead_rabbit(), consider node down once
rabbit_networking: In on_node_down(), don't remove listeners if node is back
use a pool of workers which cache connections
Merge branch 'bug26633'
Merge branch 'bug26632'
Autoheal: Wait for current outside app. process to finish
Partial partition: Don't act if pause_if_all_down is about to pause
Merge branch 'bug26628'
Add more explanatory text for timeout_waiting_for_tables
Autoheal: Add a restart_loser/2 function
Add comment about aborted release 1.3.0
Autoheal: Document the protocol change
Merge branch 'bug26631'
Workaround "global" hang
Oops, overview.ejs was missed out of 2e3edb4a The comment for which was: Simplify the mass of multiplying "updatable" divs (bug 26613) If we make show/hide sections capable of being inside an updatable div then we can wrap most of node.ejs in a single updatable rather than having dozens of the things. This also means charts don't manage their own updatability any more.
Autoheal: The leader waits for "done!" message from the winner
Merge branch 'stable'
Merge branch 'bug26622' into stable
rabbit_node_monitor: Cache pause_minority_guard() return value
Damn, unbreak the non-monitor case.
Merge branch 'bug26621'
Warn when stats db overloaded Add the stats db queue length to the HTTP API, and display a warning in the web UI if it seems to be getting out of hand.
Consistency in HTTP header capitalisation RFC 2616 says this doesn't matter, but consistency is always nice.
Specify which content types we provide. Closes #24. The lack of this information was causing webmachine to assume we provided text/html (even though that's not at all true) and reject HTTP requests which only accept application/json.
Clarify warnings Publish is reliable but not super-fast, get is not reliable.
Merge branch 'bug26620'
Bit more testing, and fix validation bugs thus found (bug26620)
Tiny bit more documentation (bug 26620)
UI for truncating payloads (bug 26620)
Truncation of logged payloads (bug 26620)
Tiny bit more validation (bug26620)
Oops, this should have been in b5be81ed since we no longer ack
Merge branch 'bug26619'
Buffer writes to the log file (bug 26619)
Use prim_file, don't spam the group leader (bug26619)
Reduce time constructing repeated string (bug 26619) It was actually expensive!
Use direct client flow control instead of prefetch_count (bug 26619) The hard coded prefetch count we had was a bit low, but we were only using it for flow control anyway, so let's use the more lightweight flow control mechanism we have now.
Reduce calls to io:format/3, go much faster (bug26619)
Merge branch 'bug26598'
Merge branch 'bug26598'
Document the new API (bug 26598)
Emit node_node_stats as an event in its own right (bug 26598) Since each pair of nodes will have its own lifecycle this should really be a separate type of event. Also emit a matching pair of deleted events whenever we detect that a pair's connection has gone down.
Emit stats on cluster links (bug 26598)
Add cluster link UI (bug 26598) Make it possible to break out the chart header. Then use that to display stats for cluster links.
Merge together detail stats (e.g. other nodes' data rates) with sort-of basic stats (e.g. other nodes' ports) (bug 26598)
Handle node_node_stats and emit data rates and history for cluster links (bug 26598)
Merge branch 'bug26613'
Simplify the mass of multiplying "updatable" divs (bug 26613). If we make show/hide sections capable of being inside an updatable div then we can wrap most of node.ejs in a single updatable rather than having dozens of the things. This also means charts don't manage their own updatability any more.
Merge branch 'stable'
Fix tests, the exceptions are a bit cleaner now (bug26610)
Further cleanup of boot exception handling (bug26610) OK, the previous attempt was a bit misguided. Rather than catch any exception "inside" starting an app, log it and rethrow a token saying no further logging is needed, let's just let the exception bubble out and catch it once at the top level.
Merge branch 'stable'
Merge branch 'bug26610' into stable
Merge branch 'stable'
Detangle boot error handling, step 2 We used to have a weird situation where an error inside a boot step would cause us to go through error logging twice. The exception would get caught in run_step/3, then go through boot_error() etc, and basic_boot_error/3 would exit again, leading to more stuff being logged as an application start failure. So to fix that, let's exit with a special atom which prevents further logging. Also rename functions to be a bit more meaningful.
Detangle boot error handling, step 1 We want to clean up basic_boot_error/3, but these call sites make it harder. Really, trying to produce nicely formatted errors here is a waste of time, these errors can only be caused when adding boot steps. Normal users should never see them. So don't complicate things by handling them specially.
Merge pull request #52 from jeckersb/sd_notify-for-upstream
Add systemd notification support
Merge branch 'bug24921'
Merge pull request #55 from rabbitmq/bug26614
When ERLANG_HOME is not set, exit with code 1
Fix compatibility with Python 2
Infrastructure to run tests under both python 2 and 3
Port to Python 3, at the cost of breaking Python 2 compatibility.
Fix clearer timeout_waiting_for_tables error message
Merge branch 'bug26465'
Ignore etags
Ignore etags
pause_if_all_down: Remove configuration check
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Consistency: everywhere else we use sentence case, not title-case
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Merge branch 'stable'
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Convert .hgignore to .gitignore
Merge branch 'stable'
Merge remote-tracking branch 'origin/master'
Merge branch 'bug26601' into stable
If other_bind is not set to as_user, establish a new LDAP connection to perform tag queries against.
Merge branch 'bug26603'
Fix O(n^2) time to ack / requeue multiple messages.
Merge pull request #53 from nilcons-contrib/fix-typo
Fix a hilarious typo in the example config
Merge branch 'bug26602'
Merge branch 'bug26602'
Log routed_queues.
Record the routing decision on published messages.
API change missed in bug 24781.
Fix breakage introduced in bug 24781.
API change missed in bug 24781.
Remove the "moved to GitHub" warning.
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Sync CONTRIBUTING.md with the template one
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Remove the "moved to GitHub" warning.
Merge branch 'stable'
Merge branch 'bug25547' into stable
README.md: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
README.md: Warn about the move to GitHub
README.md: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README.md: Warn about the move to GitHub
stable to default
README: Warn about the move to GitHub
merge bug26183 into default
Merge heads of default
merge bug26183 into default
A few overview comments
rabbitmq.config.example: Send people to GitHub, not hg.rabbitmq.com
stable to default
Merge bug26595
Ignore all errors here (just as we do in ssl_info/2) - for example the socket could be closed; no point in blowing up if that is the case.
Merge bug24700
Support if-unused and if-empty for queue / exchange deletion.
Oops, that never got documented.
Enforce argument equivalence.
Support for x-max-priority in the management plugin.
API updates for default.
Compile, now that we are in the broker repo.
Import the module rabbit_priority_queue as-is from the plugin.
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge stable into default
Added tag rabbitmq_v3_4_4 for changeset d8a49b132a1d
Added tag rabbitmq_v3_4_4 for changeset 11de4da4d005
Added tag rabbitmq_v3_4_4 for changeset 44d60eecea5f
Added tag rabbitmq_v3_4_4 for changeset b87007909780
Added tag rabbitmq_v3_4_4 for changeset a4bf22d9c841
Added tag rabbitmq_v3_4_4 for changeset ea5b87f229eb
Added tag rabbitmq_v3_4_4 for changeset 338647b5d27c
Added tag rabbitmq_v3_4_4 for changeset ca1e11cc3f39
Added tag rabbitmq_v3_4_4 for changeset 8092f72c8077
Added tag rabbitmq_v3_4_4 for changeset db1f5c661833
Added tag rabbitmq_v3_4_4 for changeset 9c81160e375a
Added tag rabbitmq_v3_4_4 for changeset 0f61291196b4
Added tag rabbitmq_v3_4_4 for changeset 065fd559abc6
Added tag rabbitmq_v3_4_4 for changeset 5bca99c47814
Added tag rabbitmq_v3_4_4 for changeset 377af18aa481
Added tag rabbitmq_v3_4_4 for changeset 3d5130992100
Added tag rabbitmq_v3_4_4 for changeset d680ad675f7a
Added tag rabbitmq_v3_4_4 for changeset f77e0349e40f
Added tag rabbitmq_v3_4_4 for changeset b335fa288177
Commit Debian and RPM change log updates
merge stable into default
merge stable into default
merge bug26282 into stable
merge stable into bug26282
merge bug26144 into stable
merge stable into default
merge bug26589 into stable
MQTT processor should link its channel
stable to default
Try not to promise the world, but also try not to scare people too much.
Document slashless queue addressing and similarity with STOMP.
stable to default
Merge bug26587 again
We never actually call encode_described/3 with the second argument being anything other than a number from the XML. So simplify that a bit.
Couple more cases of list/binary confusion for symbol representation.
stable to default
Merge bug26587
stable to default
Merge bug26587
Pass errors through, don't explode with case_clause.
Don't return some broken weirdness that isn't even the right type, throw a protocol error.
Don't log that separately, protocol_error/3 will log too.
Better error message.
The Reason will often be large, so wrap before logging it.
Beef up testing of invalid endpoints. Drags in the 0-9-1 client so we can create inequivalent queues.
Declare queues synchronously so we can report errors properly without jumping through hoops.
Clear up confusion over internal representation of the AMQP 1.0 symbol type; it's always {'symbol', binary()}, never {'symbol', string()}.
Allow specifying nowait when declaring queues, for AMQP 1.0 we are not doing this per publish so we can be synchronous and report errors more easily.
merge stable into default
merge bug26584 into stable
merge stable into default
merge bug26553 into stable
RJMS 1.3.4-SNAPSHOT
RJMS-1.3.3-RELEASE
Merge bug 26586
Don't aggregate disk read / write message rates, it confuses more than it elucidates.
stable to default
Merge bug 26525
stable to default
Merge bug26443
Merge bug26573
De-emphasise mirroring, talk about ordering issues.
Merge bug26574
And a bit more.
A bit more explanation.
Merge bug26579
Clarify
Overview documentation for delegate
Overview documentation for worker_pool and worker_pool_worker
pause_if_all_down: Lower priority of "listed nodes not in the cluster" message
RPM/Deb: Restrict Mnesia directory permissions to owner and group
Don't install rabbitmq.config.example is DOC_INSTALL_DIR is unset
Wording
Documentation overview of lqueue
Merge bug26561
Merge bug26561
Merge bug26577
Rewrite to be similar to what's in configure.xml; don't mention the internal module used but do mention how this differs from net_ticktime.
Merge bug26572
Merge bug26578
Don't show disk reads / writes if 0 have ever happened.
Overview documentation for gatherer
Try to emphasise it's read/write *operations* we are counting.
Small amount of doc.
Small amount of doc.
Rename for consistency with other queue info items.
Rename for consistency with other queue info items.
Corrections per feedback from Matthias
Mention cluster_keepalive_interval in rabbitmq.config.example under advanced options
Basic documentation for pmon
Add disk read and disk write message rates for queues.
disk_read_count / disk_write_count info items for queues.
Merge bug26539
Merge bug26545
Merge bug26467
Merge heads
stable to default
Merge bug26570
Cause some traffic on master hibernation, and explain why.
It is now basic_consume/10
Ignore more temporary files
merge stable into default
merge bug26567 into stable
Make sure to send LW&T when connection is closed due to a keep-alive timeout
Introduce rabbit_misc:is_os_process_alive/1 from a private function in rabbit_control_main, as we will want it for testing.
Move comment to a more useful place.
Correctly determine whether offline promotion is likely to work.
Merge in default
stable to default
Merge bug26564
Ahem
Don't send reply until the BQ:init has taken place, and thus the master has started slaves if we are HA.
merge stable into bug26553
Replace down_slave_nodes with a new field recoverable_slaves with different semantics: this field is intended to show all nodes that contain a slave, even if they are running. That means we don't have to worry about race conditions when getting nodes into the field at shutdown.
stable to default
Merge bug26562
rabbitmq-env: Use "hostname -f", not "hostname --fqdn"
stable to default
Merge bug26559
stable to default
Merge bug26558
merge stable into default
Slightly clearer names
rabbitmq-script-wrapper: Use "exec" to execute the subsequent script
Link channel process, handle more exit cases
First off, remove workaround.
adds RABBITMQ_CTL_ERL_ARGS to rabbitmq-plugins
Handle system messages in the reader
stable to default
Point out that tracing state is not persistent.
Merge bug26554
Change the default, update the example config.
Merge bug25430
Fix tests.
Limit journal size ro target_ram_count or queue_index_max_journal_entries, whichever is lower.
Prohibit deletion of amq.* exchanges, not just amq.rabbitmq.*
Merge bug26463
Typo
Merge bug26499
Oops
Simplify purge/1 and friends by getting stats/3 to do the work of updating counters, rather than having separate code to do that. This is conceivably slightly uglier, since the #vqstate{} record is not internally consistent at some points while doing this... but it's so much simpler!
Rename things.
Simplify SignRamReady.
Refactor updating all of the various counters we have into a single function rather than having a load of ad-hoc updates scattered everywhere. Not perfect but already an improvement.
Don't use title case, we don't use it anywhere else.
Revert the merging of bug 25210, and thus allow death of mirrors to cause new slaves to start.
stable to default
Merge bug26549
Check that our generated distribution port is actually a valid port number! Also rename some exit codes for more generality and clarity.
No longer needed.
Merge bug 26527
Merge bug26543
Split out QI operations which apply to whole files at once.
Merge bug26543
Fix a couple of silly bugs: specify the journal prefix lengths for ack and del, and correctly assemble the segment backwards.
stable to default
More clarity and accuracy.
Also, switch to reading the journal in one go. We don't care about this for performance, but it's probably a simplification.
Read segment files in one call to fhc:read/2.
Write segment files in one append/2 operation.
Merge bug26542 (again)
Oops, headers can be undefined.
Merge bug26542
Improve the performance of determine_persist_to/2, stop it being a hotspot.
stable to default
Merge bug26541
Don't depend on Array.indexOf(), we want compatibility with MSIE <= 8.
Merge bug26484.
merge bug26426 into default
Allow seeking backwards through the read buffer.
UI tweak: when we have chart legends with many lines, split them into groups of three.
Merge bug26522
Merge bug26522
Merge bug26522
Doc
UI tweak: split up more
Merge in default
Merge bug26327
Fix confusion over where the embedded size lives.
Oops.
Simplify reading message body.
Finish the job started by 2f668f7b457f; make sure we always hold messages in memory in the serialised form.
Rename this for a bit more clarity.
stable to default
Merge bug26533
More cautious, and hopefully less crashable no matter what gets handed to it.
Only call create_pub_record_body/2 once per message published; keep the serialised form in memory.
Merge bug26327
Fix eager sync.
Deal with sending additional acks on or after promotion.
Flow control for messages going from channel to slave via GM. Reshuffle the flow control flag into #delivery{} to try to cut down on the number of places it gets passed around. Still to come: DTRT on promotion.
Merge bug26427
Ahem
So that term_to_binary/1 there somehow seemed to end up creating a lot of garbage under heavy load; pumping millions of messages into a queue became almost quadratic. I'm not sure how or why, but let's try another tactic.
stable to default
Merge bug26528 (again)
Oops
stable to default
Merge bug26528
Fix fill escaping, plus a test.
Don't fail if sbin or etc exist
Make .msi installer install new version after uninstalling the existing one
Don't fail if sbin or etc exist
Add 'debug' to the valid log_levels in rabbitmq.config.example
Do not log the real connection timestamp
Merge in default
stable to default
Either works, but these are really maps.
No, didn't really work.
No, didn't really work.
Stats on message store size.
Stats on message store size.
Remove /tmp/rabbitmq.config.example after RPM build
More statistics.
More stats (and rename the existing ones).
Remove the prefix, these names were getting verbose.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_4_3 for changeset 55b02e52c56e
Added tag rabbitmq_v3_4_3 for changeset ebead52d3de4
Added tag rabbitmq_v3_4_3 for changeset 066821b3f751
Added tag rabbitmq_v3_4_3 for changeset 448d2893e829
Added tag rabbitmq_v3_4_3 for changeset 71d8fa81331d
Added tag rabbitmq_v3_4_3 for changeset 41fc34984e75
Added tag rabbitmq_v3_4_3 for changeset c45a251fd5c0
Added tag rabbitmq_v3_4_3 for changeset e26b6d3b700a
Added tag rabbitmq_v3_4_3 for changeset 1caed0dd81c1
Added tag rabbitmq_v3_4_3 for changeset d719d8c6524f
Added tag rabbitmq_v3_4_3 for changeset c8393cebfb84
Added tag rabbitmq_v3_4_3 for changeset fa5dc5f54ab9
Added tag rabbitmq_v3_4_3 for changeset 705e3f3d4a1f
Added tag rabbitmq_v3_4_3 for changeset 4442293fe862
Added tag rabbitmq_v3_4_3 for changeset e58f1cc5c08b
Added tag rabbitmq_v3_4_3 for changeset eaffa6e19a09
Added tag rabbitmq_v3_4_3 for changeset cb3ef9f2c23a
Added tag rabbitmq_v3_4_3 for changeset 6d7b2e0ca25e
Added tag rabbitmq_v3_4_3 for changeset ba30e4f0e084
RPM/deb changelogs for release 3.4.3
Decide where to persist to based on the encoded size of the message.
stable to default
Merge bug26515 (again)
Another place where keys need escaping.
Merge bug26517 (again)
Make fmt_trunc() actually do the right thing, as well as being secure.
Merge heads of default
Merge bug26393
API change
stable to default
Merge bug26520
Correctly escape cluster name and user name (and version strings, which I don't think are conceivably exploitable but since we're here...)
stable to default
Merge bug26518
Merge bug26517
Merge bug26516
Merge bug26515
Merge bug26393
Merge bug26393
stable to default
Merge bug26503
stable to default
Merge bug26502
stable to default
Merge bug26519
stable to default
Merge bug26519
stable to default
Merge bug26519
_link_to() already escapes, don't do it twice.
_link_to() already escapes, don't do it twice.
_link_to() already escapes, don't do it twice.
Correctly escape user names in vhost list and vice versa.
Correctly escape special client properties.
Correctly escape policy names.
Correctly escape table key names.
Rework SSL's verify_fun support
Remove 'backing_queue_status' from ?STATISTICS_KEYS
How to recover from partitioning after 'pause_if_all_down' is configurable
Rename 'keep_preferred' to 'pause_if_all_down' and accept a list of nodes
merge bug26504 into default
Add configuration parameter for cowboy connection pool size.
Handle read failure in read_pub_record_body
Remove vestigial use of read_ahead.
Use msg_in_ram/1 more.
stable to default
Merge bug26490
Rephrase, and add a high level introduction.
Reduce distance to default, add a tiny bit more explanation.
Merge in default
stable to default
Merge bug26498
Run the VQ tests both while embedding messages in the QI and sending them to the store.
Minor refactor.
Backport the part of 505868f421db which fixes ram_bytes when requeueing an in-memory message to delta, and do the same for beta.
A few fixes to VQ book-keeping, which get the tests passing again:
Restore the previous "accepting AMQP connection" wording
merge bug26475 into default
Inline the Continue() anonymous function
Add more information to the 'about_to_heal' state explanations
Log new/closed connections only if they are not a healthcheck
Add a 'debug' log level
stable to default
Merge bug26491
Minor language corrections.
No need to concatenate hard-coded lists...
Now that empty keys are dropped, we can always add ssl_* keys
Autoheal: Make sure Mnesia is stopped on all losers before they restart
Autoheal: The loosing leader must wait for the winner_is message
stable to default (Alvaro forgot)
Nicer feedback.
Split out preparation from rename/2, and add comments.
Various fixes / improvements: with the new scheme multiple renamings will not waork, so check for them. Fix abortive renames (with a copy of the mnesia dir). Ensure we don't talk to any other nodes while backing up / restoring since that inevitably goes wrong. Split up rename/2 a bit and rename a few other things for more clarity.
Fail clearly if the node specified with '-n' is not a member of the cluster before or after.
Ensure become(node()) works rather than failing with {node_running, ...}.
WIP clustererer compatibility: install the fallback and "upgrade" mnesia at rename_cluster_node time, instead of during next boot. This means we need to faff around a bit making sure we do not contact other nodes during the upgrade, but also that on-disk data structures are left in a consistent state for the clusterererer to find them.
merges bug26478 into stable
Clearer test failures.
API changes
Don't recover transient messages.
Update essay.
Introduce a selection mechanism so that small messages go to the index, and large ones go to the store.
Fix bookkeeping of ram_msg_{count,bytes} - don't assume it decrements on alpha -> beta transition, allow it to decrement on beta -> delta as well if the message went to the QI. (We were already correct on delta -> beta, and there isn't a bulk beta -> alpha move.)
RJMS-1.3.3-SNAPSHOT
RJMS-1.3.2-RELEASE
Reinstate this.
update-osl-file
Upgrade
stable to default
Merge bug26446
stable to default
Merge bug26493
Abstraction: safe process_info().
Add top_memory_use() and top_binary_refs().
Don't leak on noack.
Fix dirty recovery.
Fix confirms
Rename msg_on_disk to msg_in_store and fix up its semantics. We now don't need to guard msg_store read and remove as we should just naturally not need to do them.
Hacked-together implementation of persisting messages in the QI. Currently does it for all messages, but in reality we'd only want to do this for small ones (and make it configurable). Confirms are probably broken, maybe some other things.
Throw an error if at least one plugin's module can't be loaded
Filter out auth notification properties with no value
Style fix: Use ++ to construct EventProps, not multiple temporary variables
Tiny bit of doc on the API.
Pass "extra properties" to notify_auth_result/{3,4} instead of a message
Only include ssl/certificate informations when the connection is over SSL
Use list comprehension instead of lists:foldl/3
Use rabbit_misc:format/2 instead of lists:flatten/1 + io_lib:format/2
Move the info keys list added to user_authentication_* to a -define()
stable to default
Merge bug26486
Use /usr/bin/env
Add a new "keep_preferred" cluster partition handling method
stable to default
Merge bug26482
Maybe clearer?
Add a section to the manual page.
Swap location of backup and regular config files. A bit less logical, but we need them to be in the right place when starting for big-bang upgrades to work.
Put all the rename-related temp files in a directory together, and keep copies of the rewritten configs so we can roll back without having to re-edit them.
Allow argument-pairs to rename_cluster_node to go in any order (and thus allow remote-only renamings). Don't use mnesia:transform_table/3 since it's rather picky about which disk nodes are up.
Rename again
And unbreak clusters.
Detect starting as the old node name after a rename and roll back. Also rename a bit.
Less io:format, more rabbit_log.
Improve the chance of not losing a bunch of data.
Oops
Rename things
Remove commented out bit, remove pointless RPC (we're in the cluster by that point, we can make Mnesia changes ourselves).
We are presumably the source of truth now, so make sure we boot.
Merge bug26480 (again)
Merge bug26480 (again)
Oops, that might not exist
Oops, that might not exist
merge heads of default
merge bug26481 into default (again)
ssl_cert_login and allow_anonymous probably won't be explicitly set to undefined
Merge bug26480
Merge bug26480
Drive by change: correct error message arguments here
Don't swallow exceptions in mqtt_processor:process_frame/1
Simplify. Enforce always running SSL tests. Don't create global variables in the Makefile namespace. Make the SSL test script work properly when run from the umbrella.
Simplify. Enforce always running SSL tests. Don't create global variables in the Makefile namespace.
merge bug26481 into default
Make sure ssl_cert_login has a default value
stable to default
Merge bug26265
No need to load/unload the plugin around the plugin_provided_by_otp/1 check
Remove "Plugins: adding to code path" log message
Oops
Oops
Don't dump the rabbit_reader state in the log...
stable to default
Merge bug 26081
Rename this to indicate what it does, not the current circumstances in which it is called.
Rename this to avoid conflict with STOMP. Something of a hack, but it seems to work.
Rename this to avoid conflict with MQTT. Something of a hack, but it seems to work.
Indicate if no data was received in the "closing AMQP connection" log message
Backout more package.mk changes
Backout more package.mk changes
Backed out changeset aed1b2464613
Support renaming other remote nodes at the same time, in case we want to do a big bang.
Don't be so keep to call upgrade_mode/1, it can die in all sorts of ways.
Add a rule for TEST_EBIN_DIR
Rearrange things a bit. We now have something that seems to work.
Don't log any warning if a TCP connection is closed immediately after open
Attempt to fix CI
Attempt to fix CI creating test/ebin in one more place
Check cluster consistency before joining a cluster
WIP towards rabbitmqctl rename_other_node.
Only check ERTS version to determine if we accept an external eldap
Return the username in the new {refused, _, _, _} tuple
Drop {refuse, _, _} from rabbit_auth_mechanism:handle_response/2 return values
Don't halt execution if RABBITMQ_CTL_ERL_ARGS is set.
Rephrase a comment to use the present tense
Update rabbit_auth_mechanism:handle_response() spec to match the change
Oops
Create a way to mutate pids and use that rather than creating "fake" pids.
stable to default
deb / RPM changelogs
First pass at "rabbitmqctl rename_current_node"
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_4_2 for changeset 42cd8187fc66
Added tag rabbitmq_v3_4_2 for changeset de59b1a708d1
Added tag rabbitmq_v3_4_2 for changeset e197faef15e7
Added tag rabbitmq_v3_4_2 for changeset fbd66c9f679f
Added tag rabbitmq_v3_4_2 for changeset d4b3d311b93d
Added tag rabbitmq_v3_4_2 for changeset 910d70bb6a14
Added tag rabbitmq_v3_4_2 for changeset 8123753ef555
Added tag rabbitmq_v3_4_2 for changeset 29aa155b0612
Added tag rabbitmq_v3_4_2 for changeset b32eb93d4da5
Added tag rabbitmq_v3_4_2 for changeset 04e7b678d779
Added tag rabbitmq_v3_4_2 for changeset 6b3173e7e8f9
Added tag rabbitmq_v3_4_2 for changeset 41efd57433d2
Added tag rabbitmq_v3_4_2 for changeset 488e6afa1bd3
Added tag rabbitmq_v3_4_2 for changeset a91f29dc3202
Added tag rabbitmq_v3_4_2 for changeset 9ee1979fdf1d
Added tag rabbitmq_v3_4_2 for changeset b0cc0cadf9f5
Added tag rabbitmq_v3_4_2 for changeset cdb51932c3fc
Added tag rabbitmq_v3_4_2 for changeset 255d8ac60bbb
Added tag rabbitmq_v3_4_2 for changeset 78739b3d8472
Merge bug26471
Rename this since it's not quite just success / failure any more.
Merge heads
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Removed tag rabbitmq_v3_4_2
Added tag rabbitmq_v3_4_2 for changeset f86d605b6b21
Added tag rabbitmq_v3_4_2 for changeset e7c445be439a
Added tag rabbitmq_v3_4_2 for changeset 0e251f0d5d08
Added tag rabbitmq_v3_4_2 for changeset e45022bb8b2d
Added tag rabbitmq_v3_4_2 for changeset 2ce0223d7c8c
Added tag rabbitmq_v3_4_2 for changeset ce7505acbb8b
Added tag rabbitmq_v3_4_2 for changeset cad34a24674f
Added tag rabbitmq_v3_4_2 for changeset 302a7d6e5e83
Added tag rabbitmq_v3_4_2 for changeset 3da92a103f61
Added tag rabbitmq_v3_4_2 for changeset a2cac2089a75
Added tag rabbitmq_v3_4_2 for changeset 1805e4089420
Added tag rabbitmq_v3_4_2 for changeset e9dbd8384879
Added tag rabbitmq_v3_4_2 for changeset 7ed78a2dc946
Added tag rabbitmq_v3_4_2 for changeset 41bb96c96b24
Added tag rabbitmq_v3_4_2 for changeset b2074f6cbfbf
Added tag rabbitmq_v3_4_2 for changeset 5804d94fdfb5
Added tag rabbitmq_v3_4_2 for changeset 3596f95b8409
Added tag rabbitmq_v3_4_2 for changeset a5e97211aaa0
Added tag rabbitmq_v3_4_2 for changeset d472925bb786
During startup, log statistics after modules were hipe-compiled
Use absolute paths here
merge default into bug26278
Don't require peer cert
Require TLS certificate in TLS authentication tests
Pick most recent TLS version available
merge bug26278 into default
Use TLS v1.1 because v1.2 is not available on CI machines
Add more properties to the user_authentication_* notifications
stable to default
Merge bug26367
stable to default
Merge bug26474 (again)
Also add a tiny bit more logging, for symmetry.
Mutual disconnect when partial partition detected. And don't allow a very short disconnection since Mnesia might not detect it.
Do not attempt to "fix up" the partitions field; if Mnesia does not detect the partition it will behave wrong anyway.
merge bug26278 into default (again)
Add plugin paths to the beginning of the code path
Certificate authencation needs to be enabled explicitly, as with STOMP
Make it clear that this test does not expect an authentication failure
Merge heads of default
Merge bug26257 (again)
When reporting invalid cluster node names, keep configuration order
Add a comment so we remember x-dead-letter-exchange was already verified
stable to default
Merge bug26474
Cosmetic
Rename TLS test package
Ditto
Cosmetics
Even closer to reality.
Remove out of date subclause.
Restore the "x-dead-letter-exchange" check lost in changeset 12133
merge bug26278 into default (again)
Only ignore test/build/ but not test/build.xml and test/build.properties
merge bug26278 into default
Merge bug26257
Client MQTT authentication using x509 certificates
Drive-by simplification.
The last changeset made it possible for Mnesia to not report a partition, so do so explicitly here.
Be a bit more careful before declaring a partial partition.
Detect other invalid 'cluster_nodes' values
stable to default
Merge bug26417 (again)
We don't need to throw that any more, maintain an API like that of rpc:call/4.
Be a bit more sensible with syncing the ticktime; only do it when RPCing into the node (since there are plenty of commands where we do not expect the node to be up, which the previous changeset breaks...)
stable to default
Merge bug26417
Sync ticktime with server.
stable to default
Merge bug26470
Sleep to mitigate bug 26467 in the 3.4.x series.
Remove support for the legacy 'cluster_nodes' values
stable to default
Don't proceed until the supervisor has actually gone.
stable to default
Merge bug26472
Don't crash when logging to tty.
Merge bug26469
Merge bug26469
Merge bug26469
Merge bug26469
Merge bug26469
Merge bug26469
stable to default
Merge bug25788
Consume and handle {run_backing_queue, _, _} messages.
API changes.
Export new modules.
Tweak the APIs again, so that authz plugins aren't expected to create a #auth_user record in the first place, just whatever impl they want. Which necessitates seperate login functions for authz and authn, and if we're going to do that we might as well split the behaviours so that we have the possibility of making an authz-only plugin.
API update
API update and don't drive the auth_backend API directly, we have rabbit_access_control for that!
Rename.
Fix tests.
Port more API fixes from Petr's branch.
Never pass the #user{} record into auth backends, they should only see their own stuff. Get rid of authN_backend, it has little reason for existing. Flatten case of authZ_backend.
auth_backend field is no more (and not used anywhere).
Modern Debianbuntu packages ldapadd seperately.
API changes.
Warn on no LDAP server.
Cosmetic.
Import changes from https://github.com/gotthardp/rabbitmq-server/tree/multi_authorization
Merge bug26457
Remove a couple of TODOs, make the read buffer size configurable, and don't use the read buffer for the QI or msg store transform since they already read in decent sized chunks.
Small refactor suggested by Matthias.
Be a bit more systematic about reseting the read buffer.
If they ask to read more than the buffer size, do so.
Add some documentation.
R13B03 compatibility.
Merge in default
Merge bug24781
Merge bug24781
Merge bug24781
stable to default
Merge bug26468
Fix forgetting queue when deleting offline.
stable to default
Oops
API doc.
Display stats on FHC recycling.
Emit stats on FHC recycling.
Also display stats on seek.
Also generate stats on seek.
Merge in default
stable to default
Merge bug26464
Switch to floor() for everything bar queue lengths, and explain why.
First pass at adding a read buffer to file_handle_cache.
RJMS-1.3.2-SNAPSHOT
RJMS-1.3.1-Release
osl-RJMS-1.3.1
stable to default
Merge bug26460
Don't badarg if a process goes away while running this.
Rename this
Rework the fmt_foo functions that can be plugged into charts for rather greater simplicity, and thus get the I/O stats charts looking better.
Report 0 for avg times + cosmetic.
Show avg times.
Filter FHC stats a bit, to derive avg operation time
Move this formatting up to the agent.
Display FHC stats.
Emit FHC stats
Forgot to add that...
Simple statistics about reads, writes and syncs through the FHC.
stable to default
Merge bug26455
Cancel outstanding requests when changing template; when they arrive they will probably cause page rendering to fail.
Merge bug25652
Language
Merge bug25652
stable to default
Merge bug26454
Immediately shut down if there's nothing to do.
Redirect after creating the shovel; makes it obvious something has happened and hopefully the messages will start to move soon.
Allow redirecting after creating a shovel.
stable to default
Merge bug26452
Unused vars
Don't leave a status behind for autodelete shovels.
stable to default
Merge bug26453
Cope if the shovel is not there.
Explicit "move messages" UI, since people don't necessarily find the shovel.
stable to default
Merge bug26451
Don't talk about Disk Used when you mean Disk Free.
stable to default
Merge bug26449
Also be more explicit about what we don't like; don't just dump out the entire table.
If we don't know what else to do, at least don't garble binaries.
Merge bug26444 (again)
...and another stupid bug
Merge bug26444 (again)
That shouldn't be a complete copy-paste of the parse_table/1 version.
Merge bug26444
Oops
Inline parse_field_value/1 and thus prevent sub-binary construction in accordance with the principles documented at http://www.erlang.org/doc/efficiency_guide/binaryhandling.html
stable to default
Merge bug26441
adds missing CLEAN_BOOT_FILE
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_4_1 for changeset 2ce013690c96
Added tag rabbitmq_v3_4_1 for changeset b7e25e767cac
Added tag rabbitmq_v3_4_1 for changeset a849214cca75
Added tag rabbitmq_v3_4_1 for changeset 9ccc00e27f3e
Added tag rabbitmq_v3_4_1 for changeset caf3d0a80cf3
Added tag rabbitmq_v3_4_1 for changeset 65a96182f47c
Added tag rabbitmq_v3_4_1 for changeset cb89c48b8c11
Added tag rabbitmq_v3_4_1 for changeset 3bdd5b9661de
Added tag rabbitmq_v3_4_1 for changeset 1aa88973416c
Added tag rabbitmq_v3_4_1 for changeset ec7ececaaf89
Added tag rabbitmq_v3_4_1 for changeset 468c40c3c141
Added tag rabbitmq_v3_4_1 for changeset ca49762459c8
Added tag rabbitmq_v3_4_1 for changeset d6f480a252da
Added tag rabbitmq_v3_4_1 for changeset b44d79ad3698
Added tag rabbitmq_v3_4_1 for changeset e202d8c66f0e
Added tag rabbitmq_v3_4_1 for changeset 57671be5034f
Added tag rabbitmq_v3_4_1 for changeset b26a5e53aff4
Added tag rabbitmq_v3_4_1 for changeset 9d1c4586140c
Added tag rabbitmq_v3_4_1 for changeset 47d4a08137ff
Changelogs for 3.4.1
stable to default
Cosmetic
stable to default
Merge bug26438
Fix 500s listing permissions for nonexistent users or vhosts.
stable to default
Merge bug26437
Ensure responses are always application/json, even in error cases handled by webamchine.
stable to default
Merge bug26433
Strip CR/LF out of any response headers we set.
Not needed any more
Start distribution early so we correctly generate node from "-n"
Explain what we are doing and why.
Check in with epmd periodically, if it hasn't heard of us then re-register (and restart it if needed).
Revert to stable-like behaviour, always starting epmd, but starting it ourselves since we will need this capability later and it lets us get better error messages.
RJMS-1.3.1-SNAPSHOT
RJMS-1.3.0-RELEASE
update-osl-file
*Do* start epmd ourselves if we want to impersonate a node. And just allow net_kernel:start() to fail and catch the error later.
stable to default
Merge bug26431
Fix rendering of exclusive queues in the list. Damn it.
Change 1.2.6-SNAPSHOT to 1.3.0-SNAPSHOT (1.2.6 is not a release).
Add compatibility check for 1.2.5.
stable to default
Merge bug26429
Log when plugins started / stopped
RabbitMQ 3.4.0 introduces cleanup for registry when disabling plugin live.
First pass at having ctl and plugins not start epmd. This can cause problems though if we are contacting a remote node, or removing a cluster node offline.
Unused variable
stable to default
Merge bug26425
Read the env file before figuring out USE_LONGNAME.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
Added tag rabbitmq_v3_4_0 for changeset 8c9e660c042d
Added tag rabbitmq_v3_4_0 for changeset 373e0a193e0f
Added tag rabbitmq_v3_4_0 for changeset 2e5565fd5332
Added tag rabbitmq_v3_4_0 for changeset cdced8a7787f
Added tag rabbitmq_v3_4_0 for changeset d3713b048a6e
Added tag rabbitmq_v3_4_0 for changeset b531b7b70a17
Added tag rabbitmq_v3_4_0 for changeset 22e262a650ba
Added tag rabbitmq_v3_4_0 for changeset 239a7dc796c7
Added tag rabbitmq_v3_4_0 for changeset 8d66745bc97c
Added tag rabbitmq_v3_4_0 for changeset 468ceb1450fd
Added tag rabbitmq_v3_4_0 for changeset ca4e34a53127
Added tag rabbitmq_v3_4_0 for changeset 5933c590f284
Added tag rabbitmq_v3_4_0 for changeset 811e079fa7df
Added tag rabbitmq_v3_4_0 for changeset ec9c7a03c03c
Added tag rabbitmq_v3_4_0 for changeset ac4280fb115a
Added tag rabbitmq_v3_4_0 for changeset 52e1c35b12d2
Added tag rabbitmq_v3_4_0 for changeset 07b0eafa7dbd
Added tag rabbitmq_v3_4_0 for changeset 80ea30309260
Added tag rabbitmq_v3_4_0 for changeset e88d71c0fcdf
Distro changelog for 3.4.0
Gah, fix logout.
Merge bug26423
Change home before executing rabbitmq-plugins so we pick up the correct Erlang cookie. But only do that if the cookie exists, otherwise we might create one owned by root and break everything.
Fix display of legends on Firefox.
Typo
No longer relevant
Simplify CSS, and don't show bottom border under +/- on Firefox.
Improve appearance of direct connections
Rename this since it shows up in mgmt / ctl and should match the user name for the connection.
Allow people to re-enable SSLv3 even on newer Erlangs with ssl_allow_poodle_attack; people might be stuck with SSLv3-only clients and view this as the lesser of two evils.
SSL details in the list view, helps with POODLE-reassurance.
Merge bug26422
Also ignore sync messages if needed.
Sleep briefly, and explain why.
Updating to latest stomppy seems to be a huge task, so just patch the old stomppy to use TLSv1 for the time being.
Merge bug26418
It makes more sense to monitor the remote supervisor than the remote node, so lets do that.
Detect connection failure when a direct connection is used.
Link a channel with its writer when a direct connection is used.
Merge bug26419
Merge bug26419
Merge bug26419
Merge bug26419
Merge bug26419
Merge bug26419
Fix the SSL options for TLS too. Make sure we compare the unfixed version with [], since the fixed version will never be [].
poodle_check/1 has to come after ensure_ssl/0.
poodle_check/1 has to come after ensure_ssl/0.
poodle_check/1 has to come after ensure_ssl/0.
Disable SSLv3.
Disable SSLv3.
Disable SSLv3 and warn if we can't.
Oops
Oops
Test for old Erlang, and shout if we are vulnerable.
Test for old Erlang, and shout if we are vulnerable.
Test for old Erlang, and shout if we are vulnerable.
Remove bad SSL versions from the configured ones, don't hard code good versions (which differ across Erlang releases). Never permit use of bad SSL versions. Export a function to do this with.
Disable SSLv3 in the app descriptor
Update rabbitmq.config.example
Handle edge cases, log enabled TLS/SSL versions
Override ssl_options.versions in the app descriptor
Merge bug18626
Fix plugin activation on Windows.
Correct how to refer to environment variables.
Add RABBITMQ_USE_LONGNAME. Based on a patch from Marcos Diez but with fixes for the new way rabbitmqctl starts distribution, refactoring of common stuff into rabbitmq-env, not trimming the hostname, etc.
Merge bug26368
stable to default
Merge bug26414 (again)
Build on old Erlang
stable to default
Merge bug26414
Don't use wrq:peer/1
Just in case something goes wrong in our weird unsupervised process, log it.
Be a bit less verbose here: it's actually a very common case and perfectly normal; no need to dump state.
Check whether the cluster is fully connected before trying to autoheal, and ignore autoheal requests if it isn't.
Switch to having the winner inform the losers that they need to stop, rather than having the leader do it. This fixes the race where the leader tells them to stop before the partition has healed from the winner's POV. So it should be simpler and more correct.
In fact, that case can't happen since bug 26043, so let's simplify.
Merge in default (move from stable to default; we need to change the protocol)
Slightly cleaner(?) and don't limit columns if output is JSON.
Oops, and this.
...and I haven't been keeping this document up to date with the changes on default. It is now.
Merge bug26404
Also avoid partition-related hangs here.
Use a new function introduced on default
Merge in default
Merge bug26408 (again)
Separate out different is_process_alive implementations depending on whether we want to consider the process alive if it is running but we can't talk to it via Mnesia. Thus unbreak exclusive queues with the direct client from non-Rabbit nodes.
Merge bug 26408
Merge bug26410
Use flow control when talking to the message store, on a fast machine this test could overwhelm the message store such that gen_server2:drain/1 never completed.
Merge bug26409
Rethink partial partition detection: switching to disconnecting the node that first saw a DOWN (rather than the one that DOWN was about) means we don't need the delay. Also don't attempt to ask nodes we're partitioned from to check; let's not multiply entities needlessly.
Check Mnesia's idea of which nodes are running; avoid infinite loop.
Oops
Slightly more accurate comment.
Make rabbit_misc:is_process_alive() return false for nodes we are partitioned from; prevent prequeue:init/1 from entering an infinite loop on partition.
Merge bug26407
Partial partition delay.
Mini essay
Merge bug26406
Update docs.
Return environment for all apps.
Unbreak quickcheck.
Minor layout improvement if paths are long.
Defend against partitions at the wrong time causing badness.
Merge bug 25850
Make green used by processes a bit darker to make it more distinct from yellow for connections.
I suspect if you have long policy names then incorprating policies into the features column will prove annoying. So allow people to move it out by offering a couple of extra column options. And add this feature to the exchanges list while we're there.
Rename function, and GC for large messages on the way out, too.
Prevent the channel from holding a lot of binary garbage when accepting huge messages.
Merge bug26401
Merge bug26401
Oops
A bit more abstraction.
Rejig the memory use templates to show connection process subtypes. It therefore seems sensible not to try to invent more colours but to put things together into groups.
Classify ETS memory by owner (and thus include all msg store memory under "msg store index").
Split out connection memory into reader / writer / channel / other.
Merge bug26213 (again)
Just because we received a running_partitioned_network, doesn't mean all nodes are now contactable. Defer attempting autoheal until we can talk to everyone again, to avoid getting stuck in a loop with partial partition promotion.
Merge default
Merge bug26368 (again)
Distinguish between "already stopped" (fine, carry on) or "already down" (abort since we've lost contact).
Merge default
Merge bug 26213
Allow requires / enables to be multiple steps, reduce ugliness.
stable to default
Merge bug26399
Use os:timestamp/0 to match use in rabbit_event.
Merge bug26398
MErge bug26398
Display binary use in mgmt.
Oops
That had been bugging me since 2010. No idea why it's needed.
Present memory and aggregated binaries in the same way.
MErge bug 26397
Merge bug26397
Simplify.
stable to default
Merge bug26040
Add dependencies for some things we have always needed.
Log something when the app stops, so that we can tell when stop_app etc has succeeded.
In the event of a partial partition in pause_minority mode, pause until everything comes back - otherwise we stand a chance of just reconnecting and still being in a partial partition.
Slave bucket.
Oops
Split out slaves into their own bucket.
That try/catch should always have been rabbit_misc:with_exit_handler/2, there are more possibilities than noproc.
During failover this can be missing; don't break the page layout.
Partial partition detection and handling (where by "handling" we mean "promotion to full partition"). This necessitates that we hold GUIDs for each node (so that we can detect if a node has restarted behind our back).
gets queue durable flag from the exchange
Oops
Revivify 664ddb5eccf1.
Merge bug26394
Cluster keepalives.
Show / hide columns in overview
stable to default
Merge bug26392
Remove use of SockJS CDN
stable to default
Merge bug26392
Remove use of SockJS CDN
typo
updates docs
for some reason we were declaring sharded queues as non durable
fixes intercepted queue declare
Merge bug26391
Default to limiting columns in list views (and "show overview") to make initial use less overwhelming.
fixes bug that won't replicatee tables to other nodes
Merge bug 26390
Make all chart ranges use the same preference.
Merge bug26389
When we add a new consumer we might be inactive; make sure we transition to active since consumers by definition start out unblocked.
Merge bug26386
Just log a warning if we can't start the logging exchange.
Merge bug 26387
Merge bug26387
Report the Erlang version correctly.
Work around Surströmming-addled ideas about how to report version numbers.
adds multinode tests
updates old code
typo
Merge bug25984
This is not important enough to show by default!
Switch to using HTML5 local storage when available.
Don't store the auth cookie explicitly, do everything via the prefs module.
Merge bug 26378
Move actual supervisor definitions out to avoid conflicting behaviours in a module.
Merge bug 26382.
Just strip this out; I suspect no one in the world cares but if they do we can bring it back with +/- columns.
Fix message rates breakdown
Selectable columns in vhost list.
Aesthetics.
Selectable columns in connection list.
Selectable columns in channel list.
Some more columns.
Column show / hide mechanism, and convert the queue list page to use it for the existing columns.
Merge bug 26216
Ensure we always compile test code, in case plugins need it.
Merge in default
Merge bug26216
Move test modules to their own directory.
Split mirrored_supervisor_tests in two to avoid behaviour clash.
Merge bug 26375 (again)
Make sure we only return the plugins we want here even if others are unpacked.
Merge bug25824
Merge bug26375
fewer gratuitous line breaks
If there are enabled-but-missing plugins, don't fail activation; we don't fail to boot here so live activation should be OK too. The command line tool will have warned the user.
Always warn if there are enabled-but-missing plugins.
Rename GM:terminate/2 to GM:handle_terminate/2 so that it doesn't conflict with the same callback in gen_server.
Merge bug26211
Work around what looks like a bug.
Also since we are here, fix old-Erlang behaviour_info/1 that got out of sync.
While we're here, fix another warning.
Switch to Erlang 17-style types, /0 versions at least.
Specs for the spec god!
Crude binary-summarisation thing.
Oops, that was renamed.
Pass the full queue to BQ:delete_crashed/1 since priority_queue will need it.
Merge bug26370
Reinstate exported action/6, rabbit_test_util uses it!
Probably better to rename this since it usually means heartbeat once running.
Oops, 'unknown' not 'undefined'.
Merge bug25955
Update tests
Extract more commonality.
Extract commonality between rabbit_control_main and rabbit_plugins_main.
Merge bug26366
stable to default
Merge bug26344
Make sure the server sees RABBITMQ_CONFIG_FILE and can thus log the config file location even if it's absent.
Only check vhost / user / permission tables before inserting default data in case we somehow get a row somewhere during early startup in first boot that confuses the check.
Merge in default
Merge bug26151
Merge bug26151
Delete a bit of complicated code.
Get state from Mnesia if applicable.
Merge in default
Merge bug26372
Oops
Reify queue crashed state.
Merge in default
Be more assertive, don't assume application.
Believe it or not, bug 21446 perturbed things enough that this was no longer enough (on CI at least) in wait_for_confirms/1. So bump it I guess.
Stack trace on test failure.
Post bug 21446 this test became racy since it is supposed to kill the queue and not have it restart - so let's kill the supervisor first.
stable to default
Merge bug26368
Make sure we don't hang waiting for a node to go down if it went down before we became the winner.
Merge bug 26340
Since we have this new mechanism, use it for policies as well.
Style the user tags thing to match.
Add a mechanism to fill in argument fields, remove the "known field" filling.
Add crashed queues to the output of "rabbitmqctl list_queues". This is rather fiddly since we need to distinguish between queues which are crashed and those which are deleted in between us checking Mnesia and calling the queue pid. We do this by observing that the deleting queue removes its own Mnesia record, so we can check again and if the record is still there after the pid is down, it must have crashed. But this is still rather fiddly; and I wonder if reifying the crashedness in Mnesia would be cleaner.
Add a crashed state.
Emit a final event to say we crashed.
Merge in default
Merge bug21446
You should be able to delete a vhost containing a crashed queue too.
Improve comments
Quotes.
...and the same for exchanges.
Sensible errors on queue durable / auto_delete inequivalence.
Show queues which are down in management.
Show down queues in "rabbitmqctl list_queues"
Since we now only show the prefix if it's relevant, there's no point in it being small as well.
Merge in default (no-op)
Move some chunks of code around and rename a couple of functions in order to be closer to bug 21446.
Restart exclusive queues correctly, update comment.
Further reduce distance to default (especially in slave), by getting the prequeue to pass straight into the right module at the end of init/1.
Fix type spec, fix a behaviour warning.
Reduce distance to default, especially WRT rabbit_amqqueue_process startup.
Minor simplification.
Oops
Rename slightly and improve comments.
Oops
Oops
Cosmetic
Introduce the idea that queues can be absent for a reason. The traditional absent reason is 'nodedown' and we have a new reason, 'crashed', for when crash recovery has failed and the supervisor has given up. An absent crashed queue is nearly the same as an absent nodedown queue, but we allow for deleting it since it can't be recovered by bringing a node back up.
Try to be consistent.
Spec
Merge in default.
Merge bug26363
Filter out nodes where Mnesia is not running.
stable to default
Merge bug26362
Slightly less threatening error description, and add stack trace
RJMS-1.2.6-SNAPSHOT
RJMS-1.2.5
open_source_licences_file
merge bug26356 into default
Use human-readable MQTT versions in connection adapter info
We can't assume encoded lengths, so do it all in lists.
Damn it, Python.
Merge bug26358
Support publishing with properties.
That's not been relevant since 2.6.0 or something.
stable to default
Merge bug25214
Rename boolean to reuse / single.
Make Mnesia tx worker pool jobs use a disposable process so that if mnesia_locker decides to randomly send a message there later it will just get dropped and not cause chaos.
Unmislead comment.
Don't leak supervisors.
Merge bug26357
Merge bug26357
Add a function to format a human readable timestamp incluing milliseconds; rename these functions for better clarity.
Log time in millis.
Remove silly race.
Avoid binary:split/2.
Merge in default
Cosmetic
Make this test make sense for the new regime. There will of course need to be lots of new tests but at least this passes now.
Switch to making our restart decisions based on explicitly determining whether we are starting for the first time or not. This is not very OTPish but it turns out to be necessary: there's no way to distinguish between losing a race to declare, starting a new slave, and restarting to a new slave otherwise. As an upside this code is shorter and more obviously correct (to me at least).
Allow crashing queue processes to come back as slaves if that's what we need.
This is perhaps more honest; if the queue was transient we will not recover anything and if the queue is mirrored we will restart a slave and then also not recover anything.
Allow transient queues to recover.
Merge bug26353
Those diagnostics are actually a bit dubious, they insert quite a delay and aren't really designed to be logged.
call/2 -> call/3.
merge bug26330 into default
MErge bug25813
stable to default
Merge bug26354
Get the message format right for this case too.
Fix a race.
We handled that case in 359da524140b
Add an intermediate supervisor so that if a queue exceeds its restart limit we don't bring the whole server down!
Log that we recovered. Also store updated pid in Mnesia!
Allow crashing queues to recover themselves.
Remove a pointless check here - we will check from within an Mnesia tx in rabbit_mirror_queue_slave:init_it/4 anyway, which makes much more sense (and it will make little sense to check at slave start if we can restart a crashed slave).
Another copy of the master_in_recovery check. Not sure that's very elegant, but I don't think we have much choice.
Roll slave startup into the new mechanism.
Various spec-ish fixes.
First step along the way to queue restarts. Create a "prequeue" module whose job it is to decide how to proceed, and then have the supervisor start that. At the moment we only handle rabbit_amqqueue_process startup through this, but that will change. Also move the tx which decides whether we successfully declared the queue or not into the first part of the queue startup (before we call into the queue) since in future it will be needed for other things.
Return 1 consumer.
Implement declaration.
stable to default
Merge bug26347
Prevent malicious channels from sending messages to arbitrary processes with this mechanism.
We'll just document that mandatory doesn't work.
stable to default
Merge bug26343
Restore behaviour_info/1 on older Erlang, don't emit so many warnings.
Two modes for delete, one for when the server is running and we need to be quick going via the reverse route, and another when it is down and we need to clean up durable routes. Not entirely happy with the elegance of this but it gets the tests to pass.
base64 encoding is expensive enough to make it worth precalculating the encoded pid just in case we want to reuse it.
Merge bug26346
Make RPC client response queues auto-delete and exclusive
Remove support for decorators to modify routing for the default exchange; it doesn't make a ton of sense. Also no longer describe this as an optimisation since some of it is more than that.
We don't need to worry about confirms, they will get sent. Change to a soft error for new errors.
Support cancel.
Unused var.
Security hole--
Merge bug26345
Further simplify logging. Get rabbit_log to figure out whether the group leader switcheroo is needed, rather than leaving it up to the caller. We now have one logging API. Woot!
Rename this thing for consistency and also RabbitMQ-specificness.
Merge bug26306
Merge bug26306
Merge bug26306
cosmetic
RJMS-1.2.6-SNAPSHOT
Merge bug26337 (again)
RJMS-1.2.5-Release
Don't break rabbitmqctl remove_cluster_node --offline.
Prototype of fast RPC replies.
Include version 1.2.4 in compatibility check.
RabbitMQ3.3.5
stable to default
Merge bug26341
BE more assertive.
For some reason post bug 26337 we need to make sure this gets logged in the server and not though rabbitmqctl.
UI tweaks primarily to reduce columns in queue list and clean up queue details:
Merge bug25884
Web UI for x-max-length-bytes.
Merge bug25884
Rename
And max-length is implemented in terms of messages_ready, so do the same for max-bytes
Actually maybe that's clearer.
Merge in default
Merge bug26339
Merge bug26339
Document the two new terms.
stable to default
Oops, that has not been true since the stats DB rewrite in 3.1.0.
Display ready and unacked bytes separately.
Track ready and unacked bytes separately.
Max-bytes argument / policy.
Reactor - extract common fail case.
Merge bug26336
Improve logging when auto-clustering fails.
Merge bug26337
Merge bug26337
Merge bug26337
Simplify, given the now-temporary nature of this data structure.
stable to default
Merge bug26338
Catch enotconn here.
Don't log a silly warning if starting from scratch, tidy messages a bit.
Remove a special-case error_logger invocation
Remove a special-case error_logger invocation
Explain better
Remove a ton of special-case error_logger invocations
Remove pointless gen_server.
Merge bug25666
Merge bug25666
Oops
Merge in default
Merge bug26335
Maybe a tad clearer?
Simplify maintenance of persistent_count on ack and purge:
Minor tweaks: reduce distance to default, fix spec, improve assertion, improve comment, cosmetic.
Restore a poorly placed comment
ChPid => DeliveryCtx
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_3_5 for changeset 61896a0a5a55
Added tag rabbitmq_v3_3_5 for changeset 84b65b320044
Added tag rabbitmq_v3_3_5 for changeset ec10824a297b
Added tag rabbitmq_v3_3_5 for changeset 5758171b3c0e
Added tag rabbitmq_v3_3_5 for changeset 8456723b52f0
Added tag rabbitmq_v3_3_5 for changeset af8e568f762e
Added tag rabbitmq_v3_3_5 for changeset 71ed4aa24076
Added tag rabbitmq_v3_3_5 for changeset 414ec6e8cdfc
Added tag rabbitmq_v3_3_5 for changeset 8070b3051a3f
Added tag rabbitmq_v3_3_5 for changeset 3a42b97a6d15
Added tag rabbitmq_v3_3_5 for changeset 892c61fb730e
Added tag rabbitmq_v3_3_5 for changeset bc8a2e7f74de
Added tag rabbitmq_v3_3_5 for changeset bf8b68f1a51b
Added tag rabbitmq_v3_3_5 for changeset 06fdcbffaf2c
Added tag rabbitmq_v3_3_5 for changeset aa531ff20fb8
Added tag rabbitmq_v3_3_5 for changeset 0b2b88337e3c
Added tag rabbitmq_v3_3_5 for changeset abd261c3e3d4
Added tag rabbitmq_v3_3_5 for changeset 7af0bd96f659
Added tag rabbitmq_v3_3_5 for changeset 3347a7f0e689
Changelogs for 3.3.5.
stable to default
Merge bug26313 (again)
...and inline that again.
Use a catch-all fn head instead
Handle exceptions when connection_state = 'starting' the same way we do for 'tuning'
Use manual delivery flow control
Extras => DeliveryCtx
These deliver several protocol methods, not just basic.deliver
Refactor how delivery context is propagated to consumers
amqp_channel:set_manual_flow_control/2 => amqp_channel:enable_delivery_flow_control/1
amqp_channel:set_manual_flow_control/2 => amqp_channel:enable_delivery_flow_control/1
amqp_channel:notify_sent/1 => amqp_channel:notify_received/1
amqp_channel:notify_sent/1 => amqp_channel:notify_received/1
amqp_channel:notify_sent/3 => amqp_channel:notify_sent/1
notify_sent/3 => notify_sent/1
Dialyzer points out that the false branch cannot happen. In bug 26204 we removed that distinction (cancelling an already fired timer); cancel_timer now only returns 'ok'.
Fix type error (introed in 24926 I think) spotted by Dialyzer.
Sigh. The type of the 4th argument to application:set_env/4 has changed in Erlang 17 from being non_neg_integer() | 'infinity' to a proplist of options. And earlier versions of Erlang do not appreciate a proplist here! So just stop using it (yes, 5s timeout, but we have lots of calls to set_env/3 in the tests already and they do not seem to fail).
stable to default
Fix typo spotted by Edwin Fine.
stable to default
Merge bug 26328
Don't stop children if they exist on other nodes when starting the supervisor. And rename slightly.
Merge bug26326
A case missed in bug 26204.
Add some docs for the message_bytes family.
Merge in default
Merge in default
Move vhost display up into the h1.
Move vhost display up into the h1.
Move vhost display up into the h1.
Rework to look more like a table. Also lose a column of facts.
Rework the UI for persister details for greater clarity in less space. Also add some more online help explaining all these numbers...
stable to default
Tweak timings, shorten name, explain heuristics, specify which process info items we want (especially to add 'monitors' and remove 'messages').
Use amqp_channel:notify_sent/3 after the processor has handled basic.deliver
Introduce amqp_channel:notify_sent/3
stable to default
Merge bug 26322
Add loopback_users (somewhat late...)
Towards using manual queue-to-consumer flow control in STOMP processor
Propagate both QPid and ChPid instead of the client ChPid
Export set_manual_flow_control/2
stable to default
Merge bug26318 (again)
Cope with any of dest-exchange, dest-exchange-key and dest-queue being missing.
Factor out some duplication
stable to default
Merge bug26301
Fix typos, remove examples from 3.3.5 case (I'm sure that file will get duplicated...)
stable to default
Merge bug26072
Shuffle ejs naming to be like everything else, add a version number to sammy unminimised version.
On channels that use manual flow control, propagate channel pid to consumers
Upgrades to the queue index and recovery terms format.
Fix tests, cosmetic.
Bug 26307 should really have documented these...
Propagate manual flow control flag to amqp_gen_consumer
Compile
send_command_and_notify is only used with basic.deliver
Extract function
Introduce amqp_channel state.manual_flow_control with a setter
Backout 5bbe6d4f364f
Backout eb28442a9cd3
Backout 5a8c2ebc869d
Backout a56c0083508e
Backout some recent changes
Backed out changeset 6f298e7960ba
Conditionally use notify_sent
stable to default
Merge bug26318
Don't add the dest routing key to the headers if it is 'none'.
Only basic.deliver uses send_command_and_notify
Keep track of consumers in channel state
Towards keeping track of consumers in channel state
Introduce amqp_msg.channel_pid
Add a ref that identifies amqp_msg
Rename for clarity
Rename argument for clarity
Simply refer to the type spec
Replace outdated comment
merge stable into default
merge bug26313 into stable (again)
Let exception handler do all the handshake failure logging
merge stable into default
merge heads
merge bug26313 into stable
Explicitly log handshake errors
Enforce server-side value when client provided one is 0
Add source JavaScript files for existing minimized versions
Try again, with Debian changelog comment files
Add dir for Debian changelog comments, comment file for 3.3.5, and template file
Merge bug26307
Merge bug26307
stable to default
Actually, let's rename that. Yes, a plural, but one that makes more sense.
stable to default
Merge bug26311
Try again, adding a module this time. Find stuck processes with heuristics.
Find stuck processes with heuristics.
Rethink how we do this. Previously we tried to manage bytes exactly the same as len, and ram_msg_bytes the same as ram_msg_count. The trouble is that means they only account for ready messages. It would be a bit of overkill to start tracking bytes used for unacked messages separately, so instead we now only track bytes for all messages.
Merge in bug26307
Make sure the tests pass again!
Also...
Merge in bug26307 and update.
Merge in bug26307 and update.
Remove the target_ram_count thing (I think it confuses more than anything else) and convert everything else to the new official API.
Make some of the more interesting bits of the VQ backing_queue_status an official part of the BQ API.
stable to default
Merge bug26159
Cosmetics
This code will naturally be called just once, eliminate the guard
force_boot requires no app.
stable to default
Merge bug25921
Merge bug26242
Nicer formatting of error message.
Refactor: move ensure_app_running inside the big catch block, then we don't need to duplicate error handling.
Oops!
The expectation is we will only return details for persistent messages here.
Update VQ unit tests.
Don't report nodedown issues as rabbit app not running
Explain
Catch errors in vm_memory_monitor:get_total_memory/0 and return 'unknown'
Don't allow rabbit_misc:is_process_alive/1 to hang indefinitely if a node is incommunicado; we use this in rabbit_amqqueue:on_node_down/1 in a loop!
Merge in stable
stable to default
Merge bug26290
Inline
Stable to default
Uploaders field change in debian/control to announce Debian Maintainer change from Emile to Blair
Make vm_memory_monitor:parse_line_linux/1 parse lines w/o colons
Tests for vm_memory_monitor:parse_line_linux/1
merge bug26166 into default (again)
Rename amqp_client.ssl_config => amqp_client.ssl_options
Bare-minimum, bottom-of-the-barrel UI for the new info.
First pass at queue-size-in-bytes. Only lightly tested, and with no upgrade step for QI. But I wanted to commit something...
merge default into bug26166
stable to default
Merge bug26299
Prune after old links are gone, otherwise they could still be starting, and store their suffixes after we prune, leading to a tiny leak.
stable to default
Merge bug26293
Actually, hold on to confirms when pausing. It's not inconceivable that we might get a false positive from pause_minority_guard, in which case we don't want to throw data away.
Check for pause minority mode being about to cause a shutdown before sending confirms. In this way we can get rid of the effort to kill all network connections ASAP.
Merge bug 26239 (again)
Oops, forgot to add
Merge bug26239
Rename to match static shovel.
Support add_forward_headers in static shovels.
Oops
Allow setting properties in dynamic shovels.
Merge bug26295
Fix await_startup/1. Change its design from "figure out what apps we should be running and wait for them" to "wait for the boot marker to go away".
stable to default
Merge bug26292
stable to default
Merge bug 26292
stable to default
Merge bug26292
Slightly clearer?
Further documentation of this approach.
Merge bug26286
Don't expect GMs which have not yet joined to take part in messaging.
Unused.
Improve self-documentingness.
Revert bug26171, and ignore messages before the initial catchup.
It's probably a good idea to reset "restarts" after we get the message, not when we send it; we don't want to jump back into restarting things as normal just because we have scheduled a restart.
Reset restarts before we go round again, otherwise if MaxT is large we will keep looping until it clears.
Oops, no, {0,1} is no good as we will always be over the restart limit.
Oops, no, {0,1} is no good as we will always be over the restart limit.
Don't allow a too-slow restart to prevent a reconnect delay.
Don't allow a too-slow restart to prevent a reconnect delay.
Oops, silence.
RJMS-1.2.5-SNAPSHOT
RJMS-1.2.4
Include version 1.2.3 in compatibility check.
open_source_licenses.txt
Merge bug26192
stable to default
Merge bug26288
Small bugfixes to the messaging layer:
Switch to representing symbols inside the plugin as binaries not printable-lists.
Remove the near-useless test based on the Proton C client command line tool and replace it with the beginning of a test based on the Proton Java client.
merge bug26266 into default
Support the requeue header for NACK frames
Start a dummy node first to ensure epmd is running.
Backticks for nicer formatting.
Tweak language, add parameter.cleared.
Merge pull request #2 from videlalvaro/master
lists emitted events
Resurrect default
Remove these that were merged by accident; we do distribution by hand now.
Merge in default
Merge bug26256
merge stable into default
merge bug26282 into stable
Handle processor exits in the reader
Better error message
Handle TLS upgrade errors and log them
Eliminate a few compiler warnings
merge stable into default
merge bug26281 into stable
Log correctly closed MQTT connections
Include MQTT connection (reader) pid in the log message
merge stable into default
merge bug26270 into stable (again)
Avoid ugly error messages when the collector terminates on abrupt reader/processor termination
Handle MQTT processor errors more gracefully
Oops
Merge in bug 26256
Only force load if the app is actually down.
Tweak text.
merge bug26270 into stable
Special case TLS alert "unknown CA", which is very common
Further TLS upgrade error message improvements
Improve error messages for failing connections and TLS upgrades
Add docs.
Port script Mnesia dir changes from bug26192. Add rabbitmqctl force_boot.
Support live activation / deactivation.
Merge bug26235
Merge bug26235
We do xref checks against R13B03, stop breaking them.
Report on enabled plugins. Also reinstate the disc vs ram and mgmt stats DB indicators in the single node case and remove the "accessing the management UI from this node" thing altogether as it's fairly useless.
Report on enabled plugins.
Tweak.
Rejig node details page: shorten applications list, move that plus registry under "advanced", bring paths to the top.
Merge bug26275
Ooops
StartTLS support
Cosmetic.
Reduce distance to default.
merge bug26274 into default
Make auto_delete and exclusive attributes customizable
Cosmetics
Set defaults based on durability
Use rabbit:is_running/1
Rejig single-node display a bit more.
Make the legend labels slightly more obviously clickable.
Merge bug26193
Merge bug26193
Merge bug26193
That heading is not buying us much.
Display net_ticktime, and loudly complain if they are unequal.
Report on net_ticktime
Might as well hide that in the single-node case.
Report on various locations
Report on various locations.
Export something new
Merge bug26171
stable to default, plus remove_handler()
Merge bug26272
stable to default
Merge bug26272
Listen for changes to cluster name.
Emit an event when we modify a global parameter.
merge heads
Use rabbit:is_running/1 here
Use a list of commands that do not require rabbit app to be running
Update rabbitmqctl.bat in the same way as rabbitmqctl - set mnesia dir and basic sasl log, don't set sname.
stable to default
Fix a log message, remove a lost comment.
Remove some unreachable code - members_state will be filled once we have joined, and now we join immediately at startup.
Merge in stable
stable to default
Merge bug26225
stable to default
Port the tests
stable to default
Add this so that we can run http tests with the standalone test framework.
Separate out responsibilities in the various node state detection functions. Only ping_all/0 is allowed to establish new tcp connections (and thus take significant time for them to time out if necessary). This removes a significant delay while waiting for pause_minority to start.
Merge bug 26255 again
API change.
Merge bug26255
More descriptive name.
Merge bug26255
Merge bug26255
Merge bug26166
merge heads
Convert to and from orddicts
The env has a default defined in the app file, we don't need that check.
Oops, I was sure I ran the tests before merging. Anyway, let's fix them.
It's easier to specify the commands that do not require the app than those that do. Also reduce name verbosity and remove a stray call from action/eval.
Merge bug25329
Fix contexts
Improve use of horizontal space for chart+legend.
This stuff should really live in charts.js.
Reduce distance to default.
Merge bug24929
Merge bug24929
Control max_size, and remove some broken premature abstraction from the Makefile.
Simplify message assertions, don't use timestamps.
Cosmetics
Refactor to two heads
merge stable into default
Restore default durability assumption for /queue/ destinations
Gracefully handle {inet_reply, _, {error, closed}}
Squash more warnings
Squash more warnings
Expect arguments and durable attributes to be undefined
merge heads
Squash some warnings
Squash some warnings
Allow callers to pass durable and arguments attributes
Refactor
Minor cleanup.
Hard-kill all connections and stop all listeners as soon as we decide we are in a minority. Also remve an export from rabbit_networking that was unused (probably dated from era of unsupervised plugins).
Documentation.
Small tidy-ups
Make "rabbitmqctl forget_cluster_node --offline" impersonate the node rather than require you start one in the background.
os:timestamp/1 return parts can be 0
Add spec for rabbit_misc:timestamp/1
Track connected_at for direct connections
Move timestamp formatting fn to rabbit_misc
Conserve some horizontal space.
Document the new feature.
Oops.
Exit early if rabbit app is not running on target node (but not for all commands)
Wording
Convert connected_at to timestamp when bound since it is immutable
Timestamp cannot be unknown
connected_at is a timestamp now
print/2 is no longer used
Do some filling.
Remove much of the specialness of charts, and revert to showing them only on the details page.
Merge bug26169
Merge bug26169
These are binaries
Merge bug26148
Cosmetic: unwrap several lines. Remove some more binary_to_list/1.
This was my original vision - little sparklines. It doesn't actually work very well.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_3_4 for changeset ad96b75a17c3
Added tag rabbitmq_v3_3_4 for changeset 431910257565
Added tag rabbitmq_v3_3_4 for changeset 6d26ad85f65f
Added tag rabbitmq_v3_3_4 for changeset 4dedbdb028dd
Added tag rabbitmq_v3_3_4 for changeset 8e5c260f16b1
Added tag rabbitmq_v3_3_4 for changeset a87815b54076
Added tag rabbitmq_v3_3_4 for changeset 721293d0f0c5
Added tag rabbitmq_v3_3_4 for changeset 204c157163ca
Added tag rabbitmq_v3_3_4 for changeset 0bde73f8394c
Added tag rabbitmq_v3_3_4 for changeset 1376e3456d9d
Added tag rabbitmq_v3_3_4 for changeset 8fc6e3506c3d
Added tag rabbitmq_v3_3_4 for changeset 12795d46fdfb
Added tag rabbitmq_v3_3_4 for changeset 84f5ca90c475
Added tag rabbitmq_v3_3_4 for changeset ecfea456c06d
Added tag rabbitmq_v3_3_4 for changeset 003433c82638
Added tag rabbitmq_v3_3_4 for changeset 72bae1b2fc87
Added tag rabbitmq_v3_3_4 for changeset 77f05b529b34
Added tag rabbitmq_v3_3_4 for changeset 92b48587b696
Added tag rabbitmq_v3_3_4 for changeset 8e9bc23a55ea
Changelog for 3.3.4.
Fix various appearance bugs.
merge bug26243 into default
merge bug26243 into default
Rename function
Prefix queues with generative names with stomp-subscription
Bump timeout in this test
Use subscription queue generator fn for topics and reply-queues, too
Ignore debug/*
merge with upstream
Ignore debug/*
Merge bug24929.
Add instrumenting for monitors and Mnesia transactions. It actually all seems to work now.
stable to default
Merge bug 26258
More explanation.
Merge bug25848 again.
application:get_env/3 is not available in R13B03.
Don't use -e for a portion of rabbitmq-env that uses readlink
Include connection, vhost, user, and channel into JSON-formatted trace messages
Remove connected_at from the default list_connections key list
connected_at info is now a timestamp, format to a human-readable date in the templates
Make rabbitmqctl list connected_at as a machine-readable timestamp
Merge bug25848.
Format as number, don't explicitly convert to string then format as string.
Cosmetic: these can all be rolled together, and be a bit terser.
Merge bug25279
Whitespace
Improve error messages from rabbitmqctl when the rabbit app is stopped
List connected_at in rabbitmqctl usage
Display connected_at on the individual connection page
Display connected_at on the Connections tab
Include connected_at into default keys displayed by `rabbitmqctl list_connections`
Format connected_at to a human-readable date and time
Use proplists:get_value/3 here
error_logger:warning_msg itself returns ok
Accept SERVER_ADDITIONAL_ERL_ARGS from rabbitmq-env.conf
Wording
Eliminate a compiler warning
Formatting
No need to convert to lists here
Merge bug26254
Cosmetic.
Add connected_at to the list of statistics keys
Format connected_at info item
Track connection timestamps
Warn if Nagle's algorithm is enabled by default
Cosmetics
Make sure RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS has effect on Windows
Add RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS to VM arguments
Formatting
Don't log SMP support, async threads, etc
Remove single scheduler warning
Log connection, vhost, username, and channel
More consistent connection formatting per suggestion from Matthias
Ah, markdown.
Better README.
Promote down slave to master if the master gets forgotten.
Maintain down_slave_nodes so we might have a clue where to look to recover from.
stable to default
Oops
stable to default
Merge bug 26253
Don't explode if we have a file with 0 or 2+ Erlang terms. Also remove TODO, actually I don't think we can do better.
Include channel into trace messages
Mention that it includes TLS connections
Fix handshake_timeout docs in rabbitmq.config.example
Re-format to 80 characters wide
adds new binary
bumps app version
fixes #8
Log a warning if running with < 8 async threads
Add SMP support to the info banner
Add async-threads to the info banner
Log warnings if kernel poll is disabled or VM is running with just 1 scheduler
Log # of schedulers and if kernel poll is enabled on start
Move user and vhost closer to connection info
Mention connection name, user, and vhost in connection error log messages
Mention connection pid in channel error messages
merge default into bug26148
Hopefully clearer.
Merge bug25446
Maybe clearer.
rabbitmq-plugins set.
stable to default
Merge bug26247
Merge bug26251
Give sensible error messages when plugins are missing.
merge stable into default
merge bug26250 into stable
Make sure asn1 and other SSL support dependencies are started before starting HTTPS listener
merge stable into default
merge stable with upstream
merge bug26246 into stable
Shut down the processor cleanly when a STOMP client misses heartbeats
Allow prelaunch to return error code 2 without failing.
Add handshake_timeout to rabbitmq.config.example
Make [AMQP] connection timeout configurable
RJMS-1.2.4-SNAPSHOT
RJMS-1.2.3
Modify version checking to make it easier to update (in include header file).
whitespace
Unify the charts and node stats bar things. WIP.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_3_3 for changeset a19b42f93f76
Added tag rabbitmq_v3_3_3 for changeset f7240a21ae04
Added tag rabbitmq_v3_3_3 for changeset 0b033338c3a3
Added tag rabbitmq_v3_3_3 for changeset 5cc33688ce0b
Added tag rabbitmq_v3_3_3 for changeset da2f2fc022f7
Added tag rabbitmq_v3_3_3 for changeset c457112e16f5
Added tag rabbitmq_v3_3_3 for changeset fb3e4f04c376
Added tag rabbitmq_v3_3_3 for changeset 75f2b0ea1cbf
Added tag rabbitmq_v3_3_3 for changeset bf8c04740835
Added tag rabbitmq_v3_3_3 for changeset dfb891cd1b9e
Added tag rabbitmq_v3_3_3 for changeset 911bc80cf858
Added tag rabbitmq_v3_3_3 for changeset 136aa59fcec5
Added tag rabbitmq_v3_3_3 for changeset 5fc24b6a19ad
Added tag rabbitmq_v3_3_3 for changeset 4405a067630b
Added tag rabbitmq_v3_3_3 for changeset 2359f96ebdd3
Added tag rabbitmq_v3_3_3 for changeset e33206e6f862
Added tag rabbitmq_v3_3_3 for changeset a7d9cdcacdb1
Added tag rabbitmq_v3_3_3 for changeset a286d549c47e
Added tag rabbitmq_v3_3_3 for changeset 7cbb21091d12
changelogs for 3.3.3
Merge bug26221
Simplify.
RJMS-1.2.3-SNAPSHOT
open_source_licenses.txt
Add ssl_handshake_timeout to rabbitmq.config.example
Add default for ssl_handshake_timeout
Fetch SSL handshake timeout from app environment
merge bug25678 into default (again)
Oops
Re-format based on feedback from Matthias
merge bug25678 into default (again)
Mention mnesia_table_loading_timeout in rabbitmq.config.example
merge bug25678 into default
Make mnesia:wait_for_tables timeout configurable
Include connection name into trace message headers
backout d57075513277 (wrong branch)
backout bd87cb0026c5 (wrong branch)
Include username into trace message headers
Include username into trace message headers
Include vhost into trace message headers
Include vhost into trace message headers
Include vhost and username into channel error log messages
Log connection name instead of pid for channel errors
fixes test for older versions of Erlang
fixes test for older versions of Erlang
fixes test for older versions of Erlang
Cover passive = false case
Rename
Update docs post bug 24926.
fixes test for older versions of Erlang
merge stable into default
merge bug26238 into stable (take 3)
In case of SUBSCRIBE failure, clean up queues for topic destinations, too
Don't stat() queue when it is declared with nowait = true
merge stable into default
merge bug26238 into stable (again)
catch all case
Only delete declared queue if destination is /exchange/*
merge stable into default
merge bug26238 into stable
Clean up declared queue when SUBSCRIBE handler fails
Switch to get_env/2
Add default value for amqp_client.ssl_config
Combine SSL options extracted from URI with ssl_options from config
Compile on R13B03.
stable to default
Merge bug26241
Compile on R13B03
Ensure the limit field is always a number so we can't miss the need to interpret it. Yes, this means we won't update mem_relative if the size of the machine's physical memory changes at run time. I can live with that.
Declare correct build time dependencies so check-xref works.
Bit more clarity.
Whitespace.
Charts for all meaningful node stats and a bit of fiddling with layout.
stable to default
Merge bug26236 again
Since a crash in handle_event is so disasterous, and since gen_event handlers are not very supervisable, let's wrap everything in a try/catch. Prinitng to stdout is not great but we just failed to log properly - better to give some indication than none.
stable to default
Merge bug26236
Proof-of-concept: show a chart of memory use over time.
Oops
Don't fail if asked to truncate a reference. And go to having a catch-all case.
stable to default
Resurrect stable (without bug 26230)
Unused variable
Merge bug 24926
Merge bug 24926
Merge bug 24926
Merge bug 24926
Merge bug 24926
Merge bug 24926
Merge bug 24926
Merge bug 24926
Use functions from the broker, remove need to test.
Move these down (ish) from federation.
A few last clenaups
Remove some dependencies that were invented. Add a test to make sure the helper exchange type gets unregistered / reregistered correctly.
Add a test designed to blow up and remind us if those records change. The alternative would be to move the id/1 functions to rabbit_amqqueue and rabbit_exchange, but they (especially the queue one) are just that little bit too federation-specific to really make sense there.
Show a warning if list fails to contact a node.
Report errors from the server (such as mismatched plugin files) correctly.
Don't put modules we are about to disable into the dispatcher.
Another test.
Oops.
Make those look more obvious.
Add cleanup step
Add cleanup step
Init the stats timer again on force_event_refresh, so that if stats have become enabled we do the right thing.
Don't supervise the calling process, even on default that makes little sense and here it means we end up removing the handler when rabbitmq_plugins exits.
Don't supervise the calling process, even on default that makes little sense and here it means we end up removing the handler when rabbitmq_plugins exits. Also move the boot step to a sensible place.
Add online flag. Get the running broker to read its own plugins file rather than tell it which plugins to run. This necessitates various bug fixes to rabbit_plugins.
Make sure all code for both added and removed plugins is loaded when we send the notify event.
Perhaps easier to read.
Test queues too.
Flesh out test, fix bug.
Start to test plugin enable / disable
Tweak text one more time.
Add (deliberately) undocumented feature to just trigger the sync without updating the config file.
Tweak text a bit more.
API change.
Support updating decorators correctly when plugins start and stop.
Merge in default
stable to default
Merge bug26230
Ensure rabbit_exchange funnels all updates through a single function, like rabbit_amqqueue already does. Ensure that decorators is set to 'undefined' in the durable record so any inadvertent read without setting it will cause an immediate explosion not a subtle bug. And remove report_missing_decorators(), there is no longer any sane context in which it does anything useful.
stable to default
Merge bug24759
Ensure we don't fail if that file is missing.
stable to default
Merge bug24759
Use '-e' for all shell scripts.
stable to default
Inline those since they're special purpose, and add a missed call to queue_decorator:set/1 (which won't matter until we do another policy-invalidating upgrade, but better to catch it now...)
Make decorators field in exchange and queue transient, i.e. we recalcualte it on recovery in case plugins have changed. Also document a bit more clearly what the lifecycle is of the different fields in these records since that area is becoming confusing.
Fix tests for 32 bit machines.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_3_2 for changeset 458f9e525ff3
Added tag rabbitmq_v3_3_2 for changeset 6348978527af
Added tag rabbitmq_v3_3_2 for changeset 149c4d4283ac
Added tag rabbitmq_v3_3_2 for changeset e1ae89861453
Added tag rabbitmq_v3_3_2 for changeset e3049cb9f68b
Added tag rabbitmq_v3_3_2 for changeset 1ca9ee3c206d
Added tag rabbitmq_v3_3_2 for changeset a212d956d3e3
Added tag rabbitmq_v3_3_2 for changeset d5eb3f3bb410
Added tag rabbitmq_v3_3_2 for changeset a7df2fc46f61
Added tag rabbitmq_v3_3_2 for changeset 1c5207ddacd2
Added tag rabbitmq_v3_3_2 for changeset e2cd4f282176
Added tag rabbitmq_v3_3_2 for changeset 0862c9e46fcc
Added tag rabbitmq_v3_3_2 for changeset aeda309c0810
Added tag rabbitmq_v3_3_2 for changeset 6035703dc8e0
Added tag rabbitmq_v3_3_2 for changeset 8f4daa1756f4
Added tag rabbitmq_v3_3_2 for changeset 41b8d62244b4
Added tag rabbitmq_v3_3_2 for changeset 8bdcb744616d
Added tag rabbitmq_v3_3_2 for changeset acf1e1fd8b50
Added tag rabbitmq_v3_3_2 for changeset 9ec4d3a2498a
changelogs for 3.3.2.
Move the code-unloading thing to rabbit_plugins, and remove the unpacked plugin after doing it, so that it actually allows us to reload modified plugins.
Documentation.
Remove obsolete thing that should have gone in January.
Merge default
Merge in default
Remove a couple of buggy changes from default, make start_apps/1 and stop_apps/1 more symmetrical in use.
Various bug fixes in generating command sequences.
Be more correct about dynamic vs symbolic state; this gets us back into a position where we are actually testing sending messages :-/
Wait until a GM has actually left before forgetting it.
Rewrite the changes to rabbit_plugins_main/enable,disable. Now we just change the plugins file exactly as we do on default, then contact the server and say "I want you to be running this". This has cut out quite a lot of code, and I am pretty sure fixed some bugs.
Further simplification; only invoke reset_dispatcher() if we know mgmt is still running.
Oops, we do need sync_notify - reinstate it.
Simplify / clean up.
Remove sync_notify, it doesn't seem to be needed.
Merge default
Merge in default
stable to default
Merge bug26227
Don't show misleading information in the Windows service case when the service has not been reinstalled.
...and make them a tiny bit easier to hit.
Merge bug25470
UI to hide lines in charts.
stable to default
Merge bug26226
Don't crash if Mnesia is starting or stopping
Merge bug25590
Remove some unneeded complexity.
stable to default
Oh, the shame. Changeset 54ad947f3b9e happened after I'd been playing with Wrangler - and I accidentally committed some random refactorings. So at least we know Wrangler is correctness-preserving. Still, I feel rather stupid.
stable to default
Merge bug26219
stable to default
Merge bug 26179
Add a README file explaining this directory.
stable to default
Merge bug25550
stable to default
Merge bug 25550
Since we're here...
Fail in a more comprehensible way if there is SSL but no peer cert.
Rebranch bug 25550 from stable
Rebranch bug 25550 from stable
Allow 'none' user (i.e. rabbitmqctl) to set any direct connection. And update the tests so that security_validation_test tests explicit users but the other tests test 'none'.
Oops, 3d7b7d85df74 got us into a degenerate case where our tests only ever consisted of joins.
Don't expect message delivery until we have had the joined callback invoked.
Don't explode if the pid vanishes during is_gm_process/2. Keep on handling instrumented msgs while we are waiting for things to shut down, so that... they can.
Even better
Merge in bug24929
Better cleanup
Merge in stable
stable to default
Small refactor
Do "randomness" properly, trap exits.
Oops.
stable to default
Silence warning
Don't be so intrusive into gm.erl.
stable to default
Merge bug26210
Merge bug26204
I think we've determined that we don't need that check.
merge stable into default
optimise
Instrument certain calls to gs2:call/3 and gs2:cast/2, and allow PropEr to determine when they proceed. That makes things a lot more deterministic (although not fully) and lets us reproduce bug 26171 (small whoop).
Merge bug26210
Don't prioritise DOWNs from the left. Also explain why we prioritise in various ways.
First go at some PropEr tests, which join and leave a group, and make sure messages don't get lost.
stable to default
Merge bug26209
Log auth failure details.
Display errors on failure.
Typo
stable to default
Merge bug 26184
Actually, let's count in bytes rather than words-but-bytes-for-binaries.
By making lim/2 handle soem more limit_exceeded cases we can simplify everything else. Also only invoke tuple_size/1 once per tuple.
Avoid tuple_to_list/1.
More tests.
Remove a terminal case it's not possible to hit, and make sure we wrap lim() everywhere we need it.
Limit the amount of time we spend seeing how large something is.
err => error
Oops
Support long timers.
stable to default
Don't function_clause in terminate/1.
Don't truncate "small" things at all.
merge stable into default
merge bug26000 into stable
pretty-print non-inet errors if it's not an atom it cannot possibly be an inet error
Merge bug26150
stable to default
Merge bug26197
Make sure we format error messages on definitions import correctly.
That'll want updating too.
Show the rates mode rather than the statistics level, for consistency with everything else. Also ensure we treat basic as the default on nodes with no mgmt app.
stable to default
Merge heads of default
Merge heads of stable
stable to default (with some changes to account for rates_mode changes that have happened since).
Merge bug25376
Various problems spotted by Matthias.
Minor tweaks based on actually reading the thing.
Document the stats side of JSON.
merge stable into default
merge bug26189 into stable (again)
Inline stop and close_connection
Let terminate/2 close direct client connection
Use existing function to close connection
merge stable into default
Explain
merge bug26189 into stable
merge bug26194 into stable
Close direct connection cleanly when mqtt_reader terminates
Start collector before client_sup so that it's stopped later than the other
merge stable into default
List rabbit_mqtt_collector in rabbit_mqtt_sup child spec
Make sure rabbit_client_sup will terminate rabbit_mqtt_client_sup and not keepalive_sup
Make rabbit_mqtt_sup a supervisor2
stable to default
Merge bug26190
ensure_ssl/0 if we need to, and move a comment to where it should be.
stable to default
Merge bug26180
stable to default
That test is actually nonsense. You can't use unicode characters in URIs without percent-encoding them. And it only worked by coincidence in Erlang < 17.0; the file was UTF-8 but Erlang read it as latin1, sending a "latin1" URI that webmachine/mochiweb then accepted. But Erlang 17.0 breaks this working-by-coincidence since it now forms a URI with Unicode chars in and refuses to make the HTTP request.
OOps!
Merge bug26107
Merge bug26107
Merge bug26107
stable to default
Merge bug26178
Cope if report is not a list.
Make with_handle/{1,2} into part of the fhc API, and thus hide the extra obtain/release/transfer variants.
adds 3.3.1 version
Add a file variant to fhc:obtain() and friends so that rabbit_file can keep working even when we have hit the socket limit.
stable to default
Merge bug26176
Notify about policy and parameter removal after the vhost is deleted, not during the attendant tx.
stable to default
Don't display '?' for static shovels
stable to default
Merge bug26162
Don't assume paths.
API change, slight cleanup.
Easier to just override this than tweak the umbrella.
Add needed dependency so we can test from clean.
Remove some no-longer-needed stuff
Port all the in-broker tests.
Add a mechanism for federation to run multiple nodes in one distributed system, and thus port the rest of the mutli-node tests. There is still a great deal of detritus to be removed...
Unbreak rabbit_mgmt_test_db post bug 26174.
stable to default
Merge bug26172
Update example config
Merge bug26174
Prioritise queries.
force_fine_statistics is no more.
Rename this config item to match.
Unused variable
Abstract the initial catchup into its own function. Make sure we call check_neighbours beforehand, since that sets left and right.
Short-circuit the initial catchup message from the left, so that we are sure we receive it before we consider ourselves joined.
stable to default
Merge bug 26173
Fix broken invocation.
Monitor GM when going into a receive block.
Cosmetic, and log a warning
Add boot step!
Merge bug26120
Merge bug26120
stable to default
Merge bug26165
stable to default
Merge bug26165
add an export
Add a policy for this thing
Actually, slaves should always delete_and_terminate; when shutting them donw in this case we still don't trust their contents.
Further WIP-saving.
WIP: port a test to use the multi-node framework.
Ensure that admins can see static shovels and add some tests since this plugin was rather lacking.
Merge bug23724
stable to default
Merge bug26160 (again)
Start xmerl if needed.
merge stable into default
merge bug26160 into stable
add missing app dependency
Stop the whole queue if the alternative is to fail over to an unsynced slave.
stable to default
Merge bug25468
RJMS-1.2.2-SNAPSHOT
RJMS-1.2.1
That's not needed any more.
Remove coverage workarounds.
Allow filtering by vhost, test monitoring vs non monitoring filtering.
Oops, remove that
Merge in default, remove all web UI changes.
Add version compatibility check to allow 1.2.0 interoperation.
updates callback to match behaviour
internal_error -> precondition_failed
updates intercept callback signature
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_3_1 for changeset 5fa3e096d194
Added tag rabbitmq_v3_3_1 for changeset a7cadf300887
Added tag rabbitmq_v3_3_1 for changeset 347969867604
Added tag rabbitmq_v3_3_1 for changeset 662ea03640c0
Added tag rabbitmq_v3_3_1 for changeset 74ee6336688c
Added tag rabbitmq_v3_3_1 for changeset 7f6196eb13fd
Added tag rabbitmq_v3_3_1 for changeset 9a5cd00573ba
Added tag rabbitmq_v3_3_1 for changeset 5a8d02b5d3fa
Added tag rabbitmq_v3_3_1 for changeset 79bf489a3cb9
Added tag rabbitmq_v3_3_1 for changeset 1d7f6ed1e7ad
Added tag rabbitmq_v3_3_1 for changeset 2c6cc1bcf2ca
Added tag rabbitmq_v3_3_1 for changeset 0394573d2d26
Added tag rabbitmq_v3_3_1 for changeset 35e889cc01c0
Added tag rabbitmq_v3_3_1 for changeset a89f789f906d
Added tag rabbitmq_v3_3_1 for changeset c278fb2c1aaf
Added tag rabbitmq_v3_3_1 for changeset 62a1c82beb74
Added tag rabbitmq_v3_3_1 for changeset 1528f994ced7
Added tag rabbitmq_v3_3_1 for changeset 0347e0dae7a3
Added tag rabbitmq_v3_3_1 for changeset e92ab5c9dd47
release changelogs
stable to default
Attempt to make diagnostics even clearer.
Respect RABBITMQ_NODE_ONLY env variable on Windows
stable to default
Resurrect stable
Merge bug26114
Decrease less as we descend.
stable to default
Merge bug26134
Ensure we don't start treating a list as printable half way through it, or if it was originally a tuple.
Log the output and return 'unknown' if we can't parse it.
stable to default
Merge bug26125
stable to default
Merge bug26140
Don't allow bad property types through.
merge stable into default
merge bug26084 into stable
blank members_state before maybe_erase_aliases thus reverting b01e5808866d
merge stable into bug26084
Introduce a new function for the case of dropping a master because we synced - remove a deadlock.
stable to default
Merge bug26124
Ignore empty string values in sub-lists.
merge stable into default
merge bug26119 into stable
don't erase aliases quite so eagerly on DOWN since that can result in completely forgetting about a member when there are still acks making their way around the right.
merge stable into default
maintain gm ?GROUP_TABLE abstraction in yet another place
merge stable into default
refactor: extract gm view change handling
cosmetic: consistency
make gm record_new_member_in_group tx side effect free
refactor: tweak and push through gm read_group abstraction
simplify: get rid of tmp var
enforce gm GROUP_TABLE abstraction ...by using mnesia:write/3 instead of /1 and generally abstract mnesia reading/writing and make it dirty reads obvious.
merge stable into default
merge bug26084 into stable
blank members_state after maybe_erase_aliases since the latter operates on the former
merge stable into bug26084
refactor: simplify gm:internal_broadcast eliminate branching
makes interceptor call protocol_error directly
updates intercept callback type
internal_error -> precondition_failed
stable to default
Merge bug26117
stable to default
Merge bug 26123
explain
go back to from members_changed/4 to /3
stable to default
Merge bug26127
Remove rabbit_amqqueue:force_event_refresh/1 synchrony
monitor workers In a way this is a damage limitation exercise...
track workers by Pid instead of name
record workers in a set ...instead of a queue.
always return DeadPids, so that all deaths are logged
gm_pids is the source of truth We base promotion decisions on the sub-set of [QPid | SPids] that is referenced in gm_pids. In particular, QPid may be missing from that, if another slave previously noticed its death.
updates interceptor to conform with behaviour
merge stable into default
merge bug26109 into stable (again)
merge heads
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Merge bug26118
Merge default into bug24926
Better RPC diagnostics when the node is down
merge stable into default
drive remove_from_queue with DeadGMPids ...instead of LiveGMPids
cosmetic-ish: add a missing ?TABLE abstraction
cosmetic: prevent trailing whitespace in log message
Handle hibernation in our pre-go state.
Merge bug26109 into stable
Cosmetic (and test bz notification)
Eliminate a warning
Initialise MQTT reader asynchronously, narrow the gap with rabbit_reader
merge heads
merge stable into default
helper for starting a background rabbit
stable to default
Merge bug26115
stable to default
Merge bug26113
Add a capability for it.
eliminate accidental, crash-inducing assertion
stable to default
Merge bug26084
eliminate comment duplication
merge stable into bug26109
Indentation
ensure propagation of master death Previously slaves were monitoring the master and sending a process_death message through gm in an attempt to get the updated gm state propagated (and thus members_changed callbacks getting invoked on slaves, which in turn trigger promotion).
less lazy death notifications When we receive a DOWN, it's possible that there are no messages from the dead member floating around anyway. So rather than waiting for some other activity to occur first, it is perfectly safe enough to always call maybe_erase_aliases. That way we get slightly less lazy death notification in this case (i.e. we can then be certain that either the dead member is fully removed immediately or there must still be messages from the dead member floating around. No other possibility exists).
ensure callback_view_changed is called whenever the view may have changed We had missed a case here.
RJMS-1.2.1-SNAPSHOT
Version-1.2.0
Eliminate a warning
Basic mode for stats; where we show rates per-thing, but not per {thing, other thing} pair.
Initialise MQTT reader asynchronously, narrow the gap with rabbit_reader
Initialise MQTT reader asynchronously, narrow the gap with rabbit_reader
stable to default
Merge bug26110
Merge default into bug24926
Fail if the tests fail. Damnit.
Merge default into bug24926
Ensure we re-evaluate gc batch size every time we enter gc_batch/1.
Merge bug26102
Actually let's move the unlink/1 back, not convinced it is any clearer.
Cosmetic (consistency)
Make sure queue federation starts back up as well
Re-establish exchange links when performing a live restart
Monitor and wait for 'DOWN' from our own GM as well as the slaves, to make sure our GM does not try to update group info after we have called forget_group/1. Also ensure we unlink from the coordinator when shutting down as well as when stopping mirroring, not strictly necessary but clearer.
Add a link.
Add a link, remove binaries.
Add a link.
Merge bug25950
Fix validation explosion and typo.
merge stable into default
update copyright notice year
stable to default
Merge bug25855
More unique atom
stable to default
Merge bug26105
Explain
Allow monitoring users to monitor shovels, and allow policymakers access to the UI to create them (they always had access to the API). Handle vhosts sensibly, in the same way as federation-management does (filter statuses, improve display in lists).
stable to default
stable to default
stable to default
stable to default
Merge bug26100
Merge bug26100
Merge bug26100
Merge bug26100
Oops
Delayed restart of the disk monitor.
Make sure we have complete command output if we actually can't parse it.
stable to default
Merge bug26103
Maybe simpler
stable to default
Merge bug26104
That ~s should not be there.
Only allow cycles that contain reject.
Ensure users can only create shovels which can access local vhosts they are allowed to access.
Allow parameter validation to know about the user making the change.
API change.
Oops
Allow parameter validation to know about the user making the change.
stable to default
Merge bug 26098
Don't try to be clever with no_auto_import, we want to compile on R13B03.
merge default into bug24926
Fix management extension enable/disable handling
merge stable into default
merge bug26061 into stable
Refactor
Correctly report blank destination errors, add a test
Reject publishes to destination named ""
stable to default
Merge bug26096
Bring back impersonator tag.
stable to default
HTML layout fix.
improve install instructions
adds new binary
bumps plugin version
updates to current rabbit_basic API
adds 3.3.0 binary
Improve diagnostics when the node is up.
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
default to stable
Changelog for 3.3.0.
Added tag rabbitmq_v3_3_0 for changeset 8d5c44337d4a
Added tag rabbitmq_v3_3_0 for changeset 94c169821343
Added tag rabbitmq_v3_3_0 for changeset 0a0b96b78a98
Added tag rabbitmq_v3_3_0 for changeset cbb3f76c1add
Added tag rabbitmq_v3_3_0 for changeset 13771b4753da
Added tag rabbitmq_v3_3_0 for changeset f575249f16c1
Added tag rabbitmq_v3_3_0 for changeset 5f757415c40d
Added tag rabbitmq_v3_3_0 for changeset 1e0327f91d64
Added tag rabbitmq_v3_3_0 for changeset 2a543a271100
Added tag rabbitmq_v3_3_0 for changeset 6c93dc35a03e
Added tag rabbitmq_v3_3_0 for changeset 233ab8840510
Added tag rabbitmq_v3_3_0 for changeset 49c35b2f79ed
Added tag rabbitmq_v3_3_0 for changeset f17c7f25b86b
Added tag rabbitmq_v3_3_0 for changeset 79daa7341112
Added tag rabbitmq_v3_3_0 for changeset f5fceed816b9
Added tag rabbitmq_v3_3_0 for changeset 7f850ee6b49a
Added tag rabbitmq_v3_3_0 for changeset 11c5c5bf9dc6
Added tag rabbitmq_v3_3_0 for changeset 96afb853de2e
Added tag rabbitmq_v3_3_0 for changeset b07baed34a12
Merge heads
Merge bug26094
Remove some generated files so we can build twice.
merge bug26093 into default
remove DM-Upload-Allowed, as per new debian policy
Merge bug26092
Updates for the new way of doing mandatory.
Merge bug 25786
Merge bug 25786
Merge bug 25786
Merge bug 25786
Merge bug 25786
Cosmetic
whitespace
Events for login success / failure.
wait longer for process death ...to, hopefully, reduce test failures in CI
Merge in default
...and thus remove some redundant code.
Merge in default
Merge bug26090
Merge bug26090
Remove channel matchup and thus message rate.
Remove channel pids from reports
Events for shovel status.
No longer needed.
Simplify due to changed format.
Emit events for federation links, and change the format of status a bit.
Deal when proplists have binary keys (e.g. parameter definitions)
updates app description
Events for policies and parameters.
Events for users and permissions.
merge stable into default
merge bug26086 into stable
eliminate race in testConnectFirst test the test was highly timing sensitive; it published 1000 messages and expected one of those publishes to fail due to the socket getting closed by the server when encountering the first publish. So if the client was quick enough / the server slow enough, all the publishes would go through before the server processed the first one and closed the socket. Cue test failure.
Merge bug26088
Explain this formula.
cosmetic
Merge bug26082
updates README
adds new binary
bumps version
makes sure Length is > 0
adds validation for length param
Calculate the enabled set properly and tweak the UI
Keep online and offline plugin changes separate in plugins_main
fixes code snippet format
Ensure start_app considers plugins when using RABBITMQ_NODE_ONLY
adds assert for queues nodes
uses the node macros in tests
removes find_exchanges function
removes includes for the amqp_client
stops using rpc_calls
renamed maybe_stop_sharding
fixes queue_name impl
handle amqqueue:delete errors gracefully
merge bug26087 into default
give in to dialyzer
suppress no_return warnings
appease dialyzer
more precise spec
Chore: #63814718 Update OSL file: RJMS 1.2.0 for RabbitMQ.
Remove pointless branches found by dialyzer.
Allow specification of the node to use for the queue, all else being equal.
removes references to the ch exchange
removes wrong copyright header
updates/removes examples
updates policy example
cosmetics
implements new policy validator
removes "sharded policy
removes amqp_client dep from app
merge bug25913 into default
Wording
Log listeners for both HTTP and HTTPS
merge bug26067 into default
updats README
adds binary version
bumps version number
adds disable_plugin function
updated README
makes eunit run the tests for better reporting
updates README
adds no-store tests
changes no-store to true
updates readme
updates tests
changes argument name
delivery API is not yet released
allows controlling amount of cached msgs with argument
adds cache length argument handling
fixes boot step
cosmetics
Merge pull request #6 from mweibel/dont-store-if-header-set
Merge bug25989
Put the example config file in an appropriate location in the users's data directory.
Very important fix.
Put the example in the correct place.
Remove dubious comment
Merge bug26069
Oops - set up options/commands properly
Crash when node is down and --offline is not given
Tweak values based on some testing.
Merge bug26070
Monitor consuming queue regardless of whether the consumer is CCN capable, only decide whether to send the CCN on that basis.
Oops
Our other consumer arg has an x- on it. Also, let's validate.
Swap the default value for cancel-on-ha-failover.
Update rabbit_exchange_type_recent_history.erl
Update README.md
Have a completely separate counter for content size vs structural size.
Fix bitstrings, export term/3.
tiny tidying
More robustness in the shape of unusual events.
Those aren't log events
cosmetic
Several more changes:
Something of a rewrite:
Remove obsolete TODOs, fix a rather substantial bug.
Don't let the truncate module have any opinion on how much to truncate.
Rename module and functions to be shorter and more generic. Remove quickcheck tests. Wire into the non-sasl error_handler, but don't wire into handle_info and handle_call functions since those should not be logs.
cosmetic: easier to read and keeps emacs happy
no need for RPC during boot
moves the boot_step up
logs rpc errors
cosmetics
cosmetics
imports rabbit_misc:format
uses rabbit_mnesia:status to get running_nodes
Tweak a bit more - attempt to handle bitstrings properly
removes the need for a sharding_app
Tweak list handling
Use ~p not ~w to format "weird" terms so that we get sensible formatting of strings embedded within them.
adds cleanup steps for the plugin
refactors do_n -> foldl in the interceptor
Avoid crashing as we approach Len == 0, improve test output
Reduce the size of the test inputs
Skip tests in a more operator friendly way
Start testing this properly
Add a comment, and rename the thing to correspond more with words we use already.
Avoid binary:part/3, since it isn't available in R13
rabbit_amqqueue:basic_consume() will wait for recovery anyway, we don't need a special function for that.
Initial stab at limiting term size during logging
Attempt at error checking the basic.consume.
Abstract the waiting into rabbit_amqqueue.
Rename variable (and catch a case I missed before).
Don't show diagnostics after "node already running" since diagnostics are meant to be about *not* being able to connect to a node.
uses internal API for declare/bind/unbind ops
Add test escape for version check, no manifests are present when testing classes outside of jars.
Tidy up the progress output slightly.
UI tweak: look more like the output of dpkg, with two separate characters to indicate desired / actual status. Also refer to a plugin as being "running" rather than "active" since "active" and "enabled" might get confused.
Remove -A and -I options, they are a bit too minority-interest.
Oops, complete renaming that function. Also remove some exports that seem no longer used.
If we refactor rabbit_misc:build_acyclic_graph so that we don't assume the arity of the functions we pass in, then it's easy to build the complete graph then filter it by application, rather than the other way round - avoiding rather a lot of work.
Unbreak the management plugin.
fixes boot step
Merge bug25374
updates module name
renames policy file
Oops
Table and array encoding, and some tests.
Better 3.1.1 compatibility
Add version check to plugin; pass version on binding and exchange declaration.
First hack at recovering consumers.
Merge bug25722 (again)
Better error catching.
Merge pull request #7 from hyperthunk/bug24926
Inline app_utils:app_modules/1
Get rid of app_utils:app_modules/1
Unregister the exchange type when disabled (at runtime)
Add a cleanup step to unregister the exchange
Merge default into bug24926
Remove all compile/parse SQL code; make evaluator work stand-alone; adjust evaluator tests to use erlang terms directly.
renames file *_parameters to *_policy
Merge bug25722 (again again).
Don't explode on "rabbitmqctl stop_app ; rabbitmqctl status", and fix tests.
adds one test
mentions the new exchange in the README
adds test for the mod exchange
Merge bug25722 (again)
We want reuseaddr otherwise starting the same broker twice in quick succession can fail for no good reason here - the real distribution mechanism obviously uses something similar.
Don't export anything ever from this script, it gets inherited by any processes started by the broker - which breaks a bunch of our tests.
adds modulus hash exchange
Merge bug25722
Oops, we need RABBITMQ_CONFIG_FILE to be set for prelaunch to do its job properly.
Remove all RJMS_TYPE_INFO (<<"rjms_type_info">>) refs and usage.
Remove references to RJMS_SELECTOR_ARG <<"rjms_selector">> key on binding Args. Remove usage and reading of type info in exchange Args. Remove compilation steps in exchange main module. Adjust tests 'til they pass.
Get rid of unnecessary app filtering when finding extensions
English
A slightly nicer (more explanatory) UI for rabbitmq-plugins
Refactor (inline a little bit more)
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Merge bug 25940
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Update copyright for 2014
Calculate enabled vs. active correctly for 'list' operations
removes extra plugin dependencies
Inline app_utils:update_running_apps/2
cleans up README file
change AMQP codec field type 'b' interpretation from unsigned to signed, in compliance with the spec and most clients.
Merge bug25589
merge default into bug25589
fixes bug for sharded false -> true transition
removes params from teardown
adds test for exchange creation
removes amqp_util module
do_n -> lists:seq
removes unused test code
removes dead code
stops using the .hrl file
stops using mnesia table
stops using parameters for sharding config
Re-instate x_selection_policy field for db compatibility reasons, but do not use it.
Remove selection_policy field from database record. Without version control this may fail upgrades from 1.1.* to 1.2.*.
Merge default into bug24926
Update rabbitmq-plugins usage
Improve synchronisation between plugins file and running broker
Remove policy arguments.
Merge bug26043
Explain
Fix stupidity, and rename.
Merge bug26066
Merge in default
Merge bug26065
Merge default into bug24926
Merge default into bug24926
Remove now unsupported 'hard' dependency declarations
Refactor: Simplify boot/cleanup step handling and unify modules
correctness++
turns out that cleaning up 'clients' in client_terminate is bad since it breaks clean shutdown/recovery, which relies on the CRefs in 'clients'.
invoke credit_flow:peer_down on, err, DOWN. *only* Thus preventing potential leaks and deadlocks.
add bump_credit to vq soak tests
Check the config situation when installing the Windows service.
refactors adding/removing shards
Update the batch file.
More robustness
Move dist arg to the end so that if the user has set it in RABBITMQ_SERVER_START_ARGS then we take their version not ours.
remove unused code & eliminate warning
Check if dist port is available since otherwise we will create a horrific error message. Also refactor a touch.
Cosmetic
Somehow that actually worked on OS X. Oops.
Try to be marginally smarter about getting the epmd port, it is set as an init argument from the environment variable.
Log the config file's expected location according to the environment varible if it cannot be found.
Present epmd errors a bit better.
Display diagnostics when rabbitmqctl clustering options fail due to nodedown.
removes configuration via parameters
That should probably be a define, right?
Irritatingly I can't find a way to figure out the difference between these programmatically.
Slightly cleaner than iterating through families.
Don't suggest using the kernel params here.
Set the distribution port range to the first of these that matches:
Just in case the error is not an atom.
Various formatting tweaks.
Since we always show the raw error and the expanded error let's get format_inet_error to do that.
Add binary for 3.3.x.
Update for default (aka 3.3.x) API changes, and take advantage of our ability to filter out events from mgmt force refreshes.
Even a very simple test is better than none at all.
Try to be a bit less verbose.
Improved diagnostics.
Slightly simpler, and more polite.
Add listeners to rabbitmqctl status.
Show the distribution port as a "protocol" in management.
Avoid connecting to nodes that are down.
stable to default
Merge bug 26063
Don't corrupt the node montor state even if we are about to shut down.
Get the leader to transition directly to winner or loser state if that's where it's going, or wait in a special lead_waiting status if neither, so that if we get any more autoheal requests we can ignore them.
Be a tiny bit more correct
stable to default
Merge bug26058
Fix memory calculations: we were erroneously removing the mgmt db from the plugins bucket (although it was never counted there) and not removing it from the 'other plugins' bucket (although it was).
Merge bug25957 (again)
Update API
Merge bug25957
Pick another example of a command that will fail...
open_source_licenses.txt
Merge bug25957
Merge bug25957
Merge bug25957
Merge bug26056
Start the consumer utilisation average at active 100% of the time, since when we first add a first consumer it will not be blocked.
Rename info items and reformat a bit.
Rename info items
Merge bug25603 (again)
Fix for old Erlangs.
stable to default
Merge bug26052
Merge bug25603
Merge bug25603
Merge bug25603
Merge bug25603
Merge bug25603
Merge bug25603
We missed another change when moving code back into rabbit.erl
Remove shovel runtime parameters when we're disabled
Ban unauthenticated logins.
Remove debug/logging
Oops - get the precedence right when filtering behaviours
updates image URL
improves README
updates examples
reformats with M-x fill-region
adds test for sharded=false
adds mandatory sharded key to policy definitions
updates readme
removes unused functions
removes duplicated code
imports cleanup
adds file for tests
adds auto scaling test
Use the new-old basic.qos, rather than x-prefetch
Merge in default
Strip out support for x-prefetch.
Management information on per-consumer prefetch.
Management information on per-consumer prefetch
Fix an oops in rabbit:stop/0 and apply consistent parameter names in r_plugins
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_2_4 for changeset d44905fa517a
Package changelogs for 3.2.4.
Added tag rabbitmq_v3_2_4 for changeset 1134dec8fc0c
Added tag rabbitmq_v3_2_4 for changeset 63a872319810
Added tag rabbitmq_v3_2_4 for changeset cef96c0474bd
Added tag rabbitmq_v3_2_4 for changeset 93d77d5e3c3e
Added tag rabbitmq_v3_2_4 for changeset 7a2228dcfcb2
Added tag rabbitmq_v3_2_4 for changeset 77dd8985fc5d
Added tag rabbitmq_v3_2_4 for changeset 4323e6db74c8
Added tag rabbitmq_v3_2_4 for changeset 421273549992
Added tag rabbitmq_v3_2_4 for changeset 442068eb9744
Added tag rabbitmq_v3_2_4 for changeset 9ac3c90e0670
Added tag rabbitmq_v3_2_4 for changeset 8b8b3f4d3593
Added tag rabbitmq_v3_2_4 for changeset f1e63664fd8f
Added tag rabbitmq_v3_2_4 for changeset cf740126da9a
Added tag rabbitmq_v3_2_4 for changeset 6466dc41438b
Added tag rabbitmq_v3_2_4 for changeset 4ca4e65efb03
Added tag rabbitmq_v3_2_4 for changeset 5e6ecaf1dad5
Added tag rabbitmq_v3_2_4 for changeset 6e13e07841b2
Added tag rabbitmq_v3_2_4 for changeset d9d78bfa518c
Added tag rabbitmq_v3_2_4 for changeset b93445fda35c
Inline some more and get closer still to default
make tests work - 'hole' generation is sensitive to IO_BATCH_SIZE - need to handle credit bumps post publishing and prior to status   checks
beta->delta conversion rate is naturally limited which means we don't need an explicit upper bound, which in turn would have required some interaction with q_process.
Reduce the distance to default a bit more
Show both prefetch counts, and rearrange a touch.
increase IO_BATCH_SIZE ...so that beta->gamma conversion can keep up with alpha->beta conversion.
Change the semantics of the basic.qos global flag to switch between per-consumer and per-channel prefetch.
Merge in defaul
Oops
Merge in default
stable to default
merge bug26050
Spec for handle_server_cancel/2.
reduce_memory_use now only does one thing
propagate BQ API change
explain (reduced) impact of IO_BATCH_SIZE
decouple syncing from paging
Merge bug25894
Merge bug 25894
merge in default
merge bug26049 into default
clamp duration to infinity when all rates are very low ...so that the memory monitor excludes the queue from avg duration calculations, which would otherwise get massively skewed.
Use rabbit_event to detect extension changes
Publish plugin changes via rabbit_event
limit alpha->beta conversion through msg store credit flow we also bump the IO_BATCH_SIZE; it's only used to limit beta->gamma conversion, which is a fairly cheap operation (it only touches qi, which has a very compact on-disk representation), and we want to make sure that such conversion can keep up with the alpha->beta conversion.
merge stable into default
merge bug26028 into stable
Auto-delete shovels
Auto-delete shovels
uses a macro for the tested exchange name
delete queues during teardown
adds tests for queue declare
cosmetics
Provide a means to reset/rebuild the dispatch configuration at runtime
adds new sample script
removes whitespace
fixes use of shard in parameters
adds more tests
Merge bug25902
Provide some default URLs to further reduce the amount of form filling needed when moving messages around locally.
Save the original CC header, don't allow it to wreak havoc.
Typo
Record original exchange and routing key.
Merge bug26042
Merge bug26042
Fix plugin expansion during runtime configuration changes
Make mirrored queue logging configurable.
Abstract a bit more.
Make federation logging configurable.
Merge bug26045
stable to default
Merge bug26041
'shutdown' is also not cause of an internal error.
tyop
Default to prefetch 1000.
adds tests for parameter handling
Merge bug26027
Merge in default
stable to default
Merge bug 26038
Introduce another supervisor and avoid deadlocks on shutdown
Don't turn off error_logger on the client side during tests, and try to make generated internal error close messages tell us something useful.
Wait for the "goes" key to go away - i.e. for the old internal exchange to be deleted - so that when we check for "stays" we will get the new copy and not inadvertently the old and new copies together.
Merge bug26039
Don't quote node atoms, it makes the resulting string harder to use in shell scripts.
If we abandon autoheal while in winner_waiting then let the losing nodes know they can carry on.
Update comment.
Eliminate the node_stopped message, since it is possible that a badly-timed stop_app could lead to us missing it. Instead just go based on whether the rabbit stops - if it stops for any reason other than autoheal, we just send it a message it will ignore and continue.
Refactor: distinction between handle_dead_rabbit and handle_dead_rabbit_state is not very useful.
Merge bug26037
Don't name things after not-very-random strings and hope for no collisions, it wasn't working out.
We're seeing intermittent failures here with message_count = 0. My theory is that we might have collisions in the "randomly" named queues. So check queue length in a way that doesn't alter it. This won't solve the problem, but if the failures switch to failing with message_count = 2 then we'll know what's up.
Merge bug 26004
Merge in default
Merge in default
Remove this test (we can't just convert to a fail since the hostname might resolve to localhost on some OSes).
Check source of user is acceptable.
Check source of user is acceptable.
Merge bug25994
Sort by descending priority order, and add a comment.
merge stable into default
merge bug26013 into stable
always prioritise acks (and resume) The former, so that we preserve ack ordering which, while of no semantic relevance, is good for performance since it allows us to optimise for the common acks-in-order case.
Simply application:get_env calls and reduce distance to default again
Merge default into bug24926
Cosmetic - reduce the distance to default a bit more
improve clarity and correctness - introduce blocked_by_alarm state predicate which makes it easier /   more obvious to detect the transitions to/from - do not send 'unblocked' when the client doesn't have the capability - ditch superfluous true/false return from maybe_send_unblocked (now   send_unblocked) - detect the transition into blocked_by_alarm that can result from   handling conserve_resources (the original purpose of the bug)
Only show link to change cluster name if the user is an administrator, i.e. they will actually be able to.
Another final deracification.
Eliminate a compiler warning
Send connection.unblocked when connection is no longer blocked or all alarms clear
Wire in the SwiftMQ-based tests to the usual plugin test mechanism
Check source of user is acceptable.
Bug 25939 broke AMQP 1.0; fix it.
Ooh, another place to use the cluster name!
Make connection.[un]blocked independent from flow control
Further attempt to remove raciness from the federation tests. If my calculations are correct, this might be the last one[?!]
stable to default
Merge bug26006
Merge bug26022
Merge bug26022
Add LDAP timeout to example config
Support connection timeout.
Check source of user is acceptable.
Cosmetic: fix indentation.
selects a queue based on consumer count
Fix various oopses and reduce the distance to default some more
Try and reduce the distance to default
Merge in default
Add a type spec for prepare_boot_table
Simplifying refactor
cosmetic
more indentation fixes
more indentation fixes
removes unused variable
fixes indentation issues
removes unused variable
cosmetics related to funciton locations in file
moves get_parameter to the private function section
cosmetics for shard/1 function
fixes whitespace and indentation
cosmetic
merge bug25868 into default
clearer I think
moves helper function to the bottom
moves utility functions to the bottom
renames exchan_name to exchange_bin
moves find_exchanges to end of file and makes it private
Merge bug25868 (again)
Only ever return 'flow' if there are no alarms. I think in theory it's not possible for there to be an alarm when in flow control, but this is more correct and no less clear.
adds some docs for rabbit_sharding_shard
Use a gen_server to keep the boot steps table around
Oops
Check source of user is acceptable.
Allow checking an IP address as well as a socket.
Merge default into bug24926
Merge default into bug24926
Merge bug25868
Oops
...but only do that if we are not also alarmed.
Show state as 'flow' if we are currently flow blocked and have been so for more than 5s.
Inform autoheal that a node is down on nodedown not rabbit app down; therefore stop ignoring nodedown in winner_waiting.
Merge default into bug24926
Avoid verbosity
Merge bug25627 (again)
Don't crash if the alarm gen_event server is not there (i.e. app is not running).
Don't bother printing out reload errors
Simplify
If you're going to catch, actually handle failures
Cosmetic (ish)
Merge bug25627
Cosmetic; move near call site
Filter out alarms for other nodes
Format alarms in rabbitmqctl status
Backed out changeset 14b04256557c
stable to default
Merge bug 26014
Format alarms in rabbitmqctl status
Don't call InnerFun and remove/3 if the binding was not there.
Refuse access for guest via non-localhost by default.
fixes shard update
uses default user when declaring queues
creates an exchagne for running the tests
fixes amqp connection initialization
merge bug25853 into default
stable to default
Merge bug24476
stable to default
Merge bug26005
updates code to use vhost as part of identifing a sharded exchange
Merge bug 26010
Remove examples that no longer work since bug 23122(!).
stable to default
Merge bug25998
Delay trapping exits a bit more.
stable to default
rabbit_federation_link_util:start_conn_ch/5 does that too.
Allow the whole mirrored_sup to shut down in the post-partition case (and also in the case where mirrored_sup failover races with the global name database, since that lets us simplify rabbit_mgmt_db:start_link/0). Then start the DB if we find it not running. This is rather ugly, but is robust and simple compared to the alternatives...
Handle down messages from the delegate, since that's what we're monitoring locally. And make sure that cast/2 has cast-like semantics - don't blow up if the gen_server has stopped.
merge default into bug24926
Try to make this test more robust.
Merge bug25985 (again)
Merge bug25985 (again)
Allow username without password after all.
Allow username without password after all.
stable to default
Merge bug26000 into stable again
More documentation, slightly stricter types.
This fix didn't make it into bug26000, since it was branched from stable and this module is new in default.
merge default into bug25853 since the previous merge pulled in a breakage
merge bug26000 into default again
fix tests
rabbit_file:wildcard/2 should return [] if the dir is non-existing
oops
merge default into bug25853
stable to default (noop)
stable to default (noop)
stable to default (noop)
stable to default (noop)
Merge bug 26000 (into stable this time)
Merge bug 26000 (into stable this time)
Merge bug 26000 (into stable this time)
Merge bug 26000 (into stable this time)
Merge bug26000
Merge bug26000
Merge bug26000
Merge bug26000
cosmetic
Merge bug24738
Merge bug24738
Merge bug24738
And after running dialyzer...
Merge in default
Include a reference in forced event refreshes.
Include a reference in forced event refreshes.
Include a reference in forced event refreshes.
Merge bug25985 again
Update test
Merge bug25985
Switch to usernameless direct client
Merge bug25985
Merge bug25985
Merge bug25985
Merge bug25985
The shovel tests have always been racy, starting the shovel application, and expecting that to create an exchange which we can then bind to. But it's only been tickled recently. Anyway, wait for the shovel to start running before proceeding.
Test with eunit for better error reporting.
Merge bgu26001
Merge bug26002
trigger rate calculation in all the right places
stable to default
Merge bug25762
bail on coding bug
don't use amqqueue:with/3 in mq_misc:{add,drop}_mirror since we don't actually interact with the master QPid here.
remove an abstraction too far
remove an abstraction too far
don't sync so often
minimal fix
API change
API change
API change
Allow specifying a tx-fun.
cosmetic
Mention binary.
Add binary build for 3.2.x.
Initial commit
rename misleading variables ...and fix a counting error
simplifying refactor
cosmetic(ish) - sensible order of exports / specs / functions - remove unneeded exports - inline some functions
preeeeeeetty
Use dirty opts to find durable queues during startup (and optimise)
Merge bug 23906
Merge bug25979 (again)
Damn, that's no longer relevant either.
merge bug25980 into default
improve docs
Fix tests post-merge
Remove stuff to do with local-username.
Merge bug25979 again
That's no longer relevant.
Merge in default.
Merge default
Merge default
Merge bug25979
Merge bug25979
Merge bug25979
Merge bug25979
Merge bug25979
Assuage dialyser. And possibly myself?
I don't think we do need to notify. Also, add specs.
Merge bug25785
Allow username to have different default in direct vs network params; don't just treat everything as network then convert at the last minute.
Exit early for this configuration which no longer works.
Get rid of local-username and faffing around with impersonator tag.
Support direct connections with no user.
Get rid of the impersonator tag, only let the magic user do it.
Introduce dummy user for direct connections without users.
Simplify durable queue recovery and avoid a dict lookup on the results
Merge bug25992
update_counter-- correctness++
Don't reinvent orddict:update_counter/3.
stable to default
Merge bug25996
Ensure that if we are shutting down, and the worker is taking a long time to establish a client connection, then we do not hang the shutdown doing so.
refactor: more obvious correctness don't modify the State in the fun passed to queue_consumers:deliver. At least in one of the call sites.
cosmetic
refactor: don't carry around so much state
Guess supervisors, handle (e.g.) heartbeaters for MQTT.
Allow running tests on a Mac
Merge bug24408 (again)
This optimisation only makes sense when the message is neither mandatory nor confirmable!
Mention that
Remove last remnant of local-nodename.
Log a warning if the cluster name is picked from several candidates.
optimisation
Manage AckTag -> Ctag mapping in rabbit_queue_consumers, leave the channel out of it.
Merge default
Merge bug 25991
If given Credit=0 then don't accidentally return Unblocked=true.
Take account of arguments in rabbit_topic_trie_binding.
merge bug24408 into default
missed one instance of the switch away from msg_seq_no as confirm indicator
cosmetic
oops this wasn't wrong, but it looked odd
merge bug25817 into default
don't intercept performance critical methods This improves 'PerfTest' by ~10% when running with one scheduler
shut up dialyzer
cosmetic
Upgrade.
Language
Document set_cluster_name.
Management support for cluster name.
Don't hide the link error reason in a mouseover, people might not notice it.
merge bug25888 into default
stable to default
non pretty print
merge bug25827 into default
unbreak durable queue dir cleanup all_queue_directory_names returns just names, not paths
stable to default
Merge bug25983
Don't break if someone specifies ciphers in ssl_opts.
stable to default
Merge bug25982
Publish persistent messages for QoS 1.
Merge bug25740
Derp
Remove all the timer:sleep/1 invocations (that aren't part of a loop to check whether something has happened yet). It turns out that they can all be replaced by waiting to see if bindings have appeared upstream. Tests are now notably faster to run, and should be more reliable.
Perform (and wait for) queue recovery in parallel
merge bug25827 into default
oops
inline
Don't reinvent the wheel
Consistent ordering, and only take account of publishes when deciding whether to update rates (since it's only in conditions of high publish rates that we care).
Cycle detection for bindings too, plus a test.
Refactor the tests just a little bit more
proper cleanup this should ensure that all process registrations etc have disappeared by the time we return from the function.
Rework mcall tests
cosmetic
While we are here, virtual_host is redundant, it can be inferred from the URI.
First pass at cycle detection.
Missed a bit
Remove support for local_nodename.
Merge branch 'v1.1.x' into master
cleans up rabbit_sharding_amqp_util module
Use cluster name.
Be more general about reporting failed command executions - ?assertCmd() doesn't tell you anything.
Use cluster name
First pass at cluster name.
Fix error formatting invalid selector string (back-level compatibility).
Unify the test cases and cover all bases
refactor: simplify
refactor: lift do_mcall casing to head
move mcall docs to correct place, and improve them
Based on some testing, we can reduce this somewhat.
Return the correct exit reason for unknown global registered names
Continue on our quest towards the world's most verbose logging.
Cosmetic (ish)
Remove rabbit_misc:multi_call/2
dn_lookup_bind option, and rather more tests for the login phase.
Fix multi-call tests
Use gs2:mcall/1 in r_amqqueue:force_event_refresh/1
Add a note to the gs2 essay
Handle varying destinations in mcall/1
Merge branch 'v1.1.x' into master
Refactor: tag replies safely and avoid using erlang:demonitor/2
Introduce a new parallel (multi-server) call API
The existing value can be 'undefined'.
Try to get the weighting factor right.
Rates on exponential moving average.
oops
Cosmetic
Unify the #rates record so we don't duplicate as much stuff.
Adjust evaluate() on `between` functions to cope with ternary version in erlang selector form.
merge default into bug25853 containing the recently merged bug25827
merge bug25827 into default
turns out we needed recursive=true after all ...but actually do this whole thing differently
Merge bug 25817
Whitespace
merge default into bug25853
Merge bug25970 (again)
Go back to rendering the colour box with a floating element since unicode 2b1b seems not very reliably installed.
Update rates every 1000 messages or at the ram duration timeout, whichever comes first.
Explicitly target an egress/ingress ratio.
Merge in default
Ignore clean.dot read/delete errors during upgrades
Merge bug25970
Merge bug25970
Merge bug25970
Fix a syntax error in config example
Improve recovery terms upgrade handling
Refactor rabbit_recovery_terms startup
merge bug24408 into default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Merged stable to default
Added tag rabbitmq_v3_2_3 for changeset 6f80a04d4517
Added tag rabbitmq_v3_2_3 for changeset 5a7511f6894b
Added tag rabbitmq_v3_2_3 for changeset 45b859e3d383
Added tag rabbitmq_v3_2_3 for changeset 0efcdc100385
Added tag rabbitmq_v3_2_3 for changeset 78462030c75a
Added tag rabbitmq_v3_2_3 for changeset 98f91da20acb
Added tag rabbitmq_v3_2_3 for changeset 9314d790d7db
Added tag rabbitmq_v3_2_3 for changeset a1e9869852d4
Added tag rabbitmq_v3_2_3 for changeset af8a55ab4bda
Added tag rabbitmq_v3_2_3 for changeset 6d18eb7242bc
Added tag rabbitmq_v3_2_3 for changeset 28bca90e1349
Added tag rabbitmq_v3_2_3 for changeset 46ff7fa8bf27
Added tag rabbitmq_v3_2_3 for changeset 73c08f4e42dc
Added tag rabbitmq_v3_2_3 for changeset fb63b757df01
Added tag rabbitmq_v3_2_3 for changeset 718800151a99
Added tag rabbitmq_v3_2_3 for changeset b3bb4d53b673
Added tag rabbitmq_v3_2_3 for changeset e6e1beb2bc1e
Added tag rabbitmq_v3_2_3 for changeset 67027ab80a2c
Added tag rabbitmq_v3_2_3 for changeset 915404021814
Changelogs for 3.2.3
Refactor (recovery-terms restart strategy)
stable to default
Merge bug25971
Consistency
The name of name is name not anem.
API consistency, clarity and cosmetics: - store/2 took a full dir path whereas read/1 only took the basename;   now they both take the basename. - clearly separate the public API and the internal API in exports - don't have specs for internal API - remove unused UPGRADE_TABLE define - ditch rabbit.hrl include - it was only needed for ?MAX_WAIT - sensible order of function definitions, plus some separators for   clarity
Clean out transient fields of the queue record before using it as supervisor ID.
some drive-by inlining not strictly part of this bug but easier here than on default
some inlining, cosmetics, and more explicit sequencing
updates interceptor to new behaviour spec
updates interceptor behaviour spec
passes vhost to interceptor
adds docs
merge default into bug24297
refactor: make 'reject' arg order consistent with 'ack' et al cherry-picked from bug24297
merge default into bug24297
refactor: genericise
brevity
cosmetic
s/confirmed/confirm/g, fix a test.
merge default into bug24297
refactor: basic_consume/10 -> /9 cherry-picked from bug24297
Remove some duplication.
merge default into bug25853
Fix drop/2.
Don't stomp on timeout when receiving mandatory notification.
Don't think that needs simplifying, but the comment is now not relevant any more.
Fix basic.return stats, and fix various problems found by dialyzer.
Don't explode when there is more than one queue to route to!
Oops
Substantially improve both performance and correctness: 1) really don't treat presence of MsgSeqNo as a cue we are doing confirms, and 2) get the right dtree function when we receive a MsgSeqNo.
merge default into bug24297 (and resolve merge conflicts in limiter)
inline
merge bug25962 into default
merge bug25962 into default
Get dtree use right: we want take_all/2 when we get a mandatory ack (since one queue getting it is enough). take/2 on DOWN is correct.
Quick-and-dirty version of pipelined mandatory publishing
Lighter state badges
Lighter state badges
Lighter state badges
cosmetic
merge stable into default
merge bug25929 into stable
handle setopts error gracefully
Add erlang string parameter to jms-topic binding arguments as alternative to SQL string. Add function to create erlang term from parameter. Generate check function from erlang term. Add unit test for rjms_erlang_selector binding argument presence.
Merge bug25654
Merge bug25654
Placate Matthias.
Not sure of the value of this warning, but let's unbreak it anyway.
Uh, give the second head a chance to match.
Optimise queue index initialisation
Merged bug25941 into default
Renames and codedocs
Merge branch 'v1.1.x'
Separate modules for authentication and authorisation
stable to default
Fix type error
Merge bug25965
Merge bug 25952
Merge bug24927
Oops x 2
Oops
Limit maximum message size.
Remove inanity.
cosmetic
Fix the BQ interface comments pertaining to recovery data
Remove jms_queue exchange policy and associated tests.
Avoid "Absurdly large distribution output data buffer" death.
Fix type spec and modify backing_queue_qc to call init correctly
Capability
oops, wrong branch
Capability
Revivify branch from earlier commit.
cosmetic
Staunch the flow of "Discarding message..." log messages
merge default into bug25827
Refactor - simplify BQ/QI interface & reduce the distance to default
Update essay.
We can't have drain=true and mode=auto so let's unify to a single mode: manual/drain/auto.
Unify rabbit_limiter:credit/5 and rabbit_limiter:set_consumer_prefetch/4.
Move credit args parsing into rabbit_queue_consumers, to reduce some nasty arities and increase locality.
remove channel.flow info from UI
Undo gratuitous rename.
eliminate unused var warning
drop support for channel.flow{active=false}
Cosmetic (ish)
Refactor: reduce the distance to default
stable to default
Merge bug25914
OpenLDAP is not guaranteed to return the DN as an attribute. AFAICS the object_name field should always be filled though, and always be the DN (RFC 4511, 4.5.2).
Treat prefetch=0 the same as basic.qos does - it means infinity not a broken consumer
Cosmetic (ish)
Rearrange order of function args in ack/reject/requeue for consistency.
List alarms in rabbitmqctl status
Simplify / make it clearer that we always go through the invariant.
Refactor / maintain a clean interface to the backing queue
Use per-consumer prefetch, and thus abandon all those per-subscription channels.
stable to default
Merge bug 25956
stable to default
Merge bug25949
stable to default
Merge bug25949
Don't federate internal-use queues.
Undo accidental unification
Unbreak basic.reject, basic.nack and basic.recover. Fix up specs.
Ignore prefetch in autoack mode.
Merge in default.
Refactor to avoid O(N*2) lookups during queue recovery
Merge bug 25954
Don't fail if you comment all tests out bar one.
cosmetic
merge default into bug25827
Merge bug25910
API update missed, spotted by xref.
Refactor - remove unused functions/comments/todos
Merge default into bug24926
Refactor (simplify application stop handling)
Switch to simplified boot/cleanup step API
Switch to simplified boot/cleanup step API
Remove upstream (helper) exchange type on disable, strip unused/comments
Re-work boot step cleanup handling
Handle hard vs. soft boot step dependencies
tiny simplifying refactor
Merge bug25910
Merge bug25910
Merge bug25910
Merge default into bug24926
Revert changes to add proc_name via gen_server2, instead do it explicitly with a helper macro.
Revert changes to add proc_name via gen_server2, instead do it explicitly with a helper macro.
first commit
Stop using the full path to the queue directory as the recovery key
Merge in default
make draining part of r_limiter:credit which makes the contract more obvious and is also more efficient since we no longer trawl through all consumers in order to find drainable ones.
This code can now be invoked in the context of the Erlang client, in which case we are not guaranteed that the env key will be there at all.
Automatically update process_name on become.
Cosmetic
Merge bug25817
Merge heads
Merge bug25817
Cosmetic, inline.
merge bug25938 into default
revert most of http://hg.rabbitmq.com/rabbitmq-server/rev/5fddc5198854 since it was wrong. except for the var renaming in r_queue_consumer:add.
merge stable into default
simplify even further
merge stable into default
simplify, remove redundant code
fixes broken qpid tests
Oops - relocating the recovery file broke our lookup function
Improve the backing queue API module documentation
Avoid unnecessary cosmetic changes (reduce the distance to default)
We don’t need to ensure the mnesia_dir is present here
Store the recovery terms directly beneath RABBITMQ_MNESIA_DIR
Cosmetic (ish)
Merge bug25938 (again)
Upon unblocking, unblock, and run message queue.
Merge bug25951
Verticality
fix credit handling This cannot go via possibly_unblock since that deals with *channels* becoming unblocked only, whereas here we care about possibly unblocking a consumer on an otherwise unblocked channel.
Make sure we're storing the queue dir name not the old clean file name
Merge default into bug25827
Better handling of file system directories during shutdown/recovery
More consistent naming
Fix various bugs that prevented this form working at all. Also change the "OtherArgs" we pass through to Args (since it's there to be reported, it makes no sense to hide args we have parsed out).
merge default into bug25938
cosmetic
Oops, don't explode in the empty=true drain=false case!
Merge in default.
merge stable into default
tiny refactor: better function name ...and more sensible case order
Add initial support for x-prefetch consumer arg (basically auto-credit). It's faster than basic.qos but not as fast as I would like. Also reject / nack is gratuitously broken.
merge stable into default
cosmetic: whitespace
extract dead-letter publishing from rabbit_amqqueue_process
Don't do prefetch if we're not doing acks.
Don't do prefetch if we're not doing acks.
Merge bug25948
Process identities for per-channel processes in the Erlang client.
Oops
merge default into bug25948
Add process names for all connection-level processes in the AMQP client.
Make the name of an amqp_client network connection distinguishable from an incoming server one.
API tweak for the AMQP client
stable to default (noop)
Merge bug25936
Merge bug25937
Merge bug25937
API change, and reinstate the mini-essay.
Rename this again
simpler and more efficient
merge bug25937 into bug25948 and largely rewrite it in the process
simplify
(re)merge bug25942 into default
grrr, forgot one
(re)merge bug25942 into default
it turns out that dialyzer dislikes improper lists ...and spits out "Cons will produce an improper list" errors *sigh*
checks the interceptor returns the right method
simplify rabbit_queue_consumers:deliver even further turns out we can ditch another parameter to both that function and the FetchFun we pass on.
better helper
keep State out of one of the FetchFuns This is cleaner.
make rabbit_queue_consumers:deliver deliver at most one message ...which makes the control flow more obvious
Names for client network connections.
Merge default
Merge in default
Oops
Merge bug25935
Merge bug25935
Merge bug25935
Merge bug25935
No longer needed
UI for add-forward-headers.
Add add-forward-headers option
Accept this from federation.
Move this to the server.
expand_shortcuts clean up
renames handle_expand_shortcuts to expand_shortcuts
stable to default
Merge bug25945 again
Uh, that function needs another header
consumers/1 returns a list of 4-tuples now.
Even clearer?
Maybe this is clearer?
Another API change
Simplify further, don't use a proplist
Simplfy (although perhaps not as much as we had hoped) by only informing queue decorators when the active consumers may have changed, rather than trying to give them more information about what is happening.
API change
Merge bug25938
Multi-heads
Fix handling of credit arriving with drain=true and an empty queue - we need to not really add the credit (since it is "used up" immediately and thus not unblock if needed).
Merge in default
Stable to default
Merge bug25945
Notify on channel down.
Prevent child calling its supervisor
Merge bug 25943
move consumer_use calculations into rabbit_queue_consumers
Detection of absent keepalives
refactor: prepare for more state
Merge bug25939
Merge bug 25942
Simplify binlist_split from /4 to /3.
stable to default
Merge bug25928 again
Revert the changes to the error thrown.
stable to default
Merge bug25934
Allow publish_properties and publish_fields to be delivered in any order.
passes the right argument type to rabbit_channel_interceptor:select/1
cosmetic
lift buffer vars from state
merge bug25939 into bug25943
merge default into bug25817
become 1.0 with the correct state
eliminate unnecessary state modification amazingly this actually yields a few % performance improvement
some small codec optimisations - encode and decode field types as characters rather than strings - construct shallower iolists by cons'ing instead of appending - avoid construction of intermediate binary for tables and arrays
further optimise frame reading
merge stable into bug25939
merge stable into default
simplify
small refactor: simplify AMQP version negotiation a little bit
correct typo in comment This was introduced in http://hg.rabbitmq.com/rabbitmq-server/rev/4852382b462b
Scrub un-used code and introduce a lookup-by-recovery-key API
refactor: better var names
restore short message performance it turns out that short message performance had actually gotten worse, but this was masked by the scheduler.
more efficient data splitting in reader
refactor: better var name DeliverFun wasn't deliverying anything. It was just getting hold of a message *to* deliver. -> FetchFun
specs
refactor: re-order and re-name
merge default into bug25938
merge stable into default
refactor: inline
reduce distance to default this got lost in the merge
cosmetic
merge default into bug25938
refactor: introduce helper to simplify update_consumer_use call sites
oops
merge stable into default
various simplifying refactors these are actually all quite trivial; the diffs are large mainly due to whitspace and renames
tiny refactors
cosmetic, largely whitespace
cosmetic
extract all channel and consumer related queue functionality
RJMS 1.1.3-SNAPSHOT
RJMS 1.1.2 Release
Trap exits and ensure we close the table on shutdown
osl
basic.publish performance degrades if called with intercept_method
fixes handle_expand_shortcuts
refactors intercept_method error handling
push down recovery index handling into qi recovery
Nicer UI.
Get process info across nodes when necessary.
Merge branch 'master' of github.com:simonmacmullen/rabbitmq-top
Start to support processes on other nodes
Tidy of specs and further re-working of tests
stable to default
Merge bug25928
Keep the two handle_exception()s together.
stable to default
Scarier warning
Adjust vq tests to the changed API
Rework/Refactor to handle recovery terms up-front
handle interceptor exceptions at the channel level.
merge default into bug25817
refactors channel interceptor
Document
Rename the module too
Refactor: rabbit_recovery_indexes => rabbit_recovery_terms
Ensure old clean.dot files are removed during recovery
Rename the recovery index file
Treat connection errors on write the same as on read.
moves the expand_* functinos to happen before handle_method
Tidy/Refactor boot step handling
merge default into bug25827
Merged stable into default
Merged bug25925 into stable
Simplify pattern matching code in sjx_evaluator.
Strip extra parameter when installing service
Make evaluator cope with un-compiled pattern strings (by calling sjx_parser:pattern_of/2). This paves the way for a raw evaluator expression to come from the client.
Merge bug22525
Fix type
Fix search and replace mishap. It's... not an 'Objection'.
Simplify
Merge bug25890 again
Fix the tests, and fix bug found by the tests :/
maintain consistency of process dict channel entries (just as we used to)
Merge bug25890
Merge bug25890
Merge bug25890
Merge bug25890
More comment.
Detangle a bit, and be a bit more discerning about what we push through fmt/1.
Rename and refactor a bit
Reverse sorting, and sorting by pid
correct another return
cosmetic
refactor: take advantage of channel_count to simplify maybe_close
merge heads
refactor: take advantage of channel_count to simplify terminate_channels
channel_count is initialized in start_connection
refactor: remove superfluous code
refactor: two heads are better than one
correct return value
Show more process detail
refactor: simplify and reduce distance to 'default'
refactor: simplify & consistency
cosmetic: correct spacing, eliminate spurious diff to default
simplify (and stay below column limit)
correctly thread through the state
correct handling of channel_cleanup return value plus some cosmetics in the area
Process type in a separate column
refactor: simplify and reduce distance to 'default'
cosmetic: consistent field ordering (with start_connection code)
If channel pid is not in the process dict, don't decrement channel_count
Decrement channel_count in channel_cleanup
Nuke some unnecessary code
Init channel_count correctly
Compile
Decrement channel counter here, too
Rename ChState back to AState
Decrement channel counter when handling channel.close
Move channel_count to top-level reader state record
Start of a process details page
Be simpler and get initial calls in two ways.
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merge branch 'v1.1.x'
Add isLike(undefined) definition, and rearrange evaluate();… for readability.
Add upgrade path for recovery indexes
merge default into bug25817
In the dynamic shovel case, look up some extra information for source and destination. Also bring some badly-needed abstraction to the templates.
Strip out attempt to reverse engineer source and destination queue and exchange, and add vhost to dynamic shovel 'name'.
Merge branch 'in-op#62056870'
Augment tests for ‘in’ and ‘not_in’ in evaluator; add clauses to evaluate ‘not_in’, in evaluator.
Added tag rabbitmq_v3_2_2 for changeset f53522067e8f
Added tag rabbitmq_v3_2_2 for changeset d09958872a52
Added tag rabbitmq_v3_2_2 for changeset d000586f70bd
Added tag rabbitmq_v3_2_2 for changeset b3cdf6f20bb0
Added tag rabbitmq_v3_2_2 for changeset a4a1eb00260b
Added tag rabbitmq_v3_2_2 for changeset 152ec70c290e
Added tag rabbitmq_v3_2_2 for changeset d37dd6410e72
Added tag rabbitmq_v3_2_2 for changeset dfc62f7e724b
Added tag rabbitmq_v3_2_2 for changeset b0d276c8bf56
Added tag rabbitmq_v3_2_2 for changeset 4e618eff6a4d
Added tag rabbitmq_v3_2_2 for changeset 225adad2de9e
Added tag rabbitmq_v3_2_2 for changeset bc410a1f43a4
Added tag rabbitmq_v3_2_2 for changeset ac66de38dc79
Added tag rabbitmq_v3_2_2 for changeset 74b2cc38c565
Added tag rabbitmq_v3_2_2 for changeset ab05912aac94
Added tag rabbitmq_v3_2_2 for changeset 3d637fc6af41
Added tag rabbitmq_v3_2_2 for changeset 97b3dcf53a1b
Added tag rabbitmq_v3_2_2 for changeset 9dcd1e242982
Added tag rabbitmq_v3_2_2 for changeset d3f84b20c376
Add changelog entries for 3.2.2
Further refactoring
Merge in default
Track # of open channels with a counter in connection state
Merge bug25922
Log nodedown_reason.
Update copyright
Update copyright
stable to default
Merge bug 25920
Cope if HOME is not set.
Merge branch 'master' into v1.1.x
Merge bug24829
Merge bug24829
Since we use this in more places, make it a bit smaller.
Unbreak display of sync state.
Handle recovery index startup errors cleanly
Minor refactoring
Unbreak Erlang client.
Register the name locally as well.
Be smarter about how we determine process identity.
Various recent API changes and many more process types.
Add queue_coordinator / queue_syncer / gm. Shift to getting gen_server2 to store the name in most cases.
Merge in default
Rename
A bit more abstraction, plus identities for heartbeater / queue_collector / limiter.
Add in operation type checking (and augment tests).
Support cowboy SSL connections
Reduce distance to default (again)
Track queue index recovery data using dets
Merge bug25904 again
Update nomenclature in tests too...
Remove current_function, it's not super-informative.
Format process names rather a lot better
stable to default
Oops
stable to default
Merge bug25899
Store connection name in server writers (but not Erlang client ones)
Merge bug25904
Merge bug25904
Don't talk about objects, we do that nowhere else.
Don't talk about objects, we do that nowhere else.
Remove unnecessary test.
Undo some changes.
Merge in default (noop)
stable to default
Merge bug25912
Explain
Merge in bug25912
merge in default
Make sure that our last event before going sorta-idle is not one in which we claim to be in flow control.
Show idle state consistently with other states.
Merge bug22525
Merge bug22525
Clarify
Store some process identity in the process dictionary.
Grab the rabbit_process_name (see bug 25910) if one exists.
refactor for clarity
cosmetic
Try to be more efficient
cosmetic
better
Tweak
Restart of the old rabbitmq-diagnostics except with the ETS stuff taken out, a new name, and a slightly more sane approach to sorting.
Add channel_max to rabbitmqctl(1)
Disambiguate return values
Rather than just querying a single remote node, query them all, and accomodate remote nodes that might be running older versions than ourselves, provided we can find someone who is running the same as us.
Merged stable into default
Merged bug25905 into stable
Termination conditions when receiving multiple acks
Cosmetic
Correct nomenclature
Correct nomenclature
Use channels not connections in reports. Simpler, we don't need to round trip to get a name, and unbreaks network connections.
Report channels not connections, rather more useful.
Report source queue and destination key.
Report source queue and destination exchange/key.
Merge in default
dest-exchange might not be set.
dest-exchange might not be set.
Stable to default
Don't show columns for message rates if such are disabled.
stable to default
Merge bug25901
Show credit flow state for channels and queues, merge display with that of idleness.
Announce credit flow state for channels and queues.
Move determination of flow-ness into the server.
Move determination of flow-ness into the server.
Indicate channel creation errors via returned value
Make this message fit in 80 chars
Show message rate(s?)
Report connection pids
Merged bug 24851
Merged bug 24851
Merged bug 24851
Report URIs not params in status.
Report URIs not params in status.
Move remove_credentials() to amqp_uri.
Move remove_credentials() to amqp_uri.
Unused var
Oops, unused
Formatting
List channel_max in the connection info table
Cosmetics
Missing fn head for channel_max
Add channel_max to info keys
Narrow down try .. catch here
Use rabbit_misc:protocol_error and catch exits
We don't know what method caused the problem, so specify it as 'none'
Fix off-by-1 issue
Ooops.
Introduce halt_on_upgrade_failure app env param and set it to true. Only throw an error instead of halting if it has been set to false.
stable to default
Merge bug25897
Ensure that we always interleave start / stop / start / stop.
Do nothing if the rabbit application is already running. Similarly, don't explode if the boot marker is there, just do nothing.
Automated merge with ssh://rabbit-hg.eng.vmware.com/rabbitmq-server
Reject channel.open when the total number of open channel goes above channel_max
If header 'X-Recent-History-Store' set, dont store
Update config example
Unregister the exchange type when disabled (at runtime)
Tighten up validation of exchange vs queue. Add validation tests. Remove list_to_binary/1 festival.
Unregister the exchange type when the plugin is disabled (at runtime)
Cosmetic (whitespace)
Unregister the auth_mechanism when the plugin is disabled (at runtime)
Reject channel.open method with channel number > negotiated channel_max
And a bit more testing
Make the test helpers assume slightly more so tests are less verbose, add another test, fix a bug thus found.
Merged bug25896 into default
Set default content-type to text/plain
Set CHANNEL_MIN to 1
cosmetic: reduce vertical space and distance to default
refactor: consistent order of handling configurable params
refactor: make handling of server config values more generic and shrink the code as a result
(really) don't use ~p unnecessarily
refactor - more sensible order of arguments - less vertical space
various fixes and refactors - replace two 'case's with one - the opposite of 'lower' is not 'greater' but 'higher' - eliminate unnecessary intermediate var - use rabbit_misc:protocol_error/4 instead of   rabbit_misc:protocol_error/1 + rabbit_misc:amqp_error/4 - don't use ~p unnecessarily
More tests, less races, less shelling out complexity.
Eliminate warnings
Simple test.
Fix test
Oops
Use "source" and "destination" rather than "from" and "to" for consistency with static shovels and it's probably a bit clearer. Also cosmetic HTML improvement.
Use "source" and "destination" rather than "from" and "to" for consistency with static shovels and it's probably a bit clearer.
Document support for multiple URIs.
Support multiple URIs
CSS support for subforms.
Merge default into bug24926
Introduce cleanup steps enabling us to disable federation at runtime
refactor (renaming)
De-duplicate dependency/graph building functions
Don't send connection.close when connection.tune negotiation fails
Remove lots of io:format debugging and tidy up rpc error messages
Extract function
Refactor
Pass socket around instead of the entire state
Extract function, improve error messages
No need to handle undefined case here
Documentation
Add channel_max default
Make connection.tune.channel_max configurable
Support consuming from an exchange
Support consuming "from" an exchange.
Quite a severe oops...
Rather more compact form.
Make controls-appearance support multiple divs, not just yes/no.
Oops
stable to default
Merge bug25873
Merge in stable
Merge bug25867
More explanation
Merge bug25882
MErge bug25882
Re-work boot step handling
UI for dest queue / exchange.
Oops
Allow publishing direct to a queue.
Have dynamic shovels declare the resources they need.
Web UI for shovel management.
Show whether shovels are static or dynamic.
Basic dynamic shovels.
We are at minimum R13B03 now.
Refactor (de-duplicate) module attribute search
Various boot procedure improvements
Cope with percentages being missing.
Don't return consumer utilisation when idle or there are no consumers; no number can be particularly meaningful.
Don't prioritise 'reject', it could lead to observable reordering.
stable to default
Merge bug25887
stable to default
Merge bug25889
Inline wrap_values_in_struct() and do the same for non-monitoring users.
Refactor
Doc update
Update doc
Do the percent-formatting in the web UI layer.
Simplify and remove magic numbers from the i/2 bit by treating time since last change of state as another timeslice. Also return a float between 0 and 1, not a string between "0" and "100".
Make sure message_stats and queue_totals are serialized as JSON objects
Improve comment.
Merge bug25877
merge default into bug24926
Rework boot step handling
stable to default
merge bug25872 into stable
Support vhosts as part of username
Cosmetic / unused variables.
Simplify: less state, less records, more pattern matching.
Store timestamps as integers.
Missed one + cosmetic.
CU for "Consumer Utilisation" not CB for "Consumer Bound".
Prioritise everything we used to before bug 24966.
Add a BQ function for this.
Matthias' strawman patch: prioritise notify_sent based on current ingress / egress rates.
Maintain an exponential moving average of the utilisation.
Accommodate rename.
Experiment with the idea of "consumer utilisation". Still far too lumpy.
stable to default
merge bug25881 into stable
Unregister client IDs correctly
merge bug25760 into default
consumer_bound info item.
consumer_bound info item.
stable to default
Oops, that should have gone in bug 25415
Merge bug25876
The server is not guaranteed to have closed the channel before we try to close it.
Don't say how it's implemented, but do explain that it's case insensitive and link to the docs.
Strip out everything to do with channel.flow - the server has not sent it since 1.x, and having the shovel worker deal with it by buffering messages is highly dubious anyway.
Fix variable shadowing.
stable to default
Merge bug25863 again
Re-add the app module to do the backend check
If the regex is invalid, display the error message rather than returning all rows.
stable to default (not like normal, many conflicts...)
Reduce distance to default and fix layout (on my browser at least...)
Patch as contributed.
*cough*
Restore synchronous addition of slaves in the queue.declare case.
Don't send invalid strings since we now ban that.
Merged bug25863 into stable
stable to default
Merged bug25839 into default
Merged bug25860 into default
Use xmerl rather than maintain our own UTF-8 validator.
Merge in default.
Merged bug25870 into stable
RabbitMQ 3.2.1
Merged bug25570 into default
1.1.2-snapshot release on v1.1.x branch
Forgot to add a spec
Re-add the log invocations we lost. This does lead to the stale master pid warning getting logged on a different node (the slave node rather than the node that attempted to start the slave) but I doubt we care about that.
Port the deadlock-breaking code from bug 25852.
Remove 'evil' receive block.
Always report coarse queue stats.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Cope with clients dying.
Create 1.1.1 release
RabbitMQ 3.2.1
Added tag rabbitmq_v3_2_1 for changeset 18f21bf83da7
Added tag rabbitmq_v3_2_1 for changeset 2b0a5d6f2bdd
Added tag rabbitmq_v3_2_1 for changeset 32db6fc76b16
Added tag rabbitmq_v3_2_1 for changeset fdb9590ab0f4
Added tag rabbitmq_v3_2_1 for changeset a4e5d2a768bd
Added tag rabbitmq_v3_2_1 for changeset eef7b2ec65d1
Added tag rabbitmq_v3_2_1 for changeset a763a7c9c008
Added tag rabbitmq_v3_2_1 for changeset 8f6d4c65b92a
Added tag rabbitmq_v3_2_1 for changeset 6aac51c50739
Added tag rabbitmq_v3_2_1 for changeset 87b761cdb138
Added tag rabbitmq_v3_2_1 for changeset b76adb51a46f
Added tag rabbitmq_v3_2_1 for changeset 2264073fc7a4
Added tag rabbitmq_v3_2_1 for changeset e1017be1ae62
Added tag rabbitmq_v3_2_1 for changeset 64b5c6a864ef
Added tag rabbitmq_v3_2_1 for changeset ebc77aea8e6e
Added tag rabbitmq_v3_2_1 for changeset 569ab0ef2d37
Added tag rabbitmq_v3_2_1 for changeset 65d88ff53d50
Added tag rabbitmq_v3_2_1 for changeset b9d0d23e75f2
Added tag rabbitmq_v3_2_1 for changeset fde7d8bb464a
1.1.1-snapshot release on v1.1.x branch Includes automation of RJMS version in artefact build
1.2-snapshot release on master branch Includes automation of RJMS version in artefact build
stable to default
Merge bug25865
Remove vestiges of uri_auth_used.
Move bug25865 to stable.
handle cleanup steps properly
track boot status throughout a node's lifetime
Explain
Maybe sync on slave promotion.
Allow offline plugin re-configuration
Ensure we pass the nodename on windows
Allow for runtime disabling of plugins
Restructure our boot procedure for more flexible boot-step handling
Merge in default.
Validate utf-8-ness on the way into rabbitmqctl too.
Derp / cosmetic.
Check UTF-8-ness of shortstrs in non-content-bearing methods. Note that we use the previously developed "fast" checker to avoid a dependency on xmerl, not so much because it is fast.
Correct version check.
Oops, forgot to remove these.
Remove gen_server, just make LDAP calls direct from the channel.
v1.1.0
Create 1.1.0 release
Merged stable into default
Merged bug25849 into stable
sp.
Merged stable into default
Merged bug25618 into stable
stable to default
That async_dirty is not needed, there's one in rabbit_runtime_parameters:list/2.
Merged stable into default
Merged bug25846 into stable
Rename + cosmetic.
Simplify
stable to default
Merge bug 25836
Revivify stable
Better error message.
stable to default
Merge bug25861
Merged bug25842 into stable
userinfo is already decoded at both call sites.
Don't allow deletion of "amq.rabbitmq.*".
Non-Windows 32 bit platforms tend to only give you 2GB address space per process.
Make log and trace exchanges internal.
Remove use of gm:leave/1: it does almost nothing, master does not invoke it, and it's racy anyway.
Merge stable to default
Attempt to clean up actions when terminating a slave. Slave termination now never deletes a queue.
RabbitMQ 3.2.0
Table locking -> O(n)
Eliminate list_tx variants since async_dirty is ignored in a tx.
stable to default
Merge bug25845
Remove tab, ignore .tmp
merge stable into default
cosmetic
Use mnesia:async_dirty/1 to reduce copypasta.
Merged bug25838 into stable
Merged bug25838 into stable
Merged bug25838 into stable
We can get down_from_gm twice in a row, don't blow up if we do.
simplify
Use 580 seconds as default heartbeat interval
Merged bug25835 into stable
Merged bug25826 into stable
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Lower default heartbeat setting to 240 seconds
Ignore .tmp files
Merge in stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Merged default into stable
Fairly nasty copy-and-paste based approach to making this more transactional. (Again, this time branched from stable correctly.)
Merge bug25720.
Remove 55672 -> 15672 redirect.
Permit use of SSL options for LDAP client connections.
Write a very basic README that will hopefully point people in some vaguely useful directions.
Eliminate use of gen_server:call/2.
Eliminate use of gen_server:call/2.
Treat calls to gen_server:call/2 and gen_server2:call/2 as errors.
And wire the README into the RPM. The cp is sort of ugly, but I couldn't find a better way. Once again, this took far too long just to copy a damn file...
Provide our own readme. You do not want to know how long it took me to figure out how to do that.
Added tag rabbitmq_v3_2_0 for changeset 1aa531055489
Added tag rabbitmq_v3_2_0 for changeset e641998911b0
Added tag rabbitmq_v3_2_0 for changeset 9d483caea721
Added tag rabbitmq_v3_2_0 for changeset b8abc7beb833
Added tag rabbitmq_v3_2_0 for changeset ec491bf8b74f
Added tag rabbitmq_v3_2_0 for changeset fa9f9d77c195
Added tag rabbitmq_v3_2_0 for changeset 2d63a27784d4
Added tag rabbitmq_v3_2_0 for changeset bf755c9dcf3d
Added tag rabbitmq_v3_2_0 for changeset efdbb789ffbb
Added tag rabbitmq_v3_2_0 for changeset 8d01c9ab6910
Added tag rabbitmq_v3_2_0 for changeset 5e3a51657d92
Added tag rabbitmq_v3_2_0 for changeset 5e021f9d7589
Added tag rabbitmq_v3_2_0 for changeset f11b783681e3
Added tag rabbitmq_v3_2_0 for changeset bb40ba01b9f9
Added tag rabbitmq_v3_2_0 for changeset 30bd3eecad7e
Added tag rabbitmq_v3_2_0 for changeset fe99965b5c6b
Added tag rabbitmq_v3_2_0 for changeset 4003b87fefb4
Added tag rabbitmq_v3_2_0 for changeset b327b72a299d
Added tag rabbitmq_v3_2_0 for changeset 831b8d3f8f2d
Add changelog entries for 3.2.0
Use same disk free limit in sample config
Merge bug25778
API change
Get Erlang version format correct for RPMs.
merge bug25804 into default
Sync before rename, since the rename is not affected by the sync and doing it this way round means we can't expose the results of a half-written but renamed file by crashing after the rename but before the sync.
Merged stable into default
Merged bug25822 into stable
Oops
adds missing interceptor calls
remove unused function
cosmetic
Remove from the semi_durable table when removing an exchange even if the routes are not in the durable table. And rephrase a bit in remove_routes/1, it's RAM vs disc that we care about here.
Merged stable into default
Merged bug25820 into default
Merge bug25815
Remove calls to tests. May as well leave them there in case proton can be persuaded to not segfault.
Merge bug25809
stable to default
Fix hider.
passes intercept_method() to intercept function
Always check message expiry when queues start
merge bug25404
merge bug25404
merge bug25404
merge bug25404
Consistency
merge bug25804 into default
Reduce distance to default and number of unused variable warnings...
Merge default
A very stupid proton-c based test.
Partial transplant of 4743f33626ef (bug 25191) from rabbitmq-server (without anything about actually sending connection.blocked because - you know.
adds rabbit_channel_interceptor to rabbit_common
improves interceptor priority handling
adds channel interceptor
merge heads
start the queue collector ourselves
do not pass the queue collector to amqp_1.0 reader
Merged bug25554 into default
merge bug25682 into default
Cosmetic / finish rename.
...and remove the old API.
Use the new rabbit_heartbeat:start/6 API.
Fix auto-merge error.
Merge default
Move the reader over to the new rabbit_heartbeat:start/6 API
Move the reader over to the new rabbit_heartbeat:start/6 API
Introduce rabbit_heartbeat:start/6 API
Unify the intermediate supervision tree under r_connection_helper_sup
Merge bug25811
Hide "log out" button if it's not going to do anything.
Simplify and abstract a bit.
Remember how stupid JS is...
Detect if there's a userinfo section in the window href, and if there is, try to set up the ram auth cookie correctly so that we immediately auth straight through.
Defer starting a queue collector until we've received tune-ok
introduce another intermediate supervisor into the connection tree
Flush the writer under all circumstances when we are terminating.
merge bug25520 into default (again)
Merge bug25711
Revert change that broke tests on python 2.6.
Trailing whitespace
with_exit_handler/2 did not do what I thought it did.
Only catch "benign" errors.
Don't do flow control if we didn't ask for it, and a small refactor
copy over the test (default) config before executing the test cases
Strip unused function
Catch specific exception and assert explicit --config is present
erlang:apply is not necessary since the arguments are known
de-couple option setting from exception handling
Support only historical verify_fun signature
use just one naming convention for the test config files
Support config-supplied verify_fun in tuple-format
test for the 'default node in config' case
Inline next/1.
Merge default
Support a "federation-upstream" policy, and test it in the max_hops_test.
Improve command line option handling - submitted by Simon Lundström
That's redundant with the one from shared_validation/0.
Found some uses of the old "Connection" nomenclature hiding.
Merge pull request #10 from videlalvaro/master
Very minor correction
Merged bug25797 into default
brings exchange behaviour up to date
removes dead code
removes dead code
Flow control. Conveniently the amqp_channel already knows how to handle bump_credit due to its use in the direct client.
Introduce flow controlled versions of send_command() for the Erlang client to use.
Don't assume that calling basic.publish will explode, that only really worked by coincidence.
Send commands to the writer asynchronously.
Some optimisations: Precalculate the table representation of an upstream, and the safe form of a URI, rather than on every delivery. And only call amqp_channel:next_publish_seqno/1 if we are going to use the result.
Merge bug 24094
Merge bug 24094
Merge bug 24094
Merge bug 24094
Merge bug 24094
Revert part of f438760bff27 since the exception is now an IOException.
Merged bug25726 into default
May as well not throw the message away.
Allow use of credit flow (and hence amqp_channel:cast_flow()) when outside the broker.
Allow specifying node name when invoking "make run"
Read as much as possible in one go (cosmetically reworked version of patch by Jesper Louis Andersen).
Move up the publish_fields and show an example of using that to control where the message goes, that confused me for a moment...
oops
Merged stable into default
Merged bug25780 into stable
merge stable into default
merge bug25685 into stable
Return verbose message when refusing  to authenticate
Merge bug25789
Make sure processor dies, also when connections are short-lived
stable to default
Merge bug25794
Start asn1 before public_key to keep R16B01 happy
Merge bug25792
Inline get_used_fd_lsof() and don't call os:find_executable/1 any more, it's quite expensive. And maybe the command could fail for other reasons?
Merge bug20384
A couple more things that should be documented here.
I tried uncommenting everything and trying to use the resultant config file. Fix syntax errors thus found.
Further tweaks: section headings with underlining, correction of plugin name, wrapping, minor language tweaks, comment out the kernel config, reorder and break up LDAP
Merge heads (hopefully without breaking too much, that was horrible)
Add a load of missing LDAP configuration and documentation
Add section on sample retention policies
Cosmetic
explain implicit connect for stomp
Explain default user/pass settings more thoroughly
tidy/refactor ssl_cert_login_from
remove the file_handles_high_watermark setting
Move ssl_cert_login_from to the correct place and add further comments
Add Erlang mode for emacs. Change various listeners to use the default port. Alignment. Shorten and clarify the default_* config items. Try not to end non-sentences with a full stop. Try to be consistent about whether blocks of comments begin and end with "%%" by itself. Try to be consistent about not having a trailing comma on the last definition of each group. Rework LDAP.
Enforce DOC_INSTALL_DIR during install
Document the fake DOC_INSTALL_DIR in the rpm spec; additional config and documentation
Further tidying of the sample config docs, make DOC_INSTALL_DIR mandatory
merge stable into default
cosmetic(ish): remove superfluous module prefix
Since the rpm install the sample config magically, fool the build into using /tmp/ as DOC_INSTALL_DIR
Go back to explicitly installing into DOC_INSTALL_DIR during packaging
Tighten up the sample config a bit more
Explain the user of default accounts where appropriate
Explain the cluster_nodes config in a bit more detail and point to the auto-config documentation
minor refactor
inlining
Just one predicate.
Ahem2.
Ahem.
Merge heads
Shorten / simplify by abstracting over a duration-comparing predicate.
cosmetic
Normally we use "Mirrors" to mean masters + slaves, so let's be consistent here.
Merged bug25778 into default
Merged bug25778 into default
Merged bug25778 into default
Fix stupidity
Merged bug25770 into default
Genericise network messages
continued adventures in configuration file improvements; take out DOC_INSTALL_DIR for now
Report authentication failures by sending connection.close
Propagate Erlang client API change
Propagate Erlang client API change
Report authentication failures as returned by the broker
Propagate Erlang client API change
Slightly better comments.
Merge in default
Support connection_timeout in network URIs
Don't go through the legacy code path when not dealing with a legacy file; don't arbitrarily rewrite the disc nodes field of this file at startup.
node_type() should check the cluster status file rather than ask Mnesia - in the early stages of RAM node startup Mnesia might tell us we are a standalone disc node.
Turn off EJS caching when we first load a template since page refresh (but leave it on otherwise, lest we retrieve lots of templates every five seconds). Also don't use Req:get(raw_path) when serving static content, it doesn't remove the query string and so causes us to 404 if one is present.
Make the federation-management plugin sensible with respect to tags. It's reasonable to say the policymaker should be able to define policies for their vhosts, but then who should be able to monitor links? The monitoring tag. This means a bit of rearrangement of where the global params go, so that each page has just one role associated. Also filter out federation stati for inaccessible vhosts, for consistency with everything else.
Test params as well, try to be a bit more abstract, fix another bug.
Write a test, and fix bugs thus found. Also let's regularise semantics, and not let admins create policies for vhosts they haven't got permissions for. That makes policies a bit more like exchanges and queues.
API change
API change
Introduce new policymaker tag, and updates to web UI to support that (which involves rewriting half the menu code since it didn't really deal with anything other than admin vs non-admin).
provide a bit less info about advanced config, and link to web site
improve explanations of things and fix layout
cosmetic
merge heads
cosmetic: unconfuse emacs syntax highlighting
merge heads
relocate sample config on generic-unix/standalone
improve comments in sample config file
Merge bug25591
Tests need renaming too.
Rename a couple of modules that are exchange-specific.
Cosmetic to be closer to what's on default.
Don't restart the node, and add a comment explaining what's going on.
Merge bug25730
stable to default
Merge bug25744
Windows examples for curl using HTTP API
Only unregister client id when necessary
Dialyser points out that this branch can never happen; maybe_forget_sender/3 is always invoked with down_from_* as ChState.
Merge bug25749 (again)
...and again.
Unused variable
Merge bug25749 (again)
Oops, we completely broke HA there.
FAST_RATE based dynamic disk check interval.
Merge bug 25748 as part of bug 25749
do not pass MAN_DIR to the .spec after all
Merged bug25749 into default
Merged bug25749 into default
resolve merge conflicts
tweak handling of the doc install dir
Rearrange and simplify connection startup. It still seems reasonable to keep the concept of the start_infrastructure_fun around, that closure hides quite a lot of state. The other closure can go though.
Restart this branch with a forward-port of 6fe8447a4651 and 9006ab2b1fae, with args to amqp_channel_sup:start_writer() rearranged to be more consistent.
That "optimisation" is actually buggy since table_lookup/2 returns a 2-tuple on success. And by the time you correct for that you realise it's not even an optimisation any more.
Merged bug25276 into default
Version TTL and expiry messages, and ignore the wrong ones. Also stop timers and then start them again when re-initing.
Merge in default
merge stable into default
merge bug25757 into stable
cosmetic: remove unnecessary FQ call
Merged stable into default
Merged bug25745 into stable
Oops
Remove the warning message, it's not very interesting. Also fix an unused variable.
More consistent naming.
Merge pull request #5 from mweibel/validate-binding-fix
Built-in help for the new policies.
Expires cannot be 0.
Allow use of the new policies.
Merge in bug25748
Fix removal of DLX policy
Explain a little.
Merge in default
Introduce a new return code for this case, since {new, Q} is going to mess up recovery by claiming we recovered something we didn't. Also {existing, Q} would make the channel enter an infinite loop, and {absent, Q} would return an AMQP NOT_FOUND which might be bewildering to the client if it managed to receive it. So we need a fourth possibility.
Reply with something the channel is going to know how to handle.
merge stable into default
correct erroneous comment
merge stable into default
correctly prettify exclusive owner dissappearance warning WRONG: Queue "queue 'amq.gen-FQZtyp6mpRdmm3-on_LAOQ' in vhost 'urhyfncz'" exclusive owner went away RIGHT: exclusive owner for queue 'amq.gen-FQZtyp6mpRdmm3-on_LAOQ' in vhost 'urhyfncz' went away
Fix missing validate_binding for RMQ 3.1.0
Hook TTL / max length / expiry into policy system.
Deal better with axes for charts with very small max values; it's not great to show [0, 0.5, 1.0, 1.5] msgs but it's better than [0, 1, 1, 2].
Reduce the default disk free limit to 50MB.
Merge bug 25747
Merge bug 25747
Hide internal-purpose exchange types, and de-emphasise internal-purpose exchanges and queues.
Add internal-purpose so we declare what these are for.
Merge in default
Merge in default
Merged bug25553 into default
Merged bug25553 into default
Merged bug25553 into default
Merged bug25553 into default
Don't page when the disk alarm has gone off.
Merge default
Merge bug25692
Oops, forgot to propagate API change to web-stomp.
stable to default
Merge bug25743
Ignore connection string lookup failures
Small tweak to the built in help.
Oops
Dead lettering by policy.
Oops
API change
Reinstate optimisations, plus a bit of abstraction. This entails an API change in the return type of rabbit_policy:get/2.
If we fail to start a second broker, let's say why
Configure AE by policy.
Merge in default.
Uh, post bug 25707 that test makes no sense, and fails frequently.
Take GM's view of the live members each time we have a death message; don't assume the master will always be able to write updates to Mnesia.
More diagnosible connection string lookup failures
add missing type export this somehow got lost in bug 23958
Merge bug25692
reduce distance to default
Changes and renaming
Check suitabilitiy of the upstream and fail if we don't find what we want.
Announce consumer priorities.
Merge bug25733
Use mochiweb instead of edoc for quoting. Adds another plugin dependency, but means we don't use a part of OTP that is unused elsewhere - important for the standalone release!
fix install task for standalone packages
Relax headers type constraints
tweak the location of the sample config file on windows
Spacing
Prevent possible deadlock because children call parents
Merged bug25725 into default
Merged bug25725 into default
Log reason for restart
Solve startup conflict between nodes by restarting slave runtime
Merge in bug25725.
Comment out all options and simplify
Merge bug25724.
Don't attempt to define a default LDAP server that will likely be confusing.
Add consumer arguments to mgmt.
Add consumer arguments to events and rabbitmqctl.
Consume arguments validation.
Transplant consumer priorities from bug 25553.
Merge default
Events renamed.
Rename notification_requested to refresh, and emit queue_empty rather than queue_run_finished - we don't care if the queue run has finished and we are not empty, but we *do* care if we have become empty by some other method (purge, TTL).
Notify "startup" when we fail over too, that means the federation links will fail over with us.
Slightly clearer?
Merged stable into default
Merged bug25707 into stable
Merged bug25716 into default
Small changes: Don't reevaluate consumer priority on every delivery, refactor a touch, realign, fix test, more specific spec.
A bit more explanation.
Tighter and slightly more self-documenting.
Push everything through notify_decorators/3.
That comment was removed from rabbit_mgmt_app two years ago, so let's reinstate it here and explain what on earth we are doing.
Merged bug25719 into default
additional comments in the sample config file
Merged bug25697
merge stable into default
merge bug25721 into stable
banish side effect dependent code
fix spec
Fix copyrights
Prevent exclusive queues from being durable or mirrored.
updated README to point to /mqtt.html
Merge bug25602
merge bug25714 into default
Remove support for running with the old mgmt DB: it's bloat, and it depends on ensuring the old DB supports the same set of gen_server call / cast messages as the new one. And we only introduced it in case there was a crisis with the new DB and we had to give people the ability to go back to the old one. I think the new DB is now battle-hardened enough.
Why are we doing this again?
Convert to MFA.
refactor: make proper use of gb_sets API
Use gb_sets rather than sets for performance.
cosmetics, better var names, and optimise 'DOWN' sending
we don't really support demonitor/2, so rip it out due to the aggregration of all monitors of a single pid into a single monitor, the semantics of demonitor/2 is decidely dodgy
we only support process monitoring, so enforce that in the API
stable to default
Fix dumb typo that had been there since bug 24826.
"und,efi,ned" is not how you display undefined with fmt_num_thousands().
ahem
Simpler to maintain MonitoredPid -> {Ref, MonitoringPidSet}.
Merge default
Merge default
Make delete and unbind idempotent.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Changelog for 3.1.5
Added tag rabbitmq_v3_1_5 for changeset a3a4d84cc09a
Added tag rabbitmq_v3_1_5 for changeset b4745df9f571
Added tag rabbitmq_v3_1_5 for changeset f81c71dcbb4b
Added tag rabbitmq_v3_1_5 for changeset 3d1afafbf8dd
Added tag rabbitmq_v3_1_5 for changeset e4d4e403214b
Added tag rabbitmq_v3_1_5 for changeset 2ddd4538a0b6
Added tag rabbitmq_v3_1_5 for changeset 381281911594
Added tag rabbitmq_v3_1_5 for changeset 0aa02d3ccd2a
Added tag rabbitmq_v3_1_5 for changeset af27cef6cb5a
Added tag rabbitmq_v3_1_5 for changeset dbb030e1114c
Added tag rabbitmq_v3_1_5 for changeset df096e9d4a5e
Added tag rabbitmq_v3_1_5 for changeset a4f7df84cf04
Added tag rabbitmq_v3_1_5 for changeset 130a8e82c819
Added tag rabbitmq_v3_1_5 for changeset 105c97bef521
Added tag rabbitmq_v3_1_5 for changeset b91b496cb7db
Added tag rabbitmq_v3_1_5 for changeset 8744d0254df7
Added tag rabbitmq_v3_1_5 for changeset a5217b38290e
Added tag rabbitmq_v3_1_5 for changeset 31efa422585d
Added tag rabbitmq_v3_1_5 for changeset 6504d305d9a9
Explain what this is.
Store monitors correctly, with a two level dictionary, mapping MonitoredPid -> MonitoringPid -> Ref and MonitoredPid -> Ref -> MonitoringPid.
Revert b2db7048b839 (which in turn mostly reverted dd08c9204760), i.e. return to the broken bug25644 implementation.
Stable to default
Merged bug25713 into stable
Correct boolean expression parsing to allow for multiple NOT
Revert dd08c9204760
Merged bug25479 into default
Extend floating point syntax some more to allow numbers like "21."
Extend floating point syntax to allow decimal digits before f|F|d|D terminator
Merged bug25572 into default
Merged bug25572 into default
Keepin it real
Fix SQL grammar error that doesn't parse '--<expression>' correctly
stable to default
Merge bug25710
Silence the badarg on two near-simultaneous pauses.
Remove unnecessary optional signs on floating point number lexical scanning.
Ahem
Cope with apply-to in definitions export
Slightly simplify the lexical scanner.
Remove 3-tuple variants of 'and' and 'or'.
Fix inadvertent match of Args. That's what you get for only running the test suite.
Add scanner unit tests.
Simplify parser grammar, and remove comparison atom names.
Merge bug25699
Whitespace / distance from default.
Document the API
Man page updates
So it turns out that the policy tests fail, since we now depend on rabbit_misc:parse_arguments() to fill in defaults for us. But that's not at all unreasonable I think, and in fact rabbit_tests:control_action() does some rather odd things around options. Rather than rewrite everything, just introduce a new variant that is rather closer to what rabbitmqctl actually does, and use that for policy tests. Oh, and add some more tests, that's always good.
merge bug25704 into default
refactor: better name for function application plus lose the type check; we are not that paranoid.
Add support for setting apply-to via rabbitmqctl. Switch to using option for priority rather than optional positional argument, with two options now that approach was starting to look confusing.
Rename and remove duplicate credit handing on peer down
Just don't delete the upstream queue, ever. That's easier to reason about.
tighter specs
Remove delegate beam compatibility check; we don't need that any more.
Use MFA for call and cast, hence avoid sending closures across the network.
Support MFA in delegate:invoke/2 and friends.
Update port in README
Disable heartbeats in both directions
add Temporary Queues example
Boolean logic, and some other small enhancements: an {equals, A, B} query which just compares strings for equality, and a shortcut ability to use a string constant "foo" instead of {string, "foo"}.
stable to default
Merge bug25703
Cope better with missing attributes.
Merged bug25677 into default
Update stomp.js to support messages from implicit subscriptions
Merged stable into default
Merged bug25700 into stable
emacs-mode for config.
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Added tag rabbitmq_v3_1_4 for changeset 75a274de03a9
Added tag rabbitmq_v3_1_4 for changeset dcf93d2e9b4e
Added tag rabbitmq_v3_1_4 for changeset 8a458b917321
Added tag rabbitmq_v3_1_4 for changeset 6839d9144428
Added tag rabbitmq_v3_1_4 for changeset f41bc9895cf1
Added tag rabbitmq_v3_1_4 for changeset b673be1fe125
Added tag rabbitmq_v3_1_4 for changeset b1d1e6c3961b
Added tag rabbitmq_v3_1_4 for changeset d3d54206f35e
Added tag rabbitmq_v3_1_4 for changeset 920d028d3938
Added tag rabbitmq_v3_1_4 for changeset 725e87b73c32
Added tag rabbitmq_v3_1_4 for changeset 81d5069caee1
Added tag rabbitmq_v3_1_4 for changeset 134da2784c5a
Added tag rabbitmq_v3_1_4 for changeset a90394f0125a
Added tag rabbitmq_v3_1_4 for changeset 302e4e22f058
Added tag rabbitmq_v3_1_4 for changeset 8f3d7b0c78ae
Added tag rabbitmq_v3_1_4 for changeset 111bee0da91f
Added tag rabbitmq_v3_1_4 for changeset 317f5fd2a309
Added tag rabbitmq_v3_1_4 for changeset d5f62efd114d
Added tag rabbitmq_v3_1_4 for changeset f0c729980bc9
await_cluster_recovery/0 should return ok.
stable to default
Merge bug25689 (again)
Fix embarassment perpetrated in 97f0e3842c04.
Delay clearing of state in slaves
Merge bug25191
Merge bug25191
Merge bug25191
merge stable into default
merge bug25686 into stable
refactor type spec
simplify
remove unused function
basic.cancel{nowait=true} soon will require a default consumer, so let's do that.
Require default consumer for cancel nowait.
Merge in default
stable to default (no-op)
Merge bug25538 into stable (second time, unpick of bug 25677
merge stable into default
refactor: rpc:call already optimises calls to local nodes plus get rid of an unnecessary 'case'.
Gross stupidity.
Show apply-to in rabbitmqctl list_policies.
"all" is clearer than "both".
stable to default (someone forgot)
stable to default (someone forgot)
Adjust s3 repository addresses.
stable to default
Merge bug25617
Merged bug25691 into stable
Merged bug25677 into stable
Reevaluate reified policies on upgrade.
Type checks for alternative exchanges in the same way as DLX
Transplant of bug25617 to stable
stable to default
Merge bug25594
Better error message for DLX type error
stable to default
Merge bug25693
stable to default
Merge bug25693
stable to default
Merge bug25693
Remove a confusing log line left from an old QoS test
Untabify
Merge default into bug25191
take advantage of better boot step error handling
boot steps should return 'ok'
handle errors returned by boot steps
add/remove log handler at precise point in system lifecycle Previously the handler stuck around for too long in the event of failed startup, resulting in spurious errors.
add helper process for lifecycle hooks
Check dlx type while checking permissions
stable to default
Merge bug25689
stable to default
Merge bug25689
Integrate win32_cmd/1 into rabbit_misc:os_cmd/1, so that we have just one function we can always use instead of os:cmd/1.
Integrate win32_cmd/1 into rabbit_misc:os_cmd/1, so that we have just one function we can always use instead of os:cmd/1.
Check DLX permissions on queue declare
Swap connect and setting callback
Minimise distance from stable
Do not corrupt state on server-sent basic.cancel.
Distinguish between server-sent and client-sent basic.cancels.
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged stable into default
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Merged bug25538 into stable
Update copyright on added module
Refresh branch from stable
Add space for clink os cmds separately
Format windows shell commands
Merged bug25675 into default
Remove redundancy.
Merged stable into default
Merged bug25677 into stable
Merge default
Merge default
Pick an apply-to value heuristically.
stable to default
Correct documentation on sample parameters.
Merged stable into default
Merged bug25687 into stable
Merged stable into default
Merged bug25687 into stable
Convert Event set / clear to Alert true / false since that's how it is everywhere else. Further simplify. Remove a no longer true comment.
Inlining and cosmetic.
Untabify
Work around Clink shell issue
stable to default
Merge bug 25688
Don't reject connection.secure, and add an implementation of cr-demo for (manual) testing.
Merge bug25617
* Test consume / cancel / consume. * Merge the two receives to get rid of a rather dubious "after 0".
New webmachine logging API.
Changes for new webmachine logging: simplify setup() since apps can now just call webmachine_log:add_handler/2 and tweak various logging APIs.
Merge heads of default
stable to default
Merge heads of stable
stable to default
Merge bug25670
merge stable into default
stable to default
merge bug25651 into stable
Merge bug25668
cosmetic
merge stable into default
merge bug25651 into stable
Merge bug25577
merge stable into default
placate dialyzer
Automatically subscribe when connecting
Backout 3b5a3e3d2feb
Re-order
Avoid use of 'file' module in rabbit_file
Minor cleanup and don't conflate two different errors together.
Damn, we can't always update our state on basic.cancel or when we receive the cancel-ok we won't know what to do with it!
Invoke the cancel callback whenever we send a basic.cancel as well as when we receive one. This means the selective consumer will always tidy up its state in handle_cancel/2 and therefore does not need to do so in handle_cancel_ok/3.
Merged bug25676 into default
Write file using rename
More symmetry; notify on basic consume and consumer unblock as well as basic.cancel and consumer block.
Slightly clearer names?
Don't emit random bits of the queue's internal data structures in events.
API changes.
Add new behaviour here.
Merged stable into default
Merged bug25644 into stable
Support system messages in heartbeater.
Oops, missed one.
Merged stable into default
Merged bug24803 into stable
Wire in support for system messages.
Show x-axis time values in local timezone not UTC.
Upgrade to Flot 0.8.1. This requires us to explicitly load timeseries support now as it has become a plugin.
Merge stable
Make monitoring via delegates async. This has the downside that you can't monitor the same pid more than once from the same process, but that is enforced by pmon anyway which is the only client of this code. The upside is that cross-cluster basic.get doesn't deadlock...
Rename #throttle.conserve_resources to .alarmed_by
introduces ssl_apps as a env parameter
merge stable into default
merge bug25674 into stable
add amqp_rpc_{client,server}:start_link functions
API change: wrq:path_info/1 now returns an orddict.
stable to default
Merge bug 25671
Remove redundant accumulation field in scan.
Refactor dictionary scan to make it more readable. Fix warnings.
Checking gm_pids is a better way of filtering out HA queues
Don't roll over to a lower GM view version than we have ourselves
Slaves detect stale master pids on startup
Merge branch '#53393231-multiple-queues'
Add test for multiple queues on jms-queue policy selector exchanges. Refactor test functions.
Merge branch '#53393051-extend-plugin'
Implement topic and queue selection policy types on the selection exchange.
Merged stable into default
Merged bug25584 into stable
Add version.mk, avoid sed when building srcdist, allow VERSION to be provided
Add some trivial unit tests
Add some trivial unit tests
Merged bug25598 into default
ensure that srcdist inserts the correct version into the bundled makefile
Update to new queue decorator API, and thus re-enable a disabled test.
Extend queue decorator interface, break dependency of server on federation. This is still a bit ugly, bits of queue state leak out in the events at the moment, and events are still exactly those needed by federation rather than a carefully thought out set. But it works.
Start of queue decorators.
Start of queue decorators.
Limit this connection.blocked test to network connections
Merged stable into default
Merged bug25659 into stable
Correct connection.blocked test to use set/clear alarm
Print where test output is redirected
List connection.blocked in server capabilities
Merge default
Merge in default
API change.
More sensible API for partitions, do not return errors.
Get amqqueu_process to montor via delegate too, tighten delegate specs, simplify pmon parameterisation.
Merged stable into default
Merged bug25648 into stable
Remove reference to RabbitMQ version in build. Add selector integration test (in-broker). Augment exchange plugin callbacks for RabbitMQ [3.1.1, oo).
Revert changes to the registry key "HKLM\Software\VMware, Inc.\RabbitMQ Server", which we want to keep constant.
bundle the sample config up in the broker directory on windows
merge stable into default
merge stable into default
merge bug25631 into stable
merge bug25631 into stable
Ensure that after we have done forget_cluster_node --offline we will boot the next time.
fix missing newline handling in generic-unix packaging
pass DOC_INSTALL_DIR during generic-unix packaging/install
Make join_cluster idempotent.
re-instate the MAN_DIR variable on install
Warning.
Remove the constraint that forget_cluster_node --offline requires the second-to-last node to be up.
It does the same job, but it is a different thing.
Stick in yet another supervisor to get shutdown happening in the right order.
Guard aganist the case where a delegate-executed function does some monitoring.
stable to default
Merge bug25625
Make the delegate monitoring API a drop in replacement for the built in one, and thus parameterise pmon and remove dmon.
Further refactoring
API change.
Refactor
stable to default
Merge bug 25649
Cosmetic
Correction and contraction
Switch to using prefetch rather than credit, that way we don't have to freeze the basic.credit methods. This has some minor implications:
Ensure that if we fail over / reconfigure federation while running, we ask the qproc to remoind us what our running state is.
Ensure that if we fail over / reconfigure federation while running, we ask the qproc to remoind us what our running state is.
Declare the upstream queue.
More consistent and correct nomenclature.
Add hipe modules
install sample config manually on debian
Meh
TODO--: more consistent and correct nomenclature.
TODO--: use the "prefetch count" from the upstream to control how much credit we issue.
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
s/VMware/GoPivotal/g
More thousands
Merge default
More thousands
Merge in default
Rephrase
Fix various bugs in status updates, tests now pass again.
Oops
Merged bug25597 into default
Merged stable into default
Merged bug25645 into stable
Merged bug25616 into default
Move hipe modules list from macro to environment variable
Ignore missing modules when performing HiPE compilation
Optimisation for handling discarded deliveries
Add connection.blocked to client capabilities
Add a (simple) restart test and also test status (although that part fails right now).
Update all copyright statements to GoPivotal, Inc.
Remove ancient test that could not possibly pass (no longer using memsup or channel.flow). It wasn't hooked in anywhere, but is misleading.
stable to default
Merge bug25624
Stem leak when master deals with discarded messages
BQ:is_empty/1.
Recreate that assertion up one level in the call stack, since the callers may still care about it even though VQ itself does not.
Remove unneeded assertion.
TODO-- yes it could be faster.
Oops
Use consumer priority.
Convert the x-purpose hack into a bit less of a hack: consumer priorities.
Oops
Introduce amqp_connection:register_blocked_handler
Do the monitoring on the correct node(!) and remove all that nonsense about node-wide monitoring.
Added tag rabbitmq_v3_1_3 for changeset 16e0ec3eae09
Added tag rabbitmq_v3_1_3 for changeset d61b25171094
Added tag rabbitmq_v3_1_3 for changeset d69cf40bd5ce
Added tag rabbitmq_v3_1_3 for changeset 28d440117610
Added tag rabbitmq_v3_1_3 for changeset ac065393acbb
Added tag rabbitmq_v3_1_3 for changeset 3f42de2b6bbf
Added tag rabbitmq_v3_1_3 for changeset 8dc0bb4560d2
Added tag rabbitmq_v3_1_3 for changeset 5476ef30ae2c
Added tag rabbitmq_v3_1_3 for changeset bd0eb57449ea
Added tag rabbitmq_v3_1_3 for changeset cf8552081e5c
Added tag rabbitmq_v3_1_3 for changeset 067abc73912e
Added tag rabbitmq_v3_1_3 for changeset b7ebc87291ba
Added tag rabbitmq_v3_1_3 for changeset a2d6d88427a1
Added tag rabbitmq_v3_1_3 for changeset 9148b63e64c8
Added tag rabbitmq_v3_1_3 for changeset 086765b51ace
Added tag rabbitmq_v3_1_3 for changeset 53af88887097
Added tag rabbitmq_v3_1_3 for changeset 61f37992c54b
Added tag rabbitmq_v3_1_3 for changeset f0ba00e994ba
Added tag rabbitmq_v3_1_3 for changeset 689d2eeac2c3
update package changelogs for 3.1.3
Discard previously-discarded messages correctly
A bit more faff, to deal with genuinely dying nodes.
Delegate monitoring, with a fairly glaring hole.
merge stable into default
merge bug25643 into stable
Improve tests. Fix some defects in the tests where we assume everything happens at time 0, modify the emission of fine stats so we emit them all in one go for a single channel (like real channels do) and add a test where things happen at different times. This fails against stable, and passes on this branch.
move sample config into docs, set as %doc for rpms
Pull deletion of old fine stats up another level.
Merge in default
Most of policy apply-to.
Most of policy apply-to.
Deliver all alart notification to handle overlapping alarms
Ignore *.orig files
Added tag rabbitmq_v3_1_2 for changeset bd3040292e1c
Added tag rabbitmq_v3_1_2 for changeset ba20f1126561
Added tag rabbitmq_v3_1_2 for changeset 94e83d54dbb0
Added tag rabbitmq_v3_1_2 for changeset a9e5a749d5d3
Added tag rabbitmq_v3_1_2 for changeset 1b77c95b245d
Added tag rabbitmq_v3_1_2 for changeset ebec6682610e
Added tag rabbitmq_v3_1_2 for changeset 351b73d637e6
Added tag rabbitmq_v3_1_2 for changeset e62fc30d2ef4
Added tag rabbitmq_v3_1_2 for changeset 718b0e9ea6b3
Added tag rabbitmq_v3_1_2 for changeset ce4ab29deac7
Added tag rabbitmq_v3_1_2 for changeset 36612766a46f
Added tag rabbitmq_v3_1_2 for changeset c089fdb9487d
Added tag rabbitmq_v3_1_2 for changeset 106c67996d2d
Added tag rabbitmq_v3_1_2 for changeset 29bab24a6eaf
Added tag rabbitmq_v3_1_2 for changeset 4a600ec02a76
Added tag rabbitmq_v3_1_2 for changeset 67f72ca07232
Added tag rabbitmq_v3_1_2 for changeset 9402f79487ed
Added tag rabbitmq_v3_1_2 for changeset 0905ecfd2ec6
Added tag rabbitmq_v3_1_2 for changeset 2011cce456c0
Updated changelogs for 3.1.2
Merge bug25641
Allow enabling / disabling tracing via the HTTP API.
stable to default
Merge bug25640
prevent invalid state transition from 'dormant' to 'active' w/o registration
stable to default
Make it clearer what I meant.
Merged stable into default
Merged bug25638 into stable
Merged stable into default
Merged bug25615 into stable
Unbreak SSL tests, broken in bug 25002.
Add a TODO for if we are ever unbusy enough to look at removing this code.
Don't persist gm_pids; by definition when all we have is the rabbit_durable_queue record the cluster has gone down completely so there can't be any pids. Fixes gm_pids leak. Since we're here, fix a similar but less severe leak in sync_slave_pids. (Less severe because rabbit_mirror_queue_misc:store_updated_slaves/1 has the effect of cleaning it up periodically. But it's still wrong.)
Use lists:keymember here
Correctly determine duplicate alarms when alarm is cleared
merge stable into default
Merge bug25636 into stable
Start asn1 too.
Don't log duplicate alarm warnings
Umm, be less than 100% wrong.
Do not "recover" queues if there is already a rabbit_queue record for them. If we are restarting quickly it could be the case that we have a slave alive that has not failed over yet. Don't usurp it.
Make sure the list of alarm resources is unique
merge stable into default
merge bug25629 into stable
Attempt to explain a bit more.
merge stable into default
merge bug25632 into stable
fix channel 0 exit handling
Move the deletion of old fine stats to make it clearer that we only do this on channel close.
Delete all old fine stats for a given channel when that channel issues us some more stats, don't have channel-lifetime level leaks.
Merge branch '#50369741-open-source-licenses'
Set approved version 1.1 open_source_licenses.txt file.
Make sure set_alarm is idempotent
Don't stomp on aggregated_stats_index entries.
Don't crash when an alarm is cleared when there's nothing to clear
Merge default into bug25191
Oops, I forgot that going back to vm_memory_monitor:get_memory_limit() means we can now have a limit of 0.0.
Oops
stable to default
Merge bug25612
Matthias convinced me to go with ratio-of-a-ratio.
Put sample config in the broker repository root
Eliminate ?MEMORY_LIMIT_SCALING and make the ratio at which we page configurable. Note that I have changed the representation from a ratio-of-a-ratio to just a plain ratio (i.e. propertion of total memory, not proportion of the high watermark). I believe this will be easier to understand. Hence also the name vm_memory_paging_watermark, chosen by analogy with vm_memory_high_watermark.
merge stable into default
cosmetic: state the not-immediatly-obvious
stable to default
Merge bug25611
Throw the key too. And if the server side still fails try to fail with more information.
rabbit_node_monitor should depend on rabbit_alarm
Improve formatting of y-axis numbers (limit to two ticks when showing 0-1, and shorten the numbers using SI suffixes). And stick "," in for thousands for non-chart numbers.
merge default into bug25191
Merge branch default into bug25191
Check value when clients update flying_ets
merge stable into default
unbreak edoc
merge stable into default
merge stable into default
merge bug25600 into stable
merge bug25600 into stable
stable to default
Merge bug 25521
Strip extraneous comment
stable to default
Merge bug25599
Merge branch '#51640045'
Allow periods in identifier names and add test to check for this.
Adjust comment location
Comments, gen_server-like termination reason and less unnecessary delete guarding
Cosmetic
stable -> default
Merge bug 25489
Cosmetic
Merge bug 25606 into bug 25600.
Refactor
Update headers when message forwarded.
Fix bugs.
Share ack/nack/deliver code with exchange links.
Oops, unbreak tests
"This can be removed after 3.1.0 is released." -- well, let's do that then.
Also delete all consumers when a channel goes down.
Merged bug25581
Emit consumer_deleted from the channel when we see a consumer go down, to cover the case where an HA queue master dies and is thus not able to emit the consumer_deleted itself. This means we can emit consumer_deleted twice in some circumstances I think, but that should be fine.
Further further adventures in vertical alignment.
Further adventures in vertical alignment.
Delete all consumers when a queue goes down.
Change representation of consumers to a) add the ctag to the key so we can cope when the same channel consumes the same queue more than once and b) do not table scan when looking up consumers for a channel.
stable to default / resurrect default
Cosmetic / resurrect stable
merge bug25604 into default
merge bug25604 into default
Omit emitting stats for non-existent queues on termination
Use the negotiated frame-max when opening channels
Remove a vestigial event handler (this has not matched anything since bug 23625 switched to IDing queues by PID in the mgmt DB).
Remove some vestigial events.
stable to default
Merge heads of stable
Merge bug25588
Simplify (and don't bother parsing to integer only to convert back).
Display pretty missing exclusive owner log message
Clear exclusive durable queues on boot
merge bug25601 into default
Reduce obsession with vertical alignment above all sanity.
Tweak
Report on lengths for queues and data rates for connections in a more timely fashion; we don't need our usual conservatism here since there is no drop-at-the-end problem.
Report on a couple of the interesting bits of backing_queue_status.
Remove redundant workaround.
Updates for federated queues.
Start to abstract the common code from rabbit_federation_link to rabbit_federation_link_util and get rabbit_federation_queue_link to use it too. Thus far: connection setup and shut down. And by extension support status reporting for queue links.
Merged stable into default
allows log the per-msg-ttl if it is present
Merged stable into default
Merged bug25576 into stable
Cosmetic.
do not attempt to parse expiration from missing properties
merge stable into default
merge bug25573 into stable
add original expiration to x-death headers on per-message-ttl expiry
merge stable into default
stable to default
Merge bug25592
Use that list of valid vhosts we just carefully created.
merge bug25567 into stable
Merge bug25566
A bunch more tests, and a (temporary) fix thus discovered.
Disable this test until we are much further along.
Allow specifying a different queue name for the upstream, remove use of a fake exchange, start to write tests, remember to sepcify drain.
Remove expiration property from dead lettered messages
Probably easier just to fix than document in fact.
Don't just ignore a policy changing. And note the existence of a clustering bug.
Move everything out to a proper supervision hierarchy. Trigger queue federation by policy rather than hard coding.
Inform fed queues of policy change and termination, and abstract startup a bit more.
Merge in default
fix types (transplanted from eec14a745dd738a98cfb83e86a2b077d4280e314)
fix types
cosmetic(ish): tighter signature for rabbit_direct:connect
refactor: replace <module>:F with funs the former is evil
merge stable into default using the previous head of default and preserving tags
merge stable into default
merge bug25571 into stable
merge stable into default
merge bug25571 into stable
merge stable into default
merge bug25571 into stable
tolerate timeouts
non-blocking application version retrieval this can fail - if the app is unknown - but so could the previous version
graceful handling of application:which_applications() timeout
Attempt to deal with missing segment file.
merge heads (stable)
merge heads
Merged bug25580 into stable
Merged stable into default
Mergd bug25580 into stable
merge stable into default
merge stable into default
merge stable into default
merge stable into default
merge bug25571 into stable
merge bug25571 into stable
merge bug25571 into stable
merge bug25571 into stable
Remove mochiweb warning.
Use os:timestamp/0
Rewrite a frankly slightly dubious TODO
Change version dependencies for the RPM and deb files. And for the Windows installer in case any Windows user is crazy enough to be running R12.
Don't use andalso here, it breaks LDAP when compiled under R12.
Added tag rabbitmq_v3_1_1 for changeset 102630f8465d
merge stable into default
set up parameters and policies before resources So we can apply the right policies on resource creation, rather than creating a whole bunch of resources with the "wrong" policies and then changing to the right policy.
document auth_mechanism query param in amqp URIs
Apply definitions in the correct order, and test more thoroughly.
Add unrelativise/2 and clean up tests a bit.
cosmetic
stable to default
Merge bug25575
Just in case this times out, let's not explode.
Dehydrate prospective betas on requeue
Test to trigger VQ assertion failure (ram msgs =< len)
Merged bug25564 into stable
Allow unescaped colons in header values
cope with empty rabbit_serial file
merge stable into default
Added tag rabbitmq_v3_1_1 for changeset 37858d51cf99
Removed tag TAG=rabbitmq_v3_1_1
Added tag TAG=rabbitmq_v3_1_1 for changeset d5b2b16c71e8
simplify error logging
Look for the rabbit process, not the rabbit application.
Replace deadlockable call to which_applications/1 with checking for a named process instead; much cleaner.
No infinity timeout, we could deadlock with the application controller on shutdown.
No infinity timeout, we could deadlock with the application controller on shutdown.
No infinity timeout, we could deadlock with the application controller on shutdown.
If we have local active consumers, ignore federated ones.
Make sure we update the federation state when a consumer becomes inactive or is cancelled.
Try to do something vaguely sensible for basic.get.
Tell the federated queue about basic.get.
Represent not_started state better.
Rename this
Supervise the queue links properly, and shift some nomenclature to be a bit more like that of exchange federation.
Set purpose, handle another hack on top of a hack.
Distinguish between federated consumers and others.
Further fix to the workaround.
Better error message than 'as_user_no_password'.
Hack around 'go' arriving before we have started, and use same upstream name.
Only consume if we are empty.
Fix non-temp reply queues, and add a test.
Set release 1.1.0-SNAPSHOT
Added tag rabbitmq_v3_1_1 for changeset 4f3fe2493979
Added tag rabbitmq_v3_1_1 for changeset e895b8fdd88d
Added tag rabbitmq_v3_1_1 for changeset cfbba1d6577f
Added tag rabbitmq_v3_1_1 for changeset be08e17a6d9d
Added tag rabbitmq_v3_1_1 for changeset e10f725d1805
Added tag rabbitmq_v3_1_1 for changeset 1ced985eb414
Added tag rabbitmq_v3_1_1 for changeset b21fb73a4be4
Added tag rabbitmq_v3_1_1 for changeset 443989332f07
Added tag rabbitmq_v3_1_1 for changeset f214593b158e
Added tag rabbitmq_v3_1_1 for changeset 567f2a179e29
Added tag rabbitmq_v3_1_1 for changeset abea7f5ded69
Added tag rabbitmq_v3_1_1 for changeset b981dcb4b9cd
Added tag rabbitmq_v3_1_1 for changeset bbc833036963
Added tag rabbitmq_v3_1_1 for changeset 9b8ac495d1e8
Added tag rabbitmq_v3_1_1 for changeset 87cffccd5bd9
Added tag rabbitmq_v3_1_1 for changeset d6ca51035506
Added tag rabbitmq_v3_1_1 for changeset 6b38bfb06773
update changelogs for 3.1.1
Merge bug25563
No, that broke upgrades on RAM nodes. Third time's the charm...
Only wait for tables once local upgrades are over, not mnesia ones.
This may be the last Mnesia restart before we boot, so let's make sure the tables are there.
Merge bug 25562.
rabbit_stomp_processor is used from web-stomp too, don't assume which application we are.
merge (default) heads
merge stable into default
merge heads
merge stable into default
merge bug25560 into stable
Minor grammar updates to README
merge stable into default
merge bug25561 into stable
space--
Ignore autoheal requests if we are already autohealing.
Remove obsolete and wrong comment.
Pass through tx'ed acks and rejects in the correct order.
Merged bug25063
merge stable into default
merge bug25537 into stable
merge stable into default
merge bug25543 into stable
Quick and dirty riff on the theme of federated queues.
Quick and dirty hooks for federated queues.
TODO--
Slight refactor
Merge bug 25539
Merge bug 25539
Merge stable into default
Merge bug25555 into stable
stable to default
Add a bit more explicitness to e2e bindings.
default vhost
Alternative implementation for vhost
Remove "not supported" warning, and refer to list not array since that's what's in the UI.
stable to default
Merge (rather late) bug 25406.
Merge bug25390
Implement feedback
Tighten up HA policy validation.
Update collapse_multifields() for recursive multifields.
Cope with trailing zeroes in journal and segment files
Start of recursive-multifield thing. Matthias jokes that this is a JSON editor. Hmm. Nearly.
merge stable into default
merge bug25536 into stable
merge stable into default
merge bug25546 into stable
merge bug25546 into default
Stable into default
Merged bug25548 int stable
Move the ignore of '_'.
TODO++
Merged stable into default
Introduce a magic querystring based auth variable, instead of the HTTP authorisation header, for downloading definitions (since we cannot write the HTTP header in with anything the browser gives us).
Merged stable into default
Merged bug25545 into stable
stable to default
Merge bug25549
merge bug25543 into default
merge default into bug25543
merge bug25537 into default
merge default into bug25537
Merged bug25542 into stable
Clear queue expiry timer ref when fired
Refactor shovel_sup for better clarify
Refactor.
Validate on list
Validate on clear.
Wrap the update in rabbit_vhost:with/2, so we error meaningfully if the vhost in question does not exist.
Allow x-match header to be missing.
Treat missing / garbled x-match header as "all", like we used to.
Remove assertion; it's not always correct if prefetch has been set before. Instead, only set the volume when we have not set prefetch before.
merge bug23958 into default
remove R13-ism imported from upstream
Extract explanatory function
Use the calculated reconnect delay to determine worker restart policy
Don't return message_stats if it's empty; similar to what the old DB did (if it is empty it will get JSONised as [] not {}).
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Merge 3.1.0 into stable.
Start stable branch
Merge heads
Merge heads again
Merge heads
Merge heads
Added tag rabbitmq_v3_1_0 for changeset cd71f27cd2a6
Added tag rabbitmq_v3_1_0 for changeset 73a4d86e24c3
Added tag rabbitmq_v3_1_0 for changeset 98a5ac544cad
Added tag rabbitmq_v3_1_0 for changeset af60662c3053
Added tag rabbitmq_v3_1_0 for changeset 60e402cb84cb
Added tag rabbitmq_v3_1_0 for changeset 2f6c02363686
Added tag rabbitmq_v3_1_0 for changeset 1d2d1573b8c1
Added tag rabbitmq_v3_1_0 for changeset 377c2439048a
Added tag rabbitmq_v3_1_0 for changeset 81231b905a3f
Added tag rabbitmq_v3_1_0 for changeset c5fb43e8060c
Added tag rabbitmq_v3_1_0 for changeset 5cc8dad697ba
Added tag rabbitmq_v3_1_0 for changeset 11aee2449324
Added tag rabbitmq_v3_1_0 for changeset e58445bf9569
Added tag rabbitmq_v3_1_0 for changeset fbdc912fa1e5
Added tag rabbitmq_v3_1_0 for changeset 007cc7233970
Added tag rabbitmq_v3_1_0 for changeset 4d2db994919f
Added tag rabbitmq_v3_1_0 for changeset a7a369fde337
Added tag rabbitmq_v3_1_0 for changeset 177116908921
Added tag rabbitmq_v3_1_0 for changeset 1968e9bc242a
Merge heads
Changelogs for 3.1.0.
Fix data-rate charts (connection details page).
merge bug23958 into default
merge bug23958 into default
merge bug23958 into default
merge bug23958 into default
simple_one_for_one now covers the 'terminate' case properly
ever so slightly clearer
Typo; fix compilation on <R15.
Don't silently fail if we can't build deps.mk.
merge bug25501 into default
merge default
Comment
Merge heads
stable to default
Merge bug25535
If there is no password, refuse access rather than blowing up.
Merged bug25527
Merged bug25527
Oops
Move credit to an extension.
Move credit to an extension.
Use the credit extension.
Merge bug25529
Fix regexp, don't allow non-numerals in the input.
Minor variable renaming, document subtle one_for_all child deletion clauses
A certain amount of messing around to get the right bits "updatable".
Don't fiddle with filter-active class in update_truncate, it's not needed.
merge bug25107 into default
Configurable truncate limit.
stable to default
Unused variables.
Use defines. Also, 4 =/= 8 (the PDF version of the spec LIES).
stable to default
Merge bug 25502
stable to default
Merge bug 25502
Also blow up if we get a completely malformed header
Receive fixed number of bytes from socket synchronously
Reader changes
We did requeue-in-order in 2.7.0, let's reflect that.
Merge bug25512
Merged stable into default
Merged bug25524 into stable
Move the peer_down handling to sender_death, since that's when the slave really gives up on a sender.
Add explanations to pmon:is_monitored/2 invocations.
merge bug25471 into default
stable to default
Merge bug 25526.
Use columns parameter when replying with a single object, and test that.
Switch pause_minority mode to making its decisions entirely based on node-upness, not rabbit-application-upness and explain why.
Move those functions to their own place, and replace the autoheal all_nodes_up check with all_rabbit_nodes_up since it will depend on the rabbit application running to DTRT.
add some specs and docs
fix a (harmless) bug spotted by dialyzer the original code only worked since orddict:to_list is implemented as the identity function.
leave OtherProc info as is
merge stable into default
fix typo
RJMS-111: Remove special format for TypeInfo; adjust tests; add more type tests.
RJMS-111: Removal of type info field from database and wholesale updates of file comments. - type info directly derived from arguments - copyright statements and license information was o-o-d - file comments and type information improved
back out of f608b9df9a14 changes supervisor2_tests
Refactor restart handling
merge bug25513 into default
cosmetic
Tiny test
Move to near the other system message and simplify.
lists:keyfind/3 is not in R12B-3.
deal with plug-ins ...and rip out the now unused sup traversal code
wire in sum_processes for all non-plugin process memory
include the named processes in the sums
cosmetic
Merge bug 25517.
Less magic, more essay.
I suppose it would be polite to add specs here.
Have the leader decide what to do and then just tell other nodes (rather than have them request a winner). Substantially more reliable and shorter than previously.
RJMS-105: Pass TypeInfo on XChange create; store in db state; use in add_binding validation.
RJMS-105: Expose TypeInfo on analyze interface -- update tests.
RJMS-105: Continue refactoring of type information -- injected only at top.
RJMS-105: Rework identifier checks to isolate them ready for parametrisation.
RJMS-105: Add test for enumerated type JMSDeliveryMode.
Obtain beam hash reliably
Rename states to hopefully be clearer; add more comments.
First pass at splitting all the autoheal stuff out into a separate module.
Merge bug25494 (again, after unmerging bug25517)
Merge bug25494
Cosmetic
Remove exchange_not_durable as, err, it would never be returned. And strip leading exchange_ since this is rabbit_exchange.
Magic call handler to debug the state.
Merge bug25517
Explain why we are doing this.
Abstract
Change exchange update return type
Propagate API change
Further modifications implementing feedback
merge default
We can end up hearing about a reason we have already heard about, because rabbit_alarm *both* returns them from register() and immediately calls the MFA during register(). Tests now pass.
Cosmetic
merge stable into default
Merge bug25504
rationalise restart handling
simplify restart_if_explicit_or_abnormal
drop function guards from restart_if_explicit_or_abnormal
relocate is_explicit_restart macro
Handle potential incompatibility
Further tweaks
Add a test of changing the policy for a federated exchange while keeping it federated.
merge bug25518 into stable
first stab at summarising processes by their ancestor chain
Further excisions
Don't wipe the slate clean each time we get a conserve_resources message.
Updates
Merge default
Updates
Merge default
Specify the version of the paho MQTT client to use, and some API tweaks to use the latest version. Why not just use the version that used to work? Well, it required some non-standard ant stuff to build.
Ignore missing exchange decorators
Backed out changeset 711e4ecf2794
Fail predictably when connecting to a refusing server
Cosmetic
Merge default into bug25494
Maybe clearer?
No, the newest dead letterings are at the head.
Update tests
Only ban cycles that are entirely due to expiry
merge stable into default
merge bug25503 into stable
eek out some more bytes
Changes
Be less chatty, none of that is especially interesting.
Propagate API changes
RJMS-103: Change keys in binding funs dictionary to include destination name. Also change 'queue' references to 'destination' references.
Move mirrored queue modes into a behaviour and implementations thereof.
simplify
Handle unbounded frame size negotiation
v1.0.x: Change orddict to dict
Do not negotiate frame sizes above 64Mb
Changes
Add one tick to each non-final resolution, in order to make them each slightly larger than the corresponding chart size in the web UI (rather than the same size). Because otherwise we can see a final sample move when it gets GCed just as it moves off the left of the chart. Doesn't happen very often, but it looks weird.
Explicit support for x-max-length (see bug 19375).
Alternative implementation of bytecode compatibility check
Merge bug25519.
Allow use of esl-erlang
Merged stable into default
Be rather less arbitrary. But still a bit.
Excuse
Explain a bit more WTF we're doing.
Add support for UID. No, it's not in public_key.hrl. Grrr.
Also RFC4514 suggests we always use = even if we don't recognise an OID.
Insert a hack.
Replace all uses of io_lib:format/2 with rabbit_misc:format/2 - we want something that returns a flat list.
Merged bug25514
Merge bug24850
Inline verify_worker_configuration/5 since it mutually recurses which is not exactly obvious from the name.
Use flot's built in formatting first.
Sometimes when an SSL connection is killed it sends out a last stats message with bytes counters at '' (presumably since the socket is already dead). Guard against receiving such data, and indeed any other non-numeric thing.
cosmetic
simplify
Nicer axis labels.
make macros referentially transparent
cosmetic
validate worker configurations on startup
Remove io:formats
Deal with partial partitions.
Umm, order by *best* partition first!
Debounce.
Only queue up for GC at most two pairs of files at once, since we lock files as soon as they are queued; no point in having them locked for ages as they wait to get GCed.
Markdown tweak, probably no need to say SwiftMQ is closed source.
merge bug25487 into default
merge bug25487 into default
Minimise diff
client_sup API change
client_sup API change
merge default into bug25487
Note on clients.
Transplant reverse of 8c13f168cf00
Change client_sup API
Unfix bug
client_sup API change
DLX without confirms
Wrap
Mnesia upgrade for exchange decorators
WIP commit: start to deal with non-consistent partitions. all_partitions/1 needs attention though.
RJMS-102: Added parent ref; removed redundant properties and parent-declared stuff. Added repositories for stand-alone builds.
Merge default
Cosmetic
Merge in default, add a touch more logging, and don't restart autoheal if it's already started.
Merged bug25499 into default
RJMS-100: Re-instate tests (from six repo, which is now redundant).
RJMS-100: Move sjx code to plugin repo; and adjust build steps.
Merged bug25491 into default
Simplistic way of selecting a winner: order by the number of connections, then the size of the partition.
Figure out a global view of partitions.
Add some logging
merge default
Singular / plural
Filter users / vhosts / policies.
Terminology tweaks
Merge bug24114 into default
Merge bug24114 into default
Merged bug24114 into default
system_continue/3 calls into this, export it.
When waiting for sync to get noticed, show a busy cursor.
Merged default into bug24114
Merged default into bug24114
Don't call rabbit_mnesia:cluster_nodes(all) as much, don't use floating point if we don't have to.
Use a macro
Cosmetic
Update readme
Bug 23749 has been merged; w00t!
merge bug23749 into default
merge bug23749 into default
Oops, a late API change in bug 23378 didn't get propagated.
Check if the rabbit process is running and thus avoid deadlocks in the application controller.
Merge in default.
Backout e2d962df4128 until we can make that work properly...
Move decorators to exchange record
Update essay for credit (and fix a few typos I couldn't be bothered to separate out).
Ameliorate RabbitMQ's least-interesting race condition.
Move serial arithmetic out of the broker.
Move serial arithmetic into the plugin
There's nothing very link-specific about protocol errors, let's move them.
merge default (again)
get rid of unused imports
fix typo
cosmetic(ish)
Wrap each shovel worker in an intermediate mirrored supervisor
re-introduce state-transition optimisation for possibly_unblock
Lose the drop shadows.
oops
Do the pinging in a separate process so we don't block the node monitor.
Move this out of the function.
Merge in default
Merge bug23749+bug25461 into bug23749
Merge bug25461
suspended =/= has run out of credit.
merge bug23378 into default
merge bug23378 into default
merge bug23378 into default
merge bug25384 into default
Merge heads
Make CheckVHost actually do something.
correct comment
simplify
cosmetic
Comment
Modify decorator routing comment, variable and whitespace
Merge in default
Cosmetic, reduce distance to bug25461, remove dead comment
oops
Merge in default
Merged bug25499
Merge in default
Merge in default
Merge the two can_sends and tidy up.
merge bug23378 into default
merge default into bug23378
Exchange decorator routing improvements
First attempt at merging these two bugs; this compiles at least.
Set 1.1 development train (1.1-SNAPSHOT)
Merge in default
First attempt at pinging that doesn't really work well.
Backout changeset e836088f23962b1df1a7bffd86dbbbd8322c4753
better names for the prefetch related part of the limiter API
always hold a valid limiter in queue's channel records This is less fiddly, but does mean we have to pass the limiter pid in basic_get.
Use an intermediate supervisor to restart workers
stable to default
"source" is also an architecture - and a very important one.
remove dead code
cosmetic
some documentation
A node counts as down if it is not running rabbit in this case.
First pass at autohealing.
stable to default
These log messages do not necessarily make their implications clear enough; I can imagine people's eyes glazing over them. Try to deal with that.
stable to default
Fix link to disk free alarm contextual help.
niggles--
correctness++
Pass the module to mirrored_sup as the group name
limiter API revision - part 2/2 - queue-side API
Cosmetic
Merged default into bug25384
Perform route decoration differently
limiter API revision, part 1/2 - channel-side API
Upgrade to rabbitmq-3.0.4
Merged bug25474 and bug25486
stable to default no-op
Bug 25497 really should have been branched from stable, so backport it.
Merge bug25497
Switch shovel_sup over to mirrored_supervisor
Different registration of exchange decorators that modify routing
Merge bug25495
Merge bug 25495
Merge bug25495
Code comment about clearing partitions
More archs
propagate API change; and some cosmetics
propagate API change; and some cosmetics
propagate API change, plus cosmetics
cosmetic: make callback function def order match usage
get rid of superfluous serial() arg to {XT,XD}:policy_changed
Oops
Deduplicate
Remove unused error condition.
merge bug25488 into default
merge bug25488 into default
merge bug25488 into default
Resurrect
correct a spec error discovered by R16B dialyzer
move spec expansion to right place
Push protocol errors closer to the edge.
rabbit_client_sup accepts supervision options
Add db-transaction semantics for exchange callbacks.
Propagate API change of rabbit_client_sup
Drain is also optional.
Durable is not mandatory, default is "none"
Merged stable into default
Merged bug25490 into stable
merge bug23382 into default
Cache the result of the external command
Move the check inside the tx - this means we only lookup the exchange once and there's no possible race. It means we have to convert the exception to an {error, #amqp_error{}} which then gets converted back to an exception, but never mind...
Add rabbit_policy_validator
API change.
cosmetic
Take advantage of the new mechanism to validate x-match.
merge bug19375 into default
rabbit_exchange_type:validate_binding/2.
rabbit_exchange_type:validate_binding/2.
Correct use of client_id and worker
Before 4799aa6535ed those 1s got rounded down to 0s when calculating the final correction for queue length. Now they get rounded up to 5000 or whatever and put the reduction in total no of messages into the future. Let's pretend it all happens at time 0 instead.
Update default RMQ version.
Consistency.
Correct error messages.
don't leave garbage behind in policy validation test
If we have been partitioned, and we are now in the only remaining partition, we no longer care about partitions - forget them. Note that we do not attempt to deal with individual (other) partitions going away, it's only safe to forget *any* of them when we have seen the back of *all* of them.
Treat {inconsistent_database, running_partitioned_network, Node} as being sort of like {node_up, Node, NodeType}. It's not perfect, but it's the best we're going to get.
Oops. This was part of an (early, wrong) attempt at bug 25474 which got committed as part of f1317bb80df9 (bug 25358) by mistake. Remove.
base64 encode correlation_id in rpc requests
Improve error diagnostics on selector expression failure.
Added tag rabbitmq_v3_0_4 for changeset adfcc1c61eb4
Added tag rabbitmq_v3_0_4 for changeset 452afac73e65
Added tag rabbitmq_v3_0_4 for changeset bd3e194bb5de
Added tag rabbitmq_v3_0_4 for changeset cd3de56c03a7
Added tag rabbitmq_v3_0_4 for changeset ce23f4442790
Added tag rabbitmq_v3_0_4 for changeset 83676085c28b
Added tag rabbitmq_v3_0_4 for changeset adc7bcf0b262
Added tag rabbitmq_v3_0_4 for changeset 881a7c8f5ada
Added tag rabbitmq_v3_0_4 for changeset bed06d3b05ed
Added tag rabbitmq_v3_0_4 for changeset 8f9d30440aed
Added tag rabbitmq_v3_0_4 for changeset b2f96d2bca2f
Added tag rabbitmq_v3_0_4 for changeset 9c9cbde4ad6b
Added tag rabbitmq_v3_0_4 for changeset db2a9e245d67
Added tag rabbitmq_v3_0_4 for changeset a5cd839a8d2b
Added tag rabbitmq_v3_0_4 for changeset e5214f86d7c6
Added tag rabbitmq_v3_0_4 for changeset 90c2fdb532b3
Added tag rabbitmq_v3_0_4 for changeset 7f017e308d8d
Added tag rabbitmq_v3_0_4 for changeset 2e15f381d3a8
Clean URIs in status
Stable to default
Merged bug25483 into stable
Oops
Also test that we don't unescape wrongly.
Rewrite to use uri_parser:parse/2 and add unit tests.
Strip out credentials when adding URIs to x-received-from header.
Merge bug 25384
Eliminate a foldl
RJMS-74: Add analyse call which type-checks the SQL expression, and aborts add_binding when erroneous.
Cosmetic
Merge bug25271
track repeated attempts to restart properly
Some people are still linking to this in various repos, the web site is better.
Minimise routing exchange decorator API
Translate return from do_restart properly
Align error reporting and restart handling with OTP
RJMS-74: Merge branch 'master' into RJMS-74
Add open_source_licenses.txt file.
Mostly callback description
merge default into bug23958
Merge bug25466
Merge bug25466
Remove
Oops
API change
Propagate API change
Propagate API change
Remove a dubious full stop.
Now that we have filtering we may as well truncate to the first 100, 500 was always a compromise about not wanting to truncate too early.
Put the class on the right thing.
Reinstate maybe_truncate(), it's used by the bindings include (and it would be rather fiddly to make that filterable).
Merged bug25358 into default
Style change: remove borders and boldness in warning block and some popups. Feels a bit lighter as a consequence.
Optimisation
Permit exchange decorators to modify routing decisions
merge heads
Refactor try_again restart handling
Register the process name to make sure we only have one running at a time.
Unused variable
Visual improvements.
Split out filter_ui (which does not want to be updateable) from maybe_truncate (which does). Rearrange how HTML gets escaped to make sure we highlight things that need escaping.
Added tag rabbitmq_v3_0_3 for changeset e8ddc577d4c6
Added tag rabbitmq_v3_0_3 for changeset 9d708605df84
Added tag rabbitmq_v3_0_3 for changeset ac4c722163dd
Added tag rabbitmq_v3_0_3 for changeset 6c6b004dee6e
Added tag rabbitmq_v3_0_3 for changeset 192ff61c6f4f
Added tag rabbitmq_v3_0_3 for changeset dbb393f2948c
Added tag rabbitmq_v3_0_3 for changeset df3df5df727b
Added tag rabbitmq_v3_0_3 for changeset ade4b2c12309
Added tag rabbitmq_v3_0_3 for changeset 39e92f45e938
Added tag rabbitmq_v3_0_3 for changeset 20f6f84a8ab8
Added tag rabbitmq_v3_0_3 for changeset f223837b2a73
Added tag rabbitmq_v3_0_3 for changeset 56e66d366725
Added tag rabbitmq_v3_0_3 for changeset b1c547806121
Added tag rabbitmq_v3_0_3 for changeset 5a7d2630e7f4
Added tag rabbitmq_v3_0_3 for changeset 08d1d6c2ef52
Added tag rabbitmq_v3_0_3 for changeset a5a1dc894165
Added tag rabbitmq_v3_0_3 for changeset a97b4179e26f
Added tag rabbitmq_v3_0_3 for changeset dcbdbb44777a
correct comment
Crude filtering on the client side.
RJMS-74: Tidy some variable usage.
We don't need this - net_adm:ping/1 will not return pong for nodes that have gone down before net_ticktime expires (it will hang for until then instead).
RJMS-74: Typo
RJMS-74: Fix compile_sql function.
RJMS-74: Ensure sjx_evaluator imported.
RJMS-74: Avoid returning non-boolean results; correct mnesia basic read function.
Merge in default (umm, again)
Merge default
Merged stable into default
Merge stable into default
RJMS-74: Typo
RJMS-74: Typo
RJMS-74: Do work of getting SQL and running evaluate on it for binding checks.
rebase with R16B
Merged bug25472  into stable
Merged bug25472  into stable
Delete all appropriate connection / channel records when a node goes down.
Allow subscribing to node down events from the node monitor.
Show more information about the Erlang build.
Merge bug25464
Merge bug25464
Merge bug25464
Rename this thing, to make space for bug 25471
Consistency between big red things.
Check queue length using correct version of backing queue state
Handle connection abort while opening more gracefully
The final correction for queue lengths should be moved forwards in time, not backwards, since all other samples also move forwards. This was causing the final correction to be applied one interval too early in some circumstances, leading to temporary claims of negative queue lengths.
Update description of repository.
Handle connection abort while opening more gracefully
If we're going to ignore coarse queue stats, ignore them for the purposes of recording in the old stats table too, otherwise we will be completely off when doing the final accounting on receving a queue_deleted event.
stable to default
Oops, yet another 5s timeout to squash.
Base function to deal with database i/o in selector exchange.
stable to default
Further oops
API update.
If you just don't want a range at all.
Hint
stable to default
Oops, that CSS changed some time ago.
Take the higher of 100 rows or 1% of the table to GC, let's not wait all day if we have 1e6 rows.
Compactness.
So the little spans that described each chart didn't get updated. Make them updatable - and also change the updatableness mechanism to swap out the contents of an element, not the element itself (since the whole reason we don't just make the whole region updatable is that we mutate the state of the element itself and want that to survive across refreshes).
Usability: highlight the link that the currently-shown chart config popup relates to, and make a second click close the popup.
merge stable into default
merge bug25469 into stable
Hibernate after opening connection and when waiting for data
Ensure that we resume socket reading in all edge cases
Enable unit tests.
Added omitted exchange type behaviour method 'policy_changed/3'.
cosmetic
refactor: move reader throttle control to one place
Don't attempt to short-circuit the '$end_of_table' case, this can send us into an infinite loop if the table is empty.
GC a bit at a time.
Start to flesh out topic selector exchange
adds missing patch
removes sed invocations in favor of patch
We no longer need two different death detectors since we no longer look at Mnesia for majorityness.
Simplify
Base the whole thing off net_adm:ping/1 - because we might see other nodes come back but also be waiting (in the no-majority case, and RAM nodes). Better to detect they exist and come back than to stay stuck because they don't happen to be running Mnesia.
reorders sed calls
Filter out all those events that look like:
When we lose majority, stop the applications and wait for the cluster to come back.
adds realpath to erl mac script
Merged bug25463 into default
Merged stable into default
Merged bug25432 into stable
Merged stable into default
Merged bug25432 into stable
fixes Erlang FINAL_ROOTDIR
Silence warnings
Set and use the rabbitmq.version parameter in the plugin build.
Make a list of parameters for a non-existent component be [], not 404.
Remove concept of strictness, thus renaming list_strict/1 to list_component/1 and removing list_strict/2 altogether, plus a few bits of therefore dead code.
specifies boot file for rabbit_prelaunch call
Prevent sending to /temp-queue destinations
Oops, legacy of an ancient refactoring
Merge bug25467
Merge bug25467
Merge bug25467
Remove highly half-baked support for dynamic endpoints, and cosmetic.
socket buffer size tuning has moved into the tcp_acceptor
socket buffer size tuning has moved into the tcp_acceptor
move socket buffer tuning into tcp_acceptor
Merge bug25382
Merge bug25382
Rename remove_old_samples() to gc() and a few other renamings.
Proper is_blank/1.
Warnings
Change dynamic subscriptions
Change dynamic subscriptions
Unnamed dynamic targets
Reply-queues with slashes and changes to dynamic queues
stable to default
Merge bug25465
(Bug 25463) Keep name around for logging / info item.
Rearrange exception handling to be a bit more like the 0-9-1 reader (and thus don't count e.g. access denied as an internal error...)
Keep name around for logging / info item.
Treat built-in exchanges like any other
Rename
Rename
Mostly renaming
Rename
Merge in default.
Tweak
Move everything that touches the #stats{} record out into its own module.
Oops, need to override for this test too.
ignore early enotconn, and report early socket errors more nicely
continue accepting when client sends RST before we accepted
Eliminate parse_endpoint/0.
Don't use parse_endpoint/0.
Cosmetic
Cosmetic.
More wrapping
Remove dependency on AMQP 1.0
Wrapping
Re-order
Transparent dynamic queues
Further transparency enhancement
Transparent temp queues
Transparent subscriptions to topic destinations
Transparent subscriptions to durable topic destinations
I thought of another race: in theory a queue_stats message could make it out of a dying node just in time, but then be overtaken by the queue_deleted event that was generated by another node. Fairly unlikely, but we should handle it.
Simplify parse parameters
Simplify parse parameters
Remove support for encoding parameter
Remove encoding
Rename
Rename
Rename
Check exchanges existence using passive declare
Regularise resolution over time.
Remove debug call.
That was broken in a62b11dc77bb. Multiply by 1000 at the correct points...
Support more selective endpoint validation for exchanges
Make use of endpoint validation parameter
Enforce queue limit with requeue
Generality
Deal with a race between channel_stats and {queue,exchange}_deleted events.
Respect TMPDIR.
Merged default into bug19375
merge default into bug23749
simplify queue's basic_consume handler backported from bug23749 branch - the call to update_ch_record in the is_ch_blocked(C1) == false   branch was superfluos since the preceding update_consumer_count   calls update_ch_record - all the checking whether the channel is blocked, and associated   branching was just an optimisation. And not a particularly important   one, since a) the "a new consumer comes along while its   channel is blocked" case is hardly on the critical path, and b)   exactly the same check is performed as part of run_message_queue (in   deliver_msg_to_consumer/3). So get rid of it.
Well, that was embarassing.
simplifying refactor
Correct use of gb_trees APIs...
Oops
Use gb_trees rather than dict for performance.
Remove blocked_ctags, and a few knock-on simplifications.
simplify queue's basic_consume handler - the call to update_ch_record in the is_ch_blocked(C1) == false   branch was superfluos since the preceding update_consumer_count   calls update_ch_record - all the checking whether the channel is blocked, and associated   branching was just an optimisation. And not a particularly important   one, since a) the "a new consumer comes along while its   channel is blocked" case is hardly on the critical path, and b)   exactly the same check is performed as part of run_message_queue (in   deliver_msg_to_consumer/3). So get rid of it. - the is_empty & send_drained logic can be invoked earlier, which   allows us to use the #cr we have rather than looking it up again. We   can do this since the only case we need to catch here is that of a   consumer coming along while the queue is empty already. If it   becomes empty as part of run_message_queue then send_drained will be   invoked in 'fetch'.
merge default into bug23749
oops
optimise possibly_unblock when the channel is blocked there is no point going through the expensive consumer re-partitioning
refactor it's convenient for callers to have maybe_send_drained thread through the state
cosmetic - reduce distance to 'default'
oops
cosmetic move functions to a better place
merge default into bug23749
introduce is_empty(State) helper in rabbit_amqqueue_process ported from bug 23749
get rid of maybe_send_drained_cons and optimise handle_cast/credit along the way
refactor possibly_unblock
introduce is_empty(State) helper and in the resulting refactor also remove a non-linear BQS access in handle_info/drop_expired.
cosmetic
cosmetic
eliminate non-linear BQS usage
cosmetic
Remove TODO, direction cannot be restricted
Only send_drained if we have become empty...
Mostly documentation updates
Ahem
Be more careful about where we send_drained from.
Consumer.receiveNoWait() is *not* the equivalent of basic.get, so it's essentially useless for us. Do not use it.
Merge heads
Indent
Dynamic addressing
Yes ant, treating failure as success is a perfectly sane default.
Durability and tests for prefix-less queues
More consistent declaration parameters
Punctuation
Neatness
Remove accidental commit
Added include/routing_prefixes.hrl
revert test timings back to exactly what's on default
merge default into bug23749
up the ha test timeout for slower machines
Remove spurious blank line in the logs.
merge bug25418 into default
merge bug25418 into default
Exchange endpoint tests
Naming of topic exchange destinations
Better support for topic exchanges and checking exchange existence
Merge stable into default
stable to default
Merge bug25457
Merged bug25456 into stable
Merged bug25456 into stable
Index for detailed stats events to speed up deletion.
Make sure that when we request stats with no range that we only show the instantaneous rate if it's actually current, and when it's not, return 0.0 not 0 so it's always a float.
Merged bug25453 into stable
Ensure that we resume socket reading in all edge cases Specifically in all the cases where handle_other might have changed the connection_state.
cluster_cp_mode
Check existence of exchanges
Check exchange existence
Remove rabbit_runtime_parameter:validate_clear/3.
Remove rabbit_runtime_parameter:validate_clear/3, and instead just validate that the parameter exists.
Test for dynamic queues
explain a reader sublety
refactor: more symmetry in rabbit_reader:handle_dependent_exit/3 It makes no difference whether we call handle_exception before or after control_throttle, so lets use an order that more clearly calls out the similarity to the controlled exit case.
Permit parameters when parsing endpoints
Support dynamic queues
make reader's handling of channel.close_ok more obviously correct by re-introducing a call to control_throttle.
make reader's handle_dependent_exit clearer - handle the no-op case (controlled exit of a channel we've forgotten   about already) explicitly - better clause order and formatting.
Merge destination semantics with AMQP 1.0
Destination semantics for STOMP and AMQP 1.0
Merge destination semantics with STOMP
Take note of RABBITMQ_SERVICENAME, same as rabbitmq-service.bat does.
It's 'name', not 'key'.
cosmetic
cosmetic
Typo
cosmetic(ish)
Merged bug25247
tweak
explain
Make standalone build/repo.
merge stable into default
merge bug25419 into stable
cosmetic
In case the containing process is trapping exits.
Don't stomp on the (possible) registered name of the thing that invokes boot/0 or start/0, create a new process to hold the name instead.
If we try to stop while starting, wait until we have stopped starting before stopping.
merge default into bug23749
merge heads
remove superfluous vqstate field
Merge bug25451
Merge in default
drop_expired_msgs only when the queue head changes And on recover. And when the timer goes off. That's all we need.
don't invoke run_message_queue in handle_cast/run_backing_queue Since that would only be necessary of the BQ:invoke modified the consumers, which it can't, or added messages to the queue, which it shouldn't.
Set MAVEN_ARTEFACT filename as a parameter.
Make RabbitMQ version overridable (and control umbrella building).
Put RabbitMQ version on exchange plugin.
Today's arbitrary startup banner change: centre the rabbit.
stable to default
Merge bug25448
Auto sync when policy changes to require it, in case we are already mirrored but have unsynced slaves at that point.
drop expired messages post basic_get ...so messages with an expiry that are at the head of the queue after a basic.get do not get stuck there in the absence of other queue activity.
remove icky use of element/2
Tweak nodes policy to allow master removal and thus queue migration
optimise
simplify & optimise maybe_send_drained - use BQ:is_empty instead of BQ:len - make use of Stop flag
Clear drain flag when we run out of credit.
Remove tags from blocked_ctags when a consumer goes away.
Move blocked_ctags into the limiter.
s/q_state/credits/g
Move rabbit_channel:send_drained/2 invocations into the queue module, and make sure we send drained for all consumers in drain mode.
Merge bug25044  (fa1429850857)
Merge default
Merge heads
Not true any more.
Merge bug25044
I need to give myself an electric shock every time I do that.
Merge bug25044
Announce ourselves a bit more fully.
Merged bug25044
Merge heads
Merged bug25044
Merged bug25044
startup logging tweaks
minor optimisation
Tweak the message to make it slightly more obvious if it has hung.
TODO
Try to make sure that we faithfully pass through AMQP 0-9-1 errors in a way that makes maximal sense.
Unify create_queue() and declare_queue().
Oops
Durability
Merge heads
Pass through the connection_closed_abruptly exception, otherwise we try to send a close frame for it...
Test different  sources and targets
Support default exchange
some inlining and moving around
a spot of inlining
Help for ha-sync-mode.
First pass at ha-sync-mode.
a little bit of refactoring of channel.flow code
That doesn't need a name either (in fact even less so, since it never ends up in the registry).
Merged bug25406
Merged bug25406
Whitespace
stable to default
A rabbit_mochiweb reference I missed.
Unbreak shutdown sequence for non-errors
Don't repeat yourself.
Don't repeat yourself.
Don't repeat yourself.
Don't repeat yourself.
Overwrite any name provided in the proplist with the name the thing was registered under. Things should not have two names, and we should use the name the broker uses.
Mosly cosmetic
stable to default
Fix tests
Better error reporting
oops
stable to default
Rename rabbitmq-mochiweb to rabbitmq-web-dispatch
stable to default
Rename rabbitmq-mochiweb to rabbitmq-web-dispatch
stable to default
Rename rabbitmq-mochiweb to rabbitmq-web-dispatch
Merge stable into default
Typo
Merged bug25443 into stable
Merge bug 25429
Change to 'confirms' | 'other' | 'false'
Detect and decline transaction attempts
Don't assume that frames will fit
Separate attachment validation
Merge in default
Spelling
Only delete queues for which no HA policy exists.
Remove durable queues based on a node while forgetting that node.
Qos-related tests
More clarity.
Echo back and honour attachment settle mode requests from client
Upgrade to build against rabbitmq-3.0.1.
If there's nothing in the querystring about a range, don't return any samples or averages or anything.
No longer revert on "the interval". There is no longer one interval, and this was not of any real use any more. If it ever was.
I forgot to update this comment in 2a19b619202e.
Rename "instantaneous value" to "current value", in an attempt to talk like a human being.
Prevent attachment parameters which could lead to QoS exactly-once
Show moving averages correctly for queue lengths, and remove some nasty magic passing around null functions.
Calculate average as well as average rate.
Improve coverage slightly.
We never call get_all_channels with Mode=full or get_channel with mode=basic, so remove that from the API.
Merged bug25437
Remove unused import
Slightly less cheap-and-cheerful test for multiple URIs.
Cheap and cheerful test for multiple URIs.
Merge default in.
Merge default in.
Merge bug25433 into default
Merge bug25433 into default
Merged bug25433 into default
Spelling
Slightly cleaner logging at startup: make the plugin list look nicer.
Merged bug25435 into stable
Slightly cleaner logging at startup: don't repeat the RabbitMQ or Erlang versions, and split copyright out into its own log message since it is not like the other bits.
Rather fiddly refactoring to split up #upstream into #upstream{} and #upstream_params{} - the latter being instantiated by the link process, and representing a choice having been made amongst the URIs in the #upstream{}. So we now should fail over randomly to a new upstream from the set.
Merge bug25437
Remove rabbit_federation_status:remove_upstream/1, its semantics were always wrong.
Extract plugin to target/plugins directory on package.
Report unsupported features with protocol_error() instead of exception
We depend on xmerl via mochijson2.
Display the URI that a link is using.
Record the URI that a connection is using.
Help.
Allow URI to be multiple.
Make uri arrayable.
Display multiple URIs nicely.
Quick hack to allow entry of arrays of strings.
rabbit_parameter_validation:enum/1
...but reinstate one of the tests
Revert 188f2f330cdd, turns out it's not a good idea - there's no such thing as "the period for which we have samples", since things can hibernate and therefore we can have gaps in the middle.
Help
Resurrect
ack-mode
ack-mode
avoid badmatch in handle_info/delayed_restart
Ensure supervisor try_again_restart observes delayed restart
We should have charts on the vhost page too!
Don't just have a single global idea of "the current range", allow different rangse for different things.
Detect and report unsupported features
Oops.
stable to default
Merge bug24223.
Add mildly explanatory comment.
Cosmetic
Avoid always going through with_exit_handler/2, since that's what the comment says!
Support decimals by passing through, Add type test
Added tag rabbitmq_v3_0_2 for changeset f93db33304e6
Added tag rabbitmq_v3_0_2 for changeset 4c1389f2e9b0
Added tag rabbitmq_v3_0_2 for changeset 310bcce26941
Added tag rabbitmq_v3_0_2 for changeset f63869deec7b
Added tag rabbitmq_v3_0_2 for changeset ce174472e7d2
Added tag rabbitmq_v3_0_2 for changeset af3c8b4b127e
Added tag rabbitmq_v3_0_2 for changeset e96be45ff4e7
Added tag rabbitmq_v3_0_2 for changeset e95e31bd8ffd
Added tag rabbitmq_v3_0_2 for changeset 83e2ba99f9b4
Added tag rabbitmq_v3_0_2 for changeset aa972143d3c8
Added tag rabbitmq_v3_0_2 for changeset 23d6ca5c9601
Added tag rabbitmq_v3_0_2 for changeset f79d5307282a
Added tag rabbitmq_v3_0_2 for changeset 8ef194eeeacc
Added tag rabbitmq_v3_0_2 for changeset 24d58660b308
Added tag rabbitmq_v3_0_2 for changeset fa031d78b328
Added tag rabbitmq_v3_0_2 for changeset b9f36d3df985
Added tag rabbitmq_v3_0_2 for changeset bf11b947abb9
Added tag rabbitmq_v3_0_2 for changeset b28f12bb9c57
Report NaN and inf as unsupported
merge bug25428 into bug25429
Merge bug25428
merge default into bug25428
ask qi whether it needs sync'ing, and why
merge bug25428 into bug25429
Update todo comment about annotations
Add test for message footer
Remove support for old format multiple values
Generate multiplicity according to the 29 October 2012 spec
Hack the old database to support the same API as the new one:
Don't blow up if there are no samples.
Mechanism to select a database module.
Import the (unmodified) db from default.
reduce the default qi journal size a large journal size improves performance by - writing larger blocks to disk in one go (since in many scenarios we   end up writing the entire journal in one go) - reducing fsync frequency (since in many scenarios we only sync when   rolling the journal) - records for messages which get published, delivered and acked in the   lifetime of a journal don't need to be written to segment files. To   the point where we may be able to skip writing segment files   altogether.
Don't invent samples unless we are before or after the period for which we have samples...
Test message annotations
don't hold on to 'complete' in-memory qi journal entries When a pub, del and ack for a message are all recorded in the journal then we don't bother writing any of that to the segment files when the journal is flushed, since the message is well and truly in the past and forgotten. So... there is no point keeping the entry in the in-memory journal either, where it just eats up space until a flush for no good reason.
only keep track of *unconfirmed* unsync'ed messages ids in qi ...so we don't bloat memory with stuff nobody cares about, and reduce the qi->queue callbacks (to zero when no confirms/tx are used)
Parser strictness when compound count and bytes disagree
Message footer and annotations improvements
Before committing, it's traditional to make sure it compiles.
Abandon call prioritisation, no longer convinced it's worth it with bug 23378 coming down the road (which will make it more important to process stats events and also make handling requests cheaper).
Merge default
Merge default
Merge in default
remove out-of-date comment
Include sjx query source into exchange build.
remove spurious generality after spending hours trawling through the qi code and its history, Matthew and I are convinced that qi:add_to_journal/3 is unnecessarily general, handling a case that can never arise, namely adding an 'ack' when we do have an entry for the given sequence number but that entry does no contain a 'del'.
And document the API.
Get rid of that (...), give a more discreet but more useful link.
Further annotations
rabbit_limiter:initial_credit/6.
Derp.
Reduce distance to default.
Merge default
Unify the various checks before sending, and make sure we don't drop the new limiter on the floor.
Delivery annotations
inform_limiter -> credit.
Another API change: don't tell the limiter about our delivery count.
Now we don't need that any more either.
Remove knowledge of delivery-count from the broker.
API change: convert basic.credit_state to basic.credit_drained.
Simplify: convert basic.credit_state to basic.credit_drained, which implicitly asserts that credit is 0, length 0 and drain is true, and tells you how much credit was discarded rather than the new delivery count (so we can soon remove all delivery count code from the broker).
Simplify: convert basic.credit_state to basic.credit_drained, which implicitly asserts that credit is 0, length 0 and drain is true, and tells you how much credit was discarded rather than the new delivery count (so we can soon remove all delivery count code from the broker).
Propagate API change.
Get rid of credit_map, allow initial credit setting through an argument to basic.consume.
Merge heads
Allow idle-time-out to be absent.
Add ability to receive message annotations
Add TODO about null/zero-length-array equivalence.
Remove TODO
Note TODO item for equivalence between null and empty arrays
stable to default
Merge bug25420
single io:format in order to prevent output interleaving
stable to default
Merge bug25422
UTF16 has been removed
Some support for virtual hosts
Oops
Move old samples that have not yet dropped into the base *forward* in time, not backward. The semantics of the timestamp of a sample is "we received this many x by this time", so this is the right thing to do, and stops mysterious gaps appearing at resolution change boundaries.
ignore 'invoke' on different module rather than exploding.
Remove idle-timeout as a missing feature after implementation of heartbeats
Add a couple more colours.
Defaults for prefs, reliability for charts.
Heartbeats
Don't exceed the resolution we store by default.
Nicer popup
Populate the range vars properly at startup, and add a few more options to range select box.
handle all returns of mnesia:system_info(is_running)
remove unused function
eliminate superfluous double call
Oops
Add this: since Emile is working on it ATM we presumably don't implement it...
Tidy.
Merge README and STATUS, removing obviously no-longer-true stuff.
move find_child implementation to a better place
cosmetic - indent like OTP
move bits of docs around in order to eliminate "forward references" to new features
Merge default into bug23749 (causing no changes)
Mixed mode settlement
Swap SASL and TLS header codes
Correct rabbit plugin profile:   - better announcements in rabbitmq boot phases   - run-in-broker make target for local hand-testing of plugin   - removal of bad {mod, …} entry in application descriptor
Swap SASL and TLS header codes
Cosmetic
Derp
API changes.
RANGE_QUERIES was completely wrong. And in fact this whole idea of a global list of queries to modify is really ugly, so invent a new expanded representation for paths and do that instead.
Polish confirms' appearance.
Unbreak confirms.
merge default into bug23749
Merge bug25415
Merge bug 25415
nuke active_consumer count
nuke active_consumer_count
Take the instantaneous rate from the penultimate sample (yet another case of the drop at the end problem), and rationalise the interface to format_sample_details().
Add database initialisation to exchange and put in trivial function.
merge stable into default
merge bug25412 into stable
Don't just {reply, Cmd, State} since that will end up going into send/2 - which will decide not to send...
Merge heads
Merge bug25343
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
stable to default
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
Merge bug25343
merge default into bug23749
merge bug25383 into default
improved connection refusal logic / error message plus some tests to go with that
merge default into bug25383
s/become/init
s/become/init
recommend sasl
Quick patch to backing queue quickcheck correcting fold fun arity
add some tests for connection refusal some of this is also tested in the Java client, but I'd rather have it all in one place here.
stable to default
Merge bug25412
Update copyright 2013
Update copyright 2013
improve/fix connection refusal - respond with a 0-9-1 header when the supplied header is not   recognised *unless* it is a 1-0 header *and* the 1-0 plug-in is   enabled - respond with a 1-0 header when a 1-0 header with an unsupported   protocol id is supplied and the 1-0 plug-in is enabled - log a more informative error when a 1-0 header is supplied and the   1-0 plug-in is not enabled
Modify Makefile and build structure to have controlled makes.
...and fix a bug detected by those new tests.
Merge in default.
Merge default
Another module which had 0% coverage.
stable to default
A bit more coverage for a lonely module.
Merge bug25413
Enforce permissions correctly for /connections/<name>/channels, and improve tests.
Reject AMQP 1.0 TLS requests specifically
Update status
That function got nuked, move it to test_http.
Optimisation.
Optimisation: remove_old_samples is expensive, and having extra old samples around will just use a little bit more memory. So let's run it every 5 min rather than every 5 seconds.
Optimisation: append_sample/6 is a hotspot. So in the fine stats case don't pget so much in there, just go through entries in order. And don't recalculate ceil/1 all the time.
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Don't stick the heartbeat in timeout_sec, in most cases it will be 0 which we will then treat as meaning "wait 30s before closing on error".
Handle session internal errors properly. (Treat as a connection level error.)
Catch all types of internal error.
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Update copyright 2013
Switch to 1.0 protocol errors. Untested ATM but it could hardly work worse than sending 0-9-1 errors...
merge bug24980 into default
Update README.
Add Makefile2 which builds plugin standalone.
Call me sentimental, but reinstate the idea of an ASCII-art rabbit...
Ignore build artefacts
Cosmetic. Ish. Remove all the definitions for the first half of bytes, they obscure more than they illuminate. Then rearrange a bunch of code to look better.
merge bug25394 into default
prevent channel from sending anything after close/close_ok The "we have sent a close/close_ok" state is indicated by state=closing. Well, not quite...
LICENCE update
Copyright dates
We no longer care about the python client, and this does not break proton or swiftmq
We already do SASL and have TODOs in place for TLS. And why is it there?
No we don't.
Remove references to the mythical new codec.
Whitespace, s/FIXME/TODO, rephrase a couple.
We already do types other than ulong
These already are variables sizes
Merge heads
Don't attempt to decode content fragments for debug on the way out, either.
merge stable into default
merge bug25360 into stable
one test writer is quite enough. and make it work.
UTF16 has been removed from the spec
Be a touch more generous in appearance of rate to account for different timings.
Make sure the (...) is by the side of those paras too.
Only advertise anon SASL if a default user is defined
Oh yeah, specs.
Remove knowledge of AMQP frames from the limiter. (attempt 2)
merge stable into default
merge bug25360 into stable
our test writer needs to do a bit more now
Generate shortcut types for uint0 and ulong0
Extend fragmentation test
revert spurious changes to test timings
Record delivery id correctly in fragmented and non-fragmented cases
Possibility of ignoring windowing violations
merge bug25395 into default
stable to default
Merge bug 25360
Unused var
Ignore built artefacts.
merge bug25397 into default
Let's only have one connection open.
Remove some (hopefully unreachable) 0-9-1isms.
We shouldn't io:format errors, this will get logged now as we close the session.
If we're going to send a close frame for a session:
Remove old io:format
no-op exchange that builds
I don't think this is useful
Unexpected frames should cause an error instead of being ignored
Grr
Debug inbound content correctly.
delivery-id is optional on all but the first transfer
get the channel to flush the writer when the former is asked to terminate by the reader
Backed out changeset 0ca8cbef9720 accidentally committed on 'stable' instead of bug25360 branch
get th channel to flush the writer when the former is asked to terminate by the reader
Merge heads
Debugging statements should never cause anything to explode
merge bug25409 into default
Encode longer strings correctly, improve fragmentation test
Merge in default
USe pg_local rather than an ets table.
stable to default
Certain client authors send very long fields here (particularly for platform, which can include all sorts of details of the OS, compiler, etc). So truncate long fields rather than display an enormous table.
Stable to default
Ignore any failed attempt to contact the shovel, it might for example be loaded but stopped.
cosmetic: move spec of internal function and make it more precise
populate slave's msg_id_ack with sync'ed messages pending ack
eager sync of messages pending ack
merge bug25409 into bug25394
merge bug25395 into bug25394
merge bug25397 into bug25395
merge default into bug25395
merge default into bug25397
add xmerl to plt so we get fewer 'Unknown functions' in dialyzer mochijson2 depends on it
eliminate "Function X has no local return" dialyzer errors
cosmetic
add a test
add BQ:purge_acks/1
tiny refactor on variable_queue_with_holes
cosmetic
More error handling in reader
OK, the new tests are now better than the old ones, so let's replace them. Still not good *enough* though.
Delete something and make sure the correct things change.
Test fine stats aggregation, and queue lengths in overview.
merge default into bug23749
merge bug25383 into default
stable to default
Merge bug25403
A test would be nice.
fix test connections only show up in 'list_connections' after the protocol header has been sent
various reader related changes for AMQP 1.0 - mechanism for the reader to 'become' a different reader. - become the 1.0 reader if an AMQP 1.0 header is presented by a client   and the reader is present. That way we can support 1.0 on the same   port as 0-{8,9,9-1}. - defer starting of the channel_sup_sup and do that in the   reader. This allows the AMQP 1.0 reader to start its own versio of   the sup. It also makes aborted connections less costly. - track connections in an ets table rather than implicitly via the   supervisor. That way AMQP 1.0 connections can exclude themselves,   since they are already tracked via their direct connections.
Formatting tweaks
Not sure that's worth special-casing
These should go to the log, they have no excuse.
Remove that.
Don't io:format the HiPE compilation warning.
Merge in default.
Also while we're there, let's make destination_type default to queue, since that's the common case.
Merge bug25408
Allow specifying arguments for exchanges, queues and bindings. While we are there, make routing_key optional, since, umm, it is.
this should be more efficient
merge default into bug25397
simplifying refactor on rabbit_mnesia:discover_cluster
refactor: encapsulate rabbit_connection table
stable to default
Merge bug25355 into stable.
At the cost of some duplication, remove requirement for extglob. I love languages which have bits that can be turned off for you.
cosmetic
cosmetic
Stick "real" 0-9-1 connections in an ETS table.
delay starting of channel_sup_sup as much as possible which makes abandoned connection attempts less costly
merge default into bug23749
And a bit more less hack.
Take responsibility for starting our own session_sup_sup, and thus remove a hack from the core broker.
Merge heads
Start the chan_sup_sup later, once we have committed to 0-9-1 - one less hack.
allow 'become' to return, and become something else
Merge heads
Fixed in -server.
Unwind the stack before taking that one-way trip.
merge bug25400 into default
cleanup on deletion
stable to default
Merge bug25401
stable to default
Merge bug25401
Fragmentation test
Prevent explosion if someone passes a list.
Give a sensible error message if the user enters broken JSON (or more likely, the shell eats it for them).
Beginning of a rewritten set of DB tests that do not depend on clock time elapsing.
cosmetic
remove superfluous condition
Merge bug23438
Add UI, that commit got lost somehow.
Docs
Less logging when closing an already-closed connection
Report errors from the 0-9-1 channel back to 1.0 clients
This guard is not needed.
Barebones SwiftMQ-based tests
Unbreak
Github downloads is going away. Sob.
Manually add a host header. This drags in amqp_client, but it's very likely you're running that already.
Merge bug25393
...and do the same thing here.
Merge bug25333
Neater xref fooling, discovered by Matthias.
some more reader connection state abstraction and a slightly more logical (and efficient) handle_frame clause order
API consistency
cosmetic
neater xref fooling
merge default into bug23749
optimising refactor of check_xref
make check_xref work when plugins dir is empty
simplify bad_version error handling
fix typo
Swap the mapping of 0-9-1 "expiration" to 1.0 "ttl" rather than "absolute-expiry-time" since that's now the meaning we've granted it. And also since proton was sending absolute-expiry-time=0 which was causing messages to expire immediately...
Did I commit that? I didn't mean to commit that.
Debug inbound content too.
pass 'unacked' flag to BQ:fold fun so it can distinguish between 'ready' messages and those pending ack
More consistent and nicer formatting.
merge bug25397 into bug25395 which involved tweaking the variable_queue_with_holes result slightly, and ripping out a whole bunch of now-redundant test code.
merge default into bug25395
Fix the case of sending credit state back when changing credit when there are no messages in the queue.
Separate out can_cons_send.
merge bug25400 into bug25397 which is rather conflict-ridden; essentially requiring the rewriting of the crux of the change in bug25400 in the context of new iterator.
Specs. And a function I forgot to write.
Cosmetic
merge degault into bug25397
filter out pending acks when folding over delta
test
much more thorough testing of vq:requeue improving code coverage
Debug outgoing frames
Make more tests pass
...and we can now do that again.
Allow setting credit for a consumer tag that does not yet exist, since the adapter wants to do that. We leak if you set credit for a ctag and then don't consume... but the adapter never does that.
TODO--
No.
Merge default
Debugging convenience.
Improve workingness further. We now should be handling multiple blocks for different reasons correctly.
improve assertion in vq:fold test
merge default into bug25397
merge default into bug25395
improve vq:fold test by placing some messages in q1
Crude support for SASL ANONYMOUS since it seems popular in 1.0-land.
refactor
include pending_acks in 'fold' we implement this as a zipper over three iterators
merge bug25397 into bug25395
cosmetic
oops; nuke unused var
merge bug25397 into bug25395
merge default into bug25395
only pass the minimum necessary state to 'next' i.e. the IndexState. The remainder of the State is encapsulated inside the iterator state. Technically we only need q{1-4} and delta, but it's simpler and more obvious to just pass a read-only State around.
return MsgStatus only from iterator leaving the message reading to the fold
merge default into bug25397
extract a vq helper fun for constructing a msg_status
merge bug25397 into bug25395
pass State to iterator We want to be able to zip this iterator with other iterators that also manipulate the vqstate. Hence we must pass the State explicitly rather than keeping it opaque inside the iterator state.
merge default into bug25397
cosmetic
unmodalise vq:read_msg
implement vq:fold in terms of an iterator
Right. There were a lot of bugs. This fixes most of them. One major confusion was that both the adapter and the credit impl were trying to normalise against remote count, now it's just the adapter. Also when we get credit we need to unblock. Also there were various things that assumed our local credit could not go negative - well it can and we just need to wait for it to be positive again.
Slight improvement in clarity.
Merge bug25322
rabbitmqadmin --version
Add a way to provide reason when closing a connection
This doesn't work any more - we can't set credit until we have a consumer.
Second attempt at moving credit into the queue. This time we pretend the limiter is still doing the work.
Survive missing properties header from non-1.0 clients
Ignore initial delivery count from sender when attaching
No law says that the shortened decribed types have to be ulongs, in fact Proton sends signed longs in at least some circumstances...
Stash this here, we may find a use for it one day.
Make sure we are using the final version of the machine-readable spec, not that the differences are enormous.
consumer_mapping changed since this branch was last worked on.
Umm, add the frame names.
merge default into bug25191 and some tiny refactoring
Sort-of-pretty printing for AMQP 1.0 frames.
cosmetic rename
Unbreak SASL
send connection.{blocked,unblocked}
Merged bug25392
Add connection.blocked and connection.unblocked extension methods
Merge heads
Bit of a no-brainer.
tiny refactor
merge default into bug19375
merge bug25391 into default
merge bug25391 into default
merge bug25391 into default
merge bug25391 into default
merge bug25345 into default
merge bug25345 into default
I added that clause early in the history of this bug and it's always been wrong. The semantics of that line are just "set is_limit_active to false if the limiter is disabled", is_blocked (which only deals with the channel.flow case anyway) has nothing to do with it.
More doc
Remove unused variables
Make input and output clearer.
Merged default into bug19375
I'm slightly paranoid that people will use these. Putting them at the end and making their IDs not possible to express with the codec might help.
API change
API change
API change
Move API (sort of, I didn't want to dump a load of code here).
API change
API change
API change
API change
Add queue max length equivalence condition
Various tweaks.
Typo
Update dead-lettering due to queue length limit
Derp, use arguments rather than environment. And add a touch of documentation.
ternary operator
I realise now this should be keyed off exchange arguments, but I want to go home and I hate leaving things uncommitted.
rationalise timer maintenance - introduce a couple of helper functions and use them wherever we can - pay attention to the result of timer cancellation, to prevent   duplicate timer creation - stop all timers when a queue terminates. More out of politeness than   necessity.
merge heads
merge stable into default
merge bug25353 into stable
tidy up
merge stable into default
We refer to it as "1.0" not "1-0".
Cosmetic
merge bug25353 into stable
copy change from rabbit_amqqueue_process to slave for consistency
Use amqp_direct_connection:socket_adapter_info/1.
Use amqp_direct_connection:socket_adapter_info/1.
Use amqp_direct_connection:socket_adapter_info/1
Move adapter_info(Sock) to the Erlang client.
#adapter_info{}, and a minor cleanup.
Merged default into bug19375
Participate in internal flow control.
Merge bug25362
Vertical alignment, safety, has not was.
Turn off heartbeats in examples - they're unsupported in SockJS
Fix docs and specs.
Merged bug25327
Switch to using the stub, and therefore remove most of the reader fork (including all the 0-9-1 specific bits), and a couple of supervisors. rabbit_amqp1_0_reader is no longer involved in serving 0-9-1 when 1.0 is installed.
Stub for 1.0 support.
merge stable into default
correctly enable test
Freshen the writer fork as well.
merge bug25356 into default
actually enable the test
fail properly
Merge bug25388
Refresh the reader fork. Things seem to work (ish) now.
merge bug25356 into default
fix another bug: timeouts were broken
optimise vq:reduce_memory_use/4 invocations by suppressing the call, and thus the closure creations, when target_ram_count == infinity
get rid of vq's ram_ack_index and instead track ram and disk acks in separate gb_trees, which is more efficient.
merge bug25356 into default
fix bug in test it's a throw, not an exit
Enough tweaks to get the thing to at least boot, if not work.
Merge in default.
Resurrect.
Resurrect
Less severe failure when waiting on unselected channels
Merge bug25386
tweak: make use of rabbit_misc:rs/1
merge default into bug25345
tweak: make use of rabbit_misc:rs/1
Merge bug 25385 (into default, although it was branched from stable).
Idempotence
Merge default
Rework semantics of instantaneous rate.
oops
get rid of #tx{} and fix uncommitted_acks info item
simplify & document ordering
record pending acks in a queue rather than set in queue process Just as we do in the channel; this is more efficient for the typical ack-in-order access pattern. We depend on tags being passed to the queue process in order when ack'ing/rejecting. This requires some slightly fiddly code in the channel.
optimise ack collection for the common case of ack'ing/reject'ing the oldest tag
optimise rabbit_channel:ack/2 - moving the ?INCR_STATS call inside the fold_per_queue fun reduces   consing when stats are disabled - since this was the only call to fold_per_queue where we cared about   the result, and we no longer do, we can switch the 'fold' to   'foreach'
restrict previous optimisation, for better workingness
cosmetic
optimise "no confirms" case of rabbit_amqqueue_process:discard
optimise "route to no queues" path
common-case optimisations for delegate:invoke[_no_result]
optimise rabbit_amqqueue:qpids/1 common case
optimisation: improve performance of permission cache Don't update the cache when the permission is already in it. This saves list munching and a 'put' at the expense of no longer being strictly LRU, but that only affects pathological cases.
refactor gen_server2 debug handling - more uniformity - less code duplication - less closure creation -> performance increase
optimisation: shrink gen_server2 state slightly for a (very) modest performance gain, and slightly neater code
assert queue dlx arg equivalence and restructure code to make future omissions less likely
cosmetic
merge default into bug19375
refactor queue initialisation - get rid of all the 'undefined' setting, since that's the default - extract commonality of state initialisation
refactor: disentangle head dropping and publishing
merge default into bug25327
some more control flow abstraction
Changed my mind.
...and fix *those* tests. Phew.
I think the db tests need a rewrite really but this mostly gets them to work. The trouble is that we have new timing issues due to snapping events to 5s boundaries. I've disabled the least reliable test, but we may need to test at a lower level.
merge bug24407 into default
tweak logging
simple_one_for_one now does the right thing (TM)
Propagate out range stuff across the DB API.
Ignore queue depth for maxlen
Fix an old test that assumed no augmentation.
Explain why
Rename depth to length
API change.
Merge in bug24407.
Remove confirm_all
Merged default into bug19375
merge stable into default
merge bug25378 into stable
correct and/or confusion
cosmetic(ish)
merge bug25377 into default
silence annoying warnings, and some tidying up in the area
cosmetic
simplify syncer we don't need to track monitors
make credit waiting less brittle We were relying on running out of credit for all slaves *simultaneously*, which requires in-depth knowledge of the credit flow logic and that no other credit-requiring messages are sent to a slave prior to this.
fix bug found by dialyzer
bring up to date with 'default'
merge default into bug24407
Specs.
Don't use a closure for the usual cluster upgrade reasons.
API consistency.
Consistency with the real slave.
Explain why
Merge bug25371
Merge bug25369
Merge bug25370
Merge bug25368
Merge bug25366
Typo
Merge bug25364.
Explain
Merge bug25367
Merge bug25365
oops; put exception handling back in
More accurate reply-to handling
Merge heads
Merged bug25373
Merge bug25363.
only retain ram msgs when inserting into pending_ack which keeps memory use constant during fetch operations
refactor: return less from vq:remove
merge bug25372 into bug25327
Merged bug25372
refactor: rename vq:intern_fetch to 'remove'
cosmetic
cosmetic
refactor: extract dead lettering commonality
don't send dead-lettered messages to self() during 'reject' handling since they all end up in the mailbox, consuming memory
rename
merge default into bug25327
cosmetic
refactor: rename drop_expired_messages to drop_expired_msgs
merge bug25372 into bug25327
drop IsDelivered from bq:{fetchwhile,ackfold} since we don't need it
replace bq:foreach_ack with a more versatile ackfold
don't send expired messages to self() during bulk expiry since they all end up in the mailbox, consuming memory
refactor: less passing around of State in dl publishing
merge default into bug25327
refactor: extract stop_syncer function
oops
better fun names
merge bug24407 into bug25345 ...and move Info{Push,Pull} into Args, where they belong
cosmetic(ish) refactors on mq_sync:master_send - more sensible arg order (a folding function should generally take the   element first and the acc last) - somewhat neater handling of the acc
correct docs to reflect idempotence
consistency
optimisation: macro-fy rabbit_channel:incr_stats/3 so we can avoid constructing complex terms for stats when stats emission is disabled
small refactor
change rabbit_exchange:route/2's traversal order from breadth-first to depth-first, thus eliminating the queue data structure and hence simplifying the code and improving performance.
move tx related state fields into sub-record
cosmetic
optimisation: ditch guards on rabbit_misc:r/{2,3}
optimisation: inline rabbit_guid:blocks_to_binary/1
optimise rabbit_trace:tap_{in,out} common cases
merge default into bug25369
refactor: shorter/better names for rabbit_trace functions
optimise rabbit_amqqueue:lookup/1 common cases
optimise pmon:monitor_all common cases
optimise rabbit_channel:process_routing_result/6 - put most common clause first - inline record_confirm/3
move throttle related reader state into sub-state
move some more reader state into #connection and also clear auth_state once auth has been completed, so we don't hang on to some potentially large piece of state.
move a bunch of reader state fields into 'connection' These fields are constant, seldom read, and associated with the connection. Also, move #connection definition from rabbit.hrl to rabbit_reader - nothing else is using this and it is really private to the reader.
make reader react to flow control sooner ...by blocking when encountering content headers/body frames, rather than method frames of content-bearing commands.
merge bug25365 into bug25367
get rid of rabbit_channel MASKED_CALL macro which simplifies the code and eliminates a performance hotspot
only invoke control_throttle when necesseary
merge bug25363 into bug25365
create branch
replace credit_flow:update/3 with a macro un order to eliminate closure creation and thus improve performance.
get rid of bump_reductions it hurts performance in some cases and credit_flow does a better job
Start to write unit tests for some of the more fiddly bits of rabbit_mgmt_db.
Cosmetic
Use less state
TODO--
Prevent waiting for confirms unless selected
Fix second example
Crude WIP of range selection.
STOMP 1.1 Over WebSocket
Configurable, variable-resolution sample retention policies.
Oops
Further rationalisation.
Unbreak.
Remove dead code.
Cascading unused variables.
Bring sanity to the single connection / single channel API. See bug 23622.
Inline
Maxdepth argument checking
Confirms for HA
Show charts for connection data rates and refactor fmt_rate_* stuff to be a bit simpler and more consistent.
Merged bug25359
That should be renamed.
Render the legend ourselves, thus removing it from the chart.
That guard was needed when we were not filling in ranges correctly. Not any more.
Emit final stats event for connections, queues and channels just before the deleted event.
Since we now display stats here, let's live-update it!
Merge in default
Merge in default
Return the supervisor pid correctly, and the client pid as "extra" data, and thus prevent supervisor tree corruption and rabbit_vm:memory/0 from treating workers as supervisors.
Rewrite this bit yet again. It must be right now.
Remove unused variables
Dead-letter persistent messages differently
Whitespace
Ensure TTL conditionally
efdb7a431aa1 broke aggregation, not sure what I was thinking. Revert.
Shortcut
Maxdepth checking with confirms and DLX
Sync API / UI.
Emit an info item as soon as we start, for greater responsiveness.
Fix accidental change
Cancel sync
Display sync status.
Shorter
Better maxdepth checking
Ensure rabbitmqctl list_queues remains responsive during sync, and emit stats events too.
merge stable into default
It's important to respond to this too.
merge bug24524 into stable
Remove docs since they're on the web now.
stable to default
Merge bug25353
Reminder
Limit queue depth
That changed some time ago.
I think we've done this every other way, this must be the right way. Take floor for queries and ceiling for updates, in an attempt to avoid the drop-at-the-end problem.
In order to be able to sanely read out a subset of the samples we can't store deltas. But most of the need for deltas was misconceived anyway. Removing them makes most things simpler (lose old_stats) but it does mean we have a fiddly old time adjusting vhost_stats on queue deletion. Oh well.
merge stable into default
merge bug25341 into stable
Different preferences per rate/chart.
Slight appearance tweaks.
Correctly decrease aggregated num of queued messages when a queue is deleted.
Don't project events into the future, it's more trouble than it's worth.
In fact, let's forget about apportioning altogether. When something hibernates and we don't hear from it for a while, we don't want to assume any delta that happens in the first event after it wakes up should be smeared across the whole time it was asleep.
Oops, start deducting from the total count, not 0.
Don't ask for the range to extend into the future, that only asks for trouble.
make sure the stats and rate timers don't keep each other alive
Be more simplistic about apportioning, don't think in terms of fractional timeslices. This turns out to give much saner results.
Introduce the idea of a range for sample queries, and make sure we fill it.
Oops, forgot about that.
Rename
slight tweak
Rearrange the source file to try to put similar functions together.
Merge heads
Changelogs for 3.0.1.
Merge stable
Added tag rabbitmq_v3_0_1 for changeset 8e2d75025a50
Merge bug25352
Oops, these too
"javascript:" URLs seem to be confusing MSIE (or maybe sammy) for some reason I can't understand. Let's be more jQuery-ish here as elsewhere, and now the form submits properly after one of these links has been clicked.
Added tag rabbitmq_v3_0_1 for changeset 91df77f12b7f
Removed tag rabbitmq_v3_0_1
merge stable into default
merge bug25351 into stable
Those catches do no really do anything.
handle basic.nack in federation_link
Call application_master:get_child/1 more like OTP does.
application_controller:get_master/1 can return 'undefined'.
merge stable into default
merge bug25347 into stable
cosmetic
Fix a couple of partition-related specs.
Well, that was a bit less super than hoped for. Make the application behaviour return a real supervisor, since it will be expected to respond to messages as such.
(Start of an) essay.
?? --.
Since it's essentially trivial to do so now, let's show some aggregated data for vhosts. Nice for multi-tenanted hosting I guess...
Added tag rabbitmq_v3_0_1 for changeset d538aa1bb716
Remove spurious 3.0.1 changelogs.
remove compiler warning
Added tag rabbitmq_v3_0_1 for changeset 7e5c89de1927
Merged stable into default
Merged bug25346
And also also while we're here, test old and new ports.
Merge stable
Clear the debug field on page change.
Merge heads of stable
Merge bug25348
Guard partition warning for non-monitoring users.
fix spec bugs
passes the release OS as a variable
Make syncing idempotent.
Add rabbitmqctl sync_queue, and make it synchronous. Also fix the fact that we were treating "no queues to sync" as a 'normal' crash of the syncer, which... no.
refactor: ditch mutual tail recursion in favour of one stack frame it's clearer that way
cosmetics
refactors the sed bits inside the Makefile
And while we're here, those should be updated too really.
Substantially enhance definitions test to catch more of this stuff
Fix key / name confusion
Added tag rabbitmq_v3_0_1 for changeset 2270c0c13edf
Added tag rabbitmq_v3_0_1 for changeset 20c63860bf0d
Added tag rabbitmq_v3_0_1 for changeset 38a6a0e22a4d
Added tag rabbitmq_v3_0_1 for changeset cdf80b9ac08a
Added tag rabbitmq_v3_0_1 for changeset 74315805fd91
Added tag rabbitmq_v3_0_1 for changeset 80c979f346b1
Added tag rabbitmq_v3_0_1 for changeset ebf36c55c8ee
Added tag rabbitmq_v3_0_1 for changeset 2bf0f475ca4e
Added tag rabbitmq_v3_0_1 for changeset f7520b6c3362
Added tag rabbitmq_v3_0_1 for changeset c4f37a1633d0
Added tag rabbitmq_v3_0_1 for changeset 2f89543bb3cc
Added tag rabbitmq_v3_0_1 for changeset 41621b9668f5
Added tag rabbitmq_v3_0_1 for changeset 874d91d46c11
Added tag rabbitmq_v3_0_1 for changeset b7c5ccade0c7
Added tag rabbitmq_v3_0_1 for changeset 3642f66e0110
Added tag rabbitmq_v3_0_1 for changeset 25ef780e2094
Added tag rabbitmq_v3_0_1 for changeset 7f50401e1f70
Added tag rabbitmq_v3_0_1 for changeset 43f92e93c7d0
Package changelogs for 3.0.1.
Merge default
Get rid of that define.
Remove old samples on a timer.
Couple of tiny corrections to docs.
I am already not sure this is right. But remove old samples during read as well as write (it's an improvement but insufficiently global).
send expired messages to self() one at a time which simplifies the code a fair bit and also means we don't build up a potentially huge intermediate data structure.
Make sure the sum of the apportionments is always the same as the total number of messages we are apportioning.
Merge stable into default
Merged stable into default
Merge bug25330
Merge bug25330
Tweak the regex, align, and a test.
Normalise credit flow quantities.
Special case the 3.0.0 version check.
Move the version check fun to misc, and anchor the regex.
merge stable into default
merge bug25341 into stable
merge bug25340 into stable
merge heads
infinity is always a valid shutdown reason
reduce distance to OTP - pattern match in case, not-found is always 'false'
oops - remember to guard specs for R12B03 compatibility
reduce distance to OTP - {temporary, Delay} is not a valid restart type
use ?MODULE macro when appropriate
cosmetic - reduce distance to OTP
Don't blow up if we end up talking to not-a-supervisor.
This is a worker, not a supervisor!
reduce wrongness
Send messages immediately if we are not busy.
Establish stable branch
Establish stable branch
Establish stable branch
Establish stable branch
Establish stable branch
Establish stable branch
Establish stable branch
Establish stable branch
Establish stable branch
change comments to reflect merging with R15B-03
stable to default
Merge bug25335
Establish stable branch
remove pre-0-9-1 cruft
Merged bug25328
yet more tests
test more
add test for vq:fetchwhile
Display per-node RabbitMQ version again. But only if it's interesting.
Compare RabbitMQ versions ignoring the "patch" version (as semver.org calls it). Not that we are full on semver, but close enough.
get rid of last remaining cross-node fun in rabbit_amqqueue There was no need for the rabbit_misc:with_exit_handler in safe_delegate_call_ok, since the error condition caught be that is also being caught by the check in 'filter'. Getting rid of the superfluous check allows us to just invoke delegate:call and thus get rid of the funs. Plus inline the lot.
move generic cross-node funs from rabbit_amqqueue to delegate since the latter changes less frequently
merge bug25321 into stable
merge default
Whitespace
STOMP 1.1 Over WebSocket
Fix the text version.
Draw a chart for queue lengths as well.
Note to self.
Fix a couple of stupid crashers.
Phew. Right. Rework stats handling in the management DB. Now when we get a stats event we apportion it to a time bucket, and then aggregate those buckets together in various ways. When we want to return anything in response to a query, we just go and read it - well, nearly. We still aggregate at query time for the overview. But that's aggregating per vhost rather than anything too fine grained.
Emit events on vhost creation / deletion.
merge stable into default
merge bug25331 into stable
explain
ensure that we don't attempt to start the amqp_client application whilst the application controller is shutting things down
document addition of find_child/2
oops - we mean 'not is_permanent' here
merge default into bug25328
unbreak qc (hopefully)
merge default into bug25328
remove unused state var We were diligently maintaining ack_msg_id, but never actually using it for anything. And it's always been like that.
return to a simpler, better BQ:dropwhile, and introduce 'fetchwhile' ...to cover the remaining required functionality, including the ability to process messages along the way, pass around an accumulator, and get hold of the IsDelivered flag (not needed in our use case but included for similarity with 'fetch').
handle {permanent, Delay} for dynamic children
correct docs for final handshake
handle the case of the Syncer dying right at the end which could previously leave the master blocked, waiting for 'next'. And move the unlinking, which allows us to ensure we don't end up with stray 'EXIT's.
cosmetic
extract logging
merge heads
no more unused vars
observe use_specs
Don't do anything if we decided not to do anything.
explain why we're not using lists:keyfind/3
reduce distance to OTP
Merge heads
Set depth_delta to undefined if something goes wrong. Or indeed if something goes right, but in that case we are about to overwrite it.
cosmetic, plus correctly identify provenance
Update diagram.
Make sure newly-started slaves don't respond and confuse things.
Call get_parent/0 less often...
Respond to FHC.
Only respond to 'EXIT's from parent / syncer.
Have slaves determine whether they need sync.
Reverse master/syncer communication.
Oops, didn't even compile that last one.
Merge in default, and use the fold-stop thing rather than throwing.
moves sed invocation to bash script
merge bug25303 into default
expand test coverage to at least two iterations of delta_fold previously it had no test coverage at all Also, re-use the same vq for all fold tests, for efficiency.
renames package to include "mac" in it
cosmetics
removes empty folder from the release
refactors code to extract/load plugin code
tweak
cosmetic
Better quickcheck test of interruptable backing queue fold
cosmetic
cosmetic
removes unnecessary comment
removes unreachable expression
Provide early termination for backing queue fold
There is no TRef1.
Unshorten name.
We should flush here too, to not leave a junk 'DOWN' message when the syncer exits. Also there's no sync_complete_ok any more...
Oops
Diagram.
Don't expose the BQ to the syncer.
Spawn a separate process to send out messages from the master. This lets us simplify some monitor and credit_flow handling. Thus also stop sync_receive_credit from being a spinloop.
Oops
Various QA cleanups
merge default into bug24407 ...which involved a minor tweak since #message_properties.delivered is gone
re-merge bug25303 into default
fix bug
simplify errors
Handle update_ram_duration correctly.
merge default (again)
simple_one_for_one now covers the 'terminate' case properly
Merge bug25323
merge default
tweak for {Mode, Delay} restart types; tweak test timings a little
stable to default
Merge bug 25325
Remove stray tag, fixes bug 25236
cosmetic
Don't accidentally match query for single exchange, queue or parameter.
Move the sync stuff to its own module
Don't hang on shutdown
remove cruft
React to memory monitor and FHC messages.
Merge in default
Improve progfess logging.
Send the sync_start over GM to flush out any other messages that we might have sent that way already.
Fix bugs in previous commit, and be rather more thorough about monitoring and cleaning up credit flow.
managed restarts, try-again-restart, cosmetics
merge stable into default
merge stable into default
merge bug25309 into stable
merge bug25309 into stable
recover from accidental merge with default
merge bug25303 into default
cosmetic
merge stable into bug25309
Cosmetic
recover for accidental merge with default
Add spec, fix API, refuse to run if there are pending acks, return status, don't throw away state.
Merged bug25311
merge bug25309 into default
merge default into bug25309
Untuple fold function
mark all messages enqueued in the slave as 'delivered' which is a much better than the set_delivered logic, which we can now get rid of. In doing so it also becomes clear that having the 'delivered' flag in the #message_properties is less than ideal. It is mutable and we never bothered updating vq s.t. it sets the flag correctly. So lets get rid of it and add a parameter to bq:publish instead
merge bug25324 into default
'pid' is a valid INFO_KEY and some code, namely the clustering tests, rely on that
cosmetic
merge stable into default
merge bug25320 into stable
grrrrrrr
Fix expiry
Merge bug25303
Oops
Flow control for the sync process.
Log progress, and an important optimisation.
Merged stable
Merged bug25320
Cosmetic / clearer.
Add message properties to backing queue fold
Eager mirror synchronisation.
merge bug25303 into default
cosmetic
Merged bug25315
more precise signature
don't evict messages from RAM when inserting them into pending_ack
refactor: vq:ram_ack_index doesn't need to be a gb_tree a gb_set suffices
Better type signature
Propagate API change
Merge in default
Wake up all queues after policy change.
We need to make sure if the link doesn't find the exchange any more then the whole sup shuts down. So use {stop, gone} instead and detect at the appropriate point. Sadly this spews into the logs, but it should be a rare condition.
Backing queue fold tests
grrr
cosmetic
tiny refactor
merge bug23625 into default
merge bug23625 into default
Explain
Give clearer error messages, remove a redundant export.
Refactor backing queue delta fold
Handle deleting children if we return 'ignore' from the link.
rabbit_mgmt_db:format_message_queue useful for debugging
Make the global counts into links.
stable to default
Redirects should not contain newlines
Establish stable branch
Oh, and the tests should pass.
Identify queues by name.
QC test for backing queue fold
Explain
Don't duplicate name.
Merged default
stable to default
Merge bug25305
merge bug25314 into default
Rename backing queue fold
propagate API change
bq api tweak: don't include remaining message count in fetch/drop result
Merged default
Fix a race where we decide on the BQ before writing the #amqqueue{} to Mnesia, then the policy changes and we are therefore not notified. We now only make the initial decision after we can be assured we will be informed of subsequent changes.
Merged stable
Merged bug25306
merge stable into default
merge bug25301 into stable
leave the ram_msg_count unchanged in BQ:fold since we are not moving messages *into the queue*
add test for invoking bq:fold when messages are on disk
assert after fold
Minimal backing queue fold
refactor: simplify rabbit_exchange:serialise_events
simplify & optimise rabbit_exchange:callback/4
Carry on if an individual notification fails.
Check if the exchange still exists, and explain why.
branch from stable, expire messages eagerly
Useful guard.
Start stable branch.
Don't try to assert result of {add,drop}_mirror.
Make start/stop mirroring into a cast not a call.
Merged bug25302
BQ quickcheck postcondition for drop
some quick check tests all work ok, but then again that's also the case when I completely break vq.
stable to default
Merge bug25304
Revert a1805287bf36; not the right solution.
add test of vq:drop
Set location using sammy, not native browser thing. Seems much more reliable on MSIE.
assertion
ack unroutable dead-lettered messages straight away thus plugging a leak
MSIE doesn't have Array.indexOf(), use jQuery.inArray() instead.
create 'stable' branch
Establish stable branch
remove unused vqstate field
Merged stable
Merged bug25300
Merged stable
Merged bug25300
Merged stable
Merged bug25300
introduce bq:drop/2 and use it in slaves to prevent msg fetching - 'drop' is the same as 'fetch' except it doesn't read messages from   the msg store - slaves never fetch messages, they only drop them - technically, mq_master:drop doesn't need to exist, since 'drop' is   only invoked by the slaves, but we provide an implementation for   completeness.
Merged stable
Merged bug25300
format mq slave message queue to facilitate debugging
address -> host.
Establish stable branch
address -> host, and get the name approximately right too. No rDNS, but that would have to go via SockJS...
Establish stable branch
address -> host.
Establish stable branch
address -> host.
Establish stable branch
cosmetic
optimise "no messages dead-lettered during expiry" case
Added tag rabbitmq_v3_0_0 for changeset 4b42d63742c4
Added tag rabbitmq_v3_0_0 for changeset b843a080174e
Added tag rabbitmq_v3_0_0 for changeset d809ae76b053
Added tag rabbitmq_v3_0_0 for changeset 533d4dd9f8e2
Added tag rabbitmq_v3_0_0 for changeset 68471fecf6a5
Added tag rabbitmq_v3_0_0 for changeset 18a83d635585
Added tag rabbitmq_v3_0_0 for changeset 111b03140e81
Added tag rabbitmq_v3_0_0 for changeset 48e94bacdc4b
Added tag rabbitmq_v3_0_0 for changeset 63609766d762
Added tag rabbitmq_v3_0_0 for changeset 460d29abbb95
Added tag rabbitmq_v3_0_0 for changeset c75357c63daa
Added tag rabbitmq_v3_0_0 for changeset de8c0e9d7ab4
Added tag rabbitmq_v3_0_0 for changeset eed5df227e09
Added tag rabbitmq_v3_0_0 for changeset d5886d9888f1
Added tag rabbitmq_v3_0_0 for changeset 6f45e653df63
Added tag rabbitmq_v3_0_0 for changeset 14c1863c7545
Added tag rabbitmq_v3_0_0 for changeset 72c5a6e2dee4
Added tag rabbitmq_v3_0_0 for changeset b7a660ce4855
Changelogs for 3.0.0
optimise this brings perf roughly on par with default
identify queues by name rather than pid in channel stats - in deliver_to_queues, take the result of rabbit_amqqueue:lookup and   use it to a) add entries to a QPid -> QName mapping in the state   for all master pids, and b) setup monitors for all master pids - for the stats creation in deliver_to_queues, map the DeliveredQPids   to the associated QNames, via the mapping in the State. Note that   this will ignore slave pids, hence we only get one stat per QName   (which is good). Also, in the event that the master died between   lookup and delivery (and the delivery was 'mandatory'), we will not   record any stats at all. - in monitor_delivering_queue, which is called by basic.{consume,get}   we add to the mapping - in ack/2 we use the mapping to obtain QNames from QPids, and use   that in stats. Since a queue may have vanished prior to the   ack/reject arriving, we need to handle the case of no entry being   present in the mapping for the given QPid. - in record_sent we have the QName anyway, so can just record stats   against that instead of the QPid. - in the 'DOWN' handler we use the mapping to determine the QName from   the pid, and pass that to erase_queue_stats, which can now remove   entries based on the QName. We then remove the entry from the   mapping.
propagate API change
cleans up unused/duplicated functions
merge default into bug23625
merge bug25297 into default
plug leak
Matthias keeps asking "where are the pretty charts?" So here they are.
cosmetics + comments
removes todo comment
moves the sed invocation to its own target
merge default into bug23625
fixes erlc invocation for rabbit_release.erl
fixme
refactor stop_later - s/stop_later/stop - since it's always called with Reason=normal there is no point   passing that around / storing it
moves rabbit_release to the standalone packaging folder
renames generated tarball
renames release folder to standalone
moves files from mac folder to release folder
Merge default
Problem affects IE8 too.
Merge bug25295
refactor: extract some helpers ...to make it abundantly clear which queue operations amount to an ack/requeue.
refactor: simplify dlx logic top half
cosmetic
cosmetic
Add ExplorerCanvas and Flot.
inline (and avoid misleading var name in the process)
First pass at time series for statistics. Easier than I thought it would be.
always monitor queues from which we are (possibly) delivering messages so that stats associated with these queues are cleared out from the channel's process dictionary when these queues disappear.
merge default into bug23625
refactor stats recording in channel - specify stats type explicitly rather than inferring it from the   structure of the key (yuck!) - s/maybe_incr_stats/incr_stats
merge default into bug23625
inline
reference queue by name in consumer events
emit names instead of pids in queue process' queue events
restart branch
merge bug24623 into default
Bug 25232 broke MSIE completely. Fix that, and explain the weirdness.
If dynamic_load() is fast enough we can end up in dispatcher_add() before exiting that loop - make sure extension_count is already set.
Merged default into bug24623
It's 2012 and I'm still fixing layout in Microsoft Internet Explorer.
Work on older Erlang versions
Merge bug25251 (very late!)
Merge in default
Merge bug 25122 (very late!)
merge bug24915 into default
merge heads
tweak - garbage_collect(self()) -> garbage_collect() - rename some funs / msg tags - cosmetics
Merge bug25178
And, err, this thing isn't needed any more.
Explain why
rabbit_node_monitor traps exits, so shutdown allows us time to flush any pending file system operations before the process dies
roll back to (almost) default - keeping the extra error information when corrupt cluster status files are found
merge default into bug25178
Turn off file-based client persistence in tests
test triggering of memory alarms
Merge bug25235
Move this closer to where it's used.
Don't hibernate, GC self instead.
Start background_gc earlier
Remove define, change message, silence dialyser.
Specs
cast not call.
Make this a bit clearer.
More refactoring
Use background_gc when the memory alarm goes off.
Decrease geometrically as well.
Profiling suggests that garbage_collect/1 is in fact far cheaper than processes/0, so just GC all waiting processes. And therefore reduce the frequency we call this with.
Only GC idle (waiting) processes. Filter tiny processes from the list (to make generating the list more efficient when there are huge numbers of processes). Probabilistic process selection.
Unbreak web stomp tests
Tests require Java AMQP
Background GC.
Don't drop reader stats ever, don't drop channel or queue stats from just before hibernation.
Fix idiocy
Oh yeah, change those too.
Change port out of ephemeral range.
Change port out of ephemeral range.
replaces boot files accordingly in rabbitmq-defaults
specifies boot file for erl calls
Reinstate the HANDLE.EXE warning (and make it a bit nicer).
Variable rename to prevent accidental match
Take two monitors into the shower.
Explain
Make the app marker into a gen_server
Further clean
reduce distance to default
introduce a noop process at the head of rabbit_sup's children, which we now monitor instead of the rabbit application's pid
Merge bug25260
Detect missing subsriptions
merge default into bug25260
Make priority_queue:len/1 fast.
Doesn't make sense to drop calls.
Fix arities, support 'drop'.
Drop stats events when we get behind. Oh, and prioritise calls.
fix tests
API change
Pass length to prioritise_*
pass q records instead of names between recovery phases That way we can guarantee that the qpids we are talking to in the start phase are the same as in the recovery phase
defer final phase of queue recovery until routing recovery has completed That way dead-lettering during the final phase has all the correct routing in place
updates to new deliver API
cosmetic
Refactor header generation
More instances of 55672.
merge bug25260 into default
adds file to generate the erlang release
adds Makefile for standalone mac release
adds the erlang base dir before calling erl
Refactoring for 1.2 support
Apply TTL after DLX, during recovery we want to have a working DLX when messages are expired.
Tests for 1.2
Re-merge bug25232 for i18n fix.
i18n fix.
merge bug25232 into default
merge bug25232 into default
inline
First draft of support for 1.2
merge default
remove cruft
Make "rabbitmqadmin help" do the same as "rabbitmqadmin --help".
merge bug25151 into default
And add those to bash completion that nobody but me uses ;-)
Sorting support
merge bug25277 into default
propagate result
send out the alarm event before gc so subscribers can react to it quickly
cosmetic
Merge bug25265
merge bug19376 into default
use ~p after all otherwise we end up with {leftover_string,[102,111,111,98,97,114]} in the logs
Simplify
GC the world when memory alarm goes off.
We were duplicating 'name' in node stats - fix that, and thus lose that ugly "| _".
Merge bug25273
Merge bug25266
Merge bug25269
Use binaries in headers
Interoperability fixes
macrofy
merge bug25266 into bug25273
merge bug25269 into bug25266 which entails switching from funs to macros for all the new property decoders we introduced
switch back to using macros in order to eek out a bit more performance but at least make the macro signature uniform and pull out the conditional
Handle sort keys properly too.
Merge default
cosmetic
tweak
Merge bug25268
fix bug
fmt_node
fmt_node
Merge heads
Change the node formatter we were using on the ports/contexts list to be more sensible, and use it everywhere.
drop property codec tests since that part of the code is now internal and code gen'ed but we can still test the table codec
Merged bug25149 into default
Merged bug25149 into default
code gen property encoder pretty much symmetric to decoder Involves renaming of the decoder helper funs, since those names are more meaningful for the encoder
merge bug25266 into bug25273
check_expiry_size => check_expiry
simply >= 0 checking
better function names for ttl and expires checking
fix type specs
refactor parse_expiration
consistent error messages for invalid params
use precondition_failed for error notification
Merge bug 25259
Merged bug23935 into default
Merged bug23935 into default
handle all types in property decoder
merge bug25269 into bug25266
merge bug25268 into bug25266
be more assertive in property decoding
simplify property decoder functions instead of macros, which gives the same performance in the fast "no properties" path and only causes a tiny loss (if any) otherwise.
fix tests
ditch superfluous type mapping in codegen
cosmetic
cosmetic: vertical alignment / shrinkage
tiny refactor
merge default into bug25151
cosmetic
Argh; it's not a race at all, it's this code that I chopped out by mistake.
Store login information in a session cookie - refresh no longer logs you out.
Merge bug23225
Merge bug23225
Revert those to what's on default, I broke sorting.
Use that fn
Use arguments rather than backing queue status in the test. Fix column selection so this is actually possible. Remove a case where we create atoms from user content. Tidy slightly.
Fix tests from 382c4aa21972 (oops!), and make failures more comprehensible.
Rename "key" to "name" one more time, unmandatorise vhost since it's magic in rabbitmqadmin anyway, add some bleedin' tests.
Touch of help with policies.
add rabbit_event to rabbit_common app since it is now needed by rabbit_writer
only trigger stats emission from writers in the server (and not the Erlang client)
Merge bug25262
Merge bug25263
It is of course possible for two users of the rabbitmq-mochiweb API to try to start two differently specced listeners on the same port. Provide a sane error message when that happens, and also clean up error handling in lookup_* a bit. This should really have been in 25259. Ah well.
oops
Redirector should not blow up if presented with an HTTP request with no host header.
fix heinous bug
A way to turn off the redirect
sort list_* results
ensure connection stats emission for write-only connections We set up a stats timer in the writers but rather emitting any stats directly from there we just get them to 'ping' the reader, which will then emit stats based on its own timer.
I know, why don't we get those the right way round? *headdesk*
Merge default into bug19376
Fix that too
Fix formatting of hostname-or-IP-address
Merge default
Merge default
Merged bug25259 into default
Merged bug25259 into default
Since this was unclear.
feeding of vertical alignment obsession
Unify address and host. Stick ports in the state, just because we're grabbing them anyway.
peer_address is no more.
Merge bug25164
refactor: s/lookup_absent/not_found_or_absent and s/not_found_or_absent/not_found_or_absent_dirty and make the signatures match
merge default into bug25164
revert 6982ce6874b3 => this broke ttl handling for rejects and ttl=0/immediate equivalence
if per-queue ttl is enabled, don't skip dropping expired messages
Support redirects. Batteries included? Don't think so.
More clarity.
It's a /5 now.
Update comments for accuracy and usefulness.
Drastic trim of now-wrong documentation.
HA optimisation: don't broadcast 'drop' when nothing has been dropped
messages can always 'potentially' expire
s/55672/15672/g
Update
Ignore bind failures
Provide a mechanism to ignore bind failures
Redirect to 15672.
Revivify this branch (and remove misleading text).
Redirecter.
Remove pointless wrapper function
verify the basic.expiration >= 0
Merge ancient head (noop)
Update
Figure out why it didn't start.
Fix tests.
Also while we're here, let's lose that. I don't think it works.
While we're here, let's use ETS like a sane person instead of abusing the application environment.
Update for the new way of doing things.
Simplify rabbitmq_mochiweb quite a bit. Remove the ability for users to configure contexts and listeners in rabbitmq-mochiweb, alter the APIs so that users of rabbitmq-mochiweb (e.g. mgmt) supply a listener, presumably from their own config. Also remove rabbit_mochiweb:register_authenticated_static_context/6 as nothing has used it for ages, remove some dubious error handling from the registry (let it crash!) and merge rabbit_mochiweb_sup and rabbit_mochiweb_web as they are so interlinked.
Store name, host and peerhost as binary in the first place.
fix breakage introduced when merging bug25244 'default' had acquired a new call site for append_table_header
fix R12B-3 build breakage looks like one cannot define two macros with the same name but different arity
merge default into bug23935
merge bug25258 into default
merge heads
keep track of connection name in reader state That way we won't trip over socket errors when obtaining the name later on. Should also be more efficient.
cosmetic
These should be binary.
Merge default
Merge bug25244
Merge heads
Merge bug25244
An extensive list of transformations lead me here. I think this is more readable.
cosmetic
Merged bug25236 into default
Rearrange args to put the big structure we're working with at the end; more OTPish. Yes, rabbit_misc:table_lookup and rabbit_misc:set_table_value get this wrong, but we should not copy that.
Refactor a bit
make basic tests fit into rabbit_tests a bit more cleanly
no more simple_one_for_one_terminate; include support for dynamic_db
Merge to default again
Formatting
unify treatment of missing and invalid routing headers
Merge bug24719
Shorter.
refactor
migrate rabbit_basic tests to rabbit_tests
Merge bug25254
stop reading when losing frame sync
Remove if_mirrored_queue/2, it's not buying us anything in terms of avoiding races.
Since bug 25243 we can never have the situation described in that comment - so remove the extra call to update_mirrors0/2 and get start_mirroring to start the mirrors itself. I think this is clearer.
Merged bug24856 into default
merge heads
remove incorrect/out-of-date comments - the failure type of {un}bind was corrected to a channel-level error   in 0-9-1 - bindings to internal exchanges are ok; publishing isn't, and we   check for that - bindings to the default exchange *aren't* ok, and we enforce that
Policies have now been merged, update for that.
Merge default!
Yet another way in which add_mirror / drop_mirror "failing" can be OK really.
correct docs
remove cruft from display of missing plugins
Work in progress. Lots of (reverse) costmetic changes, pull over count_children/1 and move things around a bit. The OTP style of dynamic child handling hasn't been merged yet, so we're not even compiling yet.
we can have both missing plugins and missing dependencies
simplify
Merge bug 24991
merge default into bug24719
Merged bug25243 into default
(un)cosmetic - reduce the diff
re-order things a bit and pretend use_specs doesn't exist for now - closer diff with otp supervisor
fix typo
merge default
merge bug25203 into default
consistency
refactor 'reset'
betterness - remove debug logging - actually log something - rabbit_log isn't operation at this point during startup so we need to use the plain error logger - be less clever about config format checking - if it vaguely looks like a legacy config then assume that, otherwise assume it's a new style config. - be more helpful in the warning message
s/append/prepend
fix spec
merge default
accumulate invalid headers carefully, considering even misconfigured x-invalid-headers
typo
better error message for `join_cluster'
oops pt 2
`cluster_nodes(all)' instead of `nodes()' in `force_reset()'
handle legacy `cluster_nodes'
oops
we do not 'append' to the list
test for correct prepending of table headers
merge default
Merged bug25053 into default
move invalid headers into a special 'invalid headers table' header
re-order record definitions so they match the OTP supervisor
Merge bug25167
remove the `leave_cluster' refactor
Merged bug25237 into default
post merge cleanup
don't crash when appending table headers if the previous header wasn't an array
oops
merge default into bug25164
better error messages for 'absent' queues in binding commands - change binding:call_with_source_and_destination/3 to replace {error,   source_not_found | destination_not_found |   source_and_destination_not_found} with {error, {resources_missing,   [{not_found, #resource{}} | {absent, Q}]}}. - the change ripples through rabbit_channel:binding_action, which can   now produce nice not_founds. - We now only report one of the errors when there is something wrong   with both source and destination. I reckon this is acceptable; we   could do better but it would involve a fair bit of extra code.
If the current master is currently not in the nodes specified, act like it is for the purposes of suggested_queue_nodes - otherwise we will not return it in the results.
comment
merged default
Merge bug25238
merge default
Correct regexp patterns for tests
More accurate specs.
Fix policy info items
Slightly surprised that compiled on R15B02 - but it doesn't on R12B-5. Fix CI + nightlies.
better error messages for 'absent' queues in various commands - move channel:absent/1 to misc, since we need it in multiple modules - change amqqueue:with/3 s.t. the error fun is invoked with   not_found|{'absent', Q}. - let this change ripple through to with/2, making it return either   error. This in turn has just two call sites   - in 'queue.declare' in the channel, which we expand to handle the     'absent' case (producing a descriptive not_found error, as per     above)   - in mq_misc:if_mirrored_queue, whose callers currently do not     handle errors at all - see bug 25236 - let the change also ripple through to with_or_die, handling the new   'absent' case as above. This takes care of passive queue.declare. - with_or_die is called by with_exclusive_access_or_die. This takes   care of basic.get, basic.consume, queue.delete and queue.purge
better error messages for 'absent' queues on declaration - change amqqueue:internal_declare to return {absent, Q} instead   of 'not_found' - let this ripple through amqqueue_process:declare, stopping with   {absent, Q} instead - that in in turn will end up in in amqqueue:declare/5. Instead of   inovking misc:not_found(QName), which was EXITing, we make {absent,   Q} part of the API. - at the call site in the channel we handle the new {absent, Q} case   and produce a nice error message.
Adhere to the gen_server2 API w.r.t handle_info
Get the web app to do authentication, and add a logout button
Don't request auth if the user already provided it.
Don't consider empty username and password to be invalid
Import bae64 encoder
merge bug25227 into default
merge default
merge bug25227 into default
merge bug25227 into default
merge default
Only authenticate connections to /api/*.
Merged bug25142 into default
Merged bug25142 into default
Merged bug25142 into default
Merged bug25142 into default
Merge bug25168
Typo
Fix appearance of broken exchanges
Fix appearance of mandatory multifield.
Everywhere else we say "disc" when clustering. Note that change_cluster_node_type will actually accept either spelling.
updates exchange functions to latest rabbitmq release
Typos and clarity.
Merge bug25220
Merge bug25220
There is only one call site and it's only ever a binary.
We can shorten some function names since we must be talking about bindings here.
Remove lift_err/1.
Nomenclature
s/key/name/
s/key/name/
s/key/name/
s/key/name/, and a couple of other minor tidyups that I noticed at the same time.
Refactor
Cosmetic + show non-string nodes params + display "none" when params missing.
Abstract base64url/1.
Move to using "real" base64url encoding from rabbit_misc. We need to change our separator, since _ is now valid in the second half.
Wow, I think that's the stupidest thing I ever did. Added to test bug 25205, then accidentally committed.
merge heads
cosmetic
updates to latest rabbit release
I feel a great sadness.
Move host and peer_host to creattion since they will not change now.
Claw back some horizontal space by shortening connection and channel names in lists to remove the destination address, and shortening exclusive owner name to "Owner".
cosmetic
Oops
Remove special casing.
Augment with the host too.
OK, I prefer this. Patch the dns lookups into connection_string, this makes names come out correctly for channels, stomp, mqtt and means we can remove some special casing from mgmt. Remove the extra process. Add a mechanism to disable the whole thing in case people have broken configs.
Symmetry. Link to the spawned process. Remove i/2 grossness.
Merge default
Merge default
Merge bug25215
Rearrange order of args to gm:start_link/4 since it seems to make invocations more compact. Curiously I did not need to rearrange the spec as it was already that way round :-)
Cosmetic
Merge bug25205
fix qc tests
merge default into bug25168
complain when running 'proper' and there are no tests Twice already I wasted way too much time tracking this down.
Switch to a hashing scheme that I find more aesthetically appealing. And in doing so patch around a bug in not-found handling, and add a test for it.
Abstract properly, rename.
reinstate rabbit_vm:memory/0, accidentally stripped out whilst reverting changes
Remove this, we don't test other not allowed cases.
Merged bug25230 into default
Federation tests tend to spam /tmp rather, let's be a bit more civilised.
And add a test for binding propagation.
Fix tests affected by binding ids
Merge default
Assign IDs to bindings
unused variable
Slightly less minimal, and even more correct.
Be slightly more minimal, but also more correct, about how we identify the downstream in a binding - it wants to be the same as the bit after the "->" in generated queue / exchange names.
Merge default
Oops, we were looking up the nodename with the wrong vhost! Umm, let's use our local one.
Update the active suffix slightly earlier, since we'll be looking at it in add_binding.
Unused variables.
It's good to proof read before you commit.
Attempt at an explanation.
merge default
Log Rabbit / Erlang versions on startup, and fix the stop message.
wrap the whole start after all, and use local_info_msg/2 to avoid duplication
I think this logic is right now. It probably deserves an explanation though.
TODO--
Merge bug21413
oops
Merge bug25196
do not couple gm with rabbit_misc
use the worker pool for gm mnesia txns
merge default
revert to a79f54b909f
Add policies and parameters to "rabbitmqctl report"
Explain why priority is considered 'json'. Also make vhost not mandatory, we default to '/' everywhere else.
Handle things we know to be specially JSON in listing as well as declaring. This behaves much more intuitively.
Unused variable
QA feedback
Merge default
Oops
no more blind confirms
publish_delivered(false, ...) -> discard The two really are the same. Since 'discard' doesn't need the message or props, there is less stuff to pass around over GM.
Remove some odd duplication, cosmetic.
As far as I could tell validation for "exactly" was completely broken. Remove attempt at abstraction. Also validate that mode=all does *not* have any params.
Merge default
Fix formatted error handling as broken by Matthias in 891e659f0e77.
I think it's clearer if priority is always set.
Define rabbit_policy entirely in terms of parameters, don't go mucking about in mnesia.
cosmetic
one less place to equate mirrors with nodes
Cosmetic
We should probably standardise on calling this "Pattern"
Another lurking "Tags"
We call it set not add everywhere else.
We call it "set" not "add" everywhere else.
Refactor
Refactor a little bit. And they're Keys, not Tags.
merge bug25202 into default
cosmetic
merge default into bug25202
merge heads
compare pids instead of nodes in slave's handle_call/gm_deaths
Merge bug25225
remove comment that doesn't make any sense and is irrelevant
merge heads
refactor: don't track slave's master_pid separately
Typo
Make sure we don't stomp on GMPids if a slave manages to get to Mnesia before us.
We don't need the 'existing' records, and without them we don't need to compare GMPids for sameness.
simplify
merge default into bug25202 ...and in the process inline mq_slave:forget_slave and fix a bug in it (it was looking at the wrong element of the tuple)
refactor: slightly more sensible signature for add_slave
refactor: correct confusing variable naming
Link to the website.
Big red network partition warning.
Emit a partitions info key
We can be partitioned from more than one node. And ignore the starting_partitioned_network, it seems to get copied across the network without marking which node it is from!
Rename and refactor policies
merge slave 'confirm' decision making and action similar to what we did in rabbit_amqqueue_process
Cosmetic
Updates for renamed policy API
Updates for renamed policy API
refactor: handle all msg statuses uniformly
refactor: deal with 'publish' and 'publish_delivered' in separate clauses
refactor: extract commonality between 'publish' and 'discard'
merge bug25207 into default
merge default
Subscribe to system events, receive inconsistent_database.
merge bug25207 into default
merge default (again)
deal with confirms in slave 'discard'
merge default
merge default into bug25225
Merge bug25226
plug leak always remove from PendingCh when we receive a msg via gm that we previously received from the channel.
merge default into bug25225
correct essay & comments regarding the 'delayed confirm' rationale Matthew has confirmed that the "we don't know the msg_seq_no until we receive the msg from the channel" reason is bogus. The msg_seq_no is allocated by the channel prior to routing and thus is the same across the master and all slaves. Hence the 'publish' via gm contains all the information we need to issue a confirm.
store less in the slave's msg_id_status There is no need to track the ChPid of 'published' and 'confirmed'.
refactor: simplify confirm handling in queue three functions into one
cosmetic
re-instate TODO
a spot of inlining ...and refactoring; exploiting the fact that maybe_record_confirm_message is a no-op when Confirm == never
optimise x-message-ttl=0 & confirms path on queue changes to slave still to come
The code was wrong, but I thought I'd refactor it first, and then make it right.
Fix post CSS change from bug 25110.
Fix post CSS change from bug 25110.
Simplify policy validation tests
Simplify setting of policies
Simplify setting of policies
Merge heads
Merge bug25222
Delete policies with vhosts
merge bug25192 into default
merge default (again)
Merged bug25218
Unused variable.
Merge in default
Merged bug25195 into default
Merge bug25166
Merge bug25166
Merge bug25166
There's no point in closing the channel before we close the connection.
Cosmetic
Remove a duplicate path the close instruction could take.
Duplicate duplicate detection
monitor channel on discard just as we do for publish/publish_delivered w/o that there is a 20s delay in slaves cleaning up after channel closure if all the messages sent on the channel were discarded.
Remove hints, spaces
Create the args part of the properties key by URL-encoding JSON, rather than using our little homebrew codec which turns out not to handle recursion.
Greater workingness
Policy test updates and tweaks
Parameter API renaming and policy tweaks
Sketch of a more sophisticated approach to bindings.
Bug 25110 broke ability to invoke "rabbitmqctl stop_app; rabbitmqctl status". Fix that.
The commit http://hg.rabbitmq.com/rabbitmq-server/rev/5490e1ceb040 from bug 23903 did not take this into account - remove the #user{} record before returning it as an info item.
strip out force_close as we're not using it anymore
use connection closing timeouts whenever possible
remove a remnant of 'immediate'
better types
Remove that inline, we may as well have a bigger click target.
Sort by destination type before destination.
Try to visually distinguish queues and exchanges a bit more. Write "this queue" or "this exchange" instead of the name, since it's likely to be surrounded by other names I think this is clearer.
Lay out the semi-graphical diagrams vertically rather than horizontally. Remove some text noise that is not helping. Show default exchange bindings in a more minimal way.
merge bug25110 into default
merge bug25110 into default
merge bug25110 into default
Don't show a blue border around the logo on MSIE.
It's 2012 and we still have to perform magic tricks to get layout working. This makes the clear work in Gecko.
Oops, replace these.
Tidying
Tidying
Policy interface updates
Further policy updates
Merge bug25216
Merge default
Make sure we update Mnesia when only the gm_pids have changed (i.e. we are cleaning up a spare GM pid from when we found an existing slave at startup).
Merge in default.
throttle index walking to the rate at which we can process the results Thus preventing excessive memory use on recovery
Clean up after we stop mirroring.
Fix spec broken by bug 25212
Nicer.
Cosmetic
Merge in bug25195.
merge bug25210 into default
Policy interface updates
Policy layout more in line with rabbitmqctl parameters
Changes to policy setting interface
Unused var.
Merge heads
A touch more abstraction.
Move button; clean up a tad.
Remove this master_changed nonsense.
Ignore process_death, explain why.
Simpler policy interface
tiny refactor
Stricter HA validation
Only retrieve memory statistics when prompted, and add some UI for that.
No longer try to obtain memory stats every 5s, and reduce distance to default.
Remove rabbit_misc:interval_operation/3, it doesn't really work.
Policy-related tests
Policy validation updates
Removing the ExtraNodes stuff unmasked another bug: we weren't cleaning up slave_pids when stopping mirroring.
Remove debugging code.
REST updates for setting policies
WIP
include the error term in start/boot exits and refactor the tests to handle 'EXIT' instead of 'throw' for start/boot failures
Remove debugging
Updates for setting policy
R12B-3 compatibility.
cosmetic: trains station
wrap the whole of start/boot in the same error check
Updated policy validation
Updated policy validation
merge bug25212
don't try too hard to get the output errors looking nice
start log handlers first, so we see the output only once
Don't fail if the queue is already mirrored, tweak return values a bit.
also handle cluster status file prep failures
Do not start slaves in init_with_existing_bq/3 since we will only get here via rabbit_mirror_queue_misc:update_mirrors/2 which will start them anyway.
oops
treat cluster consistency check failures as boot errors
consider closing_timeout to be a normal exit condition
cosmetic
bring the timeout down to 10 seconds
bring down the timeout; minor cosmetic changes
only set a connection.close timeout on the upstream
costmetic (ish)
use amqp_connection:close/2 instead of fast_close
oops
do not fast_close immediately when a timeout is given - oops
That wasn't actually very random
Clearer
Shuffle candidate nodes when we want to add some in "exactly" mode.
do not close channels explicitly and use amqp_connection:close/2 to avoid blocking node shutdowns when network interuptions occur
Try to spread these colours apart more my making the heavier ones less bright as well as more saturated.
Slightly less violent green
strip unused variables
I think I prefer the way this looks.
Further spec correctness for RPM
Merge bug25209
"When opening a file, it’s preferable to use open() instead of invoking this constructor directly." Also fixes it under Python 3 after 2to3 conversion, according to Alan Antonuk.
as with heartbeat timeouts, we don't actually need to fast_close the socket if we've hit a 'connection.close' timeout
Oops
Don't look up queue policy here, and change to checking for '' instead of 'none'.
Add a policy info item for queues, and make sure we return '' when there is no policy for both queues and exchanges.
Merge default
use fast_close when terminating a link and do *not* wait for channel closure
Merge in default
merge default
use amqp_connection:fast_close/1 when terminating
amqp_connection close variants with optional timeout and fast_close to close the socket immediately after 'connection.close' is sent to the broker
correct type signature
cosmetic
consistency
When we've gone over the watermark, show [ dark / bright line / dark ] not [ light / dark ].
Progress towards storing a GM pid -> queue pid mapping. This is dependent on not feeding the process_death message into remove_from_queue - bug 25195 suggests this might be TRTTD.
be a bit more careful to ensure nodes are not already active
re-merge bug25200 into default
cosmetic
Merge default
Merge bug25200
Explain
sanitize the contents of `cluster_nodes'
Merge bug25199
Merged bug25193
Merged bug25193
More reasons.
More reasons
Further unbreaking.
Don't think this is needed any more.
Temp destination queues interoperate with non-STOMP clients
Unbreak otherr status box things.
Use the correct total to scale the bar. Move some stuff into help.
Since the memory stats can lage, it's useful to know what the total was at the time the stats were obtained.
Colours
distinguish between deliveries to masters and slaves ...thus allowing us to set the 'delivered' flag correctly for messages that were in flight during a promotion
cosmetic
Little bar charts WIP.
Show the bar as 800px of mem_used, not 800px of mem_limit.
Various tweaks.
Various tweaks.
Various tweaks.
Merge default
Merge default
Merge bug25198
Merge in default
merge bug25184 into default
comments, also wait for tables right after you load them
cosmetics
Don't let the GM hang around. We exit(normal) it rather than tell it to leave/1 since it really shouldn't be there, we want it to stop ASAP.
wait for tables, not for mnesia
simplify `leave_cluster/0'
merge bug24908 into default
merge bug24908 into default
merge bug24908 into default
Merge default
remove gratuitous ack numbering the sole purpose of which was to sort the acktags by that number, which serves no purpose whatsoever.
First draft of policy validation
Federation policy validation
cosmetic
cosmetic(ish)
requeue unacked messages earlier during promotion ...so that the set_delivered marker is set correctly. Note that - there is no need to sort AckTags - BQ:requeue doesn't care about the order in which it is given the tags. - we don't need to 'run the backing queue' / 'run the message queue'   when requeuing since there are no consumers. But we *do* need to   drop expired messages; process_args takes care of that already.
remove superfluous comment We already say that stuff from MA gets requeued. Furthermore, the master doesn't have an 'MA' field as such - the information is kept in the backing queue.
cosmetic: remove comment that no longer applies This should have been done when consumer cancellation notifications were introduced.
First pass at reverse DNS lookups for clients.
First pass at reverse DNS lookups for clients.
get rid of all but one use of run_backing_queue and inline the latter
Clearer?
Clearer?
Display active consumers on the detail page.
stylistic consistency
Don't throw, rabbit_amqqueue:with/2 will eat it.
Ignore if the node is down.
Assert a bit here too.
Change RPM service launcher
We want to catch here, if sup:start_child exits the rabbit_amqqueue:with we are in will convert any exit to not_found. Which is unlikely to be helpful
active_consumers info item.
Merge bug25179
Merge in default
Merge default
Lintian warnings
Report on how behind we are.
Throttle the rate at which we call rabbit_vm:memory().
interval_operation/3
Work on older Erlangs.
Added tag rabbitmq_v2_8_7 for changeset 5e814e06d22e
Merged bug25140 into default
merge bug25145 into default
merge bug25185 into default
undo spurious change
Report mem_used separately, so we can update 'memory' less often.
Revert to the old place for total memory.
cosmetic
move ensure_closed/1 calls into finally
Don't change the signature of init_with_backing_queue_state
correct comment following removal of 'immediate'
s/redelivered/delivered/g
I put that on the wrong branch. And it's obsolete now anyway.
Stick redelivered in #message_properties, which makes the diff rather smaller.
API change
Let's try that again: we no longer need to use confirmed_broadcast here due to lack of immediate.
Mark enqueued-on-promotion messages as redelivered
merge default into bug25179
merge bug25160 into default
merge bug25160 into default
simplify forget_cluster_node/2
Merge bug25182
Fake rebase: 8ebdcd9a5d2e (which bug25182 was branched from) got junked. "rebase" from 5859a8e6d682.
Bring default back to life
another assertion
neater
Is this better? I'm not sure.
cosmetic
put the assertion back. This time more explictly.
improve correctness
Rename set_synchronised to update_delta. And remove that nasty little arithmetic-based hack. We should be explicit about the fact that we treat depth messages from the master differently when we don't have a delta.
Refactor which I find clearer. Yes "DeltaChange". But it's a delta of a delta, and "deltadelta" sounds silly.
Uh, fix the tests.
Merge in default
oops
take a stab at making set_synchronised less obscure
remove unnecessary calls to set_synchronised/2 in 'fetch'
Merged bug25145 into default
track monitors explicitly
merge bug25160 into default
generalise pmon
cosmetic
replace cluster_multicall with gen_server:abcast
merge default into bug25160
fix a bug
Merge in default
Merged bug24677 into default
it's a disc
Increase test delay
more workingness (and efficiency)
cosmetic
cosmetic
cosmetic
No longer need confirmed_broadcast if immediate no longer exists.
appease dialyzer
improve workingness
Merge bug25157 (again)
Sorry, future internet users. There are going to be enough cases where people have set RABBITMQ_NODE_IP_ADDRESS="0.0.0.0" without being aware that this disables IPv6. Take the more conservative option.
move table handling code from rabbit_mnesia to rabbit_table
Attempt at another colour palette in the hope that this will make MAtthias less likely to describe this as "ugly".
Add a link to the website (I struggled to fit this into the built in help system).
You would think I would at least compile it.
some more inlining
inline is_only_node
cosmetic
Never display negative memory.
Plugins
Plugins
merge bug25148 into default
cosmetic
simplify forget_cluster_node and get logging right
simplification around various node list functions - cluster_nodes/1 accepts 'ram', eliminating cluster_ram_nodes/0 - introduce is_only_clustered_disc_node/0 helper and get rid of   is_disc_and_clustered/0 and is_only_disc_node/0 in the process
logging and error reporting consistency
inline init/2
tidy up exports & specs
cosmetic
cosmetic
Add in memory used by SSL and outgoing connections to the connection / channel total.
Ignore dead processes.
Move this stuff to its own module
Move this stuff to its own module
Merge bug24967
Merge bug25177
It's "resource" now, not "mem".
Link in-place. Open in new window. Add a link for alternate exchange.
Remove support for return_not_delivered, since that's a disguised thing about immediate.
I just had a WTF moment looking at that, let's try to be clearer.
merge bug25148 into default
merge default into bug25148
Merge default
We now count connections and channels together.
Go to an entirely supervisor-based way of counting process memory. This has the disadvantage that we need to combine channel and connection memory, but we are far more inclusive, accounting for limiters, writers, supervisors etc. In particular this helps a lot when we have thousands of queues since the queue_sup ends up taking a lot of memory in its own right. This seems to bloat rabbit_mgmt_external_stats less (although still some) in the 100k queue case too. Also measure memory use of mgmt_db and msg_store processes and add them appropriately.
Oops2
Oops
fix in change_cluster_node_type
Rename this, since it can include memory which does not still belong to a process (e.g. after GC).
Rename this, since it can include memory which does not still belong to a process (e.g. after GC).
Tiny bit fancier
forgot about the other thunk
Actually I was wrong about it not being able to be private.
not a thunk anymore
reverse to using `system_info(running_db_nodes)'
Account for the mgmt DB as another category, since it can get quite big.
Account for the mgmt DB as another category, since it can get quite big.
Don't declare our tables private, it would be nice if rabbit:memory/0 could see them.
refactor for clarity (I think)
Merge bug23896
Merge bug25157
We prefer IPv6, not IPv6 addresses.
Merge bug25089
Merge bug25089
Merge bug25089
Merge bug25089
Merge bug25089
Clarity
Although this is not a doc bug, while I'm here expand the example a bit.
Doc tweak
Log as if your life depended on it.
Merged bug25169 into default
merge default
Config option to select IPv6 address preference
mistyped bug25160 (bug25016)
`running_clustered_nodes()' => `cluster_nodes(running)'
unify the various functions to get the cluster nodes into one
Warn if we're started but not in auth_backends - probably a misconfiguration.
revert all the ordsets operations to lists
It seems more obvious to treat the no password variant as the special case.
Handle the case where we go from unmirrored(A) to nodes(B, C).
"nodes" policy should not suggest nodes which are not running. Also if nodes policy is completely unconnected with reality, just keep the master alive rather than blow up.
That case was originally written to cover the unmirrored case - but actually the queue might be mirrored but with no slaves, or about to become mirrored, or whatever. And our is_process_alive() check serves the same purpose.
Start new slaves in response to gm deaths a bit later, to prevent deadlock. Also remove {add,drop}_mirror/3 as not used, and don't export drop_mirror/2 as not used outside the module.
Every other plugin uses :=, and this is preventing the CI misc plugins thing from removing this.
Add a version of in_group which allows you to specify the attribute name.
better specs
simplify
cosmetic
eek
Authenticate via direct client
inline
Authenticate direct client with password
Authenticate via the erlang direct client
That hack should not be needed any more.
Merge in default
Merge bug25167
Simplify
fix `rabbit_mnesia:is_virgin_node/0', was checking only for one status file
oops.
ordsets instead of lists in `rabbit_upgrade'
ordsets, not lists, in `rabbit_node_monitor'
revert to manual rpc for running nodes, but use mnesia to check if nodes are running
use `system_info(running_db_nodes)' instead of rpc+application to detect running nodes
use the correct type
Further adventures in zhush.
Reinstate atoms
Reinstate atoms
Simplify
Bling
As far as the user is concerned, atoms and code are really the same thing for memory use.
Show new memory details.
Just pass rabbit:memory/0 through.
Move to rabbit.erl, and only invoke erlang:memory/1 once so we do a better job of showing results from a single point in time.
Consistency
Try to keep our categories disjoint.
rabbit_misc:memory/0.
Merge heads
Oops
Merge bug24997
Swap arguments of transfer/2.
get rid of a helper
Merge heads
Rework booleans around init_db() and friends:
This got swapped round.
Merge bug25158.
cosmetic(ish)
cosmetic
some abstraction
another list operation
`of' at the end
Merged bug25144
reorder functions
remove ?empty_set
another list in the wild...
forgot one list
never use lists constructs when dealing with ordsets...
Pull our attempts to list all nodes out of transactions and loops.
equality => pattern match
update rabbit_app.in
Update tests
ditch the booleans to control decisions on disc/ram nodes
Add password to amqp_params_direct
Allow direct connections to supply a password
move all the error descriptions to the end ...so they don't clutter the logic. and some other minor cosmetic changes.
correct comment
some tidying up - normal_init/2 -> init/2 - DiscNode -> WantDiscNode (when it's a boolean) - shrink comment width - 'of' never goes on a line by itself - save some newlines - introduce leave_cluster/1 helper function
merge bug25108
ensure that slaves confirm messages when ttl=0 Fixed in the simplest possible, rather than most efficient, way - by removing an optimisation.
merge heads
refactor the check for the expiry out of `basic.publish'
Merge bug25152
Prefer https to git protocol for firewall reasons
Prefer ipv6 addresses to ipv4
Typo
fix messed up rabbitmqctl usage
Make tests run from umbrella and pass more reliably
Increase the amount of symmetry.
add links to things that might not be obvious
nuke 'immediate'
Simplify
Cope with the fact that rabbit_mnesia:running_clustered_nodes/0 now does not include node() during boot.
Merge default
eliminate unused var warning
merge bug25155
fix bug
file_name -> filename The latter is used in more places and also by OTP.  In the process fix a bug - rabbit_upgrade was referencing rabbit_node_monitor:running_nodes_filename/0, which was in fact named running_nodes_file_name. That function was also missing a spec. And it was in the "wrong" place w.r.t. the function order in the module ;)
merge bug25154 into default
1MB = 1000000B for disks
merge bug25154 into default
correct disk space log message and remove ambiguity
simplify and handle missing 'same ttl' case(!)
bring queue/exchange removal cost back down to O(binding_count) by performing all mnesia read operations before writes
guard deletes on disk tables in order to eliminate superfluos fsyncs Unfortunately this makes queue deletion O(binding_count^2), so further work is needed.
remove superfluous operator
user-id tests should use JSON format
Merge default
Merge default
Merge bug24914
Merge bug24914
Merge bug24914
Update
merge bug25118 into default
merge default into bug25118
Tweak docs
fix comment in node_monitor, keep {error, enoent} in `try_read_file'
merge default
Merged bug25072
Merged bug23903
Merged bug23903
Merged bug23903
Merged bug23903
Merged default
Try to handle startup errors in apps that aren't rabbit at least vaguely intelligently.
Variant of {start,stop}_applications that takes an error handler.
Don't just badmatch if we can't start the listener.
merge default
Make this clearer
Don't hard-code the default user
fix runtime parameters test, and little bug with them
updated the essay to explain how the sync status works now
Merged bug25072
Merged bug25072
Merged bug25072
Remove the Mnesia record after we are done with it.
get cluster nodes from mnesia when legacy/non existant status file
increase binding propagation waiting time, to see whether it reduces ci failure rate
try tracking down ci failures
check the cluster consistency after the upgrade
Merge default
modified timeout by mistake
add mochi license information
Merged default
Merged bug24888 into default
pick the lowest between the message and queue TTL
Correct log method
Add support for the five missing message properties: expiration, type, timestamp, app-id and user-id.
Typo
Preview release build changes
always call init_db with all nodes
Document configuration
more informative and useful error messages
do not give up when finding an inconsistent node
oops
split cluster status file and running nodes file
cosmetics
do not bump the publish seqno when we can't publish DLX'ed msgs
update the federation tests to use json
amqp_connection_type_sup should be intrinsic - it's a one_for_all supervisor itself; if one of its children dies then having a somewhat alive connection in which all the type-specific processes have died is not a great outcome.
Merge default
cosmetic
move LOG_ERR macro to where it belongs This was missed in bug 25034 since the LOG_ERR was introduced in parallel in bug 25056.
cosmetic
Use impersonator tag rather than {trust, _} hack.
Allow direct client users to provide a complete #user{} record rather than looking it up for them.
Remove the previous hack, add a check for the "impersonator" tag instead.
pushed changes to Makefile by mistake
Oops
Attempt at simplifying check_cluster_consistency/0, but I am having trouble with systest.
increase the seqno when the DLX is not found
Unused variables
Rename
Rename
Merge bug25062
merge default
merge
Merge bug25062
merge default
merge default
Merge bug25062
use the `rabbit_misc' json functions
Simplify
add mochinum.erl, which is needed by mochijson2.erl
Merge bug24867
check that the ttl values are less than what `erlang:send_after' likes
Reduce over-engineering of default policy priority
Sort default policies correctly
Backout changeset 25ee0d6a9c30
a bit more informative error
check validity of the expiration in basic.publish
Typos and rephrasing
binary, not string
per-message ttl, based on the `expiration' property
That looks a bit less wrong. Charmed that there's no sane way to do this in CSS.
Unbreak the add policy button.
Make dyn. more obviously a prefix, and remove the priority here too.
Since priority is not mandatory let's not set it here.
Merged bug24859 into default
cosmetics
handle ttl'ed messages in bulk
Add support for trust-user-id.
Should have been in bug 25029
Allow booleans in parameters via the UI.
Add trust-user-id field to upstreams, and test it.
Revivify default
Add a backdoor to allow the direct client to set a trusted user-id. Yes, this is ugly, but the diff is small.
Add a boolean validator.
Correction to location of mandatory indicator for policies
Backout changeset e847a6c6dc9b
Rename policy pattern field and update manditoriness
Constrain policy regex patterns to binaries
Permit absent policy priority
Backout changeset 3ac70be8c5a2
Update federation tests for regex policies
two little fixes...
Show shortened client properties in connection list
Nicer look.
Merged bug25114 into default
Merged bug25000
Terseness.
Not sure it's worth explaining that, the explanation is not clear and I can't think how to improve it.
emit warning when starting detached rabbit
cosmetic
Also exclude DeadNodes from the list of new nodes to start mirrors on; we have checked for running_clustered_nodes() but that could be out of date.
Cosmetic: give that comment room to breath.
Call add_mirror/2 before drop_mirror/2, and explain why.
typo in rabbitmqctl man page
don't record pid when using -detached
Gah
No we don't. The point is that if a mirror is dropping out of the queue, does it need to explicitly leave the GM group? The answer is no: the master is linked to the coordinator is linked to the GM / the slave is linked to the GM.
Add specs, remove misleading "%% temp" comment.
Reduce difference to default
merge default into bug24908
more reification, plus cosmetics
Reify a touch more.
merge bug25119 into default
tweak test - drop eunit - we don't use it elsewhere and it adds little value here - lower the TEST_RUNS * CHILDREN count - no need to run 'kill' part of test with lots of iterations/children - stop on first failed run - on failure, return iteration and exit reason
cosmetics
cosmetics
cosmetics
merge default
remove differences with default
merge bug25049 into default
merge default
Another attempt at explaining disc vs RAM nodes, and capitalise RAM.
track the delta of the depths, and replace `pending_ack' with `depth' in BQ
Merge default
merge bug25119
refactor tests
Merge bug 25120.
was getting `set_length' instead of `drop'
fix depth delta in the `publish' instruction
merge bug25119
cosmetics
rework tests for most simple case of child termination increase test coverage for whole of terminate_simple_children fix bug in timeout handling clause of terminate_simple_children cosmetic (trailing whitespace)
explain
export only what's necessary, cosmetics
cosmetics!
cosmetics
cosmetic (again)
cosmetic
remove useless test case
cosmetics
oops
cosmetic
reset and join when changing node type
construct child exit reason in the right place
cosmetic
Introduce additional, non-smp tests (using suspend) and explode the test fixture list to create 400 repetitions of the group
attempt to close ssl connections gracefully but forcefully gracefully...so that there is a good chance of TLS alerts making it through, but forecfully (after a timeout) so we don't get stuck (or worse, silently) holding on to file descriptors and processes.
forgot debug line in
store the depth of master and slave instead of the unknown pending msgs
Test that simple_one_for_one_terminate shutdowns no longer deadlock and handle reporting errors not caught during shutdown (e.g., 'killed' pids)
refactoring: make the var match the field
refactoring: inline helper function
cosmetic
style
revert `set_synchronized' => `update_unknown_pending'
`set_synchronized' => `update_unknown_pending'
`set_length' => `drop'
`external_pending' => `unknown_pending'
use `set_synchronized' instead than manually increasing
simplify `set_length' case, fixing the ToDrop < 0 branch
add the delta in `set_synchronized', fixes the call in `set_length'
minor refactoring and cosmetics
`set_synchronized' accepts the difference instead of separate args
do not track external pendings until we receive `length'
actually, it looks like the slave might receive messages before `length'
`length' should be the first instructions, lets assert that
get the external pending acks at the beginning
add a callback to backing queue to get the number of pending acks
Mend broken links to protocol docs
matthias doesn't like the nested `set_synchronised' :(
take into account requeues when setting synch state for slaves
refactor and always prefer the EXIT reason
when terminating multiple simple children, we shouldn't rely on the order of 'EXIT' vs 'DOWN' messages
missing spec
revert last change (reset when changing node from disc to ram)
reset when turning disc into ram node
merge bug25117
cosmetic
Slaves must join gm before updating amqqueue records, otherwise messages received from publishers will become stuck due to diverging sender queue state in the slave failing to correlate with incoming messages
merge bug25116 into default
rename branch
document the fact that -detached causes the wrong pid to be recorded
Update README re build.
trap exits in `amqp_gen_connection'
Merged bug25111 into default
Initial contents
Update management tests to use regex patterns instead of prefixes
Disallow empty patterns
Order the display of policies by priority
tiny refactor: rename fun and clarify comment
Mandatoriness of policies
Remove HA policy from the UI; people will only want to use it in rare cases.
Add support for more general policy patterns
I keep clicking on the logo, expecting it to take me back to the overview. Let's fix that, shall we?
Try to be a bit more defensive before looping.
Compile regular expressions that will be matched multiple times
use the function in `rabbit_misc' do convert a term to json
accept parameters in JSON format
Suggest queue nodes based on running nodes, otherwise (at the very least) we can immediately try to start a mirror on a node that has just gone down.
re-introduced wrapper functions to strip and add the `struct' tags
put result in `ok'
wrappers around mochijson2 to catch exceptions
merge bug25112 into default
non-zero timeout when idle for the slave as well
Merge default
Fix broken merge
Match policies by regex instead of prefix
little fixes to the automatic clustering config code
cosmetic
get nodes and whether the node should be disc or ram from config if virgin node
Invoke rabbit:force_event_refresh() *after* taking the globally registered name.
Merge bug25048 again.
Remove some redundant cruft that got left behind.
s/at-least/exactly/g
Add counts of exchanges / queues / connections / channels / consumers
remove commented code - we do not use `disc_only' anywhere
remove_cluster_node => forget_cluster_node
manpage fix
more manpage fixes
recluster => update_cluster_nodes
forgot about the recluster example
Simon's comment on the rabbitmqctl manpage
remove the wrapper functions around mochijson2
More consistent naming of credit flow state
Merge default
Backout changeset 641cfc6d09b7
Remove unnecessary configuration
Further simplify. Duh.
Call me a frothing-mouthed anarchist if you want, but I don't think we'd be too unreasonable in letting non-monitor users know which version of RabbitMQ they are talking to.
add mochijson2 and license, plus some helper functions
Remove the last vestiges of support for heterogenous versions in clusters, and move the version info up to the top right corner.
No longer any point in reporting Erlang version of cluster nodes since clustering code now forces it to be the same. We don't do the same for RabbitMQ version since that's just an application version along with all the others.
Merge in default
Mention parameters
merge bug25109
merge bug25103
merge bug25103
Always update rabbit_federation_status in terminate/2.
Clearer separation between reader and processor
Make the federation link permanent since sometimes calls to gen_server:call() end up existing with {shutdown, Foo} which gets passed through as a termination reason for the link.
Make the shovel worker permanent since sometimes calls to gen_server:call() end up existing with {shutdown, Foo} which gets passed through as a termination reason for the worker.
cosmetic - save some lines
Merged bug25104 into default
So strip all that stuff out.
I was thinking that which_applications needed to come first so that the process would be gone by the time we got to is_process_alive. But if we swap them round the which_applications check will return false in the shutdown case anyway. And of course is_process_alive/1 is rather faster.
merge bug25071
merge bug25071
merge bug25071
merge bug25071
Register collector name differently
Updated adapter into record name, safer logging, macro corrections
Mention parameters here. Oh, and bindings, and don't talk about permissions in such a funny way.
Merged bug25045 into default
at-least mode can imply that we need to start slaves in response to slaves dying elsewhere. So do that.
Gotta love those timeouts.
merge bug25105 into default
Disable parallel build (equivalent to supplying build.jobs=1 on the port command).
Improvements around delivery handling
Fix detection of mirror removal at clean shutdown
Name topic translation methods more sensibly
Removed adapter info from state
Unused variable warnings
Adjust test for no 0x10's in error frames.
Merge default
Oops, this got missed in bug 25048 - slave_pids is no longer in both lists so there's no need to remove it.
Merge default and resolve clashes.
Rationalise use of ~n in messages
Make buttons inside lists smaller.
Make that weirdly implemented table filter by vhost
Rethink the global bits interface to be per-vhost
Merge bug25057
merge bug25077 into default (again)
simplify guard
merge bug24953 into default (again)
simplify 'obtain' guard fhc:obtain already masks the case when the fhc isn't running, so all we need to do here is check that the fhc module is around.
merge bug25034
merge bug25034
merge bug25034
propagate API change
adapter_info() -> amqp_adapter_info() in edoc
Merged bug25022 into default
Re-apply 23e68a8b0029
Merged bug25022 into default
Update examples to new API by stomp.js
New stomp.js supports vhosts - API changes needed to be documented.
ArrayBuffer is not supported by older browsers
Imported pull request #1 by @jmesnil
Updated stomp.js as per 2b60c399d70dd6494dedd52ba2f7b8ff2446998b.
Merged bug25097 into default
merge default
don't re-schedule timer when the new timer would go off <1ms sooner ...since timer granularity is 1ms
log shovel name on basic.cancel
Merged bug25094 into default
don't log when unregistering handles
prompt expiry of requeued messages which may require moving the timer expiry forward
Merged bug25067 into default
Merged bug24973 into default
Trailing whitespace
fix a long-outstanding unresolved type reference this was actually completely wrong; the return value is that of *gen_server2*:start_link
merge default into bug 25097
propagate API change
merge bug25096 into default
oops
more correctness
oops; caught out by daft Erlang scoping again
schedule message expiry timer based on expiry time of queue head
don't rely on evil erlang scoping
merge bug25096 into default
test 'rabbitmqctl eval' and refactor the error handling for it
test more branches of 'rabbitmqctl set_vm_memory_high_watermark' and leave the HWM unchanged!
re-assess coverage suspension in tests I took out all the coverage suspensions and then gradually added them back in until the tests passed. The end result is - reduced scope of coverage suspension in some cases - new instances of coverage suspension due to the changes in this bug - some useful helper functions for coverage suspension
be a bit more selective about which nodes we disconnect from ...in case we one day relax the restriction that all erlang distribution nodes must be part of the same cluster. - force=false -> all nodes we are clustered with - force=true  -> all nodes we are connected to Forceful resets are employed to cope with various conditions in which the cluster has gotten into a bad state, so its best not to rely on mnesia's knowledge of the cluster state.
Prevent possible deadlock when obtaining multiple filehandles
Merge 24973
Unpick 25067 changes.
Grammar tidy-up.
Remove both trailing spaces.
just connect from all (visible) nodes instead That way we don't rely on our current (possibly imperfect) knowledge of what the node was clustered with in mnesia. This is safe because, as per the comment, only mnesia cluster nodes should be part of the erlang distributed system. Note that rabbitmqctl et al run as *hidden* nodes.
make unclustering work for ram nodes - leave the cluster properly when force=false - disconnect from nodes we know about when force=true
cosmetic
Remove implicit rules for compiling java
Run tests from Makefile
Add conservative prefetch limit
merge heads
refactor: make better use of filename module
Merge bug25087
cosmetic refactor - more informative type signatures - move the final phase of setup() into prepare_plugins - ditch the non-erlangesc get_ prefix of get_plugin_info - vertical alignment - get rid of some intermediate vars
cosmetic
fix dialyzer complaint
the second half of removing rabbit_misc:quit/2 oops
Make register not require unregister first. Duplicate detection is now done in the register call.
merge heads
Revert c493777cbfc5, I was being dumb, it won't match due to being in a closure.
Seems a bit cleaner to ignore undefined here.
Simplify
Remove that {go, ...} gs call.
refactor: less confusing variable names
More randomness for temporary node names on windows
Revert the part of 942d5ea3c608 which broke all plugins
Update docs.
Improve tests slightly, fix bugs thus found.
Update docs
refactor: get rid of rabbit_misc:quit/2
Remove vhost parameters when removing vhost. And a tiny driveby refactor.
Stop the clocks! Five and a half years into the RabbitMQ project, and Matthias committed something that broke the build.
merge default into bug24719
cosmetic
cosmetic
restore docs (but reformatted)
remove cruft
exiting the VM from deep inside a function is uncool
cosmetic
cosmetic
Eric's patches
remove more cruft
remove cruft
Oops, forgot that
Um, we did this on the listing page some time ago, why not do it on the detail page too?
Make parameters vhost-specific.
Make parameters vhost-specific.
Merge heads
Make parameters vhost-specific.
Make parameters vhost-specific.
Oops, this should redirect there.
Use fmt_string.
Use fmt_string.
Merged bug25077 into default
Merged bug25083 into default
Refuse to publish things that aren't strings, things will blow up when anyone tries to retrieve them!
Reify something that was previously a little bit magic.
Support changing master (umm, which actually turned out to be a lot easier than expected, thanks Matthew).
Take account of the current nodes when selecting new nodes, and some unit tests for the node selection logic.
Merge in default
Indentation, whitespace, column-width
Add client id collector
Merged bug25036 into default
track vm_memory_high_watermark explicitly so we can report it back accurately.
warn on memory clipping
Updates
Hmm, tweak some more. Is this a real problem?
tiny refactor
make the comment match the code
cosmetic
trim fat - don't log the setting of the memory hwm twice it already gets logged by set_mem_limits
inlining refactor
Differentiate Authentication failures. Adjust tests to check these.
merge default
Merge in bug25067
Merge in default
Reduce expectation in test.
Attempt to test server cancel subscription
merge heads
message more similar to federation
merge heads
report the basic.cancel as an error
report status when `basic.cancel' comes
cosmetic
shrinking refactor
Merged bug25022 into default
Merged bug25022 into default
Newline in log message
Newline in log message
merge bug25048
merge bug25048
merge default
cosmetic
`store_updated_slaves/1' returns a queue, not `ok'
remove unused variable
restart gracefully when receiving basic.cancel in federation
restart silently
Tweak delay to accomodate ci tests.
add a first draft for the rabbitmqctl documentation
Merge in default
cosmetic
Merge cosmetic changes from bug25045
Merge in bug24973.
Check for invalid colon in header value
Make incomplete header a fatal error
Forgot to initialize hdrs.
exit when receiving a basic.cancel
Merged bug24971 into default
Merged bug24942 into default
NB: is superfluous in comments
simplify match on master pids
match on supervisor:start_child/2 return values properly
Complete parser rewrite and added some new tests.
attempt to handle races between remove_from_queue and rmq_slave:init/1
merge default
cosmetics
merge default
throw state invariants in the right place; cosmetic
merge with default
merge bug25023
merge default into bug25023
log stale master pids properly, remove duplicate stale pid handling from rmq_misc
Merged bug25059 into default
make 'rabbitmqctl report' respect '-q' sort of
remove evil
Removed CR as valid char in headers and command; update tests to reject such frames augment escapes to include \r as escape for CR simplify grammar
Added code to generate CRLF eol for trailing CR. Augmented tests.
use rabbit_misc:is_process_alive/1
Add tests for trailing \r in COMMAND and header-value;  o serialize-header augmented to add extra \r to trailing \r
merge default
enable heartbeats with a 10 minutes interval by default
Merged bug25035 into default
cosmetic
Factored out the BSL escape codes to a single function.
use new frame_error function
merge default into bug24991
Introduced parse_header_name with BACKSLASH escapes;   -- augmented unit test   -- modified serialise_header/1 to escape key as well as value
Refactored parse to eliminate _cr functions without extra parameters; also collapsed _escape function for backslashes.
Merge bug25056
Merge bug25056
use %HOMEDIR%%HOMEPATH% instead of $PROFILE
Make existing main parser code more comprehensible, ready for refactoring.
Merge bug24998
Merge bug24998
Minor simplification
resource_limit alarms are always atoms, and we don't need quotes around them
All our log invocations should end in ~n
Use content-length header MACRO in tests.
Macroise content-length header.
Merge bug24985
Add STOMP frame syntax description to rabbit_stomp_frame.erl
Throw away stats for dead masters.
change naming from "termination" to "exit". also add `IS_' prefix to macro
Tweak wait time in lifecycle tests for CI.
allow clients to exceed frame size by a little bit
merge default into bug24991
Handle QoS1 duplicate publishes
cosmetics
store the `erlang:monitor/1' ref to demonitor later
add functions to unregister handlers
Clean sessions, and anonymous connections
simplifying refactor
handle shutdown and file system cleanup gracefully
report direct connection errors as errors
make channel/soft errors easier to distinguish from hard errors
merge default
Merge bug24956 (again).
merge default
Improve diagnostics on destinations test failures.
oops - handle heartbeat timeouts properly in closed state
refactor: remove gratuitous helper function
better epmd error descriptions in rabbitmqctl
merge default into bug25056
refactor: move things around in the reader ...for better grouping of functions
more consistent error handling in reader
call the correct function oops
refactor: precondition_failed helper function
oops - 'hg record' diff boundary fail
renaming ... for consistency with reader, and to better describe what the fun does
cosmetic
do not blowup on unrecognised alarms
aligning things, part two
because we all love aligned arrows (especially Matthias)
cosmetics
`alarm_handler' => `rabbit_alarm'
add a `get_alarms/0' to `rabbit_alarm', equivalent to `alarm_handler:get_alarms/0'
`rabbit_alarm' on its own again, added callbacks to fhc and `vm_memory_monitor'
Avoid a separate erlang process for processor
merge default into bug24991
tiny simplifying refactor
merge default into bug24991
Merged bug25052 into default
Merge bug24953.
Reduce gratuitous difference from default.
Merge bug24720
I am more dubious about this one. But not enough to take it out.
Explain this message.
blow up if Ref is unknown just like the old version did
When handling emit_stats we should do nearly everything we normally do in noreply/1, just not create another stats timer.
grammar
Duh, cosmetic
macro instead of duplicating the guards
Don't reopen file handles in fhc:needs_sync/1, avoid infinite loop.
merge `is_abnormal_termination' and `is_benign_exit'
add comment clarifying the need to pattern match in `with_exit_handler/2'
do not take place of `alarm_handler', just pretty print what we're interested in
filter benign messages in `rabbit_amqqueue:safe_delegate_call_ok/2'
log the resource limit alarms
let `rabbit_alarm' handle everything in place of `alarm_handler'
Merged bug25050 into default
Merged bug25050 into default
Simplify frame unit tests.
React to basic.cancel from server by UNSUBSCRIB(E)ing
we don't need a dedicated handler, rabbit_alarm will do
Rename HA heartbeat when master changes
add replacement for the stock alarm_handler - not doing anything yet
Refactor test function
we do not need to release, fhc will take care of that
remove unused variables
use fhc if the rabbit application is loaded
Webmachine has changed its mind about the HTTP status code to return from a POST which creates an object. Fair enough.
webmachine_dispatcher:dispatch() has grown an extra argument. Cope.
Merge in default
Accept CRLF as inter-frame NL; command terminator and header terminator.
Merge bug 24602 again because of erroneous update on that branch.
Backout changeset cb2b67cba78fc31f4316fa2e2e7d0c25a150794a
Accept CRLF as inter-frame NL; command terminator and header terminator.
Remove unnecessary HA heartbeats
Merged bug24602 into default
clearer `rabbit_mnesia:discover_cluster/1'
`cluster_status/{0,1}' now returns the status directly, fails on error
cosmetic
do not update the cluster status file by getting the mnesia status
add the magic `cluster' word to `remove_node' and `change_node_type'
Various fixes.
Merge bug25048
Fix upgrade function.
Merge bug25048
Merge bug25048.
Don't use Erlando.
Made test in test more explicit.
`rabbit_misc:rabbit_version/0' => `rabbit_misc:version/0'
Be more consistent about always cleaning sync_slave_pids whenever slave_pids is updated, abstract a bit, introduce an async wake_up message.
get rid of `is_disc_node'
remove useless `all_clustered_nodes/0' in `reset/1'
split the offline case of `rabbit_mnesia/2' in a separate function
`change_extra_db_nodes/2' throws instead of returning error
remove unnecessary `ensure_mnesia_not_running/0'
?SERVER instead of explicit name
It did work, but we needed to do that in another place too...
check that the node selected for removal is in the cluster
Remove a lot of nonsense about handling synchronised slaves.
Store sync'ed slaves in Mnesia. This is not quite right yet.
Not needed! Woot!
Dynamic change of HA policy. Promotion from non-HA to master, and demotion from master to non-HA as appropriate. There will still be problems if the policy changes such that the master needs to change - I'm not sure we should even allow this.
fix the flags declaration in `rabbit_control_main'
Erroneous catch clause (thanks Emile)
correct invocations of `on_node_{up,down}' in `rabbit_node_monitor'.
Increment default wait time for assertListenerAfter() used in lifecycle tests.
Reworked base.py listener to record message arrival number and change test in destinations.py to expect two responses and check the order of arrival. Rename test to test_durable_subscription.
Rename function, remove utter rubbish.
Merge heads
While this didn't actually crash the VM for me, we generally want to HiPE as early as we possibly can.
merge default
Tests
fix `remove_node/1' - do not remove nodes from offline nodes, unless we're "safe"
Rough sketch of dynamic queue HA-ness:
fix `recluster/1' - delete the schema and write status before `init_db'
Merged bug25029 into default
Merged bug25029 into default
don't show the running nodes when down
check if the node is the only disc one in `change_node_type/1'
Rudimentary unsubscribe support
Cosmetic: starting a line with "_ =" is meaningless.
Cosmetic: indulge bias against if statements.
Cosmetic: whitespace.
Cosmetic: reduce verbosity.
check if only disc node after `init_db' in `reset/1'
Basic subscription and heartbeat response
do not check for consistency when reseting
Make make-port-diff.sh work correctly on MacOs and Linuces
Oops, again
Oops
Oops.
Rename things
reworked functions that get cluster nodes to get only what they need
Rename "federation connection" to "upstream", underscores to hyphens in everything parameter-related.
all_clustered_ram_nodes() => clustered_ram_nodes()
cosmetic
ensure the temp directories are deleted before proceeding
Merged bug24990 into default
Basic authentication and publishing
Merge bug24512
wipe the mnesia data before starting if the cluster nodes are inconsistent
Merge in default
better `rabbit_mnesia:check_cluster_consistency/0'
Merged bug25039 into default
Ahem. Yes, this was clearly tested.
Unused variable.
merge bug24512
Merge bug 24362 (belatedly)
Merge in default
use nohup instead of setsid
merge default
Remove confusing links in API docs.
Sufficient parsing to accept connection
remove ugliness
give applications a way to map error codes to descriptive atoms
oops
adapter_info got renamed
rename adapter_info in order to avoid name conflicts
eliminate dependency on erlang client internals
move adapter_info back into amqp_client.hrl ...since it is part of the API. We shall rename it later.
move internal definitions etc out of amqp_client.hrl ...in order to avoid application name space polution
clarify what 'timeout' stands for
merge bug21899 into default
merge bug21673 into default
merge bug24884 into default (no-op)
Merged bug24826 into default
Merged bug24826 into default
Merged bug24826 into default
Merged bug24826 into default
Merged bug24826 into default
Merged bug24826 into default
Instrumented base.py to get more info from errors on CI
merge default
`cluster_status_from_mnesia/0' fails if tables are not present
don't use `system_info(running_db_nodes)', check for running rabbits instead
instead of manually removing the current node, filter it in `cluster_status'
moved the status file handling to `rabbit_node_monitor', status from mnesia when online
Ensure that local_nodename and local_username are both set at application startup so that they are always visible.
Ah, those should have gone some time ago...
Merge pull request #7 from simonmacmullen/master
Add policy_changed/3 no-op.
merge bug24912
merge default
change semantics of the cluster status operations
Merged bug24988
change `rabbit_mnesia:cluster_status_if_running' slightly
check if only running disc node only in the required places
Protocol adapter skeleton
Merge bug24894
rabbitmq-web-stomp-examples depends on rabbitmq-mochiweb.
More spec correctness.
It probably makes slightly more sense to monitor before we broadcast.
check that the node is in the cluster in `rabbit_mnesia:remove_node/1'
remove the node from the running node when needed
notify cluster of new nodes as soon as they join, and not when they start
Merged bug24916 into default
Add a function to gc rabbit_event on the local node. Somehow this branch got lost; hopefully it will turn out to be unpushed on my home machine.
Maybe better name?
Explain this a bit.
Don't list policy as "none" if there is no policy, since it's a string anyway. It's more consistent to just not have it there.
Merge in default.
OK, we do actually need a special way to determine the difference between:
Merged bug24916 into default
Get rid of this with_exit_handler use.
normal   -> leaving the ring, change topology shutdown -> ring shutting down, do not change topology
And finally, have the master wait for all the slaves on deletion.
The spec for gm:group_members/1 says it returns a list of pids - let's do that.
Ignore normal exits; do not try to change the ring topology as it shuts down.
Close down the slave's GM the same way the master's GM does.
bug24894 - tests for web-stomp
consistency: leave the 'ok' matching to the caller ...like we do everywhere else in this API
Merge heads
Merge bug25005 again
Scream
merge default
Merged bug25021 into default
Merge bug25005
Revert the wrapper around the copy in append_file/2
Remove whitespace
Replace idiocy with something a bit less idiotic.
Oops - implement the default filter properly
Run additional xref checks in the broker when plugins-src is available. Output full paths and line numbers for analysis. Differentiate between warnings and error where appropriate.
Explain
GC rabbit_event on all nodes pre hibernation
Actually make this a gen_server2, duh, we were hibernating after every call before.
Merge default
Merge bug24956
merge default
Merged bug24992 into default
Merged bug24992 into default
Resurrect bug24992.
Merge default
Default to 1GB limit, check every 10s.
Merge bug24994
Merged bug24949 into default
Merged bug24949 into default
Merged bug24949 into default
Merged bug24949 into default
revert the log level for error for heartbeat timeouts
Cosmetic
Only one version of append_file is required
make the error/reason for amqp heartbeat timeouts clearer in the logs
add a "leave cluster" hook in `rabbit_node_monitor', handle cluster nodes joins/departures better
Merge bug24939
Actually, it seems slightly cleaner to do this.
Strip this out again, we can't make it idempotent and it might just remove the listener records just after we've readded them.
Ensure we only clear out records of queues that are actually dead.
Rotate logs differently
merge bug24932
merge bug24932
merge bug24930
revert dummy commit
dummy commit to recover default
This has little to do with recovery - move to networking boot.
Improve comment
merge default
Rotate logs without consuming excessive memory
merge default
clean up listeners during node start/recovery
Merge heads
Oops, we lost the node name from the lists of contexts.
Since disk_free_limit == 0 is now the default, add some claruity and help text around that.
Disable disk space alarms by default.
Report more clearly when we fail to monitor disk space on an unsupported platform.
merge default
merge default
cosmetics
merge default
remove `fd_used' from the state
it looks like `time_ms' is not needed anymore
attempt to handle stale slave pids during intialisation routines
bug24973 changed the signature of frame:parse and thus caused badmatch
Merge bug24793.
enforce frame_max
refactor: move constant and give it a better name
Use nomenclature that matches federation.
Add to the nav in the new way.
Add to the nav in the new way.
Now we have saner navigation, split the monster federation page in twain.
Add to the nav in the new way.
Multi-level navigation thing for the management web UI.
cosmetic: move comment to a better place
merge default
revert last commit
Make add into a separate hideable, like everywhere else.
more fine-grained error handling
Clean up representation of various times.
Clean up representation of timeouts
merge default into bug24793
Help.
Revert d86c121dfb0d, since, of course, it breaks the test suite.
Make all these set_parameter tests more readable.
Simple test for federating / unfederating exchanges at runtime.
Another thing bug 24792 broke! SSL in standalone Erlang client.
Oops
cosmetic
Merge bug24989
Catch noproc. Ick.
Cosmetic (again)
No error when stopping a stopped broker, or starting a running broker
Merge bug24984
Unused var
Don't take a write lock if we're not going to write.
Needed for tests
Get the tests passing again (TODO: write more tests!). This necessitates a bit of rejigging of interfaces (mostly back closer to where it is on default). Note that the validation test is no longer needed :-)
Stop mirror coordinator gen_server when deleting queue
peek_serial/1 should not depend on having next_serial/1 run first.
Prevent coordinator process leakage
This is the only one that wnats to be strict.
Strict and non-strict list by component.
API change
Merge default
Bug 24830 did not prevent the uncollapsed "_type" field from getting passed through. Oops.
No, that makes no sense.
Merge default
Merge default
Merge default
Remove unused variables.
Merge bug 24982
I never saw the point of that.
Oops
Move banner things from stdout to logs. Leave a vestigal banner so that people who have started Rabbit by hand have something to look at.
add node to existing cluster status instead of creating a new one on on_node_{up,down}
Background daemon when starting up
Probably should have been part of bug 24792 but: now that we start applications ourselves rather than in the boot script, we can write nicer error messages. Let's do that.
simply reading pid files in a way that works on R12B
Cosmetic
merge bug24983
Merge bug 24981
Backed out changeset 6ee929c7f821
Cosmetic: remove colons from sysv startup script
Merge in default
Revert to the 2.8.2 version until bug 24982 is resolved
Detect python < 2.6 and bail. This requires some changes so that the script will at least parse (but not run) with older python (tested with 2.4 as that seems to be the oldest version in common use; thanks RHEL5).
more sacrifices to the CI gods
rename rabbit_control_main:system/1 to run_ps, which more accurately describes what it does
cosmetic
return the correct value from rabbit_control_main:read_pid_file/2; don't call binary_to_list twice
capture and swallow all stdio during 'rabbitmqctl wait'
appease CI gods
Emit upstart events when broker stops/starts
Merged bug24973 into default
merge tip
don't use re:replace/3 as it's unavailable on R12
stop mnesia after cluster operation
Modified tests for interframe heartbeat, null bytes and carriage returns (sic) with test for intra-command carriage return.
Added tests for interframe heartbeat, null bytes and carriage returns (sic) with test for intra-command carriage return.
Merge heads
Look better when running with input enabled.
first attempt at refactoring `rabbit_mnesia:init_db'
Merged bug24974 into default
Merge bug24924
print a different error atom when heartbeat timeout's occur
tidy exports and specs
fix and improve `rabbit_mnesia:remove_node/1' in many ways
Add the "safe" SSL-related modules [ssl_connection, ssl_record, gen_fsm, ssl] to the list.
Repair refactor breakage.
Merge in default
Stop ignoring carriage returns in headers
Refactor parsing to make it more obvious
Stop ignoring carriage returns in the middle of command strings
merge default
merge default
simplifying refactor
Oops, bug 24792 failed to take into account that HiPE compilation was inserted into the boot script by rabbit_prelaunch. So fix that. We need to hipe after ensuring the rabbit app is loaded, so we might as well inline rabbit:prepare/0 now. And we shouldn't really try mnesia upgrades when just starting the app; that feels dubious. Finally, strip out now-unused exports.
consistency
cosmetic
Those backticks are... not quite necessary. And led to endless confusion with node.js.
Merge bug24918
Merge bug 24792
Merge bug 24792
Don't print the plugin list as output from "rabbitmqctl start_app".
Cosmetic.
This can only be true or false. Plus cosmetic.
Merge bug24968
Merge heads
Unbreak the tests. Ahem.
Merged bug24966 into default
Merge bug24872.
Merge bug24872.
set up cluster beforehand in tests
remove R15-ism and a little bit of refactoring
cosmetic
refactor: eliminate code duplication This isn't shorter, but imo clearer
merge default into bug24968
Merged bug24695 into default
Unused variable
Remover duplicated exchange config item, *again*
refactor: simplify closures and do work earlier
always read everything from socket ...rather than a specific number of bytes when the content-length is submitted.
Merged bug24695 into default
Merged bug24695 into default
Merged bug24695 into default
remove cluster managment tests, adjust the others
cosmetic
tune buffer sizes in order to improve performance for non-tiny messages
refactor: move socket buffer size tuning into rabbit_net so it can be re-used in stomp et al
cosmetic
merge default
cosmetic
rename rabbit_plugins API calls to be less verbose
Merge bug24958
Cosmetic-ish: no need to pre-compile the RE, and use character class rather than range.
Merge bug 24961
cosmetic(ish)
Cosmetic changes only in order to produce new head of default
Merging bug 24952 into default
cosmetic
Merging bug 24946 into default
cosmetic part 2 - the one where it actually compiles
cosmetic
cosmetic
Parse disk free space in a language-independent manner
Refrain from discarding updated view when no aliases are removed
Update own members_state as well when sending catchup
Don't prioritise anything protocol-ish over anything else.
comments in `prepare/0'
forgot `check_cluster_consistency/0' call in `prepare/0'
merge default
Merging bug 24954 into default
Merging bug 24945 into default
Merging bug 24944 into default
Allow nodes to start up in alerted state
handle legacy `cluster_nodes.config' and `running_nodes_at_shutdown'
rabbitmqctl list_user_permissions does not take a vhost arg. Never has.
Add special case for i18n reasons.
Eliminate RPC call to get mochiweb contexts
Add mochiweb contexts list to the emitted node_stats.
Don't make RPC calls to other nodes to gather information about them, that doesn't go well if said nodes are overloaded.
Emit node_stats events, and don't expose an API for RPC calls. Push, damn it!
Remove erased memberstate when possible
added `rabbit_mnesia:remove_node/1' to remove node from clusters remotely
Handle callback replies to handle_msg correctly
Cosmetic
Fix dialyzer warnings.
Don't bother with this tiemout, eunit imposes a timeout on tests anyway and this just provides another way for things to fail when CI is slow.
fiddling with `rabbit_mnesia' specs
Merge in default
OK, it's slightly cheeky to pass this as the name of an application. But I think it's better than passing 'rabbit' and having that not mean the 'rabbit' application.
Cosmetic
Cosmetic
Erase aliases more correctly
Now that clustering code does not allow us to start a cluster with heterogenous versions, we can remove all this warning stuff in management.
add `rabbit_misc:rabbit_version/0'
Cosmetic
Merge bug 24957.
Merge bug24919
Comment
deleted percent by mistake
stricter cluster consistency check
on a second thought, it is better to reject options with missing arguments
incorporate most of Simon's patch changes
Tidy up run_socket.
Merge in default
Prevent mainloop from issuing too many async_recv at a time.
ooops... do not update the cluster status file with its own data
remove unused state member
fix but in `rabbit_mnesia:status/0'
forgot to replace old function
get_options => parse_arguments
convert to list at the beginning
change the cluster nodes functions to rely on the cluster status file only
change rabbitmqctl `join_cluster', add `recluster' and `change_node_type'
simplify `rabbit_misc:get_options/4'
It's really misleading to print "-- plugins running" when there are no plugins running.
rebase with master
fix variable handling in rabbitmq-server preventing background node startup from working (rebase foo)
API change
We can't now write the serial record when we declare the exchange; an exchange can become federated at any time.
Use put_parameter.
Web UI for policies.
Pass upstream sets around less, simplifying a bunch of APIs.
When we clear a connection we want to clear out the scratch space of our exchange regardless of upstream sets, the old version was just broken.
moved functions around in rabbit_mnesia
Don't federate default exchange eben if policy says so. Also avoid all internal exchanges, not just of our upstream type.
Prevent DOWN messages from overtaking initial catchup
Reduce duplication.
Move parameter validation into its own module.
Unused variable warning
merge default
How long have we supported pluggable exchange types now?
Document policy info item.
Remove decorator:route/2.
Remove decorator:route/2.
TODO--: Update behaviour
Track a member's own last_pub in members_state
Federate based on policy.
Don't get confused due to changing our own scratch!
Display policy in mgmt.
First sketch of a policy mechanism.
oops
add test for `rabbit_misc:get_options/4'
change to how `get_options/4' handles flags
don't wait (nearly) forever for mirrored_supervisor migrations ...and reduce wait time for migrations we expect to fail, so we keep the overall run time short.
merge bug24362
added checks to `rabbit_misc:get_options/3'.
start supervisor children as, er, supervisors, not workers
expand rabbit_sup API with starting of children that are supervisors and use that API throughout the code where appropriate
cosmetic
remove message about re-installing windows service after plugin changes
be mindful of windows line endings whilst parsing pid files
cosmetic
add missing spec
on windows, die in the correct manner when node name is already in use
get a node to clean up after old incarnations of itself ...in case other nodes don't do so in time or, if they themselves stop/restart, ever.
revert to expected RABBITMQ_NODE_ONLY behaviour on unix
cosmetic
rationalise rabbit_misc:terminate/1/2 with rabbit_misc:quit/1
fix variable handling in rabbitmq-server preventing background node startup from working
manually merge 3c20079f0601
rework e4649f81c3a6 commit history for renaming
merge 7dae0f4505ab manually
rework commit history for bug24792
merge default
And again, globally raise the timeouts.
split rabbit_plugins into client and server side modules
Globally raise timeouts since CI is currently running so slowly that even unit tests are timing out. Hey, it worked for management.
rename bootstrap_environment to prepare_plugins; fix while_process_is_alive activity call
store more info about the cluster on disc, check other nodes before clustering
More XName -> X stuff that got missed before.
remove ref to old define; document terminate/1 vs quit/1
Cosmetic
remove vestigial ERROR_CODE define and dangling TODO from rabbit_misc
preserve original 'wait on any app' functionality
Oops
Merge bug24695 to bug24826
Merge default
rabbit_control waits as long as process is alive
fix leave_cluster, update rabbit_app.in
change function to find out about cluster nodes
Make the list of plugins look a bit more like the boot steps.
"Activating RabbitMQ plugins ..." is no longer particularly true or useful to report here. And clean up some trailing spaces.
Merge heads
Tests are failing in CI due to simple timeouts. (I assume; for a change *these* tests are all synchronous.) So bump the timeout for each test.
merge e1311dd42eba into bug24362
merge f6d1609212f9 into bug24362
merge default into this branch
reseting when clustering, `reset' now disconnects correctly
added `join_cluster', deprecated `cluster, changed the structure of the node config
forgot to mention mochiweb in dependencies
updated readme
change ordering of deps - mochiweb in front
updated readme
Merge default
Raise priority of rabbit_mgmt_db
remove the bug 24919 stuff
Merged bug24830 into default
merge bug24919
removed `rabbit_mnesia:force_cluster'
remote TODO and extraneous branches from rabbit-server
remove the subscription to the schema table
refactor
dumping schema table on changes in ram nodes
merge default
`proplists:get_bool/2' does not do what I think it did, using `lookup/2'
check for a new pid when registered children die in mirrored_supervisor_tests
follow start_applications/1 to app_utils
rabbitmqctl uses rabbit:await_startup/0
onresize the shapes drawn by others were lost
migrate application handling code to app_utils
Merge heads
Document the HTTP API.
Merged bug24922 into default
do not kill the child explicitly
for bug24362 - assert that worker name is unregistered by the time we get a 'DOWN' notification
Oops
rename start_cold to boot
revert deleted comment explaining why we're sleeping for 100ms on startup
do not overwrite RABBITMQ_PLUGINS_DIR on windows
apply startup changes to windows service batch utility
fix windows batch file code path handling during cold starts
forgot to change the arity of init_db in the export
re-added a boolean parameter to init_db to prevent upgrading
remove the fun argument in `rabbit_mnesia:init_db/3'.
attempt to make rabbitmq-server.bat behave like it's unix cousin
pmon is very much hipe-worthy.
ensure that all dependent applications are stopped when shutting down the broker without halting the emulator
move application lifecycle (loading) into one place - rabbit_misc
plugin environment bootstrap and introspection code moved to rabbit_plugins
Merged bug24889 into default
rabbitmq-server uses start_cold
start and start_cold both defer to rabbit_misc to calculate application load order
rabbit_prelaunch only checks for duplicate node names
cosmetic
cosmetic
add rabbit:start_cold/0 without relying on release/boot-script
Merge bug24729 (again)
Fiddle with comments
Merge bug 24901
Be a bit more aggressive in taking the globally registered name.
cosmetic
Don't use an untrappable kill.
Switch to monitoring the overall supervisor.
Revert 9d59000c4a44, 38eb4652c7e3, f6d1609212f9, e1311dd42eba (timeout changes for mirrored_sup tests)
Revert aa8a9e4d1bb2 (extra debugging for mirrored_supervisor)
cosmetic
oops, had left io:format in the code
More aesthetics...
A ton of aesthetic changes, a less ugly rabbit, a bit of navigation, some other polish.
Fix for R12B-3 that was broken by bug 24196.
Enforce prefetch, since lacking it can give horrible results.
Don't let the user specify types for properties, they're pretty much all strings.
Allow selecting types in the web UI, and clean up a little: allow booleans, and detect floats in the HTTP API.
fix typo and opt checking
use pp flag isntead of re-writing the flag
A bit more debugging information on why we might get an error back from the delegate.
Removed unused types, added dummy -spec to silence compiler
merge default
Check that options are not used in the wrong place
Merge bug23908.
Merge bug23908.
Merge bug24196.
Merge bug 24196.
Log errors when children fail to start.
Fix typo in debian control file
Merge heads
Merge heads
Added tag rabbitmq_v2_8_2 for changeset 027349f33211
Added tag rabbitmq_v2_8_2 for changeset 5805f59bafb4
Added tag rabbitmq_v2_8_2 for changeset d81de498279b
Added tag rabbitmq_v2_8_2 for changeset 24ae2d77b4db
Added tag rabbitmq_v2_8_2 for changeset c9e359ed3c9b
Added tag rabbitmq_v2_8_2 for changeset d6055fb54d52
Added tag rabbitmq_v2_8_2 for changeset cc37df8537d3
Added tag rabbitmq_v2_8_2 for changeset ce2857f462ea
Added tag rabbitmq_v2_8_2 for changeset c811a9898ad7
Added tag rabbitmq_v2_8_2 for changeset 1df513cb273f
Added tag rabbitmq_v2_8_2 for changeset db6f2fb3b0ec
Added tag rabbitmq_v2_8_2 for changeset 7a5892f1a876
Added tag rabbitmq_v2_8_2 for changeset 677e882be121
Added tag rabbitmq_v2_8_2 for changeset 4136141f70b9
Added tag rabbitmq_v2_8_2 for changeset 95e7988b260f
another attempt to track down the mirrored_supervisor_tests CI failure waiting forever is all very well...except when we *expect* a failure
merge bug24917 into default
cosmetic
let's wait forever ...so we can investigate what is going since this fails in CI even with a 1 minute timeout
bug: code_change/3 should return {ok, State}
bug: code_change/3 should return {ok, State}
Make rabbit_mgmt_db into a gs2, make it hibernate, and make it gc rabbit_event when it hibernates.
Merge bug24911
No, really, "nodes" is not always there. Damn it.
another attempt at pacifying the CI gods
Display things that are strings as strings rather than terms, since Erlang's string-detection algorithm breaks on non-ASCII characters. Assume that ~p's use of quotation marks was a deliberate aesthetic choice.
properly ignore dynamic children that return 'ignore' from init/1 thus preventing an explosion on supervisor shutdown when we would otherwise trip over unlinking an 'undefined' pid.
Merge bug24909
Report error better in case disk free check fails
Correct disk free checking command on windows
API change
Share the exchange scratch space
bump the mirror_supervisor_tests wait time to reduce ci failure rate
Unmerge bug24866
Merged bug24866 into default
Merge bug 24790
One less substitution. Pity RHEL and SUSE also differ gratuitously.
Move the Debian init script to its natural place
Move the remaining common init script to RPMs
Merge bug24884
Allow stopping stopped; and starting started broker
merge default
Use abstraction for reading the scratch
Add an abstraction for reading the scratch
API update
Rework event serialisation thing so that decorators get a say too. It's a bit fiddly since we have to ensure that just because a decorator wants serials, doesn't mean everything else has to get them...
lsb init script for debian
Add comment explaining why ack() and state() exist.
Merge bug24695 and fix a ton of conflicts.
Update the msg_id_ack in set_length.
Merge bug24695
Merge bug24196
Update the tests to work again (and test direct connections too).
Support direct connections.
Merge in bug24196
Merge in default
Merge in bug23908
Merge in default
Show the error in a tooltip
fmt_escape_html_one_line
Merge bug24848
Cosmetic. Ish.
A bit more UI.
Use default vhost - so if someone specifies a URL like amqp://localhost it will work for federated exchanges in all vhosts.
Allow specifying a default vhost
fmt_shortened_uri
fmt_shortened_uri
Auth mechanisms in URIs.
Merged bug24885 into default
Remove magic extra params thing, this should go in amqp_uri.
Merge bug24877
AckMsgs -> AckRequired in master:purge
merge bug24885
755 is wrong, this should not be executable. Somehow it ends up not executable anyway, but we shouldn't say it is...
I don't think we need a licence header, and it's intimidating. Rephrase a bit too.
Damn sleep in Makefile...
Make rabbit_variable_queue:dropwhile tail recursive
merge emile qc changes
Clearer var naming in BQ:dropwhile. Fix in amqqueue_process:drop_expired_messages.
QuickCheck follows dropwhile API updates
Merged bug24833 into default
Increase buffer size for the port driver to match that used by the underlying socket.
Merge heads
Reorder exception contents
fix type signature for rabbit_basic:map_headers/2
Only check <<"exchange">> once.
merge default
merge default
Add ulimit default file to debian package installation and source it on server start.
cosmetic
Move node waiting to rabbit_control.
Merge in bug23908 and fix validation
Merge in bug23908
Merge bug 24837
Tweaks
Merge bug24860
cosmetic
merge bug24882 into default
simplifying refactor
Merged bug24554 into default
Defer to shovel.html page for instructions.
merge bug24885
Update comment for bq:dropwhile spec
Explicitly acking/not acking when calling bq:fetch in set_length in an HA slave
Fix rabbit_tests - only get the state after calling bq:dropwhile.
Changed BQ:dropwhile/3 to take a boolean arg to decide wether to ack or not.
cosmetic
Merge bug24863 to default
In general, avoid unnecessary interleaving of mutating state
Oops
Oops
Allow setting and clearing parameters in rabbitmqadmin
A bit more robust
Fix badmatch and give some context if an error occurs.
ack_nacked_messages -> ack_if_no_dlx
[83,104,111,119,32,115,116,114,105,110,103,32,101,114,114,111,114,115,32,112,114,111,112,101,114,108,121]
Missed a bit
s/app_name/component/g
eliminate unused var, and correct formatting
s/app_name/component/g
Checking for existance of DLX in dead_letter_publish
s/app_name/component/g
Merge in default
TODO done
Merge in default
s/app_name/component/g
Defensive programming
Merged bug24855 into default
merge bug24874 into default
Consistency between dropwhile and internal_fetch
Sort out gen_server:casts
According to my interpretation of RFC6455 this should be error code 1000
Re-creating bug24863 branching of default
prevent badmatch in vq
Exiting when modules can't be found.
Added wait_node script to wait for the node to be up.
Explain why we need to keep this code.
Only notify if the value has changed.
Various validation tweaks: Report parse errors more nicely, don't blow up with trailing whitespace after a dot, don't blow up on bitstrings, use is_boolean().
Oops
Clean up after tests
Clean up after tests
Remove idiocy
Moved various functions that query the status of applications from rabbit_control to rabbit_misc.
Merge pull request #6 from simonmacmullen/master
Merge bug 24871 (as foretold in prophecy^W bug 20337 comment 199)
Merge bug24875
xmerl dependency
Merge bug 24821
Exchange type spec hrl is going away
That hrl has gone away.
Merge bug 24729
Merge bug 24729
Merge bug 24729
Merge bug 24729
Merge bug24729
Earlier versions of Erlang don't have integer_to_list/2 auto-imported.
List comprehension instead of map.
Fixed cycle detection, resources and names were messed up.
Usual Makefile editing... test don't work with 'sleep 1'
Checking for cycles when sending instead of when receiving.
Merge bug24869
eprotonosupport support.
Document "columns" query string parameter.
Merge bug24858.
Cosmetic
oops
track queues which may have delivered non-autoack messages to channel ...so that we can ensure that acks/requeues have been seen by those queues during an orderly shutdown by the time a 'close' (in the error case) or 'close_ok' is sent.
pmon is used by various of these modules...
Merge bug 24769.
fix bug
tiny space saving refactor
backing queue quickcheck updates for bug20337
According to Simon the .hrl files are not worth it.
Added dummy .hrl files so that we don't break files including them.
Removed behaviour .hrl
Removed behaviour .hrl
Removed behaviour .hrl
Removed behaviour .hrl
Removed behaviour .hrl
Merged default
cosmetic
fix a bug
merge bug24769
cosmetic
gb_sets:fold instead of lists:foldl.
Micro-optimisation
The "blind" difference is unsafe in 'prune'.
Increase the number of Erlang versions this will actually build on.
Matthias points out that we don't need to lookup here; we will lookup later anyway...
Merged bug24763 into default
Merge bug24862
Deduplicate routes (needed for sender routing).
Optimise routing for the default exchange.
Uff, pushed Makefile change by mistake...
Removed rabbit_misc:gb_trees_difference/2.
Specialised set difference function for dtree.
delete_any instead of delete.
Merge bug24725.
I initially read this as "head 2 is an optimistion of head 3, and head 4 is a different case".
Merge bug24854
Changed uses of gb_sets:difference/2 to our difference functions.
Added sane set and tree difference functions.
Note
Allow exchanges to point to upstream sets that do not exist, and upstream sets to point to connections that do not exist. And tests to match.
cosmetic
optimisation: gm:broadcast earlier so other nodes can get on with work
Test dynamic configuration a bit.
Don't be ridiculous. It is not true that any exchange will only reference a given connection at most once.
Put the "-e" in the right place so that tests actually fail if rabbitmqctl fails.
That's obsolete.
(Incidentally) Fix use of /tmp instead of $TMPDIR, aka run tests on a Mac.
merge bug24846 into default
Destination on MESSAGE frames reflects SEND destination, not SUBSCRIBE destination; Treat default exchange and amq.topic exchange specially; Escape content; Adjust tests to cope with new expectations.
I am not convinced by this TODO any more, see bug 23908 comment 45.
Remove feeble attempt, punt to bug 24852.
Merged bug24833 into default
Restore rabbit_basic:extract_headers/1
typo
Notes
Clean up our scratch space. All tests now pass.
dtree API cleanup: handle 'insert' w empty secondary key list correctly
Damnit
That's now a binary
No point in testing statically configured exchanges any more
Connections and upstream sets are not quite the same
Switch to configuring tests via the new config mechanism.
Oops
Current thinking is fold should be master only. Interestingly, this also eliminates bug24854
Oops
Tests
list/1 might not find anything.
list/1 might not find anything.
Actually handle validation errors.
Callback info a la bug 24729
Specs.
We should validate clearing as well.
We should validate clearing as well.
Tests
Merged bug24833 into default
Base validation on returning error tuples rather than exiting; thus report all errors (for a given pass) rather than the first error we see.
In case we just have a single error
Base validation on returning error tuples rather than existing; thus report all errors (for a given pass) rather than the first error we see.
refactor: shrink
merge default into bug24725
Whoopsy.
better(?) dtree docs
Validation. This is a bit rubbish due to the need to exit; we really should collect validation errors.
When a connection is set such that we end up with exactly the same upstream we already had, don't do anything.
Merge bug24789
revise nack handling in queue (for dlx) - with the changes introduced in bug 24750, the "lost" message count   logged was misleading since it would not include any messages still   pending confirmation from other queues. Fix that. - normal queue terminations are not log worthy - splitting log information across two entries loses context,   i.e. other log entries might appear inbetween. So now we collate all   the information into a single log entry. - saying that messages were "lost" is misleading - we simply don't   know what happened to them. Make this clear(er).
Fix for starting in 2.7 and later brokers.
fix nack handling in channel When a queue dies abnormally we nack all messages sent to that queue and still pending confirms. Any confirms coming in for these messages thereafter - from other queues - are ignored.
It helps if you actually test this. I don't know if those are good parameters, but at least this does not massively blow up when I force close a connection via mgmt.
Explain
Simplify supervision: remove a redundant supervisor.
Simplify supervision: get the client_sup to start both the client and the processor.
make dtree:take/3 cope with absent keys
Fix in map_headers.
This is getting trashed, but I may as well fix it anyway...
README
index
README
cosmetic: js tweeks
bunny example, moved things around
Swallow bump_credit messages
Move cleanup to one place - terminate
ArrayBuffer is not supported by older browsers
A bit of API documentation.
rabbitmqctl docs. Rather generic...
Typo in README config example
I think those make more sense there.
Pushed a change to the Makefile by mistake.
map_headers instead of {extract, replace}_headers.
Don't invoke userdel
Remove link records for broken links when their upstream goes away.
We don't want to key off the entire upstream, bits of it may change
Let's think that through a bit more shall we - it never makes sense to restart a child, it may have changed!
merge bug24845 into default
do not confirm 'immediate' messages that failed to be delivered in particular non-persistent messages were always being confirmed regardless
Smart start/stop/restart of federation links on connection set/clear.
Show starting as yellow.
refactor queue's confirm handling on publish I think it's a bit clearer this way
handle confirms and dlx When a dlx is configured we fall back to the normal go-via-the-backing-queue route since the dlx logic assumes that any dead-lettered message is present in the bq. Indeed the bq is the only place in which such messages are kept until they have been confirmed by the dead-letter destinations.
Add a man in the middle between sockjs and stomp to catch the flow messages.
merge default into bug24725
Added callback info for rabbit_backing_queue.
merge bug24843 into default
fix a race
merge bug24842 into default
fix cluster tests to work again in single-node case
Resurrect
Added callback info to rabbit_msg_store.
URIs for connections
Oops, that was meant to be a new branch.
URIs for connections
Added callback info to mirrored_supervisor.
Added callback info to supervisor2.
Merge in default
Merge in default via bug24196
Merge in default
Merge bug24808.
Moved behaviour_info/1 export in the same ifdef block
Merge bug24750.
Attempt to flesh out the essay slightly more.
Merged default.
Typo in rabbitmqctl man page
Display a complete table of versions when there is a mismatch.
Great big error message.
Merge bug 23463
Merge bug 23463
Merge bug 23463
Merge bug 23463
1.0 is less of a magic number than 1.8.
We don't need this any more, just inform the registree once.
Resurrect branch, and fix spelling.
AHEM
AHEM
Minimise difference from default
Revert odd change
Cosmetic.
Terminology
Don't need a switch, just passive declare to see if it exists, and active declare if it does not.
Switch to control declaring the upstream.
Better platform support detection for disk free space check
Merged bug24823 into default
cosmetic
Now we can safely declare the upstream exchange - so let's do that. Lovely. This is a bigger change than I would have liked, since we change the type of the exchange field of the upstream record...
(Roughly) make federation into an exchange decorator. This actually works! Currently it has hard coded policy:
Rough sketch of exchange decorator concept.
Rough sketch of exchange decorator concept.
Remove unnecessary safety net
permit x-message-ttl=0, and optimise that case
Separate alarm from disk monitor and disk free status reporting
Consistency
Make parameters part of the definitions dump.
Make sure we never make a request that can return 404.
UI for globals.
refactor: extract undefined-ness check
cosmetic(ish): shorten arg check fun names and make them more meaningful
Generalise memory alarm
Language
Alert remote and local alarm subscribers differently
Remove rabbitmqctl disk free features
cosmetic
cosmetic: don't rely on Erlang term order to catch type errors
correct spec for BQ:dropwhile
...and use that to allow us to specify the max_hops value.
Allow any parameter to be set either on the upstream set or the connection.
The start of a UI for federation connections.
Err, implement that.
AppName and Key should both be binary.
AppName and Key should both be binary.
AppName and Key should both be binary.
API change, and remove some debug code.
Notify when things are cleared.
Magic upstream set "all" which includes all connections.
More API
Oops
Split out the params a bit, these should make it easier to edit...
API tweak
Oops
Remove a bit more list_to_binary_to_list_to_binary sludge.
Oops
I have totally fallen out of love with the idea that federation should let you declare exchanges here.
CRUD for parameters.
API changes
A few more APIs useful for mgmt. Make proplist keys always have to be binaries.
List runtime parameters in mgmt.
Rearrange for mgmt.
Rename cluster config to runtime parameters.
Rename cluster config to runtime parameters.
Rename cluster config to runtime parameters.
Merge bug24764
Merge bug23610
Cosmetic
Merged bug24799 into default
Merge bug24728
Merge bug24827
Do the reporting in connection_error, so we don't report {shutdown, restart}.
Wrap long lines
Merge heads
Remove rabbit dependencies
Rename disk_monitor
Rename disk_monitor
Merge in default.
Update connect_options.py to check for error frame (if bad connect) and to set default user before test (so it passes).
Number of columns has changed
Disk free checking updates
Generalise memory alarm
ensure appropriate expiry of immediately delivered messages
cosmetic
refactor/optimise 'reject'
cosmetic
rabbitmqctl doc tweak
Disk free limit setting with rabbitmqctl
Reflect removal of federation links in the status.
TODO
Catch exit on the way out, and make sure connections / channels are closed. This feels distrssingly un-Erlang-ish, but I can't think of a better way.
Free disk reporting
Disk free reporting
Merge in default
Report a more sensible status if an amqp_channel:call() explodes.
Merge in default
don't check the return of credit_flow:{peer_down,ack} we don't do this anywhere else
merge default into bug24769
make the return value match the spec fortunately no call sites were actually checking this
Show the upstream exchange if it is different.
correct return value of rabbit_amqqueue:delete_immediately/1 ...and be more assertive
Mark branch as default
Rearrange
monitor queue senders with pmon ...which simplifies the pmon API and the mirror slave promotion
Merge bug24203.
Merge in default
Merge bug23904
Merge in default, fixing the remaining tests.
use pmon in mirror_queue_slave
Fix most tests.
Logging and types for setting disk free limit
Shut down nicely if we get the opportunity.
use pmon in queue_coordinator
use pmon in queue_collector this required a tweak to the amqqueue API - making delete_immediately/1 take a list of qpids rather than a single #amqqueue record.
I keep forgetting the trailing ".".
use null instead of auto
null is in JSON, we should allow that too.
Simplify.
use pmon in rabbit_channel
use pmon in amqqueue_process
first cut of helper module for keeping track of process monitors
handle rabbit_net:async_recv errors gracefully plus some drive-by refactoring
First draft of disk space monitoring
Restart federation links whenever config changes. We can now dynamically federate. W00t.
Merge heads, again!
merge heads
Merge heads
fix spec
erhm. it helps to actually add this.
convert channel to use new dtree data structure for confirm tracking
Added tag rabbitmq_v2_8_1 for changeset 9214f36d71a4
Added tag rabbitmq_v2_8_1 for changeset 13898e9960d9
Added tag rabbitmq_v2_8_1 for changeset 9c0ef158faf8
Added tag rabbitmq_v2_8_1 for changeset ae653dd980ef
Added tag rabbitmq_v2_8_1 for changeset 580eeb565531
Added tag rabbitmq_v2_8_1 for changeset 2b21093bfa2b
Added tag rabbitmq_v2_8_1 for changeset c4e0b7571260
Added tag rabbitmq_v2_8_1 for changeset 45c41b08ec82
Added tag rabbitmq_v2_8_1 for changeset 22aefeff06b2
Added tag rabbitmq_v2_8_1 for changeset d73da6e245bb
Added tag rabbitmq_v2_8_1 for changeset fdf7fdaeba52
Added tag rabbitmq_v2_8_1 for changeset ae6f225b4812
Added tag rabbitmq_v2_8_1 for changeset 99239db7a754
Added tag rabbitmq_v2_8_1 for changeset 01792417c7fa
merge default into bug24750
cosmetic
get rid of rabbit_misc:gb_trees_set_insert/3
merge default into bug24750
Allow string keys, format the results for listing.
consistency
cosmetic: log queue name with rabbit_misc:rs/1, like everywhere else
That should be a string
Get everything from the cluster config mechanism.
fix a possible leak it's not clear whether we can actually end up in the 'none' branch, but assuming it exists for a reason, we should certainly clear the dict entry there too.
convert the queue to use dtree for confirm tracking
Merged bug24809 into default
Rollback startup method for SuSE only
Attempt to frighten the children less
Make use of special exit reason to both prompt restarting and simultaneously avoid dumping into the logs
Accomodate a desire to avoid polluting the logs
Merge bug24816.
first cut of new data structure for confirm handling
Package all bat files.
Update debian control file fields
Merged bug24811 into default
Merged bug24811 into default
Merge bug24810 again again.
So we actually need to handle the case of starting from scratch separately, otherwise we never write out the version file, with fun consequences.
lookup/3.
Pull a couple of config items from the new mechanism.
Notify
Notify
Update
Generic validation.
Merged bug24810 into default
It's possible somehow we could be left with an empty mnesia directory (spotted with "make cleandb" but maybe other things could do this). So instead check for the existence of the guid serial, which has not changed since at least 1.7.0.
If don't even have an mnesia dir yet, treat that as meaning "no upgrades needed" rather than "upgrades are impossible"
Merging bug24774 to default
And if an {intrinsic, Delay} child exits normally/shutdown, remember to really exit the supervisor.
Some cosmetics; Some consistency of ordering; There is no good reason why delayed restart shouldn't also support intrinsic. Added.
Apply supplied patch to support normal/shutdown termination of delayed restart children
We need to export this now
Don't have non-monitor users request /api/nodes. This means we need to put exchange_types on /api/overview, but that's not too hideous as we sort of want to treat it as global anyway.
Merged bug24810 into default
use monitors instead of links to watch over net_adm:names/1 calls thus eliminating the need to trap exits, which can interfere with the calling process, and dangling 'EXIT' messages in the mailbox.
reduce number of system calls by batching socket writes
Look for cluster nodes in Mnesia's view of the world (in case we are a disc node) and the config file (in case we are a ram node)
Placeholder
Some pluggable validation thing.
Some pluggable validation thing.
Simple CRUD for config-y Erlang terms
Added tag rabbitmq_v2_8_0 for changeset f98894d59e3c
Added tag rabbitmq_v2_8_0 for changeset c11d130f002f
Added tag rabbitmq_v2_8_0 for changeset a8a13ecb20d0
Added tag rabbitmq_v2_8_0 for changeset 3e0ce593f77c
Added tag rabbitmq_v2_8_0 for changeset d87589ed0bff
Added tag rabbitmq_v2_8_0 for changeset dbfa84f2027a
Added tag rabbitmq_v2_8_0 for changeset 41e3d33aaf79
Added tag rabbitmq_v2_8_0 for changeset 0f825c925130
Added tag rabbitmq_v2_8_0 for changeset 2e8cec99b358
Added tag rabbitmq_v2_8_0 for changeset 9cbdf7e82983
Added tag rabbitmq_v2_8_0 for changeset 7e6b50a882ed
Added tag rabbitmq_v2_8_0 for changeset 2b10d40da328
Added tag rabbitmq_v2_8_0 for changeset 6fb87d6eb01b
Added tag rabbitmq_v2_8_0 for changeset 152dab3f6974
Not true for some time
Unused variable
Merge bug24796
Test implicit connections even if we *are* doing SSL tests, by turning implicit connect on just for the test.
Removed impossible not_found in login_header/3
Log the various authentication failures possible.
Merged bug24794 into default
Simple test for multi call - and reverse the lists so they come out the same order they went in.
Refactoring of the tests I did in a failed attempt to test bug24794. These are worth keeping.
Slightly nicer to use a -define().
Updated test ssl.config to remove default user (and implicit connect); adjusted tests to avoid using implicit connect everywhere; put check in login_header to return undefined if lookup returns undefined.
Comment
Only sleep as much as we need, and tail recurse properly.
Hush, little dialyzer, don't cry.
Scatter-gather.
This fixes the bug, but it does not scatter-gather, which would certainly be nice...
It actually works without this. But it's sure as hell less confusing to put it in.
Simple test for the legacy case where we connect to an upstream that does not know about the x-federation-upstream exchange.
Merge bug24791 into default
Idiocy
Abandon the idea of changing the no-such-exchange-type error to a soft error, so allow for the idea that the connection will be taken down when we declare.
Ignore this message.
Displaying "install_handle_from_sysinternals" is rather hostile, make it clearer.
Slightly more comment
Add failing test. We can't implement this in Python since stomp.py seems buggy in this area anyway (I'm not sure it sends DISCONNECT).
Make the reader transient. Explain why.
Mgmt doesn't construct the name from peer_address and peer_port any more, we should generate a name here if there isn't one, full stop.
Make sure STOMP connections have a name, and thus fix mgmt connection listing.
Fall back to declaring a fanout exchange if upstream claims not to recognise the term "x-federation-upstream".
That MaxHops - 1 is bogus, and was causing the failing test. Also, defer to rabbit_exchange_type_fanout:route/2.
WIP commit on upstream helper exchange. Doesn't pass tests, doesn't have backward compatibility.
Merge bug23406
Separate update form.
Show whether a user has a password in the list.
Don't allow empty password, it's confusing.
Make this one section, to stop section overload.
Merge bug24614
Not needed.
Merge bug24779
Let it crash...
Ahem.
Try to close the socket immediately on reader death.
Add to qi the equivalent of msg_store_file:scan and rework a specialised walker so that it makes use of the generalised one. This is exported so that it can be used elsewhere.
We do depend on rabbitmq-mochiweb
Merge in default.
Merge bug24553.
Remove bulk of README.
Added -callbacks for rabbit_auth_mechanism.
Added -callbacks for rabbit_auth_backend.
Added -callbacks for rabbit_exchange_type. Deleted rabbit_exchange_type_spec.hrl.
cosmetic, plus report Pid instead of {ok, Pid}
Added specs for gm callbacks.
-callbacks for gen_server2. USE_SPECS now requires R15B.
Make RedHat/Fedora use runuser to start the service
Reduce changes and preserve atomicity of redirection files
Modify packaging for Debian to use start-stop-daemon
Notifying queue deletion in rabbit_amqqueue:on_node_down/1
Notifying queue deletion in rabbit_amqqueue:internal_delete/2.
typo
license
Add licenses
cosmetic
Merge bug 24768
In fact, let's not call handle_ch_down in the case where we get a 'DOWN' while waiting to stop.
And a comment
Actually be slightly more minimal about what we move.
Don't throw away 'DOWN' in delayed_stop.
Copy superior formatting string from rabbitmq-federation-management of all places.
Merge bug 22961
Not needed any more
Show example.
Be consistently binary in all our values here.
That's changed.
Correct strange language, M-q
Handle local / remote connection failure / disconnection differently.
Copy the error_string concept from ctl, in order to never format a string with ~p.
Eliminate map_error.
Remove host / port / ssl.
Remove host / port / ssl.
Take advantage of rabbitmqctl eval.
Take advantage of rabbitmqctl eval.
Inline report_status()
Tweak docs.
….and make it executable again :-(
OK, several goes at getting this right  :-(
Merge in default
Merge bug24766
Control x-ha-policy.
Remove check -- hmm, that means the generic-unix rabbitmq-defaults can be created by the build step
Merge bug24558
Missing spec
Merge bug24765
Close those tags, fix MSIE.
Assert in timeout, better sync comment, changed naming of needs_index_sync.
Adjust message
merge bug24650 into default (Move names for connections and channels from mgmt to broker)
merge bug24605 into default (Move names for connections and channels from mgmt to broker)
merge bug24605 into default (Move names for connections and channels from mgmt to broker)
Merge bug20337
Merge bug20337
Merge bug20337
License boilerplate
License boilerplate
that function doesn't return errors
Move SERVER_ERL_ARGS to rabbitmq-env and renamed rabbitmq-sys-defaults to rabbitmq-defaults
Merge default in
re-order arguments to BQ:fold to look more like an Erlang fold
Rename process_messages to fold.
Use rabbit_basic:append_table_header. This means we need to lose a test, but that code is now tested byt the DLX tests.
Extract some header-munging functions into rabbit_basic (not sure that's the best place, but rabbit_misc is already overflowing and rabbit_headers did not seem justified).
Simplify, make prettier and shorter example
hgignore
typos in (old) debian packaging doc
Skeleton
cosmetic
Simplify supervision tree
SockJS allows to extract some connection details - present that to mgmt plugin
Default port is now 55674
Cosmetic
Apparently file desc must be obtained and released by the same process
Release was way triggered too early
Update rabbit_stomp_processor to recent API changes
Merge bug24761 into default
add missing argument to BQ:process_messages
merge default into bug20337
get rid of DLX warnings
merge heads
don't remove DLX when not found
Allow "server:.*" header on CONNECTED frames in tests.
add missing head
Fix links.
Marginally tidier
rename the weird VQ:ack/3 head to VQ:process_messages/3
fix hidden bug in config file listing see docs for init:get_argument/1 - a single "-config <file>" argument comes back as [[<file>]], multiple come back as [[<file>], ...]. The reason the previous code worked is that the functions in 'filename' accept deep lists. NB: we are not handling the case of "-config <file> <file> ...", but then neither does the application_controller, and th docs for 'erl' only mention a single file.
dead-lettering to a deleted exchange outputs an error and disables dead-lettering for that queue
Missed a reference
cosmetic: make spec order match export/definition order ...and introduce a useful type alias
add type for header_routes
Get generic-unix sys-defaults to check for global locations (and rename rabbitmq-locations to rabbitmq-sys-defaults).
refactor amqqueue argument checking
Also, spelling
You don't need a fractional part and it can be greater than 1.0. Also, M-q.
"server" header in CONNECTED frame.
Rename rabbitmq-sys to rabbitmq-locations
Consistency.
Channel names -> broker.
Channel names.
Channel names.
Merge bug24753 into default
Merge bug24182 into default
Merge bug24182 into default
Merge bug24182 into default
Merge in default (something of a biggie, merge of bug24744 demanded we move stuff around).
Merge bug24744
Cosmetic
Merge stomp_processor_sock to stomp_reader
implicit return type for start_processor
rabbit_net:send was wrapped in catch previously
SendFunc shall be SendFun
rename a function
Merge bug24482
M-q and explain windows v unix.
Remove unused variable
Merge bug24739
Put back one sed change -- not an inline update after all.
Merge bug24739 in (a dependency).
Adjust rabbitmq-env.conf location and re-instate ownership decision
Checking for memory usage in needs_timeout
Backout sed -i replacements
Merge default in
Merge bug24736 (again again)
Ignore --vhost parameter for things that don't live in vhosts.
In fact rename this, I think this makes the intent clearer.
Better doc
default_vhost from Massimo.
Using SYNC_INTERVAL for the idle timeout as well.
Merge in default
Merge bug24706 (again).
Removed reduce_memory_use test before actual reduce_memory_use in timeout/1.
Removed sync_if/2 and sync/2.
Merge bug24706 in (a dependency).
'nother oops
Oops, typo
...and update tests.
Merge default in
Fix macports to Portfile after move of vars to rabbitmq-env
This is a bit clearer now.
That's no longer true.
Simplify now all connections come with a name.
name info item for connections.
Oops
Take default owner/group for confdir
Merge in default
Merge bug24542 into default
Merge bug24657
Let's put the tests in the tests dir.
Only let "foo" mean one thing per test
Remove some dups.
TODO rejig
Resurrect default without bug24494, for real this time.
Merge bug 24755 (self-QA)
Allow publishing from the queue details page.
Fix a bug found by the tests! TSV output should not have trailing tabs on each line.
Fix a bug found by the tests! rabbitmqadmin declare permission expects a vhost= argument, not a --vhost one.
Tests for rabbitmqadmin. There could probably be more, but this covers a fair whack of it.
Make sure that we don't leave any objects kicking around after this test.
Some renaming, macros and refactoring in the name of encapsulation.
Create man page for rabbitmq-echopid.bat
Handle echopid nit picks
Update context help.
Rename internal subscription prefix
Cosmetic / reduce distance from default.
I don't think the mk_ prefix helps us here.
Oops
Rename internal subscription prefix, add safety checks
Handle protocol death nicely - close sockjs connection
Customize protocol name - WEB-STOMP
Allow the protocol name to be customized
Forgot to add this...
Revert accidental inclusion of bug24753.
"Promote" implicit_connect to the top level since it is no longer just for default_user
Move the mode thing into the server too.
Move the mode thing into the server too.
Move the mode thing into the server too.
Whoops
Play nicely with RMQ descriptor limits - but with SockJS we can only approximate
SSL client certificate authentication. In theory based on Shane Hathaway's patch but there's probably nothing left of it by now.
Rebuild the test config every time and thus make it a lot damn clearer whether or not the SSL tests are running and why.
Update to recent changes in bug24744
Cosmetic: the power of pattern matching
Get heartbeats working again - must support both sync and async data sending
Don't enter an infinite loop if implict connect fails.
Merged bug24365 into default
Subtle typo
Move Sock functions out of processor
Unused variable warning
Remove code that checks for config vars not being set: this can never happen.
Move code from rabbitmq-auth-mechanism-ssl onto the broker
Move code from rabbitmq-auth-mechanism-ssl onto the broker
Default node when using config file.
Despaghettifying part 1 - move most of the rabbit_net calls to init
Connect using internal API's rather than via Tcp
How do I hate thee, coverage? Let me count the ways.
merge bug24381 into default (Windows INSTALL file is not readable using notepad)
Merged bug23114 into default
Should have a \n here...
rename delayed_delete into delayed_stop
ignore all messages after queue deletion, except for confirms
Merge 24748 in to get renaming of portfile variable.
Merge in default
hang subsequent queue deletions
delay stopping the queue until all confirms have been received
simplify MsgFun logic for VQ:dropwhile/3 and VQ:ack/3
warn when messages are lost
BQ:ack batches of messages
don't dead-letter on purge
Merge default
don't dead letter on queue deletion
Introduced a small timeout when needs_timeout returns 'idle'.
Use DOS/Windows linebreaks
Backed out changeset c0b6b23c6ec9
Use unpredictable subscription id
Provide fake subscriptions for reply messages
missed io:format
Modularize rabbit_net calls in stomp_processor - allow pluggable transports other than raw tcp.
Merge in default
Implement basic timeout when waiting for the pid
Make waiting for the pid the default behaviour
Add errorlevels and wait-looping to rabbitmq-echopid.bat
Merge bug24086
rename ChPid to SenderPid where appropriate
dead-letter when auto-deleting
refactor: less strange variable scoping
Remerge bug24714
Unmerge bug20337
oops
don't hang on multiple queue.purges
merge default into bug20337
cosmetic
always issue credits, even when we drop a message ...due to a dead-letter cycle and make the code a whole lot simpler
cosmetic
initial import
Merge heads
Merge bug24714
Merge bug20337 into default
It's not just for enabled plugins
Move wmic pid-finding code into its own batch file
factor out redundant code
refactoring
Merge 24740 into default.
Redundant.
Merged bug23394 into default
simplifying refactor
Merge bug24736
Rejig help slightly
Oops
Help was getting a bit overwhelming, split it up now
Cosmetic, and fix display of defaults.
Better error handling
Across-port commit d7bcc763833358ae77060610cf0aae18c3ac9457 from Massimo's github.
Ensure rabbitmq-env.conf file is fixed location, even in Generic-Unix case.
ensure that generated queue names meet the AMQP spec
Update misleading comment
Merge heads
there is no need to hash the subscription id doing so doesn't make it any more unique or secure
Add directory for enabled plugins in the standalone generic-unix case
produce valid utf8 in generated queue names
don't hang if purging an empty queue with dlx
use lists:keydelete and only log cycles once
merge default into bug20337
Merge heads
Merge in 24739 (again).
Ah… the number of indirections there are here…  :-(
Merge in 24739 (I need this fix).
Get macports installation to create enabled_plugins_file directory if it doesn't exist.
Comment for future readers
Typo
OK Now I see which rabbitmq-sys is really updated in macports  :-(
Another go at reinplace syntax
Simplify macports Makefile and delimit MACPORTS_PREFIX in the usual way.
Escape $ in Portfile reinplace command
Merge default in
Refactor generic-unix rabbitmq-sys for easy updatability; simplify macports mods to generic-unix package; make rabbitmq-env independent of package installation; adjust rabbitmq-sys in base scripts to allow rabbitmq-env to work everywhere.
monitor nodes just once
Got rid of unused function and warnings.
Remove dependencies upon sed -i which is not posix-compliant
remove cruft
Merged default
Changed needs_sync/1 patterns order.
Taking is_dirty into account in needs_sync/1.
needs_sync/1 now uses the handle write buffer, sync/1 is unconditional.
Merge in default
Syncing instead of flushing.
Massimo Paladin's patch to introduce a configuration file, rebased against default.
Merge bug24668 (make consumer flow control more like credit_flow; improve performance along the way) (again)
Merge bug24668 (make consumer flow control more like credit_flow; improve performance along the way)
handle framing errors promptly
Cosmetic
Whitespace change to make new head
refactor channel frame handling ...so there is just one process_channel_frame call site. Also, ensure control_throttle isn't called twice, which would happen when processing a 'channel.close_ok' frame. No harm in it, really, but unnecessary.
Merged bug24505 into default
cosmetic: drop redundant /integer in binary match plus re-indent comments
Merged bug24505 into default
Merged bug24505 into default
Merge bug24234
Merge bug24730
refactor: remove cruft The equivalence proof is left as an exercise to the reader.
refactor: extract commonality between basic.deliver and basic.get ...and move the writer communication as early as possible, which improves latency.
Returning idle in needs_timeout/1 only when there is something to flush.
Always returning either timed or idle, always flushing in timeout/1.
Merged default.
Using gen_secure/0 only when really needed.
Flushing periodically, trying out various way to find out when to flush.
comply with modified notify_sent contract
credit_flow-like throttling of queue->writer message flow Previously we effectively had a credit_spec of {100,1}, i.e. the queue would send up to 100 messages to a consumer channel/writer, and the writer would 'ack' them individually. That is horrendeously inefficient: - when draining a queue, after the queue had sent 100 messages it would block the consumer, unblock when the notify_sent 'ack' came in, send another message to the channel/queue, block again. So a vast amount of work per message - in a cluster, the notify_sent 'acks' effectively doubled the cross-cluster traffic
merge default into bug23114
Don't sync the mnesia disk log when nothing got written to it This is imperfect but safe.
add rabbit_nodes to common
cosmetic
correct some signatures and return types
Merge in default
Give alternative to 'todos' which (can) work on macos
Merged bug24624 into default
Merged bug24624 into default
Merged bug24624 into default
Merged bug24624 into default
cosmetic
Merged bug24670 into default
Merged bug24670 into default
Merged bug24655 into default
merge default into bug20337
tweak credit_flow logic - make credit specs contain the InitialCredit and   MoreCreditAfter. This is more intuitive and means the message sender   only needs to look at the former and the receiver at the latter. - narrow the condition on which handle_bump_msg invokes unblock - it   only needs to do that on *transition* from =< 0 to > 0. - refactor: extract process dict update - cosmetic: more logical order of exported functions
cosmetic
Merge bug24706.
shrink
Make uncommitted messages / acks look nicer.
Merge bug24702
Merge bug24500
Merge bug24500
Merge bug24500
Add description
Increase timeout to allow tests to pass
refactor (Matthias's suggestions)
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
Merge bug24606
drop messages in dl cycles
Fix messy copyright headers
This is obsolete, delete rather than update copyright.
get rid of the redundant second argument to handle_wait_for_confirms
Merge bug24692.
Umm, and those.
Build-Depend on erlang-nox and erlang-src.
refactor: inline
simplifying refactor
Update copyright 2012
Update copyright 2012
Update copyright 2012
Update copyright 2012
merge default into bug24624 and use new rabbit_misc:format/2
refactor: use new rabbit_misc:format/2
Merge in default
refactor: extract string formatting function
Move cookie_hash/0 too.
Move rabbit_misc:nodeparts/1 and rabbit_misc:makenode/1 into rabbit_nodes
Move rabbit_misc:nodeparts/1 and rabbit_misc:makenode/1 into rabbit_nodes
Move rabbit_misc:nodeparts/1 and rabbit_misc:makenode/1 into rabbit_nodes
Move rabbit_misc:nodeparts/1 and rabbit_misc:makenode/1 into rabbit_nodes
Update copyright 2012
"to contact" isn't correct in the duplicate check case.
Unify the more resilient hostname check, refactor out this code into a new module.
Update copyright 2012
Update copyright 2012
Update copyright 2012
Update copyright 2012
Update copyright 2012
Clean up diagnostics code, clean up diagnostics messages.
Update copyright 2012
Update copyright 2012
Update copyright 2012
Update copyright 2012
Merge heads
Update copyright 2012
Remove nodes file immediately after starting Mnesia.
Oops
Merge in default
Update copyright 2012
Update copyright 2012
Update copyright 2012
Merge default in.
include some mirror master state info in status() After careful inspection, I have determined that known_senders and seen_status are the only items worth reporting on.
Committed some changes by mistake...
Cosmetic, restored reject/4 arguments to the previous order.
Merge heads
merge bug24703 into default
Merged bug24713 into default
Merge default.
Typo
simplify
Revert comment change
OTOH if we're not trying to cluster with anything we should probably be happy.
But Matthias points out that we can avoid the three-way-ness by changing the meaning of non-forced clustering so that you must only have to contact *one* disc node. This seems to work.
Reintroduce the three levels of forcedness. We do still need it.
Inline.
This doesn't start any more.
Base discnodeness on what we want to become, not what we are.
Change the semantics of Force to fit this particular bug. *meep*.
Don't claim to be adding mirror when we're not.
We don't actually need this two-stage startup, we can just fail to init/1.
rabbit_guid:string_guid/1 -> rabbit_guid:string/2.
Let's pay attention to whether we actually started or not.
Merge default in
Rebase 038bd3c185ae
Resurrect and remove redundant ensure_mnesia_running()
Two-stage-startup-with-mnesia-record, like rabbit_amqqueue_process.
Merged bug24671 into default
merge bug24336 into default
merge bug24336 into default
merge bug24336 into default
oops
merge default into bug24336
extract error logging so we don't conflate it with returning an {error, ...} tuple
Better comments regarding gen/0, explicit range for phash/2.
Don't explode on AMQP death.
Merge default.
server_initiated_close() expects to be called from a cast not a call.
rabbit_guid:binstring_guid/1 -> rabbit_guid:binary/2
Better comment for gen/0.
Merge bug22470
Update comment for gen/0.
Merge bug22470
Merge master in.
Change fash guid generation function to use phash + rotating blocks.
merge bug24715 into default
cosmetic: ensure_gm_heartbeat is not a gm callback
use same variable naming convention as in channel
don't leak queue monitors
Merge bug24718
Renamede reject_tx/4 to reject/4.
it helps to not throw away the state it really does
Modify generic-unix packaging step to override rabbitmq-sys defaults.
Don't use timer:apply_interval/4.
Fix the little test client so it actually uses the parser correctly and does not drop messages.
Actually pay attention to the rabbit_stomp_frame:parse/2 API.
Merge default
Merge default in
Move defaults to rabbitmq-sys
Whitespace
It's a resource, it'll print 'queue' anyway.
produce only one log entry for abnormal connection closure instead of two
produce only one log entry for abnormal connection closure instead of two
check that dlx is defined is dl-rk is set
tiny refactor: 'case' -> multi-headed fun
merge default into bug22470
Merged bug24664 into default
Merged bug24664 into default
Merge in default
Oops, missed those in 8098944f4e9f
We want to server-close the connection, not client-close it.
Tweak the tuple we get...
Provide a way to "server close" a direct connection.
Direct client swallows reason on 200, which does rather make sense. 320 means:
Only link to the connection, otherwise we get a race where the link conn -> stomp_processor -> channel can take out the channel from under the connection. This solves bug24336 but is perhaps not completely ideal.
Merge bug24698 into default
Merge default in
Merge bug24688 into default.
Merge in default
Merged bug24664 into default
use the existing error reason formatter
refactored error message creation and got rid of the trailing ~n - the message does *not* get formatted by Erlang, and the 'message' is meant to be a *header*, so, ideally, on one line.
merge default into bug24336
Merge bug24601 into default
Remove redundant template from html-to-website-xml.xsl
merge bug23706 into default
cosmetic
more accurate log message/level
always use rabbit_log for logging
use the new rabbit_log:log for STOMP connection logging
error_logger flood prevention
consistency
consistency
use the new rabbit_net:connection_string/2 and bring log messages in line with rabbit_reader
validate log levels on startup
merge default into bug22470
get rid of debug and message logging since they have limited use This does make the rabbit_log server somewhat superfluous, but it does get a new lease of life in bug 22470
introduce log categories thus opening pandora's box this turned out to be simplest way of controlling the connection logging
Merge in default (and make error more readable)
Change CONFIG_FILE, LOG_BASE, MNESIA_BASE and ENABLED_PLUGINS_FILE defaults - CONFIG_FILE to ${RABBIT_HOME}/rabbitmq - LOG_BASE to ${RABBIT_HOME}/log - MNESIA_BASE to ${RABBIT_HOME}/mnesia - ENABLED_PLUGINS_FILE to ${RABBIT_HOME}/enabled_plugins
Merge bug24706 in
Merge bug24705
Delete extra whitespace.
Unbreak the network client. Oops. Tests pass now :)
Merge bug24435
Alignment
I think this should be a soft error. Although the spec does say to use command-invalid when the client attempts to declare an exchange of an unknown type, that's much more obviously the client's fault. So let's go with an old favourite.
Tweak language
prettier and more consistent connection log messages
move error_logger 'flow control' into application code since tcp_acceptor no longer does any per-connection logging itself
Cons instead of append, reject does not change the channel state.
do not log accepted connections in tcp_acceptor Logging in such generic code should be very sparse. Let's leave that to application code (rabbit_reader et al in case of rabbit) instead.
drop ssl upgrade message it's not that important and just clutters the log
'case' statement style
Better error messages and style fixes.
Make web UI aware of exchange types.
Don't escape exchange names twice. Don't use link_to() directly from templates.
reject doesn't need to know about the channel state.
Another way the connection can close.
Fix to reject_tx, list comprehension instead of map.
Flatten the list of lists.
Add support for x-dead-letter-routing-key, tidy up some HTML.
merge default into bug24698
make start_client/2 return the reader instead of the sup ...since it is meant to be returning the process controlling the socket.
move ssl upgrade from acceptor to reader ...thus allowing further connections to be accepted while the upgrade takes place.
check dlx routing key arg
overwrite malformed x-death headers
don't discard accumulated changes
use POSIX timestamps instead of human readable ones
Since this seems to have been forgotten ;-) DLX UI in mgmt.
merge default into bug20337
Remove ?CREDIT_CPU_BOUND and have /1 versions of ack and send instead.
deconvolute logic
Executing basick.{nack,reject} transactionally.
add timeout to wait_for_confirms[_or_die]
Forgot to add/remove files.
Change dummy exchange name from "inert" to "invalid"
...however, we should still allow rabbitmqctl reset to work when some nodes are down. (This is what we did before, the difference between reset and force_reset is that force_reset works if mnesia is completely hosed).
Don't force on init() (which fixes bug 24703), plus a little refactor.
Duplicate "exchange" in error message
Using rabbit_misc:rs/1 to format the exchange name.
Protocol error instead of warning when routing through inert exchange.
Dropping messages silently instead of emitting warnings.
Merged bug24682 into default
Add stub for "inert" exchange to be used when exchange types are missing.
Merged bug24507 into default
Escape '&'.
Show both log files.
Further clarity.
Improve display of boot errors.
Merge bug24653
hide specs for the two gen_consumer implementations
refactor: use types exported by 'supervisor' instead of defining our own
use new rabbit_networking:tcp_listener_spec/6
helper function for constructing tcp listener sup child specs useful in e.g. stomp
use the correct inet types
use correct type for {M,F,A} the built-in mfa() type stands for module-function-*arity*
keep up with broker API changes
refactor: check_tcp_listener_address/2 -> tcp_listener_addresses/1 ...which is a more sensible name and signature
refactor: turn a condition into a guard
cosmetic: move helper functions where they belong
refactor: eliminate pointless indirection
handle the remaining enabled_plugins_file error case more gracefully
don't complain about empty enabled_plugins file
Merged bug23432 into default
Merged bug23432 into default
display posix error description
Improvement?
Sicne we trap_exits why don't we link to the connection / channel(s) and do something sensible if they die?
Silence warnings
Relax default timeout
Don't fsync after inner nested transactions
More doc.
Resurrect default
More credit for the queue -> msg_store case.
The other plugins do not announce themselves like this, stomp should not either.
Be more assertive
Remove doc:div and doc:toc, add show-in-this-page and reindent. Really this should have been in bug 23052. Ah well.
Merge bug23938
correct typo
Language tweak for mnesia_sync justification
Brief explanation justifying the existence of mnesia_sync
Merged bug24641 into default.
only create destination queues once per session ...which is more efficient that doing so once per SEND.
HiPE credit_flow - this gets MCM -x 1 -y 1 -i 5 from 29.5kHz to 30.8kHz.
Continue on our quest towards being able to count.
Mask lumpiness
Turns out I actually can't count. Previous version assumed one send stats for every recv stats, but the recv ones tend to run behind...
Only invoke rabbit_channel:do_flow/3 when we are actually doing flow control...
WIP
WIP
For direct client we *do* want the reader pid (amqp_channel) rather than the conn_pid (amqp_direct_connection) here.
Correct comment and use spawn_link
State is not defined for direct client connections ATM.
A simple publish-and-consume-as-fast-as-you-can test since I'm not convinced about the performance of some of the clients we've poked at. I was going to call this multicast_plain but I think puns like that would be discouraged.
Ignore bump_credit messages in rabbit_tests.
merge heads
two flavours of 'write' Just like in the other applications of credit_flow:send/ack, we need two flavours of the surrounding API function, i.e. 'write' and 'write_flow' in this case. That way existing call sites, such as in rabbit_test can remain undisturbed.
more sensible arg order and consistent var naming
Same fix as c412171663cc for rabbitmq-plugins
Flow control: queue slave -> msg_store.
Don't pass the client pid in for write.
Flow control: vq -> msg_store.
Change the guid related entries names in the process dict.
Change naming in rabbit_guid, explicit guid passing in string/0 and binary/0.
I shall charitably assume that Matthias left that there to check we were paying attention.
Split guid/0 in guid/0 and the faster fast_guid/0.
Merged bug24685 into default
merge bug 24265 into default (Somehow support DNs in rabbitmq_auth_mechanism_ssl)
merge bug 24265 into default (Somehow support DNs in rabbitmq_auth_mechanism_ssl)
clearly this was tested thoroughly
keep up with server changes rabbit_channel:do is no longer subject to flow control
make flow control explicit in the channel API just as we did for the queue As a result the existing call sites of rabbit_channel:do, e.g. in rabbit_test and the erlang client, can be left alone.
Merge bug 24638
Fix those links on Firefox.
simplify publisher monitoring code
only monitor publishers when they publish with flow control
Merge bug24676
Merge bug24674
fix supervisor2 bug reported by dialyzer The erroneous code is invoked when a child terminates normally at the same time as it is being terminated by the supervisor. So unsurprisingly we haven't seen this, and it's hard to test.
merge default into bug24664
provide two flavours of rabbit_amqqueue:deliver - one with flow control and one without This allows us to leave the various existing call sites of rabbit_amqqueue:deliver unchanged, and only subject the channel to flow control. It also reduces the distance between the two places that need to know which messages should be subject to flow control by moving the rabbit_flow invocation logic from the channel into rabbit_amqqueue.
Merge bug24680
merge default into bug24664
Merge bug24681
Remove unnecessary process
Fix breaks to publish and get introduced in 2ff8ff3089c4.
Better docs.
merge rabbit_router:deliver into rabbit_amqqueue:deliver
keep up with server changes
it's really not worthwhile exporting process_channel_frame
make tests work on R15
Merge bug24678
Format dates right.
keep up with server API changes
do not hard-wire the channel interaction into process_channel_frame This makes that function more versatile, e.g. permitting the Erlang client to skip the credit_flow:send step.
Merged bug24613 into default
Reinstate a bit of code that accidentally got nuked in 9a87718c74df.
sender_down / receiver_down -> peer_down.
Maybe clearer?
Merge heads of bug 24664 again.
rabbit_flow -> credit_flow
cosmetic(ish)
Revert b03fe604af24. Not enough sleep.
Merge heads of bug 24664
Move rabbit_flow:send invocation from router into channel; monitor all queues in the channel.
Merged bug24663 into default
update 'last_blocked_by' while blocked
Merge bug 24673
Now the timeout is actually accurate, give it more prominence. Also show frame_max at all.
Merge bug 24673
Emit the timeout in the stats event.
Rework for updated info items.
apply flow control to content bearing methods only
unblock, if possible, when channels disappear We do this in all call sites of channel_cleanup, except in wait_for_channel_termination, since there we know we are about to enter the 'closed' state, which unblocks us anyway.
simplified running<->blocking/blocked state transitions also more sensible info items
merge default into bug24664
a little bit of refactoring on the reader - move the 'blocked'-induced heartbeater disabling to the point at which   the transition to the 'blocked' state takes place. This makes the   correlation between these two events more obvious. It also prevents   duplicate invocations of rabbit_heartbeat:pause_monitor/1, which   hitherto was accomplished by relying on switch_callback/3 never   getting called while 'blocked' - an assumption that could easily   become invalid one day. - a little bit of inlining of timeout calculation code in   close_connection/1. - more compact case handling in handle_dependent_exit/3 and   wait_for_channel_termination/2.
fix rabbitmqctl error reporting under R15
Attempt to show information about blocking due to memory alarm and flow control in a more comprehensible manner.
Attempt to show information about blocking due to memory alarm and flow control in a more comprehensible manner.
Merge bug24636 more
Flow control: channel -> queue slave
Avert eyesore.
Have queues monitor publishing channels so we can remove them from the flow data.
oops
Rename bump/1 to handle_bump_msg/1, add a comment and specs.
Matthias points out that we don't need to remember that a pid has gone away: if by some chance we end up talking to it again we'll end up monitoring it again and then noticing it is down, and we'll always have ?MAX_CREDIT available each time.
Improve book-keeping - now we treat a receiver having gone away as granting us infinite credit, so we can pump out our remaining messages. We now don't leak connections any more.
Merge bug24672
Allow specifying node on queue.declare.
Allow one sending process to be blocked by more than one receiving process simultaneously.
Ahem++
Refactor / tidy, and sneakily fix an off-by-one error (ahem).
Oops.
Merged bug24636 into default
Merged bug24636 into default
keep up with server changes
rename fd stats items to make their meaning more obvious - and arrange them in limit/used order - and make process count info look the same
Actually this is more reasonable.
Actually we should use conn_pid here since that goes to the same place for network connections and a more reasonable place for direct ones.
Unbreak the direct client
Get the channel to "block" by not issuing any more credit, rather than calling reader:conserve_memory. This allows us to abstract much more into rabbit_flow, and is more general. Also rename some functions.
No timeout when calling
Inlines.
Cosmetic / refactor.
Flow control channel -> queue.
Merged bug24665 into default
First draft of mnesia fsync
cosmetic
oops
include a few more pieces of info in rabbit:status stuff reported in management that isn't reported elsewhere already.
keep up with server changes
include fd info in rabbit:status() There is a slight layer violation here - we label the info items with 'socket...', which is correct in the rabbit context but really could be any fd in other contexts. Note though that we already mentioned sockets in the log message produced on startup.
increase closing timeout to increase the chances that buffered data will make it to the client.
don't linger
cosmetic: remove nonsensical comment
don't start cpu_sup We've not needed this for some time. Note that we still need to a) depend on os_mon (it's needed for memory reporting under windows), and b) disable various bits of os_mon explicitly since they otherwise start up by default.
Very hacky first pass at internal flow control between channel and reader.
Merge bug24649.
Small optimisation noticed while testing this: some queries (like in_group) can return a huge amount of data which we ignore.
Docs
Merged bug24656 into default
This is probably a more sensible default.
dn_lookup_attribute / dn_lookup_base
Merge in bug24663
Simplify
as_user mode
More error reporting.
Improve error reporting.
Merged bug24643 into default
Revert unneeded change.
Better comment.
RFC 4514 states that non-acsii chars get converted to UTF-8 and then escaped - e.g. U+00A3 POUND SIGN encodes as \C2\A3.
Oops, actually this converted "foo" to ["foo"].
Add VERSION to the build and destroot phase environments for MacPorts
Avoid putting quotes around domainComponents.
Cope with multiple common names.
peer_cert_subject_itemn -> peer_cert_subject_items, there's no guarantee we'll only have one!
Get username from DN, optionally from CN as before.
Merged bug24659 into default (2)
Merged bug24659 into default (1)
Merged bug24659 into default
Merged bug24659 into default
Merge bug 24661
Use netcat rather than nmap.
Avoid a circular dependency. The new load_definitions depends on recovery (since it may create a queue and recovery starts the sup). But recovery depends on empty_db_check. But load_definitions *enables* empty_db_check (since we want to avoid creating default_foo if we just loaded a bunch of definitions).
load_definitions configuration item.
BSD stat improvments
The appearance / disappearance of the password fields broke in the last release. AFAICS that's because we upgraded jQuery and it now specifically understands that "controls" is a real HTML attribute but one that should not be on <select> so attr('controls') gives a bogus result. Switching to a completely made up attribute fixes it. I hate computers.
merge bug24658 into default
format queue length differential smartly too
handle boundary case correctly
another, even tinier, refactor
tiny refactor
Merged bug24652
Fractional message rates.
Move non-empty defaults to rabbitmq-env - rationalise server-settings - correctly override PLUGINS_DIR - allow use of PID_FILE override - simplify NODE_IP_ADDRESS and NODE_PORT setting
Handle array info items somewhat, by attempting to merge them down to a string. We do this by one of two methods: if we have an array of unicode strings then we concatenate with spaces (this makes slave node arrays look nice). For anything else we reserialise back to JSON (not great, but what else are you going to do?)
Add encoding field.
Improve test coverage
Return a sensible error message when tags are missing.
Merged bug24644
carry on accepting tcp connections after an error
reference AMQP URI scheme in docs
Added modification to portfile made on previous release by macports.org   see https://trac.macports.org/changeset/87628
When available, use VERSION defined in the environment.
Portability: use temporary files instead of "sed -i".
Portability: use temporary files instead of "sed -i".
Add support for OpenBSD's fstat.
Added tag rabbitmq_v2_7_1 for changeset da7bfd5f97f1
Added tag rabbitmq_v2_7_1 for changeset 9679fe491785
Added tag rabbitmq_v2_7_1 for changeset 7c1d95da0f50
Added tag rabbitmq_v2_7_1 for changeset 3c6e64157010
Added tag rabbitmq_v2_7_1 for changeset 09e722d11671
Added tag rabbitmq_v2_7_1 for changeset d65869610fbb
Added tag rabbitmq_v2_7_1 for changeset d78d7d386aa4
Added tag rabbitmq_v2_7_1 for changeset 5531ff99f00f
Added tag rabbitmq_v2_7_1 for changeset a62c8c22befc
Added tag rabbitmq_v2_7_1 for changeset 3e6a49651e8f
Added tag rabbitmq_v2_7_1 for changeset 767428564f73
Added tag rabbitmq_v2_7_1 for changeset 9fdf6c6985fe
Added tag rabbitmq_v2_7_1 for changeset 82b642218623
Added tag rabbitmq_v2_7_1 for changeset dc103b0d36b5
Updated changelogs for 2.7.1
Make rabbit:diagnostics/1 just return a string. It's still most convenient to assemble it the way we did before, but now the API is saner.
Merged bug24631 into default
Ignore force_event_refresh if we have not finished handshaking.
Merge bug24582
Merge bug24628 into default.
Merged bug24629 into default
Updated definition of whereis_name
Escape '"' for html too, in case we end up in an attribute.
global:safe_whereis_name/1 has been removed
R15B fix
Ahem2
Ahem.
Show node diagnostics when we see timeout_waiting_for_tables.
Merge bug24618
Cosmetic / revert
remove rabbit dependencies from gm
Separate member construction function
Extend member structure to prevent pid collisions
Merge bug24609 into default
I think we can be sure that it's not.
bug 24620: Remember that the first item in the table may not be for the exchange we're interested in...
Merged bug24611 into default
No arguments.
Merge bug24595 into default
Detail may not be there (e.g. for a recovered queue that has never done anything). Don't blow up the web UI. Broken in bug 24032.
Docs update.
Merge bug24610
Tiny doc update.
Don't require a groupOfNames objectClass, other objectClasses (e.g. group) are available and may even be more popular in the Real World (or at least that part of it which installs Microsoft Active Directory 2012 Server Enterprise Edition™®).
Merge bug24607.
add setting dlx routing key in queue.declare
Merged bug24612 into default
record routing keys and exchanges when dead-lettering
include the time the message was dead-lettered
Don't fall over if the RPC fails for any reason.
Whitespace and tidy
First attempt at writing out erl pid on win; not pretty, not fully tested, but it seems to work
Merge bug 24608 (qproc and mirror_slave disagree on data structure for msg_id_to_channel)
Merge bug 24561 (x-ha-policy=nodes doesn't fully cope with failure of master)
Don't try to be clever about starting the DB: Let It Crash and the supervsior will take care of things.
refer to rationale from bug 24607
reduce queue/exchange deletion complexity from O(binding_count^2) to O(binding_count)
Matthiasness.
We need to distinguish between the already_started we make get back from the real supervisor (which we need to treat as a real error at init) and the one we cons up ourselves (which we can ignore at init since in general all the mirrored sups in a group will have the same childspecs). But we treat them both as errors for start_child though.
Oops
Handle children that fail to start at init properly, by shutting down.
Slightly clearer.
Minor ecumenical matter
Oops
Merged bug24604 into default
Merged bug24604 into default
Merged bug24604 into default
Failing test.
Foster agreement on type of msg_id_to_channel
Merged bug24364 into default
Wrap
Merged bug24032 into default
Debitrot: tags not admin flag, simpler vhost permissions.
Debitrot: move .app source.
add upgrade step
tie up some loose ends for the new table
now that we have table locks there is no need for phase separation This is essentially reverting to the code as it was before bug 23885, except using the new rabbit_topic_trie_node table for counts.
Oops, that one is under our control and needs HTML.
fmt_string
fmt_string
fmt_string
Make fmt_string a bit more general, and use it all over the place.
Merged bug24591 into default
only lock tables when we are dealing with multiple bindings
Advice for windows service users when changing plugins
simplify
reduce time complexity of binding removal on queue deletion from O(n^2) to O(n). The solution comes in two parts:
comment out failing test to check whether others fail too
Merged bug24578 into default
Merge bug 24392
ensure that rabbit dies when recovery fails rather than just sitting there
Merge bug24579
Slight simplification that these vars are declared once and failure is a thunk.
Typo
Put description in test.
ignore empty segment files We already ignore corrupted content.
Rearrange
merge default into bug20337
fix tuple arity mismatch
don't hang if there are no DLQs bound to the DLX
Merged bug24593 into default
death headers are now stored in an array of tables
don't check dlx on queue.declare
Merge bug 24572.
Simplify take_prefix to be more idiomatic Erlang
Simple test for rejection.
Across-port and tweak the doc changes from the previous attempt.
Added check for headers not allowed on SEND o  also factored out some more headers
Proper queue length change rates. It's almost embarrassing how easy that was.
Factored out header strings.
Cosmetic
Still nicer error handling inspired by lib:eval_str/1.
Also handle tokenising errors somewhat.
Handle RPCs that crash better.
Handle the most common parsing error nicely.
Basic rabbitmqctl eval, with let-it-crash error handling.
Move the try / catch into rabbit_networking.
Filter out connections which no longer exist.
Removed take_prefix/3; simplified take_prefix/2.
Rewrite split_* to split/2; taking Splitter list as parm. o  introduce take_prefix/2 to check for prefix AND remove it combined o  take_prefix/2 also used to replace strip_leading_blank logic
better reporting of location of failed test
Merged bug24586 into default
Another attempt at reducing racy failures.
Tidied and corrected split functions: o renamed slash_split/1,3 to split_content/1,3; o removed strip_leading_blank (effect now in strip_content/1 matching); o removed push_non_null_rstr/2; o made both splits preserve order; o splits now treat null string correctly.
Oops, should be global substitution.
Merge bug 24467 (Autogenerated queue names don't pass validation)
Use fixed service name
remove superfluous separator rabbit_guid:binstring_guid already adds a separating '-'
base64url-encode for string guid generation this works well for AMQP (with its restrictions on queue name characters) but also when used as part of filenames, urls, etc
Recoded regexp:split and regexp:gsub calls to avoid regexp.
Don't add message id to the set of msgs we've heard of from gm but not channel, if we actually *have* heard of it from the channel.
Allow equivalence comparisons with absent values
Record the master together with all the slaves
cosmetic
Correct AMQP URI example
Updaet docs
We might get a noproc if the other node is starting. Ignore.
The status database should not be under a mirrored supervsior, we want one per node. So add another supervisor to handle that.
Show host/port/ssl.
Report more stuff: connection host/port/ssl as well as name.
OK, I think this makes more sense. connect_failed is the common reason why a link might be down, so just show the connect_failed error. For others, show a term. I don't think we can distinguish between temporary and permanent failure as suggested by Matthias.
Move app file source.
Rename some states.
connected -> running.
Inline report_status variants. Don't mention shutting_down.
Merged bug23052 into default
Merge from default
Merged bug24559 into default
Put the real changes in  :-(
don't explain why we don't do something that doesn't work
Merge default into bug24559
Portfile updates for macports packaging
only remove messages when ALL DLQs have confirmed
Merged bug24560 into default
Unused vars
Merged bug23462 into default
monitor the DLQs
removed reminder comment
wait for DLQ to confirm messages before deleting the queue
More clarity.
Use {node(), make_ref()} rather than self().
Duh
If we get an explicit channel close we might already be shutting the connection down - in which case we should check if we have no more channels left and close_ok the connection if so.
partial wait-for-DLQ-before-deleting-queue
spread out the dead-lettering on queue deletion
don't remove purged messages until the DLQ has confirmed them
Merged bug24456 into default
don't remove expired messages until the DLQ has confirmed them
Merge bug24549 ("TypeError: point is undefined" in shovel-management)
don't remove rejected message before it is confirmed by the DLQ
Merge bug24557 (rabbitmq-shovel-management formatting is rather unfortunate)
Format host correctly, and don't format SSL options at all. We go to explicitly picking the fields we want to format here since in the last release params_network grew quite a bit and it may do that again.
amqqueue_process re-publishes with confirms
Fix dumb typo.
Try less hard to scare people off.
Merged bug24547 into default
Don't attempt to format an undefined point.
Reduce lineupitude
Fall back to lsof if reading /proc/<pid>/fd does not work on Linux.
Merged bug24541 into default
Whitespace
Moved common constraints into an hrl
Code to pass test.
Add test to demonstrate problem.
No longer download a garbled copy of the install / build instructions from the website.
Added tag rabbitmq_v2_7_0 for changeset 0c78d43ca7a6
Added tag rabbitmq_v2_7_0 for changeset 22cef125cf96
Added tag rabbitmq_v2_7_0 for changeset 93adb75be2c2
Added tag rabbitmq_v2_7_0 for changeset cd9a69baf1a9
Added tag rabbitmq_v2_7_0 for changeset 444ce98e923d
Added tag rabbitmq_v2_7_0 for changeset c0900581758a
Added tag rabbitmq_v2_7_0 for changeset f52d6ad39a3e
Added tag rabbitmq_v2_7_0 for changeset f33bce76dbb2
Added tag rabbitmq_v2_7_0 for changeset 6d1e4e3325ac
Added tag rabbitmq_v2_7_0 for changeset d583498a8c6f
Added tag rabbitmq_v2_7_0 for changeset bd1f29a08e42
Added tag rabbitmq_v2_7_0 for changeset b346cde85930
Added tag rabbitmq_v2_7_0 for changeset 5555cc154bc4
Added tag rabbitmq_v2_7_0 for changeset 353c527677e1
Updated changelogs by release build
unbreak variable queue assertions
more consistent naming
Merged bug24534 into default
Merge bug24430.
Cosmetic
Big ugly warning.
merge default into bug20337
send_after does not accept infinity as an argument
Resurrect default
Correct thinko - permanent + normal is an error, duh!
Oops
Refactor: reduce distance from default.
Refactor: don't use a dict when a list will do.
Refactor: simplify by checking if restart is permanent earlier.
Refactor: I like closures as much as the next chap, but that was too many.
Cosmetic: pattern-match more, factor out dict:append, fix unused var.
Indent correctly
Refactor supervisor shutdown more
Refactor supervisor shutdown
More accurate timeouts during supervisor shutdown
Merge bug24525
Merged bug24517 into default
Whitespace
refactor
Consistency with wait_for_tables.
remove debugging printf
cosmetic
timeout epmd connection after 60s
fix case + cosmetic
fixes typo
removes unused arguments
fixes assert equivalence implementation
merge bug24513 into default
tweak
I feel really in control of Rabbit right now.
Merge bug24497
Inline
Merging bug23326 to default
Surely I should inline that 'wait'.
And don't send a ref, use a monitor instead. That way we don't need to try / catch in the spawned process.
Send a ref
Let's make the query language more complicated (and featureful!)
Disgraceful that we didn't have automated tests for so long! These are still pretty simple, but will have to do.
Merge bug24522.
Since it may be sane to set the watermark to "0.0", let's allow "0" for that.
Reduce nesting of case statements
Change the meaning of vm_memory_high_watermark = 0.0
Resurrect default without bug24494
Merge bug24308 (msg_store perf unnecessarily bounded by disk)
Use multiple processes for compilation. 2 seems to be as fast as any > 1, but this does go about 25% faster for me.
break on too many args
refactor and rename
It turns out that I can't even design ascii art correctly.
More simpler
If HiPE is not available, print an error message and continue.
This is still failing occasionally in CI, I must have tuned the value for my workstation...
merge bug 24511 into default (VQ soak test must generate unique message IDs)
no more magic numbers
refactor + guard against garbage
rebase on default
merge default into bug23326
Merge bug 24488 (Impossible to specify socket connection timeout with Erlang client)
Merged bug24516 into default
close stdin in init script
Oops, forgot to add this one.
Go faster stripes.
expose socket_options in amqp_params_network
don't forget about timeouts with ssl
expose connection_timeout amqp_params_network option
merge bug24514 into default (soak tests broken due to api change from bug 24509)
Update escript and docs
Update VQ soak tests for new requeue API
a spot of inlining/renaming
minor optimisation: switch from dict to gb_trees ...for the msg_id_to_channel map in the queue process. This doesn't actually produce any noticable gain, but we use gb_sets/trees everywhere else in the 'confirm' logic and this was the only place in the code where a dict was keyed on msg_ids.
eliminate unused var warning
merge bug24504 into default
expand scope of "no alternate exchange" optimisation to cover the "routed somewhere" case too
Reduce multiheadedness
Merging bug24443 to default
Merge bug24509
Cosmetic
Publish multiple differently in soak test
Crude merge-from-default to help examine this thing. Currently some tests fail due to q_p blowing up with failed assertions, I don't know if it was like that before.
Refrain from resetting message expiry in message requeue
merge heads
merge bug24510 (make start-background-node start-rabbit-on-node breaks logging after bug 24332)
Load rabbit first.
Merge bug24508.
replace timer:apply_interval with timer:send_interval The latter doesn't churn processes and doesn't require exporting of functions we otherwise wouldn't.
Merged bug24499 into default
Merged bug24362 into default
Merge bug24481
Cosmetic
Revert 910c670238ad (Produce guids a bit more efficiently)
3) Cache results of rabbit_registry:lookup_module() for exchange types in the process dictionary.
2) Produce guids a bit more efficiently.
1) Don't even consider alternate exchanges for exchanges with no args.
Saner naming
There should be no space there.
Perform semantic equivalence test
The set might be empty. Don't blow up.
Merge bug17162.
yet another attempt to reduce timeouts in CI - catch surplus eagerly - wait longer for confirms, wait shorter for any surplus
merge bug 24499 into default (channel:wait_for_confirms is broken in the face of multiple=true)
Make wait_for_confirms not hang under the influnce of multiple=true.
remove parse_properties (again) and rename test
Merge bug24466 (configuration -> definitions)
Note that /api/all-configuration still works but is deprecated
Add test, of a rather basic nature. I would much rather use confirms, not txn, but confirms are broken in the erlang client (see bug 24499), so I have no choice.
small routing optimisation and re-add parse_properties
As noted in bug17162 comment 13, this delivers a few percent improvement on MM -y 0.
Merged bug24460 into default
Minor improvements to documentation; additional comment in code now that I've given up with my finger-tree implementation to 'solve' the identified problem.
Merge bug24483
Merged bug24453 into default
Merged bug24453 into default
cosmetic
looks like a 200ms wait is still not enough to keep CI happy
more accurate description of flying_ets table
explain why client_update_flying phase 3 will always succeed
refactor: revert change to var name
refactor: rename update_flying/3 to client_update_flying/3
fix bug
Don't include amqp_client.hrl; it's included transitively by amqp_gen_consumer_spec.hrl.
unroll property parser
Give up on attempting to improve clarity.
Windows slashes
Rephrase to make Matthias happier...
I find this clearer
merge bug24455 into default
Minor tweaks
Having thought about and discussed the code and desires, change things around a bit.
Better supervisor2 shutdown handling
make tests a bit more comprehensive
add more checks to the tests
remove missing ssl parameter test
support mixed case schemes + more docs
remove redundant usort
properly sort the queue of acks
cosmetic + correct specs for lqueue:peek{_r}
refactoring
oops
Revert lqueue so it does not cache ends of queue as we no longer need this to be O(1).
refactor: extract delta assertions into one place
doc tidying
merge default into bug24455
minor optimisation in qi: keep unsynced_msg_ids in a gb_set ...which avoids the conversion from list to set in notify_sync Extracted from bug24455.
fixes load_from_content function
rename 'removed' confirmation event name to 'ignored' since that reflects its meaning better
merge default into bug24308
a spot of inlining
get coverage of timer-based sync/confirm
increase likelihood of hitting 'dying client' optimisation
increase timeout to match what's on 'default'
improve code coverage this gets us close to the same coverage as 'default'. One notable exception is dying-client elimination of 'remove', which is proving rather elusive.
fixed module name bug when registering the plugin
adds erl_crash.dump to .gitignore
updates old code
updates installation instructions
changes module name according to file name
renames exchange module
renames app
refactors exchange module
converts plugin to rabbitmq-public-umbrella
new .gitignore rules
renames & deletes files
Terminate simple children in parallel
Give the supervisor hierarchy a chance to quiesce at the end of each test.
documentation
fix error reporting
double timeout to reduce ci test failure frequency
Merge bug24478
Use backslashes
Use $() like we do elsewhere, add a tiny bit more comment.
They are definitions, not a schema.
Don't record cygwin pid for rabbitmqctl wait
merge default into bug24308
Because I've got rid of ram_index_count (i.e. betas count), and because the guard around whether or not betas_to_deltas is now based on q2 and q3 len rather than ram_index_count, we no longer need to have the separate gammas_to_deltas fun, which means we should no longer have the problem with it being called too often as we should be able to rely on the chunk stuff working out.
gb_sets:from_list(X) is slow. gb_sets:from_ordset(lists:usort(X)) is faster. Just keeping it as a gb_set throughout is fastest still.
Update docs
Undo that last change, but still ensure q3 ends on a segment boundary by giving q2 priority over q3 beyond the segment boundary of q3
Merge bug24477
Explain a bit
cosmetic, and be somewhat smarter about deciding the minimum length of q3 (now must end on a segment boundary - minor optimisation)
Cache both ends of the queue to give O(1) peek and peek_r
only confirm messages on 'remove' that are pending confirmation
add tests for msg_store confirm logic
make tests wait for *exactly* the right confirms, no more, no fewer This does introduce a 100ms pause for every invocation; hopefully enough for the msg_store to catch up and sync (the sync interval is 25ms) the usually small numbers of messages.
abide by the msg_store API constraints in the tests
Do not use q1+q4 length when calculating permitted ?s - if you do, then as the queue is slowly drained, even whilst target_ram_count may be growing, you can end up writing more out to disk. Instead, use the target_ram_count directly as an indication of ?s. This is preferable as it indicates the permitted ?s which is obviously suitable for use when calculating the permitted ?s.
Add peek and peek_r to lqueue, and use them in needs_timeout. Whilst this is better, it's still O(N) per msg, so we shouldn't actually be doing even this...
When under memory pressure, we want to limit the size of q2 and q3, not just of ?s. Simplify calculation of permitted length. Simplify (and correct) expansion of ?. We can now completely drop ram_index_count as we never care about just the number of ?s.
issue confirms when needed (and only then) This also fixes a bug that is present on 'default', namely that we used to always issue a confirm on 'remove' regardless of whether there was preceding 'write'.
Merge bug21319 (include plugins in source and binary packages)
Merge bug21319 (include plugins in source and binary packages)
Merge bug21319 (include plugins in source and binary packages)
Merge bug21319 (include plugins in source and binary packages)
Merge bug21319 (include plugins in source and binary packages)
Merge bug21319 (include plugins in source and binary packages)
Merge bug21319 (include plugins in source and binary packages)
Add another format: minimal. Just the name of the plugin, one per line. rabbitmq-plugins will be used in automation, let's not make it painful.
Trivial cosmeticism.
If the user specifies the name of a non-existent plugin to disable, then we should actually disable it if it's enabled - otherwise we can never remove non-existent plugins from the enabled_plugins file.
If the user tries to enable a non-existent plugin, actually blow up and do nothing. Otherwise we end up with typos in the enabled_plugins file.
merge bug24474 into default ([CI] Leaving pid file lying around is racy)
merge bug24474 into default ([CI] Leaving pid file lying around is racy)
Merging default to bug24455
Ensure that we push ?-bordering ?s into ? eagerly.
refactoring: extract core of 'write' handler similar to what we already did for 'remove' Also, don't add the 'dying client' marker message to the pending confirms. While that does no harm, it is clearly not right.
cosmetic
there's more than one call site for remove_message... ...and only one of them must pay attention to flying_ets
be more careful about deleting cur_file_cache_ets entries
Adhere to corporate branding policy.
Typo.
Explain statuses.
Remove debugging aid added in 9bbaae483028.
Remove any PID file before starting tests.
Remove any PID file before starting tests.
support R12B-5 and better docs
merge default into bug21319
include the spec files' license info
cosmetic
generate release LICENSE file
add extra license info
add extra license info
find the LICENSE files
merge default into bug21319
I'm pretty sure this is correct
I cannot tell you how pleased I am that we made this change.
This is failing sometimes in CI, but I can't replicate it here, so let's get some more information out.
Merged bug24461 into default
It's unclear whether shovel needs erlando at run time or not, but let's be on the safe side.
inline publish/5
slightly more obvious flying_writes accounting and move the cache cleanup from 'remove' to 'write', which is a more obvious place. Improve docs on that too.
merge default into bug24308
Comment
It's a schema, not a configuration.
Merge bug23369 (unregister context on stop).
Slightly better message
Don't explicitly reference webmachine, rabbitmq_mochiweb brings it in.
Actually rabbitmq_mochiweb now contains some code that references webmachine. Depend on it to silence warnings.
Merge bug23235
Merged bug24459 into default
And same frame type for other SASL frames
Send the correct frame type for SASL frames. (Simplest way -- hacky.)
Make the web workers transient since we might want to stop them. Make the registry transient as well, since there's no good reason for it to be permanent and permanent is kinda weird.
Merging default into bug24455
Merged bug24462 into default
Put in a shortcut for queue names (that don't have slashes and aren't'queue'). Make the ensure_{target, destination} more similar. They ought to be refactored.
Be more explicit about the max frame size and channel max (but it's not enforced yet)
bin_to_list -> binary_to_list
make portsfile consistent
merge heads
Don't print the list of enabled / disabled / missing plugins with ~p, it's not very readable.
The parser already pairs these up.
Account for unlimited frame size (which the Python client is wont to use)
add all LICENSE files to the RPM
It turns out that 1. some clients send 0 as their initial outgoing-window, so we don't really want to mirror that as our incoming-window after all; 2. some clients will send a flow every N messages, making it possible to deadlock by having an outgoing window lower than N and not extending it without getting a flow. So: use fixed size windows and simply extend them when necessary. We could base the 'extension' in each case on internal data structures (uncommitted messages, for the incoming window; and unsettled messages, for the outgoing window), but it's easier for now to just bump them up whenever.
Don't blow up when nodes policy is used.
update debian copyright info
merge bug24323 into default
remove badarg test since it's part of general error handling now
simplify/generalise badarg handling
make sure plugins/README is in all the binary packages
reference all the little licenses
optimise resource lookup This is worth ~2% in "MCM -a" when running with two Erlang schedulers, and drops rabbit_misc:dirty_read/1 from #21 to #49 in the fprof analysis of the publisher channel.
Expect failure silently in test
improve performance by bypassing mnesia for queue lookup This is worth ~2% on "MCM -a" when running with two Erlang schedulers, and drops rabbit_router:lookup_qpids/1 from #21 to #42 in the fprof analysis of the channel process.
simplify delta calculation in push_betas_to_deltas
fix indentation
save a line
merge heads
refactor: get rid of #merge_funs
some small cosmetic changes and tiny tweaks
Make lqueue opaque
Drop unneeded queue impls, tidy lqueue, add specs etc
Avoid lots of combine_delta calls
Merging default into bug24455
optimise interaction of limiter with single queues which is a common case
switch vq pending_ack from dict to gb_trees The latter are generally more efficient and this gains us 1-2% when running "MCM" with two Erlang schedulers and drops vq:{record,remove}_pending_ack from 25/28th to 32/39th place in the fprof profile of the queue process
optimise vq:drain_confirmed for the common case This gets called on the processing of every event/msg by the queue process and making this change improves throughout of "MCM -a" by ~1% when running with two Erlang schedulers and bumps vq:drain_confirmed from #20 to #36 in an fprof profile of the queue process.
make the rabbit_event API more pleasant to use and less costly also simplify ensure_stats_timer - it now always sends the message to self().
merge default into bug24459
yes, this really does gain ~1% with MCM with two erlang schedulers
keep track of uncommitted acks in a list instead of a queue This is simpler.
collect acks in lists rather than queues ...which is slightly simpler and more efficient. This also allows us to optimise for the common case in fold_per_queue.
speed up acks a bit gb_trees are generally faster than dicts. Worth 1-2% in "MCM" when running with two Erlang schedulers.
refactor: extract gb_trees_fold/3 and gb_trees_foreach/2
refactor: eliminate gratuitous differences in 'confirm' code
refactor: one gb_trees_cons is quite enough
a few minor tweaks, essentially cosmetic
avoid creation of intermediate binaries by using io_lists This is worth 1-2% with "MCM -a" and two Erlang schedulers
performance improving short cut This gains 1-2% when running "MCM -a" with two Erlang schedulers
cosmetic
Bleh2
Bleh
Explain what we actually mean by explicitly / implicitly enabled.
Language tweak.
Avoid delta's low end extending beyond the low end of q3
Immediate updates after memory vm highwatermark change
Merging default into bug24455
Backed out changeset c4ac9194e945
merge bug23764 into default
correct formatting
merge default into bug23764
reformatting
Add brief note about requeue to VQ docs
remove building instructions (and link to the website)
always record pending acks in #msg_status form #msg_status { msg = undefined } replaces the previous 4-tuple. This simplifies the API and gets rid of the obscure, ad-hoc 4-tuple.
cosmetic
refactor: extract removal from pending_ack and in the process renamed remove_pending_ack to purge_pending_ack.
inline ack/4 since there is now just one call site left
refactor: pull call to msg_from_pending_ack into queue_merge thus avoiding duplication, making the alpha/beta fun tables non-parametric, and containing knowledge of seq ids in queue_merge.
inlining and reshuffling
further abstraction of queue/bpqueue distinction
a whole bunch of refactoring and cosmetic changes - more sensible order of args to queue_merge and delta_merge:   1) things that get consumed,   2) things that get added to,   3) constants,   4) State - more sensible order of results of queue_merge and delta_merge:   1) things left over from (1) above,   2) things produced,   4) State - better var names - correct indentation - stick to <80 columns - some inlining
:s/PLUGINS_DIST_DIR/PLUGINS_DIR
thread static configuration through functions
don't bother with versions and sort plugins before listing
refactor
Refactor, rename, comment
Count the quota properly on beta -> delta. Also, fprof shows that the queue:len calls in permitted_beta_count can be very expensive. So wrap the whole of queue in lqueue and associated refactoring.
Concession to Qpid tests is now redundant
Speed up requeue test
Move #msg_status{} back to rabbit_variable_queue
Only ack messages when necessary
merge bug24298 into default
Count properly
Change one or two things around a little bit
Actually use the new state we calculate. Otherwise we'll send frames twice.
Account for frame header in the frame max size told to the session (which needn't know about the header).
Further oops, we now depend on everything being built before running run-background-node, otherwise we have two make processes tryi9ng to compile at the same time and they tread on each other.
Buffer transfers that we cannot send because of the session window being closed. We cannot in general stop the queue from sending new messages, especially when 1. the link credit (denominated in messages) exceeds the session's capacity for transfers (denominated in frames) 2. acking is switched off, in which case basic.qos is not in use anyway
Ooops
Merge bug24371
lshift
Better test coverage
Remove redundant definition
Refactor
rename url -> uri; do params_network conversion in amqp_uri
rename url -> uri; move params_network conversion to amqp_client
fix error reporting
tweak tests to work with the new AMQP URLs
Correct the may_send calculation; specifically, we rely on our own outgoing-id, rather than try to keep track of the remote-incoming-id (which is redundant, and wasn't being done in any case). The remote-incoming-window then gets recalculated when we get a flow from the other side.
remove socket_closing_timeout
update installation instructions
update building/installation instructions
warn when enabled plugins can't be activated because they're missing
Requeue faster
auth_backend_ldap needs eldap
shovel needs amqp_client
stomp needs amqp_client
re-instante the README and remove rabbit_common
Merged default into bug23764
Turn q3 back into queue
copy instead of symlink
update -> write and cosmetic
remove redundant operations
refactor
add specs
Add 2,3-finger_tree implementation.
make enable/disable with no arguments an error
actually do the backout
make rabbitmq-plugins more social
Merging default into bug24455
handle the return of amqp_url:parse better
refactor + handle entities + url tests
refactor
refactor
uri -> url
uri -> url
transplant the url parser from shovel
transplant the uri parser to amqp_connection
transplant uri_parser to amqp_client
transplant uri_parser from rabbitmq_shovel
make both batch files use the same enabled_plugins file
use a specialized wrapper for rabbitmq-plugins
Minor inlining.
Improve documentation
Initial check-in
bpqueue is very dependent on the performance of queue:join. fqueue makes queue:join O(1) and maintains O(1) on other operations bpqueue cares about
Merge bug 24315
rabbitmq-plugins must be run as root
extend comment
merge default into bug24315
make invisible lines more visible
oops
plugins-dist -> plugins
Backed out changeset 12e472b84d7b
Merge bug24423
remove channel and connection close timeouts
merge bug24332 into default
warn when a RabbitMQ restart is necessary
-e and -E filter by enabled status
compact -> verbose
Simon's readability patch
fix packaging bits
merge default into bug21319
merge heads
Merged bug23866 into default
fix rabbit_file:group_tokens/1
Merging bug24433 to default
the plugins distributions may be either ezs or directories
don't use the plugins directory
rename rabbitmq-plugin to rabbitmq-plugins
improve manpage text
re-indent manpage
hide the prune command from users
merge default into bug21319
Avoid namefail. This isn't G+.
The directory has moved, and don't fail the tests if it doesn't exist!
Avoid construction of intermediate queue
Remove unused includes.
merge default into bug24332
binary:bin_to_list -> binary_to_list
merge bug24386 into default
get the spec of list_dir right at last
correct a spec that has been wrong for ages it helps to occasionally look more closely at the dialyzer output
thinko
merge default into bug24371
merge heads
fix a dialyzer warning
cosmetic
don't use rabbit_file in the FHC tests
refactor
merge default into bug24386
move file functions from misc to rabbit_file
guard all prim_file uses
merge default into bug24332
remove redundant "-s rabbit" from windows startup scripts ...and bring the order of erl args in line with that of the Unix script, for aesthetic reasons
Merge bug17174 into default
make fhc a gen_server2, turn releases into casts and prioritise them
Backed out changeset e24819baa47e
We do actually support 'release' outcome
delivery-id and transfer-id are different. Expunge the assumption that they are the same; i.e., that each transfer is one delivery (and that they both start at 0.) This removes the connection between our unsettled maps and the session windows, the latter of which are now abstract and arbitrary (since they are denominated in transfers rather than deliveries, whereas we deal with the broker in terms of messages).
Correct max min frame size
reorder boot script so that rabbit:prepare/0 gets called *after* sasl is started
rpm permission tweak
permission tweaks
Merge bug24432 into default
Merge bug24432 into default
improve flow control by penalising message ingestion in the scheduler
typo
slightly more informative errors
Merge bug24426 into default
the READMEs should be .txt on Windows
make the windows zip bundle look more like the generic unix one
refactor
ensure the plugins dir exists before trying to copy files to it
remove leftover
running "rabbitmq-plugin enable" will fix missing dependencies as well as remove unnecessary plugins
re-enable plugins on deb upgrade
Correct frame minimum maximum size
re-enable plugins on RPM upgrade
Unsupported list in readme
don't forget to install the rabbitmq-plugin script
rename provided_plugins to plugins-dist
also clean plugin sources
symlink to an absolute path
mark rabbitmq-mochiweb as RELEASABLE
Rely on a running vm_memory_monitor
These got missed out during the Great Renaming. Oops.
Better default last memory limit during updates
merge default into bug24433
cosmetic
count queue consumers as required by the spec
merge default into bug24433
a bit of inlining, tweaking and cosmetics
merge default into bug24433
cosmetic
improved compiling- and working-ness
merge from default
extract ack handling logic in common between 'ack', 'reject' and 'requeue'
extract correlation between consumer_count and limiter registration ...and fix a bug in the process: during consumer registration we were using the *old* cr, with the old (and usually undefined) limiter, to check whether the channel is blocked. Thus we would end up running through the message queue unnecessarily. No big deal, but certainly not what was intended.
rename maybe_store_ch_record to update_ch_record and drop assertions ...and some associated cosmetic shuffling and inlining. The assertions aren't all that useful and just clutter the code.
work in progress This doesn't even compile; but I want to stash it away so I can cherry pick some of the refactorings and tweaks for 'default'.
cosmetic: slightly more sensible field order
Correct note on headers/application-headers
merge bug24428 into default
Show all of the stats in the details page, hidden by default. And hide a few other less-interesting things.
More stats.
fix a recursive compilation issue
merge bug23596 into default
use 'sets' instead of 'gb_sets' for the 'blocking' set This set will generally be quite small, there is just one of them and we don't need ordering, and generally performance here isn't an issue.
Add missing footnote ref
It's properties and application properties that are immutable. Headers are just for delivery.
Tidy up readme
some tweaks for sake of symmetry ...and some cosmetics
Come up with header/property translation rules, document them in the readme, and implement them. NB properties and headers are immutable within the same protocol; to preserve this for AMQP 1.0, we put the unencoded form in the message headers, and use it unaltered if delivering to a 1.0 client.
be smart about when building plugins
release descriptors explicitly
minor simplifying refactor
merge default into bug24386
use prim_file instead of file2
Makes queues sensitive to changes in RAM
Silently cope with unexpected conserve memory calls.
Merged bug24424 into default
Whitespace
merge two folds
cosmetic changes and some minor refactoring
merge bug24425 into default (FHC can become bottleneck when large numbers of durable queues first receive a msg)
And now it's like well beautiful. Wicked.
Scatter/Gather. Eliminates gaps between txns and thus goes much faster.
cosmetic and comments
Rework binding recovery
merge default into bug24332
rename consumer_monitors to queue_consumers
remove unnecessary check
consumer_monitors is a dict again
less arbitrary division of labour
remove no-op
monitor_queue/demonitor_queue are symmetric; don't use process dictionary
Put this case the other way around, since e.g., messages originating at a 0-9-1 client will leave type undefined
Fix duplicated example para when generating rabbitmqctl docs
consumer_monitors is now a set of QPids
refactor
DeMorgan a case
merge from default + cosmetic
improve 'rabbitmqctl rotate_logs' docs
changes to file and filelib2
cosmetic
fix a spec that was causing dialyzer to complain, rightly.
Deal with multiple, or freaky body sections, by just sending the encoded version. If there's just one data section though, label the message as binary typed and just use the payload. Then do the opposite on the way out.
Use ets table instead of dict
add file and filelib form R13B03
remove file2 and filelib2
file2 will start the serialiser when it needs it
make the serialiser more generic by not registering it on start_link
rename io_runner to serialiser
merge default into bug24386
implicitly disable enabled plugins
add rabbitmq-plugin manpage
Actually use the new licence file.
Upgrade jQuery to 1.6.4.
implement "rabbitmq-plugin disable ..."
handle multiple versions of the same plugin
prune after enabling
refactor
"rabbitmq-plugin prune" removes unnecessary plugins from plugins/
support regexp filtering when listing plugins
depend on mochiweb
add a compact plugin listing option
more verbose listing
enabled plugins are recorded in plugins/enabled_plugins
refactor
don't look for plugins in the plugins/ directory
Merge heads.
Merge bug 23056
refactor
merge flow and (consumer, confirm, starts) monitors
merge consumer and (confirms, stats) monitors
merge stats and confirm monitors
Merging heads
Merging heads
remove unnecessary variable
merge default into bug23596
merge default into bug24386
revert changes to worker_pool
add a dedicated process for running io actions
Priority is a ubyte, not a uint.
More things need to be re-typed on the way out
An amqp-sequence is still encoded as a list. In general, discriminating on the encoding of the type and not the descriptor is dangerous; there are 'restricted' types that don't follow the same rules as composite types.
Added tag rabbitmq_v2_6_1 for changeset 98e5eb708dcf
Added tag rabbitmq_v2_6_1 for changeset e687e3288e33
Added tag rabbitmq_v2_6_1 for changeset 961f8d21efe0
Added tag rabbitmq_v2_6_1 for changeset d21e2feffbf6
Added tag rabbitmq_v2_6_1 for changeset 84c84678fb25
Added tag rabbitmq_v2_6_1 for changeset f0ef532fdebc
Added tag rabbitmq_v2_6_1 for changeset c6c32e2ca0f0
Added tag rabbitmq_v2_6_1 for changeset 406b41a61a49
Added tag rabbitmq_v2_6_1 for changeset 493e002e47fa
Added tag rabbitmq_v2_6_1 for changeset 2781160f00cb
Added tag rabbitmq_v2_6_1 for changeset 16bbcb711380
Added tag rabbitmq_v2_6_1 for changeset 12e1420e9df4
Changelog changes for 2.6.1
favour plugins in the distribution dir, not in the plugin dir
actually enable plugins
stubs for plugin enabling
find plugin dependencies
cosmetic and minor refactors
Ignore both qpid and rafi-python source trees
filter available applications from the dependency list
partial plugin enabling
Merge heads
Clear up confusion between the outgoing transfer id (formerly next_transfer_number) and the incoming transfer id. We now keep track of the incoming window correctly.
Trap exit so we clean the channels etc. up.
list packages showing which are enabled and which are available
handle invalid plugins
Merge bug 24416 (yes, let's use dirty ops instead)
read and parse app files from ezs
Account for some other AMQP types that can appear in headers, in particular as 'priority'
Merge heads
pass PLUGINS_DIR and PLUGINS_DIST_DIR to rabbitmq-plugin
Turn q4 back into a queue for performance reasons
comand line parsting for rabbitmq-plugin
refactor
We probably want to default to somewhere that's less likely to be a ramdisk.
show full paths in dialyzer warnings which is handy for emacs
refactor + handle MFAs
consistency
do the todo
add plugins to debs and rpms
Merge bug24387 into default
Merge in default
add rabbitmq-plugin stub
make plugins easier to dist when developing
Cope better with something going wrong starting the trace.
Record phase changes correctly
Add a simple test
add the plugins to the windows package
add plugins to generic unix archive
fix the plugins srcdist before attempting to build the plugins
add target to build plugins and put the .ezs in provided_plugins/
New app source location.
Unused var
include the plugins' sources in the broker bundles
Merge bug24393
Merge bug23399
A bit more abstraction.
This should never be able to happen. You can only specify a vhost in wm_all in -visualiser, and in that case it's protected by resource_exists. Also it wouldn't make sense to return that anyway.
Cosmetic
remove more specs so that it compiles on R14 again
improve comments a bit
remove specs so that file2 and filelib2 compile on R12B-5
if the worker_pool is not running, run the submitted job in the current process
use filelib2 instead of filelib in most cases in queue_index and misc
patch filelib2 so that it uses file2
copy over filelib.erl from R14B03 as filelib2.erl
use file2 in most cases in queue_index, file_handle_cache and misc
patch file2 so that it compiles and runs file_server2 calls through the worker_pool
copy over file.erl from R14B03 as file2.erl
Set process limit when running as a Windows service
Merge bug24399 into default
don't follow symlinks
refactor
only monitor queues that have messages on them
Unregister the context at shutdown.
Unregister a context, and stop the listener if that's appropriate.
use the recurisve delete from rabbit_misc
Another infinity we were missing. Boo.
Merged bug24403 into bug23866
Be consistent about attempting to remove the directory whenever we can; remove purge deletion of var/run which has existed since root of hg repo.
don't ignore symlinks
Cosmetic
refactor
Safer status in case broker is busy shutting down
fix tests
When we stop, wipe out the directory rather than just the pid file. This avoids having to worry about how to remove the directory on package uninstall and also has the advantage of helping non-rabbit-packaged distributions
Ensure dir exists
log various ctl actions
Remove fake doctype from man pages
Merged bug24385 into default
update comment
re-add log handlers
tweak 'publish' funs to make their relationship more obvious plus some cosmetic renaming for consistency
improve coverage of rabbit_control
cosmetic: don't delve into details of what's in the output of 'status'
The custom seems to be to ensure the directory is created on startup.
Merging heads
Just like the init script, the ocf script should put the pid file in /var/run, not /var/lib
handle the non-empty buffer case
fix taking over from the tty handler
update rabbitmq-service.bat
merge default into bug24332
mark federation as releasable
Added tag rabbitmq_v2_6_0 for changeset be85ab02baa1
Added tag rabbitmq_v2_6_0 for changeset 15d580297dbe
Added tag rabbitmq_v2_6_0 for changeset dd1430f796f7
Added tag rabbitmq_v2_6_0 for changeset bf73213eeb3e
Added tag rabbitmq_v2_6_0 for changeset bcf9dd5d8d77
Added tag rabbitmq_v2_6_0 for changeset 6547461e6c2e
Added tag rabbitmq_v2_6_0 for changeset 651a79242738
Added tag rabbitmq_v2_6_0 for changeset 51b9cde2612b
Added tag rabbitmq_v2_6_0 for changeset 5f6faa28de77
Added tag rabbitmq_v2_6_0 for changeset 6113ace3d572
Added tag rabbitmq_v2_6_0 for changeset a37075bbc55d
Merging default into bug23399
Added tag 6547461e6c2e, rabbitmq_v2_6_0 for changeset 61cd06576025
Correct license
Added tag rabbitmq_v2_6_0 for changeset d33ceb64fe87
Implement QA feedback. Mainly renaming.
Merging default into bug23399
Merged default into bug24323
merge heads
merge heads
merge heads
Report vm memory limits conditionally
Added tag rabbitmq_v2.6.0 for changeset be85ab02baa1
Added tag rabbitmq_v2.6.0 for changeset dd1430f796f7
Added tag rabbitmq_v2.6.0 for changeset 15d580297dbe
Added tag rabbitmq_v2.6.0 for changeset bcf9dd5d8d77
Added tag rabbitmq_v2.6.0 for changeset bf73213eeb3e
Added tag rabbitmq_v2.6.0 for changeset 651a79242738
Added tag rabbitmq_v2.6.0 for changeset 5f6faa28de77
Added tag rabbitmq_v2.6.0 for changeset 6113ace3d572
Added tag rabbitmq_v2.6.0 for changeset 51b9cde2612b
Backed out changeset e115f0eec60c
Added tag rabbitmq_v2.6.0 for changeset 6547461e6c2e
Added tag rabbitmq_v2.6.0 for changeset a37075bbc55d
Changelogs for 2.6.0 release
Report vm memory limits differently
Move docs for rabbitmqctl set_vm_memory_high_watermark
Get SASL working properly by dint of the most half-hearted array codec imaginable (can only send, elements must be of type symbol).
And fix building with debug again
Merge bug24375 into default.
Update close_socket in rabbit patch for test.
Merge in default.
Merge bug24373 into default.
Merge bug24377
Merge bug24377
Merge bug24377
Revert most of the merge of bug24315 apart from rabbit_misc:with_local_io/1 since that's now used elsewhere.
Merge in default
Handle case when we get acks with no recorded receipts
move misplaced comment
one way to check whether rabbit is running and avoid timeouts in application:which_applications() in doing so
tweak: check for application presence in the same way as the server code
prevent timeout in application:which_applications()
merge default into bug 23056
Fix handling of confirms for unrecorded receipts
Tidy CSS changes
Merge identical change in
Tidy up a bit
We do this enough times that it's probably worth abstracting.
Oops, unbreak amqp-value messages.
Support outbound messages that need to be split across multiple transfer frames.
Merge bug24324 into default
Support header trimming for 1.0 clients
Rename and simplify shutdown_channel_and_connection to close_connection.
Support inbound messages that have been split across multiple transfer frames.
...and compile with debug on again.
Remove catch from rabbit_net:*name calls but retain case (in case of {error, einval}).
Update for user tags. Also move the explanation of the listing format to the main doc part not the example.
Merge with default
Merge bug24366
Merge default
Don't touch the process dictionary in incoming/outgoing_link.
Make shutdown_channel_and_connection more comprehensive
Clearly redundant
And correct specs
with_disposable_channel/2 for declaring things.
Finish abstracting out the session bookkeeping.
Rectify some poor conflict resolution choices.
Move more session bookkeeping out of process.
Merge default
Since we insert / extract session from state so often, add some helper functions.
Prevent premature death of stomp_reader and stomp_processor to clean up connection: -  change reader to temporary from intrinsic -  protect alien calls from processor by catch so as to avoid premature death -  call processor:flush_and_die/1 from reader when mainloop exits before reader dies
Refactor settlement bookkeeping into rabbit_amqp1_0_session.
Bit more refactoring
Move outgoing link stuff to rabbit_amqp1_0_outgoing_link.
Oops, export this...
Bug 24095 probably should have had this in it, but it only became needed once bug 24243 was merged. Oops. Still, this is very similar to what we do in federation.
Merge bug24095 into default
Merge bug24095 into default
Merge in default. Many conflicts unhappy face
Export next_transfer_number as it's used from ..session_process
This is rather hacky, and will be sorted out by bug 23377. The impl here does not change the public API, but, if the vhost happens to appear in ReqData (which it can if it's coming in from elsewhere, such as /api/all/MyVHost), then both channels and connections now honour it.
Abstract some stuff back out of incoming_link.
Split up session state into session process state and AMQP session bookkeeping state.
No, I don't really know what I'm doing with CSS, but I need disabled buttons to look different from active ones.
rabbit_amqp1_0_session -> rabbit_amqp1_0_session_process
Oops, and fix consumers...
Cleaner docs, less verbose logging
Remove special all page that was added for visualiser.
More conservative acks
First bit of pulling session apart: pull chunks pertainign to incoming links out into their own module, and establish a utils module.
Merging default to bug23399
Update for new app file source location.
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Move the default pid file so it doesn't get wiped out by rabbitmqctl reset.
Merge bug24360 again
Move the point at which we trap exits
Bring back default.
Merged bug23979 into default
Use ctl wait in makefile; use setsid and backgrounding borrowed from init
Fix tests, at the cost of a leetle tiny bit of ugliness.
Update the man page.
Leave the Erlang distributed system when resetting.
Remove default prefetch for /queue destinations
Minor refactor
More efficient use of harddiscs
Always call client_delete_and_terminate for the transient queue. We then don't need to store the TRef and we should certainly never re-present it.
Merge bug24357 into default
Merge with default
Shortstrs are actually up to 255. Derp.
AMQP error reasons are shortstrs. Take advantage of ~p and limit to the shortstr length.
terminate/2 will only get called on normal shutdown if we trap exits. I've never understood how this fits with "Application processes should normally not trap exits". Ah well.
Whoops, forgot that bit.
Fixed again.
Merge bug24345
Merge heads
only output warning if clustered
fast-forward bug23979 to default
I know we only normally show node-related stuff if nodes_interesting but we're in the nodes list here so I think that makes a difference.
merge bug24201 into default (Management database failover)
merge bug23901 into default
Federation exchange 'x' in vhost '/' connected to localhost:undefined:/:x looks a bit unfortunate. Don't show the port if it's the default.
Language in rabbitmqctl doc
merge bug24354 into default (test_refresh_events/1 sometimes fails)
This is quite lame, but it does reduce the likelihood of random failures here. On my machine at least :)
Typo
merge bug 24356 into default (pg2_fixed will blow up if compiled with R12B5)
Hypothesis: what's happening is some old channel_created event from a previous test is getting overtaken by the rabbit_tests_event_receiver starting up, and is thus getting through to us. Solution: ignore events with the wrong pid until we get the one we want.
Merging bug24230 to default, again
cosmetic/typo
Reverse the polarity, so that it is actually *right*, and make the nearby comment clearer.
use confirms to ensure messages ended up in queues... so we don't rely on 'purge' not overaking 'publish'.
use 'purge' instead of passive 'declare' to determine msg count... since as of bug 24194 a 'declare' may overtake a 'publish'
Bit of form validation.
throw {error, ...} so we convert to bad_request. Also be explicit that we never allow null anywhere.
Remove uses of andalso / orelse where second operand is not a boolean for compatibility with R12.
Merged bug24243 into default
merge bug24194 into default
'stat' needs to be higher priority too Since a typical consumer app will do a queue.declare "assertion" before basic.consume.
This did actually work flawlessly. It was just wrong.
Allow basic_consume and basic_cancel to match the priority of ack and co
Look up the upstream set again in rabbit_federation_link_sup since now we know we're on the node that will actually run the link.
Use mirrored_supervisor, update docs.
R12B-3 fix. I don't think this broke anything but it causes the xref CI test to fail...
cosmetic and remove dead code
Merging bug24350 to default
I refer you to bug24285#c40
refactor
merge default into bug24332
tests pass
Merging bug24230 to default
Merging bug24230 to default
Merging bug24230 to default
Add missing spec
In Erlang 'Ye Olde Versiony', you can't just call 'error'
More testing of which_children
{error, already_present}
Get algorithmic complexity of function right. Yes, it's 4 more lines, but: > L = [{X,X} || X <- lists:seq(1,1000000)]. > timer:tc(erlang,apply,[fun () -> mirrored_supervisor:merge_proplists(L, L) end, []]). {190570,[...]} whereas with previous implementation, after eight minutes, this still hadn't completed.
Alexandru forgot this one; merge in default.
Merge in default.
Detail about units of numbers reported by 'rabbitmqctl status'
Improve ack tests
Query total RAM when updating highwatermark
Merging bug24285 to default
add dependency to webmachine-wrapper
merge heads
No need to do the append
merge bug24347 into default (rabbitmq-management-agent depends on rabbitmq-mochiweb)
merge bug24347 into default (rabbitmq-management-agent depends on rabbitmq-mochiweb)
Missed one.
:hover
Cosmetics
D'oh!
All gs:calls should be 'infinity'; cosmetic change to spec
Merging default to bug24285
merge bug24340 into default
Change vm_memory_high_watermark while running
Use mirrored_supervisor. Lose the global_sup ugliness and the mgmt db fails over seamlessly now. W00t.
Merge in default
refactor rabbit_tests:on_disk_capture/1
nuke file_handle_cache:last_sync_offset
merge bug24132 into default
merge bug24132 into default
merge bug24132 into default
mark list_local as 'internal'
dependency on pg_local is gone
We haven't allowed empty descriptions for a while, so remove support for that and clean up a bit.
Move the code that gets rabbitmq-mochiweb contexts over from -agent, and talk directly to rabbit_mochiweb_registry via RPC.
Clean up how we get nodes.
Remove anything to do with rabbitmq-mochiweb contexts from rabbitmq-management-agent.
dialyzer points out that blah.
Don't have misc depend on mnesia.
...and now we only need to talk to rabbit nodes, not all nodes.
We no longer need this. Woo!
Move the pg_local management into rabbit_direct.
Move the pg_local management into rabbit_direct.
merge default into bug24186
move .app source to src/
merge default into bug24186
merge default into bug24186
merge default into bug24186
merge default into bug24186
move .app source to src/
Merging default to bug24340
Correct spec
merge default into bug24186
Remove dead code
update .app.src from default
Merge in default
Oops
Merging default to bug24340
Merging heads of default
Reforce msg_store sync interval to 25ms, which was the goal of bug 23765, but was accidentally undone in changeset 8fd9704bd1dc.
This is slightly clearer.
Correct capture of msg-on-disk in tests as sync replacement; rip out explicit synchronous msg_store:sync and other unneeded logic
Improve clarity.
Typo
Little cleanups
Merge in default.
Merge bug 24130.
Merge bug 24130.
A little bit of explanation.
Update docs.
I think this was the problem - since the channel was not part of the supervision hierarchy it would not get shut down (and if it was the test would not work!) but it could try to send stats when rabbit_event was down. So close and recreate the channel.
Don't drain events, instead get rabbit_tests_event_receiver to only forward on events we care about.
Move these back where they should be...
Export list/0 for poking around
Use mirrored supervisor for federation links.
Merge in default
Merge bug24289
Merged bug23979 into default
Initial version of requeue preserving order
Well it doesn't work, but it should eventually...
Oops
refactor
Aggregate which_children, implement count_children.
refactor
Merging bug24344 to default
closer to passing the tests
Merge heads.
Make delete / restart / terminate work groupwide.
Update property for requeue order
warning
support multiple consumers on the same process
Simplification of comment; improve consistency of function arg ordering; make mnesia table an ordered_set and always put the Group first - this will improve performance of delete_all and is generally nicer.
use the new logger environment variables
sasl logger also appends
remove old log files when rotating
don't bother swapping out non-existing loggers
Stash the subject and restore it. We need to treat 1.0 properties as immutable, so assuming we can just put it in the routing key doesn't work since it would get overwritten by e.g. the queue name when directly addressing a queue.
This should have been in 20110968336d.
If the client is dying, turn the sync into a noop
Oops
Allow publishing to /exchange/<Name>/<Key>
fix warnings
This basically makes no sense, a null outcome is fine here (according to Rob).
don't log to console if there isn't one
warn when the last *running* disc node goes down
Don't blow up with unparseable target addresses
Use auto_delete after all, exclusive is too exclusive as clients can easily share these.
Don't lose the no_ack field!
Footer is optional. Drop it.
TODO
TODO
Beginning of documentation. Try not to laugh.
Fix some properties handling. Support publishing with subject as routing key. Support single section amqp-value messages (since Rob's Java client emits those now).
start the writer declaratively
Add requeue order test
start the limiter programatically
fix specs
replace undefined | token() with token()
merge from default
only allow the rabbit error logger to touch the files and append rather than overwrite
Treat 503 from a proxy as failure to connect, not unknown error.
snd_settle_mode, rcv_settle_mode. I think what we were doing before trying to infer ack mode from outcomes was just wrong.
refactor
Unused variables, obsolete comment.
fix dialyzer types
inform when the first disc node rejoins the cluster
Remove obsolete special case.
More consistency
Report empty list of slave_pids when mirroring is off, rather than empty atom
Remove unused var, and cosmetic (record whitespace trumps vertical alignment in my book ;) )
alignment
Do the synchronised slave bookkeeping keyed by queue name rather than pid. And tidy up a bit.
Report the name when a queue is deleted.
Report queue slave events by name rather than by QPid.
bug24331 merged into default
Added one more test - no content length + binary (utf) data on the wire.
That one isn't needed either.
Use {Id, Group} as key in Mnesia, and remove update since, err, write will overwrite anyway...
Merge heads
Fix stop raciness.
That broke when there were other cookies about, from e.g. the old cookie scheme.
Handle node not running type errors better. Bit ugly because we need to ensure we have the same number of updateable sections.
Reworkings
This message shows sometimes while a node is starting, so let's not assert that it's not installed.
Also update slave pids when we get a queue_mirror_deaths event.
Handle the queue_mirror_deaths event.
I think we can be more assertful here.
Identify the (possibly former if it changed) master pid in the queue_mirror_deaths event.
Cosmetic
Cosmetic
oops
Bah
Note.
Various improvements mainly to detection of and reporting of death
Most of SASL. We don't announce our mechanisms as I think the codec breaks doing that.
drop mirror_nodes info item
Merging default into bug24130
So that's a bit of a WTF moment.
remove misleading comment + small refactor
merge default into bug23979
merge default into bug24289
Merge bug24304 into default
Add test to check we do NOT supply a content-type header when omitted
Remove the default content-type header for SENT messages.
Remove dead synchronised slaves when we hear about them, fix up tests, tidy up.
Store synced nodes rather than synced pids, and eliminate dups.
refactoring: lift closures
Should explain this...
Flatten.
Slight test for ignore too.
Blow up if we're asked for simple_one_for_one, more tests, try to handle Mod:init/1 returning ignore.
Merging bug24018 to default
Rework return from new_connection so that we detect sooner if there's been a problem creating the connection
Matthias thinks this is obvious :)
Test queues as well. Connections Are Hard.
merge default into bug24018
Merge all the _exists events back to _created.
Merge all the _exists events back to _created.
Oops, that got missed.
Merge all the _exists events back to _created.
Export amqqueue:list/0. Remove filter_exit_map use and timer:sleep/1.
Clear mnesia table up if we're the first mirror to start, since otherwise we can leak when all mirrors go down, mnesia does not and children were added dynamically.
merge bug24322 into default
merge heads
correct spec for rabbit:stop_and_halt/0
Merging bug24319 to default
Upgrade all entries in a segment
Merging v2_5 branch to default
More doc.
Don't delete from mnesia if child is running.
Exit differently.
bug24280 merged into default
Explain cardinality relationship between modules and process groups.
The most important commit so far.
Test at least some of the refresh event code.
Merging bug23838 to default
closer to default
merge default into bug24322
simplify node monitoring
Rename and refactor append_rpc_all_nodes, and get the networking:connections() to use it since otherwise it doesn't handle failures.
Various smaller QA things.
fix dialyzer warnings
Merging bug24313 to default
more specs
Be more assertive about exclusive consumer being... exclusive.
Merge in default
This doesn't in any sense work, but I hate leaving things uncommitted.
even more specs
Push dynamic further towards working.
minor simplifying refactor
We should monitor the session, not its supervisor.
more autogenerated specs
more specs + revert earlier mistake
Choice of format.
more specs
more specs
file_handle_specs are up to date
refactoring
cosmetic
amqqueue_sup, delegate specs are up to date
backing_queue_spec and variable_queue specs up to date
Merge heads
An extension could have a directory without index.html - don't try to serve from there.
channels and amqqueue_process specs up to date
Fix a couple of warnings.
amqqueue specs up to date
cosmetic
don't add specs to the modified OTP modules
merge default into bug23056
Report status in fewer places.
don't warn if Force is set
Formatting changes and robustness.
Guess what? I forgot to add this.
Deeper status terms.
log warnings on local node
merge default into bug23979
Merge in default
bug23146 merged into default
Merge bug24315
More generic.
Oops, that changed a while back.
Oops, dereference BUILDING and substitute generic (and I believe still correct) link.
Remove BUILDING, the need for detailed instructions is mostly obsolete and it's now out of date.
Return the value of Fun(), and make sure we always restore the group leader.
better argument formatting
Merge bug24305 into default
remove logging statement
Merge bug24318 into default
keep track of which nodes are up and don't cleanup after the same node twice
Update reader to work again.
Merge in default
cosmetic
abstract out with_local_io/1
refactor mask_args
wording
don't stop mnesia if it was already running
Merge bug23504.
Cosmetic
warn when the last disc node fails
This should match the overview page.
warn when resetting the last disc node
warn when removing the last disc node from a cluster
refactoring
Merge in default. And update the copyright header on the new file, which is a total miracle.
be discrete about what you log
Don't call rabbit_event:notify directly, we may not be a broker.
Use the new abstraction.
Fix list function names, introduce an abstraction.
Use amqp_direct_connection:force_event_refresh().
Introduce amqp_direct_connection:force_event_refresh(). It's a bit of a pity that we can't have this invoked from rabbit:force_event_refresh(), but the broker must not know it exists, and apart from that it's pretty clean.
Tidy up slightly and make rabbitmqctl list_channels cluster aware.
log rabbitmqctl invocations on the remote node
Whoops -- adjust again.
Use acceptable message expiry value
Sleep slightly before closing socket to allow test_send_and_disconnect() to work.
more consistent naming
Tweak to test to diagnose CI build failures.
just ignore the result to erlang:cancel_timer
convert another timer
A tweak to test to diagnose CI failures.
convert mirror_queue_slave's sync timer
convert gm's flush timer
convert amqqueue_process's sync timer
some more refactoring
refactor
merge default into bug23504
Update our write fork in a similar manner to the update to the reader. Again 1-0isms are demarcated.
Make small change to stomp connect.py close_socket() logic.
No, not dubious at all. How did I miss that?
Merge bug24188
Merge bug24188
We have the abstraction, why not use it?
Invoke rabbit:force_event_refresh() when the database starts up, and treat _exists events like _created ones. Since we now can cope with the db starting up after queues, connections, etc, don't run the database as part of the rabbit app any more, just make it part of the mgmt app. The double supervisor is slightly kludgy, but that will go away with bug 24201.
Introduce rabbit:force_event_refresh which will:
tighten copyright date ranges
More tweaking
update rabbitmqadmin copyright header
Not Python 3.
update copyright headers
update test copyright headers
update copyright headers
Add IndexOnDisk to AckEntry
Turn q3 into random access data structure
ipv6 + ssl test
A slight increase in clarity
add ipv6 test
support IPv6 address in Erlang client
Fix building from the public umbrella.
Merge bug24284
Merge bug24284
Merge bug24292
That comment feels very redundant now, this is no longer hard.
Re-add this
Get rid of those irritating clearing elements.
Rearrange the footer a bit both logically and visually.
Upped wait times in three tests to see if CI builds are better. See bug24312.
Merge bug 24227
Merged bug24278 into default
silence nsis
silence tar
silence tar
merge from default
add fullstop
silence zips
silence zips
Make sure every shortcut has "RabbitMQ" in its name, and be a bit more consistent.
employ more sophisticated message queue formatting ...in the channel, queue and msg_store
silence unzip
silence unzip
Trap exit so that our terminate runs and closes the channels
merge from bug24227
abstract out mnesia:start and mnesia:stop
merge bug24307 into default
refactor
strip out the new backup naming scheme since it isn't necessary anymore
Better readme
Don't unpack and repack
Don't call prioritise_info for EXIT from parent. Use infinity priority for system msgs and EXIT from parent
Minor refactor and introduce horrific inefficiency
Make priority_queue be able to have a concept of infinity as a priority
update copyright year
merge default into bug24018
direct tests run again
merge from default
As reported by Alvaro Videla, calls to monitor and demonitor should still be 'erlang:' prefixed for older versions of Erlang
refactor: use multiple heads instead of 'case'
Fill in some more gaps in the codec.
MNESIA_DIR is not always set. Make sure the directory exists.
Merge bug24306 into default
Merge bug24255 into default.
...and get the ownership right.
Adjust wait time again in test.
/var/run/rabbitmq should exist
Always write the pid file, and write it in /var/run for debs/RPMs.
Merge default in.
Recoded aessertTrue() in test_interleaved_receipt_no_receipt_tx.
Turn q4 into random access data structure
Merging bug23117 to default
Merge bug24257 into default.
remove some magic
Merge in default, resolving conflicts.
Check when base64 decoding, and a touch of refactoring.
merge from bug 24227
merge bug24288 into default
More fiddling with codec-y stuff so that we can now send the message proper, rather than just an orphaned transfer record. Now round-trips with the python client. Hopefully Matthias will forgive me.
General improvements
It has been decided that masking out on write, is preferable to masking out on read.
Merging default into bug24130
Merge bug23864 into default
Typo
Paper over the cracks slightly so we can deliver messages too.
catch-all cases, not just undefined
Fixed heartbeat byte
Wipe out slave pids whenever we start up a queue.
Support the new (more 0-9-1-ish) way that a transfer frame can have various messagey frames following it. We can now publish a message again (w00t!)
Move ha boot steps to somewhere more appropriate
dict => orddict
+documentation, minor renaming, clarity
merge bug24296 into default
cosmetic
Fix a quirk of the codec and a bug with the new use of re.
Merging bug23464 to default
Sometimes booleans are true.
cosmetic
Add another encoding for booleans, we only had one before.
Compile in debug mode
Don't fall at the first hurdle.
Convert O(N*M) to O(M*log_2(N))
combine function heads
cosmetic
cosmetic
impossible case should cause an error
don't needlessly notify queues
error, not exit
unbreak amqqueue_process/limiter logic
More consistent use of macro
Update protocol definitions (non-working). This updates the various structures in the protocol, but does not take account of the message body changes.
remove useless cases
finish refactoring
refactor
handle only one unassigned consumer at a time
merge from default
merge heads
oops
send basic.consume to consumer during rpc processing
Cosmetic
Cosmetic
A bit more debitrot. Still doesn't work with my old 1-0 client, but it may be the wrong version...
cosmetic and refactoring
fix a race
documentation improvements
less amusing direct_consumer behaviour
Undo the depressing idiocy of 978410e62a1c
improve comments
fix tests
Remove uses of the regexp module.
Fix most unused variable warnings. A couple are left in because it wasn't 100% obvious to me they didn't represent real problems.
refactor
refactor
start limiter before channel
Update the forked reader copy in rabbit_amqp1_0_reader, and add some comments demarcating which bits we've modified for future unforking.
Get the app name right.
This much more closely resembles something that works.
Build system updates
Improve building documentation
Merge bug24287 into default
Use AMQP 0-9-1 methods, not 0-8.
Remove some dead TODOs from when this was very young.
Face down, nine-edge first.
...and unbreak.
Merge default
Merge bug24282 into default
Merge with default
Merge in default.
Convert dict to orddict
use mnesia:system_config(use_dir)
Merge in default.
Make the (?) more noticeable.
Get rid of that little paragraph under the table, it's always annoyed me.
more spacing
rename IsDiskNode, WasDiskNode
un-misname waiting_for
Sp
factoring
Support optionally formatting the priority queue mailbox, and do so on the queue.
cosmetic
handle starting/stopping returns from mnesia
remove starting/stopping improvements
don't use echo -e
remove the disc schema for stand-alone ram nodes
bring branch closer to default
don't wipe message store and lengthier comment
remove impossible case
Dialyser points out I was returning the wrong thing here. Oops.
Bad OTP! No quotes!
Remove demonitor_all_peers since we always stop after invoking it.
Don't attempt to manage all the cookies, just pick out the one we care about. Some browsers seem to stick a "s_vi" cookie in there no matter what you do (I'm looking at YOU Internet Explorer 7).
remove redundant code
oops
Store all the implicit prefs in a single large cookie.
refactor and re-sync ram nodes
Support for durable subscriptions
refactor
handle the starting/stopping returns from mnesia
Update to use new rabbitmqctl wait form. Unfortunately this is fiddly because:
always reset and preemptively leave clusters
It *is* a process. It *has* a pid.
(Untested) attempt at updating OCF script.
reset before changing node type
Handle more failures than just noproc.
We need to keep the same number of updatable sections even in the event of a failure or the page updating code will choke.
Revert to identifying queues by pids for the synchronised slaves - this unbreaks queue deletion.
Flip flop again: revert b69bd74d8e17 and add the old master pid to the promoted message - we want to identify queues by pids in mgmt.
remove two resets introduced earlier
Merge bug24240
Pattern match implicitly
merge default into bug24227
test that disc nodes are actually disc nodes
The simple solution: just add exclusive_consumer_pid back and add a test.
check that a ram node is indeed a ram node
enable disc-less nodes
Merge with bug23864
Add a test of HA queue mgmt and fix a bug thus found.
Put logs with the others.
Support /temp-queue/ and /reply-queue/ destinations
Set timeouts to infinity.
comment
really add schema-less nodes
Use an include file
Start of tests that require clustering.
Fix dumb mistake
Hopefully clearer.
Tests for /amq/queue destinations
Uh, it's probably an idea to write out the pidfile as early as possible, in case for example prelaunch fails.
A test? What a novel idea.
Allow SEND and SUBSCRIBE to /amq/queue destinations
Parsing code for /amq/queue destinations
Merge bug24273 into default
Fix bookkeeping (io:formats left in deliberately, something is wrong with bug 24130).
Actually, for the bookkeeping mgmt wants, this is better.
Merge bug24274 into default
Cosmetic
catch another two reasons
Merge bug24262.
Speed improvements
Bigger comment.
Added ABS_PACKAGE_DIR as simple variable and use it to resolve *ssl.config files.
more the restart_app to a more appropriate place
Merge bug24229 (again)
Simplify group shutdown by repeated casting.
It might not be 'killed'. And we should return an error here.
I spent a long time trying to get the teardown of the complete supervision hierarchy associated with each test to be completely synchronous and failing. It's much easier to create a new group for each test.
already_started
there are many ways for a queue to die nicely
Handle being torn down while in the transaction.
forgot an unused From
merge default into bug23117
Not even sure what that was there for. Oops.
Remove a sleep() by waiting for the supervisor and any children we care about to go away.
Catch more exit reasons (with a fork of rabbit_misc:with_exit_handler/2).
If start_child is called twice in a row we used to hang. Um, that's not good. Fix.
Defer all of the startup work to the second stage startup, so that we can't get a DOWN message while we're still half started and then fall over.
merge default into bug24229
remove From
appending to a list is slow. And we don't seem to care about this list being ordered
cover the missing case
the argument is sometimes 'disc_copies' and not 'disc'
Stronger constraints and some notes on frequency
Cosmetic
For each test, check the status is correct after bringing up some exchanges. And fix bugs found as a consequence:
increase a timeout
Correct boilerplate for the HA modules which were started in 2010 but failed to get updated to 2011.
remove io:format
cleanup queue and restart app
Delete synchronised_slaves when a queue is deleted...
UI for synchronisedness.
Bookkeeping for synchronised_slave_pids.
Oops, don't add slave_pids key when there aren't any.
Merge bug24259 into default
Merge default into bug24259
Merge bug24220 into default
Add master_pid to queue_slave_synchronised event; this will reduce the amount of bookkeeping mgmt needs to do and is pretty trivial.
re-add schema-less nodes
Better job of not breaking mgmt ;)
Consistent naming:
bunny and lapin never existed. They are unrabbits.
Consistent naming
*Bangs head against desk*
This was copied from R14B03 supervisor.erl, but there it was exported. I don't think we want to export any types from here, people can get them from supervisor.
More descriptive names, don't clash with erlang:monitor/2.
The problem with kill -0 is that its semantics are "could I send a signal to this process?" - i.e. it will fail if the process exists but is not owned by the current user. I think this is not quite what we're looking for, so let's use ps -p. I've tested that ps -p does the right thing on Linux and OS X, and it claims to work on FreeBSD and AIX too according to the manpages on the web. That's probably good enough.
Do these checks the other way round - if the pid is not running we should fail, even if the node is up. I think.
Be more clear when pidfile read fails.
Show when we've acquired the pid. This would be useful for diagnostics.
writer should be intrinsic
Merge bug24229 to default
Merging default to bug24230
Reduce duplication
Refactor to mimic style and pizzazz of amqqueue_process
Stop mgmt from crashing
rework
fix bug introduced by bug 24216 (tx untangling) forgot to propagate an API change
Make this more explicit. I *think* it's TRTTD.
Remove dead monitors. Make sure everyone has unmonitored everyone else before we start to shut down.
cosmetic
Shut down the whole supervisor group if the delegate shuts down due to its children having surpassed their restart limits.
Merging default to bug24130
We should probably prefix this.
rabbitmqctl wait $PID_FILE.
special close message when receiving a nack
Suppress CONNECTED response on implicit connect.
PID_FILE
refactor
receiving a nack should also take down the channel
fix the channel killing itself on receiving a nack
Fix docs
Fix index files for directories, and redirecting.
Copy and paste does have its disadvantages.
Federation link status for management
Status reporting.
Merging bug24138 to default
Merging bug24138 to default
Merging bug24138 to default
reorder clauses and complete specs
simplify
make timeout infinite
defensive programming
gen_consumer is supervised by channel_sup
merge bug23900 into default
Fix race. Use cast. No "hello".
We like a lot of things about OTP. But not tabs.
Merged default into bug23464
much cleaner
suffix/2.
pass broker ssl args to broker
Run binding recovery test on hare to work round bug 24256
add wait_for_confirms_or_die/1
remove useless check
Define ssl port as normal port -1, as we used to
add tests
add basic confirm barrier
Merge bug24216 into default
Typo
Merge bug24216 into default
Merge bug24193
Admit that it's markdown
Defuse these context/path pairs as well
cosmetic
One of these just timed out on CI, I *think* for no good reason.
I *think* this makes it a bit clearer what goes with what...
Log file closing
Encourage use of # rather than *...
Show a bit of information about the queue we're using.
Rearrange the UI a little.
Better docs.
Don't blow up the first time you run this.
Test scratch space management in binding_recovery_test also.
Merge in default
Port 1f66209756c5 to default from bug 24249
Merge heads
Test our handling of scratch space.
merge heads
Merge in default
(Late) merge bug 24244
cosmetic
merge bug24244 into default
inlining
Matthias points out the existence of lists:key*.
Make rabbit_mochiweb_registry:add/4 overwrite a record if you add the same context twice, rather than insert a duplicate.
When the line break shortage hits, I'll be sat on top of my pile of line breaks with a shotgun.
Merge heads
Refactor a bit, and remove an unused variable.
Merge in default
Note to future self / others
Support querying slaves for their status
Merge heads
Fix upgrades from 2.4.1 and before. This failed because the #exchange{} record now contains the exchange scratch space, but at the point at which we add trace exchanges Mnesia hasn't got there yet. The moral of this story is: never use record definitions in rabbit_upgrade_functions (which is why all the transform() invocations don't).
merge bug24179 into default
merge bug24179 into default
Merging default into bug24130
cosmetic
show new 'uncommitted messages' stats
ditch per-x-q confirm stats They don't work properly (see comment in code) and are emitted in a very awkward place. And they expose implementation detail - there is no a priori reason why queues should be involved in confirms - and are of questionable utility.
make 'tx.commit-ok' indicate responsibility transfer This is now very close to the previous tx semantics. The downsides w.r.t. the previous state of this branch are - a bit more code, though only in the channel - tx and confirm mode no longer compose - tx always carries the cost of confirms
Don't blow up during the brief period when the node is up but mgmt-agent is not (or if mgmt-agent is not installed...)
Factor out listener options in config grammar. Be consistent about quoting: Erlang values get backticks (markdown code blocks) and quoted as they would in Erlang. Everything else, i.e., URL bits, is quoted if it's string-like.
Test binding recovery with serialise_events on, since it's hard for rabbitmq-server to do that.
One last tweak.
Refactor / beautification.
Reduce the scope #exchange{}s get to explore.
Merged bug24126 into default
Minor refactor
Prune scratch space before starting exchange. Yes, this is a *lot* simpler!
Revert 8117d7737c2c
Update README. Needs a bit more spelling out now.
Another thing that got lost in the merge party.
Attempt to justify all this global state we have.
Split all our global vars (and a couple of functions that 100% pertain to them) into global.js.
Merge in default
Merged bug23890 into default
Show redelivery in the overview.
Abstract the delivery rate thing a bit.
it's called dict:append
make consumers list into a fifo queue
Dialyser points out that start_link may return other than {ok, Pid}.
Dialyser points out that pid_of/1 was returning the wrong thing, hence some tests were passing incorrectly. Fix dubious test.
don't inspect gs's From tuple; re-add channel:subscribe
First pass at specs. Note that these are formatted a bit differnt from how we normally do things, since most of them are OTP copypasta it makes sense to do the rest in the same style.
Merge bug 24236
Cosmetic
Merge in default.
Fix silly bug that I introduced while merging.
Inline rabbit_misc:table_filter, then fiddle with it until it's actually right. To say this could do with some beautification is an understatement.
Backed out changeset 13c7816d975f
Add vhosts to all
Added timeout testing
reorder some functions to improve readability
divide the priority by nine
add specs to the exported functions
all consumer module functions may returns errors
Merging the backport branch (bug23399_rabbitmq_v2_5_1) to bug23399
Merging default into bug23399
Backport bug23399 to v2_5_1 properly. All tests pass; link to visualiser now works etc. Should be not too painful to maintain this going forwards.
Merge bug24241
Better yet, this is now not used.
Merging bug24241 into bug23399
Turns out they can.
Don't blow up if the port is unknown, and thus remove use of amqp_connection:maybe_set_default_port. Also add protocol to forwarding header since we're here.
Improve code coverage
allow failures in the consumer module's initialization
handle_info instead of handle_down
Implement agreed changes
use the default port setter from amqp_client
expose default port setter
Merging bug24241 to bug23399
coarse => basic; detailed => full
Merge bug23664 into default
Merge with default
Typo
Merge in default
annotate => augment
Merging bug24241 to bug23399
Show redelivery rate as a sub-thing of delivery rate.
Remove unnecessary semantic change
Tidy db API, remove inconsistencies, and increase flexibility.
Don't leak.
don't run rabbitmq-activate-plugins
let the amqp_client decide what port to use
Identify upstream by (Connection name, Exchange name).
undefined instead of auto
confirm on tx.rollback
This test is no longer needed.
If we're intending to allow gen_server2 and supervisor2 to be defined out, let's do the same for pg2_fixed.
Essay.
Duh. That notify thing is no longer needed, simplify.
Support unnamed supervisors. This tweaks the startup somewhat again.
Support childspecs returned from Module:init(). Unfortunately a bit fiddly as we need to cast a message to ourselves (since we can't start children until the overall supervisor is up) but then we need to cast another one back so as to still start up synchronously.
Add another test
Use two supervisors (an overall one and the delegate underneath it) so that our behaviour is not affected by the users's choice of restart strategy.
remove call to test that hasn't existed since 2.1.0
auto-select ports for normal and ssl connections
merge default into bug24216
change tx semantics to 'batching' We keep track of uncommitted messages and acks in the channel. All routing decisions are made instantly, which means errors are detected straight away. We increment pub/ack stats on commit only.
merge bug24232 into default (don't show mode in 'rabbitmqctl list_channels')
cosmetic: more sensible order of qpids for routing
Fix usage of "lsof" on UNIX-like opertating systems.
remove 'transactional' flag from 'rabbitmqctl list_channel'
cosmetic: move docs of confirm-related channel info items to better place
Bang head against desk.
Fix an occasional race.
merge bug23825 into default
Let's pretend that didn't happen.
Improve reliability, test deleting and restarting children.
cosmetic: we tend to prefer 'any()' over 'term()'
Be less chatty.
When starting a child that is already around on a different supervisor, do nothing. And test for that.
We only have mnesia now.
Trying to keep that ETS table up to date was never going to work, live without it. Also fix alive(). And another test.
Better code coverage
Uh, fix the test.
Merging 2.5.1 tagged release to bug23399
Add a link to visualiser; also send down connections
Beginning of tests, and fix a bug found (ETS table creation on demand is racy).
Cosmetic
We need mirrored_supervisor in rabbit_common so that plugins can pick up the behaviour.
Separate out supervisor name and group name.
More cosmetic.
Cosmetic
s/dict/orddict/
Note
Remove this, it's gone into rabbitmq-server
Crude but working implementation
Something that impersonates a supervisor and delegates to it.
prioritise DOWNs to make messages overtaking DOWNs less likely
fix a couple of warning and remove a dangling comment
re-enable selective's default consumer and add a test for it
Merge default into bug24220.
Merge heads
merge default into bug24216
Merge bug 23961
Cosmetic
Moved connect tests to new script; implicit_connect not default; in tests only.
Remove unused code
Bit more doc.
tests pass
remove selective_consumer:cancel/2 and comments mentioning it or subscribe/2
half remove selective's default consumer
use monitors instead of links
API change
- use rabbit_misc:execute_mnesia_transaction - call the function update_scratch and only update the scratch space - call Fun(X) once - make 'read' into a 'wread'
Rename ack_on to ack_mode and associated changes to possible values
Merging default to bug23961
Update shovel readme so it doesn't suggest you have to build from source
Spec
remove channel:subscribe
Backport 836316f118d5 from bug23900 (identify exchanges by name rather than #exchange{} in supervisor and pg2).
cosmetic: give rabbit.erl some structure
merge bug24207 into default (Rabbit doesn't stop and halt correctly)
factorisation
There's a possibility that rabbit has to be able to be started without being booted. Thus we need to be able to load the transitive closure of rabbit's dependencies on demand. This is especially needed for the tests.
Avoid pointless begin-end block. Duh.
All keys are optional. We must not omit a vertex just because it has not any dependencies
cosmetic
Finally, just to be really safe, avoid init:stop as far as we sensibly can on stop_and_halt as we know that does the wrong thing should applications have been manually stopped and restarted
Delete graph after use
Build graph; prune graph; traverse graph; obey graph.
turned consumers into separate processes
Complicate Makefile processing
Add conditional compilation and makefile infrastructure
init:stop knows better than us. It makes sure applications are taken down in the right order (which we were not doing).
merge bug24180 into default
If we're going to mutate #exchange{} records, we probably shouldn't use them as IDs.
tiny refactor: better function names
Store the suffix in Mnesia. Note that we effectively just abandon the DETS table, we don't attempt to migrate from it. I think this is adequate.
Scratch space for exchanges, and rabbit_exchange:update/2.
Remove tonyg and md5 checksums, since the Macports guys already have done and we don't want to reinstate them.
Changelogs for 2.5.1 release.
merge bug 24221 into default (channel.flow{active=true} can fail to unblock queues)
space, white
Having a single non-boolean is much nicer than multiple booleans, with mutually exclusive combinations
Add support for confirms
Add further backing queue methods
Add a confirm config param, which defaults to true
And remove docs for tx
Added tag rabbitmq_v2_5_1 for changeset 5b687b250804
Backport 1df8606372dd (add dependency from internal exchanges to trace exchange - bug 24208).
Rip out the rest of txn support
Create 2.5 branch
Remove support for parsing txn from config
Create 2.5 branch
Merged bug24208 into default
Merging default to bug23399
docs
Notify the world when we become synchronised
Merge default into bug24130. Also add appropriate specs, and fix some bugs
Add missing specs; move some functions to more appropriate places
Master responds to length_requests with length broadcast; slaves can determine their synchronised state correctly.
essentially cosmetic tweak the result of terminate_and_shutdown is not needed, but it looks odd to throw away State1 in one branch.
merge default into bug24216
Slaves request length when they join.
Emit slave promotion
Emit slave creation
merge bug24217 into default
simplify
Ensure we hit both branches of the newly added case queue:is_empty(Q4) of
Refactoring
Add test
meh
cosmetic
remember when we've refused a queue's can_send due to being blocked so that we can tell the queue when we get unblocked
s/run_backing_queue_async/run_backing_queue as well as removing some mroe tx remnants from mirror_queue_slave
get rid of sync run_backing_queue it was only needed for tx Also remove some tx remnants from mirror_queue_slave.
cosmetic: move helpers to where they belong
cosmetic: make order of exports match order in behaviour
refactor 'dropwhile' and 'fetch' - rename 'internal_queue_out' to 'queue_out' and turn it from 2nd to   1st order, thus making it more analogous to queue:out - only assert state invariants at public API return points, not inside   helper functions - inline 'dropwhile1' into 'dropwhile'
minor refactoring and simplification
Correct bug. This was introduced in bug 24116.
fix tests
tx gone from everywhere
remove transactions from backing queue ...and mostly from amqqueue_process
Attempt to make tests more reliable.
Merge bug24127 into default (again?)
Merge bug24187 into default
Oops, we need the dependency.
Don't blow up the page if the stats DB is not running.
Merged bug23554 into default
Run tests without pwd sensitivity, thus fix "make test" in the public umbrella.
Added tag rabbitmq_v2_5_0_preview for changeset 9188e0ad0457
inlining
And more...
Update for the new policy-based way to do things, strip out a couple more bits that I missed.
Duh. We always have a delivery tag.
Strip out the manual mirror node management
Merge in default
Make the pre-test cleanup actually happen *before* the test.
Explode if the nodes policy has an empty list as the policy params
Remove a dastardly decrement.
More tidying up.
Make an error more likely to be formatted sensibly
Tidy ups around gb_trees.
Really really don't look at x-mirror anymore. sigh.
Be more helpful...and make it compile
Be more helpful
We don't need such long waits now.
Don't delay 10s before even starting the reconnect delay.
erlang-mode
Reorganise the 100ms delays we use to get round asynchronicity of bindings going upstream.
Add redelivered flag to forwarding headers, this is likely to prove useful if people need duplicate detection.
Dust off the delivery tag map removed in 8bc9e3ff6ce3: we need it now since we can drop messages due to max_hops being exceeded.
cosmetic
More realistic tests
cosmetic
Remove rubbish
All done.
Sort out misc. (dnc)
forgot to remove. (dnc)
Sort out (everywhere except mirror modules) slave pids and mirror nodes and deal with non-local queue declaration, and introduce ha policy and ha policy params. (does not compile)
refactor: extract 'ack' sending
cosmetic
tweak
Rip out support for dynamically adding or removing queue mirrors
Merging default into bug23554
Change to a default listener that gets remapped to '*'.
Resurrect default
Merge bug24187 into default
Get the default vhost / exchange properly in validate/1.
Abstract the structure of a node.
Move rabbit_federation_util:federation_up to call site, make sure the downstream connection has the right vhost.
Rework error handling
Rename upstream_set argument to upstream-set.
Improve pget_bin, reduce the amount of list_to_binary_to_binary_to_list going on.
Merged bug24164 into default
Merged bug24164 into default
Merged bug24164 into default
Clarifed documentation
Fix binary-vs-listness of from_set
Oops
from_set_name -> from_set and inline.
First draft of qc property for backing store
Take default username and password from env.
Documentation improvements / fixes.
Show redelivery rates.
Generate fine stats on redeliver.
tweak
get rid of unused var
tweak
DLE -> DLX
Tweaked read_msg_callback to not increment RamMsgCount and cleaned it up at the same time
Refactored read_msg_callback
Rename MsgState -> AckEntry
Renamed dead_letter_exchange to dlx
More pget. Not all of the changes are relevant to this bug, but let's try for consistency.
Fixed up spec for msg_lookup_callback to contstrain input and output types to be the same
Use jQuery.inArray().
Merge with default
Restore missing section in .app file
Merge with default
Add /all which will, eventually, output all resources, transient or otherwise. Annotate with coarse stats initially. Add some consistency.
Revert bug24186
Revert bug24186
Revert bug24186
Revert bug24186
Revert bug24186
Revert bug24186
Revert bug24186
Using qos+ack actually makes this much faster, otherwise the mailbox of the consumer process gets overwhelmed.
Simple UI for viewing, downloading and deleting files. UI tweak.
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Merge bug24186
Move app template to src/*.app.src
Correctness.
Visual tweak.
Get ensure_dir right.
Make definition lists slightly clearer.
Allow unprivileged users to passive declare.
The base .app file now lives in src/*.app.src
The base .app file now lives in src/*.app.src
The base .app file now lives in src/*.app.src
The base .app file now lives in src/*.app.src
The base .app file now lives in src/*.app.src
The base .app file now lives in src/*.app.src
Rephrase.
Rename tags to administrator / monitoring / management.
Merge in bug24164 (and hence default)
Merge in default
Merge in default
It's now 'management'.
Move max_hops to upstream_set.
Fix a list vs binary bug around default exchanges / vhosts.
Remove explicit specification of the exchange
If we log disconnections / failed connections, we should probably log successful connections too.
If the upstream channel goes down for an intelligible reason, just log it and die quietly.
Rephrase
Update the warnings / limitations.
Less of an explosion when the other end cannot be contacted.
If the downstream channel is going down cleanly, don't blow up, we're likely to go down very soon anyway.
Test max_hops by building a ring with three brokers.
Check length of AMQP array properly.
Acknowledge dropped messages, or they'll build up forever, oops.
Ignore app file properly.
Simplistic max_hops. Needs testing.
Remove purpose argument, let bindings propagate freely.
Matthias points out that these pertain to the old persister which we no longer ship.
Rename x-forwarding to x-received-from, remove protocol from it.
Merge pull request #1 from legoscia/master
Merge in default.
Merge bug23521
Merge bug23521
Reinstate authenticated static contexts. May yet be useful.
Add generated app file to .hgignore
Add generated app file to .hgignore
Add generated app file to .hgignore
Add generated app file to .hgignore
Add generated app file to .hgignore
Add generated app file to .hgignore
Add generated app file to .hgignore
Merge heads
Merge heads
merge heads
Merge heads.
A little gen_server that consumes messages and sticks them in a log file.
It's 405 Method Not Allowed for this case.
Use pattern matching
README
Start tracing when a trace is created, stop when it stops, view this happening.
Redirect when mgmt has been moved and there's no trailing slash.
Abstract and tidy up context selector, move the HEAD / GET check for statoc content to the handler.
Merged in default
Merge in default
Added tag rabbitmq_v2_5_0 for changeset 0d3223088b7f
Added tag rabbitmq_v2_5_0 for changeset 7ec032269ead
Added tag rabbitmq_v2_5_0 for changeset 4769054b20d2
Added tag rabbitmq_v2_5_0 for changeset a99b44c37da6
Added tag rabbitmq_v2_5_0 for changeset e59544990a49
Added tag rabbitmq_v2_5_0 for changeset ff2057895867
Added tag rabbitmq_v2_5_0 for changeset 72193eb32812
Added tag rabbitmq_v2_5_0 for changeset 0b6b1c20a6e8
Added tag rabbitmq_v2_5_0 for changeset 1924f92d10f7
Added tag rabbitmq_v2_5_0 for changeset 6042cdb0bc92
Nothing but CRUD.
Package changelog mods for 2.5.0
Not sure why this worked before, but it doesn't now. Fixed.
Merge default, again
Merged bug24127 into default.
Merge bug23944
Merge bug bug23944
Merge bug bug23944
Duh
More rejig
Another try.
Rejig ports / contexts tables again.
This is a bit confusing - it's the hostname, or the fqdn, depending on rDNS, or localhost if that's what you bind to. Let's not. The node contains the host you are likely to care about.
That might work better.
Only show nodes if interesting.
These lists didn't have a defined order. Fix.
Don't bother try to cope if context has no name, that's a bug.
Don't bother try to cope if context has no name, that's a bug.
Merge in default
Rework appearance of ports and contexts.
Fixed stupid commenting out of tests
Merge in default
Revert e59544990a49.
Fixed bug with undecoded content
Debitrot
Merge in default
If a DLE is deleted after being declared in an x-dead-letter-exchange argument, this should be a fatal error. Also, if the DLE has no routable bindings for a message, we should just proceed as normal.
'management-user' tag.
Convert non-administrators to "management-user" (see bug 23664)
Removed PD hack and be happy with the death reason we have
Merge bug24162 into default
Merge bug24162 into default
Updated specs and fixed error in ack that didn't account for different ack storage formats
* Makefile (REBAR): Fix case where rebar is not in path.
Bit of a hack, but it gets the tests passing for now
Merge with default
improves rebar handling
Test monitoring stuff better. Oh, and consequently fix a bug.
Yes, this is really what the QA process has come to.
Further improve tests
Most of a "monitor" tag.
On reflection, I think it does. Explain why.
Improve (and, err, fix) tests
Oops
Multiple tag queries, so we can actually decide on tags via LDAP.
Can't leave well enough alone
That crept in, but it's kinda useful since the underlying library won't log anything until the connection is up. Make it look right though.
The simplest change to the ldap backend. It's hard to define tags via LDAP with this though.
Elimination of trivial and pointless abstraction
Move the management-specific filtering of vhosts into management.
Oops
Since we're changing the backend API anyway, let's remove this management-specific wart.
Docs, strip spaces around tags.
Support tags in rabbitmqadmin, such as it is.
Fix up with web UI for tags.
Let's just represent tags as a comma-separated string. This will make UI easier to implement.
Merge default
Work around the damage introduced in http://hg.rabbitmq.com/rabbitmq-public-umbrella/rev/1b8a1d14d34c
API compatibility with user tags
First pass at user tags.
Support the stats interval being configurable. This looks much worse than it is - basically we need to thread State down to zero_rates. While doing that, it makes sense to thread State to everywhere we used to thread Tables, since we needed to do some of that anyway and this is more consistent and future-proof.
Make the stats interval configurable.
Merge in bug24059
Merged default in.
Merged in default and corrected ssl support clashes.
Merge bug24154 into default
Merge bug24154 into default
Support for DL'ing messages that are rejected with requeue=false
Patch clean up
Merge with default
Publishing under new GUID now. DL'd messages have x-death-reason and x-death-queue headers for admin purposes. Support DL for queue.delete. Fixed issue when messages not in memory were not loaded back from disk
Add simple test description to reliability test
Merged in default
This should have been there for a while I feel.
Add SSL info to the adapter_info record.
Add an additional info mechanism to the adapter info record. I'm not sure whether this draws the line in the right place, but adding 8 SSL fields to that record didn't feel right.
Various fixes for relocatability.
Merge bug22005 into default.
Redirect /mgmt/, refactor a bit.
Do authentication in Mochiweb, should unbreak Safari.
Merge in default
Merge bug24157 into default
Merge with default
Merge in default
Merge with default
Removed extraneous lines in package.mk
Essay.
Merge with default and rough outline of DL for ttl expiry
Essay still to come, but here's a couple of comments in place to explain some bits.
Another version, avoiding a temp var
Merged bug24088 into default. Also shortened python test descriptions to a single line.
OK, so that approach does not work, due to the node started by erl somehow imposing some of its configuration (in particular SASL) on the tests call, and making the log tests fail. Let's just parse the output...
Correct config grammar
erl_call treats all communication with the node as success, so try to emulate it.
Merge bug24151 into default
Tests for closing connection while sending.
Make sure all tests run again
Merged bug24156 into default
Merged bug24156 into default
Explain what we list by default.
Ahem
Update for new permissions API.
Be more consistent about returning infos from rabbit_auth_backend_internal:list_*_permissions, fix rabbit_vhost:delete. Note that some of the info keys have changed to match those in mgmt, so we avoid a translation layer.
Another attempt at explaining these, by explictly discussing how it works. Also remove the (* 1000) thing, that doesn't make things any clearer.
Attempt to make docs clearer.
Missing include file!
Update documentation for that.
A few tweaks to logging to make configuration effects more apparent to users
Rename queue_expires to expires, add support for message-ttl.
Add unit tests for {Context, {Listener, Path}} form in config
Tests for implicit connect
Merge bug24128
Suppport implicit connect
Support default_user connection
Parsing default_user configuration and passing into down into supervisors
adding possibility of deferred reply in gen consumer's handle_call callback; doc tweak in selective consumer; fixing reply on error in subscribe
removing documentation dummy functions in amqp_gen_consumer.erl; fixing license year for new files; fixing style in amqp_gen_consumer's specs
merging in from default
Rejig the configuration to go through an additional layer of indirection so that exchange arguments can plausibly be immutable, and to get rid of the confusing merging.
Removed whitespace and upgraded adapter info to display SSL
Merge bug24145
merge bug22953 into default some minor tweaks and bug fixes to the broker needed by rabbitmq-federation: - make rabbit_binding:list_for_* usable in a transaction context - add rabbit_binding:peek_serial/1 to retrieve the exchange event   serial w/o incrementing it - correct exchange type 'create' callback invocation in recover
More consitent exception handling
Ensure there's always a leading "/" for webmachine.
Very minor tweak
Tweaks to hgignore
SSL tests running again
optimise routing by bypassing mnesia:dirty_select ...and going straight to an ets:select instead
Report cosmetics
Reformat and move environment / report back (and take status with them).
Reformat, rephrase the "diagnostic information" para and move it to the top since it always applies.
Use a list comp to filter, sort the list.
Merge heads
Change rabbitmqctl docs
Merge heads
Need a space here
Removed pointless, erroneous test that was breaking CI
Less verbose description of environment command
Show docs in usage
Make all federation objects have a prefix to their name, generate a more unique nodename and allow the admin to override it.
Split rabbitmqctl status query
Oops, we don't map true/false to transaction/none on recover. Let's fix that here...
Remove the special handling of serial being undefined, and explain why we don't care.
Don't delete the upstream Q on reconnect if the downstream X is transient. I had silly ideas that that corresponded more to the semantics, but not really.
If we find the serial is not defined we don't actually want to blow up, this could be normal, we're just a short-lived exchange. So instead go into a mode where the only thing we can do is stop.
Merge with default, but need to reinstate the SSL tests in the Makefile
Merge bug24074
Tweaked timeout on the receipt test to allow for slower machine. Removed stupid comment and added a better failure message
Merge heads
Remove total_messages, it's never been TRTTD, amqqueue_p emits "messages" anyway.
Merge bug24097
Merging default to bug23554
Reduce diff from bug23554: Extend backing queue api to present reason for termination
Reduce diff from bug23554: Scaffolding for programmatically deciding backing queue
Reduce diff from bug23554: Allow formatting of nested info items
One more instance.
Import pget from rabbit_misc.
Oops
Merging heads of default
Reduce diff from bug23554: minor tweaks to gm_soak_test (correction of error messages)
Move pget / set_table_value to rabbit_misc
Merge in default
Move pget from federation / mgmt to misc.
Move set_table_value from federation to misc
"Handle" getting not_found from peek_serial (not that we can do anything, it's pretty much a sign that we're dying anyway, so lets die) + cosmetic.
Merge bug 24142
Cosmetic
Merged bug24140 into default
Undo unneeded change to boots
Merging default into bug23554
cosmetic: eliminate gratuitous diffs vs 'default'
cosmetic
cosmetic
refactor: inline and re-arrange
some refactoring and cosmetics: - fewer intermediate vars - more logical sequence of operations on connection establishment
Chop out almost all of the documentation in order to move it to the website.
And change the name
Oops
rabbit_exchange:peek_serial/1.
Fix the command-queuing logic. This requires a number of changes:
merge bug23857 into default
merge bug23857 into default
Changed tests to reflect new name change
Issue #3 - Changed the name of the exchange to play nice with the AMQP spec
Add licenses as required by third party code
Make it slightly more explicit that we depend on the DB. ATM rabbit_event depends on database anyway, but I suppose that might change.
Tweak comment
Make sure the global name server is definitely up and synced by the time we treat the cluster as "up".
Merge in default
Update manpage for rabbitmqctl status
Move status info (again)
Allow binding:list_* to be invoked inside a tx meaningfully.
Merge bug23868 into default
Merge bug23868 into default
Report node-specific details separately
Oops.
Add a (currently stupid) test to ensure we serialise the add / remove bindings calls properly.
List permissions differently
rabbitmqctl report layout tidy
Merging bug24137 to default
Merged bug24089 into default
These "--novalid"s are less meaningful in the context of bug 24137 since you need to have docbook installed to get this far and so can't trigger the bug. But it can't harm to put them in, and it's possible that there's some other bug I haven't thought of that this fixes.
Remove more pointless namespaces.
Merge with default
Merged bug24042 into default
Optimisation while listing consumers
Merge with default
Merge in default
Merge in default
Merge in default
Merge with default
merge with default
Merge with default
Move #upstream{}-munging into rabbit_federation_upstream. This increases the amount of pget copies in the world, but we'll deal with that soon.
cosmetic
Correct .hgignore file again
Correct .hgignore file again
Correct .hgignore file again
Correct .hgignore file again
Correct .hgignore file again
Correct .hgignore file again
cosmetic
Correct .hgignore
Correct .hgignore
Correct .hgignore
Correct .hgignore
Correct .hgignore
Correct .hgignore
Rearrange exports
Add headers
Merging bug24079 to default
Post bug 24079 update
Merging bug24079 to default
Merging bug24079 to default
Merging bug24079 to default
Merging bug24079 to default
Various simple / uncontroversial cleanups.
Merging bug24079 to default
Merging bug24079 to default
Merging bug24079 to default
Merging bug24079 to default
Merging bug24079 to default
Merge heads
rabbitmqctl report listing consumers more consistently
Adjust construction of app file
In light of bug21782, solve the asymmetry problem the other way.
This is not great, but necessary to run the tests on something other than an Optiplex. Still faster than many other test suites...
Merging default into bug23554
Remove rabbit_consumer.erl
Rollback info_all renaming
merge heads
rabbitmqctl report
Don't validate against the docbook DTD when building the usage erl - we don't need docbook installed to build the server, but without this --novalid we instead go to the internet if docbook is not installed, which can make building flaky.
What on earth were those namespaces imported for? They're not used for anything, and they help the build to fail if we can't contact docbook.org.
Bit rough edged version of add / remove mirrors, but I had it half done...
Remove hidden ignored update bits to make sure they don't interfere with jQuery queries later.
renaming refactor
cosmetic
Various clarifications + list of enhancements.
cosmetics - write funs as a single line when we can - define funs in the same order as the exports - only use section marker comments for clearly delineated sections,   and keep them quite coarse grained - other minor tweaks
Clarify provenance of and changes in pg2_fixed
less will
Merge bug 24136.
Remove R13ism
Merge bug 24133
Explain a tiny bit more
This is needed now.
Nicer mirroring bit of the form. Generalise the way form controls can hide each other.
R14B03 moved hostname and ip_port out of inet.hrl and into inet.erl where they export_type'd them. This is a backwards incompatible change. Thus there's little alternative to bumping the erts requirement for using specs
Show "+1" rather than "1"
Add explicit UI for all current arguments. The x-mirror one is not very good though.
Assert equivalence of x-message-ttl
Work in gm table creation as part of the normal upgrade steps, and then assume that it'll continue to exist
enforce equivalence checking of x-mirror arg
correct use of nodes()
Merge in default
Make params and known-arguments look like the same sort of thing, and show everything collapsed in the list views.
Not quite sure how I managed to get that quite so wrong...
Enforce checking of x-mirror arg
Minimal support for mirrored queues.
Merge in default
Another visual tweak.
Merge default into bug23554
Use the interval to correct to an idealised rate for the test.
Permit dropping nodes of mirrored queues. This turns out to be much much messier than I'd hoped as the principle problem becomes ensuring an add after a drop works. Normally, an add would only occur on a node that has not seen said queue before: if it had, in a previous lifetime, then the booting of rabbit would have ripped out any locally stored files regarding that queue. But now this step may be missed. Having tried many different approaches, the simplest became expanding bq so that the shutdown reason is exposed to the BQ. Thus both slave and master can then detect that they're being dropped, and, in the case of master, it can convert a bq:terminate to a bq:delete_and_terminate. Every other approach I could think of turned out worse.
Reveal the interval over which the rate was counted
Visual refresh.
These should have been if (vhosts_interesting) since it was invented.
Truncate huge bindings lists too.
Merged bug24069 into default
Merged bug24107 into default
Whitespace
Merged bug24129 into default
Merged bug24129 into default
Add pointer back to bug given the value of the additional commentary in the bug
Update comment
Fix the remaining memory leak
Consistently Use Sentence Case Everywhere. Curiously I had mostly managed to be consistent within individual files, but was inconsistent between them.
Expose tracing enabledness in mgmt.
Add a "tracing" column to the list_vhosts command. A bigger change than expected, as vhosts didn't have the standard info item infrastructure.
Updated documentation, and in the course of writing it, thought up another scenario I wasn't coping with. Fixed. However, not all documented causes of memory leaks are yet fixed in the code
Remove debug log entries
master must broadcast, esp if it doesn't know about the sender. Also rip out the varying priority run_backing_queue* stuff as it turns out it's not needed
Since we should not normally see warnings now, let's zhuzh them up.
Rename variable
Introduce variable
Exclude mochiweb from the xref check.
Inline exchange/1, multihead publish/7
Rename and move things a bit
Abstract the types
Don't display it as binary.
Update docs.
Actually use the exchange we have. Not very scientifically measured, but this seems to knock about 1s off the time to to "time MulticastMain -x 2 -y 0 -z 30" with tracing on (from ~82s to ~81s for me).
Fix dumb mistake.
Critical bug fixed
--
That's an awful lot of work to solve a potential memory leak...
Switch to hard coding the exchange name.
Fold publish and republish together.
Optimise looking up trace exchange and message construction.
Rewrite the rabbitmqctl interface. Define trace_exchanges in rabbit.app.
...and the other bits I forgot.
BQ:idle_timeout => BQ:timeout
merge bug24118 into default
Merge with default
Merge bug24106 into default
Make log messages prettier
some more inlining
cosmetic
fix error handling and construct xname on init rather than every message I have no idea why that 'catch' was there. There is nothing to go wrong during publish except the exchange may not be found. Which the 'catch' wasn't catching since that is just an ordinary {error, not_found} return. Cue explosion. So now we handle that and print a nice error message. Also, there is no point constructing the exchange name for every message; doing that once, on init, is enough. That has the further advantage that now the implementation matches the spec (rabbit_exchange:name() is a qualified name, not a binary).
inlining
sometimes clarity trumps performance I can't actually detect a difference in performance here, though I'm sure the new code is slower than the old one.
funs are too expensive here. Ouch.
Further refactoring
Refactor.
merge bug24117 into default
Slightly tighter specs, tidy imports.
Be more assertive. Slave is the equiv of amqqueue_process, so it's ok here to know the message is actually a #basic_message and thus contains an id which can be matched against
Merge in default.
Header 'heartbeat' renamed to 'heart-beat' throughout, as per Spec.
Document the patched stomppy.
Make slaves explicitly monitor the master (see comments to come in bug)
simplify
Merging default to bug23554
Merge bug24122 into default
Merge bug24116 into default
BQ:idle_timeout => BQ:timeout
Correctly rebuild stomppy in the event of patch changes and/or clean makes.
Typo
Fold refresh_config in with (un)set_env, abstract into rabbit.
Rename
rabbitmqctl refresh_channel_config
Refactor a bit and push more work "below" checking the state. This reduces the cost from 2.3% to 1.1%.
Only check the application environment when a channel starts up.
And now, after testing it, actually make it work by correcting one of the counters...
(bug23890) Get rid of the "-status" everywhere.
(bug23890) Move this from the shovel repository, and debitrot.
Merge in default
whitespace
Well it's no shorter, but it closer matches the original
BQ:needs_idle_timeout :: State -> Bool ==> BQ:needs_timeout :: State -> (false | idle | timed); which better reflects the different needs
Do not read the msg surviving dropwhile1
Oops.
Resurrect the idea of logging the mgmt location at startup. Don't try to build a URL though, as the old way wouldn't work with some options (e.g. ip) and it would be a right pain to get right. I do wonder if rabbitmq-mochiweb should be doing this though.
In fact, you know what? Let's never return pids, nobody ever uses them for anything. We now never invoke pid_to_string or string_to_pid, and the code is slightly simpler.
Alternative approach: don't cache the pid -> string mapping, but keep pids as pids inside the mgmt DB.
Merged in default
Improve logging information
Eliminate a race which was found to allow promotion to be non-atomic
Another go: this time, work on both BSD *and* GNU sed. (Curses under breath.)
Fix for non-GNU sed.
Update now that things have been merged to default
Add upgrade step to add the mirror pids to the queue
Ensure that when a slave gets promoted, it requeues msgs in the same order which they were fetched
Add a sleep, to avoid tight spinning
Not especially happy with this but can't think of how else to solve this. If the queue has mirrors then you may well find that during death you try to contact a dead queue process, because the mnesia table is yet to be updated. In such cases, loop.
Merging default to bug23554
merge bug24004 into default
Closer approximation to English
Extra words
English
Added origination comment
merge bug23939 into default
...and this works when we don't make run-in-broker.
Unify the three management contexts.
Remove extra mgmt contexts. Fix contexts where the prefix is "". Remove register_authenticated_static_context.
Correct specs
Don't try to make links, deal with mochiweb options better.
Don't attempt that hostname thing, clearly dubious.
Merge in default
Merge in default
Merge in default
Merge in default
Merge in default
Merge bug23833 (Support multiple instances of mochiweb)
Merge bug23833 (Support multiple instances of mochiweb)
Only decode the request once. I'm not sure this is any more elegant, but...
Fixed call to validate_message
Check for no_default_listener too
Fix tests up for different implementation of check_contexts
Merge in default
Silence warnings.
Cosmetic
Merge with default
shrink
Don't blow up in the case we haven't received stats for a queue yet.
Minor corrections
Correct use of that form of context spec.
Use longer names for the management contexts
Account for the nested-pair variety of context spec.
Use longer context names so to be a bit less likely to clash
Cache the results of rabbit_misc:pid_to_string/1 in the process dictionary.
Resurrect bug24069
Merge in default
Merged bug24082 into default
Merged bug24070 into default
Use an ordered_set for our ETS table.
Update README with the new configuration and API
Merge in default
Tidy ups as proposed in bug 23833 comment 58. Mainly just being consistent with names, and avoiding some unecessary (repeated) work.
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Move .app to .app.in, remove module list
Merging bug23899 to default
Merging bug23899 to default
Merging bug23899 to default
Merging bug23899 to default
Merging bug23899 to default
Support multiple source dirs
Support multiple source dirs
Split out the amqparams to detect module and type only when we need to
Cope correctly with bad vhosts too.
Refactor.
Generate the list of modules in amqp_client.app.
If we see a list of modules there already, trust it.
Use erl files rather than beam files to generate the app module list.
Fix racy bug in tests as reported by Simon. Bug created in bug24037 I suspect
Merging bug23559 to default
Merge bug20589 into default
Indentation
Refactor a bit.
Silence warnings
bash-complete the short forms of arguments.
track buffer size explicitly, resulting in a small performance improvement Also rename recv_length to recv_len for consistency and brevity.
refactor: extract commonality between tcp and ssl recv ...and add a guard, for consistency with other funs
(WIP) revert the columns-passing-down-into-the-db thing, but never retrieve consumer details for lists - that's really expensive; the fine stats is much less so. Also refactor a bit.
Pick bits out of propslists when descending columns. rabbitmqadmin list queues message_stats.publish_details.rate both works and is efficient now.
Oops, another refactor-after-test typo.
Update docs.
Join column names with ".", "_" makes hardly any sense.
Send requested columns to server
Simple test, and fix the bug it found.
How did these tabs get here?
Allow specifying columns. In most cases we filter out uninteresting things just before JSON-encoding, but for a couple of things that are semi-expensive in the first place (message_stats, consumer_details) we filter out at the rabbit_mgmt_db:get_* stage.
Resurrect bug24070 at correct point.
Merging bug24067 to default
Merging bug24047 to default
Merging bug23831 to default
Keep consumer state as a singleton list, basically to act as a Maybe, to combine nicely with list append in the erlang:apply call
Figure out what extensions are installed by looking for the behaviour rather than requiring them to register. Make the main mgmt plugin into an "extension".
Inline start/2.
Make the main dispatcher into a dispatcher module. Ensure that it doesn't matter what order the dynamically loaded files end up getting loaded in.
Merge heads
Doc
fixed README
first import
So this is a no-op, but still...
Define a behaviour.
Extensions should not just be a list of strings.
Dynamically load extra Javascript, allow additions to the client side dispatcher.
Serve static files from the extensions too if they exist.
Let's call these extensions, bit less ambiguous.
Function to format records generically.
Allow other plugins to contribute to the dispatch table.
trace_exchange -> trace_exchanges
Allow these badges to get bigger when you have e.g. 10M messages queued. Looks right in Chrome and Firefox, and is legible in Internet Explorer.
Merge from default
Augment queue / exchange lists *after* filtering by vhost.
lists:sort/1 is much faster than lists:sort/2.
80 columns.
Remove pointless diffs from default.
This use of rabbit_mgmt_util:with_decode is very wrong - it enforces the presence of routing_key and arguments (which it shouldn't), but *after* the binding is created anyway! Fix this, and improve tests to match.
Fix up documentation for publish / get, add warnings.
This looked like an error and confused me.
App name has changed
Merge in default
Merge bug23568 since that's been merged for a while.
Oops
Fix from previous default merge.
Fix help msg
Merge bug24043
Merge in default.
Merge in default
Silence a warning, remove the password from the wm context as we no longer need it.
Actually get the day right. Ouch.
I cannot BELIEVE that anyone was so UNPROFFESSIONNAL as to OMIT these TYPES.
Remove dead code.
Updates for the new Erlang client API.
Updates for the new Erlang client API.
Add tests for bad username / password, and actually pass them...
Separate out different types for network and direct connections, don't check the password for direct ones.
Separate out different types for network and direct connections, don't check the password for direct ones.
Separate out different types for network and direct connections, don't check the password for direct ones.
Merge with default
Bump sleep times during tests to 100ms.
Precisely provide the same api as file:write_file/2,3
Merging default into bug24004
Merged pull request #1 from iconara/master.
Created an empty include dir in order for make package to work
Tweaked README
Added README
Initial commit.
optimise common case that buf contains a single binary This turns out to improve performance *a lot*.
Merge bug24060 into default (init script rotate-logs action is broken)
Rotate logs uses ctl, not server. Also die if ctl doesn't exist or isn't executable
As reported, README was out of date due to recent application renaming caused by bug 23568
fixing amqp_gen_consumer specs and doc
merging in from default
refining amqp_gen_consumer
merge bug24009 into default
Merge with default
Merged bug24037 into default
App name changed.
Merge default
Merging bug24050 to default
Merging bug24050 to default
Merge default
Oops.
Symmetry.
Symmetry, specs.
tiny refactor
Oops
Merge in default.
Merged bug24049 into default
Allow the erlang client to remain ignorant of rabbit_event.
Don't mention rabbit_event.
Simplify tap_trace_in/out, don't make msg_to_table return a tuple, refactor, cosmetics.
Node definitely has rabbit on it. self() doesn't.
(new head of existing branch bug23831). The direct client links to the rabbit_channel. This is the first time that we have a process linking to the channel which is not the parent of the channel. Consequently, and because the channel has trap_exit turned on, the channel needs to be able to deal with EXIT messages that arrive for it which are not from its parent
Back out bits of bug23550 which have broken the erlang client
New build system
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Merge bug23568 to default (build system rewrite)
Fix error handling.
cosmetic(ish)
You know what? I don't think these even have a good excuse for existing.
Slight further simplification
Fix tests
Fix tests
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Application names: rabbit_foo -> rabbitmq_foo
Forgot to undo these bits, and the boot sequence has been changed, so debitrot
sync_binding -> sync_route, simplify.
Oops.
Simpler remove_for_source.
Cosmetic.
-sync_binding(Binding, SrcDurable, DstDurable, Fun)
Undo merge from bug24038 which has now become INVALID.
Don't blow up when a queue process goes away.
Get rid of the consume, use a get instead. Remove the try / after.
Ensure the connection and channel always get closed.
Build system changes.
Cosmetic.
Remove user and consumer tag.
Be more specific about what we catch.
Merge bug23617 into default
Merge from default
Merge from default
Merge from default
Merge from default
Merge from default
Merge from default
Merge from default
Merge from default
Merge from default
Merge from default
Remove from all forward routing tables in remove_for_source.
Cosmetic.
Get rid of that "Bin" suffix, it was inconsistent and strings are generally binaries in the broker anyway.
Cosmetic.
Less magic.
Add user to trace messages.
Convert properties to table in a slightly smarter way. Also refer to the result as "properties" not "headers" since that's what it is.
Merge in default
Remove delivery tag.
Only copy routes that aren't already there.
Merge in default.
Merge bug24039 (attempt to add unavailable binding not handled properly).
Work on documentation of ha
Work on documentation of ha
Merging default into bug23554
Detect available memory on OpenBSD. While there, rename freebsd_sysctl() to sysctl(), since sysctl is available on number of different platforms.
correct error when attempting to stomp on an unavailable binding ...and fix the specs too plus some cosmetic shuffling
tiny refactor
cosmetic changes and minor tweaks to rabbit_binding:{add,remove} - align 'add' and 'remove' structurally, with the isomorphic final   phases extracted into helper funs - call 'read' instead of 'match_object' to check for binding presence   in 'remove' - cleaner and possibly slightly more efficient
merge default into bug24009
cosmetic: update comment on table_filter
remove duplicate check rabbit_misc:table_filter already filters out elements which have disappeared.
merge bug24031 into default
shrink
Additional hilarious witticism
Some initial HA design documentation
Don't cons inside the tx, prevents us from copying the accumulator on the way into the worker pool at great cost.
Merge bug23973
Merge bug 23628 and update for API changes in bug 23939.
Oops.
Merge in default
Merge in bug24009
Merge in default.
Specs.
merge bug24006 into default
merge bug24006 into default
merge bug24006 into default
Merging bug24038 into bug23554 and hook slave up to the new apis. Overall, it doesn't save that many lines, but it allows the slave to not duplicate -defines which were also in amqqueue_process, which is well worth the effort
Abstract out mainly timer maintanence functions
Keys not key.
Merge bug23550 (show direct connections in mgmt)
Merge bug23550 (show direct connections in mgmt)
Merge bug23550 (show direct connections in mgmt)
Merge bug23550 (show direct connections)
Given we escape this now, don't try to italicise it (always was a dubious idea).
cosmetic
Cut down on reads.
Merging bug24039 to bug23554
Improve comment, minimise difference from default.
Go back to add_binding.
Extensions to BQ
Callbacks should come after mnesia writes.
some notes
misc:table_map -> misc:table_filter.
Sod it - transactions are too hard to do in mirror queues so don't bother. I know how to do it, but it's horrifically messy, and the margin is too small
cosmetic
Well, getting closer. But it's not done yet, and I may have discovered a rather fatal problem with the whole idea of supporting txns in mirrors anyway in that because of the coalescing going on, there is absolutely no indication of when the BQ finally completes adding the msgs to the queue. Thus the only solution here might be to ban coalescing in this case
Well txns are still only half in. But I want to go home.
Added tag rabbitmq_v2_4_1 for changeset 2561c854b8aa
Added tag rabbitmq_v2_4_1 for changeset 33e26524a993
Added tag rabbitmq_v2_4_1 for changeset 7dac290d41a7
Added tag rabbitmq_v2_4_1 for changeset fe877493f8bc
Added tag rabbitmq_v2_4_1 for changeset edc56c6f4a10
Added tag rabbitmq_v2_4_1 for changeset a5707565f6f0
Added tag rabbitmq_v2_4_1 for changeset 438561005dd5
Added tag rabbitmq_v2_4_1 for changeset c9fc28db6777
Added tag rabbitmq_v2_4_1 for changeset 0b1644476347
Added tag rabbitmq_v2_4_1 for changeset 8cd73aad181a
Port and rewrite the manpage changes.
changelog entries for 2.4.1
Tracing has very little to do with rabbit_log, let's make it its own module.
Cosmetic.
Cosmetic.
This seems to work fine. FIXME denied!
merging in from bug23117
merging in from default
Merging bug24033 to default
Do loop detection earlier.
Grrr. non-maskable-interrupt half way through implementing txns
Reinstate trap_exit in channel.
make ssl work ...and handle socket errors
Add BQ:discard, correct BQ:is_duplicate, finally fix the last bits of immediate delivery, though hopefully in a way which has not leaked through to the lower layers...
In a cluster it may be useful to know which node things happened on.
Don't expose queue message ID.
get heartbeat monitor to pause when it should On 'default' we kick off another prim_inet:async_recv *before* handling the frame we've just received. This is done for performance reasons - essentially we are reading ahead - and leads to the following sequence of events:
Make the generated messages somewhat more AMQP-ish by mapping payload to payload and envelope to headers. Thus lose our new mimetype.
Move the inbound tap to before routing but after validation. Remove queues from inbound tap.
Validate_msg becomes is_duplicate, which makes much more sense
Merging default to bug23554 (minor debitrot)
Tested debitrot; works again.
tweak
table_fold -> table_map
merge default into bug23559
Damn priorities.
Acc may be empty.
Matthias prefers this.
Refactor a bit, and only check rabbit_durable_route if the binding might be durable.
Check the route still exists.
Check for presence of binding in rabbit_durable_route on add.
No longer needed.
Split back up into lots of little txs.
In progress tweaks to VQ to support returning the dropped message in dropwhile
Store DLE arg in the queue state
Merge with default
Whitespace cleanup
Add argument checking for x-dead-letter-exchange
It is not an error if the file does not exist
Performant means something else entirely
Added windows service description
Merge in default and untested debitrot.
Merge bug24017 into default (again)
UTF8strings come back as binaries.
Merged bug24017 into default
merge heads
Merge in default.
Recover and invoke callbacks for bindings in the same Tx.
Recover all the bindings in a single tx.
Revert bc5bcde98866
Merge bug 23998 (prelaunch dies with "unexpected epmd error: address")
Merge bug22005 into default
Remove gratuitous export.
Merge bug24012 into default
merge default into bug24012
Add note about vhosts.
Duh.
Invoke all the create and add_binding callbacks in the same tx.
rabbit_misc:execute_pre_post_mnesia_tx/1.
Split up sync_binding.
Cosmetics / specs.
Merge bug 24020 (rabbitmq-env warns if rabbitmq.conf exists)
Reduce duplication.
Actually DTRT. Note that this knocks out the is_binary/1 check introduced in 22bf9ebcaebf; however despite that changeset's comment this does not seem to be needed with R14B (or any other release I tested).
Warn about config only if new config is absent
Merging bug23835 to default
Merging bug23965 to default
Tweak comment after rereading it.
Describe the problem. That's half the battle, right?
fixing tests in source tarball
abstracting out unit tests
attempting to fix false user creation in test makefile
merging in from bug23117
merging in from bug23965
creating bug branch
merging in from default
merging in from bug23628
adding documentation for exit reasons in amqp_channel and amqp_connection
Merging bug23628 to default
Merging bug23628 to default
Merging bug23628 to default
Merging bug24016 to bug23628 (QA+)
fixing discrepancies between exit reason in the two types of connections
API change
Merge bug 24009 into bug 23939.
cosmetic
cosmetic
merging bug22952 to default
Merge bug24006 into bug24009.
Fix tests again.
fixing simultaneous channel close bug; adding test for it
Fix tests
QAish updates.
cosmetic
inlining
Small fix to avoid warning from erlang compiler.
Fixed bits/binary typo in private functions.
Apply patch to remove dependency on binary:split/2
Merge bug23997 (R12B compatibility broken due to gb_trees:map R13ism).
Cosmetic.
Another read/1.
use mnesia:read/1 instead of read/3
Revert a605a7bde03c, of course that doesn't make sense, what if the link restarts, the bindings will be wrong.
'shutdown' is only treated specially if the child is a supervisor (previous behaviour was actually confused on this front). Some minor renaming, reordering, and inlining
Unlink before exit
fixing bug related to subscribing to the same queue at the same time from two processes
Merge bug24007 into default
Oops, missed this one.
Revert to trailing whitespace et al to reduce diff to Erlang's supervisor
Thread through bindings from start callback, get rid of the last use of rabbit_binding:list_for_source.
API changes.
Merge bug 24009 into bug 23939.
rename
greater than
Well it's almost hypnotic in its ugliness. Pending nicer fix from eldorado
Make things more symmetrical. This adds extra rows into the semi durable table for bindings from transient to durable exchanges, but since we recover bindings based on exchanges and queues recovered this should not have a visible change.
Dest -> Dst
Merge bug 24006 into bug 24009.
Use names, not exchanges / queues.
fix some R12B-5isms
Introduce rabbit_semi_durable_route to kee bindings between transient exchanges and durable queues alive if the durable queue is down.
Slimmer gatherer termination
Show vhosts in the users list, users in the vhosts list, and warnings on both.
Recover e2e properly.
Fix tests.
Boot step change.
Boot step change.
Unify recovery into one boot step, based binding recovery on the queues that have been recovered.
merging in from default
reverting previous changes; treating {shutdown, _} exit reasons the same as normal in supervisor2
adding links between consumers and channel; other tweaks
Merging bug24008 to default
Oops.
merging bug23968 to default
Only recover bindings that are to exchanges or to queues that are on this node.
Change exchange type API to not distinguish between creating and recovering, and to allow recovering bindings. Recover bindings when needed.
fixing race condition bug related to calling subscribe in parallel; refining amqp_gen_consumer
Don't transform markers when upgrading messages
updating documentation for the consumer mechanism
adding amqp_direct_consumer and amqp_selective_consumer implementations; fixing tests
Only recover exchanges and bindings that need to be recovered.
introducing initial amqp_gen_consumer
Correct comment.
Call the field next, not serial.
Make sure Attempts does not go negative.
Add space
Close direct connections.
Mark direct connections as direct.
Mark network connections as network.
Make rabbitmq-server compilable.
merge bug23993 into default (OCF script is broken when specifying an alternative config file)
Only show client properties if there's something to show.
cosmetic: put 'rabbitmqctl wait' code in the right place
Shutup, dialyzer
cosmetic
fixing error reason for hard error in direct case
cosmetic
adding reporting exception to supervisor2
fixing a case clause; forgotten error reason
cosmetic
simplify: rabbit_misc:const/1 and thunk/1 types are identical get rid of former
consistency
cosmetic
test refactor: mock the writer only once
remove R13isms
shrinkage: one dict is better than two
Finishing touches.
updating use of amqp_client exit reasons
cosmetic
Matthias doesn't like mentioning the port number.
Slightly better explanation for some epmd errors.
updating use of amqp_client WRT exit reasons
cosmetic
changing the more usual exit reasons to {shutdown, Reason} for connections and channels
Avoid using file:write_file
merge default to bug23554 (minor debitrot)
err...
Dialyser
Go back to serial/1.
Slightly more doc.
API change.
Don't attempt to provide a serial for the x deleted event, we weren't doing it right anyway. Create the table entry at exchange creation time.
english
Improve documentation of BQ concerning the issuance of confirms
Fix Matthias' deliberate mistake.
index the serial dict by XName rather than X ...which should be more efficient
refactor: make add_notify do what it says (and no more)
cosmetic
refactor: move all serial manipulation code into 'exchange' module
only look up exchange type once ...and fix a bug in the XT:create invocation - the serial wasn't being passed through.
merge default into bug23939
cosmetic
merge default into bug23939
tweak: only invoke rabbit_exchange:callback when absolutely necessary
more sensible order of exchange exports
cosmetic
Cosmetic: move serialise_events.
Comment.
Cosmetic. I'm sure at some point Prev was used for something.
Cosmetic.
Better abstraction.
Merged heads. Need sleep.
Cosmetic.
Merge default into bug23968
Added tag rabbitmq_v2_4_0_1 for changeset 6d03c46679d8
Fix on_node_down.
Simplify a bit more.
Make the tail fun in execute_mnesia_tx_with_tail *only* get executed after the tx, and roll other uses into the tx fun. This is rather simpler hopefully.
API change.
Unify funs, cosmetic.
Oops.
Make serialise_events into /0, don't call it via callback/3.
Fix link startup. Tests all pass again.
Merge default
TODO
Umm, this requires the inets application, and I didn't notice because I was running with mgmt installed...
Make some things a bit clearer.
Use process groups rather than navigating the supervisor hierarchy to talk to exchange pid sets. The restart test fails, but it's Friday night.
Correct test for existance of config file
Merge bug23989 (don't rely on /nodes being available)
Avoid code duplication
Connection death is now indicated explicitly in the exit reason
One head is better than two
Two heads is better than three
Three heads is better than four
Merging bug23831 to default
Yet more readme.
More README.
Don't always apt-get.
Add a README.
Shorten name for alignment reasons.
Only get the nodes list if nodes_interesting (which implies user is administrator).
Set is_admin properly.
Add an example, and use it.
Simple HTTP-based authentication / authorisation for RabbitMQ.
Create a links API.
Merge from default
Fix for API change
removing trap_exit flag in rabbit_channel
cough
Merging bug23425 to default
Turns out it's very important that we do write the schema_version when call mnesia:cluster
Abstract out continuation
ARGH! Trailing line
cosmetic
Merge bug23937 (logs events published in exchange amq.rabbit.log have no timestamps)
Explain
Merge heads
Record all nodes, don't list them when we refuse to start.
Switched to now_ms()
Merge default
Merge bug23972 into default
Only return the queue the second time round and thus don't call XT:add_binding(#amqqueue{}, ...).
Since we use callback() to call serialise_events() this can now return a boolean(). It's probably nicer to add the type here than add another function.
Correct types.
Detect discnodeishness prior to suffering disclessness
bug23939 API changes.
Do an impersonation of the serialisation thing for create / delete. Since the counter resets after delete this doesn't solve the problem but it makes the API cleaner and maybe future-proof.
Symmetry.
This makes tracking down bugs rather easier.
sort out how often and when we do the rabbit:prepare (set up log handlers), and actually make that do the mnesia upgrade.
New decree is that you're not meant to match against ensure_stuff calls
Split up smart_unbind_test and find a way to test that unbinds get sent upstream.
Merge default into bug23425
A bit more general and hopefully clearer.
Merge with default
Refactor tests a bit.
Merging heads of default
Merge with default
Added tag rabbitmq_v2_4_0 for changeset 16eb8a70f895
Added tag rabbitmq_v2_4_0 for changeset 90e5ee064b44
Added tag rabbitmq_v2_4_0 for changeset 3a92b1f17c81
Added tag rabbitmq_v2_4_0 for changeset 608231b4ce63
Added tag rabbitmq_v2_4_0 for changeset 5c710d8830ed
Added tag rabbitmq_v2_4_0 for changeset 6ec579a8286d
Added tag rabbitmq_v2_4_0 for changeset e5eb88894c35
Added tag rabbitmq_v2_4_0 for changeset 69d96cc497ce
Added tag rabbitmq_v2_4_0 for changeset 69d96cc497ce
Added tag rabbitmq_v2_4_0 for changeset d797b38939f4
Added tag rabbitmq_v2_4_0 for changeset c4f487dab865
2.4.0 changelog entries for debian and fedora
Somewhat embarassingly that's been wrong for a while. But I'm not sure what test we could use to check it that doesn't e.g. look directly at the upstream bindings. Ugh.
cosmetic(ish): no need to match the return of ensure_*
Renaming bits and pieces for consistency and checking a few more return values, plus other minor fixes
The previous commit was buggy because we never added bindings. Add more test to catch that, fix it, and optimise add_binding as well.
Sadly that little badmatch was inaudible due to the continuous barrage of explosions.
Reduce use of rabbit_binding:list_for_source/1 by keeping track ourselves of where we're at.
Merging default into bug23554
Enforce a bunch of returns
merge bug23730 into default (Make Debian packages depend on "erlang-nox" metapackage)
merge bug23730 into default (Make Debian packages depend on "erlang-nox" metapackage)
This warning is not really needed any more.
Switch to erlang-nox.
Merge from default
clarify documentation (thanks Emile)
Show warnings when users or vhosts have no permissions.
Introduce batching (again - same diff as 5f7d8d07f94f)
Add test
Better name, vertical space.
When upgrading a secondary node we call init_db twice: once early to force a cluster rejoin (at which point we are not ready to do local upgrades, e.g. fhc is not running) and then once at the regular time. Deal with that.
Don't try to determine whether a backup is needed before doing anything, take it as needed. This inverts the backup and the lock file - the backup now comes first and the lock file is only used to defend apply_upgrades/3.
Oops.
maybe_remove_backup is safe when returning version_not_available since we would not have taken a backup in the first place. However, this is not exactly obvious, so let's not do that.
Merge heads
Various QA tidyups, and stop exporting the backup / remove backup functions.
serialise_events/1.
serialise_events should take an exchange really.
Simplify.
Rename rabbit_federation_exchange_upstream to rabbit_federation_link.
Slightly smaller, quite a lot more correct.
Merge with default
Merge bug 23963 (rabbit_exchange_type:delete/3 only called for non-autodeleted exchanges)
Merge with default
Well I thought =~= was beautiful and appropriately approximate to ==
Ensure that we use Mnesia's ordering for add / remove bindings.
Remove maybe_unbind_upstreams and push its logic into the exchange processes
Probably makes sense to remove the serial number on delete.
Rip out dedup cache
Rip out msg_store:release
I think this is tidier.
Take a single backup before any upgrade, remove it when we're all clear.
Merging default to bug23554 (minor debitrot)
Merge heads
Ensure mnesia is stopped for the local upgrade backup.
Merging bug23573 to default
Merge default
removing debug message
merging in from default
cosmetic
Not 100% beautiful, but this gets serial ids into the hands of add_binding and remove_binding.
Merge bug23962 (clean up connections)
Can't call =~= with non-version args, thus shuffle things around a bit. End up saving a line.
Improve symmetry: if we write the running_disc_nodes on rabbit shutdown, we should nuke it on rabbit startup. This then means that the prelaunch thingy is always run with the previously_running_disc_nodes file present. I believe this makes no semantic changes, but the improved symmetry is worth having
rabbit:stop() is not always called when rabbit is stopping. E.g. q(). doesn't invoke rabbit:stop/0. It does invoke rabbit:stop/1 though.
Make code prettier
Make sure we record if an exchange is actually deleted...
merge bug23942 into default
merging bug23929 to default
Ensure connection and channel always get closed even if an exception is thrown.
Merged bug23373 into default
and again, _don't_ record confirm on immediate if we don't deliver...
If we have version_not_available, then it makes sense to have version_mismatch, not schema_mismatch
renamings
incorporate qa feedback. The version.erl api is rather nice now: the version itself is entirely opaque - whilst it can be read, there's nothing provided to decompose it at all.
ordering
Fix tests.
english
Abstract and rewrite schema_version handling functions
Merge from default (no-op but to cover the bug23263 transplanting).
Cope with name being set to unknown.
Merge in default. Not sure what was happening when I thought it didn't work.
Revert 678b8f63eff1 - disabled textarea only works well in Chrome.
Adust Makefile again to correctly build certs for ssl tests
Undo afb33cb05e03, since direct connections are usually used for adapters and it's odd to see the Erlang client properties there (and in the case where they're not it doesn't really tell us much anyway).
Adapter info for STOMP. This is branched from 2.3.1 since default is not working for me ATM.
Don't duplicate name.
Merging default into bug23425
Fill in protocol and name separately.
Merging bug23263 to default
Merging bug23263 to default
Fix client properties info item.
cosmetic
Don't show facts that we don't know or aren't applicable.
Ensure connection and channel always get closed even if an exception is thrown.
Merged default into bug22005
Correct Makefile to run ssl tests.
Emit the closed event. That helps.
Say "ConnPid" everywhere.
Silence warning
How could I forget those joyous uses of channel in tests?
refactorings
minor refactor of test
whoops
Try to make this branch vertical space neutral. Sadly we can't do this by planting a vertical space tree.
Use the correct connection pid for exclusivity (and error logging).
A different and largely opposite version of 'never'...
Transplant reader_pid vs connection_pid work from bug23350.
Transplant reader_pid vs connection_pid work from bug23350.
Made gm do batching of messages. This has an astonishing performance impact: if every broadcast msg to the gm results in network activity then performance is low - presumably serialisation of, and network broadcast of small messages is very inefficient. By batching broadcasts and then sending many on a timer, performance is much much higher.
Use a disabled textarea to enforce wrapping.
Wrap base64 encoded messages at 120 columns.
Oops, important difference.
This does not need to be exported.
refactor
Unify the handling of bad response codes between with_req and sync_req.
Merge bug23945 (unicode in rabbitmqadmin)
Merging default into bug23554
Fix deps for rabbitmqadmin
don't record anything confirm-related for immediate unroutable messages
merge bug23949 into default
cosmetic: more consistent naming of constants
avoid sub-binary construction of tail and some cosmetics
cosmetic
cosmetic
inlining and some minor refactoring
initialise #connection.capabilities - not strictly necessary, but good form
Couple more fixes.
Have a separate idea of reader pid and connection pid in the channel (since in the direct client they're different things). Now direct connections and channels match up in mgmt.
merge bug23948 into default
cosmetic
Various cleanups / fixes.
Restart bug23350. This sort of works, but still has the problem that connections and channels do not line up.
Read segment files in one go
Merge in default; partial debitrot.
Merge bug23692 into default
die() should do the same as output().
When stdout is not a TTY (e.g. redirecting) Python assumes everything must be ASCII. Fix that.
Ensure we hit both branches of fhc:filter_pending
Merging bug23948 to bug23942
fix
Merging default into bug23554
merge bug23946 into default
cosmetic
cosmetic
Start the GC before we rebuild the index, and store it in the State
Change occurences of str() to unicode() - this is enough to get unicode characters working.
Make the table more compact + readable.
Merging default into bug23554
Whoops - add missing catch case which I just hit in testing...
merge default into bug23554
Show web contexts.
"contexts" info item, plus the ability to pick info items.
rabbit_mochiweb_registry:list_all/0
Merged bug23917 into default (again)
SSL support in rabbitmqadmin
Set mochiweb's ssl_opts automatically if it's not set explicitly.
Also, compile.
Typo
Introduce a patch to fix use of SSL on webmachine, and add a little README explaining what all the patches are for since they seem to be multiplying.
more docs
Adjusted test to hit code path
Merge bug23882 (unnecessary coupling and implicit contract between bq and amqqueue_process).
I didn't think that implied that it could *only* be used out of process, but let's make it clearer.
I think this makes it more comprehensible. To me at least.
Maintain an acceptable level of code quality.
Fix
Exit if we don't have a port configured for a listener
Make slaves rejoin on boot
Merging default to bug23554
Make new mirrors magically occur when set to [] and a new node in the cluster appears. Fix various other bits and pieces
merge bug23885 into default
Merge in bug23923 (use passwd field)
Backed out changeset 2ac4e46ab7c0 changing the lock kind may have undesirable effects in a concurrent setting. The efficiency gains don't justify taking that risk, at least not without further investigation.
Merged bug22005 into default.
Add timestamps to error_logger messages
Merged bug23934 into default
Merging default to bug23554
Add ability to dynamically add slaves
Clarification.
Merge bug21647 (allow consumers to be informed of queue death)
Take write lock when counting records, reduces the constant factor during delete
Merge with default
Merge bug21647 (allow consumers to be informed of queue death)
Truncate message payloads in the web UI so as not to crash the browser...
Merging default to bug21647, again.
Merging default into bug23554
Unify with_decode and with_decode_opts. This has been overdue and will make the next bit easier.
Do something simple to defend against non-UTF-8 headers. This is not round-trippable, but hopefully people doing binary headers are quite rare.
Offer a choice of encoding on get.
Remove erroneous loss of state. Whilst this now can cause a memory leak, it only affects the master, the dict is not particularly rich, and it'll only be left with entries for dead channels (most likely channels that were on the old master). Also, we might very well be able to address this through other means
discovered another entire class of interleaving opportunities I've not considered. Fortunately, the fix turned out to be simple. ish.
A bit of explanation.
Allow publishing from stdin.
We were using "payload" with two quite different meanings there. Keep the one which AMQP calls payload, rename the other to "upload".
Allow saving payload to a file.
Should probably do that.
Make creation of slaves synchronous. This means we are guaranteed on queue.declare to have all slaves up by the time of the _ok
A bit more abstraction.
Allow setting payload_encoding.
It was right before...
Inline adjust_hibernated_memory_use/2.
Go via the delegate mechanism, so that we don't generate a while bunch of cross-cluster traffic doing this.
Don't prefix dispatch routes, as this is now done automatically by rabbit_mochiweb:makeloop. Use different contexts for each registration, so they don't overlap.
Give the path prefix and the listener to dynamic handlers.  This is accounted for in rabbit_mochiweb:makeloop/1, meaning that webmachine dispatch tables no longer have to include the prefix.
Default entries for all the mgmt contexts
Make Matthias happier.
Get the live memory use for hibernated queues.
or that might be a bit better...
Merge with default
Check configuration of contexts and listeners
There's a chance that might be it
Further improvement of documentation
HTML-escape AMQP arrays, tables etc.
Display payload size.
Merge bug21973 (Make suggested frame-max configurable)
Correct documentation. Code is still wrong though
Revert the previous event-based stuff and just check alarm_handler:get_alarms/0.
fix
Sort out and clean the validate_message stuff. It compiles again now...
Merge default to bug23554, and then a bit
Merge bug23520 (obtain fd limit with erlang:system_info(check_io))
Merge bug23520 (obtain fd limit with erlang:system_info(check_io))
Factual correction.
save 2 lines: no one cares about the result of deliver_or_enqueue, so don't bother with one
just stashing this whilst I fix something else
So node() can be used in guard expressions.
Cosmetics.
merge bug23920 into default
Merged bug23848 into default
Changed "name": "server properties" to "name": "server-properties" in both json files.
remove misleading comment
Merge with default
Fixed bug in the QPid tests. My tests were passing because I used an exchange name in both add and remove calls
Correct upgrade step
Merged bug23917 into default
Merged bug23917 into default
change if to case
close channel when test finishes
cosmetic changes and some inlining
Hide passwords in the web UI
We will get other alarm-related events. Why don't we ignore them instead of crashing?
Work with rabbit-multi-mochi
Merge from default.
Put management in together by default
Merge in default
Start listeners when a handler is registered on them
Tpyo.
Further explanation of file descriptors.
Pin the URL comment.
Fix bad path_entry creation
Tweaked accumulator again - no need to store the entire path
Just some more notes
Use lists:append/1.
Don't change the version file format
save another line. bonus
save a line
Hmm, I'd forgotten than deliver_immediately == false => the msg _isn't_ enqueued
oops
add BQ:validate_message
Floats are bad. Use integer division instead. (via Matthias)
Merging default into bug23554
Try a bit harder to show that the memory high watermark is not the same as the socket, FD or process limit; we can go over it.
Oops, this was renamed a very long time ago. Guess no-one disables memory monitoring.
Show real memory alarm status.
Subscribe to alarm_handler and keep track of whether this node is memory alarmed or not.
Short comment
Use system_info(check_io)/max_fds instead of ulimit.
Removed io:format
Merge with default
Simpler is_new_version/1.
Spec, rename functions.
Variety of small QA-related tweaks.
Explain the tuple here.
Merged bug23916 into default
Fixed a few pattern matching errors - remove actually works again
Merge bug23827
Add a command prompt shortcut that starts up in the right dir. That's pretty lame, but at least it's safe.
merge default into bug23882
Remove EnvVarUpdate
Cosmetic
guids be gone
Merge bug23914 (lack of type for msg_id obscures APIs and code)
Comment describing the why behind the refactoring of remove_bindings
Merge with default
Added exchange name back into count functions. Made path node id key in delete accumulator
Merging default into bug21647
document bq init params
Merging new head of bug23810 to default, which results in a tiny and insignificant change
Merging heads of bug23810
merge default into bug23914
Tweaked delete accumulator key
merge with default
add test for confirms in case of queue death
Merge heads.
Merge bug23575 to default.
merge bug23875 into default
cosmetic
shorten maybe_run_queue_via_backing_queue to something less misleading though arguably still quite obscure
simplify various callback constructions
merge default into bug23882
add missing assertion
cosmetic
nack messages when the first queue dies
make handling of confirms more obvious in BQ API and fix some bugs introduced earlier ...amazingly it all seems to work now
merge default into bug23882
Merge bug23575.
cosmetic
merge default into bug23914
cosmetic
merge default into bug23914
cosmetic - comment indentation
cosmetic
guid -> msg_id in tests
guid -> msg_id in amqqueue_process
#basic_message.guid -> id
guid -> msg_id in vq except for #basic_message
guid -> msg_id
Make sure rabbit_federation_db:forget_exchange/1 actually gets called.
That seemed to break every logging function. Pity.
guid -> msg_id in qi
guid -> msg_id in msg_store and friends
introduce separate type for msg ids and add some auxiliary types for fun params to a) make their purpose clearer, and b) work around emacs indentation bugs
compromise renaming
Added tests for consumer death notification
Undo meaningless whitespace change
beginnings of decoupling bq from amqqueue - parameterise bq with callbacks
Don't keep durability in the state forever, we mostly don't care.
merged default into branch, again
bug23867 merged into default
Merge with default
Cosmetic + comments.
Improve documentation again.
Allow port to be any numeric type.
Reworked binding delete into single transaction again
cosmetic
yet more simplification
simplify
Remove TODO, the issues have gone into bugzilla.
Default to no prefetch count.
So, err, the delivery tag map is no longer needed now that we have a one-one channel relationship.
If we blow up while opening connections and channels, make sure we close the ones that got opened.
Include include directory in webmachine.ez.
Added skeleton ssl_listeners to the STOMP app file
avoid tautology
Name the file properly to prevent DETS auto-repair from blowing up, but handle the error if it does anyway.
move code around and refactor a bit
Clean up upstream_from_table/2 substantially.
shrink code
dafter renaming
Merge with default
Fixed bug with SSL socket setup. Added full SSL communication test
renaming
Merging default into bug23875
Merge bug23893 to default
Remove unused var
Remove URIs from configuration.
Add protocol, fix host.
Further pushback of URIs.
Remove URIs from exchange_upstream.
Make tests independent of any crazy configuration file you may have lying around.
Oops, forgot to add this...
SSL connections largely working. Rough connection test
Always specify rabbit application when looking up ssl_options
It's been a long day.
Handle non-guest connections locally.
Show nested amqp values (e.g. federation forwarding headers) properly.
Damn, I thought of something else.
Configurable retry interval / queue expiry / prefetch count / heartbeat.
It's very substantially wrong.
Rough outline for introducing SSL support
Extracted ensure_ssl and ssl_transform_fun for use by STOMP
Use uri_parser that is now in the broker.
Rename uri_parser as a simple way to avoid clashing with the one in rabbitmq-shovel.
TODO and WARNING
Shorter names, determine if we created something by existence of a special argument.
Remove erroneous documentation
only confirm delivered messages that need confirming
Reset bindings on connect.
remerged in changes from default
Fixed confirms in HA queues. Broke slave promotion. Will fix
Don't show publish form for internal exchanges.
Oops, that table gained a column.
Correct foldr -> foldl
Use DETS, abstract a bit.
Merge with default
First cut of pushing edge cleaning out of main topic bind delete tx
More information.
Tweak.
Tweak.
More doc, focussing on "why" rather than "how".
Documentation.
Merged Bug23847 into default.
Added check for explicit receipt-id on DISCONNECT in test.
Deal with downstream channel going down, it's trivial now.
Fix various bugs:
Split up such that we have one process per (upstream, downstream) combination. This mostly works, but there's something weird with the supervision hierarchy keeping the Erlang VM alive when rabbit_federation_exchange_upstream is not temporary.
confirms still don't work... but it needs sleep to fix this.
Large amounts of debitrotting due to changes to confirms api and such like. Sadly mirrored confirms aren't working again yet... not really sure why
Removed blank line in rabbit_stomp_processor.erl & merged Bug23718 into default.
Merging Bug23886 into default.
Fixed issue in adhoc_convert_headers when AMQP message contains no extra headers
Merge in default.
Removing gm_test from bug23554 which has in bug23727 become gm_soak_test
Merging default into bug23554
Merging bug23483 to default
Don't show the little mini-highlight blob if there's nothing in it.
...and untabify.
Merge bug23580 (Add statistics for 'basic.return')
Merge bug23580 (Add statistics for 'basic.return')
That 999 bugs me.
Show return stats on channel list
Update rabbitmqadmin docs.
Support for get / publish from the command line.
Stricter msg store upgrade
API documentation for publish / get.
Merge bug23727 into default
remove blank trailing line
multiple_routing_keys/0 is not part of the backing_queue
Merge bug23076 (preventing bad_arg error in rabbit_event during shutdown)
Fix delivery mode.
Make a much nicer publish form, and fix a couple of bugs with multifields along the way.
Make responding to a post feel more like anything else. Improve error handling and tests for same.
Additional word
bug23824 merged into the default
Merging heads of default
Merging default to bug23483
bug23799 merged into default
We renamed .conf to  -env.conf.
Make documentation accurate for current API...
default merged into bug23799
No, we don't supply multi man page any more.
bug23278 merged into default
Create log backups in the correct folder on Windows
Make memory alarms work correctly over clusters
Don't update the bindings form...
Merge bug23721 into default
Unused var
Make round-trips between publish and get work. Fix various things to do with JSON<->AMQP structures. Tests for publishing.
Fixed bug in receipt processing when interleaving receipt/no-receipt messages. Increased test coverage for receipts
Merge with default
Reworked tests to check the actual receipts
Merged in default.
Tidied parsing.py again to <=80 byte lines.
Dialyzer typo
Merge bug23881 into default
Merge bug 23858 (Implement try-restart and condrestart correctly in our init scripts)
Removed trailing spaces and tweaked some indentation
Merge bug23877 into default.
English, not American
Merging bug23637 to default
Merged default into bug23483
Don't exclude all those non-RabbitMQ brokers supporting AMQP 0-9-1, SASL EXTERNAL and (soon) e2e bindings.
Support connections with alternate creds, SSL, EXTERNAL.
Merge bug23826 into default
Merged bug23826 into default
Changed README.md to point to the new documentation
Changed test to expect new message text.
The start of a publish mechanism.
Shortened some new lines in parsing.py.
Merge from default.
Create the exchange process at exchange recovery. This means moving the processes / supervisor under the rabbit application, which means making them be able to run in a dumb state when the amqp_client is not yet available, which means splitting code out into a bunch of modules, etc etc.
Rework the way in which consumer death notification occurs to match the java client. Neater now.
merge bug21440 into default
cosmetic
Merge bug 23702 (Let rabbit_mochiweb run more than one instance of webmachine)
Merge bug 23702 (Let rabbit_mochiweb run more than one instance of webmachine)
Use the new forms of rabbit_webmachine:setup/1 and makeloop/1
Change setup to set the logger env variable, so lookups internal to webmachine will at least work. provide convenience defaults.
Removed table name intersection in wait_for_tables and cleaned up whitespace changes
Acknowledge the adaption of webmachine:loop/1
Merging default into bug21647
Merging bug23727 to bug23554
Fixed incorrect binding pattern in rabbit_mnesia
correction of specs
Merge with default
Merging default into bug23727
Wire in gm_tests to rabbit tests
Added test to assert receiving messages in the order they're sent. Other cosmetics
merge from default
rename
consistency
Magic macroification
Bah
We only ever use exchange from the upstream properties.
Fix MESSAGE send frame body fragment assembly.
Added functional tests
Use the setup procedure to make sure webmachine has the correct magic pixie dust in its environment
Webmachine likes to have an error handler set, deep down in its code.
Use rabbitmqctl wait
TODO
Revert re-arrangement of upgrade steps
Don't allow binding, unbinding or publishing loops, by the simple expedient of only allowing things to cross one hop.
better name
better error reporting for failed table integrity checks
Explain password_hash.
Reimplement should_offer/1.
Sender-specified destinations updates
Revert d3fd719c5287 (Remove should_offer/1).
remove redundant calls to wait_for_tables ensure_schema_integrity calls it indirectly anyway
Avert downfall of civilisation (cosmetic)
Ops, set webmachine tracing off by default.
remove redundant function
Tidy the exchange and queue pages a little:
Merge bug23702 heads
Backed out changeset 8b76a3c95a9b
Get more than one message at a time from the queue, allow noack=false (will inevitably requeue messages).
Don't look at the cluster config, it is not trustworthy (for what we want).
Merging bug23657 to default
Make sure logging is working if we're about to actually do something.
Merge in default
Make test return ok on success
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Convert EXTRA_PACKAGE_DIRS use to construct_app_commands
hg add is a wonderful tool.
This is my attempt at HTTP messaging. There are many like it, but this one is mine.
cosmetic and code movement
Merged default into bug23483
renames and refactors
Rename
Merging default into bug21647
Merged in default.
Added test for packetizing on send; added fix for packet end in escape sequence; added get of trailing null with content length.
Ops, this too. 404s get a triple back, not a pair.
Fix reinstatement of wmtrace.  To test, make the return value of a resource {{trace, /tmp}, State}
Merge bug21440 into default (again)
s/IN_BROKER/WITH_BROKER/
s/IN_BROKER/WITH_BROKER/
s/IN_BROKER/WITH_BROKER/
s/IN_BROKER/WITH_BROKER/
Reinstate wm_trace
Merge with default
Use rabbit_webmachine:makeloop/2, so we can coexist with other webmachine instances. This means losing wm_trace, since it uses webmachine_router, which in turn assumes that the dispatch table will be in the application env.
Add rabbit_webmachine, with a procedure for making a fun loop/1 given a webmachine dispatch table
Fix breakage caused by change to Erlang client.
Merge in default
Merged Bug23853 into default.
Merging default into bug21647
whitespace
moving wait_for_tables call in transform
less wait_for_tables
merging in from default
merging bug23812 into default
merging bug23810 into default
merging bug23810 into default
Add erl_crash.dump to .hgignore
Add erl_crash.dump to .hgignore
Add erl_crash.dump to .hgignore
Add erl_crash.dump to .hgignore
Add erl_crash.dump to .hgignore
Add erl_crash.dump to .hgignore
Add erl_crash.dump to .hgignore
Fix "File listed twice" warnings when building RPMs
Obey Fedora guidelines regarding Default-Start and Default-Stop
Debian needs unusual LSB Default-Start and Default-Stop lines
Include LSB Default-Start and Default-Stop lines in init script
Fatal error
Set up the monitor only when we see the basic.consume_ok coming back through otherwise there's a risk of sending out the cancel before we've sent out the consume_ok, which would surprise clients. This is further complicated by the fact NoWait with basic.consume...
Merge in default
Make the consumer mapping store the queues, not the queuenames
Don't use rabbity types.
Merge bug23553 (Present managed socket count in mgmt plugin)
Merge bug23553 (Present managed socket count in mgmt plugin)
Merge bug23553 (Present managed socket count in mgmt plugin)
Merge default into bug21647
TODO
Add forwarding information in a header.
Added content with nulls tests to erlang unittests.
:info instead of :get_x
:info instead of :get_x
untabify
untabify
untabify
merge bug23859 into default
never, ever, rely on the default gen_server:call timeout
Only transmit unbinds upstream if it's the last with the same {Source, Key, Args}.
Merging default into bug23810 (debitrot)
Merging default into bug23810 (debitrot)
In multiple_downstreams_test messages can arrive in any order. Deal with that and stop being racy.
Conserve vertical space.
Changes by ryandesign in r75667 of Macports' SVN.
Delete upstream queues when exchange is deleted. Remove childspec from supervisor when exchange is stopped.
Rewrite the help text somewhat.
package_targets -> package_rules
package_targets -> package_rules
Untabify
merge bug23850 into default
Further fixes to test in parsing.py
Validate args
Add support for consumer death notifications
Add to our own server_properties (informational only)
Fix minor error in test for embedded nulls
Tidy up on DOWN and emit basic.cancel
Another use of with_disposable_channel.
Delete and recreate upstream queue when creating transient exchange
Maybe monitor queues on consume, maybe unmonitor on cancel
Added test for embedded nulls in STOMP MESSAGE body.
Make the static configuration more useful / flexible.
TODO
TODO
fmt_empty --> is_col_empty
Use acks / confirms to make sure we're never responsible for anything.
Hide and show 'return' columns as needed.
cosmetic
cosmetic
Get rid of gen_server2?:call/2 sites
cosmetic
merge default into bug23850
Merge bug2695
Improved performance by unrolling dict:update with nested funs, and replaced use of dict with gb_tree for UQM
Remove condrestart target
Turns out e2e just works, but let's prove that (and note that we're not completely efficient here, we send all msgs that get routed to the exchanges bound to the federation exchange, regardless of whether they get routed anywhere after that).
Merged bug23527 into default
Merge bug23839 (Add capabilities to client connection)
Merge bug23839 (Add capabilities to client connection)
Merge bug23839 (Add capabilities to client connection)
use the correct api written for this purpose.
Contextual help for file descriptors/socket count.
/...consistently.../
Implement try-restart and condrestart as intended
Merging default into bug23657
Aesthetic tweak.
0.9 --> 0.8
This is no longer used.
branch change, whoops
Retain ram-nodeness when upgrading.
Make the error messages more readable.
Fix our idea of which nodes were running when we shut down.
Add support for persistent header
Oops, that's not exported.
s/now_millis/now_micros - so the name matches the function spotted by John
Fixed cosmetics as per comment#6 on bugzilla
(Untested) Record the nodes that were up when we shut down.
bug21741 merged into default
make sure all unconfirmed msg structures use gb_sets rather than sets
Prose
Applied Matthias recommendations from comment#2 of bugzilla with the exception of using gb_sets throughout (will contact Alexandru first)
Rename
Revert where rabbit:prepare happens.
Merging default to bug23839
Merge default in
Merge bug23828
Merged bug23840 into default
Merged bug23840 into default
Bless the mgmt with the ability to cope with nested tables
Minor change to default config
Merge in default.
DISCONNECT now triggers connection and channel shutdown. Receipts for DISCONNECT are sent after this has happenend
Rename *_app.in to *.app
Rename *_app.in to *.app
Rename *_app.in to *.app
Rename *_app.in to *.app
Rename *_app.in to *.app
Rename *_app.in to *.app
Rename *_app.in to *.app
optimised removal of confirms in queue deletion, by introducing a dict of qpid->msg_seq_nos to enable fast lookup of all messages for a particular queue
TODO
Rough work on DISCONNECT fixes
Aesthetics
Fixed issue with multi-confirm and added support for TX receipts
Matthias points out this does not need to be second order.
Shorten transform_dir.
No need to reassign.
According to http://refspecs.freestandards.org/LSB_3.1.1/LSB-Core-generic/LSB-Core-generic/iniscrptact.html this is a success.
Don't fail if the lock file does not exist (on Debian).
Working confirm-triggered receipts for non-transactional SEND
That's a binary now.
Handle the upstream broker going down.
Whoops. Forgot these
Swapped helper function arguments
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Be consistent with use of Prefix (which avoids some daft badmatches)
Merge default into bug23568
Sender-specified distribution updates
adding wait_for_tables after database upgrade
Make the timeout code a bit clearer.
Enable confirms on the channel if receipt header is set in SEND
Link contexts to listeners via the config, and give plugins that ability to find out listener options
Grab the port number from URLs, add a test across two brokers.
Associated changes to the erlang client
404 => NOT_FOUND
Another attempt at readable names. And no, this should not be our own URI, we don't know that.
Merge bug 23827 (relative context paths)
/Consistently/...
Move Protocol to after vhost consistently
Revert "readable name" for the time being as it's not unique enough. And add the test that let me find that.
Merging default to bug23810
More sensible listing of contexts without descriptions
simplified and better error reporting on queue declare arg checks
Separate out the config based exchange tests entirely.
Don't store the backing module in the ETS table, we already have it in the args. This means we always have it, and can always call with_module(...)
Cope with moved capabilities
Move capabilities to after the vhost consistently
Fix alignment.
Basic support for arrays in arguments for the web UI.
x-message-ttl is an integer argument.
Change the interface exposed by rabbit_mochiweb to speak about contexts and default paths.
Merge bug23782 to default.
Remove vm_memory_monitor from common which was added erroneously
cosmetic
removing duplication and use of sets in rabbit_mnesia
fixing upgrade from schema with missing tables
Adjust direct connection and reabstract to pass through capabilities to direct client channels and over network connection
Pass client capabilities through to the channel
fixing attributes in rabbit_upgrade_functions:topic_trie/0
fixing field lists
fixing database upgrade
Merged bug23842 into default
Sender-selected distribution updates
print usage message for all command line parsing errors
merging in from default
Present capabilities to the broker
Supply server capabilites
merge bug23829 into default
cope with server_properties as a /1
Make server_properties a /1
inlining
Cosmetic
Make "set +e" cover rather less code.
More explicit documentation.
Be explicit where we can be
Merging default to bug23425
Remove unneeded includes
Merging default into bug23782
Merging bug23609 to default
merge bug23765 into default (current sync interval in queue_process and msg_store causes poor confirms performance)
Add the instance as a parameter to the context registration API. This is a breaking change for plugins.
Give instances different registered names
Parameterise basically everything with an instance name, and allow the configuration to include more than one instance.  By default, provide a 'default' instance, and for the minute, make everything use that.  This works with e.g., management plugin with no changes. (Well, one change: don't rely on rabbit_mochiweb having an env entry for 'port').
Merging bug23727 to bug23554
Added documentation for gm 'become' callback result
Merging bug23829 to bug23554
Merging default into bug23554
Added documentation
Use a readable queue name, and don't have it expire immediately.
Support arrays in arguments: API, and web UI for display but not input.
Remove rabbit_msg_file:scan/2
moved call for call deletion notification into Fun
rabbit_msg_file:scan/4 now looks a bit more like fold
Improvements to shutdown.
Do rollback first so that reader will catch DOWN if rollback errors
correct comment
Demonitor on channel_cleanup
Log in the case of an uncontrolled, unexpected channel exit
Remove needless variable
Correct rabbit test for new channel exit sequence
Use serial arithmetic, and slightly sketchy flow control for incoming links
Always erase both channel and ch_pid. This is lovely - it makes it a proper bidirectional mapping. All java tests now pass again.
TODO
Multiple upstreams.
Add ability to change backing module dynamically
Use serial number arithmetic for credit
Be more resilient when unbinding.
Refactor tests, test configuration, allow more than one federation exchange per broker(!)
drop CPS in favour of explicit API
Move the state modification into rollback_and_notify
Remove boolean shouldClose from response of bin_gen:map_exception
cosmetic - moving protocol field up.
Remove hardcoded protocol now channels have the real protocol
Upgrade messages
Remove annoying documentation
Merged in bug23527
Merge bug23801 into default
remove commented out code
Refactored handle_call({obtain, ...}, ...) into single headed function
The simplest possible test.
Move relativise into rabbit_mochiweb_util
Generate relative URLs in listing_fallback_handler
Merge bug23524 into default: URL path prefix support
TODO
Merging into default.
Make some attempt to assert args equivalence and remove bindings.
Rename local / remote to downstream / upstream.
Whoops
merge default into bug23575
TODO
The channel.close_ok from the client might be immediately followed by a channel.open. As such we must make sure that we send the channel.open to a new channel
Give the federation exchange another type of exchange to emulate. This sorta works now (we can federate a message! woo!), but in a couple of cases we need the backing module before we have it. Hmm.
close_channel is no longer needed in reader, which means that closing as a channel state is no longer needed.
Always log the error from the channel; can now guarantee exceptions that turn up in the reader are hard exceptions
Log soft channel errors
cosmetic
Tidy channel termination (state=closing implies rollback_and_notify done). Erase both ch_pid and channel from reader state on DOWN (required for soft errors in which the channel issues the close, waits for the close_ok, and then stops normally)
If we receive a channel.close whilst we're closing the channel already (presumably client and server initiated close at the same time), then make sure we still send back the close_ok
Added code to raise or clear alarm "file_descriptor_limit" when transitions between being able to obtain file descriptors (e.g. for sockets) or not, and vice versa, occur. Method adjust_alarm contains the logic to set/clear alarm based on previous and new state.
server initiated channel.close: keep channel alive until ch.close_ok is received. Make channel responsible for deciding on the severity of the error
The beginnings of a federation plugin. Does not work.
Ignore methods to the channel if we're closing
Make client-initiated channel.close work in new scheme
Pass protocol through to channel
Merged bug23811 (no need for amqqueue:notify_sent to use delegate)
Remove Backing Queue Status from the web UI.
Merging default.
Merge bug23813 (abstract rabbit out of delegate)
Merge bug23813 (abstract rabbit out of delegate)
Use the newly updated basic.credit, which baselines the credit with a count so it can be recalculated from the limiter's state.  Correct prohibition on sending beyond the remote incoming session window.
Separate calculating the credit from updating the state, and do it properly.
Removed race in the tests
Remove io:format
Merge default
Add pid to rabbitmqctl status.
Undo 3b4956543c30
Removed the enforced flush
http://refspecs.freestandards.org/LSB_3.1.1/LSB-Core-generic/LSB-Core-generic/iniscrptact.html:
Use a base for basic.credit, to account for messages that have been delivered but not received by the client
Add count as a base for credit.  This means messages in flight can be accounted for -- the sender of basic.credit may not have received all the messages the queue has delivered.
Correct the behaviour of /etc/init.d/rabbitmq-server status
Merge with default
Use setsid rather than nohup.
merge bug23806 into default (Re-declaring a queue on a different cluster node fails)
Merging bug23768 to default
Use a list comprehension to match rest of codebase and save a bunch of characters
Remove pointless test, fix comment.
Merge default head
Be lenient with null settle (default to false), and make sure we send transfer_unit and initial_transfer_count
Only clear encoded content when necessary
Sender-selected destinations - qa feedback
Reverse to avoid negated conditional
Merge bug23792 into default (Make gen_tcp:listen options configurable)
Merge bug23792 into default.
Merge bug23792 into default
Update spec files and implementation. Notably initial-transfer-count, handle-max
Handle missing message sections
Merge with default
Merged bug23436
Formatting change again - as per request from Matthias
Spelling
Line length and cosmetics
Sorry, accidentally shipped some changes to Makefile that I use for testing.
All tests pass.
Trailing tab and whitespace
Merging default into bug23657
formatting
Added test which covers the mysteriously dead queue on queue declaration, and hence misc:is_process_alive
I need a much longer timeout for these tests...
Merging default to bug23806
Update .hgignore
Update .hgignore
Update .hgignore
Update .hgignore
Update .hgignore
Update .hgignore
Update .hgignore
merge bug23814 into default (misc:with_exit_handler is missing a match for nodedown and shutdown)
Merging bug22698 to default
Move the booting of the delegate to rabbit
abstract out is_process_alive
Dies in rabbit_channel:handle_info with emit_stats msg. Will fix typo in the morning. Also dies in com.rabbitmq.client.test.server.EffectVisibilityCrossNodeTest.testEffectVisibility test, but so does the default branch.
Updated rabbit_amqqueue_process. Ready to test.
Updated rabbit_event and rabbit_reader. Removed accidental tabs from file_handle_cache.
Updated supervisor2.
Updated rabbit_msg_store.
remove listeners when the rabbit application is stopped
Updated file_handle_cache.erl
Branched new bug23504, based on more modern default.
merge bug23804 into default (ssl connections dying prior to R14)
Add simplest possible README.
Expose configuration of amqp1.0 adapter tcp listeners to match broker
Expose configuration of stomp adapter tcp listeners to match broker
remove non-rpc'd call to is_process_alive - now matches the rpc version in amqqueue_process
Make with_exit_handler more robust and able to cope with the other forms of shutdown and nodedown
No longer need either delegate nor delegate_sup
accomodate both forms of nodedown
use a plain cast, not delegate
Correct type for sequence number
Support extra, compact encodings for integral types
Merged bug17383 into default
add delegate_sup to rabbit_common
Abstract out the rabbit from delegate (also improve robustness)
Just depend on "erlang".
Handle nodedown errors.
Huh. That should not be there.
rabbit_misc:makenode/1
Control which node a queue is created on
fixing binding recovery
Ensure payload of amqp_msg() is binary, not list of binary.
Check Erlang version.
Update Erlang version check to use list comprehension
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
merging in from default
Keep the same formate as ssl:connection_info
Remove intermediate variable.
Merge bug 23061 into default (spurious heartbeat timeouts possible during connection termination)
Fix SSL connections in R13Bx.
Merged default into bug23483
Refactoring, cosmetics, consistency, return codes
Remove io:format
Er, handle single acks properly. And remember the new map.
Correct role of publisher ack
Make this actually work.
Handle multiple confirms.
Do publisher confirms (sorry, sending role disposition settlement) properly. Partly.
Merging bug23768 to default
update documentation
Expose socket count from the agent.
Use a list comprehension to match rest of codebase and save a bunch of characters
Present socket count in mgmt plugin
Thinko
Get the role right when confirming acknowledgements
Merge default into bug23568
Remove redundant try/catch from event notifier
default merged into bug23533
cosmetic
cosmetic
Treat basic_return immediate/mandatory differently
Treat basic_return immediate/mandatory differently
Correct bits in disposition handling
I prefer it this way round.
Merge
Use numeric descriptors
Fill in more fields on the flow reply.
Port a little bit of bug 23643 into our reader fork, just enough to not crash massively on teardown.
Default merged into bug23580
Default merged into bug23580
Minor refactor.
Use more visible consumer tags.  Fix up some credit bookkeeping
More bookkeeping.  Grant incoming links credit
DEPS should be simply assigned
rabbitmq-auth-mechanism-ssl is releasable
rabbitmq-auth-backend-ldap is releasable
Coverage doesn't need R14
transfer-ids are uint
Merge frame type changes and reimplementations with flow control implementation.
Don't copy cookie to %APPDATA%. As far as I can see, $PROFILE == %HOMEDRIVE%\%HOMEPATH%, but those last two are not available in NSIS.
Use the standard NSIS uninstaller icon. It's quite ugly but it doesn't look like the Rabbit icon, and Windows icons are hard to use.
Transparent icons
Finish pages, explain on the uninstaller one that logs / db are still there.
Consistency
Move install dir registry key under "VMware, Inc."
Rename "RabbitMQ" to "RabbitMQ Server" in a bunch of places.
Rename rabbitmq.conf
Map undefined to -1 and back. Ugh.
Update documentation to include connection.secure steps
Handle incoming credit_state.
Remove redundant fields from credit-ok.
Remove redundant fields from credit-ok.
Remove redundant fields from credit-ok.
Update spec XML, and rewrite many things to account for simpler frame types. Expound at length on various mechanisms.
Ignore flow state in attach, handle it in flow.
Added tag rabbitmq_v2_3_1 for changeset 16cb35198bb7
Added tag rabbitmq_v2_3_1 for changeset 540e71eb69d8
Added tag rabbitmq_v2_3_1 for changeset b8f9f8ce1d36
Added tag rabbitmq_v2_3_1 for changeset f0fb1a2ca8b9
Added tag rabbitmq_v2_3_1 for changeset 0654eb4b8054
Added tag rabbitmq_v2_3_1 for changeset a1f84f26c26c
Added tag rabbitmq_v2_3_1 for changeset b32a5e49434e
Added tag rabbitmq_v2_3_1 for changeset 40962f28f8e0
Added tag rabbitmq_v2_3_1 for changeset a1f84f26c26c
Added tag rabbitmq_v2_3_1 for changeset b455742b0a43
Added tag rabbitmq_v2_3_1 for changeset 82e6a8017630
Changelogs for 2.3.1
Change mind again on how this should work - have a synchronous reply method, and an async method for spontaneous notification.
Change mind again on how this should work - have a synchronous reply method, and an async method for spontaneous notification.
In fact this should *not* be synchronous.
merge from default
add test
Merged bug23793
Mike tells me we will not need this in the next version.
Start of the proper link-based flow control.
Mark basic.credit as synchronous, so that clients can interpret the credit-state as the reply. I *think* this is non-evil.
Updated license info for TP libs
Ensure all call sites of BQ:idle_timeout subsequently call run_message_queue to avoid violating queue invariant
First version of renaming rabbitmq.conf
Add vm_memory_monitor to rabbit_common
Send a credit-state when magical draining happens.
Make tcp listen options configurable
Update to refer to IN_BROKER_TEST_COMMANDS
Make the test actually test something
Merged heads
Added tag rabbitmq_v2_3_0 for changeset 73804b18fc64
Added tag rabbitmq_v2_3_0 for changeset ed757ef5b508
Added tag rabbitmq_v2_3_0 for changeset 0a5239ad2375
Added tag rabbitmq_v2_3_0 for changeset 96f2097f07dd
Added tag rabbitmq_v2_3_0 for changeset 65ce3be6b7b1
Added tag rabbitmq_v2_3_0 for changeset 7d872fcc6189
Added tag rabbitmq_v2_3_0 for changeset 553b07d6267a
Added tag rabbitmq_v2_3_0 for changeset 066f91b76781
Added tag rabbitmq_v2_3_0 for changeset 553b07d6267a
Added tag rabbitmq_v2_3_0 for changeset 761c3e95c856
Added tag rabbitmq_v2_3_0 for changeset 5ab55c446716
2.3.0 changelogs
Refactored sender-supplied routing keys
Return a basic.credit-state after receiving a basic.credit.
Merging bug23735 to default
Credit needs to be per ctag.
Credit needs to be per ctag.
Removed stray Makefile target
Simplify test, and hook into the new rabbitmq-public-umbrella testing support
Support drain (probably in a rather inefficient way).
Beginning of channel.credit support. Tests pass, except for drain=true.
Hook into the new rabbitmq-public-umbrella testing support
Distinguish in-broker and standalone tests
Use common R14 check target
First pass at channel.credit.
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge bug23786
Merge bug23786
Merge bug23777 into default
Merge bug23777 into default
Fix breakage caused by bug 23696
Flush sometimes takes slightly longer than the default 5 seconds
lists:keysort/2.
This gets moved to -agent.
Move rabbit_mgmt_format:application/1 here, don't use rabbit_mgmt_util:sort_list/4.
rename
Rough approximation for periodic flushing
Cope with values that are not strings.
Fix the OCF script. Man, that was painful.
Bump up sync timers in queue and msg_store to 25ms
Whitespace change to create new head of default
Switched to using the hibernate capability of gen_server2
Removed stray handle_info callback
Moved to gen_server2
cosmetic and addition of impersonal pronoun
Tweak wording.
make cluster nofitication a boot step; don't print to screen
'make clean' fix
Clearer error message.
cleanup after rabbit goes down on a clustered node
monitor rabbits on clustered nodes
Consistency
merge from default
Remove unhelpful advice
Check the erlang version before running tests
Make the USE_SPECS erlang version check more robust
Make the USE_SPECS erlang version check more robust
Experimental move back to prim_inet to facilitate extremely experimental TCP backpressure
merging in from default
fixing connection_closing exit reason in channels
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
merging bug23696 to default
Merging bug23696 to default
Merge default into bug23568
updating #amqp_params{} documentation
Merging bug23410 to default
Merging bug23410 to default
Merge bug 23752
merging bug23623 into default
refactoring: firstly 'not' is an operator, not a function. Secondly no need to have the condition specified in the inverse case. Thirdly, reversing so to have the positive case first looks neater
Consistency of naming; correction of pa path (previously even the direct remote tests were being supplied with a pa path which included the broker); correction of dependencies in construction of packages (never depend on a directory)
One line is better than two.
replaceWith is much better than innerHTML
fixing subscribe nowait bug; adding test for it
minor
cosmetic
merging in from default
merge bug22252 into default (how does basic.recover affect basic.qos limits?)
updating rabbit_common.app; other minor
merge bug23546 into default
Cope with the possibility that the user of the delegate mechanism is not on a node running rabbit
Merged bug23725 into default
reverting use of rpc on critical path
cosmetic; using accumulator in trie_match
Merge heads
Merge this again
That's not needed either
bug23753 merged into default (refresh every 20 minutes)
50 msec is not required for production
Style tweak: move delete and purge further apart.
fixing amqqueue call bug; swapping test_direct and test_remote_direct in make test_suites and make all_tests; adding direct tests to common package test; updating rabbit_common.app
Reset the counter on focus rather than form submit.
removing network_listening and direct_listening boot steps
Stop the channel crashing if we requeue to a dead queue
Merging bug23756 to default
tabs to spaces.
Add --disabled-login
Added support for configuring heartbeat, channel_max and frame_max in broker endpoint uri
Fixes for Windows XP: set our own environment too, invoke batch files via cmd.exe.
matching on {error,} in case of direct connection failure
changing exit's to {error,}'s in rabbit_direct:connect/3
Stick the version in the name, compress more aggressively.
merging in from default
merging in from default
Close the installer after starting the uninstaller, to prevent people accidentally bringing the installer to the front and continuing.
Unset ERLANG_HOME on uninstall.
Create db and log directories in case the service isn't installed.
Correct specs
Refresh the page after at least 200 partial updates have occurred without a form being submitted.
Merged bug23744 into default
Reworked TCP send to use rabbit_net:port_command
On recover with requeue=true, notify the limiter of the requeued messages
merge bug23742 into default
Oops.
Make the supervisor2 delayed restart test suite passes again
Treat all {badrpc, _}s the same. Use which_applications/1.
rabbitmqctl status is not adequate to wait for the server as it can return successfully when the vm has started but not the app. The app can then fail. Therefore introduce a new command to wait for the app to start.
If there is an mnesia entry for the queue and the qpid is dead, then remove the mnesia entry, but still return the existing queue
merge bug23748 into default
cosmetic
Reworked header conversion - slightly faster and quite a bit nicer
inline two funs for compactness and clarity
simplify
Merged in default
refactor 'write' handler for clarity
don't log stats for nacks (originating from queue deaths)
Back out the use of prim_inet - explicit gen_tcp:recv is faster in the benchmarks
Remove dead pids from children when we're delaying the restart
rename ack_handler to confirm_handler and handle basic.nacks
return State from write_message rather than it calling noreply This makes the API more consistent (cf read_message etc). Also, shuffle order of some write actions for consistency
Change the new version format from:
Merging bug23736 into default
Merged in default
Merge bug23602 into default.
nacks instead of rejects and coalesce
If we don't actually write the msg and the msg isn't in the current file then delete it if its pending write count is 0
Start / stop service links.
Be a bit smarter about what we remove.
Those backticks bugged me.
Check for Erlang as soon as we start, and offer to help the user download it.
Switched to using prim_inet:async_recv
Merged bug23740 into default
Support R12B3
On pre_hibernate, report the real ram duration, not infinity. The assumption that pre_hibernation implies hibernation that will last for long enough for the ram duration to go to inifinity is not correct.
Changed how bytes are read from the socket - better performance for large messages
merge from default (rabbitmq-multi works again)
Consistency with other packages.
Add sbin directory to path for ease of rabbitmqctling.
merge bug23582 into default (rabbitmq-multi start_all fails ...)
monitor the rabbit app on some remote nodes
Cope with the new style port-only listener type (but limited to IPv4 when starting multiple nodes).
Revert IPv6 changes to rabbit-multi*.
More entries in the start menu.
Fix uninstall icon, show better uninstall information.
Minor bling.
register the almost-top rabbit process as 'rabbit'
Add some version info to the exe file.
Add some links to the start menu
send rejects instead of confirms in case of non-normal queue deaths
Sync Erlang cookie to both places it could be
Set up RabbitMQ service.
Remove previous version of RabbitMQ first.
Actually set ERLANG_HOME.
Section descriptions, make a while load of the text actually appear.
simplifying refactor and cosmetics
Merge with default
Locate Erlang.
Treat sender-specified destinations as routing keys
The start of an installer. Just install the zip file.
Untested changes to the OCF script.
First pass at a multi-free init script.
bug23154 (ipv6) merged into default
bug23154 (ipv6) merged into default
bug23154 (ipv6) merged into default
bug23154 (ipv6) merged into default
Rework code so that it's even more efficient, handles errors properly and also more obviously implements RFC4616 correctly
This is no longer needed.
Merging default into bug23602
Merge 23534 into default.
fix typos
dependently type acktag producing functions s.t. the "blank ack" case is manifest Switched from blank_ack to the more universal 'undefined' in the process.
merging bug23696's two heads
adding rabbit_direct:connect/3 for the erlang client to use
direct client now uses rabbit_direct:connect/3 to validate credentials and get server props
adding specs to rabbit_client_sup
Cosmetic
Debian Erlang packaging claims another victim.
Merging bug23727 into bug23554
Merging default into bug23696
Reverting bogus whitespace change (avoids file diff with default)
Merge bug23397, show confirms
Merge bug23201 to default
Add unconfirmed count to detail view, and move uncommitted count down.
Info item rename
Rename the info item for consistency.
Merged bug23555 into default
Show the possible field values in the help for channel mode
Merge in default
Mochiweb updated to recent version
Coarse grained confirm stats.
merge bug23626 into default
fold cases
merge from default
rename variables for consistency
Actually, show the confirm rate per exchange.
Merged in default
Correct unused variable name.
bump year on copyrights
Adding gm related files, plucked from branch bug23554
Fix docs
Correct handling of "never", and insert emergency DoS preventer.
Fix a variety of outdated bits, and explain how to build from a tag.
It's not quite that bad.
Remove outdated information on branches.
move channel lookups into handle_ methods This avoids double lookup in some paths and unnecessary invocations of run_message_queue. Also inline recorde_current_channel_tx, which eliminates some lookup. And allow rollback to trigger the forgetting of a channel record.
minor
adding test suite for direct connection to different rabbit node; general test makefile cleanup
Merged bug23719 into default
Bah!
List all consumers: web UI. This is debatably useful, and I'm not sure about the extra tab.
List all consumers: code, tests, docs, rabbitmqadmin.
updating call to rabbit_direct
fixing type specs; other cosmetic
Integrate with bug23568
Merging bug23723 into default
handle errors in list_consumers
Merged bug23700 into default
Deal with the possibility of a ch DOWN overtaking other messages from the channel
Integrate with bug23568
Merging bug23716 to default
default merged into bug23154 (ipv6)
updating license year
Tweak to how we match binaries when using Content-Length
Merge from default
rabbit_mgmt_util:vhosts/1 doesn't exist any more since bug 23455. Fix, add a test for the non-admin case, look embarrassed.
And the result of misc:rs is a string, so format it as such
Added optimisation when reading bodies with Content-Length set
Correct formatting of resources in log messages
Merge this to stop it dangling
Merge bug23584 (show connection retry since and next)
Merged bug23434 into default
Merging default into bug23554 (epic debitrot)
Switch from using a monitor to using a link, in order to gain from the bi-directional properties of a link
Merge bug23652 into default
Whitespace
fixing failing tests
fixing some merge conflicts; other cosmetic
Some parser tweaks
merging in from default
merging in from default
adding supervision support for direct connection channels
adding support for connecting to broker in another cluster via direct connection
Whitespace
Reworked parser to use binaries
fixing merge conflicts; some stylistic adjustments
Merged default again.
Update license boiler plate copyright dodats
Merged bug23651 into default
Don't test on the real port. Pick a test port, and retry if we find any evidence of its being in use.
merging in from default
Reworked body content parsing
comprehensions are more concise
Duh.
swap tuple elements for readability; inline a function
Merged bug23434 into default
replace the sort with a gb_tree
Opps, lost a starting year in the previous commit
Correct all copyright notices
Correct all remaining copyright notices
Correct copyright message
Update .erl and .hrl license boilerplates
Merged default into bug23483
Sender-specified distribution for fanout exchanges
Merging bug23055 into default
Put short delay into destinations test
Make port_to_listeners distinguish all the cases now, and write even more comments.
Merged in default
fix break when stats were off
merge from default
merge bug23705 into default
Cosmetics.
Rename ipv6_status to port_to_listeners, make it return listeners, explain it more.
sync_timer => sync_timeout
Specialise the sync_timer in order to permit us to unset the sync_timer_ref
fixing failing tests
Allow gethostaddr(Host, auto) to return more than one IP address in the case where a hostname resolves both A and AAAA.
merge bug23631 into default
UN/SUBSCRIBE error messages contain the subscription as passed in by the user.
That's not needed
Merged default (with 1.1 support) and got tests working again.
Fixed up bugs in new parser
Merge with default
Er, and this too, of course :)
Merging heads of default
Correct specs
Satisfying bit first: remove rabbitmq-multi and all trivial references.
ensure_subchannel_closed now used; merged fixes from 23651
Fix surprisingly long-lived mistake.
Merging bug23698 into default
Merge from default.
Fix the MSIE fix.
MSIE fix.
Inlining
A little more abstraction never hurt
Separate styling of popups and error/warnings.
Some might say this is a touch over abstracted. It's quite pretty though
Merge bug 23447.
Remove unused patched-in function.
Added receipted unsubscribe tests and check for send after unsubscribe properly.
Remove code duplication.
merge from default
SX, SY have meanings in the spec that are not the same as the meanings here. Rename.
Cosmetic
merge from default
Merge with bug23447
merge duplicate code
Or not
Merge bug23689 into default.
Merge with default
stats for confirms work again
Merge bug23601 into default
Merge with default
small simplifying refactor
cosmetic
cosmetic
cosmetic
correct specs
indicate absence of config files more clearly
don't send routing-failure-induced confirms straight away to allow for coalescing with preceding confirms.
Oops
Shorten the cookie length slightly more.
Implicit preference: update interval.
Merge in bug23601 fixes
Refactored lifecyclke tests
Cope if we somehow end up with our vhost preference set to a vhost which no longer exists.
Implicit preference: vhost
Implicit local preferences mechanism, and use of that to do panel visibility.
prioritise confirms and coalesce them until we see another command As well as sending confirms when the channel goes idle we also send them on the first non-confirm (Erlang) message. I.e. coalescing is restriced to adjacent confirms in the channel's mailbox. By prioritising the 'confirm' erlang messages we shuffle all confirms to (near) the top of the mailbox, adjacent to each other.
merging in from default
merging bug23562 into default
Merge in default
Added a test which will, timing dependent, hit the close_fds callback stuff. Code coverage in tests bares this out
Merging default into bug23631
Context-help system. Move existing explanatory text into it and add a couple more things.
Every msg in a queue should have a different guid. Sigh
Added support for multi NACK
Fixed error during merge
Merge bug23685 into default
Merge bug23686 to default after QA
Cleaned up the stomppy patch, including whitespace fixes
Factored out common function format_detail/2
Removed unnecessary refactoring to rabbit_stomp_reader:process_received_bytes/2
Removed unused ack_mode slot in session state
Renamed explain_amqp_death to amqp_death
coalesce confirms in channel, for better performance We accumulate confirms in the channel and only send them when the channel goes idle.
allow hibernation after confirm
refactor: extract helper for initialising test msg store client
cosmetic
cosmetic: get rid of intermediate var and save some space
make recover_index_and_client_refs do what it says
cosmetic
some cosmetic and minor refactoring for clarity
refactor: extract helper fun for updating the pending confirm mapping and invoking the MsgOnDiskFun client callback
simplifying refactor
oops
display config file locations on startup
merging default into bug23631
Whoops - client_terminate should not clear the cref, unlike client_delete_and_terminate. Tests pass again now.
Merging bug23675 into default
Introduce msg_store_client_init/3 helper
Rearrangement in gc. Can't seem to get it shorter than this though
change close_all_indicated to return {ok, CState}
Correct order of function arguments
Combine client_refs with client_msg_on_disk_callback into clients
Added receipted unsubscribes to lifecycle test
merge from default
Merged bug23675
Merge bug23675
Tests and improvements for header value stripping, escaping and duplication
rabbit_access_control:check_user_login returns {refused, _, _} which we return too.
bug23663 merged to default
merge bug23690 into default ('confirms' simplifications and optimisations)
Tidy up
Merge default into bug23568
Merge default into bug23568
merge bug23679 into default (unnecessary fsyncs when requeuing messages with confirms)
And now it works
Matthew's patch: don't add requeue'd messages to unconfirmed
Merge with default
m-x untabify
Branch bug23568, purely to track against the bug23568 branches in other repos
Merge default into bug23568
Minor tweaks, and added explanatory comments relating to the various races
Exploratory rework of frame parser
Merged bug23601 into this branch
cosmetic
keep track of de-duplicated confirms
merge bug23645 into default (C client is lacking some methods in its API)
Merge with default
Simplified nack tests in erlang client
Format dates more tersely.
Show last connect time / next connect time when server is down.
Merge with default
don't do confirm stats book-keeping unless stats are enabled
Added tests to check queue subscriptipn UNSUBSCRIBE
for queues, log partial confirms rather than full confirms
merge from default
More testing needed, but this does seem to work
invert logic to get better reuse
combine 'unconfirmed' and queues_for_msgs and permit coalescing of confirms on queue 'DOWN'
Merging bug23445 into default
Reworked handling of AMQP errors so that the STOMP session is terminated too
cosmetics and indentation only
Added tests for unsubscribe from queue by destination and id
Some refactorings
Merging default into bug23445
Missing subscription tag does not terminate channel process.
Merge default
Merging bug23661 into default
Fix bug. FTR, this mistake has been there since Sept 16th 2010
merge bug23678 into default (conditional on vq:needs_idle_timeout wrt confirms is too lax)
merge from default
Merge with default
Don't delete the output file before closing it
merge bug23684 into default
remove redundant clause confirm/3 is now only ever called once confirm mode has been enabled, and since we can't turn that mode off there is no point in checking.
Backed out changeset b6d2a6e12e77 Turns out this change is only valid on the bug23684 branch
remove redundant clause confirm/3 is only ever called once confirm mode has been enabled, and since we can't turn that mode off there is no point in checking
generalise optimisation there is never any point in trying to send a multi-ack when there is just one message to confirm
bug fix: don't send confirms when MsgSeqNo == undefined also optimise unrouted message handling further - there is no point in going through all the logic of determining whether we can send a multi-ack since we know the MsgSeqNo will be the highest unconfirmed and it's just a single message we are confirming.
cosmetic
inline a function
tiny refactor: use dict:fetch instead of dict:find
optimise confirms for unroutable messages; don't do any unnecessary set/dict operations
Merging bug23643 into default
Merging bug23643 into default
Don't rename functions just before committing.
Relative location header when creating a binding by POST.
Minor corrections to documentation
Eliminate unnecessary put/2, and cosmetic
typo
Merge default
Merging bug23668 into default
Merge with default
tests for basic.nack
Refactoring and ensure that we don't issue confirms for messages that have been masked from going to disk
merge default into bug23643
merge default into bug23643
Cosmetic.
Merging bug23085 into default
Merging default into bug23085
Merging bug22969 into default
oops
Reapply corrections made to default and lost in merge
Break the bad news rather than just timing out wait_for_tables as we traditionally have done.
merge heads
cosmetic: fix indentation
Don't display a cluster-related message on a single node.
Correction of documentation, lost during last merge from default
Merging default into bug22969
msg_store confirms messages that are written to disk, removed and then revived
And fix again.
Mandatory delivery only needs to know that it got to the queue. Not the result of delivery
Detect old-style versions properly.
Remove pointless differences from default.
Logic.
Prioritise both sync and async versions the same
Make conditional more precise
rabbit_mnesia:all_clustered_nodes/0 does not return disc nodes only. Duh. But we can do better anyway: allow any disc node to do the upgrade.
swap union and intersection
Beginnings of a test for basic.nack
Removed tabs from basic.nack section
Honour the requeue flag in basic.nack
Added requeue flag to basic.nack
Merge default
Merge with default
Extract common logic for message rejection. Introduce basic.nack and rework basic.reject
Revert this to the old version that we want.
fix a bug
cosmetic
Merge bug23656 into default
cosmetic and tiny refactor
Added basic.nack to the JSON protocol definition
Minimise difference with default.
cosmetics and minor factorings
Merge default
Remove test upgrades
Note that we've upgraded here
Store the version as an orddict keyed on different scopes, and thus don't assert that everything is done after the first upgrade.
Merging default into bug23445
Added STOMP as an alias for CONNECT
Added support for NACK
Break the cluster *after* taking the backup.
Optimise the heartbeat to death. Honk. And some cosmetics too
Cosmetics
One DAG per scope.
merge bug23329 into default
Merging default into bug23055
Merging bug23590 into default
Holy %$*! it works. Still needs tidying up somewhat...
Merging bug23616 into default
Merging bug23616 into default
Typos
Updated documentation
restructured ACK code to extract the common parts for NACK
start confirm sequence numbering at 1 instead of 0 in order to avoid conflict with special meaning of deliver_tag=0 in basic.ack
better naming for confirm sequence numbering also start count at 1 instead of 0 since the latter has a special meaning in basic.ack And some on-the-fly refactoring.
start confirm sequence numbering at 1 instead of 0 in order to avoid conflict with special meaning of deliver_tag=0 in basic.ack
refactor: extract helper function
fix typo
cosmetic
fix
merge from default
cosmetic and minor refactor tidy comments and eliminate some intermediate vars
merge bug23593 into default
merge bug23593 into default
small simplifying refactor
Removed stray debug line
Fixed issue with merge that broke version negotiation tests
Merge with default
merge default into bug23593
refactor: better function names, some inlining
Merging bug23665 into default
Move the upgrade tests earlier in the boot process. This doesn't work either, just committing it in order not to lose it.
cosmetic
remove unneeded logic
more consistent naming
Only read inside an mnesia transaction
One less thunk
rethink grouping logic
Merging bug23636 into default
Turns out that 0 and true are distinct. sigh.
cosmetic + a bit of refactoring
More frugal use of thunks
Msg -> MsgSeqNo; inline two functions
remove duplication of erroneous logic
Unconditionally return a fun() in execute mnesia tx
Improve consistency of naming
refactor / abstraction
Close subscription channels on UNSUBSCRIBE
Update documentation for tcp_listeners.
Merged default
Bind to all ports by default, and rename "listeners" to "tcp_listeners" for consistency with other protocols.
Testing shows that using a set seems very comparable versus ets in this case, and still offers the profound improvements over default
Merge from default
Merge heads
Fix dumb mistake. Not sure how that used to work.
Auto-bind to IPv4 / IPv6 as appropriate.
Simple README.
sync queue_index when variable_queue has outstanding confirms and is idle (branch off default)
Merge with default
bug23578 merged into default (ssl info)
bug23578 merged into default (ssl info)
Transfer changes from rabbit_access_control to rabbit_vhost
Create plugin for SASL EXTERNAL mechanism.
Remove SASL EXTERNAL mechanism.
Merging default into bug23329
Merging heads of default
Fix bug
Merged default into bug23445
Correction and improvements of comments
Merging default into bug23329
bug23594 merged into the default
merging bug23612 to default
Merged bug23384 into default
misspelling
simplifying refactor
ensure connections terminate when channel-related processes exit abnormally When processes related to the channel, such as the writer and limiter, terminate abnormally, the channel_sup terminates the channel process with reason 'shutdown'. The reader musn't treat that as a controlled termination.
rename WaitForIndex to ActionTaken
default queue name to "" everywhere since the MRDQ feature operates everywhere
This has been there since forever, but it's not really useful. And never worked.
Fix some validation issues.
Show stars for mandatory fields.
Merge from default.
Merge default into bug23524
Update documentation.
Don't have the scripts set bind address of 0.0.0.0 if the port is specified but IP isn't. Instead use the same logic as if it's specified in the configuration file.
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge default into bug23568
Merge from default
We have a dependency mechanism. Why not use it?
Added .gitignore.
Cosmetic
Merge default into bug23568
Merge default into bug23568
Refactor a bit, reinstate ensure_version_ok check.
Ironically our dummy upgrades now need to be upgraded.
Merge bug23653 into default
Merge bug23649 into default
Compile on R12B5.
Make AmqpClass.spec hold the parsed spec, not the raw spec
Sender-specified distribution
Update UNSUBSCRIBE to wait on cancel.
Merge from default
Decide the node to do mnesia upgrades based on which was the last disc node to shut down. Blow up with a hopefully helpful error message if the "wrong" disc node is started first. This works; you can now upgrade a disc-only cluster.
bug23601: changed UNSUBSCRIBE to cancel subscription from correct channel
Merge bug23455 into default
Merge bug23455 into default
Merge bug23455 into default
Fix comments.
refused response is a 3 tuple now
simplify code with use of new fun in rabbit_reader
refactor: extract function to handle frame and pass to channel
Don't default to logging LDAP queries.
Fix name of env var
correct error handling ...I think; there is no test coverage for these
Fix appearance of mandatory args in usage message.
oops; tests pass now
first cut of adapting to new command assembler
cosmetic
Explain that rabbitmqctl only touches the internal user database.
Fix a few spec-related stupidities.
Oops.
Dialyzer fixes.
Merge bug23477 into default.
Merge from default
Merge in default
Merge in default
Format IPv4-mapped IPv6 addresses as IPv4, put brackets round IPv6 addresses that are adjacent to colons.
Format IPv4-mapped IPv6 addresses as IPv4, put brackets round IPv6 addresses that are adjacent to colons.
bug20570 merged into default
Allow specifying a listener as just a port number, meaning "bind to everything, whatever that means on your OS", and use that by default.
default merged into bug20570
Editorial from Steve
Updates for check_tcp_listener_address changes. IPv6 now works.
So I'm not sure how that worked, maybe there's some weird ::1 to 127.0.0.1 munging somewhere.
Updates for check_tcp_listener_address changes. IPv6 now works.
Reinstate stop_tcp_listener.
Allow check_tcp_listener_address to convert one config into more than one spec (so that in future we can have a simple "bind to port" config that works on dual-stack operating systems).
Make listener spec a bit more of an abstract type so that changes to plugins are minimised.
Automatically determine ipv4 / ipv6 depending on IP address or hostname provided.
Special case [::] like we do 0.0.0.0.
Merge with default
Import and debitrot Reilly Grant's patch.
Check our version matches the remote version.
Fix spec
Revert arbitrary difference from default.
Make disc node reclustering work, various cleanups.
Removed DESIGN.md - it is not needed now
Rolled the important details from DESIGN.md into README.md
These two cases are the same.
Sketch of how clustered upgrades might work.
README updated, removing old instructions and reflecting new Ruby sample updates
Merge with default and updates to README
Merge bug 23597 into default
Merge bug 23597 into default
Reworked Ruby examples to allow more flexibility in the topic examples. Still need to document this
cosmetic
better error handling
rabbitmqadmin show overview
add specs and move frame analysis from reader to command assembler The latter avoids a mutual dependency between the reader and command assembler.
renaming
replace rabbit_framing_channel with tiny state machine ...which we store in the reader's process dict
refactoring in preperation for eliminating the framing_channel process
remove confirm.select{multiple}
faulty logic
amqqueue confirms in batches
merge from bug23612
confirm sequences of messages in channel
Further notes on settlement and flow control
Merged default into bug23445
Changed exchange callback API for transactions
remove references to confirm.select{multiple}
merge from default
Whitespace change in order to force correct head of default
remove dead code
move another confirm into VQ
removes form the msg_store cause confirms to be sent out immediately
fix tests
Merging default into bug23554
simplify variable_queue:ack's return format
Abstraction
It's called port. Not server_port.
Merging bug 23634 into default. This makes ctl list_connections list all connections in a cluster, but I think that's more logical anyway and makes it match the behaviour of list_queues and list_exchanges etc etc
And points for obviously merging things to default without running the tests are awarded to Simon, whilst points for not making the change in the first place and not running the tests are awarded to Matthias. Good jobs.
Merging default into bug23554
Cosmetic.
Merge in default
Comment
merge bug23586 to default
So httpc is a bit racy when HTTP/1.1 is used. Switch to HTTP/1.0 and go much faster.
Fix distclean
Matthew says we really need that check, so make connections() return connections from all nodes.
Fix a couple of examples
rabbitmqadmin list <type> [<column> ...]
Emulate original behaviour more faithfully
Make the addition of slave nodes more robust. This is especially important for recovery of durable queues
Don't attempt to verify the pid represents a connection.
Merge bug23632 into default.
include Creation field in string representation of pid in order to preserve pid identity through ser/deser, particularly when the pid is remote
idiot
Use amqqueue:store_queue/1 so that we modify durable queues durably
Make the Erlang tests pass again
Correct all manner of crazy wrongness with maybe_run_queue_via_backing_queue. The principle problem is that the state with which the function is to be run is dependent on the caller. Sometimes it's the 'top level' BQ state (eg invocations called by amqqueue_process). Sometimes it's the 'bottom level' state (eg invocations called by vq or qi or msg_store). We didn't used to have multiple layers, but now we do. Consequently, the invocation must indicate 'where' the fun is to be run. The clearest explanation is in master:invoke/3
Cosmetic.
Split rabbit_access_control up.
Split rabbit_access_control up. Functions that are facades onto the auth backends stay; functions that manage users and permissions go to rabbit_auth_backend_internal, functions that manage vhosts go to rabbit_vhost.
Format exclusive consumer pids so we don't blow up.
Also log the error.
Report the proplist we were trying to encode when an encoding error occurs.
Fix random range
Merging default into bug 23554
merge bug23619 into default
Revert changes to all_or_one_vhost, they date from when I was trying to make the plugin own vhosts. filter_vhost will do all the access control, just as it always has.
Merge from default
Merge from default
Oops
More comments
Clean up
Merge from default
Oops
Delegate from remote to local as well as from local to remote
more typeoishness
typeoish
Test the badnodes case
the msg_store is responsible for confirming rejected messages
the msg_store is now responsible for confirming messages
Remove R14-ism. Also, cute feature - if you specify no nodes by name, you mean all known nodes
Give in and have the master put the pub msgs themselves on the gm. Avoiding this proves far too complex in all the failure cases (the worst being when the publishing node crashes - the master can receive the msg, but not the slaves. Worse, because of complexities like delegates, it's not even straightforward to monitor the publishers in order to be sure we're not going to receive more messages from them). We continue to have all msgs directly routed to all queues. Yes, this means that normally every slave receives every message twice, but this is genuinely the simplest and most secure route and protects against failures the best.
Smaller change by exact reimplementation of crypto:rand_bytes/1
amqqueue_process shouldn't confirm when a message is basic.got (it's the BQ's problem)
Revert the previous changeset as I've decided to solve this differently
remove confirming of undelivered immediate messages from amqqueue_process
merge heads
merge default into bug23619
Merged bug23358 into default
Merge bug23358 into default
rabbit_misc:rs/1
cosmetic
treat nodedown as a recoverable error
Legible error message.
cosmetic and minor refactor
Tone down the name a bit
Minor tweaks
Fix warnings
Merge bug23606 into default
Shuffle some functions round for a more natural order.
Merge from default
Remove dependency on crypto in webmachine
Reduce dependency on crypto module
Right, well the fake handling code in master is fine. The fake handling code in slave is utterly wrong. However, I need to sleep
merge bug23598 into default
make match more precise - any other result is an error
cosmetic
fix msg_store losing confirms
Treat localpids even more specially, and save 4 lines in the process...
optimise
When you send a msg to another node, if the local node doesn't already have a connection to the destination node, it has to contact epmd and try and resolve the remote node. This takes time. Thus, in the event of a distributed gm group, it's very important that we record asap when a member dies as that member might be our downstream, to which we're sending, and it might be on another node. Thus promote the DOWN messages. Because of the inherent races going on, gm is built to cope with this anyway. This has the nice benefit that promotion of slaves to master in the event of failure of master is now pretty much instantaneous
Fixed a bug caused by revision 454fbb9127bd in rabbit-ha from where gm.erl came; Make gm_tests more robust; Avoid creating endless funs all the time for every message (substantial performance gain). Abstract use of dicts - expected use case is relatively small groups, thus orddict would normally be more appropriate
Substantially reworked delegate
merge default into bug23606 dealing with the "don't add details when the obj wasn't found" case is slightly more involved here
don't add details to Objs we didn't find otherwise we end up returning data instead of an error
fix test breakage - rabbit_management depends on amqp_client
merge default into bug23606
oops
minor refactor: one comprehension is better than two
cosmetic
merge default into bug23606
include consumer_details item even when there are no consumers since the UI complains otherwise about an undefined value
Merging default into bug23554
fix bug in consumer_delete event emission on queue termination This caused rabbit_mgmt_db to explode as it attemps to format a consumer tag as a pid.
Adding documentation
Ensure that promoted slaves monitor the queue's exclusive owner
Fix a race condition that can occur on queue deletion. Also change boot order to make sure the msg_stores are started before us (and thus stopped after us)
Accidental unification going on of two things named Q; fix a bug which led to repeated calls to BQ:delete_and_terminate (which turns out not to be idempotent)
Multi-headedness tends to be clearer
oops
pub acks do not carry any content.
That might just be enough to support confirms
Clearer error message.
Use randomly generated nodenames in batchfiles
Correct places to do confirmation stuff
Support maybe_run_queue_via_backing_queue in the slaves, and add some comments about where to deal with confirmations. I think. Assuming my understanding of pubacks is right.
fixing .app file
merging in from bug22969
Large-ish merge from default.
Permit dynamic inspection of the current mirror queues. This isn't particularly lovely because the master queue itself does not know, and thus has to do an mnesia read. However, for the time being it should do
merging in from default
fixing ignored tests
extra_pids => mirror_pids; Also rip out changes to the registry and just hard code that rabbit_mnesia takes care of gm - the problem being that we need access to the table dfns even when rabbit app is stopped, thus the registry would be down
even better
nicer handshake_recv; fixing copyright in client properties
merging in from default
merging in from default
some renaming; inlining handle_down
Make use of the wonderful new registry.
Merging default into bug23554
Move the various files from rabbit-ha to rabbit-server as the ha work can't exist as a plugin
Unforgeable user-id.
Merge heads
Somehow we didn't specify we depend on the Erlang client. Oops.
Ignore heartbeat timeouts in closed state.
Re-order prop list for consistency with other usages.
Fix UI mess.
cosmetic
merge default into bug23606
cosmetic
cosmetic: shrink whitespace
augment_msg_stats_fun must not repeat props
merge default into bug23606
follow SASL PLAIN spec, unbreaking things The offending code was introduced in bug 23467. It can never have worked.
fix breakage due to recent API tweak on server (changeset 50ad52dff3c7)
simplify
first cut of a saner stats merge/augmentation logic
merge bug23232 into default
merge bug23232 into default
Distinguish between two ways of listing vhosts for users. Tests now pass!
Distinguish between two ways of listing vhosts for users.
Put in Matthias's changes.
Deal with DOFF properly
Send acks to publishers.  Deal with utf16 addresses.  Clean up settlement a bit (I think there's an off-by-one in there though.)
Fix heartbeat size and encode large compounds
Don't use re where it can be easily avoided in the plain auth mech
Fix up train-wrecked Mercurial auto-merge.
Cover the case of non-admin, read.
Don't blow up if the queue goes away before we get there.
inline
Merge bug23341 into default.
Merged bug23566 into default
Merge from default
Merge from default
Merge from default
Spec fix.
This is really a protocol error
Merged from default
Make refused and protocol_error cases more symmetrical.
merge default into bug23232
oops
get rid of the special 'none' stats type
more sensible field order
global option does not exist in R12B3.
Merging default into bug23554
Simplify code surrounding the return from BQ:ack
improve consistency of API
The arg to duplicate_node_check is always a string, and control:diags requires a real node
cosmetics
Merging heads
Do not, ever, use lists:concat. It does not do what you think
Confirm rates on overview and channels list. Not sure whether it's a great idea to add it elsewhere in the UI; showing per-queue and per-exchange confirm rates feels quite odd.
Merged bug23506 into default
Merged bug23506 into default
Make rabbit_stomp explicitly an application, remove start/0 and stop/0 that don't seem to be used anywhere.
Extend state conversion function
Mereg default into bug23566.
Merged bug23467 into default
Merged bug23467 into default
Merged bug23467 into default
Merged heads
Merged bug23467 into default
Merging default into bug 23554
Essential cosmetic
Cosmetics.
Put this back.
Slightly off-topic, but: move the applications listing into -agent like everything else, lose a dodgy RPC call.
Slightly off-topic, but: move the applications listing into -agent like everything else, lose a dodgy RPC call.
Show which auth mechanisms are enabled.
Show which auth mechanisms are enabled.
Merged bug23591 into default
Windows prelaunch with short node names
Merge from default.
Alter the result of BQ:requeue so that it also returns the guids of the requeued messages. This makes it match the spec of ack closely and is more logical. Also, entirely coincidentally, happens to be necessary for HA...
Edited, changed default branch by mistake.
Made emit_stats a handle_info function, not info_cast.
cosmetic
Ensure we can cope with no specified nodename (misc:makenode takes care of this); ensure we start the prelaunch node as a distributed node (same trick as with ctl); the absence of epmd is subsequently a fatal error
Merging default into bug23554
Removing tabs. GRRR
Merge bug23511 into default
cosmetic: put methods in more sensible order
cosmetic: avoid confusion between acks and pubacks ...by consistently labelling the latter as 'confirms'
Merging in from default
Contract will be process is already trapping exits
Predictions of parameter explosions are high
Turns out the memory_monitor and fhc callback registration is idempotent, and it's also just simply easier to correctly fake the amqqueue_process API. Need to then deal with rate timers and pre hibernation callbacks. Groan
Permit queue processes to be initialised with existing state. This raises the need for the ability to change the callbacks in rabbit_memory_monitor and fhc
Correct wrong comment
UI improvements.
Allow PUTing users with password, password_hash, or neither.
Increase the probability that the above works
Allow gen_server2s to change their callback modules dynamically. That was easy.
add stats again; update docs
Clients can now override frame_max in RabbitMQ server.
List comprehension in Mnesia upgrade functions to cut code duplication.
Merge from default.
Merge from default.
UI for not having a password.
Allow either password or password-hash in both all-config and individual user PUTs.
On other node death, don't delete queues which still have some extra pids.
Forgot this depended on 23467, so we can mention EXTERNAL.
Add a TODO
rabbitmqctl clear_password <username>
Provide a means for plugins to add extra tables which are looked after by rabbit_mnesia
cosmetic: move unpacking around in channel:deliver
cosmetic: get rid of channel:internal_deliver
moved maybe_incr_stats to basic_return
cosmetic: Simplify channel:internal_deliver, notify is always true
Get rid of -import() statments.
merge bug23482 into default (Detect already-running broker)
Cosmetic
Merge default into bug23201.
Add 'return' stats
Add 'return' stats
SSL protocol / algorithm information.
SSL protocol / algorithm information.
Error message readability
Remove redundant code
Perform duplicate node check in a function
Cope with absence of epmd while performing pre-launch checks
A treatise on bookkeeping, and try to keep better books on session lwm.  (And don't reduce delivery tags to one byte)
Also output the ulong descriptor for types
Reimplement or manually merge all past changes for 23329 onto new head of default. In general the code's a bit cleaner due to better apis within msg_store generally
Demonstrate protocol_error.
Better diagnostics when authentication fails.
Merge default into bug 23554
Merge default into bug 23554 (epic debitrot)
Rip out old persister as it no longer works given the arrival of pub acks
Correction of specs.
Minor correction
add missing case
add stats for confirms
Doc tweak.
cosmetic
cosmetic
Show consumers for channels and queues.
Fix
Consistency with other events.
Cosmetic
Fix
Oops.
Add consumer created / deleted events.
Show permission-denied errors more clearly.
Remove ACL-based example; it no longer works and ACLs are probably a really bad way to do this.
Tweak docs again.
Allow anonymous bind.
Support login without password (for SASL EXTERNAL).
in_group query.
${user_dn}
Do authz queries with an admin account.
Consistent prelaunch checks on windows
Uh, bindings don't figure.
More doc tweaks.
Redid bug23056 changes atop newer base.
cosmetic: rename field/var
cosmetic
Improvements to documentation
Merged heads
That looks better. Sadly %%VSN%% always made it big enough to look right anyway...
Add method name into the error tuple.
Simplify
Only look for AMQP errors in exits.
Remove quotes
More robust SASL PLAIN parsing - cope with any number of \0's being present without falling over.
Catch all types of exceptions, preserve the stack trace in the event that we have a non-AMQP error.
Merge heads
Merged bug23532 into default
Tone down the claims in the optimisation comment.
Overhaul for bug23568
Merge from default
Overhaul for bug23568
Merge from default
Merge from default
Overhaul for bug23568
Overhaul for bug23568
Merge from default
Overhaul for bug23568
Merge from default
Merge from default
Merged bug23565 into default
Added cosmetic change suggested in the bug report
Just mark this as TODO since I can't seem to make much headway with it ATM.
I don't think this was there for a very good reason.
Merged bug23567 into default
fix to compile and run under R12B5
simplify multiple confirm code
merging bug23561 into default
fixing some merge conflicts
merging in from default
Merging bug 23057 to default
(Untested) implementation of implicit-settlement-via-LWM.
Nicer still.
A better way to depend on the framing header.
Merged bug23448 into default
Enable our destination scheme for outgoing links too, including subscribing to exchanges
merge default into bug23201
Session credit bookkeeping, "backed" by basic.qos (except that's obvs not linked to the bookkeeping), bug fixes.
Diagnostics on node start failure
Remove should_offer/1.
Treat outcomes as a list of symbols, not objects.
Some cosmetic fixes and a test for the pub ack functionality
Rename plugin_activator to prelaunch
Check if nodename is available before startup
Removed tests for requeue=false since we don't support this now
Fix one more warning.
Fix unused variable warnings.
Merge bug20284 into default
Merged bug20284 into default
Merged bug20284 into default
Rename the env to match the broker
Fix coexistence of 1-0 and 0-9-1 on the same socket.
Deal with disposition (apply to whole of first..last, and only send a reply if not settled)
Basic attempt at sending protocol errors.
Add backing_queue behaviour to common ez
Sort modules alphabetically
cosmetic: put rabbit_net exports, specs, and funs in sensible order and consistent too
Move _fragmentation to _message, since it's about more than just fragmentation
experiment with uing {active,once} instead of prim_inet:async_recv
Get the arguments to regexp:split around the right way. Ops.
Codegen up some defines as well.
Exposing the publishing chpid right through to the BQ (and tidying up tests/types/specs)
Addressing for incoming links (needs work ..)
More detail on outcomes, start to refactor to do errors.
Added tag rabbitmq_v2_2_0 for changeset 3e5ccd8cdb02
Added tag rabbitmq_v2_2_0 for changeset 328ce5ce874a
Added tag rabbitmq_v2_2_0 for changeset 429782c8c77d
Added tag rabbitmq_v2_2_0 for changeset 344b5cf4618d
Added tag rabbitmq_v2_2_0 for changeset 2ab697a72bed
Added tag rabbitmq_v2_2_0 for changeset d17256b0e979
Added tag rabbitmq_v2_2_0 for changeset db3e62c7906d
Added tag rabbitmq_v2_2_0 for changeset c9a2e7f3f5e9
Changelogs for the 2.2.0 release
Less repetitive, better deps.
Really simple codegen. You need branch bug23557 of rabbitmq-public-umbrella now.
Make the tests work again. Also mirror_pids => extra_pids on the basis that it could be reusable for other purposes
Shuffle things around in preparation for codegen.
Transfer numbers are session-scoped. Also fix up settlement so it kinda works now.
Lesser of many evils...
First pass at settlement for outbound links.
Don't slander the Python client.
Oops
TODO
Slight improvements to flow control bookkeeping.
Introduce some abstraction, reducing duplicate calls
Present the whole amqqueue record to the BQ (remove duplicated IsDurable flag, correct BQ callbacks)
Present the whole amqqueue record to the BQ
Added mechanism to dynamically choose the backing queue module. Ideally, this'll end up using the generic registry that's part of bug 23467 and allow plugins to register this stuff on boot
bug23551 merged into default
So those tests should have failed long ago when I removed send_oct et al from /overview, but... Erlang claims 0 < undefined. I disagree. Fix that, and make sure we would catch bug 23551 if it happened again.
flesh out writer API for completeness
flesh out writer API for completeness
Scope, what scope?
Checking the unformatted/augmented ID only works for exchanges (since queues are just pids at that point. Check the formatted / augmented version instead.
Introduce file_handle_cache:get_obtain_count and get_obtain_limit.
Match realm names, don't ask for creds twice.
Visual fix
Don't fall over if delivery mode is unspecified. We can now publish from 0-9-1 and receive in 1-0.
Use undefined everywhere internally rather than null, for compatibility with 0-9-1 and because it's more Erlang-y. Use null still "below" framing, since at that point we're talking in terms of the AMQP 1-0 type system.
Mark DUBIOUS.
Use a bare list for 'multiple' valued fields, e.g., fragments
Reworked error identification and receipt handling. Receipts are now sent only on success
Add transfer states. And a nagging feeling that we should really be doing some codegen.
Merge heads
Use record for source, so it's encoded properly
Unbreak management by recording (probably empty) client props
Send a more reasonable header / properties / footer on the way out.
Some scaffolding for interpreting sources and targets, more types, and encoding of maps as well as lists
Make a stab at parsing the properties on the way in. Sadly the Python client just sends null, null, null ATM so this doesn't test very well.
Beginning of message fragmentation support. This is badly wrong, but less wrong than before. We now don't mangle message bodies on the way in.
cosmetic
Merge with default
Cosmetic
merge with default
cosmetic
Heartbeats, stats, some connection parameter negotiation
cosmetic
merging heads together
Merge bug23548 into default
cosmetic
bug23547 merged into default
Prevent hibernation until we know under which circumstances to hibernate
Opps, they shouldn't have got there...
Opps, they shouldn't have got there...
Cope with files not existing (or just being empty)
cosmetic changes
No need to open these files at all exclusive. Which is an R14ism anyway.
Abstract out file locking, and revert to not using the R14-ism exclusive flag
Use the Erlang client for receiving too.
Make sure we get the stacktrace out of a boot failure
Fix receiving - we need a version of send_command_and_notify that doesn't use a content frame.
Convert the publishing side to use the erlang client.
Updated portfile as suggested by macports guru
Indentation
A few more tidy-ups; in particular, account for 'multiple' fields.  Should really use the direct mode client, instead of trying to do our own basic.publish etc.
Allow queries to be different for different kinds of thing. TODO: explain what I'm on about.
The resource is not a string.
Now can connect, open, attach.  More borrowed from rabbitmq-server.
Simplify init/1.
let frame interleaving happen but still optimise the delivery of short messages
Only use one microlanguage for variable substitution.
merging heads of default
merge from default
change order of tuple elements
Dammit.
exit -> throw seeing as bug 23535 is invalid
cosmetic
Merging bug23519 into default (again)
hgignore
Supervisors supervisors everywhere.  Mostly borrowed.
Mnesia upgrade to convert user to internal_user records. Painful since the built-in Mnesia upgrade system does not let us change the type in a table.
Application of M-Q
Refactoring
bug23485 merged into default
Cosmetic
cosmetic
gratuitous cosmetic
cosmetic
Merging bug23519 into default
Add helpful comment about windows flushing to rabbitmqctl
cosmetic + handle missing case
Slower rabbitmqctl shutdown on windows flushes output
Merge from bug23467 (and hence default)
Merge from default
Use the new spec
Spec stuff.
Don't allow the backend to grant access to a vhost which does not otherwise exist!
Tiny simplifying refactor.
remove redundant record field
Merge in from default
Remove duplication.
blocking connection methods as well
replying with an error when user app attempts to use amqp_channel:{call,cast} with channel.open, channel.close or basic.consume
general refactoring in amqp_channel; checking if tag is already in use, on subscribe
Merging bug 23335 into default
Merging bug 22692 into default
Rather more documentation.
Merged bug23494 into default
It's rather crucial to call reduce_memory_use at the end of publish_delivered if we've added to the acks. Also reorder items in backing_queue_status so that they fit better on my 160-char wide xterms. It's also a bit more logical
Merging default into bug22692
cosmetic
merge bug23531 into default
Support a simple LDAP query. We can now control authorisation via LDAP.
A few fixes for compiler errors
Initial revision.  Not even compiling.
rearranging functions in amqp_channel; for ease of QA purposes, there is no other change other than suffling the order of functions, in this changeset
fixing referencing channel by number in LOG_WARN messages
Merging bug 23058 into default
Use internal_send_command, since we're sending to a 'raw' socket
merging in from bug23058
extending timeout for method serialization tests
Offer tx and non-tx exchange hooks
Merged bug23293 into default (again)
And, err, merge heads.
Merge amqp_0_9_1 into default.
Merge heads of amqp_0_9_1
Start of queries, only trivial ones for now.
re-merge bug21377 since it had a dangling head
Allow Module:check_vhost_access and check_resource_access to return error tuples too.
merge heads
Get ACLs working, add a less privileged user.
Fix some whitespace issues, add a note
Merge bug23186 into default
Merge bug23513 into default
Make setup.sh really reset everything, start to set up some objects we could attach ACLs to.
Close the connection when done, does wonders for your number of file descriptors.
Add more configuration.
Remove user / vhost links. They're not particularly useful, consistently applied, or likely to work when a non-admin is logged in.
Add a note
Let an auth plugin specify which vhosts a user can see.
Compatibility.
Let an auth plugin specify which vhosts a user can see.
The simplest thing that could possibly work. You can authenticate as an LDAP user, but there are plenty of limitations.
Allow auth backend modules to fail
Fix accidental renaming of an info item.
Improve consistency.
Export the behaviour so plugins can use it
Merged bug23467 into bug 23455
Export the behaviour so plugins can use it
Further busyness reduction.
Reduce busyness of overview page a bit.
Backed out changeset 8f9ce5c24979 (reinstate FQ function names)
Merge bug23523 into default (rabbitmq-asroot-script-wrapper is pointless)
Not sure that's the right approach but at least a) EXTERNAL works via pluggable backends now and b) I've got it out of my head.
Since I'm here, improve display of common errors.
Remove ?MODULE in front of directly-applied local functions
Matthias did not like the way mandatory args were handled, so it had to go
Port across the fix for bug23440, which was in rabbit_stomp_server.erl
Initial checkin. Nothing to see here.
Increase the amount of correctness
Move HOSTNAME and NODENAME to rabbitmq-env
Remove OS-conditional and use hostname more conservatively
These should really be binaries. rabbitmq-erlang-client on default allows you to get this wrong. We don't now.
Be consistent about refused return
Be consistent about refused return
Merged default into bug23467
Merged default into bug23467
Umm, these are probably important
Changes for pluggable auth backends
Changes for pluggable auth backends
Rather impressionistic sketch of how pluggable auth backends might start out.
Make scripts work on Solaris
Remove untrue statement
Use relative links to /api to make the app relocatable by proxies.
Update the documentation
Remove more AMQPish records.
Replace most creations of AMQPish records with use of rabbit_mgmt_util:http_to_amqp/5. Trim down tests quite a bit to only use manadatory args or ones we care about.
Remove rabbitmq-asroot-script-wrapper
Stop mnesia while taking the backup
Take a backup before upgrading.
Minor refactorings, and a couple of fixes
Merge add_internal_to_[exchange|durable_exchange] into single upgrade function.
One head is better than two
Merging bug bug23498 to default
Merging bug23505 into default
Merged bug 23424 into default
Show "None" if no exclusive owner.
Cleaned up stray heartbeat stuff and set backlog tcpopt to 128 to handle more incoming connections
merge heads
oops
minor optimisation: ask for next piece of data before processing This reduces the likelihood of the reader process stalling, i.e. ending up in 'receive' when there is nothing in the mailbox.
remove some cruft in reader, and some minor tweaks
Add Mnesia db migration for rabbit_durable_exchange table.
Merge from default.
some routing optimisation - handle the very common "message goes through single exchange" case   specially - use a gb_set in all other cases - it performs much better than a set   for smaller sets, and not too badly for very large sets either.
Rethink what a facts table should look like, hide bindings by default, unify purge / delete section, other visual tweaks.
merge from default
refactoring
fix confirm after basic.reject{requeue=false}
cosmetic: remove superfluous imports
Merge bug23460 (idle times)
Merge bug23460 (emit hibernate time in stats)
Fix rabbitmqadmin, config import, and tests. The first two are trivial, the last is a mess and convinces me to start work on bug 23384.
Document bash completion.
Had this sitting around for a while; may as well commit it. Small refactor and bash completion for rabbitmqadmin.
Fixed issue with arbitrary headers not being included in MESSAGE frames
Throw rather than return errors
Merged default into bug23498
Matthew points out that erlang:now() can be rewritten as now().
Added queue_ttl upgrade
Merge bug23488 into default (Remove rabbit_misc:intersperse)
fixing license in amqp_network_connection
Don't let 'acronyms' look clickable
Display idle_since pseudo-info-item.
Reoprt idle_since pseudo-info-item.
fixing merge conflicts
merging in from default
merging in from bug23058
cosmetic
Fix
merging in from default
Minor cleanup
Don't open a security hole if server is misconfigured.
Fixed windows scripts
Specs.
Merging bug 23496 to default
Merge bug23498 heads
Fix default config
After reading RFC5802 I'm not convinced this approach can be salvaged (in a sensible amount of time) so let's replace it with something that is a simple demo.
Merged from default
merge bug23495 into default
bug23501 merged into default
bug23501 merged into default
EXTERNAL mechanism
Fixed thinkos in calls to string:join.
Merged bug23493 into default
Merged bug23493 into default
Update HTTP API help page with internal exchanges.
Rearrange queue lengths / message rates a bit, make it a tiny bit less bitty.
Support internal exchanges in management plugin.
Replace catch with try; we want to show all kinds of boot errors in a readable way.
Remove the beginning of the per-mechanism options thing, in the interest of getting this thing finished.
attempt to correct specs
Pluggable auth mechanisms in the Erlang client, with PLAIN and AMQPLAIN implementations.
Merge bug23354 (remove xmlto and half of universe as macports deps)
merge default into bug23498
cosmetic
make build_acyclic_graph return errors and refine types
Hide applications by default
merge default into bug23498
cosmetic
use {error,_} returns and throws instead of exits
Make the erlang client build again
For non-admin users only show message rates and total queue sizes for vhosts they have access to.
Make the case where no contexts are installed clearer.
Make it clearer where things come from
List contexts without descriptions. I think doing it this way makes more sense than adding descriptions, since the JSON-RPC contexts which are like this are no good to click on and for more advanced users anyway.
Hide information on nodes and listeners from non-admins.
Typo
Don't use records or record_info, explain why
Fixed whitespace error
Merge with remote
Fixed missing version header in CONNECTED frames
Merging bug 23481 to default
exit->throw, *_or_exit -> ensure_*, and some cosmetics
move around and correct digraph builder types
remove superfluous spec
Merge with default
Rename target_ram_msg_count to target_ram_item_count
Correction of specs
Removed stray references to target_ram_ack_count
Reinstated the infinity check for chunk_size
Added assertion in limit_ram_acks for is_persistent=false
Correction of specs
Update rabbitmqctl docs adding 'internal' to list_exchanges.
Add upgrades for password hashing and listeners having IP addresses
Make rabbit_exchange:infos aware of internal exchanges to support rabbitmqctl.
Merged heads
Merged bug23484 (Remove duplication of heartbeat logic)
Merged bug23484 (Remove duplication of heartbeat logic)
No longer needed
Make peer_cert_* info items into binaries; remove the special-casing of string-y lists as not escaped.
Merging bug 22573 to default
Makefile and generate_deps now more robust.
Remove unused function
Merging bug 22614 into default
Safekeeping commit; never try and build this version.
exit rather than warn if future upgrades are found.
Switch spawn order of channelsupsup and queue_collector within connection_sup
Some inlining, and ensure that we limiter:deregister on ch_down (yes, limiter will be dying anyway, but it's more obviously correct in the amqqueue_process
not_allowed -> precondition_failed
merge bug23476 into default (replace rabbit_dialyzer with dialyze command)
merge bug23476 into default (replace rabbit_dialyzer with dialyze command)
Comment formatting with M-q and no need to use ++ for multiline string constants
don't confirm messages on requeue
Cosmetics
Merge with default
Added some extra polymorphism inside rabbit_ssl.erl.
Merge with Matthew's cleanups.
What this was all about: show SSL details on connection page.
basic_cancel now unregisters limiter whenever consumer count zeroes; ch record updates now require zero unsent message count as condition for erasure.
use command line dialyzer instead of rabbit_dialyzer
merge bug23475 into default (eliminate dialyzer errors)
generate_deps takes file args from stdin
add a few more apps to basic.plt This gives us no missing funs when dialyzing the rabbit code base, and very few when building the plt itself.
don't check behaviours - the check isn't ready for prime time yet
merge default into bug23476
Reworked heartbeating to use the rabbit_heartbeat module
This is more reliable on my MacBook
More patches against stomppy for the tests
Fixed up use of new heartbeat API. Corrected capture of PIDs for ReceiveFun
Merge with default
Reworked heartbeating so that it really works again and so we can specify different timeouts for send/receive
Removed rabbit_misc:intersperse; changed clients to call string:join instead; hope that's okay.
rabbitmq-managment's loss is rabbitmqctl's gain.
rabbitmq-managment's loss is rabbitmqctl's gain.
Keep knowledge of sockets in rabbit_net
Move internal exchange implementation over from other laptop.
Make peer_cert_* info item strings into binaries like everything else.
Add an "ssl" info item.
Beginning of a config mechanism.
Fix that...
Minor moving about and cosmetics
Make use of the returned value from maybe_store as an assertion, as suggested
Merge bug23466 (add rabbit_types:{info_keys,infos}).
Remove extraneous whitespace
Prevent a very difficult-to-trigger race.
May as well make the table wider
Reinstate user_pass_login/2, the Erlang client depends on it.
generate_deps should no longer trip on detritus.
When something unknown fails opening connection, keep the stack trace - otherwise you can just get {error, undef} back which is not terribly useful.
Refactor update_ch_record into maybe_store_record and make its use universal.
Reworked start_heartbeat_fun to allow a different timeout for send/receive heartbeats
List exchange types and auth mechanisms
List exchange types and auth mechanisms
Added rabbit_types:{infos,info_keys} and used them as appropriate.
Strip out the plugin-disabling mechanism
Spec fixes
Mostly working EXTERNAL implementation
Don't allow a client to select a mechanism we decided not to offer.
Updated erlang client to use refactored heartbeat API
Fixed up the specs for the heartbeater
Refactored rabbit_heartbeat to provide start_heartbeat_fun
Document auth_mechanism info item
Show auth_mechanism info key
Add auth_mechanism info key
Improve function naming and handle other potential leak spots in channel record updates.
Fix use of file:open/2
Basic heartbeating for both server and client
Updating outdated comment
Check both our version and the remote version. This is TRTTD I think, and has the side effect that we write our version out on the subsequent node.
Merged from default
Document a bit more
Get the name right
Add our slightly flaky demo challenge-response mechanism, and update APIs etc to cope with it.
Clean up trailing whitespace.
basic_cancel and channel_down handlers use new helper methods
Move function to be among its relatives.
Merging bug23480 into default
Add helper functions to clean up ch records.
tweaked test case to better exercise negotiation
test for prefetch with topics
Reworked ack handling to be inline with the 1.1 spec. Re-introduced the prefetch-count header to make ACK more useful
Version negotiation
Merge bug23341
Merged tiny bug fix that I missed earlier
Partially complete version negotiation
Only show vhost list and vhosts in lists if they're interesting.
Utility for calculating the maximum version shared by the client and the server
Add nodes
It is important that each release look slightly different.
Total queued messages
Add more facts about each node: Erlang version, uptime, number of CPUs, run queue length. Refactor the node list a bit.
Add more facts about each node: Erlang version, uptime, number of CPUs, run queue length
Switched to using the host header as defined in the 1.1 spec
Removed stray io:format line
refactor: extract shortstr size check
don't check shortstr size on decode since it is guaranteed to fit
Add a mechanism to remove plugins from the registry. The intent being that people might want to disable PLAIN and enforce MY_COOL_MECHANISM, but PLAIN is not an .ez file so you can't just delete it. This also lets you disable built-in exchange types if you *really* want to.
Updated the readme
Fixed the persistent sender example
Merge bug23374 (deal with clustering)
fixed the perl RPC example
Fixed most of the samples. Other fixes require some consideration
saner enable_cover and report_cover funs, and saner specs as a result
Cope slightly if the statistics database is down.
Import configs exported by 2.1.1.
Refactor a bit, have the first cluster node fail if version is wrong
merge from default
confirm messages on queue purge
Remove the db monitor.
another attempt at fixing the type specs for enable/report_cover
fix another spec niggle
yet another spec error
fix a couple more spec errors and a genuine bug (lists:concat vs append)
run dialyzer command instead of programmatic invocation
correct some more specs
appease dialyzer The code was perfectly ok before but dialyzer didn't think so.
document obscure case clause dialyzer complains that one of the clauses is unreachable
yet more spec fixes
correct type spec for pseudo_queue
merge heads
Backed out changeset 46b62f064eff apparently pseudo_queue is used by rabbit_hub
add wrapper for protocol specific types
export types in more sensible order and add some that were missing
fix another spec error
correct orddict type this doesn't actually work yet since the type isn't exported, but that will be fixed in a future OTP release.
correct spec typo
remove rabbit_amqqueue:pseudo_queue it's not used by any of our code and plugins anymore
fix spec error
add missing type export
there is no such thing as 'dict:dictionary()' it is just 'dict()' instead
fix a spec error in gen_server2:system_terminate/4 ...and some cosmetic spec changes.
backport upstream change to way print_event/3 is called The code previously relied on the ancient {ModuleName,FunName} syntax to denote functions. That is bad for dialyzer and also forces an unnecessary export.
Fix stats DB failover in the graceful shutdown case.
Emit events from here to the DB
Emitting events is needed in the agent, rather than here.
Move existing PLAIN and AMQPLAIN auth mechanisms into plugins.
rabbit_exchange_type_registry -> rabbit_registry
Check the schema version on disc as well as the integrity check when starting first disc cluster node
Merge with default
Ahem
Reworked ack shedding algorithm based on discussion with Matthew
TODO done
Merged from default
Merged bug23299 (Erlang internode communication fails with user_sup undefined)
Merge bug23370 (aggregated stats display)
Depend on rabbitmq-management-agent
Become rabbitmq-management-agent
Reworked to test to be more predictable
Refactor
Merge from default
Merged bug23370 heads
Merging bug 23030 into default
Make brokers launched from rabbitmq_multi.bat restartable
Merged bug23440 into default
non_neg_integer(), surely
Use rabbit_misc:now_ms/0
Add now_ms/0.
That was quite special
Clarification of the comments in VQ
a bit more clarification on the comments
Cosmetic change and first draft of comment updates
Purely cosmetic
more consistent error reporting on failed handshake; heartbeating is now started between connection.tune and .tune_ok; the network connection follows the closing protocol if it fails to receive connection.open_ok
fixing possibility of sending content-bearing methods after flow_ok{active = false}
Don't need _util and _format any more.
Remove dependencies from rabbit_mgmt_external_stats to anything else.
Forgot this
updating license boilerplate
Initial checkin (bug 23374-related).
merging in from default
Don't fall over if the other node is not running the mgmt plugin.
fixing failing qos test
merging in from default
adding more tests for ensuring proper method ordering
Added a test for the ram ack flushing. Tweaked the way RAM is shared between acks and msgs
Rebase 91a22ddea70a (Warn when a node does not have stats enabled at all.)
Keep the old behaviour when upgrading from 2.1.0 or earlier.
Merge bug23430 (license in headers)
Check the version we want matches the one a remote node is running before joining the cluster.
Removed stray TODO
clean up
Removed io:format calls
cosmetic: README is in markdown
cosmetic: avoid long lines
Create the schema version file in the case where we acquire the schema via the cluster.
merge with default
cleaned up some io:format
Roughly working ack shedding
Rather more tests of aggregation.
Further experimentation. Still not quite working
Refactor + simplify existing rates tests
Fix acronym appearance on FF
Simplify the exchange list
Merge from default
Merged default into bug23186
Merge from default again
Merge default into bug23374.
And, err, actually get running applications from appropriate node.
Remove applications from overview, and add it to a new per-node page. Add management version to overview instead.
Fix default
Calculating RAM duration takes into consideration ack rates
Starting tracking ack in/out rates
Merge with default
bug23416 merged into default
bug23416 merged into default
default merged into bug23416
bug23416 merged into default
Merged from default
Merge in default and resolve
remove repetition + formatting
Changing opaque type to normal type as it at least stops dialyzer from exploding. Dialyzer's findings are still wrong, but still...
Blow up if the upgrade does not leave us with a valid schema. Refactor several nested case expressions into one big one.
Missed update to rabbit_types.
Merging bug22069 into default
Merge bug23454 into default (Enabling stats prevents hibernation, resulting in excessive memory use)
Merged bug23458 into default
Merged bug23346 into default
Fix the test "suite" and rehabilitate the single test within it to actaully do something, albeit not much.
Merged bug23449 into default
Inlining to prevent running out of disk space by overly long source files
The tarballs are not both in the same dir! Also, move bashism out to a bash script (I'm not sure we can live without it).
Same as before - avoid unnecessary functions for pattern match
Merged bug23449 into default
Match the list: no need to use length
Merging default into bug22573
One head of default is better than two
Merging bug 23411 into default
Merge bug23368 (backing queue status)
Merged bug23419 into default
Removed unused defines
base64 encode the password hash since it's now raw binary, fix a couple of warnings.
Merging default into bug23411
Don't add the name MD5, don't base64 encode.
Channel was also wrong.
Bug 23346:  change appropriate usages of dict:find to dict:fetch in rabbit_[in]variable_queue.
Replace usage of dict:find with dict:fetch in rabbit_invariable_queue.
Revert the change to check_vhost_access/2, mostly. We used to pass in a password, but that was ignored. Do not pass in a password hash.
Revert the change to check_vhost_access/2
Add change_password_hash/2, rename hash_password/2 as it has little in common with hash_password/1.
Fix when we mean password and when password hash. Tests pass again.
Use MD5 rather than SHA2 to avoid embedding anything. Indicate hashing function in the hashed PW, just in case we change our minds in future.
Fix copy right info in Erlang files. Add copyright info to Python file. Add LICENSE files similar to those in rabbitmq-server.
tests pass
only wait for disk syncs for persistent messages on durable queues
merge from default
Authenticate the /mgmt/ context. Also fixes the internal server error on supplying username but no password.
Provide a mechanism to have authenticated static content.
amqqueue emit_stats should reply with 'hibernate'
Use 12B05-friendly conversion of atom to binary
confirm transient messages in the queues
update exchange and queue_exchange stats on confirms
Merged from default
Merged bug23453 into default (Memory usage should be green until it's above the limit)
Simplify a touch
Forgot to add
Try to tidy up some rather busy pages
Merged bug23293 into default
Memory should be green up to 1.0
more man page namespacery
Detailed message rates everywhere
really remove namespaces
Flatten the channel page a bit, show detailed message rates there.
Merge from default
Merged bug23442 into default
Show message rates for exchanges.
Show message rates per queue, rejig tables a bit to make them less wide
Add a comment to explain
Merged bug23446 into default
Merged bug23446 into default
Refactor the handling of get_xxx
merge from bug20284
Removing two heads
Merge from bug23422
merge bug23437 into default
Merged bug23218 into default (configurable server_properties)
Whitespace
Fix for bug23218
fixing methods overtacking each other
Refactor the grouping and augmenting stuff a bit, add some more experimental uses of fine stats.
updating license boilerplate in all files
Tiny additional test
Merged default
Fix a test
Display the backing queue status in the queue details page
Of course, backing_queue_status is not an *AMQP* table. Split rabbit_mgmt_format:table/1 into two for these two cases.
Merging bug23269 (build under cygwin)
Store listener IP address
Show listener IP address
Fixed the .app file
Make stomp appear in rabbit_networking:active_listeners/0.
applied emile's patch
Removed the old STOMP server code
backed out previous changes to man page stylesheet
Use the protocol field to indicate something useful.
Moved STOMP Headers -> AMQP Properties into util
Monitor the stats db and restart it (presumably on another node) when it dies due to noconnection.
Moved the AMQP Properties -> STOMP headers conversion over to util
cosmetic
Decided to move consumer tag processing in the end
Removed TODO. Decided against moving ConsumerTag parsing out to util because of all the useful context present when it is called
Removed TODO for completed task
Tests for longstr_field. Moved ack_mode calculation to util and added unit tests
Fixed another formatting problem
Fixed bad formatting and removed TODO that had already been TODONE
Switched to supervisor2 to get nice clean up of client supervisors
First cut of splitting the stomp adapter apart. Frame processing is now wrapped up in a gen_server
cosmetics
Document it
Remove idiocy
Reveal where the stats DB is.
Only use the caching mechanism for things that could possibly be expensive.
Show all the OS-level stuff per node.
Build on cygwin
Merged from default
Show cluster nodes and status, show nodes objects are on if we're clustered.
Add some hiders that were missed earlier
Register a single stats database globally in a cluster
Remove unnecessary SSL include
Merge bug 23408 into default
trivial
Merge default heads
Even more beautiful
Put a class on those divs, they keep overriding other things.
available -> high watermark
Get listener information from rabbit_networking:active_listeners
Minor cleanup
Merged bug23415 into default
cosmetic
remove unnecessary begin/end
Improve passing of state in tests (and correct some wrong state numbering at the same time. Oh for some monads...)
undo incorrect fix
msg_store:write does not alter the msg_store client state
If Terms differs from Terms1, then it'll be because there was an issue in recovering the msg_store client refs from Terms. Now given that the terms are stored in the clean_file_name, there's a possibility that we crashed _during_ writing the clean_file_name (e.g. ran out of disk space). Thus we could then read in a corrupted terms file, set Terms1 to [], but still think we terminated cleanly (as we could delete the file). However, in that case, qi:recover/1 will detect the error when reading the terms file and will not try and present those terms as client_refs to the msg_store on startup. At which point, the msg_store will record dirty shutdown in its state, and then qi:recover/4, at which point the qi will do a dirty recovery. Thus in conclusion, the structure of the term file essentially forms its own checksum: if it's parsable then the data in it is trustable. Consequently, it doesn't actually matter if we pass in Terms or Terms1 here, but Terms1 is more intuitively correct
Various API changes
Various API changes
Various API changes
Hash passwords.
whitespace
Merging bug 23429 into default
Plugin arguments for windows service
application:get_env/1 -> application:get_env/2
Remove hack
Merge in default
Merge bug23319 into default (remove client scope)
Merge bug23319 into default (remove client scope)
remove references to cluster_config_file
Abstract graph construction
merge from default again
merge from default
merge default into bug23408
merge bug23344 into default
cosmetic
Specs.
Refactor and document upgrades_to_apply/2
Rename variable
Fix copyright statements
Match more return values, and reindent
Undo 522af2a24c5e, wait_for_tables/0 in fact may not have been called
Various stylistic tweaks + cleanups
Rename module.
Use two pools of delegates, one for each of outgoing and incoming messages. Prevents deadlocks.
Merge bug23402, suppress binding and delete UI for default exchange
GC no longer needs to know about its parent msg_store. Thus fold the parent into the opaque state
cosmetics
refactoring: comprehensions are easier to comprehend than folds
merge default into bug23408
cosmetic: whitespace changes only
merge default into bug23408
cosmetics and minor refactoring on code from recently merged bug23111
merge default into bug23408
correct msg priorities
oops
minor refactor: lists:filter -> list comprehension
major refactoring of gc logic - separate handlers for file deletion and combination, both using a   helper function to clean up after file deletion. This makes it more   obvious what's going on. - shrink the API by including the call back to the msg_store in the   gc functions, rather than having a separate call back step.
Use siblings of mnesia dir
wait_for_tables has definitely been called by this point (in check_table_integrity)
Merged from default
Only attempt upgrade if we are *really* not clustered.
Only attempt upgrade if we are not clustered. wait_for_tables() beforehand should thus be safe.
Merging bug23111 to default (again)
Rather than kicking off the ttl timer on recovery, actually drop expired msgs. Also, drop_expired_msgs when we get a stat call, which comes in from queue (re)declaration: i.e. ensure that at the point of queue (re)declaration, the counts are correct
Ensure at start up, if we have msgs (i.e. recovery, not creation), and a TTL, then we should kick off the expiry timer
Merging bug23111 into default
Remove unnecessary branch. Also, assertion of q3's emptiness is unnecessary as the rest of the code works perfectly well even if q3 isn't empty
small refactor
refactor: merge combine_files1 into combine_files
cosmetics and minor refactoring
Simplify conditional and use the right state
Merged bug23331 into default
Correct spec for sync(), and some cosmetics
Cosmetic
Textuality
Whitespace
Minor refactor
Remove unused variable and remove peek_result() type which is unused
Merging default into bug23111
adapt vq to new msg_store and qi APIs
fix tests
rejig qi initialisation, separating clean init and recovery so that vq can get hold of the shutdown terms and thus the persistent client ref and use the latter in the ContainsCheckFun
add a fun to get hold of the client_ref from the client_msstate So we don't have to carry around the client_ref separately
Supply the plugins_expand_dir application env var to rabbit as well as the activator, and then in rabbit_mnesia:reset, ensure we do not nuke out the expand dir.
Do not show unbind button for default exchange.
Visual tweak: explain more, and put explanation under a heading.
Macports: get manpages from generic unix tarball, to avoid huge transitive dependency on xmlto.
move msg_store server identity and client identity into client state. still need to update vq
only confirm when all queues have dealt with the message
Merge heads
Don't just show "" when we have counts but no rates.
merge default into bug20284
Added tag rabbitmq_v2_1_1 for changeset 1b0894a64263
Added tag rabbitmq_v2_1_1 for changeset b6656c59f307
Added tag rabbitmq_v2_1_1 for changeset d3cc0854fd6f
Added tag rabbitmq_v2_1_1 for changeset f98bb088d0cd
Added tag rabbitmq_v2_1_1 for changeset 8336a50a169e
Added tag rabbitmq_v2_1_1 for changeset b7fb96f6bc6f
Added tag rabbitmq_v2_1_1 for changeset 64a633169b6d
package changelogs modified in autobuild
mnesia:transform_table/3 appears to see table data before wait_for_tables, which solves a lot of problems. That's probably deliberate :). Move invocation of maybe_upgrade and add a couple of test upgrades to change schema as well as data.
Use mnesia:transform_table
Ops, one of these Queues is not like the other ..
Apparently they can be. Arbitrarily
Support the possibility of the message being removed by someone else
tuples can only be one-dimensional
Overlong line
More documentation. Tested on Windows.
Substantial refactoring of gc_done, and drop gc_active in favour of the guarantee that files involved somehow in gc have a key in pending_gc_deletion (which is now an orddict, thus allowing us to run exactly the correct actions when gc_actions complete)
Don't display a blank line at the end of a TSV table.
More documentation.
Fix column names
Duh
Error messages.
Support optional parameters.
Refactoring
Emit message back to the msg_store again after deletion completed. Potentiall bug free again
Close connections, purge queues.
Delete things.
Improvement to specs
combine and deletion of files are both forms of GC
merge with default
Removed extra call to set_ram_duration_target during ram_duration. As such, duration_target is no longer needed in vqstate
List permissions; forgot that...
Other declare types.
Declare exchanges and queues
Push deletion of empty files out to the gc process. Make selection of files to gc a little more robust. However, this is buggy in two places: 1. We update the left and right pointers as deletion is taking place. This is fine, but it then means that in find_files_to_gc, we walk over the table, and will find the links don't work - cue badmatch and explosion. I really don't want to try and reason about concurrent deletions to the file_summary_ets_table, so I think this is going to necessitate a msg back from the gc to the msg_store indicating that the deletion is done and to tidy up any left over mess in the file summary table. 2. In contains or read or remove, if we find the file we want to access is locked, we add_to_pending_gc_completion. But of course now the file can be locked because it's about to be deleted, rather than GC'd, and currently (though see above), there is no such msg back from the gc process to the msg_store to indicate when a file has been deleted. This could mean actions could build up in the pending queue and never be run. This then raises the question of how this pending queue should be structured. Maybe we should have a mapping from File -> [Action]. Then when either a gc or deletion confirmation comes in, we know which actions to free up.
Recurse while building table. Add "long" format. Sort column names, with some hand-picked ones at the front.
merge default into bug20284
Merge bug23122 (idiomatic default behaviour)
Further abstract gc to permit different types of actions
Permit the GC to cope with multiple concurrent pending GCs. In the case of a GC being blocked, we don't care if it's blocked on one file or many: we simply store that it's blocked on one, as we know we're going to test both before doing any real work, so this is safe.
correct tuple arity
Account for /exchange//something, which would previously have referred to exchange something with no routing key (due to the removal of all leading blanks. We choose to interpret it as referring to the default exchange, and reject it on the basis that you cannot bind to the default exchange so it cannot follow our /exchange semantics.
Split out the testing of whether a file is not being read from
Add enough of a mechanism to allow us to update data in Mnesia but not the schema.
Properly abstract the state that the msg_store passes to the gc.
Remove a clause and some duplication of parse_routing_information from ensure_queue_binding
Make topic and exchange subscription queues both exclusive (cannot be used from elsewhere) and auto_delete (will be deleted when unsubscribed)
Cosmetic, and replace instance of re:split with regexp:split (the former is in 12B3 and the latter isn't
merge default into bug23319
merge default into bug23319
Merged bug 22101 into default
Don't show bind / unbind / delete for default exchange.
support for escaping / in destination names
reworked channel handling to have one channel per /queue subscription now
Merging default into bug23274 and debitrot
Typo
renamed bind_queue_if_needed and create_queue_if_needed. removed stray io:format call
Prevent redeclaration of the default exchange: Limited Edition Passive Model
Prevent redeclaration of the default exchange
tweaked use of parse_content with regexp
parse_content simplified
Detect failed upgrades.
Gratuitous refactoring
Simplify the module attribute required, log a bit more.
Permit neither the source or destination of the binding to be the default exchange
Merging default into bug 22101
Merged bug23405
Show (AMQP default) on incoming as well as outgoing.
Split $package/Makefile into $package/Makefile and $package/package.mk.
Split $package/Makefile into $package/Makefile and $package/package.mk.
Split $package/Makefile into $package/Makefile and $package/package.mk.
Split $package/Makefile into $package/Makefile and $package/package.mk.
merge heads
cosmetic: put msg_store functions into a more logical order ...and add a missing spec
Make the popup appear in the centre of the screen again, remove heading, use different colours.
Merged bug 23383 into default
Merged bug 23376 into default
Merged bug 23375 into default
Forgot to add this, how embarassing!
Amalgamate deliver, deliver noack, get and get noack in channel list.
DAG for upgrade steps.
Merged bug 23403 into default
Prevent expansion of routing key if binding destination is an exchange
rename error/2 to prevent auto-import warnings on R14B
fire {exchange,binding}_deleted events
fixing merge conflicts
rough sketch of pushing ram acks to disk. doesnt actually work...
merging in from default
Convert error popup to something that slides out and can be dismissed. Also handle better the 404 and 405 errors that can be caused by users.
View channels within a connection
TODO moved to Bugzilla
experimenting with moving acks to disk
Deal with the now myriad ways connections can be given addresses (mainly for direct connections)
TODO++ (one last time I hope)
Bugfix: don't reset the timer interval on every update().
Merge bug23364 onto default. Matthias suggests it's OK for me to merge this given that bug 21377 has already been merged.
rename pending_ack_index to ram_ack_index
Lots of visual tweaks to try to make e2e bindings comprehensible.
Merge from default
Bugfix: encode empty routing key and no arguments as "_" not "". This is consistent with the scheme and means bindings with no routing key or arguments get a valid URI.
merge with default
If this is going into 2.1.1 we don't need this.
Add support for e2e bindings to the web ui.
merge bug21377 into default
merge bug21377 into default
merge bug21377 into default
Rename the script.x
Fix a couple of UI quirks, in particular allow visiting a connection page that has no rate.
Support for requeue=false removed. No longer storing messages along with ack records
List source and destination bindings for an exchange.
Add the protocol in to the connection display, and format values that we may get from protocol adapters
Oops, fix the docs.
Partial support for e2e bindings in the HTTP API.
Merge default into bug21377
Take the args into account in the location we send back.
Fix warning
Merge default into bug21377
changing connection_closing to a cast; updating amqp_dbg
Merge from default yet again
TODO++
Update for latest Erlang client API changes
typo
merge default into bug23319
remove permissions from UI
remove scope from permissions tuple
Merged from default again
Get rid of "e2q", rewrite help a little.
remove scope from management plugin
Merging bug 23159 into default
This was clearly never tested with > 1 queue: we must be able to cope with both delete_from =/= undefined andalso dict:size > 1; finally, do the erase first, and then we can test for size == 0, which is a little more obvious
Merged from default
Removal of log entry; correction of stats; assertion that QC can only get delete_all msg once
Shuffle URIs around to make space for e2e bindings when they appear.
Merging bug23323 into default
Although we don't want to export amq.* exchanges, we do want to export bindings to them.
merge default into bug23319
merge bug23273 into default
Don't do a dirty_read within a transaction
Merge default into bug 23273
Switch to socket_into for the getstat things too.
merge default into bug20284
refactor
fixed the issue with transactional actions on /queue resources
moving channels manager start code in amqp_gen_connection; removing negotiated values log message and providing infos for it instead; other cosmetic
fixing merge conflicts
merging in from default
Simple web context to document the CLI / make it available for download.
A simple command line tool for accessing the management plugin.
Merging bug 23349 to default
Write the version after (possibly) shuffling the db around.
That's redundant now.
Merge from default.
Actually, that's already there...
Support arguments in the web UI.
Merging bug 22180 into default
Merging bug 22180 into default
made the tests a bit smarter when waiting for multiple messages
Make tests pass again with e2e
Debitrotting bug 23274 with merge from default yet a-sodding-gain
Sorting with dots. Lets you sort to find fast publishers / slow consumers.
boolean_or(True, X, Y) = anything_but(False, X, Y)
rename
merge default into bug21377
minor refactor
refactoring
merge default into bug21377
cosmetic
cosmetic
merge default into bug21377
cosmetic
better error reporting on connection startup; fixing compile warnings
or should be orelse; cosmetic
sets are faster than gb_sets
adding amqp_gen_connection module; all duplication between connection types has now been removed
simplified code
allow exchange.declare on the default exchange
Add note.
Refactor TODO.
Sorting.
Make dialyzer marginally happier
Typeo in spec, and simplify delete_queues as order of operations here doesn't matter
Started recording the acks that are stored as full messages in memory
Reworked binding / exchange autodeletion with better abstracted and cleaner API
delete_exclusive -> delete_immediately
TODO--
More tests, fixes, coverage, remove unreachable code, etc.
Rename file, store an empty list since the DAG may have multiple heads.
Add and fix another test case, remove some unreachable code.
Fix tests and refactor slightly.
make default exchange publish-only
merge default into bug20284
cosmetic
delete exclusive queues in parallel
Blatant coverage-increasing. Some tests that actually fail.
Minimised the number of calls to the XTs on deletion
Unreachable code.
Unreachable code.
'throw' is the default exception type in try/catch.
TODO++
Remove "key_" from generated binding names. In the simplest case the generated name is now the same as the routing key.
Moved to bug 23350.
Use filename:join/2.
TODO--
If a test suite fails, stop.
Fix 500 errors when the vhost is wrong.
Only vhostise the requests that need it.
filename:join/1.
Use rabbit_misc:write_term_file/2 (at a more sensible place).
remove R14ism
Gratuitous refactoring
Write a schema version out.
XT:publish => XT:route
tweaked RamIndexCount accounting again, now it doesn't get decremented twice when reinserting into the queue. Also moved transactional msgpropsfun application to tx_commit_index
Merging default into bug 23274
fixed RamIndexMsgCount accounting
merge with default
refactor
merge default into bug21377
cosmetic
segmented /queue from other destinations on a separate channel
Allow selection / filtering by vhosts.
Merging default into bug23274
fixed the build script
added some more error case tests
changed how we reference stomppy now, so that it is pulled down from hg
adding missing test file, correct branch this time
merge with default
committed against default in error
missing test file
updated .hgignore
reworked error handling to get better messages when dealing with invalid destinations
fixed comment for attempt_delivery
removed ttl from queue ttl info items
Reworked ensure_ttl_timer to use apply_after rather than send_after
removed unnecessary _MsgProperties variable name
narrowed the capture on reset_msg_expiry_fun
changed usage of #message_properties{} to ?BASE_MESSAGE_PROPERTIES
Merging default into bug 23111
cosmetics
merge bug23133 into default
Refactoring and cosmetic
cosmetic
cosmetic
cosmetic
Merge bug23124 again.
Overeager M-/... I did run dialyzer but it failed to spot it.
Trailing whitespace only
msg_properties -> message_properties in order to be consistent with message and basic_message (though within vq, we have plenty of msg_-prefixes so don't bother inside the msg_status record in there). Also, tidied up a lot of trailing whitespace
cosmetics
merge with bug23124
Merging default into bug23111
fixed use of rabbit_misc:die
refactor file summary updating in write/remove This change makes it more obvious what is going on and also nicely aligns the structure of the 'write' handler and remove_message/2.
merge with default
more tests, and added /topic
added all tests back in. removed stray io:format
more tests for /queue. added a basic.qos call temporarily while I decide what to do with prefetch for /queue
Merging bug 23003 into default
reworked tests and introduced /exchange and /queue destinations
merge default into bug20284
cosmetics: tabs->spaces, nuke trailing whitespace, <80 columns
Merge bug23124, use direct mode client rather than mimicking a rabbit_channel
cosmetic
cosmetic
cosmetic
swap the arguments of ack/2
Merging bug 23276 into default
don't do nice connection close if the app stops
Merging bug 23156 onto default
Refresh expiry on stat call as used by queue redeclaration
Merging bug 22872 into default
Revert unnecessary reformatting
Introduced /exchange support
don't duplicate server logic
add missing export
correct type spec, and cosmetics
merging in from default
merging in from default
bug23306 merged into default
cosmetics
merge default into bug20284
cosmetic
cosmetics and minor refactoring
refactor
improve performance
merging in from default
no more warnings
refactor + add async version of maybe_run_queue_via_backing_queue/2
refactor
clean up code
gb:add -> gb:insert
refactor
Merging default into bug21377
Use delete_object, not match_delete
refactor
merging in from default
sleeping before executing rabbitmqctl, so that rabbit has enough time to start; do not fail if can't remove user after tests
schedule a fsync if necessary before confirming messages
Introduce delete_object and use it to solve race
confirm messages when they get written do disk in *any* queue; confirm messages immediately if they've already been written to disk
both client_terminate and client_delete clear the msg_store's on_disk callbacks
inlined register_sync_callback into new_client_state
do_if_not_dup -> do_if_unconfirmed; bugfixes
only confirm immediate messages if they haven't been delivered
Merging default into bug 23133
cosmetics and some minor refactoring
Changed mention of amq.direct to the direct exchange. Changed binding as appropriate
merge default into bug20284
cosmetic and minor refactoring
cosmetics and some refactoring
Merging bug 23024 onto default. Drive-by correction to amqp_client.app.in
merge default into bug20284
more unit tests for the destination parser
Merging bug 22902 into default
It's binary up until it goes through public_key:pkix_decode_cert, at which point it becomes an #'OTPCertificate'{}
broken links in man pages
merged .hgignore from parent
Merging bug 22990 into default
fixed .hgignore
unit tests for the destination parser
working on unit tests
first cut of the destination parsing code
support for R14B; fix utf8 bug
design doc
merge default into bug22902
design comments
merge bug23190 into default
cosmetic
using mnesia:match_object when selecting all records with a given pattern
Marek figured it out: sammy was stopping and needs to be restarted. This is less clunky all round.
So that trick doesn't work on MSIE.
Tidy-ups
'@' is an illegal character in Windows filenames and MSIE gets very confused. We don't try to enforce good filenames, but at least let's not default to a bad one.
merge bug23322 into default (gen_server2 has a broken format_status)
Try not to break the window when downloading, don't open a new one uploading.
Queue purge.
Move lookup_qpids into router and associated changes to deliver API
Change the SeenXs to a sets rather than a list
updated docs
More visual tweaks.
remove client scope and scopes
avoid using qlc
Exchange auto-deletion works even with e2e. Diamond property works. Correct behaviour if explicitly deleted entity is queue or exchange
refactor
minor
Support client_flow_blocked.
Merge bug23115 (add 'client_flow' channel info/stats item)
Don't forget the limiter even if we have no consumers.
correct branch name for bug 23124
Merging default into bug 21377
Hide unusable bits of the web UI from non-administrator users.
Update format_status to work with gen_server2 state record
Allow non-administrators to GET /vhosts. In the non-admin case this only returns vhosts the user can access. This makes the web UI mostly work for non-admins.
tests tweaked to accound for different error frames
Minor reworkings
Fix for the old make run / make test.
Fixed
If memory monitor is disabled, don't report on memory.
Merging bug 23315 into default
:%s/need_confirming/unconfirmed/g
added fine grained stats
using mnesia:read rather than qlc
Allow user to set up webmchine logging, and make sure it works when run "properly".
msg_store refactoring
Fix a couple of bugs that crept in.
Make bindings and permissions symmetrical.
merge with default
more refactoring
Fix updating. Only elements marked "updateable" get updated, so doesn't interfere with forms. Allow frequency of updates to be selected.
merging in from default
no more redundant message passing
stomp is releasable
shovel is releasable
management is releasable
merge heads
refactoring
Truncate connections / channels / exchanges / queues, make all lists part of a collapsing section if they have another section on the page, get rid of item[i] in lots of places.
casing change and added ttl to the list of queue items in rabbitmqctl
cosmetic
refactoring
refactoring
fixed bug with queue length and collect during run
refactor
don't match on return code
Allow specifying the filename to download.
add confirm related info keys
Improve consistency.
cosmetic
cosmetics and minor refactors
code doc tweak
Don't require otp sources for build
Make it clearer that we export server-named queues.
Use internal APIs rather than Erlang client to create queues  / exchanges / bindings. Gets rid of the magic user, will allow us to recreate server-named queues.
merge bug23245 into default
refactor
Further visual tweaks.
pull from default
merge with default
cosmetic
So if you accidentally set a request body on a GET, MSIE6 will "correct" it to a POST. Hilarity ensures.
minor refactor for consistency
refactor: don't re-implement rabbit_mgmt_wm_vhosts:vhosts()
don't export queues with "amq." prefix and perform the prefix check more efficiently and concisely.
cosmetic: spaces around |
cosmetic: put || where they belong
refactor, getting rid of a TODO
Variety of visual tweaks.
merge bug22141 into default
Move test code so that test coverage works
Move test code so that test coverage works
using recursive split; more tests
Make shovel tests work with new build
Add necessary additional barrier bootstep
Port 6249f79207db from rabbitmq-status (optimize file descriptors counting on linux - don't use lsof)
Use file_handle_cache:ulimit/0
merge with default
removed peek, and restructured dropwhile to not load message content from disk
Merged bug23310 into default
merging bug23165 into default
Currently that just shows [object object]. Wait until we support args to fix it properly.
We need to ensure stats are enabled when the DB starts up, not the app.
Support arguments in the HTTP API (but not the web UI yet).
Merging bug 23143 into default (drive-by fixes include correcting the spec for delete_exclusive, and one cosmetic)
added timer to collect expired messages
Factoring open modes better
Merging default into bug23310
Merging bug 23179 into default
Remove obsolete test, rename all the others.
cosmetic
Rename module/
TODO++
Don't export exclusive queues or the built-in exchanges, or bindings that refer to them.
start public_key automatically
Generate magic username / password randomly.
cosmetic
delete/1 -> delete_exclusive/1; lower priorities to 8
minor tweaks - rename rabbit_limiter:internal_is_blocked to 'blocked' - reads less   awkward that way - call 'blocked' in handler of rabbit_limiter:is_blocked call - avoids   code dup and makes the connection to the internal check more obvious - rename info item to 'client_flow_blocked' - tweak docs for info item to hopefully make it clearer how the   condition arises and what the consequences are.
generalise binding code somewhat to mostly abstract away the source kind - not completely, since that would require substantial changes, but   enough to make the code more pleasing to the eye
correct a spec this was in fact wrong to start with
rename a few funs to make their purpose clearer
generalise binding:list in case we ever come up with other source types
minor refactor
tweak specs
using rabbit_guid; cosmetic
cosmetic
Web ui for uploading configuration, more tests, more correctness.
minor
Merging default into bug 23274
Correct naming of deps
added peek to ivq. some tests for peek
Correct naming of deps
added peek to backing queue, implemented in vq
cosmetics and minor refactorings
server tests pass
minor stylistic improvement
slight improvement to performance when discarding many messages
revert rabbit_tests to default
bugfixes; passes same java tests as default
Tidy shovel .hgignore
Simpler just to use find
Make management work with new build
Merge heads
Support PUTting all-configuration.
merged with default
Fix the {function_clause,[{proplists,get_value,[rate,0,unknown]}... problem. Testign this requires makign the DB tests support an arbitrary number of stages.
still failing a test, need to decide what to do about lack of method names in errors coming from the erlang client
better separation between amqqueue_process and bq
moved stomp to erlang client, just got one failing test
only create read_ahead buffers for reading segment files The buffers are a few hundred k in size, which is a significant cost. And there is no point having them when writing to segment/journal files, and they are of limited benefit when reading the journal file (which, in any case, only happens on startup).
cosmetic
no performance penalty when *not* using confirms
solved a couple of bad_matches/function_clauses
delay creation of a new queue's dir and qi journal Thus if a queue is created, never has any index entries written to disk, and is subsequently deleted, no file handles are needed and no filesystem writes are performed.
merging in from default
Make rabbitmq-mochiweb work with the new plugin build system
use -noinput flag
merging in from bug23024
merging in from bug23024
merging in from bug23024
let the user know testing is in progress
Merge bug23300 into default
leftover handle_call clause
fixing performance issue; other cosmetic
Cosmetic
bug23290 merged into default
Query memory on AIX
fixed xmlns handling in man pages
removing use of timer:sleep in tests; cosmetics
Merging default into bug23133
Improve documentation a bit
correct naming of .app file template
correct naming of .app file template
Adjust stomp to work with new build
Ensure that the output artifacts are versioned
Adjust shovel to work with new build
Aliveness test for monitoring.
cosmetic, tab clean up
invariable queue has dropwhile implementation now
By using an order only depend, we ensure that the deps file must exist, but it being newer than the beams will not cause beams to be rebuilt. We also ensure that if the deps is being rebuilt, we delete the old one first so that if deps generation fails, the order-only depends cannot be satisfied.
reworked how message filtering works with dropwhile
merge default into bug20284
merge default into bug20284
fixed problem in vq:tx_commit, moved expiry recalculation to post_msg_store callback
clean up of specs and dialzer results
persistence of message props working for invariable queue
Make vhost api more consistent with everything else, allow downloading broker configuration.
cosmetic changes
stylistic issues, reworking handling of msg_properties
cosmetic changes, alignment etc
fixed issue in invariable queue preventing per-queue ttl working for transient messages
fixed naming error
refactoring argument checking and line width changes
cosmetic changes - line width
cosmetic fixes - tabs to spaces
merge with default
Merging bug 23193 onto default
cosmetics
Merging heads
Only emit stats on shutdown if they're enabled...
Endless cosmetics
Merging bug 19791 into default
cosmetics
Merging bug23047 into default
Merging bug 22926 into default
Merge bug23255 into default (unresolved dependency on inets)
Rephrase comment
Add a comment.
Merge default into bug22926
rabbitmqctl reports channel blocked status
Don't throw, don't use erlang:element/2.
invariable queue updated for backing queue api
added msg_properties to publish_delivered so they can be rehydrated later
Ignore socket errors when not running.
connection now sends connection.close if it receives a channel method on channel0 or a connection method on a channel; better support for sending the server errors, using #amqp_error and rabbit_binary_generator:map_exception/3; tests for command_invalid errors due to server misbehaviour; other small fixes
Revert ca0dfcaaecdc
RC4 comment
Rebalance TODO.
some cosmetic changes and the beginnings of invariable_queue with new api
merge with default
cosmetic: remove trailing whitespace
Merge heads.
fixing merge conflicts
merging in from default
merging in from default
Avoid starting rabbit app on plugin activation
fixing closing the socket properly
fixed test_queue_recover. recovery is working again with per-queue ttl
fixed bug in persistent_guids vq
merged with default
remove rest of xref calls
remove superfluous xref stuff
merge default into bug23047
exref on script activation
whitespace clean up
removed stray io:format calls
changing amqp_channels_manager:get_framing and get_pid to get_pid_and_framing
unknown_ca SSL workaround expiry reminder
removing channel flow test
Merging bug 23157 into default
No sense in not using the full word
midway through fixing test_queue_recover
Add rabbit_msg_store_index to common.ez which has been missing since the new persister was merged
Added tag rabbitmq_v2_1_0 for changeset 6844ff7ff29c
Added tag rabbitmq_v2_1_0 for changeset 6ad3afbbcd03
Added tag rabbitmq_v2_1_0 for changeset 44d574ddeb5a
Added tag rabbitmq_v2_1_0 for changeset a67517043ee0
Added tag rabbitmq_v2_1_0 for changeset dc4656e98a13
Added tag rabbitmq_v2_1_0 for changeset 059d9ebd55d5
Added tag rabbitmq_v2_1_0 for changeset d2e36559b461
merged heads
Release 2.1.0 changelog update
fixing output in source tarball tests
merge with remote
erlang tests working again
It's perfectly legal to convert a process to a gen_server by just calling enter_loop. In such cases, init_it is not called. Thus it must still pick up the prioritisers
Build on cygwin
merging in from bug23024
fixing use of find_child
registering amqp_sup properly; closing connections nicely before stopping amqp_client
Various TODO items from Matthias...
amqp_client is now a proper Erlang/OTP application
In case we get a structure back, stringify it. Not beautiful, but better than [object object].
Remove some TODOs around permissions.
Don't talk to mnesia directly.
Oops.
Remember to document it...
Sooner or later someone will ask us: "How do I know which version of the server I'm talking to?"
Fix non-ASCII characters in names, unused variables. TODO.
Merged bug21528 into default
Re-indent
Stop stats timer on hibernate.
Change 'case' to 'if'
Doc.
Don't forget about stats timer before hibernating; it may fire after hibernating.
Make erlang-inets into a "recommends" dependency.
cosmetic
Rename function.
merged with default
cosmetic
* Use one-shot timers * Ensure we always send a stats event straight after creation and before hibernation * Tidy the API a bit.
minor cosmetic
fixing merge conflicts
merging in from default
Merge bug23250 (start event db before queue recovery)
Use a dummy supervisor rather than rabbit_mgmt_dummy as recommended by Ulf.
merge bug23249 into default
set up monitoring in the caller which makes for a cleaner and more flexible API
Only emit stats in state running, so we don't emit stats before the connection event in the case of a slow connection startup.
Merging bug 23087 into default
Minor corrections
Revert emiting stats on creation in the queue and channel.
changing 'command' to 'method'
Minor corrections
Add warning about Windows.
Makefile now grabs a copy of the Erlang client build page and sticks it in the README
reverting changes in Makefile and README
Remove caveat.
Enforce permissions around channels / connections.
merging in from default
Fix some cases where results of amqp_request got trampled on.
Merge heads.
Enforce permissions more: users can only see things if they have permissions for that vhost.
Merge default into bug23250
Merge default into bug23193
Only emit stats if level != none.
use OTP functions to decide whether a cipher suite uses RC4 or not
Do the simplest thing and have additional fields to indicate the type of the binding endpoints
exchange.unbind has nowait
exchange.unbind has nowait
Avoid traversing lists multiple times
exchange_name => source; consistent naming of Src{Name} and Dst{Name}, except in rabbit_exchange when we clearly are talking only about exchanges; improvements to rabbit_control so that list_bindings returns the type of the endpoints as well as the endpoint names
Merging default into bug 21377 and more consistent naming of Destination and DestinationName
Make naming of Exchange, X, ExchangeName, XName consistent
Implement exchange-to-exchange bindings
Implement exchange-to-exchange bindings
cosmetic
When I wrote 'Please rewrite drain/2 to drain/1 - it's bizarre having both the state and the queue there when the queue is in the state anyway. Likewise, in/3 => in/2 - drop the explicit queue arg', this is what I meant
Tabs => spaces
Merging default into bug 23157
Tabs to spaces and remove trailing whitespace - yes, this is going to make subsequent merges harder, but our version differs so much anyway, subsequent merges are going to be involved anyway
Merge bug23248 into default (link broken on generated man pages)
Remove more dead code - this is ok - the network_connection will receive the connection.close_ok and tear down the whole world via the supervision tree
Merging bug 23234 into default
Merging bug 23234 into default
Merging bug 23234 into default
Merge default into bug 23234 (now broker default works with erlang client on 23234 with new API)
Merging bug 22993 onto default (again)
Remove clause which now matches (and causes errors) whereas before, the erroneous 'none' prevented the clause from ever matching
Merging bug 22993 into default
Correct some obvious bugs that dialyzer found - reader:analyze_frame never returns 'none' in the 3rd position of the tuple, and the trace stuff got stripped out recently
Whoops
minor refactor
Correcting maintainers field in debian control file
Merging bug 23212 onto default
Merge bug23231 (patch from Tony)
Check the exit status of kill, not its output
Merging default into bug 22993
A whole load more cosmetics
Don't depend on eunit either.
Don't use rebar so we can build on lenny. Also gets rid of the redundant mochiweb checkout.
More tidying - mainly cosmetics
Just like in the broker, heartbeaters should be transient, not intrinsic, given that they message the connection whenever anything goes wrong (receiver heartbeat timeout)
Drive-by bug fix - network_connection was failing to handle the timeout message that the heartbeat receiver can send
And the same trick yet again - thus now there are no uses of supervisor2:find_child in the erlang client
Same trick again
cosmetic and avoid a use of supervisor2:find_child
Fix a minor bug introduced by Matthias.
No longer needed.
Cosmetics
Fix some unused variable warnings.
Cosmetics, refactorings and simplifications
Lock non-admins out of users, permissions, vhosts.
Cosmetics
when a message is written the ref_count is always 1
With the erlang client correctly throwing on connection error again, avoid fugly is_pid failure for control flow
Oops.
Revert connection API to throw on error, as it does on default
Better tests
init_expires/1 before emitting stats.
Further changes due to Erlang client
merge bug23137 into default
tweak
Oops, forgot to alter tests...
Improvements to documentation
Allow viewing / setting administrator status.
Add a dependency on erlang-inets (for mochiweb really, in case someone installs status or management).
Refactor.
Add force_fine_statistics, defaulted to true. Documentation is terser since this is more of an expert's option.
adjust function name for consistency
oops
minor refactor
tweak
cosmetic tweaks and minor simplifications
merge bug23233 into default
say a bit more own fd ownership
tweak
tweaks
merge default into bug22902
merge heads
correct some types
note dn display format in docs
more escaping
tweak rdn value escaping so it doen't need flattening
merge bug22983 into default (Extend permissions system to cover users / vhosts / permissions)
merge bug22983 into default (Extend permissions system to cover users / vhosts / permissions)
tweak api for better decoupling of modules and trim error handling - we don't check for errors in any of the other info items either
fix type sigs
handle chars > 127
rename info items and functions
cosmetic
Use monitor, not link, *consistently*
TODO--
Use monitor, not link
Merging bug 23233 into bug 23133
Put error messages that might be caused by the user in a much clearer position.
Remove all traces of contiguous_top and do necessary refactorings. Manually verified by various stressful invocations of McM that both branches of the case in combine_files are reached and work correctly. Code is substantially simpler
Don't trample on admin status updating password, refactor.
bug23238 merged into default
renaming all state records in all modules to #state
refactoring
Merge heads
Make it work with fine stats turned off.
fixing error handling when starting amqp connection
fix a manpages link
refactor + manpages update
Corrected documentation
updating use of Erlang client API
better formatting
rename functions
updating use of Erlang client's API
add support for rdn sets
refactoring
cosmetic
reformat time range
refactoring
better error handling
removing connection:start_link; making open_channel return {ok, Pid} | {error, Error}
moved certificate decoding to rabbit_ssl
Don't print to stdout
merge default into bug22902
TODO
string:str instead of re:run
Scan the file and remove from the index as necessary on file delete rather than index_delete_by_file
Merging default into bug 23133
Fixed the bug. The problem was that I was not removing msgs from the index for the dest in a gc if they had a refcount of 0. Thus they could later be reincremented. I was also thoughtlessly doing an index_delete_by_file on the src post gc, which should be unnecessary - 0 refcounts are now removed as they're discovered, and non-zero will be updated to be in the dest. This leaves only 1 worrying use of index_delete_by_file which is now in delete_file_if_empty. Here, scanning and deleting as we find msgs will be constant time and simple. Note this also features a very rough hacking out of the use of contiguous top in GC which turns out to be essential for this bug. However the real fix for that will be in bug 23233 which will block this bug.
Use a more portable command to probe for pids
merge bug23203 into default
Merging default into bug 22993
TODO--
Be more robust in waiting for process termination
Start rabbit_mgmt_sup as part of the rabbit boot process.
Treat an intrinsic supervisor child the same as an intrinsic non-supervisor child when it comes to 'normal' exit reasons (which, for a supervisor, is 'shutdown', not 'normal')
accept string names for ciphers; don't clobber user-defined cipher option
Emit stats just after creation event.
cosmetic
more RDNs + refactoring
(Minimal) support for the is_admin field. Just don't break.
Finish adding is_admin boolean to user.
moved ssl functions to a separate module + refactor
add lots of TODOs, and some minor tweaks
flesh out API some more for management plugin
flesh out API for the benefit of the management plugin
cosmetic
flesh out binding API a little further
add list_user_vhost_permissions/2 useful in e.g. the management plug-in
cosmetic
correct the type specs of permission listing functions these got broken when 'scope' was added
'scope' is *not* a permission
cosmetic
format info item solely based on the value, not the key
fix tiny bug
refactor
make ssl info part of creation events
cosmetic
merge default into bug22902
tiny refactor and some cosmetic changes
better formatting + refactor
unbreak ssl
Tube strike WIP WFH commit.
message store keeps track of queues through their client refs
TODO.
belatedly bring .app file up to date
Until we auto-generate that list it's useless. Update to unbreak for MikeB.
Support linked and unlinked versions in the supervisor branch too. Unfortunately, there's no supervisor:start, only supervisor:start_child. Luckily, all the children are dynamically started, thus we can unlink it after it's created and before it has any children added. However, I still can't get the negative_test_util:channel_writer_death_test test to pass
Update BUILDING.
Turns out to be very important to support both start_link and start variants
cosmetic and minor bug fix
Split out BUILDING.
reformatted date range
proper subject escaping as per RFC 2253
Merge bug23230 into default (tweak and flesh out rabbit_binding API)
We escape like C not URLs.
TODO
Added ssl_validity, ssl_subject and ssl_issuer to list_connections.
Rename _cmdline_cache to _external_stats. The module of a thousand names strikes again.
Support older API still on default
Merged bug23221 into default
Merge default heads
Merge bug23229 (remove more dead code)
merging in from default
Make rabbit_mgmt_db into a gen_server rather than a gen_event handler, and supervise it correctly. Refactor startup a bit. Rename _cache to _cmdline_cache.
Make amqp_connection API more OTPish and better abstracted (changes lifted from bug 22993)
merging bug23228 into default
Update for latest server API (patch contributed by Tony Garnock-Jones)
merge heads
merge heads
merge heads
simplify a bunch of rabbit_event:notify calls
expand test coverage
add a couple of convenience functions so that callers can add/remove bindings without supplying a closure, which can be tricky across an rpc call.
update 'rabbitmqctl list_bindings' documentation The command now behaves more like the other list_* commands
tweak and extend rabbit_binding API - 'add', 'remove' take binding records instead of losts of args - 'list*' return #binding records instead of tuples - add 'list_for_exchange_and_queue' - add 'info*' functions
remove dead code
some renaming and inlining on internal API
further binding API tweaks
first stab at extracting information from certificates
typo
merge default into bug22902
Merge bug23116
fix some comments and types
TODO
stopped a race
More documentation.
Merge default into bug23116
Move dispatcher into its own module; write URLs to log on startup.
Optionally set up Webmachine logging and tracing.
MSIE does not correct these capitalisations, and webmachine gets confused. Fix.
expr match not compatible with OS X
merge default into bug23228
add some missing specs
making the use of uname compatible with OS X
move binding code into its own module
moved some confirm logic from router to channel
use client_terminate instead of monitoring for DOWN
Put "Cache-Control", "no-cache" on all our responses. This is TRTTD and also fixes MSIE's over-caching of XMLHTTPRequest responses.
forgot to update amqp_dbg
Update sammy and use various MSIE workarounds for XMLHTTPRequest. This gets us partial MSIE support.
fixing merge conflicts; more consistent children types in supervision hierarchy; removing amqp_channel_util module entirely; better error handling code; other smaller fixes
bug23200 merged into default
cosmetic
cosmetic renames
remove rabbit_basic:delivery/4 since it's not used by anything
moved confirm extension into 0-9-1 json
moved confirm extension into the 0-9-1 json
when a consumer ack is received, the publisher ack is sent by the amqqueue_process, rather than the backing_queue
cosmetic
cosmetic
refactor: export a useful file_handle_cache:ulimit() for, e.g. the management plug-in Also, we always need at least two fds (e.g. for 'copy'), so set the lower bound to that rather than one.
moved most of the confirm logic from amqqueue_process to variable_queue
Individual channels.
lists:suffix/2
People know what they're looking at.
Fix the rate bug.
Rearrange rates into a details object. Change overview to show global message rates rather than data rates.
merging in from bug22993
changing connection and channel processes to brutal_kill; other cosmetic
moving hearbeat processes under amqp_connection_type_sup
removing supervisor info item in connections; updating amqp_dbg
better channel opening
Show protocol on connection details page.
Rearrange the URL scheme a little.
Well, that's sure embarassing.
First pass at bindings.
merge bug23107 into default
merging in from default
debitroting; moving all children start code in the supervisors; other small fixes
bug23185 merged into default
Merge bug23197 (missed heartbeat may not get logged)
cosmetic
simplifying refactor
merge bug23215 into default
Merge bug23196 into default
Merge bug23196 into default
bug23199 merged into default
default merged into bug23199
bug23199 merged into default
default merged into bug23199
Merge bug23130 into default (place plugin version into .app descriptor
Merge bug23130 into default (place plugin version into .app descriptor
Merge bug23130 into default (place plugin version into .app descriptor
fixing premature generalisation
Merge bug23130 into default (place plugin version into .app descriptor
Merged bug23214 (basic.consume's 'filter' should be called 'arguments')
making gen:call label constant; separating calls handling
fixing unreachable function clause
rename basic.consume's 'filter' arg to 'arguments', as per the 0-9-1 spec
Make the menu look a bit more tab-like.
Reindent.
Visual tweaks. CSS3 FTW.
Fix for Chrome.
Merged bug23181 into default
refactored code
More valid HTML.
Fix + rename vars.
Make the most cursory attempt possible towards valid HTML.
Don't make list know about links.
Remove old APIs, rename some args to hopefully make them clearer...
shortened code a bit
Update docs.
in/3 -> in/2; drain/2 -> drain/1
Try to make what you PUT == what you GET.
Don't re-checkout webmachine's copy of mochiweb on make clean ; make.
Missed one.
Stop claiming to be REST.
Merge from default.
Stop claiming to be REST.
client scope grants permission *only* for amq.gen resources
lists:member.
Allow byte, int, short, long.
merge bug23184 into default
Change type of expires argument from (signed)long to signedint since that's the best we can do in 0-8.
pending acks are sent out when the channel becomes idle or every 1s
fixed message leak caused by confirms
Actually make the change...
squeakyclean -> distclean
squeakyclean -> distclean
better recursive delete
Documentation. Wow!
merge default into bug20284
Advertise ourselves in the list.
List interesting contexts if no root handler is installed
Shuffle URIs around so we don't eat the whole namespace. Show URIs on startup. Simple documentation mechanism for REST.
remove the mnesia dir check from rabbit:prepare()
Call rabbit:prepare just before starting rabbit.
Rework delete_dir to return error tuple.
Merge bug23109 (remove reader profiling dwead code)
Increase robustness when the scratch dir cannot be deleted / written.
prevent normal heartbeater termination from tearing down the reader
All packaging makefiles can assume that "make srcdist" is already done
Even clearer.
Make clearer you must not copy rabbit_common.ez.
If someone doesn't have patch(1), don't checkout the wrong version.
Merge bug23192 into default (errors in gen_server2 'terminate' callback mask termination reason)
place plugin version into .app descriptor
place plugin version into .app descriptor
place plugin version into .app descriptor
place plugin version into .app descriptor
merge bug15930 into default
Merge bug23106 (remove rabbit_hooks)
Queue details GET / PUT / DELETE, UI.
One head is better than two
tweak
report the root cause when 'terminate' callback fails
minor cosmetic
implementing topic routing with tries; adding better test for topic routing
Go back to getting static queue details from Mnesia, allow filtering queue list by vhost.
Exchanges.
Merged bug23178 into default
amqp_channel keeps track of published message count
move treating 'amq\.*' specially to inner case
More TODO.
Merge bug23141 into default
removed underspecs warnings
solve a warning
added ack handler to erlang-client
delete_now -> delete
Tweaks.
Stop the fine stats from being their own REST endpoint, create a channels endpoint instead. Greatly improves the channels list page, probably a net simplification, although some tests are commented out on the basis that such data is no longer available (yet).
Convert use of proplists:lookup to proplists:get_value
Merging default into bug 15930 and minor debitrot (heartbeater)
oops
get rid of hook mechanism It's only ever been used in the bug19230 branch, which is defunct.
remove dead code nobody ever uses the reader profiling, and the underlying config mechanism hasn't been used by anything else.
Merge bug 23131 into default (display plugin version during activation)
Add mechanism to forcibly close a connection.
display app version during plugin activation
Ensure that non-deletion queue-termination does a call via the msg_store to ensure all messages from the queue have made it to the msg_store's mailbox (and have actually also been acted on)
Convert to identifying connections by name in the REST schema.
Merging in default now that default has only one head
Merge heads of default
exclusive queues are deleted quickly on unclean connection termination
Split up the connection Webmachine definition, rename the queue one.
Convert client_delete_and_terminate from a call to a cast
exclusive queues are deleted quickly on clean connection termination
Make form elements chunkier and easier to press.
Automatically associate labels with form elements, remove for= and id= in lots of places.
updated docs
removed all references to pcall and pcast
preemptively detect common cause of failed startup namely when the node does actually start (if it doesn't then the launcher process terminates, which we detect already) but we cannot connect to it due to dns/network/epmd issues
Refactor dispatcher a bit more.
Fix forms, pass through the whole params object.
typo
refactoring
Tweaks
Web GUI for permissions, refactor the dispatcher a bit.
Don't nest lists
Supply ssl verify function conditionally
Added tag rabbitmq_v2_0_0 for changeset cbea4350fe6c
Added tag rabbitmq_v2_0_0 for changeset d68220948b37
Added tag rabbitmq_v2_0_0 for changeset 6613e9664960
Added tag rabbitmq_v2_0_0 for changeset 0a312262a2f1
Added tag rabbitmq_v2_0_0 for changeset f8b34141e6cb
Added tag rabbitmq_v2_0_0 for changeset 4f72e4d66f23
migrated rabbit_limiter to prioritizers
refactoring
migrated amqqueue to prioritisers
migrated msg_store to prioritisers
REST for permissions.
merge default into bug23157
rabbit_channel migrated to prioritisers
Take peer verification config into account in verify function
Changelog updates
added error handling wrappers for prioritisers
prioritize -> prioritise
Apparently plurals are more RESTful than singulars.
Escape names in URL components.
merging bug23169 into default
Expanding-collapsing sections. Note that this involves disabling auto-updates until I figure out how to do them in a less destructive way.
Simple Molly-guard.
Construct shell assignment correctly
Web GUI to add / list / delete users and vhosts.
Accept multiple SSL verification errors
Use Sammy for dispatching, rejig hash-urls schema a bit.
merge bug23167 into default (Large msg_store mailbox can block queue.declare)
REST for users.
unprioritized calls, casts and infos are passed through the prioritize functions
gen_server2: functions now use a record instead of 9 arguments
Don't ignore SSL certificate verification errors
Remove tracing
REST for vhosts.
Build under Cygwin using DOS paths
Merge bug23155
Remove some done items, organise the rest.
Try to find number of used FDs on Windows.
Add priorities to two calls to ensure queue declaration remains quick even with a large msg_store workload
make 'xmlto' invocation work with stricter getopt implementations
merge bug23153 into default
Avoid crash
ensure and assert that closed handles have last_used_at=undefined That way it is more obvious which handles should be in the age tree and which shouldn't.
cosmetic
make it more obvious that reopen is a with_age_tree in disguise plus some minor cosmetic shuffling
don't traverse age tree unnnecessarily on error in reopen this also makes it clearer what's going on
cosmetic
refactor: move open1 into reopen
If we've obtained permission to open some fds and that turns out not to work out, then we should ensure that we inform the server as soon as we stop that the rest remain closed
record for pending items
Modify test so that the -1 => -2 change to OBTAIN_LIMIT does not result in the test having sufficient fds available such that the copy could be satisfied without closing
Use foldr instead of foldl to avoid having to do extra reverses
always return refs/handles in correct order to improve clarity at the expense of a few list:reverses.
cosmetic
always leave at least two fds unobtainable so that 'copy' can succeed Also, zero-clamp obtain limit
Merging heads of default
Merging bug 23166 into default
refactor: make new_closed_handle create the Ref and return it
add test this fails on default (or, rather, bug23166, until that is merged)
merge bug23166 into bug23153
add support for dynamic setting/getting of fhc limit and use that in tests
Rejigged client side so that it asks for the correct number of fds upfront.
Modify server logic to deal with requests for multiple fds. Including nice pending_queues abstraction. Client logic remains to be done.
Add infrastructure to server to be able to handle requests for multiple fds
merge bug23152 into default
merge bug23139 into default
oops
merge heads
simplification due to the fact that we always request closing of all
cosmetic
ensure_mref => track_client andalso cosmetic
Merging heads
Convert fhc to use an ets table with record per client which amalgamates several of the previous state entries
cosmetic and some minor refactoring
fix bug that crept in
support for expiration during consume now
Given the clients are demanded to close all open fds when asked to, them sending a boolean is irrelvant now
merge bug23111 with default
reworked contract between qi and vq. tidied up in general
If we sent an age of 0 to clients, make sure we do not send more ages of 0 to the same clients until they've actually closed all their handles. This ensures that as more requests come in once we're low on fds, we don't send hundreds of 0 ages to the same clients erroneously. It also means that we always target the correct number of *unique* clients to ask to close their fds, which avoids thrashing the same clients and improves performance markedly.
in flight, want to test against default
stopped a race
Grab the msg from the cur ets file cache, thus avoiding having to send the same message many times
refactor
Merging default into bug 23133
fixed an ever-expanding dictionary
cosmetic
Some essential assertions
More meaningful variable name
Whoops
Reworked substantially
refactoring + don't do useless work
don't do any unnecessary work when publishing in confirm mode
merge bug23150 into default
Remove modifications that I accidentally introduced for testing and forgot to remove prior to ci'ing the merge
Merging default into bug 23139 (substantial debitrot)
Use string tokens, not re:split
Merging bug 23138 into default
once again allow use of fhc w/o registering
refactor
merge default into bug23111
Expiry is reset on tx commit now. TX publish messages have correct TTL semantics
rewrite
added xref check for undefined, unused and deprecated functions
per-queue ttl working for non-transactionl messages without persistence
reworked backing_queue and variable_queue to store msg_properties. used msg properties for storing and manipulating message expiry
Don't ever keep the recovery process waiting, regardless of whether the queue is going down or not (transplanted from 4c99ba7eedd4b28a096d0412bbbdacb1fa91daa3)
A rather crucial infinity missing (transplanted from aaf79aa3cacefee1742eb7f257c6a16ec5720d59)
re-merge rebased bug23145 into new head of default
fixed a small empty-set bug
Abstract refcount == 0 to imply not_found for appropriate call sites
By this stage of the client-read, we know a GC can't start and can't be in progress. Thus even if the refcount is 0, we're still safe to read it. What's more, this area of code has never made provision for the index_lookup to return a not_found - it will crash if that happens. Thus if the implicit assumption is that the message must exist, then by the same token, we know the refcount will always be > 0
Abstraction of the inner write function
cosmetic
Because we can increment the refcount back above 0, the calculation of the contiguous top needs to be contiguousTop + totalSize, because the validtotalsize can contain data that's well beyond the old contiguous top
deleting a queue causes all of its messages to be puback'd
Eliminate RABBITMQ_PLUGINS_EXPAND_DIR
added msg_properties record for rabbit.hrl
added validation for x-message-ttl arg on queue declare
Backed out changeset c47670da4830 - I decided the dedup cache shouldn't be mangled with.
confirm transient messages only after basic.return
told dialyzer to check for more things
small simplifying refactor
take current memory alarms status into account straight away This does in fact not alter the behaviour at all due to the following:
treat the dedup cache the same way as the index - permit 0 ref_counts and prune on file roll
Merging default into bug 15930
Merging default into bug 23133
The solution is very simple: In the case where the fhc sends out requests to close file handles, the clients might respond very quickly. The fhc will then gather these responses (say, just updates, not closes) and then will sit there for 2 seconds until the timer goes off. Thus the solution is just to subtract the timer period from the calculated average: i.e. the expression is to say 'close file handles that haven't been used for N seconds from NOW' rather than the previous 'close file handles that haven't been used for N seconds from NOW - 2 seconds ago'. This works very nicely and whilst the fhc can get quite busy when there are more users of file handles than there are file handles available, that is hardly surprising, and the fact is starvation is prevented and processes are promptly serviced
Track blocked pids explicitly
refactoring
Correct monitoring and actions upon DOWN messages. Note this is especially subtle for obtains, which effectively implicitly allocates temporarily to the blocked caller (FromPid) whilst monitoring it, and then transfers this to the ForPid when possible. Note the ForPid can die before the obtains is processed, which which point the FromPid must be replied to immediately.
publisher acks for persistent messages
queue_index keeps track of which messages have been published but not written to disk
merge bug23135 into default
obtain_and_release_on_death => obtain, and minor refactor of tcp acceptor
Combine obtains and release_on_death
merge bug23132 into default
persistent messages are ack'd only after the consumer acks it
Minor corrections
move msg_seq_no from #basic_message{} to #delivery{}
first stab at keeping track of when messages are synced to disk
cosmetic
tweak
tweak
tweak
obtain_limit can be 'infinity'
cosmetic
refactor: incorporate limit checking into maybe_reduce
cosmetic
opens => open. obtains => obtain
Finally, it works. Important points: 1) remove elders from blocked clients so that we calculate average based on pids that can actually respond. 2) reduce whenever we have pending_opens to ensure we rotate the strike.
Whoops. Be consistent about comparisons
Sockets have priority up to 90%. Processes have the full 100% but at lower priority.
Make sure tests have enough file descriptors
Whoops
Split obtains in two : one for open requests (higher priority) and one for obtains requests (lower priority, and a lower limit)
Merge bug21311 into default again
Allow the fhc server to request the client closes file handles before granting an open - thus prevents deadlocks
cosmetic
refactoring
Merging default into bug 23132
bug23129
minor refactor
cosmetic
Permit 0 ref counts and don't actually forget about messages until the file gets removed
PubAcks are de-dupped in rabbit_channel
don't log file summary recover error the details aren't that important and get in the way of a fresh startup
don't attempt to recover file summary when we know there isn't one
cosmetic
Obtain from the fhc sync, and obtain it before we actually open the file
more refactoring
yet more refactoring
now it compiles
minor refactor
cosmetic
minor refactor
Refactorings and improvents to msg_store startup
The underlying call to file:copy will not make use of any erlang-level read buffer, so don't bother with it.
Improve, correct and document msg store recovery
Correct and simplify the recovery from crashed compactions
When recovering, because of the possibility of finding the same msg twice, ensure that we only count and include the first copy. Other copies are then ignored.
A msg can appear > once in the same file because of multiple queues receiving the same msg. When we iterate through the msgs we find in the file, we must check that the msg corresponds to the msg in the index, by matching not just with guid but also with offset. Also just for fun, assert the total_size matches. Also, fixed a mistake in file_handle_cache where the dirty flag on the destination of copy wasn't being set.
typo + reformatting
refactoring
puback for persistent non-mandatory, non-immediate, unrouted messages
adding APPEND_VERSION flag option
pubacks are sent right after basic.returns
Remove dead code in tests
Move the linking into the start_channel function
simplified code a bit
puback is also sent after something basic.gets the message
Reduce calls to connection_sup:reader
Specs, moving things around, and removing dead code
partial acks for persistent messages
Cosmetics
Remove writer flush and improve sync methods
bug 23118 merged into default (windows file descriptors limit)
Merging default into bug 15930
Improvements to comments
Merged heads
only transient messages are immediately ack'd (so far)
new logic
Reduce the file descriptor limit for Windows to 512
merge bug23120 into default
some instrumentation
merge default into bug15930
tiny simplifying refactor
cosmetic: friendlier type name
refactor: extract termination Reason analysis from handle_dependent_exit and wait_for_channel_termination
revert the change from 'stop' to 'flush_stop' and move the writer:flush call to a place where the need for it is more obvious.
remove dead code
cosmetic
use consistent return types for start/start_link functions
TODO.
A tiny bit of Windows support, although "unknown / 512" is not the most useful thing.
I just noticed I marked all these as (C) LShift 2009. Um, no.
POC HTTP test.
only have one ack timer running at a time
More tests.
type; all java tests pass now
minor clarification
refactor timer code; looks more like msg_store now
Refactor the way we calculate rates so as to unbreak the rates in fine stats, and pave the way to test them.
Merge bug21311 into default (Update Erlang client packaging)
merge bug23095 into default
Shorten module names, rename a bunch of things to be more logical.
refactor + timer cancelled on channel terminate
This messing about trying to find the priv dir is breaking coverage. Move the dispatcher config into .erl.
Merging bug 23095 into bug 15930
Another test.
Merging default into bug23095
support for multiple confirmations
Show the tests that are run.
Fix tests.
do not ignore 'normal' permanent child terminations during shutdown If such a termination is worth reporting while the supervisor is running, it sure is still worth reporting when it's shutting down.
never ignore 'noproc' during shutdown We have no idea why the child died. Furthermore, we will only ever get this when a child has unlinked itself from the supervisor, which is naughty and shouldn't go unnoticed.
we must always clear both the 'EXIT' and 'DOWN' message
cosmetic and minor refactoring
cosmetic
That's how to test; unfortunately tests fail.
More tests, fix a bug that was uncovered, cosmetics.
merging bug21330 into default
added support for multiple publisher acks for transient messages
Update edoc.
Get sock from network client state.
subsequent confirm.selects cannot change the multiple setting
merge bug23104 into default
remove redundant code
minor neatification
merge default into bug23104
cosmetic: consistency
Get the reader to link to the chan_sup instead of the framing_chan. It used to link to the framing chan, which meant that when it got the exit signal from the framing_chan, it could be sure that the channel and writer had already died. However, this is no longer the case - now the framing_chan is actually the last to start and first to exit in the chan_sup and so the reader needs to link to the chan_sup instead. This means the reader needs to track both the framing_chan and the chan_sup
rename pubAck -> confirm
rename pubAck -> confirm
make table content spot check part of schema_integrity_check and - rename check_table_content to check_table_integrity - change wait_for_tables to only do what it says rather than also do   the schema integrity check. This change is necessary in order to   avoid an infinite recursion due to check_table_integrity needing to   call wait_for_tables - add ensure_schema_integrity_check, which contains logic which   previously was part of wait_for_tables - call wait_for_tables in all the right places, and no more
More tests.
Start of an integration test; just queues for now.
check that messages are transient before ack'ing blindly
idiot2
idiot
added counter and single pubacks for transient messages
The table content tests need to happen *after* we've waited for the tables, otherwise they can fail. Thus now two phases - schema checks, as before, and then table content checks.
cosmetic
Improve match specs
Use match specs instead. This is a first pass - I want to be able to add some guards and assert things a little more tightly
Partial implementation of 3rd suggestion. Partial because I just wanted to see the shape of it rather than implement the whole thing and then possibly have to revoke it. IMO, testing on the deep structure of terms is likely sufficient
added pubAck handlers in rabbit_channel
added pubAck.deselect-ok
puback -> pubAck
Remove dead code - collector is never explicitly shutdown: the supervisor will kill it off appropriately
added puback to framing codecs
added Publisher Acks class and methods
I erroneously removed trap_exit on channel yesterday. It needs to be on because otherwise the gen_server won't call terminate when it's sent a shutdown signal
Abstract the heartbeaters in the same way - the reader now has no references to supervisor(2)?:.* nor does heartbeater.
Abstract out the limiter creation. The abstraction made ensures the channel never directly calls supervisor(2)?:.*, nor does it have any knowledge of the channel_sup.
Merging bug 23095 into bug 15930
Prevent supervisor2 from getting upset if a child has already vanished normally whilst the supervisor is trying to stop it
Remerge bug23038 into default
Make a plugin directory for the Windows package as well
merge bug23098 into default
When a supervisor is killing off its children, if its children have already exited normally, don't class it as an error - after all, the supervisor traps_exits, so the relevant exit signals will likely already be in the supervisor's mailbox
Fixes all over. Still more to do, though mainly API fixes. Functionality seems to be correct.
Given changes to intrinsic, if we do ever try to restart (abnormal exit), we should hit the max restart intensity immediately
Arbitrarily decide to make the channel_sup_sup the very first thing that gets started and thus the last that gets stopped
Flush the writer much earlier on, allowing the actual termination to be less risky
Merging bug 23098 into bug 15930
Merging default into bug 15930
Merging bug 23095 into bug 15930
Modify behaviour of intrinsic to be more like transient, except in the case of normal child exit
Reverting rabbit_sup to not use intrinsic
updating amqp_connection API documentation; changing README to get its content from the Erlang client build page on the website; other minor
Merge bug21875 into default
use state_del_child instead of remove_child remove_child removes child *specs* which is not what we want here
On reaching the max_restart_intensited, don't remove the child spec. Instead just blank out the child's pid, thus ensuring terminate works correctly even for simple_one_for_one_terminate
cosmetic
merge heads
merge bug23095 into default
merging bug23039 into default
Merging bug 23095 into bug 15930
Convert rabbit_sup to supervisor2 using intrinsic
Introduce intrinsic restart type
Merging default into bug 15930
Export gen_server2:enter_loop6 (oversight from the past)
Merging bug 23094 into bug 15930
cosmetic
cosmetic
Move parent inside of #v1 in reader
Merging default into bug 15930
Merge 23091
Merge bug23091 (use protocol in #content rather than supplying it)
expand and rewrite tests make it more obvious what we are testing and handle more cases
simplify code somewhat and ensure we don't busy-loop if ensure_content_decoded fails
adapt to api changes
improve test coverage
handle transcoding of content when it is not available decoded
cosmetic - we only use quoted atoms in types and when quoting is needed - make existence check total - if it's the wrong type code further   down the chain will barf anyway
no protocol in rabbit_binary_parser:ensure_content_decoded it can just use the protocol associated with the #content, which is safer and presents a saner API
include method name in error if possible
updating API edoc documentation
oops
Fix stupid error, more consistency.
Added intrinsic restart type and used it
Merge two requests to get a list of all (active) channels.
Removing the wrong changes to supervisor2 to suppress error reporting. Shall fix this one differently.
Merging default into bug 15930
Merge bug23035, list activated plugins
exit the framing_channel normally on unexected_frame error and use explicit signalling to the reader instead of exiting abnormally. This avoids cluttering the error log.
Unpack plugins into appdata on Windows.
Default to the real Unix-y scratch dir, override in the Makefile.
minor
fixing make target name clashes; other minor
Only send the pid in the overview, it's not that interesting.
Switch to formatting stuff as we recieve it. Enhance augmentation somewhat.
merging in from default
Merge heads
Merge bug23038, plugins dir in binary dists
merge bug23083 into default
tweak
tweak
don't depend on exceptions
map/filter at the same time
Switch to holding our own queue details rather than querying Mnesia. The intent is to make it more regular and easier to get queues by pid.
more informative failure messages
table columns also need to be in the same order
tables are compatible only if they have exactly same attributes
all errors should be caught
cosmetic
refactored code
check that mnesia table attributes are as expected
Wrap.
Merging bug 23027 onto default
Start of an augmenting mechanism; show channel as ip_addr:port (number) rather than pid.
nicer error messages
Minor improvement
Seems like more recent mochiweb fixes this problem. Or I imagined it.
merging in from bug22993
changing amqp_channel_sup_sup to kill children brutally - the connection takes care of closing the channels properly. If that does not happen, then the children should be killed immediately, since there's no connection to support more or less graceful channel shutdown
fixing failing tests
merge default into bug23027
bug23067 merged into default (mochweb build on R13B03)
Merge bug20078 (don't fail commits when queues go missing)
Add note on Erlang version needed.
minor amqp_dbg fix
Merge bug23077 into default.
Merge bug23060 into default.
cosmetic
don't barf on tx.commit when some queues have been deleted
hide rabbit_event initialisation details
better description for rabbit_event
more useful comment
bug23071 into default
Use now() instead of os:timestamp() for compatibility. now() uses a per-node lock, which is not great, but this is only invoked on lifecycle events, plus every few seconds per queue / channel / connection when the stats level is > none.
fixing merge conflicts; moving open_channel to amqp_channels_manager; hard_error_test occasionally fails
Merge bug22964 into default.
Cosmetics.
Merge heads
synchronously delete exclusive queues on server-initiated close (not just on client-initiated close)
Add a quick patch to make Mochiweb buildable on 12B3. This patch commits the following ugliness:
merging in from bug22993
fixed broken function calls; tests pass
going back to starting children dynamically in supervisor's start_link; cleaner supervision; fixing return reason in network connection for server_initiated_close situation
Cosmetics
merged default into bug22964
Merge bug23059 into default.
merged default into bug22964
make queue collector shutdown asynchronous and add a spec for it
merging in from default
correct horrendous coding mistake
moved option parser to rabbit_misc
Merging default into bug 23027
Correct specs of post functions from exchanges. none() is the empty set. No value belongs to the empty set. So clearly none() was wrong
Merging bug 23048 onto default (again)
Correct missing _ prefix
Merging default onto bug 23048
merging amqp_0_9_1 into default
Merging bug 23048 onto default
merging default into amqp_0_9_1
merging bug22984 into default
Reverted 'shutdown' to 'normal' for our own programmatic exits. This then leaves us with a problem with the reader shutting down channels as previously the framing_ch was trapping exits (so Reason of 'normal' gets converted to EXIT msg), but now it's not (Reason of 'normal' does *not* cause process to exit). Thus use framing_channel:shutdown instead . Also, a child may not return {ok, {pid, pid}} from its startup. But it may return {ok, pid, any} where any is passed back to the caller.
merging bug21816 into default
added option parser tests
Merging default into bug 15930
Avoid the unnecessary callbacks in the various new _sups as much as possible by breaking the declarative child specs but trying hard to keep them declarative as much as possible.
Missed bits.
updated specs
TODO brain dump.
rabbit_exchange:type_to_module/1 no longer throws protocol errors
Provide a better protocol() type
Print a count + list of plugins that are activated.
Don't dynamically start up the channel_sup_sup - it doesn't gain us much to predeclare it with the Protocol and it makes the children of the channel_sup_sup less obvious
updated tests to use the new rabbit_control:action/5
updated docs
treat no-arguments-given as a special case; refactored opt parser
Make similar fixes for Windows.
Fix typo.
Another debitrot but a smaller one. Did it again due to several largish branches landing on default today and less expected in the near future
fixing leftovers; need to find a way to get connection exit reason if it fails to start and return it as {error, Reason} from amqp_connection_sup:start_link/2
homemade opt parser
remove dead code
Merging bug 21387 onto default
Move unpacked plugins and boot script to /var/lib/rabbitmq/plugins-scratch.
add Makefile targets to simulate memory pressure to be used in tests
Corrections to specs and export suitable event specs
Attempt to improve specs.
Merging default into bug21875
Merging bug 23022 onto default
Don't blow up now connections have protocols.
Merge default into bug21387.
merged default into bug22964
merging in from default
supervision children are now properly started in supervisor's init; adding amqp_connection_specific_sup
Forgot to _ prefix
Move changes from amqp_0_9_1 branch to a bug branch.
update reader state docs
A ginormous amount of debitrotting, rewriting, debugging and refactoring to merge default into bug 15930
don't overload meaning of 'callback'
restart bug22984 off default
fold the memory conservation status into the connection state
only stop reading from clients that publish while memory is tight
Merge 0-8 protocol header fix (bug23040)
The crazy protocol header is the 0-8 spec's fault; adjust comment to not impugn py-amqp's good name (and document other headers)
Minimise difference with default.
Somehow the 0-9-1 branch had reverted to talking 0-8. Fix.
Make the channel and framing_channel more flexible in terms of being created. This improves the API to reduce special casing needed by the erlang client
pause/resume heartbeat monitor as required
Merge default into amqp_0_9_1
remove unused type
merge default into bug23027
merge heads
merge heads
Work around broken py-amqplib handshaking
react to memory pressure by pausing socket receive which is much more prompt and effective than issuing a channel.flow
cosmetic
Merge bug14647
Merge default to get json filename changes
merge bug22886 into default
add unexpected_frame error code to 0-8 spec we agreed we'd use the same error codes across version, but somehow missed this one.
merge default into bug22886
added connection_exit() and channel_exit() to relevant function specs
This works for generic unix, deb, RPM, Windows bundle.
Merge amqp_0_9_1 into default.
Merge default into amqp_0_9_1
Merge amqp_0_9_1 into default
Merge default into amqp_0_9_1
adding amqp_channels_manager; adding two tests for opening and closing channels repeatedly and in paralel; removing some duplication between network and direct connections; other refactorings; other small fixes
merge bug22889 into default
merge bug22889 into default
merge bug22889 into default
merge bug22889 into default
merge bug22889 into default
Merged default into bug22889.
Merge default into bug22889.
Merging bug 23032 onto default
Merging bug 23032 onto default
Merging bug 23032 onto default
Re-abstract the stats timer thing in reader.
merge bug23034 into default
Merge bug22982: newer version of mochiweb
Merge bug22982: newer version of mochiweb
merge bug23031 into default
merge default into bug23031
tweaks to heartbeater - make it return the pids of the created processes. That gives us a useful future extension point, e.g. for pausing/resuming - add specs - get rid of the Y combinator - it actually makes the code longer
removed supervisor3 reference from .app
propagate API changes
propagate API changes
consistently return {ok, Pid} from start_{link} functions
merge default into bug15930
merge bug21396 into default
merge bug21396 into default
merge bug21396 into default
simplifying refactor
remove unnecessary export
Add note
These are only totals for all active connections, so don't show total, just rate.
Add an attempt at specs. The second part of the state type should not be an atom but a timer; however I can't find that easily.
Not sure how it worked without this.
Fix warning.
Revert reader changes in 1451c9523971 sicne they force us to start / stop a timer all the time.
Cosmetics, add pid to CREATION_EVENT_KEYS, don't emit stats when stopping when timer does not exist.
Convert use of regexp to re
Merging bug 22973 onto default
Extend test coverage of delayed restart to simple case and fix exposed bug
Remove unnecessary stop code which was never being called
rabbit-mochiweb tests need inets and crypto too
Refactor: abstract some things into rabbit_event.
Fix handle_deleted
Added tag rabbitmq_v1_8_1 for changeset a44a10c84065
Construct channel creation event as a comprehension.
reduce time taken by tests
git clone -b is quite new; live without it.
Typo.
Clean up tests a bit, avoid the retry count and sleeping.
Don't need retries the first time through.
merge default into bug14647
Merge default into bug21387
Merge bug21922 into default.
Only start the expiry timer if no consumers, and only reset on ch_down, cancel and get
merge default into bug14647
Merged bug23028 into default.
issue correct error for basic.ack with unknown delivery tag as per the 0-9-1 spec
Renaming and minor refactor
cosmetics
Add a simple page listing consuming channels.
minor
Add the beginnings of a mechanism to query the fine stats.
Remove dead code and get supervisor2 to hide some error messages when MaxR is 0
Correct tests by making the fake writer obey the same flush protocol as the genuine writer
Merge bug23019 into default (Index directories have too long names)
Rename these to avoid name clashes in the management plugin.
Merging default into bug15930
minor; cosmetic
Added test for delayed restart in supervisor2
Abstract stats tables a bit
Cope with receiving backing_queue_status from the new persister.
Merging default into bug 21396
Minor refactorings
implement basic.reject the simplest flavour that seems useful
Merging default into bug 21922
remove superfluous warning We don't complain about similar situations elsewhere, so there is no point doing it here.
cosmetic
cosmetic
minor cosmetic
fixing some merge conflicts; moving heartbeat from main reader to the network connection module - the two heartbeating processes are added to amqp_connection_sup; other small fixes
Depend on the newer version of mochiweb.
Update the version of mochiweb used to today's.
merging in from default
major refactoring to supervise all processes; amqp_connection_{network,direct} processes now lives under amqp_connection_sup which uses amqp_infra_sup; amqp_channel now lives under amqp_channel_sup which uses amqp_infra_sup; amqp_channel_sup lives under amqp_channel_sup_sup which lives under amqp_connection_sup; adapting all processes to work with the supervision model; changing the way to start connections in the API; other smaller fixes
Oops, don't turn into a timer bomb.
Send a stats event as soon as you wake up.
Use apply_interval rather than apply_after, cosmetics.
md5sum the queue index directory. Also detect and crash if a collision occurs
Make statistics collection into an application parameter, switched off by default.
Switch statistics collection on.
Tweak priorities a bit.
Revert to the prior, process dictionary-based way of storing statistics.
merging bug23010 into default
Merging default into bug 21387
selectively receive more messages during tests
Come up with a way to sum statistics, use it to show global data transfer stats.
Clean up the overview code. Remove the timeout handling stuff, it should no longer be relevant.
Add a connection details page
Rejig the connections table, try to show more interesting / relevant information.
Improve abstraction a bit more, don't send facts to the client that we don't know.
Significantly de-uglify the formatting code.
Fix connection closure.
Base the connection_created event on the updated state; needed to get vhost name.
The format and rate code is horrible, but we now get connection info from events too - the only thing we poll / cache for is ghlobal os-related stuff.
extract encoded subject field from certificate
Sometimes we will know of an object via Mnesia but the stats for that object won't have appeared yet. Handle that rather than crashing.
merge bug21673 into default
Allow the complete test suite to run.
merge heads
replace use of dict with orddict for per-msg_store partitions which is much faster for small dicts
merge default into bug21673
add rabbit_misc:orddict_cons helper analogous to dict_cons
Unit test, and fix a bug found by the test.
Merging bug22994 into default
Minor cosmetic
minor function rename
better terminate; other minor
Spelling
Merge bug22992 into default.
refactor: extract rates into separate part of vq state
Rewrite the channel stats again to use ets. Not sure if this is any faster, maybe a bit.
Cosmetics
Merged default into bug21387
Merging default into bug 21673
Bump specs requirements to R14A
Increase priority of stats messages for channel and queue. Don't use gen_server2 for reader since it's not a real gen_server anyway.
amqp_main_reader is now a gen_server
Merged bug22930 into amqp_0_9_1
Fixed channel shutdown mechanisms
Store (channel, exchange) stats as well as (channel, exchange, queue) since we can't derive the former from the latter.
Store queue/exchange stats in the process dictionary since that's rather a lot faster than dict:
branch name change
channel processes are now supervised by amqp_channel_sup; very basic supervision in the network case; client works with the new supervision in the broker; fixing bug in resolve_channel_number
Correct shutdown to use API
Well the rabbit_tests now pass owing to being able to support a very similar API to previously wrt channel, but shutdown seems to be sporadically successful at best.
Whoops - revert to avoid deadlock with supervisor trying to call itself during child creation
Invoking os:timestamp and timer:now_diff all the time is too expensive, use timers instead.
Add framing_channel:start_link/1 for use by Erlang client
Merging default into bug 15930
Merging default into bug 21922
use the new BQ:stop/0 function in tests for better symmetry
Move logic for validating arguments to queue declaration out of the initialisation of the queue process.
If a new QPid appears more than once in the list, only monitor it once.
Store (channel, queue, exchange) stats instead of (channel, exchange). Unify the two stats dictionaries in the channel.
rabbit_amqqueue:stop already stops the msg_store
merge default into bug21673
flesh out backing_queue API
cosmetic
cosmetic
reformatted comments
list_connections can now print a peer's ssl certificate
more vq test refactoring
Refactorings in observation of commonality between queues and exchange arg equivalences. Also cosmetics, and various specs fixes.
Rename some variables.
Standardise on "stats" rather than "statistics" since we were getting rather verbose. And inconsistent.
Store both channel-exchange stats and channel-queue stats in the same format.
Merge the timed/delayed restart code originally from supervisor3 in shovel into supervisor2
supervisor2 is included in the common ez
Use supervisor2, not supervisor3
vq test refactoring
bug22917 merged into default.
default merged into bug22917
cosmetics
Merging bug 22677 onto default
reporting of cluster node types now works
Cherry-pick the last differences between bug 22889 and amqp_0_9_1.
Make more consistent with bug 22889 - see comment 83 on that bug
remove superfluous test this is covered elsewhere already, notably in test_variable_queue_partial_segments_delta_thing.
Merged default into bug 22889
Merge default into amqp_0_9_1
Merge bug22889 into amqp_0_9_1
Merge default into amqp_0_9_1
This function was merged wrong; fix.
made one of the vq tests a little less obscure ...and don't rely on timing
Merge bug22889 into amqp_0_9_1
Merge bug 22889 into amqp_0_9_1.
applied qa notes; refactoring
cosmetic
cosmetic
All sorts of improvements to the queue lease code - simplifications and removing dead code
Missed out arguments in binding_created.
Lifecycle events for queues, exchanges and bindings.
minor refactoring of vq tests
The channel has a few statistics / state of its own too.
Initial commit of Ask's work
simplify qi tests
Update for broker API change.
Use list comprehensions to build the stats proplists.
simplify qi tests
Switch to using proplists rather than records for events.
Switch to using proplists rather than records for events.
simplify qi tests
Merging bug 22977 into default
cosmetic
simplify qi tests
refactor msg_store starting/stopping in tests using the new funs in vq
flesh out vq API with funs useful for testing
merge default into bug21673
flesh out APIs somewhat useful in tests
Normalise the name of the package, see bug 22988.
removing dialyze make target from source tarball makefile; other small fixes
Make channel monitor queues for which it is gathering statistics, and remove the stats when the queue goes away.
More documentation
That's not needed.
Improve documentation and document persistent vs transient msg store are for
Merging default into bug 15930 and a little debitrotting
Emit events for connection and channel statistics and creation / deletion.
merging in from default
Merging bug 21606 into default
refactor: simplify msg_store tests
refactor: simplify msg_store tests
refactor: simplify msg_store tests
cleaning up all makefiles in the client; make -j works; client does not do unnecessary builds anymore; source tarball makefile does not contain unnecessary make targets (some of which would not work); other smaller makefile fixes
tweak
refactor: take adantage of l/r symmetry in bpqueue tests
dict:find -> dict:fetch andalso lists:flatten -> lists:append
Merging bug 22987 into bug 21673
Cosmetics
optimise qi:sync call in tx commit call it with acks for persistent & durable messages only
application:get_env/2 -> application:get_env/1
refactor: 'cons_if' helper function
merge default into bug21673
cosmetic
tweak to assist testing ...outside the context of the rabbit app cherry-picked from bug 21673.
'sync' -> 'idle_timeout' cherry-picked from bug 21673.
moved rabbitmq_cluster.config into the cluster_nodes field of rabbit in rabbitmq.config
tweak msg_store API to make it safer ...by not allowing clients to be deleted w/o terminating them too
tiny refactor
add a 'todo'
don't log warnings on clean startup of a msg_store
Tweaks.
Do color formatting on the client, and stripe table rows.
Switch from json-template to EJS. Uglier but much less limited.
Merge bug21387 into default on the basis that otherwise everything I do in this repo will spam that bug.
Make the web app look nicer, show port on startup.
cleared up manpage
cosmetics
Don't double-wrap.
Use timer:now_diff, don't double-wrap.
using the broker's rabbit.plt and rabbit_dialyzer for make dialyze; removing dialyze_all
q_pid -> qpid
q_pid -> qpid
Merged bug22140 into default.
merged bug22979 into default; no changes
Get queue stats from events rather than polling.
Get queues to emit events for statistics.
rabbit_reader_queue_collector -> rabbit_queue_collector
don't forget to process transactional acks ...when the tx doesn't involve any persistent messages, thus plugging a leak in pending_ack and qi.
add pending_acks to bq state report it turns out to be useful
refactor: invert some conditionals for better readability
refactor: trim args for msg_store_callback we only ever need a msg_store_callback when we have persisted pubs
Update for latest rabbitmq-server API changes
another place were averages could end up being integers instead of floats
rate averages are meant to be floats
avoid >= between a number and an atom
improve type specs
cosmetic
merge default into bug21673
add some msg_status invariants these are quite important for understanding much of the code
cosmetic
Quick hack: show data rate per connection as well as total.
renamed variables; alligned code
cosmetic
refactor
simplify remove_pending_ack The pending_ack dict should always be empty at the end. Previously we kept the ack records of persistent messages when KeepPersistent=true.
cosmetic
merging in from default
Simplify status_render somewhat.
Merged heads
Changelog updates for release 1.8.1
cosmetic: more sensible order
Merge bug22875 into default
>80 lines fix.
merge bug22875 into bug22964
Get rid of MContext.
added insightful comment
scope is not set via the -s flag
Added tag rabbitmq_v1_8_1 for changeset 5d9e3ff32dcb
Set up a saner environment for webmachine. Now it displays error messages in the browser and I can stop tearing my hair out.
added coverage tests
bug22914 merged into default
added a flag to set_permissions to control their scope
Added tag rabbitmq_v1_8_1 for changeset 87048ea44df5
replaced call bad:bad/0 with a call to exit/1
Break up the JSON space, server side.
Move things around and rename.
Update copyright messages and docs a bit
updated man page
Convert to useing webmachine to serve JSON content.
fixed compile errors; all tests pass
permission tags are now displayed
check_all == 'true' => permissions are checked for server-generated names as well
added necessary fields to records
empty permissions are not printed as "" anymore
Split the pages up: client side.
"" is changed to "^$" when checking permissions
empty strings are displayed as ""
corrected regexp
simplifying refactor
Adjust the CONFIG_FILE default with the macports prefix
Remove IFS setting on the su command
"make clean" should clean all the macports-generated files
The most important thing: make it look a bit like the RabbitMQ website.
These are no longer available, see here: http://rabbit-hg/rabbitmq-server/rev/a9b669a747f9
Show last update time.
Remove the server-side template code. Format memory sizes. Auto-refresh.
Add in the connection and queue lists
Add a very simple codegen mechanism to avoid the pain of embedding HTML in Javascript. Fix dependencies.
Port the status page to static HTML + XmlHttpRequest. The top half works now, but writing templates in JavaScript is a pain.
"" is transformed to "$^" in rabbitmqctl set_permissions
.hgignore
Reanme to rabbit_management
Clone of rabbitmq-status at 2a144a401ee1
No longer mark the USE_SPECS common.mk Makefile variable for export, because if it is so marked, it overrides the test in rabbitmq-server's Makefile when the make -C happens, and the override causes problems whenever the test here and the test there compare system_info(version) against *different* eshell version numbers. (Note that this is the case at the moment: the server needs R13B04, the client R13B01.) This change effectively lets the server code and this erlang client code make their own separate decisions about whether to compile with -Duse_specs or not, rather than the erlang-client calling the shots for both.
No longer refer to out_of_band field, which is deprecated in 0-9-1
rabbit_framing is gone
Remove maybe_encode_properties
version should come first
export protocol/0 type to avoid compiler warning
put the 'none' check back into ensure_content_encoded it's safer and more obviously correct that way
revert gratuitous change
Merged bug22946 into default.
refactor: extract error helper
don't log content on framing error plus some minor refactors and cosmetic changes
slight optimisation
Merged bug22877 into default
finished transition from regexp to re
0-9-1 error codes in a multi-prococol broker
This wiped out rabbit_framing_channel. Never mind.
Merge default into bug22889
Don't change the signature of ensure_content_decoded.
replaced regexp with re
Fix idiocy
merged default into bug22877
Remove accidentally left in reference to rabbit_framing, probably unnoticed due to http://hg.rabbitmq.com/rabbitmq-server/rev/40d480c6e43a
Make sure one does not accidentally build a server containing old rabbit_framing when switching branches.
Store protocol with encoded properties, use it to transcode if needed.
deduplicate even the current node
added deduplication of cluster node list
improved docs
refactor: introduce rabbit_misc:protocol_error/1 so that the channel can get away with knowing a little bit less about error handling
Merging bug 22935 into default
amqp_error is a record. Duh.
Expose the persistent count in the vq status
Fix type of inner_fun, cosmetics.
Document ram_index_count
Correct tests so that they don't complain now that the shovel doesn't blow up with no shovels configured
don't force storing of binary properties see also bug 22957.
merge default into bug21673
merge heads
Update inner_fun spec.
Make add and delete more symmetrical, tidy up a bit.
Update comment.
Wrap much less in try / catch
remove incorrect comment We actually never decode the properties on recovery (or later) since the broker doesn't need them after the initial stages of message processing.
minor refactor
cosmetic
Unwrap amqp_error and rethrow
merged bug22950 into default
merge bug22950 into default
merge bug22901 into default
Make acc win in domains_merger.
rabbit_reader_queue_collector -> rabbit_queue_collector
Rename rabbit_reader_queue_collector to rabbit_queue_collector, and shorten some function and variable names.
Revert these two merges to new into old, I can't remember why I swapped them round and it makes things rather clearer this way.
merge heads
merge bug22896 into bug21673
Bump the msg_store file size limit when testing from 128bytes to 512bytes (normal operational limit is 16MB). This ensures that the GC code is hit
When pushing β to γ, *always* do the youngest β first as they will stay around the longest and thus have the greatest chance of reducing the number of subsequent βs pushed to γ
remove redundant heads
Minor typeo
More renaming.
Merging bug22901 into 22889.
More renaming :)
Correct documentation for variable queue and the chunking of transitions
Merging bug 21673 into bug 22896
Merging default into bug 21673
--allow-overwrite became --allow-accumulate.
Merged bug22901 into bug22889.
Correct some dict() to dict:dictionary() that were missed.
Stylistic changes: Rename old to acc, allow_overwrite to allow_accumulate, and o to merged. Add comment. Tweak usage message.
Merging default into bug21673 and correcting specs and types
Merging bug 21954 onto default
Whoops, forgot to export it
Bump use_specs to R13B04 or later
Introduced and used ok_or_error2(A,B). Also verified everything seems happy under R13B03
r2 -> r3.
unify the phase change predicate and phase change operation so that the logic for determining the necessity of phase changes is kept in one place and cannot diverge.
cosmetic
oops
simplify memory reduction decisions
And now the channel, writer, limiter and framing_channel are also all suitably supervisored
Make the error message shown on protocol mismatch as clear as possible.
merge bug21673 into bug22896
tiny refactor
cosmetic
Ensure that a supervisor, when attempting to stop a process that turns out to be already stopped with either normal or shutdown, does not winge
added test
Added ability to stop supervisor2, which means children only need to be transient, not permanent, as we're no longer relying on reached_max_restart_intensity to nuke out the supervisor. However, we still don't quite have the error-free shutdown because supervisor still complains if it tries to stop a child and finds the child already dead.
cosmetic
all tests now pass
The heartbeater doesn't need to signal the reader in the event of a timeout - it should just exit abnormally and rely on the supervisor to tear everything down, esp seeing as the reader previously was just throwing the timeout exception.
added links inside docs
updated docs and tests
Now we have the reader, heartbeaters and queue_collector all under the same connection_supervisor, with one connection_supervisor per connection. Tests pass. The framing_channel, channel, writer and limiter are all still just linked as before, without supervision
merge default into bug21673
changed cluster -f to force_cluster
merged default into bug21954
include cleanup
add some comments and TODOs
cleanup
removed line at top of rabbit_mnesia.erl
Branch change
dialyzer doesn't support overloaded types
As a first step, get the channel, framing channel, and writer to exit with shutdown, not normal, as shutdown is the correct exit reason for supervised processes. Tests adjusted, and still pass
refactored r types and specs
cosmetic
cosmetic(ish) - avoid unnecessary thunking and some layout fixes
{'ok', A} -> rabbit_types:ok(A)
Merged bug22938 into default.
{'ok' | error(...)} -> rabbit_types:ok_or_error(...)
Merging heads
merge default into bug21673
Forgot to fully initialise qi state.
{error, A} -> rabbit_types:error(A)
Merged bug22908 into default.
moved all rabbit.hrl types to rabbit_types.erl
merge default into bug22889
make test_content_framing less dependent on codec internals ...and invert assertion, for clarity
fix bugs in tests caught by dialyzer these didn't actually cause anything to break
moved common types rabbit_types; move net types to rabbit_networking
moved export_types to inside ifdefs
Rename unknown protocol to none, fix tests.
Merge default into bug22889
Merge bug22901
Remove accidental print statement
...and back out all those checks after discussion with Matthias.
Merged bug22901 into bug22889
Refactor merge_dict_lists_by a bit.
Ensure that after asking the writer to exit, we unlink from it. We're usually in the channel when we ask it to exit anyway, which has trap_exits on, so the selective receive is appropriate. In the erlang client we're in amqp_network_connection, which also has trap_exits on, so it's fine there too. However, the point is to ensure the *writer* isn't destroyed early by the channel exiting too quickly, not the other way around, and without turning on trap_exits in the writer.
Actually, default-value conflicts all over the place.
Always break when there's - a method argument defined with two different types or default values
Always break when there's - a method with two different "synchronous" settings
Merge bug 22901 into bug 22889.
Always break when there's - a domain defined with two different types - a constant defined with two different values - differences in properties signatures
Restart bug 22889
Use --allow-overwrite
Merge bug 22901
Add --allow-overwrite command line switch.
added missing export_types
merge default into bug21954
Merged default into bug22908
updated man page
cleanup
Merge default into amqp_0_9_1
Fix compilation on R14A.
Dummy commit to bring back amqp_0_9_1.
added -f switch to rabbitmqctl cluster
Update protocol format
cosmetic
cosmetic
Correct spec; correct dependencies.
This is the default anyway.
Merged heads
Get codegen to build Protocol:version().
Major and minor are integers, revision should be too.
Fix STOMP adapter.
Remove remaining hard coding of rabbit_framing_amqp_0_9_1 from the codec.
cosmetic
Be less clumsy.
oops
cosmetic
improved types
Fix the shovel.
Fix up the Erlang client.
Send the right connection.start in 0-8. Amusingly, this doesn't matter for the Java client due to http://hg.rabbitmq.com/rabbitmq-java-client/file/3dfa3f6eb6fd/src/com/rabbitmq/client/impl/Version.java#l95
merge default into bug22889
cosmetic
better types
cosmetic: more sensible place for protocol in info items
updated dict() to dict:dictionary()
because inet doesn't export all its types
tweak: don't need protocol_name type
better types
Merge default into bug22885
merge default into bug22889 and in the process remove yet another hard-coded protocol
minor simplification of test This isn't quite the same since rabbit_basic:build_content only creates decoded properties, but for the test in question that doesn't matter.
Update the names of our JSON files, don't use the 0-8 extensions file.
Rename JSON files, and merge the 0-8 extensions back into our main 0-8 file.
Merge default into bug22889, and remove another hard coded protocol use.
minor refactor
Oops, missed one.
Remove an instance of hard-coding.
This clause can indeed go.
Remove the rabbit_framing shim, pass around a module name and use that.
Merge default into bug22889
Merged bug22925 into default
moved most hard-coded types from rabbit_framing
fixed compile errors
redistributed all types from rabbit_framing_spec.hrl and rabbit.hrl
Protocol is negotiated first.
partially moved types out of rabbit.hrl
Refactor connection negotiation a bit.
Remove backslash so that IFS gets the intended value in the wrapper script
Undo removal of IFS
Dropped IFS variable from macports wrapper script.
Default merged into bug22914
Protocol is not actually very interesting; take it out of the default list of connection parameters.
Merging bug22927
Merge bug22911 into default (make srcdist creates README and BUILD)
Inline qstats
Merge bug22910 into default (stage.rabbitmq.com no longer exists)
updated file-related specs
Omit the --stringparam option for old versions of xmlto
Remove stat_all/0, remove queue name from stat.
updated inet-related specs
Refine the inclusion of deps.mk
solved new warnings; now we get the same warnings as with dialyzer 2.2
Merging bug 22924 into default
move queue equivalence and exclusivity checks into amqqueue module ...from the channel, since the latter should have no in-depth knowledge what these checks entail.
cosmetic
cosmetic: remove trailing whitespace
recurse with the correct value not that it matters
cosmetic
Merging bug 22587 into default
Merging bug 22918 into default
Rename no_delete to not_deleted, makes things clearer.
Fix auto-delete on unbind.
Unabuse scope for Tag
Merged bug22392 into default
Correct comment and clean up a little bit.
Merge bug21830 into default
Refactoring and cosmetics
Blow up on unsolicited message delivery - Erlang client.
Merging bug21673 into bug22896
Merge default into bug 21673
tid() -> ets:tid() == able to compile on R14A
As predicted, changing this from sets:from_list/sets:fold to lists:usort/lists:foldl has a decent performance improvement, moving from being able to sustain 8kHz on a topic exchang to 8.5kHz on a topic exchange
Merge default into amqp_0_9_1
Explicitly set all the environment variables that su on Linux would
merge bug22882 into default (ssl is even more broken with rabbit in R14A)
Cosmetic
Make tests pass again and correct placement of permission check
Rework queue declaration to avoid a race condition that could result in incorrect values in the queue.declare_ok
Support default consumer in the Erlang client.
updated error code for re-declaring a queue differently
corrected error codes when re-declaring an exchange
Switch from BUILD to README, both for the .in file and for elinks.
Switch to www.rabbitmq.com by default (was stage.rabbitmq.com)
Rename README.in to BUILD.in
Merged bug21872
Avoid unnecessary mnesia lookup and significantly simplify queue declaration code
Show protocol in rabbitmqctl list_connections. I *think* this is interesting enough to put in the default list of info items.
Multi-protocol broker. Let joy be unconfined.
Merged default into bug22885
Merging heads
Merging bug22895 into default
Merging bug22895 into default
Merging bug21673 into bug22896
Merging default into bug 21673
Merging bug 22879 onto default
Simplify logic, plus cosmetics. Both conditionals can now be read as: if we find the eldest of our requirements and the current version, and if that eldest thing is not our requirement then we must have something older, so we take some action
Merged bug22900
Make the Erlang client work again.
Replace some stuff I stripped out that's used by the Erlang client.
Match symbolic constant for code instead of advisory text in test
Rebase bug21849
refactor: don't use module:Fun
blow up if make is to old
Rebase bug21848
Merging bug21673 into bug22896
Glad to see I'm not the only one who's made this mistake: release and remove are two different things
Don't specify a value for cluster_id and known_hosts, they already have a default of "".
Merging bug21673 into bug22896
Merging default into bug 21673
This is used, by the Erlang client.
Corrections to tests, and actually make the needs_idle_timeout logic do something which might reflect what happens when the idle timeout gets called. All the tests pass.
Remove a * that crept in.
Codegen up two different versions of rabbit_framing and provide a dispatcher to choose. The codegen now builds header files that are the union of 0-8 and 0-9-1.
Rebase bug21848
Remove close08 hack, and remove deprecated- prefix everywhere so it will merge with 0-8.
merge bug22888 into default
tweak error message
Merged bug 22901
Merge everything, don't die on conflicts.
Yup, missed a few more too
Synchronise test constant with broker value
Whoops, missed one
get rid of channel_max checks ...until we actually support channel_max settings properly. That way we avoid dead code / unused var warnings from the compiler
Don't pull protocol version from the JSON.
Revert the lie that this file is 0-8
Rename protocol constant.
This is clearly driving me insane. channel.tune-ok does not exist, even in 0-9. (And this was not caught by tests since our Java client seems happy with either version of open-ok, but we shouldn't count on that.)
Add protocol to reader and writer state, and pass it around in enough places to let us switch based on protocol. Remove a couple of unused exports while we're there.
Re-add 0-8 JSON for the clients.
shut up compiler
Use ~w rather than ~p.
Handle 0-8 channel.tune-ok.
Chunk up work to do when converting α to β. Unfortunately this violates one of the invariants (Q1 or Q2 or Q4) -> ¬(TargetRamMsgCount > 0) because it might be ==0 but the work is still in progress. I prefer relaxing the invariant over requiring a "big push" once we get to 0. Some of the tests now don't pass as they assume certain values for δ - this should be fixable.
Fix up connection.close/ok and basic consume. I think we're now talking real AMQP 0-8.
Claim to be 0-8 for the time being. This needs to be stripped out though.
Use the new merged JSON for codegen, stripping out redirect and trace frame support on the way. This results in a broker which doesn't quite speak 0-8 as it gets connection.close wrong.
ssl works again
Remove 0-8 specific JSON and use the unified one.
Argh.
I think this logic finally makes sense.
Merging heads
Merging default into bug21673 so that it builds again...
added support for make-3.80 (and a deprecation warning)
Reinstate channel_max check.
Merge default into bug 22888
Merged bug21845 into default
Remove commented out code to enforce CHANNEL_MAX, we don't care.
Cosmetics
cosmetic
make beta->gamma conversion part of general memory reduction scheme While it doesn't reduce memory itself, it is still part of the overall memory reduction logic. This allows us to cleanly separate the beta->gamma conversion from the major phase changes.
Merging bug 22867 onto amqp0_9_1
Make error messages terser.
Or maybe we do want a protocol_error, but let's use a real one.
cosmetic
Don't use protocol_error as we will not send one and mistuned does not exist anyway.
Merged bug22864 into default
Merged bug22864 into default
Merging heads
Improve code coverage further
optimisation: don't call reduce_memory_use quite so often specififcally, on requeue and tx_commit_index only call it once at the end rather than for every single message.
merged bug22874 into default (ToC links on online man pages do not work)
Still at 95.5% but less overloaded
Remove meaningless assertion
Move frame_max handling from amqp_0_9_1 to soemthing branched from default.
Merging heads
Further code coverage improvements. Up to 96.52% on VQ
Fix >80 columns
refactor: simplify maybe_push_q{1,4}_to_betas
Merge default into amqp_0_9_1
Merge default into amqp_0_9_1
massivly simplify variable_queue:publish Rather than trying to figure out which of q{1-4} or delta a message should go into, we make a straightforward decision to stuff it into either q1 or q4 and then use the existing logic for dealing with memory pressure to shuffle it to the right place.
refactor: simplify limit_ram_index
add some more variable_queue state invariant checks
Improving test coverage of VQ
Merged bug 21848 into amqp_0_9_1
Merged bug 21848 into amqp_0_9_1
Reduce duplication.
Merged amqp_0_9_1 into bug 21848
remove redundant conditions and assertions ...already covered by state invariant
Apparently this is better
Ensure that this macro doesn't accidentally cause unification with variables in scope
change queue_index:read API ...to read exactly the messages within the specified bounds, rather than just up to next segment boundary. This API is cleaner and means we no longer rely on a hidden invariant in variable_queue.
Renumbering of variables
rewrote channel closing code
rewrote channel closing code
Merged bug 22767 into default.
Cosmetics
Macports portfile, let's not repeat port:erlang twice.
bug22876 merged into default (preserve ordering of generated spec elements)
Merge bug 21849
This may be more robust in the face of docbook weirdness. At least it forces the anchors to be exactly what's visible on screen.
Update class records in-place
Make use of 0.9.1 error constants
xrange instead of range
Preserve ordering of constants, methods and classes
don't unify on function results that just happen to be side-effect free
cosmetic
a little bit of inlining
yet more refactoring of push_betas_to_deltas finally make the q2 and q3 processing use the same code
updated comments
refactor push_betas_to_deltas even further making the handling of Q2 and Q3 even more similar
refactor push_betas_to_deltas to make the similarity of the treatment of Q2 and Q3 more obvious
cosmetic
Guarantee that we're only reading max one segment when we load in from δ to q3(β)
sanitise ram_duration and target_duration_count so they don't have to both cope with being all of infinity, undefined and a number.
Rebalance blank lines
Permit basic.recover on a transactional channel.
cosmetic
Merged bug18062 into default (macports stuff)
rabbitmq_v1_8_0 merged into bug18062
merge bug22871 into default that change wasn't really meant to be on that branch, but it's harmless.
correct some specs - ram durations can be 'infinity'
Merging default into bug21673
Merging bug 22871 to default
fix syntax error that prevented compilation under Erlang/OTP R14A
slight tidying up of permitted_ram_index_count
correct comment
cosmetic
delete1 is not needed and never called
Reduce msg store file size limit and queue index journal size temporarily whilst running intensive tests
Make the queue_index max_journal_entry_count configurable
Fix msg_file scan block size at 4MB
Expose the msg_store file size limit to configuration. Also some suitable derivisions in tests.
Added test to invoke the queue index walker
Mergin' heads
Removed unenforced redundancy in function args
Put all our extensions in one file.
Put all our extensions in one file.
Move synchronous basic recover to the 0-8 broker.
Create an extension for synchronous basic.recover in 0-8. Also move queue.unbind in 0-8 to an extension since that's what it is.
rename betas_from_segment_entries and make it more efficient ...by exploiting the ability of queue_index:{deliver,ack} to take multiple SeqIds
make queue_index:deliver take a list of SeqIds ...rather than just a single SeqId. This brings it in line with 'ack', simplifies the code, and is useful in variable_queue.
get rid of vq:read_one_index_segment The purpose of the function was to keep reading until either some data was found or the end was reached. However, both call sites contain loops already that effectively do the same, making the function redundant.
Merged bug21835 into amqp_0_9_1
rename
Revert exchange auto-delete removal, and tidy up a couple of whitespace diffs from default.
Merged heads
Merged bug 22597
Added tag rabbitmq_v1_8_0 for changeset 81694676ea97
Added tag rabbitmq_v1_8_0 for changeset d1b197ff0c5d
v1.8.0 release deb and rpm changelogs
refactor: invert condition to make it easier to read
minor refactor
cosmetic
ensure that the erlang client closes its channels correctly
simplified Channel.Close code
server implements 0.9.1 connection shutdown protocol
Merging default into the amqp_0_9_1 branch
restructure 'purge' in order to make its operation more obvious
simplify 'purge' it doesn't need to compute the Count since we already know it
cosmetic
Merging heads
Improved test coverage of the queue index walker
assert vq state invariants as a post condition on all exported functions
Send unexpected_frame if we get the wrong frame type or mismatched class ids.
Good lord, how did that get through?
Merged default into amqp_0_9_1
Merged default into amqp_0_9_1
server implements 0.9.1 channel shutdown protocol
cosmetic
minor refactor
tweak: trust our own code a bit more
minor refactor: rename function
Merging default into bug 21673
Very important cosmetic fix
Merged bug 21842.
restart bug21842 off default
Clarify comment.
refactor: inline {publish,ack}_in_tx
minor refactor
refactor: rename and simplify test_keep_msg_in_ram
cosmetic: more sensible ordering of state components essential vars first, followed by derived vars and counters/rates/etc
minor refactor
refactor: extract accumulation of SeqIds and Guids from acks
refactor: simplify 'fetch'
refactor: extract conditional calls to qi:deliver
refactor: extract #msg_status initialisation
refactor: simplify publish_delivered - extract recoding of pending acks - use maybe_write_to_disk
refactor: extract similarities between ack and requeue
refactor: make 'ack' and 'requeue' look very similar indeed ...prior to combining them
fix small persistent_count counting bug ...which doesn't actually matter since it would only result in the persistent_count of transient queues being wrong, which get nuked on startup anyway (the only place that makes use of the persistent_count).
Merging bug 18524 onto default
Merging bug 18524 onto default
Merge heads
Merged bug21846 into default
removed unnecessary ifdefs
Merging bug 22847 onto default
Correct documentation given recent change
moved common spec to rabbit.hrl; rewrote status code
updated docs
ifdefs surround ALL the specs
Merging bug 22848 onto default
Use precondition_failed for equivalence failure.
Don't reply after replying.
Cosmetic.
Use unification rather than when clause. Also remove separate assert_type as it's buying us very little.
Add spec for assert_args_equivalence/2 for plugins.
Merging bug 20153 onto default
Remove a HOSTNAME which should have been removed already...
Merging bug 22850 onto default
Fix testing for variables so that you get as many errors as possible at the same time. This solves the very annoying problem of a build dying for some reason, then you fix the reason, build again, and end up with a very slightly different error at the same point.
Avoid very strange weird side effecting dependency thingy
Make nodename available to rabbitmq-env in startup scripts
Merging bug 22833 onto default
Convert all tabs to spaces
fixed crash when rabbit:status/0 called after rabbit was stopped
Merged bug22771 into default
Use hostnames in node names
Permit the shovel plugin to be used with no plugin configurations
Make assert_args_equivalence overridable by exchange plugins.
Use the error code as specified by 0-9-1.
fixed specs
might as well do the reply first thing, before the case.
Move exchange and queue equivalence semantics from amqp_0_9_1 to default
merged Florian's 10th patch: replace sleep 2 with sleep 1
cosmetic
complain about missing env vars in the right place especially before trying to use them
enclosed generated specs in -ifdefs
spaces instead of tabs in autogenerated code
removed duplicated code
Move synchronous amqqueue:requeue/3 from amqp_0_9_1 to default
Remove unused variable.
Prevent the same delivery tag being used more than once.
Merging bug 21841 onto default
Start bug22597 again.
Permit binding of durable queues to transient exchanges
Dummy commit to create new default
Merged default into amqp_0_9_1
Merging bug 22821 onto default
The previous 'simplification' went a little too far, and failed to spot than in queue redeclaration we don't want to permit exclusive redeclaration of a non exclusive queue
cosmetic
simplify exclusive access checks
Don't do another dirty_read to get a queue we already have.
Merged in default
bug22824 merged into default
cosmetic
cosmetic
codegen.py now works with latest rabbit-codegen
amqp_codegen.py now supports an arbitrary number of functions
rabbit_framing_spec.hrl is now generated
updated .hgignore
rabbit_framing_spec.hrl is now generated
cosmetic
refactor: introduce helper fun
auto-generation of all function specs for rabbit_framing
cosmetic
refactor: simplify code with some helper funs
more rabbit_framing specs are generated automatically
drop segment num from fun call in segment_{fold,map} to abstract away from the dict-ness of the segment store.
refactor: rename segment_fetch_keys to segments_nums to abstract away from the dict-ness of the segment store
refactor: remove superfluous clause ...which was an optimisation too far, particular since a similar clause is not present in the related functions
tweak: more LRU-like cache behaviour
remove erroneous comment
merge bug21932 into default
refactoring
2009 => 2010
Cope with latest changes to rabbit_channel API
Delay the issuing of channel.open_ok if under memory pressure. Also revert changes to tcp_acceptor. Also add test
Merging in from default
Merge default into amqp_0_9_1
bug22555 merged into default (synchronous is now True not 'true')
cosmetic
inlining
s/fun(/fun (/g
Cosmetics.
Cherry-pick the queue-exclusivity-on-basic.get thing from amqp_0_9_1.
Cherry-pick the queue-exclusivity-on-(un)binding thing from amqp_0_9_1.
Merge default into amqp_0_9_1.
merge default into bug21673
remove misleading comments
introduce helper fun to fold over segment entries and use that in 'read' and 'queue_index_walker_reader'. That makes the code in the latter less of a jumping-through-hoops exercise.
cosmetic
some minor refactoring
Merge bug22596 into default
Merging bug 21824 onto default
Merging bug 21824 onto default
Fix up direct connections to use the queue collector process to stay compatible with the server.
Merging bug 22812 into default
Minor refactor
We were only applying the local shortcut in the case when we were *only* talking to a local node. This is wrong because:
Cosmetics and formatting
Merging default into bug 21824
Don't ignore return codes
Merging bug21915 onto default. Note that this has some semantic changes which are 'safe' for 0-8 and more in line with 0-9-1. This is: an exclusive queue can only be redeclared in the same connection as created the queue and the redeclaration must also specify exclusivity.
Cosmetics
cosmetic
close segment handles straight after use This keeps the number of open fds low (just two - one for the journal and segment) whereas previously it could be as high as the total number of segments during a) the qi walk in msg_store recovery, b) qi dirty recovery, qi journal flushing. There are two nice side effects of this change: - #segment records no longer need to contain a file handle - load_segment can use a read-only handle
change the silent-close delay unit to seconds for consistency with all the other time interval values Also rename the constant to something a little less specific
cosmetic
improve error handling code
Sorted out exception handling correctly, and added many more tests
Don't eat errors that could be returned by F.
Clean up a bit.
Move F into with_or_die.
Make error messages in the logs a bit clearer.
Correct specs.
Merge default into 21915.
Move our protocol_error outside the with_or_die to stop it being eaten.
Reinstate check_configure_permitted in queue.declare passive when queue already exists.
Revert bug introduced in "cosmetics" commit 41b7270f9546.
80 col fix.
cosmetic
improve flow control logic - hopefully easier to understand - handle unexpected channel.flow-ok with an explicit error
Whoops
cosmetics
0-8 equivalence rule.
Replace exclusive_access_or_locked with something cleaner.
Merging bug 21238 into default
Minor refactorings
Cosmetic
Merging bug 22774 onto default
merge bug22752 into default
Merging default onto bug 21673
Merging bug 22752(bug21673) onto bug 21673
refactor: more sensible and consistent arg & field order
Writing some tests revealed a number of mistakes
1) stop accepting new connections
Report connect setup errors as likely authentication failure
Handle quoted node names by parsing with erl_scan:string
3) wait for some reasonable time to receive a flow-ok; 4) if we don't get a flow-ok then close the channel with an appropriate error
active is much easier to think about than blocked. Deal with the possibility of receiving various conserve_memory messages whilst waiting for a flow_ok to come back from a client
merge heads
merge heads
5) if we get a flow-ok but then still get a publish, throw away the publish and close the channel with an appropriate error
Merging bug 21763 into default
Merging bug 21763 into default
More documentation.
Documentation.
Check for duplicate properties.
Merging default into bug 21673
Merge default into bug21763
better factoring of queue_index termination - make the whole thing less parametric - get rid of idempotence - we don't need it
Rip out now-unnecessary logic for setting the persistent store to the transient store: that solution allowed the persistent flag to be honoured in non-durable queues by sending the message to the transient store; we've now decided that we don't want to send non-persistent msgs to any store and are handling that by (effectively) unsetting the is_persistent flag for all msgs arriving in a non-durable queue
Stop persistent msgs in non-durable queues from reaching disk
Don't hardcode the name of the mac build host
Stop persistent msgs in non-durable queues from reaching disk
Merging bug 22340 into default
rename queue_index:terminate_and_erase to delete_and_terminate to match the corresponding function in variable_queue
Don't allow the error_logger mailbox to grow unbounded when flooded with connection attempts.
No reason for this to be a dict of lists.
Forgot to add this.
Move the former bug21824 into a new branch that comes off bug21915 (and thus default) rather than amqp_0_9_1.
Cherry-pick a8d7d2ed4471 and e7ccda77c177 from bug22695.
Cherry-pick 8f43450de344
Cherry-pick 268c69708cb655beae46b8f025602c1ecd205488.
Cherry pick 9dd01b19c85e2648a8ef3b18b3848f1b07281c5a.
Cherry-pick 9f4bf96b07a3f6e066792d92a1c3252a1d98842c.
more efficient 'bounds' function This no longer touches the file system. It's still O(n * log n) in the number of segments though.
Merging default into bug 21673
Merging bug 21239 into default
Merging bug 22759 onto default
Merging bug 22761 onto default
cosmetic
cosmetic
Delay before silently closing the socket, removes an obvious DOS vector.
do the minimum amount of work necessary on clean queue recovery Only read from the journal. No segment reading. No writing.
Added test which hits all cases in journal_minus_segment which do not require duplicates between segment and journal
Merging heads
Full code coverage of segment_plus_journal
refactor
cosmetic
Drop PubCount and AckCount in favour of UnackedCount
some inlining and removal of some comments that weren't particularly useful
avoid unnecessary match
keep complete pub/del/ack entries in journal on recovery IF there is no entry for that message in the segment
seed journal_minus_segment with the original journal ...and modify/remove things in/from it; rather than building a new journal from scratch. The result is the same, but this way of doing things a) better reflects what this function is about, and b) should be more efficient in the common case where the journal does not contain stale entries
journal_plus_segment -> segment_plus_journal This better reflects what we are actually doing, i.e. we take the segment and add the journal.
KeepAck -> KeepAcked
minor refactor
Added documentation regarding the clean shutdown and startup optimisations
Added specs for msg_store_gc
No need to build up a list of transient queue indices to delete
Removing erroneous conjunctive clause in test
merge heads
correct comment
Refactored bpqueue tests
take the journal into consideration in recover_segment which removes the need for an initial flush
Merging default into bug 21673
vq:delete1 does not need to return nor pass around any count
Because of the change to qi:read, we now don't need δ to start on a segment boundary. This removes the need for current_segment_boundary
Cosmetics and documentation
cosmetic
Apparently it's wrong to do the least amount of work possible.
Reworked reading from the queue to still be limited to a maximum of one segment, but with a more natural start+end interface
Corrections to documentation in queue_index
Drop segment_size and instead have a current_segment as well as a next_segment function
Renaming some very long function name to a much shorter name
rename some qi funs
cosmetic
fix typo
Change how we handle a gc finding concurrent readers on the same file. Previously we were just waiting and trying again. Now we get the readers to signal to the GC when they're done. This itself introduces a race and so has to carefully deal with such notifications arriving after the GC has completed, but it removes a magic number. Also fixed a bug which mean readers were reading from locked files. Whoops.
Improved incorrect or outdated documentation in msg_store
commenting on the non-obvious
Merge bug22763 into default
Merge bug22762 into default
Merge bug22756 into default
refactoring: extract segment recovery also rename maybe_add_to_journal to recover_message, which better describes its purpose.
cosmetic
Correct an accounting bug in queue recovery. By incorrectly counting duplicated acks, we remove too few acks when constructing a segment's combined ackcount, leading to an ackcount that is too high. On (dirty) recovery, this will cause the qi to report it's length as being shorter than in really is, which will then cause the δ record in vq to be too short. Subsequent loading of segments (δ => β/γ in q3) will then crash as more publishes will be found than expected. Note that to trigger this bug, Rabbit must crash/be-killed in the first place, during flushing of the qi journal in a durable queue with persistent messages.
cosmetic: more sensible order of clauses
tweak
fix up comments
minor tweak for consistency
cosmetic
convenient macro
refactor: more concise journal_plus_segment
refactor: more concise journal_minus_segment
fix typo
cosmetic: more consistent and easier to read match syntax
cosmetic: group functions by purpose
refactor: more sensible ordering of result tuple
tighten guid size check on 'append' the guid must be *exactly* the right size; the rest of the code will break if it isn't.
remove unused constant
minor refactoring and some cosmetic changes
It's _rabbit_erllibdir, not _maindir
Clean out plugin activation state on uninstall and upgrade
Warn, rather than die, on not-found module in boot step construction
cosmetic
move startup_fun_state type def since it is only used by the msg_store
minor refactoring and cosmetic changes
merging in from default
handling the case of empty payload in rabbit_binary_generator:build_content_frames/7
cosmetic
Merge bug22754 into default (nothing to do with floating point)
Rely on badmatch - no need to throw
cosmetic
Ignore obj_out_of_date for crypto, too
Don't include the (de)activation scripts in the windows package.
Attempt at an equivalent patch for the Windows scripts. Untested!
Move plugin activation into the startup script for unixes. Update packaging and some docs.
log msg_store recovery failures as warnings
merge default into bug22756
Remove traces of plugins on "remove" and "upgrade" as well as "purge"
whoops
use exact comparison this is just for consistency; functionally it doesn't make any difference
cosmetic
Do not install the INSTALL file in debian packages
Cosmetic, and move to 100% code coverage of bpqueue
One more test, and simplification of the bpqueue:to_list function
Added a couple more bpqueue tests
Improved documentation and added additional tests for bpqueue
Merge default into bug 21673
Merging default into bug 21673
Reverse the order so that we stop and then unlink+capture_exit. We don't think this should make any difference, but it's a little neater
Merging bug 22732 into default
tweak msg_store_index initialisation API
cosmetic
Merge duplicate commits
Register memory alarm after channel open
Register memory alarm after channel open
Merging bug 22695 into amq_0_9_1
Correct formatting
OCF resource agent: log debug messages on status
OCF resource agent: remove bogus parameters for monitor op
merged Florian's 07 patch: OCF resource agent: add status operation
OCF resource agent: fix incorrect parameter type
merge Florian's 05 patch
merged Florian's 04 patch
merged Florian's 03 patch
we should still run rabbit_validate_full when rabbit is started
OCF resource agent: use ocf_is_probe
OCF resource agent: use $OCF_FUNCTIONS_DIR
Don't recover exclusive queues if the owner pid has gone away.
correct harmless off-by-one mistake a gc can only take place if we have at least three files - the current file (which we cannot gc), the source file and the destination file. We do a quick check wether there is enough data - garbage or otherwise - to require more than two files. This can give false positives since the last message in a file can overrun the limit, but that's ok as the code that follows performs more accurate (but also more expensive) checks.
nitpick
change the way we pick gc candidates instead of picking them with a random geometric distribution, which requires a magic constant and involved some rather obscure code, we simply pick the eldest suitable file pair.
Merge default into amqp_0_9_1.
Merge a182153c2578 into amqp_0_9_1
Merge up to a8da11d231ff from default to amqp_0_9_1. This causes testConnectionQueueSameNode to fail due to a race in recovering exclusive queues (bug 22695). We'll need a fix from default, so leaving as is for the time being.
trigger possible msg_store gc in all the right places - on removal of a message (since there is now more garbage) - at the end of init (since the recovery may have created garbage) - after rolling to a new file (since the old current file may be   eligible for compaction with it's left neighbour) - at the end of gc (since we may not have reclaimed enough garbage to   drop below the gc threshold)
more obvious check for current file and some cosmetic tweaks
merge bug22697 into default
get rid of now redundant 'sync' call handler and some cosmetic changes
minor refactor
More sensible registration and cancellation to various services
Move the internal declare step into the queue process side of things
oops
refactoring and tweaking of gatherer code and usage - better function names - get rid of the notion of named forks; just counting them is sufficient - don't terminate automatically, which results in a more symmetric API   and allows gatherer reuse - in the gatherer usage, spawn workers with a thunk rather than MFA,   which is less cryptic - use of folds and list comprehensions in queue_index_walker, in   preference over recursion
bug21808 merged into default (updated readme)
Mentioned default port number
merge default into bug21673
whoops
cosmetic
cosmetic
Merging bug 19844 onto default
Cosmetics
RecoveredFileSummary => IndexRecovered. Also added an apparently crucial comment
Separation of Recovered and Recovered1
more precise comments
Correct insertions into dedup cache
%%
%%%%
Whoops
Whoops
Various fixes and improvements to client reading
Retain all exception information if thrown. Use that to rethrow in the single pid case, and mimic gen_server:multi_call in the multiple pid case.
cosmetic
refactor concurrent ets manipulation logic
made shutdown term structure opaque to qi only the vq needs to know about it
disentangle qi from msg_store
cosmetic
cosmetic
oops
cosmetic
cosmetic
Merging bug 22671 onto default
merge default into bug21673
Merging bug 22616 into default
pluggable queue backends - behaviour and specs for pluggable queue backends - reworking of the queue code to support pluggability, including   hookups to memory monitoring and file handle management - interface to existing persister via the new API
Improvement to docs on BQ:sync
cosmetic
cancel queue's timers on shutdown This is cleaner, though not strictly necessary.
cosmetic
restructure backing queue sync'ing The code very much relied on the fact that sync_callback would always return the same fun when a sync was required. So it makes sense to capture that in the API by splitting sync_callback into a 'needs_sync' predicate and a separate callback handler.
correct backing_queue:tx_{commit,rollback} descriptions
refactoring of sync timer setting
cosmetic
cosmetic
FPid => Fun
Cosmetics and minor refactorings
merge bug22616 into bug21673
hook queue processes up to file handle cache This doesn't do anything here, since in their current form the queue processes do not use the fhc, but that will change in the future.
move queue's fhc registration from startup into init handler so we don't do any unnecessary work in case the queue process gets terminated before initialisation is completed
cosmetic
Merging bug22616 into bug21673
Merging default into bug22616
Pulling good patches off bad head of default
merge bug22616 into bug21673
cherry-pick file_handle_cache from bug21673 and its integration with the tcp_acceptor and worker_pool code
Make the msg_store_gc register an fhc callback
merge bug22616 into bug21673
merge default into bug22616
Add missing specs
Make the logic on result of soft_close match that on hard_close (i.e. full put if there's an error. Don't touch the gb_tree if there's no error. Also, revert back to two diffs for client callbacks and mrefs
bug22637 merged into default (erlang version check on start of the application)
gb_trees:delete crashes if the key is not in the tree. I kid you not.
Revert incorrect R12 cleanup
reduce_timer_set => timer_ref
Don't allow lots of timers to be started
Merging heads
Change register_callback to a cast, don't send messages in absence of a callback, and combine two dicts
cosmetic
Take advantage of R12's re in rabbit_misc:string_to_pid
Remove OTP-7025 workarounds - it's fixed in R12.
An R12 cleanup in rabbit_persister:handle_info
An R12 cleanup in gen_server2:name
 R12 cleanups from new persister branch
fix error handling in fhc:clear and remove some wrong (though benign) code
Merge bug22662
cosmetic
refactor: made 'close' control flow more obvious
cosmetic changes and a little bit of refactoring on the file handle cache
refactor: extract age tree manipulation These functions only have one call site each, but they are non-trivial and perform a distinct function and hence were cluttering the call sites.
made logic in fhc:close1 less obscure the previous code was working ok, but only because handles were soft-closed at most once
result, not return...
cosmetic
Rename invoke_async as it's not really async.
bug22264 merged into default (print erts version on startup)
cosmetic
Allow people to specify append, but silently map it to write
More meaningful specs for the backing queue, and removal of duplicated and potentially divergent documentation with the specs
Commit 0ab19fce3677 broke effect visibility again! This time, go through a predictable process on the local side.
Minor corrections to specs
clean up fhc sigs
cosmetic
cosmetics
Added note explaining that Rabbit won't start if there are no shovel configs
Apparently, we're not allowed to clutter the bunny. Hence added it to the settings listing below
Display the erts version in the bottom right of the Rabbit banner
Modify version_compare so that eg 5.0 is eq 5. On application start, check that we have a sufficient version of erts
Merged 22656
Force the RPMS to only be installable with erlang 12b3 or later (though interestingly, it looks like there was no Fedora R12B-3 package - the closest I can find is R12B-4 which was in Fedora 8)
Force the debs to only be installable with erlang 12b3 or later
bug 22315 merged into default (+P 1M, process count set to 1M by default)
Bump the default number of processes to 1M
tiny refactor to align with 'default'
merge bug22616 into bug21673
merge default into bug22616
Merge default into amqp_0_9_1 (for the sake of bug22619)
cosmetics
cosmetics
bug22629 merged into default
After successfully getting Rabbit to run under 12B3, removed all isms later than 12B3
Removal of 12B5-ism. All tests now pass
Don't use server(Hash) to name the delegate process.
Removed the 13b01-ism
Explain asyncness.
Always catch, don't ever allow the server process to die.
Parallelise communication with multiple nodes.
Merging default into bug 21673
Merging bug22657 onto default
Move the gen_server2-via-delegate code into amqqueue; it should only be used there anyway.
Rename delegate:call and :cast to :invoke and :invoke_async.
Cache the actual delegate process name, not the result of process_count.
Remove gen_server2 use, bump up timeouts, tidy GoodRes / BadRes checking.
remove tx-related queue info items since their presence exposes an implementation detail
merge bug22616 into bug21673
merge default into bug22616
cosmetic: remove trailing whitespace from doc templates
cosmetics
Merging default into bug 19844
refactor: move type spec since it's only used in one place
merge bug22616 into bug21673
merge default into bug22616
merge default into bug21673
Sanitise boot steps somewhat - a couple of steps had no 'enables' clause, meaning potentially they could be run last, which would not be desirable (eg exchange recovery after networking up?
Merging bug 22651 into default
Turns out on commit, the msgs really really should go at the end of the queue, not the head of the queue
minor refactoring
simplification
some inlining
Merge heads
Merge 22619.
explode on attempted double initialisation of queue which inidicates a serious bug and thus we shouldn't ignore it
explode on attempted double initialisation of queue which inidicates a serious bug and thus we shouldn't ignore it
more selective backing queue initialisation Tell BQ:init whether queue contents should be recovered. In the case of invariable_queue this allows us to suppress any interaction with the persister on queue declaration, which is beneficial since the persister can be a bottleneck.
oops
turn queue recovery upside down instead of the persister pushing recovered messages to the queues, the queues pull recovered messages from the persister.
merge bug22616 into bug21673
fix typo
merge default into bug22616
cosmetic - less obscure function calls Unfortunately fun M:F/N only works if M and F are atoms.
cosmetic
guard against operating on uninitialised backing_queue_state
Fixing up coverage - it would appear the coverage is *very* sensitive about how it gets started
remove redundant call to memory_monitor:deregister
consistency, consistency
simplify queue startup by going through the same three-step sequence (start process, init_backing_queue, sync) in both recovery and creation
Merge default into amqp_0_9_1.  There was a conflict in rabbit_amqqueue.erl, due in the main to recover/0 being removed and refactoring of durable queue recovery in general.
ensure queues are fully initialsed before we advertise their presence Previously in a clustered setup a channel on another node could have found a recently recovered queue before that queue had been fully initialised and recovered its content.
Merging default into bug19844
Merging default into bug 21673
Merging bug 22584 into default
Merging bug22610 onto default
Well we're using channel:call everywhere else
simplify queue recovery in old persister instead of constructing a temporary data structure for all recovered messages we simply extract the messages from the snapshot on demand.
Because of the exposure of AckRequired into the interface, the counting of persistent messages has potentially been wrong for a while (previously only decr on ack, but actually need to maybe decr on fetch too). This can have the effect on startup of telling the queue it has more messages in it than it really has, which can cause an infinite loop
Send the ack with amqp_channel:call
unused var
A cosmetic in vq, and a fix in tests for a bug which was causing the persister tests not to run
merging default into bug 21673
merging bug 22647 into default
merging bug 22646 into default
change guids to fixed-size binaries This change was cherry-picked from the bug21673 branch and brings 'default' closer to that branch.
remove legacy serial seeding thus making the guid generator fully independent of the persister
Merging heads of default
Merge bug22407 into default
Merging default into bug 21673
Merging bug 21974 onto default
re-fragment content so we only produce the minimum number of frames necessary
Merging default into bug 21673
Merging heads
Backed out changeset 1db0ab47b6d5 as the change will create silent failure for configurable plugin users who have not moved from the default config location.
Add / fix specs, and remove some unreachable code.
If the other node is down and we're only going to delegate:cast anyway we don't want to log an error, so handle badrpc by ignoring it.
Use 2x CPUs as the number of delegate processes.
Merging bug 22615 onto default
Cosmetic, and missing specs
cosmetic
Use phash2/2, remove string:concat.
Remove delegate_sup_sup, make delegates restartable on error.
Roll secondary node coverage into "make start-cover"
Cosmetics
Merging default into bug 19844 (debitrotting)
bug22500 merged into default (OCF/Pacemaker)
Added the old persister (slightly mutilated) and an invariable queue as a backing queue which uses it. Passes all the tests.
Revert the tx part.
Merge default into bug 21673
Correction of specs which have been wrong for ages
Adding a forgotten type spec
Merging default into bug 21673
merge bug22628 into default
Flatten out a tuple
Correct list comprehension
cosmetic
Make start-secondary-cover actually do something, stop Erlang tests blowing up.
Allow enabling cover for secondary node.
Use a sequence ID when combining entries into the snapshot. This can then be used to correctly sort the messages and remove the dependence on increasing guids
Switched the From to a Fun and hence CPS
Remove accidentally committed test code.
Ack both requests and repsonses, and have the server treat each request / response as a transaction.
merge heads
Have a default config file for testing with make run
Lots of fixes for handling of acktags, which was badly broken in some places
Whoops
Sort out handling of acktags in the queue_process. Use a set throughout - this avoids the unpleasant lists:usort on every ack (which is what ordsets:from_list does). Also, don't bother with the intersection - just assume that we're only given acks we really know about, which the channel should be able to guarantee. This results in a performance improvement from MulticastMain -s 0 -r 12750 to MulticastMain -s 0 -r 13900 : i.e. 9%
orddict is much faster given we only have a tiny dict.
Merging default into bug 21673
Added priority queue to the common modules, as is needed by gen_server2
Added priority queue to the common modules, as is needed by gen_server2
Beef up assertions on combine deltas, but it doesn't appear there was a bug here anyway
Switch four megs to a fraction of the file size limit
Correct mistake in indexing into pairs of GC candidates
Make use of fhc:delete now that we have it
Another missing infinity on a call
A cosmetic and a missing infinity timeout on a call
Rewrote scanning of message files, to read in blocks of up to 4MB (hence bounded) but can still cope with variable sized files. The advantage here is vastly reduced number of OS calls to position and read. The results is that in tests, GC time is reduced from around 35 seconds to about 2. Code is also 7 lines shorter - and arguably simpler - the only tricky bit is reusing left over data from one block with the next read block, hence different read and scan offsets
Increase the backlog on the listening socket backlog to 128.
merge bug22616 into bug21673
merge default into bug22616
On commit we must know about the channel
tweak tx API on amqqueue commit_all and rollback_all take the channel pid as an additional arg. This brings these functions in line with deliver and ack, which also take both a txn and ch_pid.
set channel txn to none on rollback
cosmetics
Merging heads
cosmetic
merge bug22616 into bug21673
add memory_monitor
Merging heads
Capture more information for the next time the freaky GC error pops up
Don't pass around lists of lists for no reason.
Reimplement the local optimistion, refactor quite a bit, fix delegate to actually do fanout properly (oops).
merge bug22616 into bug21673
oops
merge bug22616 into bug21673
qa supervisor2 and its use in amqqueue/amqqueue_sup Queue processes are now terminated nicely (and the supervisor waits for the termination), but this won't make any difference until queue processes trap exits and do something interesting on shutdown.
merge default into bug21673
minor refactoring
Whoops, wrong record
Changes to the way we track messages that are pending acks to ensure that on queue deletion we remove everything from the message stores that shouldn't be there
Cope with queue death even though there are in-flight commits going on
Updated documentation
Merging heads
Thorough reworking of API - the BQ is now responsible for hanging onto unacked msgs and all details of transactions
cosmetic
Go back to using closures now that we can, refactor a bit.
Merge 22615 again.
Make start-secondary-cover actually do something, stop Erlang tests blowing up.
Final small portfile tweaks to exactly match what's in Macports.
Merge from default
Merge 22615 in order to carry on.
Allow enabling cover for secondary node.
cosmetic and minor refactoring
Java tests need the cluster to be left up if there's more than one node, see bug 22613.
Don't run delegate tests if there's no second node, remove use of closures since the coverage analyser breaks them.
tx_commit takes a list of publishes, not a list of guids
Whoops - redeliver was only used by the old persister and was removed from _process months ago
queue_index doesn't need to reimplement recursive delete
rename backing_queue_type to backing_queue
fix typo in docs
fix sigs on persister that have been wrong for ages
Only export vars when they're needed, and don't do a full verify unless it's needed - the problem has been that the verify dies because eg the config file doesn't exist, but it doesn't exist because of, say, drbd not being primary+mounted...
Whoops
merge default into bug21673
introduce rabbit_misc:recursive_delete/1 helper
Removed rabbit_variable_queue.hrl
refactor: introduce file_path() type
Reworked msg_store startup sequencing so that qi need not know about the msg_store
Clean up exported function names.
Refine the type of recursive delete
Be more consistent about errors
Remove upmap that was causing tests to fail, remove "optimisation" as it's not doing the optimisation we wanted.
Fixed recursive delete - it now takes a list of paths, and it deletes directories it comes across
cosmetic
refactor: inline rabbit_misc:random_geometric it's a tiny fun and is only used in one place
cosmetic - reduce diff w default
merge heads
merge default into bug21673
s/(rabbit_variable_queue:)update_/\1/g. Also, fix in amqqueue_process where the result tuple was the wrong way around
Combine ram_duration and update_ram_duration
combine queue sup startup and recovery There was actually no compelling reason to start up the sup earlier - nothing needs it, not even the node_monitor that supposedly depended on it.
MsgId => Guid. All tests still pass. The distinction between msg_ids and guids is now complete
Fix the refactoring which broke bpqueue
msg_id => guid in type specs, field names and function names. Vars still todo
Port various queue operations over to the new delegate system. Unfortunately this doesn't fix the underlying bug!
Apparently, abuse of empty queues is unsightly. Also, minor improvement to documentation
rename rabbit_misc:geometric/1 to random_geometric/1
refactor
add rabbit_sup:start_child/3 This fleshes out the API. The change was cherry-picked from the bug21673 branch.
Cosmetics for unification with default
Merging default into bug 21673
merge bug22603 into default
Cosmetics
Fixes
Corrections to rabbit_basic:message/4 and refactoring of is_message_persistent such that message/4 doesn't permit disagreement between is_persistent and the properties
Merging default into bug 22603
Merging default into bug 21673
merge bug22603 into default
cosmetics
Merging default into bug 21673
renaming type sigs
Merging default into bug 22603
persistent_key => guid + is_persistent
merge default into bug21673
cosmetic
merge default into bug21673
refactor: put hibernation constants in one place This was cherry-picked from the bug21673 branch
merge default into bug21673
add worker_pook:submit_async/1 This was on the todo list and got cherry-picked from the bug21673 branch.
Corrections to specs, docs and exports
Merging in from default
Cosmetic
Merging heads
Converted the maybe_run_queue_via_backing_queue to take a thunk, and also vq:needs_sync => vq:sync_callback
merge default into bug21673
tweak: better signature for 'ceil' This was cherry-picked from the bug21673 branch
Merging heads
Startup only requires durable queue names, not the whole amqqueue record
merge heads
merge default into bug21673
Hide the startup of the msg_stores behind the pluggable API
refactor: add rabbit_misc:unlink_and_capture_exit/1 This was cherry-picked from the bug21673 branch
merge heads
Added type specs to version_compare
All sorts of tidying, cosmetics, reorganisation and pruning. A veritable smörgåsbord of improvements.
merge default into bug21673
refactor: introduce rabbit_misc:dict_cons/3 This has been cherry-picked from the bug21673 branch.
Rename delegate_{sync,async} to delegate_{call,cast}.
Just making the order of the specs match the order in the behaviour
Ooops, missed a few
set_queue_ram_duration_target => set_queue_duration_target and ram_duration => queue_duration for censistency
Rearranging GC code and tidying up of some common dialyzer type defs
Pluggable queues land
Rationalise the entire VQ api in preparation for making it pluggable. Just a behaviour, the externalisation of the specs to follow, and a means to specify the internal_queue module to come.
Unify the APIs of the various commit callbacks. Prevents running the queue when we are doing ack-only txns
clusternode is a list
Cleanup and improvements to the txn commit system. We now ensure: a) if the txn consists only of acks, we do sync those acks in the qi (assuming the acks were on disk already); b) txns in non-durable queues never cause fsyncs, even if the messages are persistent (or the acks are for persistent messages); c) transactions which contain no publishes can now overtake txns which do contain publishes; d) txns which do not need to be sync'd in the qi can overtake those that do need to be sync'd in the qi (eg a txn with only acks for non-persistent msgs can overtake a txn with persistent publishes). The overtakings are all safe as commit is a sync operation on a channel, and can only overtake other txns, not other operations in general.
Fix a leak in the fhc - all clients of the fhc now have a monitor created for them to enable us to tidy up after the process dies. The distinction between these monitors and the ones created in release_on_death is that the release_on_death ones are not stored in the client_mrefs dict, thus if a monitor DOWN message appears which we can't find in that dict, it is assumed it is a release_on_death monitor
Merging default into bug 21673
Merging default into bug 22500
Simplification of function called from one place only
Add persister_hibernate_after configuration variable.
Large accountancy bug in queue index leading to great confusion and indeed infinite loop. Fixed.
Merging bug 22582 into default
Removed code duplication
Whoops, API changed...
Fixed a leak - if we have many queue index segments which were written to disk but contained only references to transient messages then on restart, they would never be removed. Unfortunately, this does potentially introduce further work on startup (the queue will try to ensure that it loads the persistent contents of the first segment which contains a persistent message, which can involve scanning through a lot of segments. However, this is actually pretty quick. The only way to fix this would be to keep per segment counters of persistent messages and ensure that's written to disk too, but the extra code cost and complexity may make this just not worth it.
The walker is run within the msg_store process, which traps exits. Thus need to be careful to unlink and ensure we have received any EXIT message generated
Corrected comment
Merge default into amqp_0_9_1
Create persister_max_wrap_entries configuration variable.
Forgot to remove a printf
Given a clean shutdown, near instantaneous startup, regardless of queue length. Note most expensive element in startup is loading in the msg_store index. Also note for some unexplained reason, this currently doesn't work with toke - the toke plugin will need reworking to become available to both msg_stores simultaneously.
The msg_store now avoids building the index and scanning files iff it is shutdown cleanly, and all the clients that it previously knew about were also shutdown cleanly and found on startup.
Altered API of rabbit_msg_store_index so that terminate is mean to save out state too, and init can be asked to attempt to recover previously saved index
Merging default into bug21673
Merging in from default
Missing hibernate timeout
Abstract out the "farming out work to the worker_pool and gathering it back in" pattern (gatherer.erl), and then make use of it when scanning queue indices and msg store files. Note the gatherer's exit signal was being caught in the handle_info of msg_store because trap_exits was on, hence moving that to later on in the msg_store init.
If we submit to the workers jobs which use the fhc, the workers may receive messages from the fhc, thus need to be able to process them. Also, that then requires that the fhc is started before the workers
Mistake in opening files leading to process dictionary being wrongly populated and updated when file opening fails (eg enoent)
Cosmetic simplification of logic
Introduced rabbit_misc:dict_cons/3 which ends up being used in 3 places. Also fixed a bug which I'd sleepily introduced in vq:requeue where a msg_store:release had accidentally become a msg_store:remove (no idea how the tests managed to pass after that enough to convince me to commit - certainly had the tests failing today due to that one). Finally, persistent msgs in a non-durable queue should be sent to the transient msg_store, not the persistent msg_store. Thus they will survive a crash of the queue, but not a restart of the server.
The 2 part init of the queue must be complete before the queue is committed into mnesia. Furthermore, it must be a call, not a cast otherwise it could be overtaken (though it returns first, and inits second). Note that this means on a collision, the queue may get > 1 init calls, hence need for idempotency, and the 2nd call may be delayed while the first init completes. Also note that the queue index init alters disk content. Thus initing the same queue with disk content concurrently will lead to unexpected results. However, this can't occur because durable queue recovery is the only time we are initing queues with disk content, and there will be no collisions at that point, so safe. In normal queue declaration collisions, there will be no disk content anyway.
Next step on making startup faster is to allow the scanning of the queue indicies to occur in parallel (per queue). Also, queue creation can take some substantial time due to queue_index:init. Therefore, stagger the startup of a queue so that this potentially expensive step (a) doesn't get done at all if the queue already exists etc (b) doesn't block amqqueue_process:init from returning. Thus on startup now not only do we do the seeding of the msg_store in parallel (per queue), but the durable queues that come up can also do the bulk of their work in parallel, thus speeding recovery substantially.
Support async job submission
No, Mike didn't forget to merge, I forgot to pull. Sigh
Merged default into bug 21673
Merging bug 22563 into default (MikeB QA+'d it and forgot to merge to default)
Split msg_store into two msg stores, one for persistent and one for transient. This is the first step in trying to make startup and recovery of data on disk much faster.
Use atomic rename
Split up a long command into several shorter ones without continuation lines. This doesn't change the meaning of the stanza with respect to temporary files.
Avoid deeply quoted quoting
Merge bug22563 into default
Fractionally better - the actions of the recursive call are now displayed, though sadly only once they're completed
"true" => true. This requires no changes elsewhere because the python json library which we're using in codegen seems to be able to cope with "true" and "false " as boolean values.
"true" => true. This requires no changes elsewhere because the python json library which we're using in codegen seems to be able to cope with "true" and "false" as boolean values.
1. If our entire goalset is to make the deps file, don't include it; 2. We don't want the error msg when including the deps file when it doesn't exist, but at the same time we do want all errors if they occur when generating the deps. Hence -include is not permitted. Thus if we need the deps file then make it explicitly before including it.
Merging in from default
Updating generate_deps to the latest
Merging heads of default
A couple more cosmetic fixes to the usage messages.
Merging bug 22559 onto default
Don't reinterpret the usage message.
Reinstate whitespace and [] in usage message broken in 600668c4da36.
Merging bug 22554 onto default
Merging default into amqp_0_9_1
Merging default into amqp_0_9_1
Merge bug22560 (worker pool to avoid stacking mnesia txns) into default
Remove pipeline use in the _usage.erl target.
Merged bug22550 to default.
Only build beam files for the usage messages we're going to use.
Merging default into bug 22550
Make the generated usage functions just return a string, not print and halt.
Handle multiline examples in man pages separately.
cosmetic
Created worker pool system, and pushed the rabbit_misc:execute_mnesia_txn through it.
Merge bug22457 into default
Additions to specs to prevent dialyzer errors
Add build dependencies to Debian / Fedora / Macports
Correct logic so that a 'make' with no explicit goals still behaves correctly
They're not pods anymore. It worked before this by accident! (Stupid shell expansion)
fold(1) is POSIX and works consistently on macs as well as linux, unlike fmt
The previous logic was saying 'if we can't find 'clean' in there, load the deps file'. This is wrong - eg make cleandb run. The new logic says 'if removing all targets which have 'clean' in them doesn't result in the empty string, load the deps file'. This means make cleandb run does load the deps file, whilst make clean cleandb doesn't.
Allow clean and clean-like targets to not bother with the dependency generation
All module names must start 'rabbit_'.
Corrected build system: a) Do not bother with the intermediate docs/.erl b) Define USAGES_XML and USAGES_ERL correctly and incorporate with SOURCES c) Declare the dependencies between the usage erls and usage xmls dynamically (define, call and eval are our friends here) d) Correct use of automatic variables and take advantage of (a) e) Given use of SOURCE_DIR, EBIN_DIR and such like, define and use DOC_DIR f) Correct order in generate_deps to ensure the .erl is the *first* dep of the .beam. This means we can drop the .erl in the .erl => .beam automatic rule and rely on the deps file populating $< with the .erl g) Tidy .hgignore
Merge bug22407 into default
Merging bug 22088 into default
calling or casting 'basic.consume' now fails safely
Missed a ticket default 1 => 0 fix
Add synchronous flag, and unify default values with default branch / 0.8 spec
Merging default into amqp_0_9_1
Remove insist as redirection has gone in 0_9_1
Non-trivial merge of default into amqp_0_9_1.  Queue exclusivity (bug 20578) and exchange hooks intersect in a few places.  The main things to take care over are that the post-queue-deletion hooks gets called, and the exclusivity check is called. NB: exchange auto-delete machinery needs to be removed, which will simplify things in a few places.
Reimplement rabbit_router in terms of delegate.
Return statuses (and pids where appropriate).
Generic delegate mechanism, similar to what the router did before.
Merge bug22400 into default
Make rabbitmq-service page look a tiny bit less like a manpage.
Build the windows service page for the website too.
Fix some mistakes that were in the Windows Service documentation.
Convert Windows Service instructions to DocBook verbatim.
Escape dots.
Merging bug 22379 into default
typeo
Cosmetics, and remove bashish -a to generic -e (semantic preserving)
Make sure the ocf script goes in /usr/lib/ not /usr/lib64/
Merge bug21949 into default
Push down extraction of version from app descriptor
Install into /usr/lib, even on 64-bit platforms
Remove DOCTYPE with --novalid and namespaces with XSLT.
Minor fixes
Nope, no idea why it still jams on unload
Well it nearly works...
Getting there. Still doesn't really work in anger though...
Slightly more convincing for the rpms
Try to install the ocf script in the right place
OCF script
Missed a 16#ffffffff
Merging heads
Unnecessary variable
remove unneeded exports and some minor refactoring
Merge default into bug 21673
merge bug22456 into default
Missed one
Apparently 'No, you can't include rabbit.hrl in tcp_listener_sup'.
Merging default into bug 22456
merge bug22454 into default
Merging bug 22454 into bug 22456
Reworked the supervision heirarchy again
Extended all timeouts
Merge bug22399 into default
Merge default in
cosmetic
Push memory monitor and fhc into the restartable sup
Merging default into bug 21673
merge bug22454 into default
Add RUNTIME_DEPS
Add echo-revision target
Merging default into bug21673
STOMP doesn't depend on ejabberd
Should stop and delete under the restartable sup too
Supervisors should have timeouts of infinity
Merging bug 21939 into default
Merging bug 21939 into default
reworked supervisor hierarchy
update instructions post-merge
merge bug16653 into default
cosmetic
user app can now use amqp_channel:cast with synchronous methods - this will log a warning saying that cast has been used with a synchronous method and that the user app will not get the reply from the broker
Ensure the exchange is passed through too
Change to cur file cache. Rather than bother storing the file in there, just give a ref count which in inc'd when the client puts it in, and dec'd when the process actually writes it. On roll, delete everything with a ref count of 0.
minor refactoring
The behaviour changed name (was bug22169).
Merging bug 22169 into default
adding amqp_connection:info_keys/{0,1}
Reflect the channel.flow status in the status monitoring
refactoring still needs some further testing
Minor bug fix, but I don't think this is what's plaguing majek atm
Add IDs for individual commands.
Whilst erlang's namespace provision is poor, it's not quite /that/ poor...
Minor relaxation of boot dependencies
Correct boot sequence and rearrange msg_store / queue startup and recovery into amqqueue rather than queue_index
Make web versions of all the man pages.
Merging default into bug 21673
Of course, it actually turns out that we care more about channel flow events coming back from the destination, rather than the source...
Merging default into bug 16653
merging bug 22169 into default
s/( * %)([^%])/$1%$2/g
Merging bug 22397 into default
Merging default into bug 21673
Merging bug 16653 into default (now permits client side channel.flow to be used with shovel)
merge bug22423 into default
Merging heads
Better handle the limiter exiting
cosmetic
cosmetic
Support the destination raising channel.flow - we mirror the call to the source and buffer everything in the mean time. Care must be taken when draining the buffer to a) account for the possibility of becoming blocked before we've drained the buffer, and b) not to remove the flow from the source until the buffer is empty. Note that we can end up issuing multiple channel.flow(false) to the source, but that's not considered an issue
Apparently, consistency is a good thing
Made the very generic invoke call into a slightly more specific flush call
Deal with the possibility of there being no queues to go through
Implemented the rest
fixing behaviour on invalid info atom
Fixes to limiter - logic mistake in maybe_notify and some refactoring and cosmetics
Incomplete implementation
Problem: if the limiter is blocked due to a client flow, and the client then issues a qos = 0, we can't have the limiter exiting. Thus limit needs to become a call, plus associated changes. Note that we *have* to know whether or not the limiter is about to stop - if we just wait for the exit signal then there's a race with a new qos setting being sent to an expiring limiter and the limiter thus getting lost. Also, the channel *must* be responsible for telling the queues to forget the limiter, otherwise again there's a race between a new limiter starting up and telling the queues about it, and the old limiter dying and telling the queues they're unlimited. This is why the limit_queues function cannot be moved into the limiter - the channel must drive this.
Move the prefix / suffix to the XSL file, cleaner and works with echo from lenny.
Work around what appears to be a bug in DocBook.
Fix breakage of usage introduced in 600668c4da36.
Move description of default list items to after the list.
Use correct cmdsynopsis form for subcommands, don't manually add [] as docbook will do that for us now.
refactoring: yet more uses of the state monad
simplify config parsing by making more of it monadic and make error messages more consistent in the process
allow sparse proplists as configs and reject non proplists
detect duplicate config params
Make optional args visibly optional on website.
lower priority of conserve_memory below that of 'info' This really is more of a principled change than of practical significance since we are unlikely to end up with channels having mailboxes full of conserve_memory messages. The change brings 'default' closer to the 'bug21673' branch
merge default into bug21673
change priorities in amqqueue We change all '8' to '7' - this has no effect but brings 'default' closer to 'bug21673'
Fix a couple of mistakes noticed by Matthias.
Remove some extraneous whitespace.
Rebuild when XSL changes.
Add some extra paras from the usage message, and make sure they get through. Try harder to control white space in the usage message.
Fix internal links in the generated page.
This mode thing is not needed.
Transform our generated rabbitmqctl HTML page back to our ad-hoc XML format for the website. It looks OK now.
permit reconnect_delays at a granularity smaller than whole seconds The underlying logic in supervisor3 already supports that.
rename some config params
don't use inet:getaddr, try to use inet_parse:address
Remove -85 nastiness, prevent overlong line from wrapping by making it shorter.
Further tweaks to usage messages: only show subcommand option lists, not descriptions, make a couple of corrections, explain <regexp>, rearrange, etc.
Convert all the other man pages to DocBook, fix rabbitmq-multi usage message.
cosmetic
administer the gen_server2 cure to the 'long message queues are expensive' problem, which the worker can easily suffer from since it gets sent #'basic.deliver's asynchronously and performs synchronous calls in handling them.
cosmetic
cosmetic: consistent whitespace in record syntax
test with tx this provides better code coverage
fix off-by-one error in tx logic
minor refactoring for clarity and consistency - don't extract the 'sources' and 'destinations' config items more   than once - perform resource creation in same order as connection establishment, i.e. inbound followed by outbound
clean up config parsing error handling - remove unreachable clauses - catch a few more errors - better error messages - lots of tests of error handling
Rewrite rabbitmqctl man page as DocBook XML taken from the website admin guide. Generate man pages, usage guides and a web page from man pages.
Reimagine delete_binding/2 as remove_bindings/2.  The hooks are now called without reference to the initiating action; e.g., if a queue.unbind causes an exchange deletion, Module:delete/2 is called rather than Module:delete_binding/2.
cosmetic
more consistent error keys
fix ssl option error reporting The error for missing/invalid ssl options was displaying the key as list. Also, error keys are slightly more descriptive now. run_reader_state_monad is gone because - it was no longer performing a generic task - the two places it was used in had diverged sufficiently far due to   the above bug fix and tweak that maintaining the abstraction was   becoming too cumbersome That's not to say there isn't a suitable abstraction here somewhere - we may want to revisit this later.
Missing call to terminate_client in msg_store
Merge heads
Of course, we want to return the type atom rather than the module (but still check it's actually registered)
Superfluous whitespace and inaccurate comment
cosmetic
Switch to using su, not sudo. Given the command line is already quoted, this seems to work.
Minor tweaks to tests
Accomodate weird American spellings
Check exchange types for conformance when they are registered, rather than when they are declared.  We have to be a bit careful, because the attribute can be 'behaviour' or 'behavior'.
Specs for the exported functions in the exchange type registry
All these Exchange should be the same
Remove duplication in delete_binding
Made the test obtain the message both before and after the shovel has had its evil way with it...
Added a test
Distinguish between situations in which we're checking if a client-supplied binary corresponds to an exchange type (the type may be bogus), and just looking up the module for the type in an exchange record (we expect the type, and the module, to exist). There'll be a better way of doing both the lookup and the sanity check in check_type.
Rip out field names and trap the dict:find failure case. Combinator extended. All rather nice.
Don't use the monad stuff unnecessarily
Nicer formulation of cleanup_deleted_queue_bindings, thanks to Matthew.  This one has the same number of function heads, but is much clearer.  Also, correct the previous re-arrangement of the bit just above that calls the hooks; it wasn't calling delete with the bindings, but delete_binding followed by delete, in the case of an auto-deleted exchange.
cosmetic
correct typo in error code
Declare the RPMs as noarch, and drop the 64-bit builds
Merging bug 22188 into default
Remove duplication in queue deletion callback
Cosmetics
merging default into bug 22169
merging default into bug 22169
Use a suffix other than .rpm for file lists, to avoid confusion with rpms.
Condensation of monads
Sort out priorities: Only info should be at 9. Conserve memory and messages relating to memory monitoring or file handles or such book keeping are at 8. Messages that are higher-priority but nevertheless amqp messages (eg acks, commit-related-actions, notify-sent etc) are at 7.
Several fixes: 1. Both the msg_store and the amqqueue_process can have their mailboxes get very long. In this case, it's a problem because close messages from the FHC can't get through (Plain !, and no priority). Therefore, add callbacks registry to FHC and equip both msg_store and amqqueue_process with high priority casts to solve this problem (ftr, msg_store can get swamped with writes, whilst the amqqueue_process can get swamped with delivery notifications and acks). 2. The GC was missing the ability to deal with close msgs from the FHC 3. The FHC, when reopening a file, uses the same mode as the file was originally opened with. If that mode is just write, then when the file is reopened, its contents get trashed. Thus when reopening, add in read to the mode, but don't record this anywhere - the file still acts (API wise) as if it was only opened writable.
Cosmetics and a lists:map to list comp conv
supervisor2 => ?MODULE
Reworked merge_keylists (which is now much nicer, if less efficient ;) ), and also abstracted common args to split_uri
supervisor3 => ?MODULE
Duplicating code
Added explicit post combinator to the run_state_reader_monad and then pulled out the setelement and the [|] from the two places where it was being used. Pulling out the Pos paramenter in one further case was potentially neat, but led to code duplication and ugliness elsewhere.
Switch to using tab2list in status
Don't need to do dynamic lookup as these records are statically known, so record_info(fields, Blah) will suffice
Backed out changeset 4922b15fa148 as it's not needed.
Add support for overriding any field in the basic properties
Add support for extracting field names for class properties
Cosmetics
Permit default values for fields qos, auto_ack, tx_size, delivery_mode, publish_fields, reconnect. Update documentation
Correction of documentation
Add a script to assist in the macports submission process
A couple of Portfile fixes
Merging bug 21998 ⇨ default
Simplification of vhost parsing
When we establish connections, make sure the status reflects to whom we have connected
Correct parsing of SSL parameters, and a further fix to vhost parsing
Merging default ⇨ bug 16653
Promote reads over writes in the msg_store. This is safe. The cur_file cache contains all msgs in the current file and which haven't been processed by the msg_store. Thus if reading can't find it there, and for some reason we can't actually do the disk read directly from the queue process (eg the file is locked due to a GC, or we first thought the msg was in the cur file, but then it subsequently rolled over), then we know the msg has been written to disk. Thus raising the priority of the read call to the msg_store will never allow it to overtake its own write. Certainly leads to a performance improvement in some tests, and generally helps avoid queues stall.
Added tag rabbitmq_v1_7_2 for changeset c7c5876a05bb
Added tag rabbitmq_v1_7_2 for changeset bacb333d7645
release v1.7.2
merge default ⇨ bug 21673
Fix up things that dialyze complains about
Yet another API consistency design win for the Erlang OTP team. ets:update_counter throws badarg if the key doesn't exist. ets:update_element returns false if  the key doesn't exist. The bizarre error that I've been tracking down for a week, and have still not replicated (but was a badmatch false (which means it's likely that it should have been true)) is almost certainly this.
Merge bug22363 into default
Merging bug 22361 ⇨ default
Remove usused variables.  That includes removing ReaderPid from the signature of rabbit_amqqueue:basic_consume/8
Well without this, I can break the test frequently (> 50% of the time, with [rabbit_tests:test_pg_local()|| _ <- lists:seq(1,10000)]. With this, it's still not brilliant - but then it actually can't be fixed properly, without extending pg_local. This fix is "good enough" to stop my machine barfing on it, though it is still racy - "we" could process our monitors and go onto the final pg_local test before pg_local processes the monitors in its mailbox (well, actually before the monitors *arrive* in its mailbox).
De-bitrot by merging default in.  Passes rabbit_tests:all_tests() and the ../rabbitmq-test test suite.  Some unused variables appear to have crept in during previous commits to the branch; will fix in another commit.
Avoid the use of spawn_executable on non-Windows platforms
additional client properties can now be supplied through #amqp_params
the direct connection can now get server_properties from the server and return them through amqp_connection:info/2 on request; renaming amqp_connection:infos/2 to amqp_connection:info/2
exporting rabbit_reader:server_properties/0 so it can be accessible from the erlang client
adding amqp_connection:infos/2, which can be used to get server_properties, which is now stored in the connection's state
merge heads
merge heads
merge heads
adding c_ variants of the tracing functions; refactoring
merge default into bug21673
cosmetic
minor optimisation when handling channel closure in the queue process, don't do any unnecessary work when we end up auto-deleting the queue. Specifically we don't rollback any transaction or attempt to deliver any messages. The formmer happens in the termination code anyway. The latter is a change in behaviour, but one that is permitted by the spec, and arguably deleting the queue as quickly as possible.
minor refactor: move erase_tx call into commit_transaction for symmetry with rollback_transaction
Merging bug22262 ⇨ default
merge default into bug21673
cosmetic: moving things around to shrink the diff with bug21673
merge default into bug21673
unix2dos has gone away on some systems, and was always an alias for todos anyway (well actually fromdos) so todos should work on all systems currently
Merge bug22336 into default
Both of the macports makefile targets are deploy-time, so merge them
minor refactor: s/Delivered/IsDelivered ...in all cased where it refers to the state of a message rather than an event that has just occured A similar rename was done in the bug21673 branch, so this change brings default closer to that
Fix potential leak in cur file cache if the msg is both already known and in a different file - eg same msg gets added to 2 queues, one very long, the other very short. Then memory becomes tight. By the time the short file pushes msg to disk, cur file may well have rolled over
refactoring: rename attempt_immediate_delivery to attempt_delivery that's what it's called on default
refactoring: rename Msg to Message that's what we have on default, and it matches the type (message())
remove some debugging code this is gone on default already
cosmetic
Agressively check caches before risking deferring to the msg_store. This often is very beneficial because in practise, the last messages to be pushed to disk under memory pressure are the messages at the head of the queue, not the tail. Thus in the event of the msg_store being overloaded, due to pushing to disk due to memory pressure, checking all the caches first is very effective at keeping the queues moving. The downside is that when we read from the cur_file cache, we don't get the ref count (at this point, the write is maybe only in the mailbox of the msg_store, so it may not even have an index entry, thus we have no chance of knowing an accurate refcount). The result is that the message may end up existing having been read from the cur file cache, then pushed to disk, forgotten, and read in again, only to be added to the dedup cache. However, this is as bad as it can get - there could at most be two binary copies of a message in memory. This actually holds, even though there's a slightly amazing interaction on ack: on ack, the copy read from the cur_file cache will decrement the dedup cache, possibly evicting the entry. At this point there would be no copies in the dedup cache, maybe one copy in the cur_file cache, and maybe one copy in RAM, which is the copy read from the dedup cache. The copy read from the cur_file cache has been ack'd, so has gone. The next read, if there is no copy in the cur_file cache may add to the dedup cache, which will then be emptied on the ack from the first dedup read. I.e. you can achieve a chain in which no more than 2 copies are held in RAM at any one time, but each read really goes to disk. It is left as an exercise to the reader to come up with a test case that exhibits this behaviour.
adding comments; changing lists:foreach to list comprehensions; other cosmetic
Refactoring of client concurrent read
Merging default into bug21673 and correcting further copyright dates
Merging bug22332 onto default
Fix all sorts of concurrency races in the concurrent readers versus GC
merge default into bug21673
minor cosmetic changes and refactoring in amqqueue_process these bring it more in line with the bug21673 branch
osmetic
cosmetic
Merging default into bug21673
Remove ets:inserts which should have been ets:update_element
Don't set env vars to the empty string
Merging bug 22289 into default
Fix rabbitmq-multi issue with parentheses in path
Stored the ch_pid in the txn
Merge bug22295 into default
Merge default into bug22289
update copyright notices to say 2010 where appropriate
Merge bug22303 into master
Don't hardcode erts path, instead, search
Some cosmetics, but also make service_manager_path be based off erlang_home if it's not set
Merge bug22259 into default
Convert all batch files to use deferred expansion
Remove exclamation mark from an error message.
merge default into bug21673
merge bug22310 into default
merge default into bug22310 in order to resolve merge conflict going the other way
Merging default into bug 21673
Stripped out sndbuf and recbuf
Merging bug 22309 onto default
handle attempt to close connection with a non-connection pid which was previously hanging at best and causing things to explode at worst
Merging bug22300 into default
Correction of spec
Merging bug 22309 onto default
Minor correction to regexp
merging bug 22301 into default
merging bug 21966 onto default
docs
add test for 'rabbitmqctl close_connection' This provides at least *some* coverage. Testing what happens when a connection is in the 'running' state is too hard.
refactor: move pid<->string conversion funs into misc since they are generally useful
merge default into bug22309
make channel 'messages_unacknowledged' item semantics match that of queues namely, don't decrease the count for uncommitted acks Also, add 'acks_uncommitted' info item, for completeness
exercise some more code paths in tests
oops
ditch API for channel-based consumer listing
move consumer listing from channel to queue The main motivation here is that queues, not channels, are the logical home of subscriptions. And rabbit plug-ins and other extensions may bypass channels when subscribing to queues.
test for list_consumers
Merging default into bug21673
Merging default into bug21673
Merging bug22254 into default
Merging bug22254 into default
merging default into bug 22254
Merging default into bug21673
Everything uses su except for macports which uses sudo. On OS X, man sudo suggests that -E is needed to preserve environment. Manually checked and indeed it is. Hence added -E to the one call of sudo in entire codebase
Detect version of os_mon, and if we have version > 2.2.1 then we trust its output
Initialise a channel's limiter with the current number of unacked msgs
merge bug21966 into bug22300
add tests for pg_local these give us nearly complete code coverage
add pg_local:sync helper function for testing turns out that making any kind of assertions when everything is async is pretty much impossible
automate testing of 'rabbitmqctl list_channels' and add rabbit_channel:info_keys/0, in line with other info-providing modules
add info item for channel number
merge default into bug21966
allow programmatic extraction of available info keys ...which avoids copy&paste, instantly improves test coverage, and seems generally useful.
introduce exponential hibernation backoff in channel process so that things like a scheduled 'rabbitmqctl list_channels' don't cause the channel to spend all its time hibernating and waking up
minor refactor
Matthias-approved cosmetics
Cosmetics only - line length, consistent whitespace, and a couple of if -> case conversions
better error reporting Don't mis-report errors on the remote end as "unable to connect" errors. The reason this didn't come up previously is that the function we call for close_connection is the first to fail with an 'EXIT' signal rather than a 'throw'.
add 'rabbitmqctl close_connection'
extend rabbit_reader API with a shutdown fun This is wired into the same logic as the handling of a supervisor-initiated shutdown. When the connection is in the 'running' state we send a 'connection.close' with a CONNECTION_FORCED code and follow our normal connection closure logic. In any other state we just drop out of the mainloop and thus close the socket.
Missing error case in delete_bindings
Merging default into bug 22169
One fix for a missing error possibility. Another fix for the spec of table fold. Dialyzer now happy
Neater and less magic special case default exchange type registration
rabbit_exchange_type.erl => rabbit_exchange_type_registry.erl; rabbit_exchange_behaviour.erl => rabbit_exchange_type.erl; rabbit_exchange_behaviour_spec.hrl => rabbit_exchange_type_spec.hrl. Plus associated changes
extend 'rabbitmqctl list_queues' command with info on exclusivity
add 'rabbitmqctl list_consumers' command
extend channel API with funs to get hold of consumers
drag in code from bug21966 since we need the ability to find all channels
fix typos
Merge bug 22266 into default
cosmetic
correct typos in rabbitmqctl list_connection man page
add 'rabbitmqctl list_channels' command
add prefetch_count channel info item This forces us to make the limiter a gen_server*2* at last, since we want to issue info-like calls at higher priority, as elsewhere.
first set of channel info items the low hanging fruit
s/all/list
introduce channel registry
make pg_local do what it is supposed to
rename pg2 to pg_local, prior to more substantial modifications
check in R13B-3 version of pg2, before modification
Correct parsing of vhost
The recursive use of parse_uri_rest meant that paths that started with // would be lost. I.e. can now correctly parse amqp://// as empty-authority + // path
Proof read the documentation
Added missing instruction
Added documentation
Merging default into branch bug16653
Protect %*
Convert rabbitmq-server.bat to use delayed expansion
adding tests for shortstr overflow
improving shortstr overflow checking
Added shovel status monitoring
bug22266: fixed language in a comment, due to suggestion from Sophie
Merge from default to get an abundance of fixes; including (this is the only non-conflict resolution) pre->enables and post->requires.
Use real dependency analysis for build
Decided against preventing deps include on clean, given there are other targets that don't need deps either, and keeping track of them is going to be unpleasant at best
If the only target is clean, don't include the deps file. Also the deps file gets built automatically if we need to include it, so all doesn't need to depend on it, and using  is neater
Merging default into bug 16653
Merging default into bug21673
remove outdated comment
merge default into bug21673
Support resource declarations of just the method, when all the defaults are correct
automatic, and accurate, make dependencies ...taking into account includes and behaviours This code was originally committed as part of bug21673
Implemented the publish_fields thing, which then means that exchange shouldn't exist in the destinations, which also then means that I should pull out queue to the main body. So eg this now works: [{rabbit_shovel,   [{shovels,     [{my_first_shovel,       [{sources,      [{brokers, ["amqp://guest:guest@localhost/"]},                        {declarations, [{'queue.declare',[]},                                        {'exchange.declare',[{exchange, <<"my_exchange">>},                                                             {type, <<"fanout">>},                                                             durable]},                                        {'queue.bind',[{exchange, <<"my_exchange">>},                                                       {queue, <<>>}]}                                       ]}]},        {destinations, [{broker, "amqp://"}]},        {qos, 10},        {queue, <<>>},        {auto_ack, false},        {tx_size, 0},        {delivery_mode, keep},        {publish_fields, [{exchange, <<"my_exchange">>}]},        {reconnect, 5}       ]}      ]    }]  }].
bug22266: we don't depend on os_mon any more, though other parts of code still depend on cpu_sup, so we can't remove os_mon dependency
Remove the response verification as errors should cause the channel or connection to be closed
Remove the response verification as errors should cause the channel or connection to be closed
It works
Resource declaration working
Need to be able to verify that the response got back from the server is ok, when declaring resources.
merge default into bug21673
Merge bug22213 into default
Just tidying and making processes start up correctly
bug22266: make magic numbers less cryptic
bug22266: get_vm_limit now made exception for Windows, but it doesn't matter any more as I also disabled memory probing on windows completely. So I guess the virtual memory on windows is just for the sake of completeness.
adding test/amqp_dbg
bug22266: redefined what memory limit shall mean
Moved to using proplists instead of lists:key* on the grounds that all the keys are atoms anyway
Resource declaration parsing in. Can now parse:
Only parsing and building the resource declarations to go
Progress with uri schema
merge default into bug21673
flesh out binary_generator API ...for symmetry with binary_parser and because we need it in bug 21673
merge default into bug21673
minor addition to vm_memory_monitor API We need this in bug 21673.
revert accidental though harmless change
merge default into bug21673 and make new vm_memory_memory:get_memory_limit gen_server:call use an infinite timeout, for consistency with the changes on default
infinite timeout in all vm_memory_monitor gen_server:calls since we have come to the conclusion that this is generally preferable to things failing after some some semi-arbitrary interval.
move the handling of absent vm_memory_monitor process to call site ...for consistency with rest of API Also, use gen_server, not gen_server2, to reduce dependencies
,.
License correction
Beautiful monadic configuration verification. (uri parsing still needs fleshing out)
it turns out we no longer use gen_server2 insomniation
merge default into bug21673
refactor: eliminate code dup
merge default into bug21673
cosmetic: give startup messages a bit more space
fix embarrassing arithmetic bug in 'ceil' 0.0 doesn't case-match 0, but 0 == 0.0
revert uncosmetic change
Added method_record to codegen.py for the shovel
merge default into bug21673
cosmetic: squash trailing whitespace
cosmetic: re-indent rabbitmqctl help message
Modified uri parser to LShift performance specifications
Renamed http_uri.erl to uri_parser.erl
Added http_uri.erl from R13B01
Dropped uri parser
Added uri parser
cleaner handling of rabbit_framing dependencies these are now computed, like all others
Just a slightly more complex example and added documentation for clarification purposes
Added license boilerplates
make generate_deps less aware of its context
Developed the necessary delayed restart logic in supervisor3 (now 3 to avoid clash with supervisor2 in rabbitmq-server. grrr).
Makefile, app and ignore stuff
Added ability to set a delay on a per childspec basis before a child is restarted.
Correct what I hope was an accidental use of the tab character
Merge default into bug22169
Rename and adjust module name for supervisor2
Import supervisor.erl from R13B03
Opps, they may not match
Converted to get epp to do the transitive closure by giving it the include path. This all seems to work, but it does make deps generation nearly twice as slow
explain the non-obvious
refactor
Backed out the changes that were on branch bug22056
(Minor refactorings and changes to deps generation)²
Minor refactorings and changes to deps generation
There's the possibility that the timer may fire whilst we're doing the vq sync callback thus leading to a 2nd call to that, hence specialising a noop clause
Patched supervisor2 with support for simple_one_for_one_terminate
Added supervisor2 straight from R13B03
Removed supervisor2.erl
fix
merge default into bug 21673
Merged v1_7 into default
Added tag rabbitmq_v1_7_1 for changeset c73ecfc91be3
Added tag rabbitmq_v1_7_1 for changeset 90e101fd8b67
release v1.7.1
Made the deps file depend on the includes too, and also force on use_specs when generating the deps otherwise we miss out some transitive includes
Minor tidying
Added dependency analysis so that we know to compile behaviours first, and we track deps on includes (+transitive) correctly
Added supervisor2 with simple_one_for_one_terminate strategy and wired queues to use it
fixing merges
Remove the unnecessary reverse-lookup table fom rabbit_exchange_type
merge default into bug 21673
Leave 'hg stat' clean after macports packaging
pre => enables, post => requires
merge with previous head for merge of default into 0_9_1
merge of default into amqp_0_9_1. Not quite working yet, but runs and passes some tests
Merge v1_7 into default
Merge bug21930 into v1_7
The macports Makefile should by default construct the macports package
Incorporate the minor changes from the macports svn portfile
Get portindex to produce the tgz files required for an http macports repo
Generate the macports index files by sshing over to an OSX box
Templatize rabbitmq-script-wrapper so that it works under OSX
Introduce a Makefile to produce the macports artifacts
unsplitting map_exception; erlang client will be using map_exception directly
moving rabbit_reader:map_exception/2 to rabbit_binary_generator and spliting it into amqp_exception/1 and map_exception/2 in order to use amqp_exception/1 in the erlang client
typeo
Wrote new documentation for VQ
Make the return type of maybe_autodelete distinct from that of conditional_delete, and be more strict matching its return values. Confusion over those led to the delete hook not being called when an exchange was autodeleted as a result of a queue being deleted.
adding lookup_class_name to rabbit_framing
doc improvement
Added documentation for qi
merge in from default
merge bug22218 into bug21673
this looks prettier
fixed²
fixed
merge bug22225 into v1_7
Given we know all of those processes are about to be enabled, the order in which we do that is actually irrelevant
A mistake in the error case in accept, and elimination of one reverse
merge v1_7 into default
merge bug22223 into v1_7
merge bug22221 into v1_7
no need to match on 'ok' twice
documentation
Added behaviour for msg_store_index and tidied includes, and updated makefile appropriately. Good lord it'd be nice if erlang did proper build dependencies...
Added rabbit_msg_store_index (which is a behaviour spec) to the common app
documentation
merging in from bug21673
documentation tweaks
Make sure the fhc server is started early on in the boot process
put the erlang crash file in an erl_crash.dump file in rabbitmq base rather than as a text file named log
The motivation for the cast in init is that if the first obtain blocks then without the cast, rabbit won't startup because of the fact that start_link blocks on init thus the boot process won't finish. Switched to monitoring the spawned process which is much much nicer than passing through a fun to be run at the end of the process and is a much more generic solution anyway.
vertical alignment of -> in queue_fold
rebranch off v1_7 rather than default
Initial pass at solution. Seems to work. Interesting realisation that the fhc server was never previously running (post new boot sequence).
Switch (back) to using the type name atom in #exchange, rather than the module.  This is to restore the indirection between types and their implementation.  Note also that we no longer need the reverse mapping.
Bumped priority of acks to match that of the unblock and notify_sent calls
More indentation regularisation
Indentation, and consistently ignore hook returns except for validate/1.
Of course, there's no reason not to add into the current file cache immediately, thus allowing a write followed by a read to have no delay at all
Of course, we should only delete messages when they're, err, due to be deleted...
Refactored and generally tidied the msg_store. Also added a write-back cache for the current file. This means that the clients don't need to go to the server when reading a msg from the current file. Managed to avoid using any further lines!
Correction of modes in reading
When publishing delivered, the fact is, the message has already been delivered. Thus it should be marked as such, otherwise bad things happen when you eventually try to delete the queue (i.e. crash).
Inability to do basic maths
merge bug22013 into v1_7
Refactoring of bpq
Change to different exchange callbacks.  Requires a bit more calculation in delete_queue_bindings and recover to collect the bindings.
The DEFAULT_ values should not be available to the .conf file
Fixed. If the env vars are not set, combine them from the .conf file (non-RABBITMQ_-prefixed). In the case of one set but not the other, use the DEFAULT_ values.
merge bug19111 into v1_7
recreate branch in correct place
Merge from default, to get new boot sequence among other things.
Extensive testing suggests the batch size was previous set too high
Change to (almost) the mooted API, and support recover and validate.
merge bug22090 into default
Should actually be working on the ratio of betas to betas+alphas. Thus subtract out deltacount
the ratio should always be 1. Hence removed.
Much better. The reason why batching is important is because if you're walking through the bpqueue and doing very little work before stopping then you don't really get the amortised constant time behaviour. But the goal is achieved - throughput is maintained and very slowly diminishes with no major interruptions and the queue gets fuller and the transition is made to betas and then deltas.
Forgot to remove an io:format
Mechanism to limit the number of betas which don't have their index on disk is now in. Testing showed that if the queue is long, the change in target_ram_msg_count can be large, thus driving the number of ram indices directly off that still doesn't solve the problem. Thus am driving it from publish, with a limit on the maximum amount of work that can be done. This should allow the queue to remain responsive, as it works towards its goal. However, further testing, tuning and thinking is still needed.
Run the hooks outside and immediately after the mnesia transactions, if something newsworthy happened.  Mostly this is just a case of changing the thunk run in the transaction so it returns an indication of what the result was (e.g., a new exchange).
Refactoring of vq - pulled out the inlined block-prefix queue code and generally tidied profusely. Also efficiency fix in remove_queue_entries by avoiding an intermediate list (which could potentially be massive).
Remove mnesia event implementation of exchange hooks, again.
bug22209: added a comment to use upmap carefully.
Right, getting there - some major reworkings to vq which have fixed bugs. It doesn't quite do everything I want it to do it - in particular, on memory reduction, it needs to ensure that the inner queues nearest δ have sufficient non-ram-index msgs, but all thet tests pass and adding that feature shouldn't be too painful.
some minor refactoring (more to do), and spotted and fixed a race condition
Scanning the common operation, so that should be prioritied. The open->close transition is much rarer (only on GC startup and file deletion) so can be slower.
Correct the closing mech. Sadly I'm currently scanning the whole table every time, which is bad. I might change that to scan every, say, 1000 reads
Whoops, forgot to remove an io:format
Msg_store now supports concurrent reads when it is safe, directly from the queue. This means that even if the msg_store process is flooded with writes or acks, it won't (necessarily) block queues. This is extremely useful and has substantial benefit when memory has been exhausted and the queue is operating off γ only (effectively, no message content held in ram).
Toughened up cache accessors and switched to using named tables in prep for concurrent readers of msg_store.
fixing old example in comment
Env var does not need rabbit_ prefix
Put the default index module (ets) in the .app template, and assume the env var exists
Support pluggable msg_store index module through the rabbit_msg_store_index_module rabbit application var
merging in (and adjustments for startup) from default
merge bug 22039 into default
all of the changes made in this branch are superfluous. The branch can be trashed, but for clarity am reverting anyway
merged bug 22161 into bug 21673. Lazy, concurrent msg_store GC landed.
Ensure that :contains calls can't overtake :remove casts. Also modify the tests slightly.
Must start msg_store *before* amqqueue_sup, otherwise on shutdown, there's a nasty race which blows up the channel on notify_all_down because the msg_store exits wrongly, first, killing the queue process when it calls msg_store:read, and then the channel can't call the queue. Thus start msg_store before queue_sup, and none of this problem exists
background lazy GC in and working
merging default/21673 into bug 22161
merging default into bug 21673
msg_store traps exits, and so it should have a handle_info clause to catch that
merging v1_7 into default
merging bug 20916 into v1_7
merging into bug 22161 from bug 21673
Any exit signal arriving at the amqqueue_process should result in the process stopping and calling terminate
merging default+21673 into bug 22161
merging default into bug 21673
not_found error on attempt to declare a queue that exists on a stopped node this prevents loss or duplication of messages when that node recovers
document insomniation and also ready the msg_store for such gadgetry
support insomniation
post-backout merge
Backed out changeset 1c4cb3a06222 re-introducing pluggable exchange types on a branch
create branch for bug 22169
post-backout merge
Backed out changeset be841d4bfbb5 pluggable exchange types are not ready for prime time yet
merge bug22068 into bug22169
post-backout merge
Backed out changeset b2ff7bbc3df6 re-introducing pluggable exchange types on a branch
post-backout merge
Backed out changeset f878dbe8e0be re-introducing pluggable exchange types on a branch
post-backout merge
Backed out changeset 443c7b2d7e1 re-introducing pluggable exchange types on a branch
create branch for bug 22169
merge bug22082 into default
Merge no-pluggable-exchange branch into v1.7-series branch.
create branch for v1_7
post-backout merge
Backed out changeset 71e93e17450c pluggable exchange types are not ready for prime time yet
post-backout merge
Backed out changeset b2363fc1a51a pluggable exchange types are not ready for prime time yet
post-backout merge
Backed out changeset 3ab59ae0f0e9 pluggable exchange types are not ready for prime time yet
create branch for bug 22082
merging 21673 into 22161
whoops, we seemed to end up with multiple heads here
correct condition for doing GC
Merge default into bug22068
Refactor away boot_core_processes.
Refactor boot_recovery, boot_tcp_listeners and boot_ssl_listeners
geometric distribution
Merge default into bug22039
All sorts of stuff. See the bug. GC is off here (other that deleting empty files). File locking is in. Some other machinery is in wrt background GC. Lots of reworking of the GC code to get it into a more useful state (everything from adjust_meta downwards). Tests do actually pass, but with GC otherwise off, you'd be mad to run this.
Add some old notes on broadcast sending.
Reworked the GC of msg_store so that it scans the files themselves for their content, rather than a select on ets. This bounds the time it can take (ets could have many billions of other entries in it), and also makes it simpler to make the msg_location pluggable => toke. Also reduce the msg file size to 16MB from 256MB as tests show that although max write speed drops (more fsyncs and fclose), the GC is much faster. This may go back up a bit when lazy+background GC arrives.
merge bug22013 into default
Added accountancy for file size and sums thereof plus sums of valid data. This simplifies build_index slightly and complicates remove_message slightly. Also found that in delete_if_empty, was failing to close any file handle open on the file prior to it being deleted.
cosmetics (mainly line length, alignment and trailing WS)
merging bug22113 into default
remove defaults from nc_state params fields, as they're never used
SSL tests passing and default port correct for ssl/normal
fix egregiously wrong default for nc_state#amqp_params. Somehow that passed through the test suite uncomplaining, which is a bit worrying.
break connection_params back out into amqp_params and tcp_params. direct connections only need amqp_params. All tests pass
interim renaming of amqp_params to connection_params
Don't reverse the entire list, only to pull off one element
Noticed that sometimes the shutdown message that appears to the queue process is of the form {shutdown,{gen_server2,call,[rabbit_msg_store,{read,<<96,94,147,36,83,202,129,231,131,151,203,11,95,112,69,118>>},infinity]}}. I presume this is when we're shutdown whilst in the middle of a call. In any case, it was falling through to the wrong case in queue process terminate, and resulting in the queue being deleted. Brilliant. Sadly, the fix is pretty much code duplication because you can't do a partial pattern match / unification in a guard.
qi: all_segment_nums was not returning its list sorted. As a result, find_lowest_seq_id_seg_and_next_seq_id could return the wrong values. vq: because of the bug in qi, vq could construct γ wrongly, violating the vq invariants. This would lead to explosions elsewhere.
Turns out that it's actually important to stop erlang from time to time...
Do not kill rabbit after 1 second when being asked to stop. Also, the default timeout on startup should be the max value allowed, not 30 seconds. Sheesh.
Split up and tweak startup order.
Switch to explicit MFA, and symbolic boot step names. Add comments to sort_boot_steps. Reject duplicate boot step names.
Move planning code out of activator and into rabbit proper.
New process to own the tables. API for accessing the tables.
Enforce acyclicity; check presence and export of steps.
Fixup specs.
Add "-rabbit_boot_step" module attribute to specify startup sequence.
Merge default into bug22039
Delete trailing whitespace
Merge default into bug22039
merging in from default
load_segments deliberately does not adjust the pubs and acks count in the segments because doing so would clobber over values carefully constructed to contain both information from the journal and from segment, which is used to detect when flushing to a segment is unnecessary because the file is "full" and so can be deleted (i.e. pubs == acks which is sum both of in segfile and journal). On startup, we were failing to set the pubs/acks counts correctly, leading to queues doing recovery correctly but then returning a length of 0.
Read 2 bytes instead of one at the start of load_segment_entries. This makes the code cleaner and avoids a further read in the case of a del or ack
merging bug 22117 into default
merging bug 21963 into default
merging bug 21948 into default
merging bug 22125 into default
add client_properties info item to 'rabbitmqctl list_connections' showing the amqp table transmitted by the client as part of the connection.start_ok method.
don't escape space (ascii 32) in rabbitmqctl output It was never meant to get escaped in the first place, according to the docs.
display pids instead of nodes The challenge here was to find a way to display pids portably, s.t. the same pid is displayed in the same way everywhere, every time.
replace deprecated guard
don't wait forever for ssl negotiation to succeed
move ssl negotiation into reader process thus freeing up the acceptor to handle new connections
No longer rely on magic module naming; use an explicit registry
cosmetic
cosmetic and some refactoring
Don't put a trailing colon on ERL_LIBS if ERL_LIBS isn't defined
appropriately renamed
cough, splutter, sneeze etc
segments now stored in array, not dict
cosmetic
refactoring
combined steps 3 and 4 of init, and made segment_find have the same type as dict:find. Dropped the Dir from the Segments, and added find_segment_or_new/3
merging bug22056 into default
cosmetic
With R13B03, it would appear we need to be slightly more hesitant: currently I'm seeing the memory limits being hit and the queue duration is still fairly large. Whilst it does eventually fall, setting this scalar a little lower should help. However, this will probably need tweaking again, once we've moved away from ets in the msg_store
What a difference, two characters make...
Make the arrays fixed size and tell them the max size. The don't actually take this much space initally, but it makes them a bit faster as they can make more sensible balancing decisions, we think.
Switched to using array instead of dict for the inner journal. It's about 10% faster.
If I write it this way then it saves code and is maybe slightly faster. maybe.
merge heads
Abstracted the segment caching in the qi, and associated improvements as not all the state needs to be passed around all the time.
cosmetic
Some renaming in the fhc and associated changes in qi and ms.
source code file compression
cosmetic
Up to 11kHz persistent on my home machine. Still a little way off the 13kHz that I was getting before, but there were bugs in the previous QI (eg missing syncs) which could well have led to the old version being too fast. Added two functions to fhc: delete/1 which deletes without flushing any data at all. It will refuse to delete if the file isn't open; discard_write_buffer/1 which does what it says. We use the latter after scattering the journal as after we hit each segment, we sync the segment, so at that point there's no need at all to force out the data in the fhc for the journal prior to truncation.
Allowed the journal to grow substantially bigger. This helps performance substantially.
New qi in place, tested and debugged. It works. It's not quite as fast as before because of use of nested dicts. This can be solved by using sets for publishes, deliveries and acks within each segment - we don't actually need what the dict provides and sets will go much faster. That change should be fairly straight forward to do - the code will get a little longer, but not much more complex.
Bug 21838: check equivalence on exchange.declare
Finished. It might work - untested though
More good progress on qi3. The code still almost looks pretty in places. Its prettiness is not diminishing.
Bug 21838: Don't check the type in a exchange.declare{passive=true}, as per the field doc in the spec.
Lots of good progress on qi3. The code almost looks pretty in places
Ignore any old records
Cope more gracefully with failed callbacks.
Add declare/1 callback.
Use mnesia table events instead of in-transaction callbacks.
Wrote two key combinators which will be used by the new queue index shortly. qi3 is very temporary
Merge default into amqp_0_9_1
Merge default into bug22039
allow nodes to be started with no listeners
two bug fixes and some refactoring - the IP address in the config is meant to be a string, not an atom - special case node name of first node
merge bug22063 into default
merge bug22063 into default
refactoring in order to reduce code duplication
Avoid compiler warning about unused term; weirdly, the replaced idiom works elsewhere
replacing use of rabbit_framing:is_amqp_hard_error with rabbit_framing:lookup_amqp_exception(rabbit_framing:amqp_exception(..))
removing is_amqp_hard_error in rabbit_framing and adding amqp_exception function to lookup amqp error codes and turn them into atoms
Change tactic to examine modules in .app files for rabbit_static_hook_* modules
Merge heads of default
Initial stab at the problem
Added tag rabbitmq_v1_7_0 for changeset 825eceaca84c
Try harder to find a simplejson-supporting python
Only pull in one segment at a time from γ into q3
Remove the garbage_collect call as this doesn't seem to be necessary in R13B03
Garbage collect on memory reduction; remove delayed_write in queue index as we're handling buffering ourselves; add a hack to get the raw vq status out of rabbitmqctl
Removal of unnecessary clause in handle_info for queue process as prefetcher has gone. Bump rabbit supervisor to allow all processes to take as long as necessary to exit. This should ensure cached data gets flushed out.
Remove channel:subscribe totally, and instead make sure that channel:call(#'basic.consume'{}...) works correctly. The consume-ok is no longer sent. If you want to get another process to receive messages then send them the channel pid and get them to do the :call(#'basic.consume'{}...). This removes a wart from the API, removes a POA and makes things more consistent.
Removed mnesia table and dq_msg_loc record that's no longer needed
There was a bug. Now it has gone away. It arose when γ has a partial segment, and then memory is made available, and the next msg is persistent. It will go into the partial segment in qi, but will also be in q1 in vq. This lead to the msg being duplicated. Solution is to track the max seq id beyond the end of the γs, and thus drop anything being returned in the segment from qi with a seq_id above this max seq id.
storage_mode is long gone
unintended variable capture
s/full_flush_journal/flush_journal and some refactoring
better const names
cosmetic
cosmetic and inlining
use ?SERVER wherever possible
Don't demonitor if we received a DOWN msg.
merging bug 22049 into default
remove unnecessary comment
Added demonitoring, corrected counting on deregistering, and got fed up with the lack of whitespace
setting insist = true in 'connection.open'
Don't need this variable anymore
Remove the small_duration_threshold, and instead smooth the ram_msg_count over the last two periods. This seems to work reasonably well.
SMALL_INFINITY_OSCILLATION_DURATION => SMALL_DURATION_THRESHOLD
s/b(.)t/s\1m/
Improved documentation and code regarding fast moving mainly empty queues and the SMALL_INFINITY_OSCILLATION_DURATION definition. Oh, and clamped zero.
beautifuler
Improvements to documentation, further improvements to conditional and refactorings. Removal of max queue duration because the rate calculated by the queue doesn't decay in the way necessary to make the max queue duration necessary
Further correction to conditional; line lengths; extract all magic numbers and -define them and document them.
Lots of improvements: o) merge the dict and ets; use a record there; o) drop record memory_ratio; o) corrected where we clamp to non-neg numbers; o) correct conditional in internal update
Added deregister and stop to MM
merge default into bug21673
cosmetic
multi is a convenience. It should blow up when starting > 1 nodes when we have multiple tcp listeners. When starting > 1 nodes, make sure we export the discovered node ip address and port. When starting just 1 node, don't export anything - either rabbit-server will rediscover it in the env, or it's all configured in the config file.
merge default into bug21673
put things in (the right) order
merge bug22042 into default
(kinda bug 22042) inline rabbit_misc:cmd seeing as it's not used elsewhere and we want to allow vm_memory_monitor to be used outside of rabbit
don't use rabbit_log; use gen_server, not 2; correct long lines
remove trailing spaces
typeos to novel
merging heads
A novel
cosmetic
merging heads
Stop using _misc:cmd and use os:cmd instead
use plain, old gen_server instead of gen_server2 - for better compatibility
cosmetic
Make sure that trusted_offset in open1 is set to an absolute offset
merging heads
Utterly baffled. I thought this was the obvious refactoring I was doing earlier, but apparently not. Anyway, this works.
cosmetic
inlining
Corrected spec for open and inlined the internal versions. Also used the with_flushed_handles for truncate and position. It breaks sync if you do *both* the flushed form and then the obvious refactoring within it (i.e. pull the Handle1 up) and I can't quite see why
removed calls to rabbit_log, using error_logger instead. Still one call to rabbit_misc:cmd. Not sure quite what to do about that...
corrected order of cast tuple; improved set_maximum_since_use; corrected bug that led to a /0, due to exhausting fhs just through calls to inc and dec (from sockets - only happens when the limit is very very low)
Remove the double indirection of fhc_file and fhc_path; make open non-recursive
minor refactoring
cosmetic
more cosmetic
more cosmetic
more cosmetic
Reintroduced traces of tcp_listeners where it turns out to be a jolly good idea, but don't set either one unless the other has been set. Thus if neither has been set then we don't do nowt.
cosmetic
merge default into bug21673
Removed all traces of tcp_listeners from the scripts
Allow ERL_LIBS and ERL_PATH to be specified in either the env or as args to make to make it easier to specify additional directories to the various targets (make run is a good example)
Merge default in.  This includes bug22020.  There were some non-obvious conflict resolutions:  - getting rid of the q/x durability agreement check  - in getting rid of the exchange may_auto_deleting, making sure all  branches returned 'ok' (the tests all start failing!).
merging bug 21409 into default
Added a test. However, can't actually verify that the negotiation was correct as there's no way of getting the params back from the network process. Oh well. Test does pass.
merging bug 22020 into default
Spec for rabbit_misc:sort_field_table/1
merging in from default
merging bug 22020 into default
Oops -- it's supposed to be a .hrl, not a .erl
Speculative specs, pending R13B to try them out
Rename sort_arguments to sort_field_table
Comment lists:keysort in delete_queue_bindings
Catch list_to_existing_atom error, throw command_invalid
License headers on new files.
Change to publish (= route-and-deliver) model for exchanges. This lets exchanges do arbitrary delivery inspection for routing, arbitrary content rewriting or discarding, and arbitrary content and delivery synthesis.
Include exchange behaviour in common module
Make exchanges modular behaviours. Added rabbit_exchange_behaviour. Split fanout, direct, topic and headers into new modules that implement the new behaviour. Added convention that for exchange type X, a module named rabbit_exchange_type_X must exist.
Merge default into amqp_0_9_1
Oversupply of E
Did Matthias's requested transformation of the fhc. Saved 50 lines. It's not quite as neat as I wanted due to passing extra args through (the difficulty is in writing the with_flushed_handles - you can't write the fun in there to have any arity), so it's always a 2-arity function :: ([any()], [handle()]), but hey, it's still quite a lot nicer than it was.
Finished the file handle cache. It works as follows: 1) Every client keeps a gb_tree of timestamp-when-fd-was-last-used => fd_ref. This is updated for each action. 2) When a client opens a file or closes a file, it sends a suitable msg to the server, including the smallest timestamp-when-fd-was-last-used (i.e. least recently used fd) 3) The server counts how many fds have been used 4) When too many fds have been used, it finds the average age of the least-recently-used-fds and tells all clients to close anything older than that 5) This is likely to have no effect, because the clients may have since used the fds, thus the ages will be wrong. Regardless of whether any fds have been closed at this point, all the clients send back to the server their current smallest timestamp-when-fd-was-last-used 6) 2 seconds later, the server checks to see if the situation has improved, and if not, using the now updated information (thus the average age will be lower) may choose to further ask all clients to kill off fhs. This will repeat, albeit not that fast until enough fds have been closed.
started on the server part of fhc
merge in from default
merged default heads
correction of documentation in absence of prefetcher
Lots of tidying. Also, don't allow rates to decay infinitely. Instead avg over the last two periods, and assume zero rates when we hibernate.
Documentation improvements
Minor bugfix
and now remove the accidental commit of the server script. it's late...
yeah, duration shouldn't be truncated. reverted
Bug 21986: Use gen_server2:call instead of gen_server2:cast to make this synchronous.  This means recover_async is now also synchronous, but it's deprecated, and anyway we do the same thing with no_wait elsewhere.  This way we have just the one code path.
truncate desired duration as I've now seen rounding issues cause behavioural problems
some cosmetics to MM. Also, there's a problem where if all queues have been pushed out to disk (duration == 0), and then more memory becomes available (eg queue death), then no queues will be brought back in. Therefore, if >= 5% of our memory is available, ensure that the sum is at least 1. This allows queues to come back in.
Bug 21986: Implement synchronous basic.recover
Tidying of msg_store as per QA discussion with Matthias
Well tracking down that transposed error took about an hour... sigh.
1. A bugfix in MM, in internal_update. 2. In MM only enforce limits if we're using more than half the available RAM. 3. In VQ, sum the ingress and egress rates - this makes things much smoother when queues go from being flooded to being consumed, and vice versa.
Merge from default, to get recent work as well as support for field-array.
If a queue reports 0 duration, then the MM may well calculate that the desired avg duration should be 0. The queue will then be told this on its next report. This is potentially disasterous because for a fast moving queue, setting the duration to 0 will force allmsgs via the disk, which will destroy performance. However, it is not sufficient to just tell all queues reporting 0, infinity, because doing so would result in queues which have been pushed out to disk, suddenly coming all the way back in. Thus if a queue reports a duration of < 1, and the last value we told it was infinity, then we tell it infinity again. Thus fast moving queues are not restricted, and queues which have been told real numbers, and slowly squeezed out to disk stay squeezed out.
In the absense of an egress rate, use ingress rate instead. Also, if there's been no fetches/publishes since the last measurement, use the previous measurement, appropriately scaled. This means that the rates will gently fall off and approach zero in the absence of activity, which is preferable to them suddenly jumping to zero. Also, the average is now the sum of the fetches/publishes in the last two segments, over the time since the start of the last segment (i.e. it's better than before, which was just a straight /2, which would be wrong if the segments are different sizes, which they could be, given a very busy queue).
Remove most of the vq tests which are now invalid given the prefetcher has gone.
stripped out the prefetcher. Note that I've not fixed up the tests yet, so they won't pass
Merge bug21929 into default
merge bug21975 into default
merging in from default
merging bug 21903 into default
merging bug 21947 into default
all done
Remove traces of plugins in the debian postrm
Enforce frame-max negotiation
Bug 21836: Test that the content framing code doesn't produce frames that break frame-max
reverting a change to the start up script that I never meant to commit. Also further simplifying logic in the previously faulty function.
It makes sense only to fully flush the journal prior to hibernation. Other than that, the qi can take care of when to flush the journal out. Adjustments to tests
Err, as I said in the last commit, make sure the desired queue length isn't < 0.
Firstly the desired queue length shouldn't go negative. Secondly, testing shows that the amqqueue_process should not flush the qi journal when idle. Doing so can lead to disk thrashing.
Found the bug. What was happening was: 1) γ contains a range, say a to b, where a is a segment boundary but b-a < segmentsize 2) γ -> β happens, so all of γ gets loaded into q3 as betas. γ is empty 3) then push β to γ happens. There was a logic failure in there, which meant that with γ empty, _all_ of q3 would be pushed to γ, but incorrectly accounted for, making the vq think there is less in γ than there really is 4) now γ -> β happens again, vq is amazed to find more in the segment in γ than it was expecting. cue explosion The bug was simply not ensuring that if γ was empty, only push out enough to leave q3 with a maximum of one segment, ending on a segment boundary
Merge bug21928 into default
Merge bug21913 into default
merge bug21876 into next
Wired it all together. It does seem to work, but there seems to be an off by one bug somewhere in vq, wrt γ length counting. Which pops up sometimes... Joy.
unused vars
merging in from bug 21742, ignoring all of its changes to amqqueue and amqqueue_process
merging in from default
merging in from default
Various amounts of tidying, post testing and a large amount of cosmetics.
Support field-arrays in the parser.  This involves a similar factoring of field-value to the generator (since field-value is used both for field-table and field-array). Also fixed a dumb mistake in the array bit of rabbit_binary_generator.
Unhappy with the idea that the desired duration is affected immediately by new queues and queues dying, but the memory ratio, which reflects the amount of memory erlang has used, is updated periodically. This mix of up-to-date and stale information in the calculation of the desired duration alarms me. Thus store the desired duration in the state, and always report that. That is then update periodically, thus is only ever calculated using current values.
Cosmetics
QA: quoted atoms in specs, timer:now_diff
Cosmetic
Refactoring of encoding code, so that it uses the table encoding erm, code.  Test case which mostly exercises the table encoding code.
replaced echo -e with multiple echo calls
Fixes as suggested. Having tested, the asroot wrapper is used only with activate/deactivate, which don't take any arguments anyway, making testing argument passing a little challenging. However, minor editing of those scripts suggests that it does indeed seem to work.
Fixed. There was a choice of having the qi do its own seqids, which would have been fine, but for the fact that at any point, there is the possibility of the vq deciding to flush everything out to disk. Thus to avoid rewriting in order to preserve order, instead we cope with the fact that there may be partial segments. The solution is to have a dict of segments which received fewer than the expected number of publishes before a different segment was written to. Then, when adding acks, we check to see if the number of acks is now equal to the partial number of segments, if it is, delete. Also, when moving to a different segment, we potentially delete the seg file if the number of acks is equal to the number of publishes. One key aspect of this is that the current segment to which we are publishing never appears in this dict, so it is not possible to delete the current publish segment by having the same number of pubs and acks, without it being really really full. Added and modified tests accordingly.
Added test which slowly reduces the duration target of the queue as messages are pumped through at high rate. This has revealed major flaw in the queue index which goes as follows. In the queue index, we assume that all segments have the same number of entries. This is in fact not necessarily the case, because a segment may very well have a mixture of messages, some of which are on disk and some of which are not. There are a few solutions to this, and I've not decided yet which is right.
Cosmetic reorganisation of vq. Added specs and made sure usage matches specs
Wrote specific test of the case mentioned in previous commit, and fixed code accordingly. Also added some other tests. With the overal test suite, up to 92% code coverage of vq, and 70% on prefetcher. Also factored out common records between those two modules to rabbit_queue.hrl
Merge bug21715
Using vm_memory_manager.
Made the tests work again. Also one tiny cosmetic in vq. However, uncovered major mistake in VQ which is that currently, when the prefetcher starts, that may empty q3. A subsequent publish may then go straight to Q4, thus overtaking the previous msgs. Even worse, when the prefetcher is drained, there is no attempt to join it into the existing q4, it just replaces it. What should happen is that the existence of the prefetcher is treated as if both q3 and q4 are non empty. This makes sense, because there are some ways in which the prefetcher can exit, returning entries for both q4 and q3. Thus pubs that happen after the prefetcher is started must go to q1/q2/γ, and so we know that entries already in q4 when the prefetcher is drained must have got there before the prefetcher was started. Finally, when the prefetcher is drained, if γ is empty, q2 and q3 can be joined, and if q2, γ and q3 are empty, q1 and q4 can be joined. Or something like that.
Build args are also dependant on platform
modified vq such that when we're bringing entries back in from gamma to beta (q3), we bring all entries in, unless we know that our target_ram count is 0, in which case we only bring one segment in. This massively helps the prefetcher as it means the prefetcher is finally allowed to prefetch more than one segment. However, it has had a negative impact on the tests, which I'm still working through to correct.
Making progress with vq testing and debugging - up to 75% code coverage overall, and ironed out several bugs
Forgot one checksum
Let's support 1.7.0
don't depend on simplejson for snow leopard
man 2 write states:  POSIX requires that a read(2) which can be proved to occur after a write() has returned returns the new data.
Merged default into bug21742.
Added maximum negotiation and protocol version checking
Merged bug21619 into default
Merged default into bug21619
Merged bug21880 into default
Merged default into bug21880
Merged bug21775 into default
Nuked a head
Merged bug21775 into default
merging in from default
Move the pkill to after the check that there is a rabbitmq user
Merged default into bug21775
Merged default into bug21775
Move epmd killing from the init script to the Debian postrm script
Fixed bug in the app descriptor
One head is better than two.
updating rabbitmq-service.bat to reflect changes in rabbitmq-server.bat
merge bug21831 into default
bug 20578: factor out the check-if-the-queue-has-changed pattern of the two branches
bug 20578: Spring-clean queues on recovery by checking each to see if it is exclusive to a dead process (connection); and if so, deleting it.  As things stand, a queue can't be owned by a connection on another node (so the aliveness check is redundant), but this will account for such scenarios in the event of connection- or queue-mobility.
merge bug21782 into default
cosmetic
merge bug21570 into default
Merge bug21802 into default
Merge from default to get, among other things, better memory management and synchronous auto_deletes
Update test to rabbit_amqqueue:declare/5
bug 21385: Make basic.get respect exclusivity
subtle bug in queue_index in that there's a sort of race because scattering the journal out to the segments can cause the publish file handle to be closed, should the segment become full. Fixed.
bug 21385: check exclusivity for queue.bind as well.  Because I need to do the check inside the transaction, I had to change rabbit_exchange:add_binding/4 (and delete_binding/4) to take another parameter for the check. I also made the exclusivity check more obviously run for its side-effect.
Fixed a few bugs in fhc, pushed fhc through to msg_store and msg_file. API change to fhc:position to match file, also extended fhc with copy. msg_store must also trap exits so that it will shut down cleanly - especially important given that data to be written is now cached more aggressively. Removal of stop from msg_store as it's part of a supervisor and so the correct way to stop it is via the supervisor.
bug 21385: Move exclusive queue checks to rabbit_channel, and add them in to the queue operations mentioned in the 0-9-1 spec's "exclusive" rule (except for queue.bind which is a bit harder).
started work on properly testing the vq. Caught several bugs already. Also hooked in the remeasuring of the egress rate of the variable queue, which will also eventually form the driver to inform the memory_manager. eventually.
Still haven't discovered any real bugs in the refactoring that happened to qi on Friday, but quite a lot of cleaning, extra code comments and general polish to qi
Documentation, cosmetic and tidying up test artifacts
Well, the transformation is done. Hilariously it works, first time. However, whilst all tests pass, I suspect there may still be faults, eg in the counting of entries in the journal etc. It still needs further checking...
Made the qi keep counters for the publishes and deliveries and flush to disk (minus sync) at the right points. All tests pass. However...
Added specs to fhc
bool() => boolean()
merging in from default
cosmetics to fhc - just moving and tidying
Added destination file, and lifted the code from rabbit_misc:write_term_file (though with ~p, not ~w)
merging bug21804 into default
merging bug21877 into default
merging bug21789 into default
both network and direct connection processes are now able to determine if error code sent by the server is either hard or soft and take appropriate action
When clustered, on application:stop, make sure we call on_node_node(node()). This is necessary because application:stop does not constitute a node failure, thus other nodes won't notice. Tested by creating a 2-node cluster, creating durable and non durable queues and checking that they're removed from mnesia tables as appropriate on application:stop on one of the nodes. Of course, even with the application stopped on one node, rabbitmqctl status still reports both nodes in the list of running_nodes. All tests pass.
merging bug 21457 into default
set limits for 32bit to 4GB and 64bit to 256TB. Set default vm_memory_high_watermark to 0.4, and adjust display of memory size in undetected OS case
merging from default
fixing catch problem; increasing timeout for waiting for close_ok on connection close
Minor improvements to spec and some cosmetics
Added extra spec which may shut up R13B01
QA: specs
typeo. Or something.
placation of Matthias - more sensible rabbit_mnesia API
Made the wrappers slightly smarter so that they also detect when they're the rabbitmq user and just pass args straight through in this case (which, after testing, really is the right thing to do). Note that at least on debian, the rabbitmq user has the shell of /bin/false, so shouldn't be able to log in, but even so, either edit that to /bin/sh and then su to rabbitmq and then rabbitmqctl list_queues works, or su rabbitmq -s /bin/sh -c "/usr/sbin/rabbitmqctl list_queues" works. In short, it seems to work.
QA: yes, that's better error handling...
On application:stop, if we're not clustered, walk through all the ram tables, and clear them. This has been tested by declaring durable and non durable queues and checking that they disappear on application:stop from rabbit_queue table. The durable queue does correctly still restart on subsequent application:start
QA: Removed useless comments, added 'no such command' guards.
correct default path to erlsrv.exe to point at a likely location of an R12B-5 install instead of R11B-5, since the Windows bundle now contains the former rather than the latter.
Added specs which, importantly, feature no_return() as the return types, in order to shut up dialyzer
stop batch from tripping over vars containing parentheses The root cause was a missing quotation.
missed one
prevent vars from escaping the script and polluting the env also some minor cosmetic changes
merge bug21788 into default
missed one
better channel number choosing algorithm; using channel_max field in 'connection.tune'
merging bug 21457 into default
512MB => 1GB
We don't need two ways of disabling the mm, and 0 tends to mean unlimited elsewhere in amqp (eg qos)
merging in from default
system_memory_high_watermark => vm_memory_high_watermark
More cosmetic
moving rpc server and client state records to their respective modules; adding rpc_test to the direct client suite as well
more cosmetics and formatting
More cosmetics and reorganisations
cosmetics and rearranging only - conformance and consistency
Merge bug21788 into default
Add missing quoting RABBITMQ_EBIN_PATH on the deletion of rabbit.rel
merging in from default
merge bug 21796 into default
removed ssl_base64 use in cookie_hash
Some minor cosmetics in qi, but mainly extend the qi tests so to cover one other code path that is pretty easy to hit and deserves testing (auto deletion of full segment files).
Statically configurable fixed width msg id size in msg_store. Associated changes in tests. All tests pass.
escape env vars in .bat scripts on use rather than definition We did that on most env vars already, except recently introduced ones, which caused nasty quoting bugs.
Added comment explaining delightful code
Work around in scanning in msg_store files to ensure we don't explode memory. Also drop read_ahead when scanning files because there's just no point given the way erlang works
fix typo
cosmetic
fixing performance issue in registering channel numbers
Firstly, delete does not return ok, but {ok, Len}. Secondly, whilst we could delete the child spec on an explicit delete, given the issues raised by auto delete, there's not much point; so Thirdly, add prune_queue_childspecs which is called whenever we delete or declare a queue. This means there will be at most one unused child spec under the queue_sup at any time, so we still need the already_present case in start_queue_process, in case we're unlucky and come across the unused spec (actually not that unlikely).
On the way towards perfect indentation.
Fixed tabs.
Added support for solaris
changed the queue supervisor from simple_one_for_one to one_for_one. This then means that children can take as long as they need (well, up to 2^32-1 millis) to shutdown (flush files out to disk), which turns out to be important. This change has impact on queue creation and deletion too. Also, cl.ean => clean.dot
Apologies for the previous commit message. What this commit and the previous do is to move the msg_store under the rabbit_sup. This turned out to require some changes to the tests too.
make
added to qi so that it will store that it was cleanly shutdown, and on startup, if it wasn't, then it marks all msgs as delivered.
Added check in the qi startup that msgs must be in the msg_store. This affected some of the tests. All seems to work.
Default merged into bug21457
Merged bug21415 into default. I missed it previously.
Merged default into bug21742.
Major refactoring including ets, saving last-send-value and call instead of cast.
rewrote the qi populating the msg_store (delta function), sidestepping queue scattering. Seems to work fine.
correction of ordering of exports, specs and functions. And correction of specs. All just for qi though
Mainly a load of cosmetics, and some minor API changes, but also manage to hook in getting the queue to flush the journal out if the queue is idle and has no work to do. This takes advantage of the ability to incrementally flush out the ack journal.
merging in from default
bug 21758. Missed the first case in handle_ch_down which was noreply(... and needed turning into {ok, State} in order to match the other cases
merging in from default
use base64 module instead of ssl_base64 The former is part of stdlib and hencd available in all Erlang installations, whereas the latter is absent if ssl was disabled during compilation. The downside is that base64 was only introduced in R11B-4. However, all the major distributions ship stable branches with Erlang releases later than that, and for exotic distributions the user can always build Erlang manually.
merge bug21777 into default
cosmetic error formatting changes
merge bug21758 into default
Merged bug21803 into default
adding support for determining if an amqp reply code is either a soft or a hard error
in queue tx coalescing is in. It works too - doubling the number of producers does not halve the tx commit rate for each producer. It does go down slightly, on each doubling, but appears more log like. Also, debugging shows that the coalescing really is working
removal of dumb code - need to find a better way of dealing with this problem
removing an unecessary check; other cosmetic
dict->ets, and a refactoring
should definitely sync after truncating the ack journal
Yes, turns out it's a good idea to observe the is_persistent flag...
mainly cosmetic renamings. Also added support to queue_index:sync so that you can indicate whether or not the ack journal should be sync'd. Use of strace shows that in the test in bug 20470 #c6, we're doing 2 fsyncs per txn, which makes sense - one for the qi, and one for the msg_store. However, only getting about 180 txns/sec, as opposed to 350 as reported in that bug.
finally added support for smart syncing of the queue index on commit. Note performance is pretty bad as although the msg_store is doing coalescing, the queue index isn't yet, so it's fractionally above one call to file:sync per commit
Added is_dirty, which is necessary so that we can avoid unnecessary syncs. It's not good enough to just look at the write buffer, because the write_buffer may not be being used. Also corrected gross mistakes in sync, moved around the last_used_at update, and some cosmetics too
Removed state from fhc. The reasoning is as follows: 1) the fhc uses the process dict 2) the fhc needs to receive msgs from its server process as to limiting the age of unused fhs. This is clearly per process as such, it's daft to cater for a process having more than one state for the fhc. Thus any state necessary will also be put in the process dict.
Merged bug 21807 into default (list_bindings order).
correct list_bindings result field order
drop the offset arg to read, also account for the possibility that we didn't read as much of the file as we asked for. All tests pass.
- keep track of the owner in the amqqueue record.  We need this so we   can check equivalence on queue.declare - speaking of which, implement the "equivalent" rule of queue.declare   (bug 21832) - queues are exclusive on creation, and don't change owner, so get rid   of claim_queue - also check exclusive in the passive version of queue.declare; this   is explicitly mandated by the spec (queue.declare, exclusive) - bug 21385: exclusive queues are deleted when their owners go away,   as per the spec.  This didn't actually change implementation -- it   was wrong for 0-8
QA: changed names to: queue_duration, changed MemoryOvercommit to be available/used (instead of used/available)
starting to deal with the idea that fhs may disappear because of hitting limits
bug fix in fhc:read (not tracking change in offset). Also made qi use new fhc, and remove hdfhc
not quite complete, but much much simpler, and prettier
QA: specs, and LOGDEBUGS
Default merged into bug21457
More work on the real fhc
trivial and cosmetic
Started work on the real file handle cache
merging from default
splitting amqp_connection; removing driver modules; adding module for main reader; adding amqp_channel_util module; all tests pass, need to review and test further, some code duplication to be removed
Added write buffers. Performance now very very good, and could get better if can get msg_store to use the new fhc. All tests pass. Sometimes.
Added sync_all for queue_index, trap exits in amqqueue_process, make sure that terminate calls terminate in variable_queue which calls through into terminate in queue_process.
Default merged into bug21742
Merged bug21771 into default.
Minor QA fix
remove unnecessary rabbit_ prefix in process dictionary entries in fhc
fprof shows that dict really sucks hard, so switch to using the process dictionary in the fhc. This eliminates all need for state, however, I've not removed fhc state from either fhc or qi because of the likelihood of needing some state back in for the real fhc. Performance is now much better because I went back to the original qi before the fhc modifications and realised that I should have been opening files with read_ahead enabled, which I wasn't before. In fact really, performance is now quite a fair bit better than before the fhc came in.
Merged bug21698 into default
still far too slow
well, it's about 4 times slower, but the dumb fhc works on the queue index
Typo and style fix
Use a specialised return value for handle_ch_down, rather than reinterpreting what used to be a handle_call return value
Merge default into amqp_0_9_1
don't use foreach seeing as I'm not using it anywhere else
Do the queue deletion synchronously.  Instead of replying immediately using gen_server2:call, then doing the work, we include the reply in the return value for gen_server2 to pass on.  It happens that gen_server2 will terminate the process, on getting stop, before it sends the reply on -- just what we want here.
make sure we stop the msg_store at the start of the queue_index tests
Extending queue index test slightly
reversing previous change, as I had actually got it right first time
more helpful when the bugfix fixes the bug
tidying up end of test_queue_index
Some minor API changes which are pretty sensible anyway, but also make writing tests much easier. Also, tests for queue_index which hit 90% code coverage for the module. Profiling in progress to try and figure out why it's not quite as blazingly fast as I expected.
added missing spec
Move demo extension from rabbitmq-server to rabbitmq-codegen; start documentation
spelling
now() -> make_ref()
preemptive refactoring
Include protocol revision in banner
factoring out of some magic numbers
stop the msg_store at the end of the tests so the rest of the test suite can run. Also, fractionally increase code coverage.
test suite for msg_store - hit's 80% coverage - uncovered code is for recovery from crashed compactions
on requeue, make use of msg_store:release
Updates to README and .app file
merging from bug21698
fixing failing basic_qos_test
If we don't fully flush the journal when it becomes full then we are negating the point of the journal as it means we very frequently fill it and then have to empty it to one file, whereas if we fully empty it then it takes much longer to fill, and then we empty to several files
empty queues that get deleted should, um, be deleted
assertion that the purge count equals the queue length
Bug fix.
merging from default
Bug fix.
Bug fix.
Bug fix.
Bug fix.
bug fix.
bug fix.
Merged bug21564 into default
Merged bug21783 into default
removing use of gen_event in return handler; trapping EXITs from handlers to unregister them
fixing output for test_common_package make target
fixing closing state overriding; other small fixes
A load more fixes. Seem to have uncovered the possibility of finding many acks for the same msg when reading in a segment file...
use lists:flatten, not hd
some more fixes. durable queue recovery seems to work
merging from default
major redesign of amqp_connection's closing mechanism
some initial fixes
LIBS_PATH is needed in run otherwise things like rr("include/amqp_client.hrl") refuse to work.
the deletion of transient msgs via the scattering of the journal at startup was wrong because there is no guarantee that the journal will touch all the segments. Thus now in the formation of the ack counts, add deliveries at that point where necessary for transient msgs. Acks for these msgs are not added at this point because they need to go via the journal scattering mechanism so that full segments can be removed.
slightly more likely to work
cosmetics and also removal of bitstring syntax as it seems far too modern, and actually isn't necessary because at no time do we need to deal with non byte-aligned binary data
the queue index deletes transient msgs on initialisation. This is rather elegant because it means that the delta gen fun used to seed the msg store does not generate any deltas for transient msgs, which means that the msg_store will take care of deleting transient msgs without any further interaction.
Wire up the tx_commit callback. Note no coalescing because no sync on queue_index because no fhc. Also added notes about the deletion of queues on startup.
Be a bit more clever on starting the message store and look up durable queues. However, it's still not quite right because queues can be deleted by other nodes in the cluster between extracting the list of durable queues in msg_store startup and the startup of queues themselves. This means that we can end up seeding the msg_store with msgs from queues that won't actually start up. You might think that we'd be saved by the fact that _process:terminate deletes the queue, but no, because fwics, _process isn't trapping exits, meaning that the terminate won't be called (and most likely rightly so so that it doesn't upset mnesia's state) by the exit(Pid, shutdown) in amqqueue:recover. So there still needs to be some sort of fix somewhere and somehow
most of the rewiring is done. Need to sort out how to delete non durable queues on start up, which is a bit cyclical, as I'd like to not start the msg_store until we know which queues are durable and which aren't, but we also can't start the queues until the msg_store is running. Fun.
added publish_delivered/2 which deals with adding a message, when the queue is empty which we already know has been sent out to a consumer, so it's really just a case of writing to disk the message, and index pub and deliver entries iff the message is persistent
publish/3 -> publish/2 because the IsDelivered bit is always false when called externally. Also rework requeue, because with the ability to indicate that persistent msgs will already be in msg_store, we don't need to call msg_store:write for persistent msgs, which means that we can also avoid the call to msg_store:remove that would have happened in the call to ack
it starts up again
Added ability to seed the msg_store. It's a bit hairy.
Bug 20768: Accept a protocol header with 0-9 or 0-9-1 only, and disconnect otherwise
Maybe done. Maybe time to start hacking out mq and dq. Maybe.
factorisation and application of DeMorgan
in preparation for commit, need to be able to indicate in a publish that persistent msgs have already been sent to disk
cosmetic
tx_publish and tx_rollback done. Only tx_commit to go...
Requeue turns out to be vastly more elegant and predictable than in mq.
Remove demo extension, and clean up the makefile.
merge default into bug21763
implemented delete. This is slightly less than pretty as, after doing the purge, we have to walk through the index on disk in order to pull up msgs which have been delivered and not acked
QA: erlang:trunc -> trunc
Default merged into bug21457
for queue delete I need to be able to discover the lowest and highest non-acked seqids thus splitting out this functionality
QA fixes
a couple of full list sorts were unnecessary and should only have been max or mins
Well, it was beautiful, but it was also wrong. Firstly, purge needs to return the count of the msgs purged. Secondly, it needs to remember to purge msgs and indices on disk that are in q1 or q4.
given the way in which the vq works, the removed tests were unnecessary. For example, in store_alpha, q1 *must* be empty unless one of q2, gamma and q3 is non empty. As such, to determine whether the alpha goes to q4, we only need to test for emptiness of q2, gamma and q3, not q1 aswell. Similar logic holds for store_beta
merging in from bug 21368
Merged bug21762 into default
rollback transactions on queue termination That way we don't leave garbage - transactionally published, but uncommitted messages - in the message store. Also, we we can get rid of the pending_commits state wart in disk_queue. That is possible because both tx commits and queue deletions are issued by the queue process and tx commits are synchronous, so there is never a chance of there being a pending commit when doing a deletion.
Beautiful!
cosmetics
Added ack to vq. Realised that ack no longer needs the msg itself, so there've been a few associated changes in queue_process.
gee, can you tell none of this has been run yet?
tidying of the beloved msg_store
Prefetcher has priority over q1. However, we actually assume that the prefetcher does no work. The only other possibility is to assume that the prefetcher always completes, which can lead to q1 being pointlessly evicted to disk. Also, we stop the prefetcher as soon as have to reduce our memory usage, and at that point everything should work out. So, when starting the prefetcher, we don't adjust the ram_msg_count, but as we drain or stop the prefetcher, we include the prefetched alphas in the ram_msg_count and then evict q1 to disk as necessary. Whilst this means we will have more msgs in RAM then we claim, the fact that we stop the prefetcher as soon as we have to reduce our memory usage saves us from ruin.
switching back to lists:min and lists:max as erlang:min/max do not exist in R12
altered the prefetcher to drive the msg_store directly, and wired into vq
having discovered that erlang:min and erlang:max do exist, swap them in in place of lists:min and lists:max where appropriate
adding len and is_empty. Renaming in -> publish and out -> fetch. A bit of moving around. Generally trying to work towards the mq API so that it can be dropped in
Fixed formatting for string-based errors
cope with suffixed node names in scripts
adding support for channel flushing and connection closing state in amqp_channel; fixing subscribe calls should be blocked if channel is closing; other cosmetic
on out/1, if the msg or its index are on disk and they don't need to be, take them off disk
And now actually make sure that on start up we load in the first segment from gamma to q3 if possible. Hence a refactoring here.
The calculation of the highest seq id in the index queue was wrong - it was simply returning the highest unacked seq id, instead of looking for the highest seq id ever encountered. This could have led to reuse of seq ids. We also need to know the total message count in the queue index which is the number of unacked msgs recorded in the index, and we also need the seq id of the segment boundary of the segment containing the first msg in the queue. This is so that we can form the inital gamma correctly.
merging from bug21762
major refactoring of amqp_channel's handling of messages
minor further corrections and modifications
merging in from bug 21368
fixing erroneous use of thunk(_) in spec to fun()
Tidying and refactoring of the variable queue, some documentation, and the removal of a lot of algorithmic bugs. No real new features, but code in much better state.
merging in from bug 21368
cosmetic
make msg_store responsible for sync'ing The API to the msg_store has changed: now instead of asking whether a sync is needed for a set of msg ids, and subsequently requesting a sync, we request a sync for a set of msg ids and supply a callback that is invoked when that sync is done. That way the msg_store can make its own decisions on when to sync, and less logic is required by callers.
merge default into bug21368
implemented out. This is getting pretty disgusting, needs some refactoring, marginally more useful variable names, and more API, in particular proper support for the prefetcher. Also, totally untested.
Rewritten the couting, hopefully, it's simplified now
Few more lines of comments
More work on variable queue
Demo extension.
Extensions mergers.
Added tag rabbitmq_v1_7_0 for changeset a62e87645861
Added tag rabbitmq_v1_7_0 for changeset b1089fcc31b7
Infrastructure for supporting piecewise spec extension.
Bump version to 1.7.0
initial hacking on the variable queue
Make init include in its result the next sequence id to use
removing bogus and flawed fhc2
just some fixes as a result of dialyzer, but the module is actually about to be deleted
Merged bug21696 into default
removing leftover pattern for handle_cast
setting closing flag in channel only when the 'channel.close' message actually gets sent to the server; ignoring all incoming traffic except 'channel.close' and 'channel.close_ok' when channel is closing; ignoring all further messages initiated by the application when channel is closing
Changes to amqqueue_process required to proove that the code works.
Memory monitor code.
merging bug21695 into default
auto_delete is no longer a property of exchanges
It's cluster-id that's deprecated, not app-id
Well fixed a few bugs in the fhc2, but it's fundamentally flawed by the fact that raw files can only be manipulated by the process that opens it. Thus the whole design is wrong because the server process can't be responsible for holding on to released but unclosed fhs.
mainly cosmetics
more work on file handle cache. However, untested, and liable to extreme change
initial work on new file handle cache. Public API not done yet.
auto_delete is no longer a property of the exchange class (protocol spec section 1.6)
Merge from default.  Resolved some conflicts due to bool->boolean in type specs, and a bad automerge in rabbit_reader.erl.
Merge QAd bug21738 into default
merging in from default
minor corrections to documentation that I failed to commit on Friday
Merge bug21222 into default
fix race condition in list_connections test when in a cluster
Added documentation. Also discovered that opening a file in append mode seems to be slower than opening it read/write and seeking to the end. However, further tuning delayed until after the file handle cache appears
when loading a segment, we should of course take into account the acks which have not yet made it into the segment file. Also fixed one further bug.
fixed some more bugs
Merged bug 21294 into default.
...and now some of it actually works
first cut at queue index. Untested, and uglier than necessary due to absence of file handle cache
Shuffled the config file element declaration so the debian defaults file will be able to override it
Changed location of the configuration file on windows
setting log dir for startup/shutdown messages
Merged bug 21682 into default
Merged bug 21273 into default
Default merged into bug21273
merge bug21669 into default
leave error reporting in rabbit:prepare to context also: - tabs->spaces - a few cosmetic changes - extract error handling & termination in rabbit_plugin_activator
Introduced realsbin directory
Reverted rabbit:boot to rabbit_misc:start_applications
Removed application starting changes, since these were causing a number of problems
Merged bug 20399 into default.
cosmetic refactoring
merge from bug 21397
merging from bug 21449
cosmetic
merging in from default
handle errors during connection establishment more gracefully
merging in from bug 21714
merging in from bug 21714
bump minimum OTP version for enabling dialyzer type specs We now depend on features in R13B01, namely the boolean() type.
s/bool()/boolean() in type specs since in R13B02 erlc spits out deprecation warnings otherwise
cosmetic
fix handling of precondition_failed
merge default into bug20399
Drivers can now force a connection without sending a gen_server reply to anybody. The terminate callback in amqp_connection selectively sends a connection.close depending on why it itself is exiting.
Merged bug21172 into default
Fixed spelling
merge branch heads
cosmetic
renaming channel_death_test to channel_writer_death_test; adding new channel_death_test, which can be run in both network and direct cases
updating from default
fixing missing return in handling other pid exit signal
Merged bug 21662 into default (debugging info badrpc).
display helpful diagnostics on badrpc error in rabbitmqctl
Default merged into bug 21457
do not ignore error on 'rabbitmqctl status'
Merged default into bug21172
Updated boot modification code to support catching errors
Merged bug 20399 into default
merging from default
Merged bug 20399 into default
Merged bug 20399 into default
produce error 2-tuple since that is expected by things like application:start
an internal error in the channel process now takes the entire connection down
minor os_mon fixes
renamed to vm_memory_monitor
qa fixes, some refactoring
turn the msg_store into a separate process
merging from default
merge default into bug21368
move constants to where they belong
Merged bug21618 into default
refactoring handling of EXIT signals in amqp_connection; other cosmetic
fixing race condition between writer0 and main_reader exit signals; other small fixes
merge bug21559 into default
Added rabbit:prepare to the generated boot file; removed call to rabbit:start when using a boot file
Added pod file to describe rabbitmq-deactivate-plugins
Changed target of reinplace calls to prevent macports converting symlinks to files
merge bug21670 into default
Merged default
Removed redundant -s rabbit from the startup args in Makefile
merge bug21023 into default
cosmetic
get rid of message attriburs in msg_store and msg_file
reader doesn't need trap_exit
drivers must not be aware of channel_state (forgot about close_channel)
replace msg_store:attrs with contains This is a step on the path to getting rid of message attributes in msg_store.
comment for create-plt make target
drivers must not be aware of channel_state
merge heads
merge heads
compact (well, delete, actually) files with no valid messages
on startup, compact files from which we removed unreferenced messages
english is better
inverting previous changeset...
overload open_file so it can cope with filenumbers and names, plus associated minor refactorings
merged bug21285 into default
removing rabbit_misc:absolute_path
broker now prints the location of rabbit.app on startup
Made sure the magic marker message cannot be produced by a client by forcing the guid to be the empty binary
rename load_messages to build_index since that's what it does plus some minor cosmetic changes
remove verify_messages_referenced check This can actually fail, e.g. when a message got ack'ed but the corresponding mnesia delete in dq hasn't been flushed yet.
get rid of message cache limit limiting the size of the message cache is pointless. Firstly, the ets memory info does not include binaries. Secondly, the cache is only holding onto messages which current queue processes are holding onto, so we are not actually leaking any memory, and the only cost is the cost of the cache entries themselves, which should be small.
merging from default
getting rid of the .last_valid_dialysis approach; better erlang termination on failed dialysis
refactoring: get rid of MnesiaDelete flag to remove_messages
using ?= operator
merging from default
taking care of renamed field in #amqp_error{}; making naming of variables from amqp_error{} fields consistent
taking care of renamed field in #amqp_error{}; making naming of variables from amqp_error{} fields consistent
renaming expl to explanation in #amqp_error{}
merging bug21650 into default
merging bug21560 into default
merging two defaults
merging bug21644 into default
remove extra_startup_steps from app config This should have been done as part of bug17880.
Merge bug21649 into default
do not call msg_store:attrs/2 from disk_queue:{phantom_fetch,prefetch} It turns out that we don't actually need the 'persistent' attribute. So this saves us a potentially expensive interaction with the msg_store.
fix typo
Added ability to provide configuration file to windows server startup too
Added facility to provide a configuration file to rabbit startup for Unix systems
Corrected behaviour of run-node so the boot file is not used
Added deactivate plugins wrapper in RPM packages
Added rabbitmq-deactivate-plugins to output package
Added unix and windows variants of deactivate plugins script; initial packaging changes
merge bug21643 into default
include channel# in unknown_frame error
Removed unused .boot generation target; added rabbit.rel to list of files removed on clean
get rid of closing_chpid process dict entries They were entirely redundant. It is now the case the the chpid process dict entries only get removed when receiving an EXIT signal from a channel, which is more obviously correct.
do not time out waitng for channel.close_ok, wait forever instead This is to prevent the following observable protocol violation: C->S: 1:channel.open S->C: 1:channel.open_ok C->S: 1:some command that triggers a channel close S->C: 1:channel.close (client waits for longer than server close_ok timeout) C->S: 1:channel.open S->C: 1:channel.open_ok
minor, mostly cosmetic, tweaks
merge default into bug20399
Escape *all* the double-quotes in an arg, not just the first one.
merge bug21346 into default
merge default into bug21346
merge bug21596 into default
Escape atoms as lists and binaries are.
merge default into bug21596
fix .hgignore regexps
handle timeouts in cpu_sup:avg1 gracefully Also, it turns out that the load avg is an int, not a float
merge bug21470 into default
small simplification
fixing some leftovers
changing {amqp, ...} reasons to #amqp_error{}
changing error reasons of type {amqp, ...} to #amqp_error{}
a little refactoring; fixing case patterns order
changing back a few usages of proplists:* to lists:key*; changing usages of proplists:lookup to proplists:get_value
using #amqp_error{} instead of {amqp, ...}
changing uses of lists:key* functions to proplists:*, where the key is of type atom(); changing parse_status to is_rabbit_running in rabbit_multi
new memsup code
wrapping some makefile vars in ifndef's
fixing basic.plt dependencies
fixed unused var warning
merge bug21529 into default
updating rabbitmqctl.1.pod
updating comment on list_connections in rabbit_control
using '' instead of '$none' for undefined username, printing nothing for undefined username; adding state to the default list for list_connections in rabbit_control
merge bug21583 into default
fixed R12 incompatibility in gen_server2
displaying (none) for '$none' atoms in rabbit_control; changing value for undefined usernames to '$none', not to confuse with none username
replacing ERL_DIALYZER with ERL_EBIN in makefile
removing unnecessary relinking of writer process
closing rabbit framing channels properly
framing channel is now started from the channel process and monitored by the main reader; refactoring exit trapping in amqp_connection; refactoring channel registration in amqp_connection
merging from default
refactoring open_channel: now mostly done in the channel process - simpler, more readable; refactoring of managing the framing channel to follow
Merged bug21616 into default
refactoring framing channel registration in the reader process; handling socket_closed exit in amqp_channel separately; linking framing channel with reader
merging from default
drop disk_queue/msg_store disk_only mode and all the mode switching and memory management logic that goes with it.
initialise msg_store ref counts via a generator This is more flexible than the previous ref_count function, allowing the ref counts to be obtained w/o consuming any memory at the supplying end in a variety of scenarios.
fixing dependencies in dialyzer-related make targets
fixing compatibility with latest dialyzer
Merged bug21563 into default
refactoring amqp_channel:rpc_top_half and rpc_bottom_half
Merged bug 21580 into default (stomp license)
refer to files by their number not their name This makes matching faster and keeps record sizes smaller. It also means we can get rid of one bit of state.
minor tidying up: use symbolic record indices instead of numeric ones
api tweak: pass durable queues in list rather than set lists are more pleasant than sets in APIs, plus in our use we have a list to start with.
change guid to a binary, using the md5 of term_to_binary The main motivation is to reduce the memory and on-disk footprint of the guid from ~34 bytes to 16. But it turns out that this actually results in a speed improvement of a few percent as well, even for non-persistent messaging, presumably due to the memory management effects and the fact that 16 byte binaries are easier to copy between processes than the deep(ish) original guid structure.
refactoring: move dets/ets match into sort_msg_locations_by_offset
oops
don't attempt rollbacks on non-tx channels
rename prune_mnesia to prune since we prune more than just mnesia
Make licensing consistent and correct.
merging bug21533 into default
shut up dialyzer
refactoring of delete_empty_files giving it a name that describes what it does, and extracting recursion vestiges into caller.
generalise persistent flag to message attributes in rabbit_msg_store This is just a renaming exercise, but it turns rabbit_msg_store into a general purpose message store.
generalise persistent flag to message attributes in rabbit_msg_file
resolve msg_id type confusion rabbit_mixed_queue and rabbit_disk_queue see guids, not non_neg_integers.
perform term/binary conversion of msg body in rabbit_msg_file thus further generalising rabbit_msg_file
do not return body size from rabbit_msg_file:read it's not used anywhere and was cluttering the api Also, make type sigs more meaningful and do not include rabbit.hrl, thus underlining the general nature of this module.
big refactoring: extract msg_store from disk_queue The msg_store knows nothing about queues, or message structure.
fixing merge conflict
updating from default
merging bug21522 into default
rabbitmqctl now accepts -nodename
Qualified the exit from the channel0 process
merging from default
rename #file_summary_entry to #file_summary to match what we call the containing table
rename #message_store_entry to #msg_location to match what we call the containing table
Switched to using a file to hold the disk_only data. Also found a bug where vaporise was wiping out the disk_only data (both as a file, and when it was in mnesia). The result was that if the dq was in disk_only mode before being vaporised, it would refuse to start up again. Thus vaporise now pushes the queue back to ram_disk mode if necessary, after wiping out the contents of the mnesia table. Finally, all tests pass again.
the disk queue sometimes needs much longer to shut down safely if it's heavily loaded - up the limit to 5 seconds. However, I suspect something like 60 seconds is more likely to be realistic value
use a record in file summary
ensure that we fsync after copying messages across during compaction
commented on purpose of cache
sort files for compaction numerically
nicer rabbit_dialyzer:otp_apps_dependencies_paths
moving dialyzer stuff to src/rabbit_dialyzer.erl
Guarantee that any oppressed process reporting 0 memory use will get liberated.
Made the disk queue start up in the same mode it was last running in.
factor out sublist and disjoint tests
basic.plt created via erlang shell; fixing create_plt make target name
Shutdown III: Inline Vaporisation
another attempt at stop/terminate/vaporisation/shutdown/suicide/deathsquad
renaming of variables.
A couple of cosmetics - grab_msg_id went away, but tidied up terminate and vaporise - hopefully sufficiently that both Matthias and I are happy with the result\000
made dq:delete_queue a call, not a cast. This eliminates a race condition between queues being deleted and new queues with the same name being created and published to
Fixed the mistake Matthias spotted in recovery from crash (comment #211). Tested by deliberately breaking the compaction in a variety of ways and then coverage and startup and ensuring the correct code paths are taken.
made type signatures almost as useful as comments
Refactored the channel registration in the connection process so that it reads better and allocates channel numbers in a more sensible fashion. channel processes that die on the client are trapped and the connection process just ignores them, i.e. the channel number is not de-allocated, because that would free up the channel number and hence confuse the server. This bug requires 21522 and 21533 to land before this can be seriously tested.
refactoring of (no)reply1 to eliminate duplication
specs for msg_file
specs for rabbit_file_handle_cache
merging bug17880 into default
Don't 'chkconfig --del rabbitmq-server' when upgrading.
checking if required applications exist in specified ERL_HOME
Added shutdown statements to tests that were leaking processes
nicer enumeration of otp applications rabbit depends on
The multiplier for the memory thresholds should not be on the number of available tokes. In extremis, when available tokens is 0, this makes queues very likely to switch mode (bad, memory is tight), and when there are lots of tokens available, this makes queues less likely to switch mode (bad, memory is plentiful). Instead, we should be using constant offsets, based on the total number of tokens in the system.
comments on magic 2.5 scaling of memory report, and removal of unnecessary initial calls to report_memory
Before the magic_marker_msg was introduced, if the queue was entirely on disk already and was then told to go to disk_only mode, it would form a single requeue_next_n call, where the N would be the length of the queue. This would be detected by the disk_queue and become a no-op. Because of the introduction of the magic_marker_msg, that is no longer possible - we want the marker to go from the back of the queue to the front. As such, the N will at most be 1 less than the queue length, causing unnecessary work to be done.
improved dialysis
Introduced a closing state when the broker initiates the shutdown. This allows the socket reader process to wait for the broker to close the socket (or timeout) before stopping amqp_connection process. Squirrel the close reason away in the state of the connection process. The resulting EXIT message from the reader process is trapped and then the close reason that was squirreled away can is used as the EXIT reason of the amqp_connection process.
Read through all of Matthias changes, no problems. In here, one cosmetic, and one change so that rmf:read returns the MsgId off disk to be later matched. This is purely defensive.
erhm. > 5.7.0 is good enough
make type spec Erlang version constraint match that of the server Makefile
refactoring: move all the low level message file i/o into a separate module The details of how messages are encoded in files are opaque to disk_queue.
remove unused constant This was added in revision b48919ed4e12 for no apparent reason
banish ?FILE_PACKING_ADJUSTMENT from all but three functions The details of the message packing are opaque to high level code, as they should be. The TotalSize that code sees now is the total size of the message on disk, including all packing adjustments, which is all that is ever needed to perform all the necessary file positioning etc at that level.
cosmetic
cosmetic - mostly whitespace shuffling
refactoring: rename non-sensical read_file_hc_cache to read_file_handle_cache
refactoring: (re)introduce {ok, ...} return on open_file This allows us to replace the last remaining file:open with open_file. Also, extract binary mode settings and use them in both open_file and fh cache creation.
cosmetic: remove whitespace
Other is KO accidentally changed in previous commit
refactoring: extract reading of stop byte
cosmetic
cosmetic
refactoring: simplify match in read_next_file_entry this is equivalent since the read entities are unsigned
refactoring: eliminate code duplication in read_message_from_disk
refactoring: extract file opening, and simplify file:position calls
refactor: pull msg_location_dets filename construction into separate fun
cosmetic changes to shutdown marker code move it to the right place reorganise constants section
Use an mnesia transaction to record safely shutting down, and associated wiring on startup. Manually verified this all works.
Merged default into bug17880
sigh, merge
minor refactorings
cosmetic - visual separation of sections
dq: revert the table change to earlier on, so that recovery isn't as horrendously slow. amqq_proc: correct order of actions in delete_queue and document.
Merged bug21404 into default
more merging
superdooper. Recovery from crashes mid compaction tested, corrected, working.
Merged bug21318 into default
merge heads
minor refactoring make it more obvious that ReqRem will always end up being <= 0
Updated readme with fixed dependencies and code coverage
Merged default into bug21404
removed amqp_client dependency
Renamed modules once again, as Matthias suggested
cosmetic
merge heads - gratuitous shuffling
cosmetics - documentation
cosmetic: move things around
cosmetics - formatting
Proper supervisor, and renamed a lot of files
merging heads
Changes to memory_manager. Watch for change in overall amount of free tokens, not requested amount
source tarball needs the app descriptor as well
reference bug21489
Merged default into bug21311
Minor tweak to get the app descriptor to get created
Merged default into bug21311
cosmetic
Merged bug21517 into default
Merged bug21488 into default
Merged bug21408 into default
Updated application descriptor to use RabbitMQ AMQP Client as the name
Merged bug21515 into default
Fixed missing copy of the .hrl file
Added .app files to the ignore list
less noisy startup
merge default into bug21368
slight resequencing of core process startup - perform crucial check a bit earlier - start memory alarms as early as possible
Lots of things: 1) disk_queue: remove prealloc - fs's that support holes do it really fast and it buys us nothing. fs's that don't support holes get crippled. 2) disk_queue: make sure we fsync before closing. This is crucial. Posix is perfectly happy to close without flushing data to disk. 3) disk_queue: bug in recover from crash during compaction (*still* not tested), where we were opening with just write, not read+write, hence would have stomped over existing content. 4) memory manager: track oppressed processes and only liberate if they're reporting a memory usage 5% different from what they last had. 5) minor cosmetics to amqqueue_process. 6) start up guid earlier. Necessary because it is actually needed in recovery of queues.
Hacked out the lowrate stuff from memory_manager, and associated adjustments elsewhere.
Call to channel.close now sets the closing flag
cosmetic
cosmetics
Merged default into 21311
.app files now are generated by the Makefile
All QA comments relating to queue_mode_manager
Cherry picked old patch, now uses the app descriptor to get the version
Merged default back into bug21488
cosmetics
Somehow some io:formats got merged in from the SSL branch I think
QA-corrections to prefetcher.
filesync is unnecessary because tx_commit really is synchronous.
Merged default into bug21488
Connection level error in the direct case now is propagated to the channel process
cosmetic
cosmetic - MarkerCount => MarkerPreludeCount
documentation
Minor doc fixes.
Reworked handle_ch_down so that we detect early whether or not we should auto_delete the queue and only do rollback and requeue if we know that the queue isn't going to be deleted. ALSO minor refactoring in MQ with magic_marker
Merging default into bug21318.
Make stomp plugin working again, after SSL changes to server code
and of course the run length encoding should not include the marker message.
Tiny cosmetic, but also, we shouldn't include the size of the marker message in the inital size calculation.
As Matthias spotted, if we crash in the middle of a mixed -> disk transition then we potentially have messages in the wrong order. To fix this, we push a marker message into the queue before the transition. When the transition completes, we find that that marker message is at the head of the queue. If we are unlucky enough to crash during the transition then on recovery, we have to foldl through the entire queue anyway, so we keep our eyes open for the marker message, and should we see it, we simply move all that is before the marker message to the end of the queue, and then remove the marker. By avoiding putting any numbers into the queue, we neatly sidestep the issue of the disk_queue deleting all non-persistent messages on startup.
Better assertion about reason for channel closing
tiny bit of refactoring
cosmetic
A comment and a small amount of refactoring. Nothing outrageously exciting.
cosmetic: place functions in appropriate sections of the file
Merged bug21495 into default
Merged default into bug21495
Merged default into bug21404
Cosmetic
Cherry picked old version of bug21488 and applied it to reincarnation
Merged default into bug21311
merge in from bug 19356
merge in from bug 19356
Merged default into bug21311
Now you can supply the path to the OTP dist that you want to build the client with
merge in from default
merging in from default
cosmetic
cosmetic
merge in from default
pushed the encoding of the properties into the binary_generator. Plus associated types and changes to MQ.
cosmetic + assert major invariant of queue_process on reply and noreply
Removal of pointless calls to run_message_queue
made sure that messages that go through the MQ have binary properties added. This allows us to measure their size. The effect of this is that all messages that come out of the MQ have binary properties, even if they went in without. This might be controversial. The only reason for doing this is that otherwise, we'd have to convert-to-measure twice, once on the way in, and once on the way out. If people feel strongly about this, please yell.
Merged bug21493 into default
Merged bug21493 into default
Merged bug21493 into default
cosmetic
cosmetic
Everything outstanding on MQ. +prefetcher:stop. Also give DQ more time to shutdown (well, give everyone more time to shut down...). And tx_cancel => tx_rollback in MQ and DQ
Merged default into bug21493
Merged bug19512 into default
Savepoint, need to look into another bug first
cosmetic in MQ. Refactored purge and requeue in MQ. Spotted that read_ahead was back in DQ. Also got noisier about reporting misreads in DQ.
Changed test cases to use the reduced-arity methods
Added overloads for start_direct, start_direct_link, start_network and start_network_link
Generalised the Method,Content variant as well to handle scenarios where a content-delivery might be synchronous
Added overload for start_direct
Added test cases to validate call functionality
Also check for a nowait field on synchronous records
handle_call interogates whether a reply is actually expected to choose whether to wait
Added code generation of is_method_synchronous
Added synchronous flag to json for methods that have an associated response
Application of Matthias's patch. Can't find any faults in it, and the tests all pass too. Code definitely has got shorter!
cosmetic
cosmetic
Got rid of all io:format calls
First cut of updated docs. Plus stomp binds to localhost by default.
Avoid running auto_test during packaging; no server will be available
Test script is now executed as os:cmd. God elp us with escaping.
Merged default into bug21311
Now the bundle archives have a version
merging in from default
merging in from default
surpious line, and don't hardcode /tmp
Added phony target so that dist target creates doc, source tarball and the binary archives
merging in from default
merging in from default
Merged bug21309 into default
Added test for bug 20390.
consistent field order
s/erlang:length/length
Merge bug21306 into default
Renamed include.mk to common.mk and documented its raison detre
Merged default into bug21306
MQ: length/0 => len/0
Merged bug21353 into default (encoding in rabbitmqctl)
MQ: Made run length encoding more obvious; Added comment about logic for starting up prefetcher; Tidied API for dec_queue_length and inc_queue_length
Put a default in for the payload field
Changed configuration names, as Matthias noticed
Startup and command line parameters are now correct, code coverage and docs are still old
Meged bug21455 into default
Avoid blowing away our svn checkout on clean. Instead, copy it on build.
cosmetic
merge bug21429 into default
cosmetic
merge in from default
Removed is_persistent from tx_tracking. Removed auto_ack_next_message as it wasn't needed as the one case where it was being used in mq was wrong. And some cosmetic stuff too.
remaining items from comment 92
Update the rabbitmqctl man page to cover the new escaping scheme
Reformat man pages, using more features of the pod format
handle_cache => file_handle_cache. Also switched to using the #message_store_entry record throughout.
Escape non-printable ASCII characters using a backslash.
Merged bug21467 into default (POD formatting).
english preferable to gobbledegook
All the below, done.
Stomp adapter is to become a plugin. Currently hackish, with hardcoded port/host, but works.
More cosmetics. Also, if the seek failed, it's probably safer to assume that we've not changed position. However, it's really expected life will stop pretty soon after anyway, so it's probably not too important.
cosmetic
Abstracted out all the read handles stuff to a separate module, and refined the API as discussed.
merge default into bug21429
merge bug21429 into default
cosmetic
preemptive refactoring and other assorted changes
more simplification of the table copying code and address "unused var" compiler warnings
done
renaming
Sorted out transactions within the disk_queue, ensuring that if they do restart that other data structures cannot be left partially updated, and can continue successfully, in particular, manipulation of ets tables within mnesia transactions.
Documented blocked return for amqp_channel:call/3
Could repeatably read zeros.
Deleted io format call
Split makefiles out a little more so that when you use the source tarball, all you need to do is run 'make test', provided that you have a broker runningi already.
Merged default into bug21306
Nuked lib_amqp
Ooops :-)
Got all tests working
correction of formatting of man pages
merging in from bug 21444 with the vain hope that 21444 does not need further work!
And another go. If the new node is a ram node then local_content tables are still honoured as to their own table storage type
mode => storage_mode in most places Also removed chattiness of mixed_queue on queue mode transitions
merge bug21180 into default
Add support for a global fallback handler; use it for the http2 examples.
Merged default into bug21309
The host name in gen_tcp:connect/3 is a list, not a binary
merging from bug 21429
oops. Need to support ram nodes which still have local content as disc_copies
Set mochiweb default port to 55672.
Update .hgignore for ./build and ./dist directories
merging from 21429
Refactoring as suggested. This has been tested by for local_content by patching 21368 and ensuring clustering still works
merging in from 21429
cosmetic -> with_queue_head => queue_head
merging default heads
Refactoring out code used in multiple paths through internal_fetch and internal_read_message, tidying of API.
tiny refactoring
Merged bug20013 into default (memsup support for OS X)
Merge default into bug21368
Merged bug19973 into default
Deleted all references to lib_amqp, still need to get rid of the actual module
Deleted some more stuff
tidying of memory estimation
remove ForceInCache at it's not been used since before the current prefetcher.
typo in docs in previous commit. Also changed internal_fetch so its result construction, which whilst not wrong, was at least confusing, and had unexecutable code in it. Associated changes elsewhere.
Made messages be marked as delivered during prefetch *before* they are passed to the prefetcher.
Started work on deleting lib_amqp
remove the unnecessary sync from tx_cancel. A cancel cannot be misinterleaved with a commit for the same transaction so it's not necessary.
(freebsd stuff) bug21432 merged into default
Well, this was a very very sneaky bug.
Hg overestimated its ability to handle a merge
Merge default into bug19973, resolving conflict
> You should just *replace* to_{mixed,disk_only_mode}_mode with set_mode, not make the latter a wrapper for the former.
Merge fixes from bug20342 into default
merging in from default
Removed the default setup of ERLANG_HOME
merge bug21426 into default
some cleaning up mainly remove the (now) badly named WasDiskNode var
eliminate unused var warning
merge bug21427 into default
it's a serial, not a guid
don't ignore errors
use new term file helpers
merge default into bug21427
use new term file helpers
introduce helper functions for reading/writing files containing Erlang terms
minor refactoring of signatures
stuff as according to QA.
merge bug21428 into default
merge bug21425 into default
Pretty much all the low hanging fruit. Need to check the ets access in txns in disk_queue and also deal with the clean shutdown and delivery bits.
100% code coverage of join. Also made in have 100% code coverage. The remaining out case I don't think can exist without manually constructing the necessary structure. I don't believe the API permits it.
merging in bug21427
merging in bug21426
merging in bug21425
merging in bug20013
merging in bug21428
merging in bug21429
merging in default
New branch for bug 21368
New branch for bug 21429
New branch for bug 21427
New branch for bug 21426
New branch for bug 21425
New branch for bug 20013
New branch for bug 21428
Merged bug21336 into default
Fixed entity escaping
Merged default into bug21336
Merged bug 21308 into default
remove outdated comment
Deleted code references to amqp_util, just the documentation is left
cosmetic
Merged bug20896 into default
Removed superfluous user and vhost deletion
Minor refactoring
Refactored the setup and teardown of the tests
Merged default into bug21308
Merged default into bug20896
merge bug21407 into default
rabbit.hrl and rabbit_framing.hrl now get included in amqp_client.hrl
Merged default into bug20896
Merged bug21419 into default
Merging bug21365 into default.
Updated overview documentation
start_direct only really works for a Rabbit server
Fixed dependency of the doc on the include path and got rid of line break
Merging bug 21366 into default
Merged bug21410 into default
Removed misc space
Python is /usr/local/bin/python on some unices.
Invoke make as $(MAKE) from within makefiles
Merge bug20463 into default
Merge bug20463 into default
merge fix from bug20342 into default
Fix an incorrect variable name in rabbitmq-env
Accidentally committed on branch "21365" (ie. not "bug21365"). Committing null changeset to switch branch name.
see bug21368 for details. bumping version required for specs, and making consistent requoting of STARTUP_SERVER_ARGS
Avoid complaining when sending to a closed socket.
merging in from default
making a comment accurate.
made memsup work on mac os x. Substantial refactorings. I will shortly move this out to another branch.
Ensure content properties are decoded.
...in which case the todo comment can go away too.
if memsup isn't runnig, we get back {0,0,undefined} from memsup:get_memory_data/0. Thus adjust maths to cope with this. In the absence of memsup, we don't hand out tokens at all, so everything stays in mixed mode all the time, and we can cheerfully run out of memory (another good reason for the manual pin_to_disk stuff).
Make sure the queue mode mananger can never tell a queue to go back to mixed mode when memory alarms are going off
Reworking of mixed queue.
corrections to amqqueue_process.
Changes to avoid having strings going to binaries going to strings going to atoms in the control. Also dialyzer spotted that multiplying by 2.5 can sometimes result in not-an-int. 'Atta boy.
adding mnesia threshold to rabbitmq-service.bat
switch to using with_exit_handler.
Removed extra_startup_steps from being applied at startup
A Matthias stipulated refactoring. Also, in testing found some issues with the prefetcher, found a couple of places where it being stopped wasn't being recorded properly but that wasn't the cause of the problem. Eventually found the cause to be the disk_queue attempting to publish to the prefetcher and getting back exit:{normal,_} instead of exit:{noproc,_}, which I didn't know could happen. To test:
More fixes to the queue_mode_manager.
Fixed some QA remarks
Completed edoc comments, made the amqp_client.hrl include the necessary server headers
Merged default into bug21308
Merged default into bug21308
mktemp takes a template argument on OSX :-(
removed pout and friends from priority queue as requested. Large refactoring of queue_mode_manager. Appears to still work but needs a rereading in the cold light of day!
Merged bug21406 into default
implemented
merge bug21066 into default
removed static netcat files, right now the tests are in python
Bumped requirement for checking specs to R13B.
Changed default target of Makefile to be package, in preparation for new build strategy from include.mk
merging in bug20978
Use /bin/sh for rabbitmq-script-wrapper, not /bin/bash
merge bug20342 into default
oops, 4 spaces, not 3
removing tabs
Merged bug21403 into default
case => if. This is the last of the corrections for the prefetcher from comment #8
Made the prefetcher only consider hibernation when it's fully drained the queue.
Rabbit automatically adds /ebin to coverate directory
Rabbit automatically adds /ebin to coverate directory
Adjust the prefetcher in light of the bug matthias discovered. Documentation updated too.
Merging default to bug20463
Restore the LOCK_FILE support, as demanded by rpmlint
Use a common init script for RPMs and debs
Change RETVAL when showing usage message to 1
Reconcile actions peformed by the init scripts
Remove the LOCK_FILE bits from the RPM init.d
Omit runlevel list in the LSB Default-{Start,Stop} comment
Reconcile LSB "Provides" facility name as rabbitmq-server
Add chkconfig preamble to debian init.d
merge default into bug21368
introduce #amqp_connection_parameters containing sensible defaults. This is used in all the amqp_connection:start* methods, replacing the bewildering variety of previou start* functions.
arrange methods into more sensible order
do not export amqp_connection:start_direct/3
add a few more default method arg values and changed *.ack.multiple's default from true to false, which is the more sensible (and less dangerous) default
merge default into amqp_0_9_1
merge default into amqp_0_9_1
Merge bug21367 into default
merge bug18748 into default
Use {active, once} to avoid being spammed by senders. Also coalesce input bodies into binaries periodically, to be more efficient about RAM usage.
Added notify_remote method, allowing a remote node to be notified of a hook
Changed hook function to be a {M,F,A} set instead
Reconcile the Deian and Fedora package Makefiles a little
When stopping rabbitmq server, kill any rabbitmq-owned epmd process
tidying up specs with dialyzer which was good enough to find one genuine mistake in the disk_queue.
merge in from default. All tests seem to pass.
few comments about how to run coverage
tidying
Channel now catches the exit of the writer and signals the reader explicitly. It then exits normally, thus avoiding the pointless and expensive formatting of its error message
Implementation of hook mechanism using ETS table for storage of hooks, along with test cases to validate functionality
Added license boilerplate
tabs -> spaces
tabs -> spaces
merge bug21335 into default
merge bug21335 into default
test roundtripping of large(ish) content as well as testing async_publish
increase timeout to prevent test from failing on tanto
deal with new #amqp_msg record in cast/3, not just call/3
minor refactoring
assemble fragments in correct order and handle the case where both props are available in both binary and decoded form.
minor test refactoring
merge default into bug21335
merge default into bug21335
merge bug21087 into default
bug 21305. Moving around targets to tidy up. Added phony common_package target. This is used only in the test_common_package target prereqs.
Split Makefile out into include.mk that can be packaged in the source tarball
Merged bug21202 into default
merging in from bug21305
use $(DIST_DIR) consistently
Adding ^deps/ to .hgignorE
factor out common termination handling
don't ignore Debug info in pre/post-hibernate hook return handling
refactoring of pre/post hibernation code to make it simpler and shorter
Rearranged the start* functions in the amqp_connection module
trimmed some fat from docs
broker testing environment is prepared in makefile
Made a whole lot of things private
merging from default
Fixed dependency on server sources and headers
Merged bug20602 into default
Bother, should have diffed before ci. I hate that RABBITMQ_SERVER_START_ARGS= line being in the Makefile but it should be dealt with in a different bug.
An evocative and inspiring bunny.
common package now gets built into dist dir and then exploded into deps dir
more documentation
documentation
make clean now deletes deps dir
Merged default into bug21305
Deleted debug statement
All done.
Merged bug21335 into default
Merged bug21335 into default
Ooops, added rabbit_binary_parser back into the commmon bundle
Started work on writing the edocs
21202 => bug21202
Merged default into bug21305
Merged default into bug21335
Merged bug21234 into default
Merged bug21234 into default
Applied patch for enabling coverage with a specific directory
Merged 21046 into default
Removed some transactions and made all transaction bodies idempotent. They were actually fine before: a) the rabbit_disk_queue table is local_content and b) only one process ever accesses that table - thus there is no reason why any transaction will ever retry. However, this change is probably still beneficial. The only slight loss is that tx-commit is no longer atomic (ref counting of messages in ets, not mnesia, was resulting in non idempotency, so moved outside the transaction). This means that you could have msgs in a tx committed, but the acks not enforced, in the event of power failure or other catastrophic event.
Added a helper function to make dealing with the crazy content record a bit more sane
Introduced amqp_msg record to be friendlier to higher level code
bug 20546. Just removing cruft which got missed in QA
change rpc timeout to infinity
Renamed to rabbit-mochiweb
Found out that you cannot source a header file from inside an archive, so basically what we're going to have to do is to explode the archive if you want to compile against it. Given this, it is probably a better idea to have it reside in a separate deps directory as opposed to the dist dir where it was previously located.
actually bother to verify certs!
modifications to the erlang client in light of changes to the location and structure of the certificates
Rename from mod_http to rabbitmq-http-server
Added server header files into the common bundle. Added the common bundle to the load path of the compiler so that you don't need to have the server installed to compile the client.
Removed start script
Added additional registration methods; removed hard dependence on crypto
Done. Testing the latency between the call to conserve_memory and when the msg gets processed shows this is benficial:
Merged registry functionality into default
Added Makefile for Mochiweb dependency
Cleanup of mod_http - start of usable test cases
Added manpage for rabbitmq-activate-plugins
merge in from 21087
Matthias wanted to be able to cope with the possibility that we get woken up without having a msg to receive. We have no idea if this is possible. Nevertheless, in the previous code, it would block waiting for a msg (mirroring OTP behaviour). Now it'll work, but we have to avoid a potential crash elsewher.
The bug was not as advertised (it actually popped up when merging into 20980). However, we should definitely make sure we receive at least 1 msg when coming out of hibernate, and in loop we don't care too much. Also, use now() to seed the rng as erlang doesn't do it for you (rng state is implicitly per process).
Merged bug20539 into default
Merged bug20539 into default
All done.
New variant of mod_http that uses a registry and removes RPC integration
Eliminated parsing of ls output
just making set_mode as a pcast in the disk_queue just like it is in the amqqueue
merging in from 21087. All tests pass.
Implemented. Seems to work well. Changed the design and behaviour of the backoff as discussed with Matthias over IM. Documented in comments, reproduced here:
Fixed lib locations and root wrapper mutation in macports
Added macports specific version of asroot-script-wrapper
Cleaned up Portfile, added rewriting for rabbitmq-env
Updated packaging configurations to handle new rabbitmq-activate-plugins script, along with its requirement to be run as root
Renamed activate-plugins to rabbitmq-activate-plugins; changed scripts to use rabbitmq-env to source paths instead of embedding the logic themselves
Corrected copy command for activate-plugins script
Packaging location changes for debs, macports, windows and RPMS
Patched all scripts to be able to auto-detect their directory, even when symlinked
merge in from 21234
just resorting .PHONY
Oops, would be useful if I made the cover targets work...
Removed some duplication.
If we don't do this then it means that scripts which call both run-node and start-background-node have to do different things for each of them wrt quoting of the RABBITMQ_SERVER_START_ARGS var, which is a pita. Thus it should always be requoted consistently.
merge in from 21234. Notice that rabbit_common.app needs to have the rabbit_net module from the broker in it.
fix call coverage versions from test_suites make target
merging recent from 21234 (really as part of qa of 21234... more still to come!)
a few Makefile tweaks
adding back test_common_package and run_in_broker make targets; renaming make target all_tests_coverage to test_suites_coverage; adding test_suites make target; other minor makefile changes
removed unnecessary cert creation from erlang client tests
it doesn't hurt to try to create the ssl server certs if we have the env var defined but the certs don't really exist
I think this is all right now. Note that we are creating certs on demand _for the client_ as it would be a silly idea to use the same certs for the server and client.
just merging in from 21234, will make work next...
Just merging in from default, will tidy up in a minute.
merge of heads.
Right, I gave up with trying to (ab)use an existing running broker - I can't figure out how to make the direct driver work there at all. A lot of the logic now looks very similar indeed to the Makefile in rabbit-tests. The trick I ended up using was passing lots more -s args to the broker startup. These are evaluated in order, which means that you can do everything necessary, keep the broker in the foreground and see the eunit report. In order to get the exit status for make right, I end up having to tee the output which upsets formatting a little, but it's really not all that bad. The alternative is to push it into a variable and then grep for failures on that, but doing so blocks all output until after the process terminates which is not good, and also does even worse things to formatting.
merge bug21243 into default
Factored out ebin root from rabbitmq-server script (windows and unix)
fixing small bugs; making sure user in non_existent_user_test does not exist; making sure vhost in non_existent_vhost_test does not exist
updating changes in bug21234
adding negative test for user with no permissions
more suggestive make target names; introducing target for cleanup after tests while broker is still running - useful to remove test users, vhosts etc. from broker
merging from bug21234
merging from default
make sure queue is empty after consume in pub_and_close_test
refactoring and restructuring Makefile; updating README
Factored out RABBITMQ_EBIN
Eliminated error macro; changed location of error printout
Fixed handling of symlinks; compacted list comprehensions
Fixed variable name - changed from UNPACKED to EXPAND for consistency
fixing an inappropriate tab
fixing merge conflict; integrating test_common_package in all_tests; improving test failure check; removing all_tests_coverage
merging from default
cosmetic
cosmetic
Added simple test suite as a python script. make test now returns 70% of stomp code coverage.
merging from misnamed branch
don't include TimeoutState in status formatting ordinary timeouts are not shown as part of the status, so it doesn't make sense to show the special ones. Also, the code was incorrect.
removing symlink to server creation; changing the way the broker is run; tests are now run via erl_call to rabbit node
Removed ability to create certs. Construct which tests to run based on presence of SSL_CERTS_DIR env var
remove R13B-1ism
Create ssl certs on demand during tests in a suitable tmp directory which is then cleaned up later on. Built so can be overridden elsewhere.
merge bug21029 into default
Merge bug21250 into default
Merged default into bug21250
Merged bug21190 into default
Added list of modules to app descriptor
Added descriptor for common packages, read this to build the bundle
Added a target to build and test a common package for the client and server
Does not require installation, this is handled in the public umbrella
Merged default into bug21190
cosmetic
Added app descriptor for erlang client
removing some leftover junk
adding negative tests for invalid user, invalid password and invalid vhost; furnishing amqp_connection:start_network calls
Added dependency on include file in Makefile
Delete the plugin unpack directory before starting
Added Windows plugin management/support scripts
Added more conditional diagnostics
Reworked dependency expansion mechanism to not overexplore known dependencies; eliminated crash-dump when an unknown dependency is encountered
now handling EXIT messages from reader in handshake
merging from default
Merger
Paramterized the registration of the docroot to the registering module's name
channel and writer are now synced; removing test_pub_and_close make target; adding pub_and_close_test_ to network_client_SUITE; removing spammer from pub_and_close_test
Changed the request handling so that a web app has to register itself under a particular path
adding support for sync-ing the writer with the erlang client channel
Hid debug statement using a disabled macro
Updates to rabbitmq-server script to eliminate warnings about hidden files; ignoring generated directories
Added a rabbit_plugin_activator to generate a .boot file for Rabbit; changed startup script to use this file if available
Removed the existing rabbit.rel file, which does not appear to have been updated in many,many versions
Added License file
removing most of the changes since initial branch - keeping pub_and_close_test; keeping checking of closing flag
fixing a merge conflict; pub_and_close_test in a separate make target; previous all_tests make target renamed to test_suites and all_tests_coverage to test_suites_coverage; other smaller tweaks
cosmetic
merge branch heads
fix bug in the way ssl options are passed to tests Always pass them, not just whem  logging to files.
use included test certs
Prefetcher appears to be done and working well. None of the tests exercise it though because I decided to only start it up when in mixed mode and when the amqqueue_process starts to hibernate (otherwise, we start it up too soon, it doesn't make much progress and then we just have to shut it down anyway). However, other manual tests definitely exercise it and it seems to be very effective. Certainly can't make it crash now.
raise minimum required otp version for dialyzer support to R12B-5 since we depend on some new features, notably the 'timeout()' type.
IANA assigned port number for AMQP over TLS/SSL is 5671
Better to guard with is_list than to unpack intimately
Merge with upstream. Update start_network to support SSL options
merging from default
Merged bug20915 into default
merging from default
changing amqp_channel:get_writer_status to amqp_channel:is_waiting; fixing network_client_SUITE:pub_and_close_test; rewriting amqp_connection:get_channel_pids
sigh, another stupid bug which none of the tests catch and which I just happened to spot by reading the code. I am deeply alarmed by how many of these sorts of bugs I am finding and how many more there must be. OTOH, they do seem to crop up much more in code which has been changed substantially and repeatedly, though it's very possible that's just because I'm looking there more than elsewhere.
Fixed a bug in the mixed_queue which could lead to messages being marked undelivered when in fact they have been delivered when converting to disk_only mode. In truth, this bug didn't exist because there is no way in which a message could end up in that form in the mixed_queue which had previously been delivered. However, that will change when the prefetcher comes in, necessitating this "bug" gets fixed.
minor doc typeos and formatting
Added test coverage for stomp erlang code
make dialyzer happy
merging from default
code coverage is a bit more generic now, removed reference to hardcoded ebin directory
bare non-functioning skeleton of prefetcher. Essay written on design of prefetcher and its limitations.
mostly cosmetic changes but also: - use (default) 'undefined' value to indicate absence of ssl opts - consistently disambiguate start functions by guarding with is_list(SslOpts)
Stripping out old broken prefetch. Also reverted gen_server2 back to the revision at the end of bug21087 on the grounds that the min_pri stuff wasn't enormously compelling and added a good chunk of complexity. Also, I don't believe it'll be needed for the new prefetcher. All tests pass.
Update test suite to use new API and fixup bug in amqp_connection
Merge with upstream. Port can now explicitly specified
Merge with upstream. Clean no conflicts to resolve
Made the Makefile thread safe
merge bug21189 into default
Ebin directory was not be created from a clean checkout
No longer call cleandb from clean.
Fixed the commit bug. Really this should probably be in bug20470 but I really didn't want to have to deal with merging and the other information about this bug is in the above comments in 20980 so it's in here.
Spotted and corrected some mistakes where messages published to the mixed queue in disk-only mode would not be marked delivered even if they were persistent, thus resulting in redelivery on broker startup without the message being marked predelivered.
Merging bug19985 into default (again).
ok, limits on the cache, and on prefetch.
part 2 done. The mixed_queue is back to using only one queue. Start up time isn't too bad with big queues, and memory use is stable. In disk_queue, when iterating through the mnesia table, do the normal limited batching for removal of non-persistent messages.
Examples using amq.headers exchange
The use of the in-memory run length queue in disk_only queue is considered a show stopper, and rightly so. I personally don't like the idea of adding additional tokens to the disk queue to indicated queue switch because it can substantially increase the number of OS calls and writes and reads from disk and, eg, getting queue length right and memory size right is made a fair bit more complex. So abandon the two queues idea.
Examples of newlines in nonstandard places
Added target in Makefile to build an .ez archive
Well it's better. The memory size is now recovered at start up by doing a foldl on the entire queue. This seems excessive, but it does work. It only takes 75 seconds on my machine to get through 1e6 1024-byte messages, and 160 seconds to get through 2e6 1024-byte messages. So that doesn't worry me any more. Also, it's done in constant memory... ish[0].
Make cleandb no longer stop the node
Substantial changes to mixed_queue.
Merged default back into bug20539
Merged bug20937 into default
Added the option to run mod_http in development mode; added some documentation
Added diagnostic to docroot processing
Removed debug statement
Fixed hardcoded RPC path
Install now copies rfc4627 app to the server
Added JSON RPC handling
Initial debianisation
Add distclean target
Put the doc root back
Cleaned up the extraction a little bit
Added make target to run test
Moved old files to a new directory
Added docroot for testing
First working version of registering static content
Savepoint
Added a registration method
Add support for ssl listeners in Makefile for ERL_WITH_BROKER
Move ssl tests suite into tests folder
Merge with upstream
Update examples Makefile to also generate .cer for Mono
Merge with upstream
Fixed bug when constructing ez files
Added package and install targets
Cleaned up the makefile a bit
Mochiweb core is now added as an archive dependency
Just adding a bit more testing really just to bump the code coverage up.
fixing dependencies in makefile targets
improved broker existence check
adding port number as optional parameter to start_connection; removing getting port number from env var
Initial generation from the mochiweb tooling (svn rev 102)
merging from default
adding pub_and_close_test in network_client_SUITE
fixing merge conflict
merging from default
prefetch part 1. When a mixed_queue sees that the next item in its queue is on disk, it issues a low priority prefetch instruction to the disk queue, which populates the disk_queue's cache. Note that this shouldn't impact on memory as by virtue of the mixed_queue being in mixed mode, the contents of the queue are already accounted for in memory even though they were on disk. The effect of this is that when the deliver comes, it doesn't need to go to disk to read the message as the messages are already in cache. Testing:
introducing optional timeout parameter in close_connection
improved broker existence check
Added tag rabbitmq_v1_6_0 for changeset 6d49eaa2fc25
exits when node port env var cannot be parsed
Merged bug19847 into default
Merged bug19985 into default
Merged bug20917 into default
Merged bug20938 into default
Adjusted documentation
*cough*
...and with some testing and debugging, it might even work as described in the documentation!
additional documentation
Initial work to permit low priority background tasks to be catered for.
merging in from 21087. In testing, observed oscillation - with lots of queues, give 2 queues the same length such that they can't both fit in memory, and slowly trickle in messages. As each one gets a message, it'll force the other one out to disk (the other one will either be in the hibernating or lowrate groups). This is bad. Therefore, adjusted the conditions under which we bring a queue back in from disk to exclude queues that are either hibernating or low rate (don't forget, even a list_queues will wake up a queue and cause it to report memory). If you have two fast queues then neither of them will be in the groups of low rate or hibernating queues, so neither will be candidates for eviction so the problem doesn't exist there, instead, if they need more memory and can't fit in ram then they'll evict themselves to disk rather than anyone else.
adding infinity timeout to all gen_server:call s
*idiot*.
adding broker existence check in direct driver handshake
renaming amqp_connection:start to start_direct and start_network
introducing 60 sec response timeout in network driver handshake
length is never used in disk_queue, so removed
minor documentation fix.
Fixes from removing the non-contiguous sequences support from the disk queue that I failed to spot last night, but apparently came to me during my dreams. I have no idea how the tests managed to pass last night...
The mixed queue contains in its queue knowledge of whether the next message is on disk or not. It does not use any sequence numbers, nor does it try to correllate queue position with sequence numbers in the disk_queue. Therefore, there is absolutely no reason for the disk_queue to have all the necessary complexity associated with being able to cope with non-contiguous sequence ids. Thus all removed. This has made the disk_queue a good bit simpler and slightly faster in a few cases too. All tests pass.
port number is now specified in environment variable
removing process_flag(trap_exit, true) from start_channel in amqp_connection
setting trap_exit flag for connection process; handling reader exits in amqp_connection
added requeue_next_n to disk_queue and made use of it in mixed_queue:to_disk_only_mode. This function puts the next N messages at the front of the queue to the back and is MUCH more efficient than calling phantom_deliver and then requeue_with_seqs. This means that a queue which has been sent to disk, then converted back to mixed mode, some minor been done, and then sent back to disk takes almost no time in transitions beyond the first transition. The test of this:
removing unnecessary default value overrides in method records
connection now signals the channels that it is closing and waits for channels to flush; channel now blocks messages for delivery when signaled that it is closing; adding publish and close test
found a bug in the memory reports in combination with hibernation in that if a process comes out of hibernation, then does under 10 second's work before hibernating again then it'll only issue a memory report when it goes back to hibernation, thus it'll always claim to the queue_mode_manager that it's hibernating. Thus now, when hibernating, or when receiving the report_memory message, we set state so that when the next normal message comes in, we always send a memory report after that message. This ensures that when a process wakes up and does some real work, the queue_mode_manager will be informed.
Sorted out rabbitmqctl so that it sends pinning commands to the queue_mode_manager rather than directly talking to the queues. This means the queues and the queue manager can't disagree on the mode a queue should be in.
lots of tuning and testing. Totally rewrote the to_disk_only_mode in mixed_queue so that it does batching. This means that it won't just flood the disk_queue with a billion messages, thus exhausting memory. Instead it does batching and uses tx_commit to demarkate the batches. This means the conversion happens as quickly as possible and does not exhaust memory. Dropped the memory alarms to 0.8. This is a good idea because converting queues between modes transiently takes a fair chunk of memory, and leaving the alarms up at 0.95 was proving too high making the mode transitions exhaust ram and swap to buggery.
oh look, another merge in from 21087
a) reverted the change to do_send which had come in when I updated gen_server2 to R13B1 - this was a change originally made by matthias to ensure that messages cast to remote nodes are done so in order b) Add guards and slightly relax name/1 so that it works in R11B5. All tests pass in R11B5 and manual testing of the binary backoff hibernation shows that too works.
(another) merge from 21087 (not 21097 as mentioned in previous commit)
All cosmetic (line length)
merge from bug21097
Pushed the binary exponential timeout / hibernate system into gen_server2. Adjusted amqqueue_process to use it. Added documentation. Tested thoroughly with explicit test module (not added), and full test suite, which all passed. Existing tests further up in this bug similarly pass and demonstrate code is functioning correctly.
renaming tests/ to test/; renaming test suite files to xx_SUITE.erl
moving test sources back to tests/; adding tests/Makefile; updating README; updating .hgignore; updating root Makefile; other Makefile refactorings; changing include_lib declarations that point to server .hrl s in all source files to point more directly - since rabbitmq-server/include is in the include folders list
EPEL no longer need this PATH setting, so get rid of it.
updating gen_server2 with latest from R13B01 in order to ensure this doesn't slip badly behind the shipped version.
Added documentation
 testing shows these values work well. The whole thing works pretty well. Obviously, converting a mixed queue to disk does take some time and the values are deliberately set low to save memory because on this transition, the disk_queue mailbox will go insane and eat lots of memory very quickly. But it seems about the right balance. I'll add documentation next
Reworked. Because the disk->mixed transition doesn't eat up any ram, there is no need for the emergency tokens, nor any need for the weird doubling. So it's basically got much simpler.
report memory: a) when we're not hibernating, every 10 seconds b) immediately prior to hibernating c) as soon as we stop hibernating
wip, dnc.
cosmetic
well if we're going to not actually pull messages off disk when going to mixed mode, we may as well do it really lazily and not bother with any communication with the disk_queue. We just have a token in the queue which indicates how many messages we are expecting to get from the disk queue. This makes disk -> mixed almost instantaneous. This also means that performance is not initially brilliant. Maybe we need some way of the queue knowing that both it and the disk_queue are idle and deciding to prefetch. Even batching could work well. It's an endless trade off between getting operations to happen quickly and being able to get good performance. Dunno what the third thing is, probably not necessary, as you can't even have both of those, let alone pick 2 from 3!
Sorted out the timer versus hibernate binary backoff. The trick is to use apply_after, not apply interval, and then after reporting memory use, don't set a new timer going (but do set a new timer going on every other message (other than timeouts)). This means that if nothing is going on, after a memory report, the process can wait as long as it needs to before the hibernate timeout fires.
merge in from 21087. Behaviour is now broken because the timeout can get > 10seconds which means the memory_report timer will always fire and reset the timeout - thus the queue process will never hibernate.
Done. In order to keep the code simple, the detection of naptime is done in reply and noreply functions. This means that the now() value there includes computation relating to the last message in. This is maybe not desirable, but the alternative is to wrap all of handle_cast, handle_call and handle_info. Nevertheless, testing shows this works:
When converting to disk mode, use tx_publish and tx_commit instead of publish. This massively reduces the number of sync calls to disk_queue, potentially to one, if every message in the queue is non persistent (or the queue is non durable).
Well after all that pain, simply doing the disk queue tests first seems to solve the problems. I don't quite buy this though, as all I was doing was stopping and starting the app so I don't understand why this was affecting the clustering configuration or causing issues _much_ further down the test line. But still, it seems to be repeatedly passing for me atm.
merge bug21060 into default
better exception tag
fix another off-by-one error
fold
Fix off-by-one error (discovered by Matthias)
cosmetic
merge, but it still doesn't work. Sometimes it blows up on clustering with "All replicas on diskfull nodes are not active yet".
Well, this seems to work.
and now clustering seems to work again...
changed disk -> mixed mode so that messages stay on disk and don't get read. This means the conversion is much faster than it was which is a good thing, at the cost of slower initial delivery.
just adding timing to the dump test
doh!
mmmm. It maybe sort of works. Needs work though
updating README
updating source_tarball make target; adding documentation on make targets in README
updating .hgignore; adding run_with_broker make target; other makefile tweaks and fixes; updating README
refactoring testing-related make targets; nicer all_tests make target; adding all_tests_coverage make target
merging in from 20470
Had been thinking about this optimisation for a while but someone mentioned it to me yesterday at the Erlang Factory conference.
updating .hgignore; moving tests sources and ebin dir to tests/src and tests/ebin respectively; fixing make *_coverage tests; removing make tests_network and tests_direct targets; other makefile fixes
Merge default into amqp_0_9_1
some more scaffolding for tokens
Changed reports so that we get bytes gained and lost since the last report.
memory size tracking was wrong on startup in disk mode for mixed_queue (and actually for mixed mode too, given that mixed mode starts up in disk mode, then converts, which maintains the same size).
merging in from 19662
Removed the dumb timer:sleep, and after testing, properly sorted out the mnesia clustering details. This means that wait_for_tables now waits for _all_ tables which means the bug that was requiring the timer:sleep has gone away.
merging in fix from 20470
Failed to either watch the logs or remember that the timer is cancelled on disk_queue exit
merging in the recent non-tx performance fix in bug20470
Right, whilst tx_commits were being coalesced, this was not done properly protect non-tx publishes from unnecessary syncs. As a result, performance, of say:
merging in bug19662 with reduced reverses
acktags in ack or tx_commit do not need to be ordered. Messages in tx_cancel do not need to be ordered either. Hence removal of quite a lot of lists:reverse.
merging from bug19662
without this, rabbit_disk_queue seems to refuse to start up if there are messages to be recovered, due to mnesia not being running fast enough.
only reduce memory size when messages are acked, not when they're delivered.
Tidying up before starting to play with tokens.
whoops, missed off a priority pcast.
Added ability to manually set queue modes. Also altered manager so that if you are in all mixed mode, and then set one queue to disk, and then call increase_memory_footprint, you will indeed set that one queue back to mixed mode. And vice versa with mixed and decrease
Added a time interval so that we report at a maximum of once per second. I guess the only reason for keeping the other counter which is the min number of messages the process has received between reporting memory, is that it's much faster to decrement that counter and ceq0 than do the time calculation for every single message.
Switched to tracking memory size of the queue at all times. Removed use of process_info(memory,self()) for reasons outlined in the bug comments. The annoying thing about using a 10% change as the threshold is that it means you get many many more updates when the queue is empty because the % change is much greater.
These two fixes were done in 20980 but should really be in this branch.
annoying bug which appeared ages ago and has only just been squashed. Meant queues were being started up in the wrong mode when in the "middle" mode...
merging in from bug19662
substantially bulked up the tests for this bug. All tests pass.
fixed.
Convenience rabbit_basic functions.
timeout() is now built in. Redefinition is deprecated
Merge with upstream
Merge with upstream
A test. The problem really does exist. Not worked out how to fix it yet.
fixed bug documented in preceeding comment
Quite a horrendous merge of 19662. All tests pass.
comment typeo
get_cache_info ==> cache_info.
Just added a means to get the ets:info out for the cache. Testing shows that it does seem to get emptied successfully.
fixes
Added caching layer using ets which, when a message is shared between multiple queues, eliminates the need for multiple reads, provided the /next/ copy of the message is requested before the previous copy of the message has been acked. Should reduce memory pressure.
Altered API so that the disk_queue understands about #basic_message. This means that the mixed_queue avoids unnecessary term_to_binary calls. Tests adjusted and whole test suite still passes
Reworked reporting of memory requests so that the queues are proactive about deciding when to report. This isn't quite good enough though because GC means the memory size fluctuates too much. Need to switch to just grabbing the size of the messages in the queue.
merge bug19911 into default
slightly cleaner plt building dependency
always use the specified plt
better test error message, and cleaner exit
fix tags
Added tag rabbitmq_v1_6_0 for changeset b876b7f4049d
removing CR chars and stray tabs from Makefile
wiring things up
exercise tiny area of the code to try and suggest it might be a zero-sum game.
initial work making the mixed_queue keep track of some number vaguely related to memory use when it's in disk only mode which could be used to estimate how much more memory is needed to switch to mixed mode
cosmetic
Updated portfile for 1.6.0 release
tabs -> spaces
stop the commit timer if we're no longer dirty. This means it should no longer be a repeat timer because once it's set were either going to receive the explicit sync call or we're going to timeout on message queue at which point we're no longer dirty and so we'll then cancel the timer....
Done. Problem was needing to reply instantly if we're not dirty.
well, I think it works, but it's now much much slower.
removing two usused functions: publish_with_seq and tx_commit_with_seq
just merging in identical change from default
TMPDIR should be honoured by Makefile
fixing up my issues with tmp dir, hopefully once and for all. TMPDIR is a standard unix variable which should be honoured
removal of two unused functions from disk_queue. There are two more unused functions which I can't work out what to do about... Also cosmetic
preemptive tidying
sorted out specs.
comment
FunAcc0 ==> FunAcc
merging in default
more renaming and mnesia change to bat file
Renaming variables. All tests still pass
added batching for autoacks for general run_message_queue
adjusted HO-ness in deliver queue beautifully. Thus in the deliver_from_queue case, we now reduce n calls to mixed_queue:is_empty to 1 call and pass around the remaining count as the acc. l33t
More tidying
further discussion
post case/if discussion
mainly if ==> case in suitable places, but also some formatting
tabs and line length
fixed line lengths
Removing the failed experiment that was the odbc db queue
just removing tabs
adding add_broker_to_plt make target; fixing dialyzer warning
Added tag rabbitmq_v1_6_0 for changeset 7a268e5a5f0e
Added tag rabbitmq_v1_6_0 for changeset 1588df06f913
add package changelog entries for 1.6.0 release
merge bug19357 into default
undo undesirable change
merge bug20961 into default
renaming dialyze-all make target to dialyze_all
emergency merge of bug20958 into default further qa is still required
merge bug20979 into default
merge bug20976 into default
FIx for escaping of arguments
Fixing up escaping of commandline arguments
fixing dialyzer error in test_util.erl
fixing dialyzer error: invalid call to rabbit_access_control:check_vhost_access/2, without modifying the server project
fixing dialyzer errors in negative_test_util.erl
fixing dialyzer errors in negative_test_util.erl
fixing dialyzer error in call to rabbit_access_control:check_vhostaccess/2
adding dialyze and dialyze-all make targets; including -Duse_specs compile option
cleandb is now an rm -rf and build depends not on mnesia
Altered dependencies and added comment to the app
Yep, as I'd thought, the next_seq_id field was totally unused for anything useful. The code is thus now a good bit simpler.
Attempt to fix regexp in Portfile
Changes to version and checksums
Made mixed_queue track its length by itself. This avoids synchronous calls to the disk_queue when operating in disk only mode and seems to have substantially improved performance (in addition to avoiding a sync call, repeated lasting for the length of a queue (erlang stdlib) with a million+ items in it can't have been cheap). It now seems to be very much the case that when coming out of disk only mode, huge back logs are recovered reliably.
merging in from default
merging in bug20943
Fixing invalid call to erlang:exit/1
And suddenly it works. Testing showed that removing the crude limit UNSENT_MESSAGE_LIMIT made performance better. This then made me wonder if the unblock and notify_sent messages weren't getting through fast enough, and sure enough, using pcast is much better there. Also, turning on dbg:tpl showed that the common path in mixed_queue was to call publish_delivered (i.e. the message has been delivered to a consumer, we just need to record this fact). Making sure everything in there for the non-persistent, non-durable but disk-only mode is asynchronous also helped performance massively.
refactoring: rename "round robin" to "active consumers"
proper round-robining even when blocking This involved some substantial changes to the queue internal data structures - mostly by choice; the new design is cleaner:
well, I've made the acking for messages which are on disk but are not persistent/durable async, and it has improved some issues. But, if you switch to disk only mode, then allow, say 10k messages to build up (use MulticastMain) then switch back to ram mode, then it won't recover - the receive rate will stay very low, and rabbitmqctl list_queues will continue to grow insanely. This is very very odd, because querying the disk_queue directly for the queue length shows it drops to 0, but at least one CPU is maxed out at 100% use, messages continue to arrive, but the delivery rate never goes back up. Mysterious.
Took advantage of the gen_server2 priorities.
Added means to alter all queues and switch to disk_only mode in the disk queue.
emergency merge of bug20958 into default We point to the macports files of the default branch from our web site and they got broken with the merge of bug20333. This hopefully fixes that, but further qa is required.
Removed default shell, changed wrapper to work without default shell
Creates rabbitmq user with a default shell and uses correct arguments to the os x su command
just merging in default.
merge in bug20955
Two things have happened here. Firstly, the mixed_queue now functions correctly when being run in disk_only mode. This is _much_ more complicated than I had thought because of the fact that the presence of a message on disk has nothing to do with whether it is persistent or not. As a result early acking is required and requeuing operations are horrendous to say the least.
respect channel blocking when adding consumers
Merge bug20801 into default
Merge two default branches into one.
fix off-by-one error not that it really matters much
Use dist macro for building correct distribution versions.
Merge from bug20333 post verification
cosmetic
merge bug20940 into default
cosmetic
just committing as need to work from home tomorrow. Code in "interesting" state of flux. disk mode to mixed mode in the mixed_queue is annoyingly hard.
Made can_send/2 into can_send/3.
Using delayed_write batches together small writes and reduces the number of OS calls. This is a good thing and makes writing to disk much faster. However, we can have the situation where we are trying to read a message off disk before that message has been fully written out to disk. Therefore, we need to fsync at choice times. Because fsync is quite expensive, we want to call fsync no more than absolutely necessary. Thus we now have a 'dirty' flag which tracks whether the current file has been written to sinc the last fsync, and we call fsync whenever is dirty and the file to read from is the current file. This has also had some similar changes elsewhere in the disk queue. In short however, it seems this does work as I'm no longer able to reproduce reads of messages which return all blanks.
Logic failure which only came to light when trying to run the consumers as documented in bug 20470
can now switch the mixed queue between modes
tiny refactor
refactorings and code cleanup
Removed check for durable queues on transient exchanges
Merged default back into amqp_0_9_1
idiot
tiny refactorings
merge in default, post the bug20782 merge. All the tests still pass and the test in comment #4 of bug20782 also has correct behaviour.
merging in bug20782
merging bug19458
was just watching the logs go by when running tests and saw an explosion. Pretty basic typeo which hadn't been caught so far.
need to leave the disk queue running so that the rest of the tests go through
All tests pass. Including clustering tests. "ram-nodes" in clustering now have mnesia schemas, but the tables are created as ram tables (other than the disk_queue, which does its own thing and is either disc_copies or disc_only_copies, but that table is also local_content - we don't want to try and duplicate that state across nodes).
merge v1_5 into default
Remove old 1.5.5 tag
Added tag rabbitmq_v1_5_5 for changeset 7376596ad8a4
Ignore \0 bytes received while waiting for a command to arrive, just like \n's.
all java tests now pass. tiny (but significant!) bug in the mixed_queue startup post disk_queue startup.
Java functional tests now pass.
merge from default, which was more effort than I'd expected. Also, started working through the java functional tests, discovered one bug in the mixed_queue (cancel not observing durable flag) and one bug in the amqqueue_process (not committing txns if there's no consumer pid).
clean up tx records in queues when a transaction's channel dies
refactoring: bundle up all the data for a publish Passing this around as separate args was becoming a pain. Also, now it's easier to add more data items.
Queue recovery on startup now works.
added dump_queue to the disk queue. This spits out a list of the queue contents from the current read pointer to the end of the queue (i.e. messages for which we are waiting for acks will not be included). Of course, at startup, all the read pointers are at the start of the queue (i.e. not waiting for any acks) so this grabs everything. Some minor refactoring was involved in the addition of this function. Also, I needed to change my definition of unfold so that it's now both simultaneously an anamorphism and a catamorphism instead of just an anamorphism (i.e. the accumulator / 'initial' value is spat out at the end). This could be a hylomorphism. Can't remember...
adding {nodelay, true} to gen_tcp:connect/3 options; tested with small payload with test_util:channel_flow_sync/1
sorted out the disk_queue tests which had been left behind with the last set of API changes. By fixing them, discovered a bug in the disk queue. Also made the tests a little more rigorous, and discovered a the rdq_stress_gc test was not doing anything like what I'd wanted. Fixed.
Split out internal_declare/2.
removed the persister and modified guid generation to use a persisted serial id stored on disk
only write out persistent messages sent to a durable queue
merge bug20633 into default
merge v1_5 into default
Added tag rabbitmq_v1_5_5 for changeset 1b62d52840c9
merge v1_5 into default
Added tag rabbitmq_v1_5_5 for changeset f19934352b1f
merge bug20877 into default
align
Change from number to atom.
merge default into amqp_0_9_1
merge bug20654 into default
merger
make delete_binding return an error when the binding does not exist This required some refactoring in order to avoid duplication of the code that constructs #binding records.
be more specific in what to include in source tarball ...so we don't include backup files etc
follow naming conventions elsewhere in Makefile
(just for testing - switch to disk only mode)
fix typo
gen_server -> gen_server2, delete_queue calls purge_queue first in order to try and reduce horrible inefficient mnesia_match_object call. Also some refactoring and tidying.
merge default into bug20654
merge v1_5 into default
just merging in default branch
Brought out starting the persister to rabbit.erl. Also, reduced the file size limit to 25MB. The reason is that it was observed that start up was taking a long time simply because the files were large (100MB). Given that the file being written to is never GC'd, reducing the file size limit forces new files to be created more frequently, thus increasing the use of GC and thereby keeping file utilisation higher. As a result, less time is wasted at startup scanning over delivered but not-yet-GC'd messages.
ugh, managed to forget the need to compile before running dialyzer, hence just committed broken code...
o) fix up -specs o) add queue_delete - previously I was just (ab)using purge but this isn't right as purge won't eliminate delivered/unacked messages. o) refactorings and moving code around a bit
preemptive refactoring
duh!
Yup, basically, same bug in three places. Fixed. It all works.
Well, it /tends/ to work, but sometimes falls over, apparently trying to read a message which has been erased from mnesia. Mysterious!
IT WORKS! (for SendString and simpleconsumer)
It compiles.
Tiny changes to amqqueue_process, but mainly getting the mixed_queue api into proper shape.
just a couple more comments / TODO items.
Still WIP + DNC. However, deliver_queue is now rather funky, pretty much incorporating a HO fold. This does rather simplify matters as it means we get told inadvance that we need to produce a message only when we have a consumer for it, and at the same time we get told about whether this message is going to get an explicit ack, and we get an accumulator to play with as well. Pretty nifty - has simplified code elsewhere.
WIP, DNC. However, I think the basic control flow is right, although there are a lot of bugs. One of the bigger remaining issues is the correct routing of AckTags around, and no doubt there will be assumptions I've made which are wrong, but I think it's getting there...
Made deliver (in its various guises) also return the number of remaining messages
Added is_empty and length functions.
Merged bug20444 into default
Formatting only. Only just realised emacs was using tabs. Fixed.
helper method for not_found errors There was enough repetition to make it worthwhile
rename UME to AE
break ume cycles
carry 'mandatory' and 'immediate' flags through to UMEs
refactoring of API
Wrote the mixed_queue. This is totally untested just now. This module makes decisions about when to hand off to the disk_queue and when to hold messages in RAM. Both UnackedMessages and the contents of Transactions are still held externally, by the amqqueue_process as they need to be associated with channels. Currently there is no way to create the initial state, nor make transitions between the two different modes. But in theory, it should work ;)
So the mnesia table now contains next_seq_id. This means we can cope with gaps appearing. There are now two forms of publish, tx_commit and requeue. The first forms behave as before, with contiguous seq_ids. The second form (_with_seq(s)) take either a n extra seq arg or in the case of a list, a tuple in which the desired seq_id is mentioned. This can always just be the atom 'next'. The invariant on these lists is that the seq_ids are always ascending. Thus requeue now effectively takes a mapping: [{{msgId,oldSeqId} -> newSeqId}].
Just adding a comment which was missed out some days ago.
fix type spec
add permission checks for ume configuration
rationalise publish/route result types
move publication logic, incl ume handling, into rabbit_exchange ...and make rabbit_exchange:simple_publish use it
Some initial reworkings, making sure all messages have a guid, and moving the persister flag around slightly. Also various weird comments appearing in _process.erl for me!
document support for headers exchange We forgot to do this bug 20152.
Added support for purging queues. This is done per the 0-9-1 spec so we purge everything that hasn't been delivered.
Added a call to compact at the moment we start a new file. This closes a hole where the GC isn't being fired soon enough on new files. Also turned on preallocation for new files.
Added tag rabbitmq_v1_5_5 for changeset 5dc463f43bb7
add package changelog entries for 1.5.5 release
several tweaks and corrections to qos test - more sensible var names - more obvious calculation of ratio - longer wait times (but fewer messages) in order to reduce timing   sensitivity - wait for consumers to start before starting producers, in order to reduce   timing sensitivity
merge v1_5 into default
merge bug20676 into v1_5
merge default into amqp_0_9_1
merge v1_5 into default
merge bug20767 into v1_5
Silence unused variable warning
Nuked message handler that deals with a message that nobody actually sends and sends the peer back a message that it doesn't handle either
Merged bug20579 into default
display node name and db dir on startup ...in a pretty and easy-to-parse way
Change to dependencies
Removeal of unnecessary includes
Merge with upstream
merge v1_5 into default
Merge bug20745 into v1_5
Merge bug20679 into v1_5
Merge with upstream
added phantom_deliver. This does everything that deliver does but it doesn't actually read the message. This is useful if the same messages are being tracked in multiple different queues (eg a RAM queue and a disk-backed queue) and you want to mark the message delivered without it being retrieved. It still needs acking in the normal way.
An implementation of the queue using database. This will only work with postgres - it really is impossible to make this kinda thing db agnostic. Performance is terrible, but it does work, and has an identical API to the rabbit_disk_queue
Reworking shuffle_up to sate Matthias's passion for beautiful code
Some cosmetic changes (erlang style function names) and improvements to documentation. Also, implemented requeue, and corrected bug in startup which would have lead to crashes if acks had appeared non contiguously prior to shutdown.
Don't package the INSTALL document
merge default into amqp_0_9_1
merge v1_5 into default
merge bug20702 into v1_5
merge default into amqp_0_9_1
merge v1_5 into default
merge bug20649 into v1_5
Made tx_commit take a list of seq_ids which are things to be ack'd. This means that some external thing should keep track of exactly what is in a transaction (this is already the case for publishes, it just needs to be extended for acks), and then present them for the commit. Also, fixed a stupid bug in the stress_gc test which was previously acking everything at once (albeit in a weird order as desired) which meant all files got emptied before the gc ran, not quite what was desired.
merge default into amqp_0_9_1
merge v1_5 into default
merge bug20678 into v1_5
Startup requires a match in mnesia per message we encounter on disk. This lead to a 22minute startup time for 100000 messages. However, by dynamically adding an index during startup to mnesia, and then later removing it, this is reduced to 13.5 seconds. Note however, that to test this with rabbit_tests:rdq_time_insane_startup() requires the disk queue to be edited so that it starts up in ram_disk mode, not disk_only mode as is the code default.
Add channel.open-ok's pre-deprecated channel-id field. I missed it earlier!
Cope with both 0-8/0-9 style and 0-9-1 style protocol headers.
Read revision from JSON spec, where present
sigh. I while ago I managed to commit in change to the Makefile
Added to the disk queue the ability to dynamically switch between disk-only and disk+ram modes. The disk+ram mode uses disk_copies for mnesia and ets for msg_location. This results in a substantial performance improvement (minimum 5 times faster), but is ram limited by number of messages. The disk-only mode uses dets and disk_only_copies for mnesia. This is much slower, but should not be limited.
cosmetic
Move outbound tap to saner location; take advantage of extra info at that point
merge default into bug20589
Add Default-Start and Default-Stop LSB init script lines
Revert. No idea why that ended up going straight into v1_5.
Add Default-Start and Default-Stop LSB init script lines
Set PATH to workaround case when escript is not in /usr/bin
Avoid try: ... except: ... finally: to syppoet python 2.4
Create user and group in %pre rather than %post
Remove duplicated username in useradd command
merge bug20471 into v1_5
merging in 20592
refactoring
add "unroutable message exchanges" feature
Fix up merge damage
merge default into amqp_0_9_1
Fixed unused-variable warning
merge default into amqp_0_9_1
merge v1_5 into default
merge bug20630 into v1_5
return the correct error (not_found) on exchange deletion in the process discriminate more on 'unbind' errors
just taking out the param of file handles
added a test
some refactorings. Not all done yet.
don't conditionally/auto-delete exchanges that still have durable bindings
added specs. ensured mnesia is local
rename clean_stop remove extra mnesia index - this has significantly improved performance!
minor improvement to documentation
copy + paste job extending essay
wrote a short essay
a bit more refactoring. Also, drop file size and file handle count in tests to stress those code paths more.
neater
more reformatting and refactoring.
well it's now much less readable. But at least the lines are shorter.
merge v1_5 into default
merge
cosmetic
stupid bug in start up code because I still fail to remember that messages only go away after being ack'd, thus we should redeliver messages.
I don't understand why I thought I needed to adjust sequences in remove_messages. The only case that code would be called would be from acks, and the effect would be to increment the read seqid. But this would require acking a message which hasn't been delivered, which is clearly insane.
*cough* *splutter* um. typo?
bitten.
altered api so that deliver returns the seq_id (actually, it's a tuple of {msgid, seqid}, but that's irrelevant), and that ack requires this seq_id (tuple) back in. This avoids extra mnesia work and makes ack much faster. Given that the amqqueue already tracks unacked messages, this seems reasonable. However, if not, back off to the parent of this revision.
Introduced sequence IDs internally. Sadly, because of the need to lookup seqids for each msgid in acks, acks are now very slow. Thus I'm going to alter the API so that deliver returns the seqid and then ack takes [seqid]. This should make things faster.
so I figured it was still going too fast. Fortunately, switching mnesia to disc_only has solved that problem...
moved the message location table to dets. performance is slightly worse than 10 times slower. This means that the test suite which used to take about 12 mins to run now takes about 2 hours. Looks like we could now be talking up to 40ms to publish a message. Interestingly, delivery is only twice as slow as with ets, it's publish that's taken the 10+times hit. Worryingly, the numbers show that performance per message is not constant, and wasn't in ets either. This must be the effect of buckets in both ets and dets filling up and chaining. The dets man page does say that it organises data as a linear hash list, which is a structure I know well, and I am surprised performance is dropping off in this way - maybe suggests poor distribution of their hashing algorithm or rebalancing.
removed file_detail ets table and converted all use into use of msg_location ets table. Even though this is slightly less optimal because of the loss of doing index lookups in file_detail, this is actually slightly faster due to not having to maintain two tables. Performance:
no sense running the same test twice
/byte figures so small could use a couple extra dp
just improving display of timing stats to make it easier to graph. This then means that it's much easier to test how performance changes with modifications to the disk queue.
merge v1_5 into default
merge in branch 20590
just merging in default to ensure I don't get too far away from it
merge in bug20354
merge bug20599 into v1_5
bringing in v1_5 before merge back
funny what you realise in the middle of the night...
handle negative priorities
merge bug20597 into v1_5
merge default into bug20354
leave system in clustered state ...when testing clustering. That allows other tests of clustering-related features to commence subsequently.
better way to start background node
remove silly dependency 'start' should fail when the node is already running, rather than killing it
Merged bug 20593
keep dialyzer happy - the spec for rabbit_misc:format_stderr/2 was wrong, - for rabbit_{control,multi}:start/0 we need to add a spec so we can   specify the no_return() caused by the calls to halt()
don't remove a queue's durable routes on node_down ...since that means we can't recover them when the queue re-appears.
correct default location of cluster config we inadvertently changed this in 1.5.4
Bugs fixed, and tests written. GC works. rabbit_disk_queue is functionally complete. However, fortunately, Matthias this morning changed its requirements so there are now several changes to make.
Backed out changeset 4ee61cc2d6f0 This was committed directly on 'default' in error.
fixed bug. GC does seem to work, though no explicit tests for it yet.
well, the GC is _written_ now. Not tested yet...
GC file movement is done, but updating the accounting information is not done. So don't use it!
merge default into amqp_0_9_1
Fix double-exchange-deletion bug
Use symbolic constants now available.
Implement recover-async, rather than recover, while we figure out how recover should work
Initial 0-9-1 port.  - exchange auto-delete no longer supported  - access.request no longer supported  - connection redirection no longer supported  - trace frames no longer supported
Initial 0-9-1 JSON, based on the 0-8 JSON + the diffs text doc
initial logic prior to compaction
Fix for that bug. Basically, mnesia wasn't being deleted correctly, which meant on the subsequent startup, it would report messages which we couldn't find anywhere, as they'd been deleted from disk.
tiny change to fix where the badmatch happens. Must be a bug in compaction as it would appear messages are being deleted early.
initial work on compacter. If you ack messages in exactly the same order as they arrived in, then files will be deleted correctly.
gah, committed the damn makefile again. Sorry.
removed some parenthesis
and now we have some substantial tests. This has already led to a good optimisation on reading, and found and fixed a bug in messages going to multiple queues.
initial stab at some tests (though still only 1 queue!). Also accidentally seem to have committed a change to the Makefile a while back so am undoing that.
added a stop and clean_stop api to help with tests/benchmarks
switched mnesia to an ordered_set. Seems to match performance with bag for startup and without the issues on fanout.
refactored out common functionality between ack and cancel
Document rabbitmqctl changes in the pod
changed the mnesia table to be a bag of MsgId -> {Q, Delivered} This makes startup MUCH faster, but delivery could be fractionally slower.
combine two writes into one and alter some file:open options. Profiling shows that file:write is by far the most expensive operation now. (roughly 140,000 to mnesia coming in at 27,000). So it looks like the next idea is to follow the advice in man 3 file and implement our own write buffer. Ensure we hit 4KB or more before calling file:write - though obviously chuck out early for suitable commits. This will also complicate deliver, tx_cancel and ack.
Trace activity on a per-vhost basis
corrected some bugs. Performance still isn't quite where I would like it to be. Need to do more profiling. Seem to be unnecessarily CPU bound despite use of ets throughout.
typeo
switched summary to an ets table too
switched back to ets for file detail. Also remember to call compact from tx_cancel.
only do compact after having ack'd all messages. This should prevent unnecessary compactions (i.e. we now have the ability to scan and delete all now-empty files before attempting any compaction).
Switch to two-arg version of get_env for performance improvement
oops, forgot to remove that io:format in terminate
err, we only need to attempt compaction if we removed something!
Mainly removing the unnecessary file:position in append. This wasn't needed as I can track the position myself, and profiling showed that it is expensive (which I'd kinda been aware of before). Having removed it, things are quite a bit faster - though still CPU bound with smaller messages. Next step is to convert dicts in state into ets tables.
did some profiling and brought out an mnesia lock much earlier. This means that for large commits, the resulting mnesia transaction is _much_ faster.
Generalize rabbitmqctl to set_env/get_env/unset_env
A couple more fixes.
refactored away from using the ets bag incorrectly. However, we're still cpu bound, need to do some profiling.
many bugs fixed. Still no compaction. However, performance is horrible, because the test which established ets:insert_new did what we wanted was actually flawed, and we can't do that, and ets:insert is not fast enough in a bag with many similar keys. What I want is to be able to say "yes, just insert this, I guarantee that whilst there are other equal keys in this bag, you don't need to go and try to find matching values". Hmph
initial fixes from testing
All but the compaction/GC done now. Not tested at all.
remove bit-rotten 'run_server' target This wasn't doing anything different than 'make run' in the rabbitmq-server, except it was broken.
add 'run' target to start erlang with a load_path that is right for running the erlang-client (ported from 'default' branch)
always clean up on channel process termination. Refactored the code so that this is more obvious, and thus caught the one (?) place where it wasn't happenig - handling of channel.close_ok.
add 'run' target to start erlang with a load_path that is right for running the erlang-client
Use longstr instead of (nonstandard) binary
Use AMQP table encoding for the data.
rabbitmqctl tap control
Initial solution. Remaining: documentation; rabbitmqctl interface.
internal_publish, internal_deliver, internal_ack done, but UNTESTED. publish will try and roll over to a new file if necessary. Ack has not yet been taught how to do compaction / GC.
Well, I think I can recover crashes that happened mid way through a compaction. Note this hasn't really been tested yet...
GRRRRRR. I marked the previous commit as branch bug19622, not bug19662. Sorry.
Seem to be able to reliable read and write...
remove/add files missed on previous commit
use wrapper scripts in macports
Added tag rabbitmq_v1_5_4 for changeset 9356dc3ec2a2
Added tag rabbitmq_v1_5_4 for changeset 5a3d301b27d8
add package changelog entries for 1.5.4 release
merge v1_5 branch heads
merge bug20552 into v1_5
merge bug20552 into v1_5
Forgot 'in place' option for sed.
merge bug20546 into default
wait forever
merge bug20527 into default
add some signatures
add some priority_queue tests
fix bug
small simplification
don't call into queue module and don't break its encapsulation
merge bug20461 into v1_5
Merge bug20526 into v1_5
merge bug20423
Use a backup extension and remove the file afterward
merge bug20518 into v1_5
make basic.qos test shorter, and assert something
merge default into bug20444
merge v1_5 into default
spell out difference in licensing for the spec json patch submitted by John Leuner
Cause exception to be thrown when socket closes or times out.
convert script home path to short name notation due to a bug in OTP that results in 'spawn' being unable to handle paths with spaces. See http://erlang.org/pipermail/erlang-patches/2008-August/000267.html
Correct name of table.
on windows, write to stdout in stderr to avoid buffering
Split out test compilation from main library compilation.
merging multiple heads of v1_5
merge bug20500 into v1_5
merge bug20460
merge branch heads
merge bug20454 into v1_5
Include generate_app in source tarball
Merge bug20516 into v1_5
Merge bug20454 into v1_5
Removed duplicate entries for /var/log/rabbitmq and /var/lib/rabbitmq in the spec
More sensible name for the macro and moved the definition to preamble.
Added RABBITMQ_SERVER_ERL_ARGS to rabbitmq-server.bat to be consistent.
Added RABBITMQ_CTL_ERL_ARGS into rabbitmqctl script
Use RABBITMQ_MULTI_ERL_ARGS and RABBITMQ_MULTI_START_ARGS in the batch file
Copy the initial wrapper script to build directory and then fix the path, instead of directly running sed on the source file. There is no need to run sed on init.d script, since we no longer use any paths that refer to /usr/lib.
recover exchanges/bindings/queues in per-item transactions Because recovering them in large, single transactions is incredibly slow, with complexity that is far worse than linear in the number of entries we recover, presumably due to the way mnesia represents transaction-local storage.
merge bug20455 into v1_5
oops
merge bug20462 into v1_5
make it more obvious that RABBITMQ_MNESIA_DIR is special
Update some 64-bit documentation
Split out the environment variable munging as described in the ticket, except for those variables which are derived from other variables.
do not use priorities for notify_sent and unblock since the benefit is unproven
fix bug
change representation from gb_tree to kv list which is much more efficient for small numbers of priorities; the common case.
document priority functionality
make in/2 insert items that are low priority and make to_list do something sensible.
another bug fix
fix bug
first cut at extending gen_server2 with priorities This just changes the representation of the message queue; the API changes are still to come.
Make all the packaged scripts cd to /var/lib/rabbitmq, and remove a redundant "cd" from the init.d scripts.
merge v1_5 into default
merge bug20414 into v1_5
Took qos test out of eunit suite
Follow advice of MacPorts committer
Major revision of the README. (Now in markdown syntax.)
Check in macports packaging contributed by Chris Pettitt
persister hibernation also changed force_snapshot to do a flush before snapshotting, which makes forced snapshots behave like ordinary snapshots.
merge v1_5 into default
Added tag rabbitmq_v1_5_3 for changeset 5ee5e2c0b64a
Apply changes from bug20348 on v1_5 branch
merge bug18557 into default this should have been merged ages ago
merge v1_5 into default
merge v1_5 into default
Added tag rabbitmq_v1_5_3 for changeset 3fd499569a57
Added tag rabbitmq_v1_5_3 for changeset cf139e6d1e96
add package changelog entries for 1.5.3 release
merge bug20410 into v1_5
Apply John's change
Added tag rabbitmq_v1_5_2 for changeset 7db73a31654f
Added tag rabbitmq_v1_5_2 for changeset 7ef8f34edf02
add package changelog entries for 1.5.2 release
Merge bug20329 into v1_5
Merge bug20352 into default
Use _locastatedir and _sysconfdir macros in all possible places.
Merge v1_5 into bug20329
Merged 20383
Merged 20327
Logrotate will report only errors and ignore anything in the STDOUT.
Test scripts I used to track down the recent issues
Adapt to changed error report record format.
merge bug20316 into default
Apply the effect of 3f31b55b8691 on branch bug20316
Move basic.consume nearer the queue.declare, to avoid orphan autodelete queues
cosmetic
Merge with upstream default
Cosmetic. Using a list comprehension instead of lists:foreach
Cosmetic. Its better to match on [] than on length(AList), makes the code more concise.
Cosmetic. Keep variable names as normalized CamelCase for consistency
Cosmetic. Move the ssl lines right after the tcp_listeners line, they're "logically" related
Uhhh... put back the full error message. I misunderstood the QA comment before.
cosmetic: break overlong lines
ensure that "ending ..." message is logged even on error
refactoring: use foldr instead of recursion
Avoid exposing internal state in error messages; ~n -> \n
Replace make_string_table with comprehensions.
Correct comment: buffering_proxy no longer exists (see gen_server2)
Use default_value/2 consistently.
Remove unnecessary overloads on *_header functions
Disabled starting the server in rpm packages according to fedora guidelines.
Fixed sed to properly handle rabbitmq.conf.5 and updated other man pages. /etc/rabbitmq is no longer owned by rabbitmq user.
Renamed man page for rabbit config
merge default into bug20316
Notes from Darien Kindlund on testing.
merge bug20374 into default
make it easier to add more exceptions to the 'warning' category in future
merge default into bug20374
More overlong lines.
crash when the reader/writer receives an unrecognised Erlang message
Avoid most egregiously overlong lines.
Untabify.
Remove vi runes.
merge v1_5 into default
merge bug20348 into v1_5
Merged 20345
prevent unwanted path expansion
Merged 20326
Merged 20353
Merged bug20326
Verified.
Verified
Special-case as a warning the relatively common abrupt-disconnection message.
merge bug20348 into default
merge bug20348 into default
Cope with change to guid API
Added proper PATH env variable.
also prevent path expansion in rabbit-multi
keep serial in separate process, to avoid persister bottleneck ...and move all the guid functions into a separate module
prevent unwanted path expansion
merger
Added tag rabbitmq_v1_5_1 for changeset 2eba20816126
Added tag rabbitmq_v1_5_0 for changeset 1a1ff5067bb6
Use %{_sysconfdir} to locate /etc. Return 2 on usage error in init-script. Use %attr to define proper permissions for the /var/lib/rabbitmq and /var/log/rabbitmq directories and use -c parameter instead of running additional usermod command in the spec file.
Use shorter names for sources in spec file.
Included fixes for fedora review. Remove %debian macro and used --nodeps instead. Renamed /etc/default/rabbitmq to /etc/sysconfig/rabbitmq as this is the default configuration file on rpm based OS. Use make -j if possible in spec. Removed not recommended tags (vendor and packager) and added macro that prevents rpm from building useless debug rpm.
Remove PATH variable from init.d scripts. It is not the subject of this bug.
Variables from /etc/default/rabbitmq can be later overwritten apart from NODE_COUNT. Don't use INITD_ prefixed variables.
Minor style fixes
Be consistend in using INITD_ variables in init.d script. Few style fixes in rabbitmq man page.
Moved main configuration from /etc/default/rabbitmq to /etc/rabbitmq/rabbitmq.conf. Updated man pages to reflect the changes. To avoid overwriting the variables those in /etc/default/rabbitmq need to be prefix with INITD_. Added checks in scripts to handle those cases. rpm and debian need to handle /etc/rabbitmq directory.
Use common wrapper for scripts in rpm packages. Fixed indentation. init.d script uses wrapper.
Provide common wrapper script that is used by all commands and requires root permissions to function normally. Also added PATH variable in init.d and use new wrappers.
Fix dialyzer spec for rabbit_net:send/2
Add Ruby example. Depends on support for connect_headers.
Make QOS happen at CONNECT time, which is a bit cleaner.
Remove tickets/access.request/realms; Add basic.qos support
Add 'Label' parameter so we can properly log SSL vs TCP listeners
Close the TCP sock if SSL upgrade fails.
Make error messages nicer and consistent with the rest of the codebase
Generate new example certs valid for 100 years
Merged bug 20179 into default
Merged bug 20260 into default
Cope with changes from bug20275
create v1_5 branch to supersede v1_5_1 branch
create v1_5 branch to supersede v1_5_1 branch
create v1_5 branch to supersede v1_5_1 branch
Merged 20288 into default
merge bug20321 into default
don't wait any longer than we have to
Got rid of warning
Implemented the changes that were part of 20275 in the server.
Merged 20275 into default
Changed qos test to mirror the java demo
Merged default into 18557
get rid of index on 'pid' field in rabbit_queue it's not used by any of our queries
Merge with upstream. All heads now work together
don't terminate channel processes abnormally for amqp errors since that causes unnecessary error logging
Add content-type to ERROR frames.
merge bug20103 into default
Merge with upstream
Merged with upstream
cosmetic: break some overlong lines
Added tag v1_5_1 for changeset 3c6f7b5e67ae
refine permission structure
Pass on more of the basic content properties headers in each MESSAGE.
merge bug20193 into default
more efficient locking
prefix all mnesia table names with 'rabbit_' and - get rid of plurals in table names - change rabbit_amqqueue to rabbit_queue - put table attributes in more sensible order
don't infer table name from record type in mnesia ops This is in preparation for prefixing all table names with 'rabbit_' in order to avoid conflicts with other apps running in the same VM.
Merged 20173 into default
refactoring
fix indentation
typo
turn rabbit_router into gen_server2 ...in order to protect it from the effects of long message queues.
anybody can do anything with server-named resources ...as long as they get hold of the name, which is strong
document new rabbitmqctl commands
merge default into bug20173
add forgotten docs for delete_user command
cosmetic: remove superfluous whitespace
remove merge conflict markers
Merged 20097 into default
Merged default into 20097, again
Bad conflict resolution
Merged default into 20097
Fixed hg tag file
Merged v1_5_1 into default
simplify resource access cache check_resource_access throws an exception on failed auth, which closes the channel. Hence the cache can be simplified to a simple list of {Resource, Permission} pairs for which authorisation has previously succeeded.
replace simple permission cache with lru cache, to make it bounded
clear permission cache before hibernating
merge default into bug20173
cache permissions in channel
replace list_{vhost_users,user_vhosts} with list_{vhost,user}_permissions
Added tag rabbitmq_v1_5_1 for changeset 0f3f3a44ca0c
add package changelog entries for 1.5.1 release
Added tag rabbitmq_v1_5_1 for changeset 2e6e4090d44b
Merged 19749 into default
better documentation of message counts
Merged 20099 into default
better documentation of message counts
cosmetic: correct indentation
better docs and error handling
merge default into bug20099 which involved a few conflict resolutions. The most complex of these was dealing with the termination of the limiter; we now unlink from it first so we don't get a spurious EXIT signal.
change a gen_server:call to a gen_server2:call for consistency with gen_server2:cast
merge default into bug19749
hook in permission checks
beginnings of permission admin
modify table structure in preparation for permissions
Merged 20071 into default
Merged 18557 into default
Actually run 'make dialyze'! and fix some type definitions.
Make use of start_{tcp,ssl}_listener again
Bring back start_ssl_listener/start_tcp_listener and make them call the renamed start_listener which is now intended private
It seems I don't have to define the record types recursively. So I can remove references to ssl's sslsocket record definition
merge bug20064 into v1_5_1
BUILD has been renamed to README
merge bug20125 into v1_5_1
add some comments
Renamed BUILD.in to README.in
Less restrictive pattern matching in debian/watch
ignore rabbit.app
don't try to dialyze rabbit.app ...it won't work
merge bug20152 into default
minor refactoring: more consistent signatures/matching in routing functions
refactoring to eliminate code duplication ...between topic and headers exchange routing
cosmetic and minor refactoring
merge bug20111 into v1_5_1
Merged default into 18557
Merged 20088 into default
The PDF requires amq.match. The XML requires amq.headers. Create both.
Implement routing for headers exchange.
merge default into bug20152
merge bug20155 into default
Use io:read('') instead of io:read("") to avoid a "prompt" of "[]" ending up in the output.
Depend on generate_app when deciding whether to rebuild rabbit.app.
Add "amq.match" builtin exchange; accept "headers" in exchange.declare; and stub out routing implementation for headers exchanges.
Updated POD (rabbitmqctl rename pid to node)
merge default into bug20088
fix bug in handling of writer exit
make the channel process hibernate after 1s of idleness to conserve resources
Echo config instructions after successfull Make of certificates
Merged 20141 into default
Merged 20141 into v1_5_1
Merge bug20035 into default
oops
Added required debian/watch file for checking latest source tarballs.
auto-generate rabbit.app module list
use halt() instead of init:stop() it's much faster and perfectly safe in these self-contained programs
A VHost is a binary, so we can guard against it without resorting to [{_K,_V}|_T] magic.
Specify {verify, 2} in the ssl test
Leave all ssloptions to be _entirely_ up to the user. Don't second guess the library consumer as far the ssl options are concerned at all.
Update ignore patterns
Commit the sample keys and certs for testing and a Makefile for generating them with openssl on linux
merge v1_5_1 into default
merge v1_5_1 into default
merge bug20121 into v1_5_1
merge bug20121 into v1_5-1
merge bug20098 into v1_5_1
merge bug20096 into v1_5_1
merge bug20111 into v1_5_1
Just use a proplist. A record is an overkill
Merge with upstream.
Instead of 3 function args, pass in one proplist of ssl options
Make use of rabbit_misc:start_applications
Replace the 3 ssl fields in the connection_state record with a single record 'sslopts'.
start_applications has been moved to rabbit_misc.erl
Merge with upstream
Better dispatching while formatting results in rabbitmqctl
Report node instead of pid in rabbitmqctl
Add dialyser spec definitions to rabbit_net.erl
Redefine type socket() in terms of rabbit's ssl_socket which is defined in terms of ssl's sslsocket
Re-write start_tcp_listener to take an additional mfa() argument. Use this from rabbit.erl to pass in the mfa's needed to create a normal tcp and an ssl listener.
The ssl_* lines were not properly indented
Change the style of the exports to match rest of code base.
Switched over to gen_server2 handling
Output file is given as an argument, do not use stdout.
Write autogenerated code to file instead of to stdout. To avoid generating incorrect code, remove the file on exception.
Moved user name to the end of the command.
Merged v1_5_1 into default
Merged 20089 into v_1_5_1
the #amqqueue.pid is 'none', so return self() instead
get rid of now-superfluous proxy_pid in channel state
get rid of buffering_proxy
fix normal termination case
first cut of turning rabbit_channel into a gen_server2
merge bug20088 into bug20099
Removed PATH variable from init scripts.
Use --gecos option in adduser to add user's comments field, instead of running usermod.
oops, meant to advertise this as an ordinary gen_server which it still is, since I left the gen_server:start_link in place.
replace gen_server:cast with gen_server2:cast in rabbit_limiter The limiter is co-located with channels but interacts with queues which may be on different nodes. It is therefore subject to the message reordering problem of cross-node gen_server:cast - see bug 19749.
merge bug19749 into bug20097 and replace a few new instances of gen_server calls/cast in rabbit_amqqueue with gen_server2.
merge bug19759 into bug19749 The former was the wrong bug number.
merge bug18557 into bug20097
replace all cross-node gen_server:casts with gen_server2:casts The latter is order-preserving, whereas the former isn't.
merge bug20088 into bug19749
turn queue processes into custom gen_servers to avoid long message queues that impact the performance of selective receive
merge bug20088 into bug20071
gen_server2.beam is needed at compile time ...so the compiler can check that any uses of the behaviour implement all the callbacks
cosmetic: use multi-line strings
merge bug19964 into default
All spaced out
Fixed some split strings
Cosmetic
Merged 20020 into v1_5_1
Merged 20020 into default
Fixed punctuation
merge bug19963 into default
merge bug19373 into default
Cosmetic
fixed pattern match in teardown test
Merged default into 19373
minor refactoring export {start,stop}_applications from rabbit_misc, so that other code, notably the Erlang client, can call them.
merge bug19625 into default
order-preserving cast
Put back matches for heartbeat and trace frames
reduce impact of long message queues on selective receives
initial version of gen_server2 This is the same as the R11B-5 version, except for the introductory comment and change in module name
Merge bug20067 into v1_5_1
Merge v1_5_1 into bug20067
Merge bug20082 into bug20067
If the client initiates the connection close, it will close the socket rather than waiting for the server
Typo
enable memory alarms by default on linux
Merge bug20033 into v1_5_1
Merge v1_5_1 into bug20033
Merge bug20082 into v1_5_1
Removed arch conditional on sed.
Generalize the rpm spec so that some values are substituted by 'sed' in the makefile. Default rpm release is for fedora. The only difference between suse and fedora are the dependencies (used files instead of packages in the former), location of init.d and final rpm name.
Removed bad log statement
Refactored read loop so that it handles a socket close explicitly
Wait for peer to close socket, timeout if this doesn't occur
Use default macros in sed instead of using hardcoded path.
Fix spaces
Define standard libdir macro in the makefile instead of overwriting it directly in the spec file for RPMS. This is to fix the wrong libdir macro under debian for x86_64 architectures.
RPM %files section only lists files that are not under /usr/lib/erlang/lib/rabbitmq-server-$VERSION$, /usr/lib/rabbitmq and /etc. The first two are handled by only listing the directories and rpms checks them recursively.
merge bug19344 into default
create branch for patch release
Added tag rabbitmq_v1_5_0 for changeset 609406a56270
merge default into v1_5_1 All the changes made on 'default' so far should go into v1_5_1. Which is lucky since we don't have to cherry pick.
create branch for patch release
Doesn't _really_ make sense to send {inet_reply...} on error.
Merge with rabbitmq.com repo
Merge with upstream
Make rabbit_net:port_command mimick erlang:port_command more closely
Remove the hardcoded ssl options, and read them in from the app env
simplification: use alternative 'try' form
Cleanup ssl_connection_upgrade a bit.
Closing the ssl socket already closes the tcp socket as well
Update calls to rabbit_net:async_recv/3 to send in 'infinity' instead of -1
Reverse the encapsulation of infinity timeout in rabbit_net:async_recv/3 We now call it externally with the atom 'infinity' and internally, send -1 to prim_inet:async_recv/3
Rabbit's ssl socket is no more namespaced
Rewrite rabbit_net:async_recv according to Matt's suggestion. Interesting way of shortening the entire story. I like it...!
crypto also needs to be started only if ssl_listeners are up
Change the way that ssl_listeners option is specified.
Rename rabbit_ssl_socket to ssl_socket. No other records are namespaced
Add rabbit_net to the .app file
Merge in upstream changes
tidying up, refactoring and some cosmetic changes
cosmetic: rename 'in_use' to 'volume'
optimisation: only notify queues that have had can_send requests rejected
destroy limiter when a channel becomes unlimited which results in far more efficient handling of subsequent deliveries
merge branch heads
don't leave the limiter behind when the channel terminates
add type spec for start_link
handle the "no limiter" case more obviously This is no semantic change since gen_server:cast(undefined, ...) returns 'ok'. However, it only does so because it catches the 'badarg' error thrown by erlang:send. It is probably more efficient to not attempt the send in the first place. Plus for documentation purposes, and to keep dialyzer happy, it is useful to state explicitly which functions are expected to be called on an 'undefined' limiter.
Merged 20061 into default
cosmetic
deal with limiting after consumer subscription
deal with race condition queues may get deleted between the route calculation and the queue lookup
create limiter lazily This makes an 'unlimited' channel as efficient as it used to be
make limiter keep track of all queues with subscriptions This is more efficient since it avoids the repeated (de)monitoring and updates to the limiter state.
merge default into bug18557
cosmetic
merge default into bug18557
Merged 2nd fix of 20047 into default
Removed unecessary unsubscribe, replaced with channel close
correct handling of normal termination this caused quite a few tests to fail
RPC server closes channel when it terminates
RPC client starts channel in init/1
Client and server queues are now auto_delete and exclusive
ensure fairness
Merged 20046 into default
Merged 20047 into default
work around OTP-7025 in a second place
include stack trace in errors caught by channel and catch throws too, which previously were not caught
Implement ssl_client_test so we can have ssl makefile targets
Deal with already_started crypto and ssl conditions.
Add clauses for creating ssl client connections.
Add ssl support to the amqp_network_driver
Extend the connection_state record to hold needed ssl info cacertfile, certfile and keyfile
Improve compatibility in the rabbit_net abstraction layer
merged bug20045 into default
undo accidental change
fix typo that prevented correct handling of RABBITMQ_SERVER_ERL_ARGS
saner state transition handling and assorted bug fixes
fix bug: make sure consumers blocked due to limit are dropped from State
handle transactional acks also: - simplify and optimise non-basic-get ack counting - don't talk to the limiter when there is nothing to tell, i.e. the   non-basic-get ack count is zero
Replace all network calls with rabbit_net layer calls.
minor simplifications
oops
refactoring
tidy some more comments
tidy comments
lots of tweaks and fixes - remove superfluous (or wrong) comments - notification and demonitoring always go together - don't change the in_use count when limit is altered - fix the limit_reached condition
fix typo
Added handler for monitor notifications
Don't double monitor anything
Put some monitors in
Got rid of superfluous PD read
Fix for multi ack bug
Merged default into 18557
update rabbit.app module list
add limiter to module list
merge default into bug18557 and add license notice on rabbit_limiter
Merged default into 19344
merge bug19560 into default
reformatting
remove old tags
Added tag rabbitmq_v1_5_0 for changeset 944f16a21984
another attempt at adding changelog entry for 1.5.0 release
remove old tags
Removed tag rabbitmq_v1_5_0
remove old tags
Added tag rabbitmq_v1_5_0 for changeset 36556d9796eb
Removed tag rabbitmq_v1_5_0
merge default heads
better description for user account
Added tag rabbitmq_v1_5_0 for changeset 1c58f25cd855
Added tag rabbitmq_v1_5_0 for changeset 8306356ab43c
add package changelog entries for 1.5.0 release
remove rabbitmq_v1_5_0 tag
Removed tag rabbitmq_v1_5_0
Fixed some QA remarks
merge bug20030 into default
Don't need to run that any more
For some reason ${misc:Depends} does not infer logrotate, so add it manually.
Removed schema check in debian packaging
remove more remnants of schema check
remove remnants of schema check in rpm packages
remove more traces of rabbitmq-mnesia-current
remove rabbitmq-mnesia-current the integrity check is now done on startup
deal with schema integrity check failure on startup by moving the db to a backup location, re-creating the schema, and writing a warning to the logs
Use PYTHON variable to allow overriding of python at compile-time
Forgot Copyright notice... heh!
Merge ssl_async_recv branch into bug19356
Hook in the new #rabbit_ssl_socket{} into the whole process.
Use rabbit_net layer in rabbit_reader.erl
Use rabbit_net layer in rabbit_writer.erl
Use rabbit_net layer in rabbit_heartbeat.erl
Add first draft implementation of the rabbit_net.erl module layer
Define rabbit_ssl_socket record.
remove superfluous settings
Added tag rabbitmq_v1_5_0 for changeset d185697aae1e
Added tag rabbitmq_v1_5_0 for changeset 7ed89ebb3e98
Merged bug 20019
don't react to memory alarms when memory_alarms is false We still register our alarm handler in that case, since that allows alertees to register as usual, but the handler doesn't remember alertees and does nothing on memory alarms.
Merge bug20002 into default
Make start_memsup default to false.
Update ignore to include VIM .swp files and generic .patch files
Implement start_ssl_listener, to complete ssl acceptor implementation
Add SSL Listeners startup section to rabbit.erl startup steps.
Add ssl_listeners support to the startup script
Added tag rabbitmq_v1_5_0 for changeset 609406a56270
Added tag rabbitmq_v1_5_0 for changeset 8c3ad21da715
New changelog entry for RPMs
New Debian changelog entry
Produce the list of rpm files on the fly
logrotate doesn't need executable permissions, explictly name the man pages to keep rpmlint happy.
Merged bug19987
merge bug19999 into default
merge bug19999 into default
More strict matching
More strict matching
Use default regex type in find
Use default regex type in find
Added distclean target
distclean should remove all vim, emacs temporary files
Merge bug19568 into default
Removed unused README.txt, if someone knows how to build rpms then that is (should) be already known.
merge bug19993 into default
separate out codegen targets that way 'make -j' won't end up buidling the same targets twice
Update 'po' each time we build the package.
Removed autogenerated file
merge bug19994 into default
merge bug19992 into default
Reverted last change, debhelper using distclean target for cleaning.
make clean should also remove compiled amqp_codegen
Debconf will handle the installation of logrotate script using dh_installlogrotate and it will add any dependencies it thinks need to be added. Updated standards-version to keep lintian happy.
Added missing =back directive
Added po-debconf support to satisfy translated debconf requirement. See man po-debconf for details. Fixed minor warnings given by lintian.
Correct README for the new /etc/default/rabbitmq conventions.
Update to new environment variables.
merge bug19989 into default
cosmetic
Typo
Fixed warnings reported by lintian. According to rule '6.5.4.2.3. Select/Multiselect' from Debian guide, descriptions shouldn't be questions.
Moved configuration script from postinsall to separate debian config file. This seems to work *only* when we first load debconf/confmodule in postinst.
provide an easy way to turn off memory alarms the rabbit start_memsup flag controls whether rabbit will start memsup. It defaults to true.
Merge bug19961 into default
cosmetic
Advice about macports py25-simplejson
don't start memsup via command line flags we start it programmatically instead Somehow I missed this mistake in the qa of bug 19852
merge bug19684 into default
Correct typos
merge default into bug19684
merge bug19914 into default
Add an example to the /etc/default/rabbitmq manpage
Set the page name and section correctly
Ignore generated diff file in debian packaging directory
Catch all the manpages, including any future ones.
Correct stupid mistake in installation target of Makefile.
cosmetic
lots of tests
handle case when connection is not fully initialised yet
prettier output in tests
cosmetic
correct error handling
merge default into bug19684
extend copyright year and cosmetic changes
merge bug19845 into default
merged bug18381 into default
merged default into bug18381
merge bug19974 into default
merge bug19974 into default
merge bug19974 into default
merge bug19975 into default
Update pods to remove copyright section and correct email address
Update copyrights.
Remove dots, for consistency
Update copyrights.
Another tweak.
Update copyrights.
Update rabbitmq-server.bat to use RABBITMQ_CLUSTER_CONFIG_FILE
Make RABBITMQ_MNESIA_BASE, RABBITMQ_LOG_BASE, RABBITMQ_MNESIA_DIR settable in batch files.
Fix more names in the batch files
Fix a couple of Makefile variable references (important to make cleandb non-dangerous!)
I guess I was confused about which convention to use. Remove RABBITMQ_ prefix from defaults entries in macports.
Update Makefile for new environment variables.
Correct a problem I introduced: make RABBITMQ_START_RABBIT depend on RABBITMQ_NODE_ONLY.
Only source /etc/default/rabbitmq if it exists!
rabbitmqctl tests
Add RABBITMQ_ prefix, and source /etc/default/rabbitmq. Update erlang code for the new environment variable names.
New manpage for /etc/default/rabbitmq.
Tweak to the way the makefile generates the manpages, in preparation for some documentation for /etc/default/rabbitmq.
Remove suspect whitespace.
John has assigned his copyright in the specification JSON file to the RabbitMQ team.
Merged bug 19962
rabbitmqctl pod updates, R11B-5 safe string handling
Removed amqp_consumer module
Cosmetic
Tagged gen_server call to open_channel
Got rid of unecessary string building
Removed unecessary flag
Got rid of need to differentiate between network and direct
Massaged module paramterization into something more manageable
Merged 19625 into 19373
Cosmetic
Fixed compiler warning
Merged 19344 into 19625
RPC server does not have to be a process
Incorporated some QA remarks
Merged 19560 into 19344
Somehow I forgot to reapply something from my patch stack
Refactored to make the flow test clearer
Shutting dialyzer up
Added catch for pre-fetch size
Added match for setting the global flag
Dead queue informs limiter
Merged default into 18557
Fixed compiler warnings
Merged default into 18557
Gave consumer registration it's own API
x86_64 rpm scripts now refer to /usr/lib64 scripts instead of /usr/lib. Added hack to the makefile, to fix the macros for x86_64 architecture under debian.
Merge bug19929 into default
Merge bug19888 into default
More intuitive name for the script
Use more reliable 'id -u' to correctly identify the user for the debian wrapper.
Use 'id -u' instead of not always working UID variable to correctly identify the user
Typo
Move the old mnesia dir to temporary unique place when schemas do not match.
Merge bug19889 into default
Display warning when rabbitmqctl is not run as superuser
merge bug19900 into default
merge default into bug19900
Got rid of compiler warnings
Merged default into 19560
Merged default into 19344
Add vhost parameter
Merge bug18381 into bug19684
Moved scripts to /usr/lib/rabbitmq/bin and few minor style fixes for the spec.
Merge bug19859 into default
merge bug19950 into default
Moving bgu19950 to bug19950, wrong name.
mnesia schema check script needs to identify correctly the nodename
Added test for log rotation when it cannnot create parent dirs, more informative exceptions.
Savepoint
rabbitmqctl output formatting %-encode queue names and exchange names separate columns with tab instead space characters anticipate vhost parameter
Backed out changeset 6ad1a9e059d0 committed on wrong branch
qualify various list/info functions with vhost
qualify various list/info functions with vhost
merge bug19754 into default
merged bug19758 into default
merge default into bug19684
merged bug19841 into default
merged bug19841 into default
Multiline strings are not permitted in JSON
merge bug19871 into default
fix typo
don't mention mnesia
merge default into bug19684 and adapt the new rabbit_control functions to use Inform
Merge bug19910 into default
add type spec
Merge default into bug19910
Merge bug19912 into default
Cosmetic
Merged default
Run schema check as part of tests to help coverage check.
Invert the case of all this - check that the schema is current rather than an update is needed.
Update the message shown on upgrade.
Change mnesia check target name
merge bug19912 into bug19910
get rid of compiler warning
write script errors to stderr
merge bug19912 into bug19910
remove 'error' tags in exceptions since we don't use that tag elsewhere
consistent display of errors in rabbit_multi There is some duplication of code in rabbit_control here, but imho it's too little to justify refactoring
simplify informational display and ensuring consistency also slight tweak to completion message
improve error output - consistently display errors as "Error: ..." - display command and args properly formatted when encountering an   invalid command
merge bug19395 into default
add proper callback handlers
merge bug19852 into default
some more tidying up
cosmetic changes and a tiny bit of refactoring
merge bug19899 into default
rename ensure_directory_exists to ensure_parent_dirs_exist since that is a better descript of what actually happens. Similarly, change the exception tag
Merge bug19860 into default
Merge bug19331 into default
Simplify mode calculation
Logging handlers attempt to create the directory to the log file if it doesn't exist yet. Added new test to include the case when no write permissions are set for the directory.
Remove use of list append, making it O(n) rather than O(n^2).
Consistency around trailing slashes.
According to Hubert it *does* make sense to ship these man pages.
Various cosmetic changes to the rabbitmq service
Cosmetic
Merge bug19713 into default
Added missing function message/4 which was previously removed
Merge bug19792 into default
Add some debconf questions so that an upgrade stands a chance of not breaking. Note that although the documentation suggests this should go in a separate "config" file if we do that then it tries to bring up the server first THEN configure the package...
Install the script. Note that shell uses "0" for true and "1" for false.
Merge bug19860
It's nicer if update_needed is just a function, not something that halts!
Create rabbitmq-mnesia-update-needed script
Merge bug19743 into default
Add specs.
Ahem, we need to return a result...
Moved license files and documentation to appropriate directory
Close the file after reading it.
Support get / set_check_interval and simplify starting.
Merge bug19801 into default
Rename rabbit_linux_memory to rabbit_memsup_linux
Change SBIN_DIR rather than move the scripts
minor simplification
(mostly) re-indenting also some tweaks: - make update message tag match the function name - simplify line parsing
fix our memsup registration The name must match that of the standard memsup, otherwise the os_mon functions won't find it, and neither will our existence check in rabbit_alarm.
re-indentation + minor refactoring extract & share memsup startup code
Rearrange the startup so we only start rabbit_linux_memory if there is no memsup registered already, export some similar API to memsup so that we can configure stuff at runtime.
Matthias has pointed out the existence of whereis/1.
Only start memsup if it is not already running.
Use timer:apply_interval/4 rather than timeout chaining.
Another stylistic change
Remove the 1M buffer.
QA points 5, 6, 7, 9, 10 (the smaller stylistic ones).
Actually having a comment here breaks things
Fix batch file
Remove man pages for anything other than rabbitmqctl.
If the user is not root, just invoke rabbitmqctl without any args. They should always get the help message, and always get the "run as root" message.
merge bug19826 into default
Fix rabbitmqctl output formatting
Only su to rabbitmq if the user is actually root (otherwise they will be prompted for a password which is incomprehensible). If they are not root, allow them to see help but otherwise fail (since if they run the real rabbitmqctl as a normal user it will talk to the wrong rabbit and again confusion will ensue.
Merge default (effectively undoing bug19790...)
Make comments a bit clearer
Move the generioc unix scripts into /usr/lib/rabbitmq/bin to discourage people from using them (since they're not very comprehensible to the layman in the Debian packaging)
Fix a bashism that causes FAIL on Ubuntu.
merge bug19790 into default
Start memsup programmatically rather than starting as standard and then killing it if we don't want it => doesn't mess up the banner on startup
Remove the MEMORY_CHECK_FRACTION define.
First pass at a simple memory supervisor for Linux.
Update tests, now using rabbit_control:action/4
remove cruft from rabbitmqctl
work around missing sasl_report_file_h:code_change/3
Tidy usage docs and parameter parsing
Merge bug18381 into bug19684, tidying
add some socket stats to info
use inet:getstat instead of prim_inet:getstat The former is slightly more public, though still undocumented
Differentiate between acks for basic.get and basic.consume
Now the channel sends the ack directly to the limiter instead of via the queue
Merged default into 18557
Got rid of all of the compiler warnings
List bindings and connections
Merged bug18381 into bug19684
Guarantee order of rabbitctl result columns Added default arguments for list_queues and list_exchanges
Add rabbitmqctl "quiet" mode
Minor fixes
Changed prefetch from call to cast
Got rid o the per-queue in-use capacity
Made set_prefetch_count into a proper gen_server call
Merged bug 19377
Fix typos
Fixed documentation
Fixed bug in limiter
rename node() type to erlang_node() because the r12b-5 compiler issues a "Warning: type node() is a new builtin type; its (re)definition  is allowed only until the next release" otherwise
merge bug19615 into default
Merged bug18381 into bug19684
Corrected the path to where rabbit logs
Incorporated QA remarks
Use exec when starting erl
Refactored the internal structure of the limiter
Produce architecture dependent rpm binary packages
Merged default into 18557
Merged default into 18557
First cut with some actual load balancing working
keep dialyzer happy my trick of preventing "function ... unused" warnings fooled the compiler but not dialyzer
Moved from python-json to python-simplejson. Fixed 'unicode' problem for auto-generated code.
Use simplejson.py API, move copyright info since comments are not valid in json
disable cross-node routing optimisation until we figure out how to make it work w/o breaking the effect visibility guarantee
Merge bug19522 into default
merge bug19251 into default
fix typo
refactoring
Savepoint
add connection_info functions
work around OTP-7025 also simplify the match slightly
add function to get hold of all connections (i.e. reader pids)
Moved limiter out of the queue state into the process dict
merge bug19573 into default
add rabbit_exchange:list_bindings/0
Added a test for qos, bit flakey but
First stab at basic.qos
Added rabbitmqctl interface for listing exchanges
Unmerge bug19331 from bug19684
Merge bug19788 into default
Squashed a whole lot of bugs
Added erlang as build dependency, remvoed python since it is a dependency of python-json.
don't use gen_server hibernate feature it was only introduced in R12 and we want to stay compatible with R11B-5.
Merged bug18381 into bug19684
Merged 19377 into 19344
Merged default into 19344, doesn't compile, but the answer is in 19377, but hg doesn't multiple merges per commit
Put the warning level up; this creates heaps of warnings, which should be fixed in a separate bug
Refactored makefile
react to memory threshold breaches present at startup
Merged default into 19251
Added message handler for trapped exits
Merged default into 19560
Removed queueing from amqp_channel:call/3 because it could get quite dodgy.
cosmetic rename for consistency with code in rabbit_exchange
add exchange list and info functions
move info types into common header file so we can re-use them
Added unit test for channel flow
Added publish call
simplify info and info_all API, and extend info item list - no overloading - info_all now returns a list of kvlists rather than a list of queuname-kvlist pairs - new info items for all the bits of the amqqueue structure
Removed memory queries, only report on selected queue details
merge bug19250 into default
Reinstated 19560
Recreated 19250
merge bug19730 into default
Merged bug18381 into bug19684
First cut at handling channel.flow in the Erlang client
Merged default into bug19331, QA feedback
merge bug19250 into default
merge bug19250 into default
Cleaned the Makefile. Goodbye generic_stage!
Revert to 0-9 definition.
Revert to 0-9 definition.
Do not include source files in the binary packages
Verified
info_all this is resilient to disappearing queues
beginnings of queue info API
merge bug18776 into default
Merge version 2 of 19468 back into default
fix signature mfa() is predefined as {atom(), atom(), byte()}
Merged 19623 into default
Merged 19587 into default
Merged default into 18776
Merged 19468 into default
Merge default into 19468
Alter signatures to the latest 0-91 draft XML
Alter signatures to the latest 0-91 draft XML, and support nowait
merge default into bug19250
merge default into bug19250
Merge two default branches into single one
Merge two default branches into one
merge bug19250 into default
merge bug19250 into default
merged default into bug19250
Added close handler to network driver
Started work on this bug, might need to add callback handlers in the driver modules to propagted this properly.
don't complain on shutdown when sending notify_down et al to queues
log *actual* listening IP & port This caters for o/s-assigned listening ports, i.e. when the given port is 0.
Merge bug18732 into default
Added new line to logrotate scripts, debian packaging no longer throws warning
merge bug19572 into default
Removed packages that are already set as dependencies of the others
hibernate writers With this in place I am finally unable to make rabbit grind to a halt due to garbage being held by idle processes.
Minimal version of build dependencies on debian
hibernate buffering_proxies My tests got stuck after about an hour, and the cause was buffering_proxies holding on to memory
Merge bug19552 into default
Merge bug19552 into default
Merge bug19382 into default
merge bug19468_channels into bug19468
hibernate some processes to conserve memory In my experiments I encountered situations where rabbit would not recover from a high memory alert even though all messages had been drained from it. By inspecting the running processes I determined that queue and channel processes sometimes hung on to garbage. Erlang's gc is per-process and triggered by process reduction counts, which means an idle process will never perform a gc. This explains the behaviour - the publisher channel goes idle when channel flow control is activated and the queue process goes idle once all messages have been drained from it.
raise memory alarm threshold The default 80% is just too low for many systems - I have less than that on tanto most of the time. It remains to be seen whether the new figure works ok for most users.
Removed check_tools script since Build-Depends will handle it itself.
Forgot about perl
Added missing build dependencies for debian
merge default into bug18732
Merge bug19489 into default
Merge bug19329 into default
Fixed typo
Merge default into bug19382
Removed unused variables in the Makefile
Spec no longer requires non-standard macros, include rpm-specifc files as sources instead of patch
Fixed QA remarks
Merged default into bug19250
merge bug19552 into bug19468_channels The former triggered errors in the latter
fix 'duplicate_next' error when sending messages directly to proxied process The buffering_proxy:mainloop was unconditionally requesting new messages from the proxy. It should only do that when it has just finished handling the messages given to it by the proxy in response to a previous request, and not after handling a direct message.
some explanation
wire up channels to rabbit_alarm We propagate changes in the high memory alarm status as channel.flow messages to the client. The channel.flow_ok replies are simply accepted.
make rabbit_alarm usable This now supports the registration of alertee processes with callback MFAs. We monitor the alertee process to keep the alertee list current, and notify alertees of initial high memory conditions, and any changes.
cosmetic
branch off for effect-less alarm handling so we can later experiment with different effects
merge bug19432 into default
cosmetic
Got rid of unecessary queue:is_empty
Added function for Rabbiter
Got into a loop, I blame hg
produce a nicer error message for common queue disappearance case
exit with a proper protocol error when commit/rollback fail
Set is the default
Changed index from ordered_set to set for durable routes
don't log errors during delivery If the target queue died normally we don't care, and if it died abnormally the reason is logged by the queue supervisor. In both cases we treat the message as unrouted.
Nuked a space
Used record wildcard match feature
Added wilcards to every argument field in binding record
Added arguments field to binding
maybe_auto_delete should always return ok
merge bug19332 into default
merge bug19332 into default
cosmetic
some minor formatting fixes
refactoring: never construct reverse routes/bindings directly
fix indentation and comments
inline delete_bindings/1 and also refactor indexed_delete to use a list comprehension instead of lists:foreach and return 'ok'.
rejig call_with_exchange We don't really need two flavours of call_with_exchange.
Removed superfluous comment
Don't hassle the HOF
Reinstated list_exchange_bindings/1
Changed select for has_bindings into a continuation
Refactored all of the exchange delete functions
Print error message when codegen cannot import json
Default binding should be restored in exchange module
Moved and modified documentation
Adjusted some of the exit reasons
Incorporated some QA remarks, added a test for this patch
Simplified has_bindings because it only needs to do simple select and count
Brought forwards delete function into loop to avoid delete_object wildcard issue when it is fixed in OTP
Run broker as windows service
Fixes for dialyzer
Merged default into 18776
Lock demotion
Further refactorings
Refactored call_with_exchange
Factored out route deletion with reverse lookup
Factored out re-entry condition
Fixed full table scan when deleting forwards routes
Refactored deleting forwards bindings
Makes better use out of the reverse routes when deleting
Minor refactoring of the continuation
Fixes for auto-delete exchanges
merge bug19485 into default
Merged bug19219 into default
beginnings of reacting to low memory conditions configure memsup and hook in our own alarm handler
Implemented queue.unbind
Added test for queue.unbind
Added queue.unbind method
propagate channel/connection errors when in closing state
merge bug18784
cosmetic refactoring
Fix for not cleaning up durable auto_delete exchanges properly
oops
modulate gen_server:call timeout when doing work in parallel When we fire off lots of gen_server:calls in parallel, we may create enough work for the VM to cause the calls to time out - since the amount of work that can actually be done in parallel is finite.
Simplications
Made better use of pattern matching in mnesia:delete_object/1
Fix for auto_delete exchanges
Reverse routes and durable routes now get deleted
cosmetic changes and some minor refactoring
Merged 19455 into default
disable Nagle
Binned resource() type
Removed e_m_t/2
rabbit_exchange:{add,delete}_binding/1 should not be exported
Truncated lines in this patch to 78
Swapped position of exchange and queue in binding APIs
Cosmetic fix
Dialyzer fixes
Make function match a bit tighter
Fixed bug with fanout routing
more simplifications
some simplifications
simplify select
Fixed bug with case handling of queue:out/1, queue:head/1
Fixed type signature
Got rid of no spaces after commas
Merged default into 18776
Added type signature for execute_mnesia_transaction/2
Removed code duplication
Removed errornous comment
Modified list concatination
Added a comment about the complexity of the mnesia:select usage
Revised full table scan comment
Deleted route_internal functions
delete_bindings should take a queue_name() rather than an amqqueue()
Replaced mnesia:delete/1 with mnesia:delete_object/3
Respellt the word synchronize, incorporated some QA notes
Implemented durable routes
Supressed compiler warnings
Backed out changeset 031a255683ee
Applied diff between the parent of this revision and the default branch to reapply separated out patchset
Renamed 19334 to 19344
Swallow spaces between key and value in frame headers.
merge bug19357 into default
Apply rpm-specific files as a patch, instead of directly changing the source tarball
Merged default into 19357
Merged default into 19251
merge default into bug19332
Cleaned up the Makefile
Fixed checking build dependencies in rpms while building on Debian systems. Unfortunately .spec doesn't have 'not' logic.
Deleted Arguments parameter in add_binding because we dont do anything with the args yet
Moved {add,delete} binding to exchange module
Merged delete_temp into delete_queue
Default binding should bind to the default exchange in the queue's vhost
Changed key type into binding_key and moved it to rabbit_framing_spec header file
Fixed alignment of the comment about the constant field
Append rpm-specific files to the source tarball. Cleaned up the rpm Makefile.
merge bug19164 into default
cosmetic
cosmetic
Use parse_status to correctly determine the status of the node. No need to print node's apps.
Added status command to rabbit_mutli, init.d scripts now use that command. Used status command in init.d scripts to check if the server is running before stopping it. Fixed various indentation problems in init.d scripts. Synchronized the init.d in Debian and RPM to behave in a similar way.
merge bug19131 into default
Grepped occurances of tickets
Grepped the source code for references to realms and removed them
merge bug19367 into default
Commented correct export statements back into the connection module
Applied Edwin's first patch without any modifications
Merged 19131 into 19357
merge bug19193 into default
Removed tickets and realms
Tweak README
Changed nowait flag from true to false for queue.delete
Branching off 19357 from 19131 in order to split up the patchset
merge default into bug19193
Refactoring of call_all_nodes/1
Use lists:foreach instead of tail recursion in rotate_logs command. Updated usage function() Reverted change in rabbitmq-server.spec that didn't belong to this bug.
merge bug19166 into default
Continue rotate_logs command even when the command on specific node returns an error. Display the error message in that case only.
Start the RabbitMQ server after adding it to chkconfig.
Fixed various QA remarks. Renamed rotate_logs_all to rotate_logs. logrotate will fail silently to logrotate if calling rotate_logs on any of the logs failed.
More ruby examples: broadcasting, unsubscribing
Return value of the RETVAL variable in init.d
merge bug19144 into default
Renamed startup.log, .err to startup_log, _err to avoid logrotation problems. This also removes the problem when the node is called startup. Same situation for shutdown logs.
Updated the license to reflect the current state. Debian packaging has the same license as the broker itself.
Moved changes to lib_amqp from 19131 to 19357
merge bug19200 into default
Streamlined the client, got it to a compilable state
merge bug19345 into default
Backed out changeset fed30851870b
Branched off from bug19131, I want to pull the last change from that branch into this one
Added better handling for when the other peer closes the socket
Removed setting tickets to 1 in lib_amqp
Added default field to consume
Merged default into 18776
Fixed dialyzer error
Removed a lot of commented out code
Added tag Aman-06-09-08_2 for changeset feb4ba878635
Fixed compilation error
Added tag Aman-06-09-08 for changeset f91997069bdb
All of the functional tests now pass, need to compare performace against default
Merge bug19200 into bug19193
Removed catch in append_file/2 since there is nothing to catch.
Create non-native debian packages
Just a little bit of cleanup
Split out direct and topic routing
Removed license needed by json.py since it was removed
Added python-json as a dependency to the debian/rpm packages
Removed json.py, it will be added as a dependency
Removed dot
Only debian/rules file needs to have exec permission
Reverted changes that accidentally got committed
Added tests to cover the changes made in last commit
Perform standard handler installation when original handler was not installed correcly or terminated with an error.
Moved log configuration to start/0, throw more informative errors
This is 10-fold improvement on the last version, still not right yet
Renamed logs_location/1 function to log_location/1. Added more test cases to cover problems with logging during startup.
Simplified the way we get logs locations, Proper checking for the right handlers. Added test case for log rotation when logging is turned off.
Added more test cases
some minor tweaks - list comprehension instead of lists:map - make clean_logs check the return of file:delete, and return ok itself - rename non_writable_files to make_files_nonwritable for clarity
Removed unused include
Better naming for types
Refactoring of the log tests
Added test suite for log rotation. Initialise log rotation in its own phase.
cosmetic
cosmetic
always log an error when append fails and don't log the error to the console
Use rabbit_log instead of error_logger
Typo
More info about the behaviour of rotate_logs command
tabs -> spaces
When appending the old log file fails always try to create the handler. This can happen when the file we append to is not writable. Fixed missing case clause.
Took route deletion out of the amqqueue module, put it in the exchange module
Now this is deleting the reverse route as well
Adding note to myself
Create suffix file even when the original one is empty or doesn't exist.
Merge bug17070 into default
Added few missing articles
Added unique constraint to prevent double routing
Fixed spec definition. Renamed name() to binary_name() because of the conflict with definition in kernel/include/file.hrl
Logrotate script calls init.d script instead of calling rabbitmq-multi directly
Update man pages with rotate_logs_all command
Added rotate_logs_all command to rabbitmq_multi. logrotate uses this command to correctly swap handlers on all nodes.
Merged bug19200 into bug19193
Reverted BACKUP_EXTENSION variable. This change belongs to bug 19193
Minor style changes
correct a few defaults, based on Tony's comments - there is no sensible default value for the reply-code in basic.return - '*.reject' should default requeue to 'true' so we don't throw away messages by default
fewer defaults - based on Tony's feedback - we consider MRDQ to be a mis-feature, so we shouldn't use defaults that bring it into play - it is illegal to bind to the default exchange, so we shouldn't make that the default - routing-keys should be specified in most cases, so no point having a default of "" - it makes no sense to have an empty queue name in 'deliver', and 'declare-ok'.
Saw some handlers so I deleted them
Merged default into 18776
All of Qpid's tests now pass
merge bug17070 into default
merge bug17070 into default
squash tiny bug
add a few empty-table defaults
support default empty AMQP tables
more default values also changed a few defaults to more sensible settings
Moved append operation inside init/1 in handlers' wrappers. Added comments, fixed various small things.
fixed bug in emitting erlang binary string
added more default values
Added wrappers around standard error_logger_file_h and sasl_report_file_h modules, because they were not expecting proper arguments in init/1 when swapping handlers. Renamed reopen_logs to rotate_logs.
Savepoint
Cleanup rabbit_exchange a bit
Removed Tabs
Removed access request, set tickets to 1, more consistent usage of lib_amqp
Merge bug19200 into bug19193
Used swap_handler mechanism provided in error_logger to correctly reopen_logs. This creates another copy of the handler which has to be manually removed. Apparently the first one in the list is the old one. Updated man pages.
Added optional argument that specifies the suffix of the old log file. Using add_handler and delete_handler because swap_handlers doesn't behave as expected.
Forgot to remove semicolon
Fixed qa remarks
merge bug19089 into default
Use postrotate script to reopen logs and sharedscripts option in logrotate. Removed .bak mechanism from linux/unix distros.
Merge bug19200 into bug19193
Added reopen_logs command to man pages
Merge default into bug19200
Merge the defaults
Merge bug17940
SCRIPT_HOME variable in windows points to the directory of the rabbitmq-multi.bat script
merge bug18994 into default
Merge bug 19139
Added reopen_logs command to rabbit_control
merge changes erroneously committed against bug18944 into bug19131
more restrictive signature for rabbit_misc:r/3
cosmetic changes
merge default into bug18994
Added logrotate script to debian and rpm packages
Merge bug17940 into bug19166
Remove man source files from windows package
Rename rabbitmqctl_real.pod to rabbitmqctl.pod
Remove man page for wrapper and use the same page as for rabbitmqctl_real. Update debina and rpm packaging to reflect this change.
Incorporated QA comments
merge bug18793 into default
Apply Rui Lopes' patch for content-type headers. I've slightly extended it for content-encoding.
Added required commands to the init.d script for rpm packages. Fixed various things in the spec file for rpm and made it more consistent with approved packaging guidelines.
added mapping which decides how to convert Python value to Erlang default value
unquote default values, so they became Python objects after JSON parsing
Updated rpm notes on building packages
Renamed the pod pages slightly.
Added 4 basic man pages. Rabbitmqctl_real does not contain info about realms and permissions since those are to be removed either way. Included pages in debian and rpm packages.
Deleted obsolete code
All of the Erlang client tests now pass
Some more fixes for QA comments
Reverting unecessary changes in rabbit_amqqueue
folded default user into default host
Fixing some QA remarks
Remove unnecessary method name from protocol_error
Special-case global=true: we don't implement it
Lifecycle unit test in erlang client now works
queue.bind now works
First cut with queue declare
Renamed the routing fields to keep the naming conventions consistent
Deleted spec reference to permission type
Most recently declared queue was returning the entire resource
Fixed another error in the specs
Linda is obselete now, Homepage is now regular field.
Put some spaces between the commas, left stuff that didnt get changed on this branch
Fixed specification for declare
Merged default into 18994
Merged 19135 into default
drop incremental dialysis it never worked particularly well and the dialyzer command line has changed in R12B-3 to break it completely.
Added vhost to binding spec
Saving my work, IRC interrupts :-(
Changed url for server's build page.
Create build file only with server build instructions.
Removed some references to realms
Added missing target to makefile
Savepoint for changing the routing structure
Fixed confusing comment
Added tag rabbitmq_v1_4_0 for changeset b0b80123a480
Propagate GNUPG_PATH properly; remove tag
Use %~dp0 to find the ebin directory under windows
Added tag rabbitmq_v1_4_0 for changeset 71b922193057
Added tag rabbitmq_v1_4_0 for changeset b6d60e85e6e9
Added tag rabbitmq_v1_4_0 for changeset 3b40c0f29551
Use dirname $0 consistently to find the ebin dir.
merge bug19069 into default
Move schema integrity check into the top of wait_for_tables.
Bug fix for basic-get, exposed by running qpid test suite
Freshen packaging changelogs
Merged default into bug18994
Removed some unused fields
Deleted a lot of stuff to do with permissions
Put the default bindings back in
Converted some tabs to spaces
Deleted superfluous qlc statement
Re-keyed exchange and queue persistence on the vhost
Notes (from Sean Treadway)
Correct termination condition in Ruby examples
Removed call to non-existent function in rabbit_multi
Merger
merge bug18752 into default
Reverted sync transaction to its previous state (QA note from Matthias)
Removed reference to rabbit_ticket module
Removed the transmission of the access request command in the test setups
Network test suite now passes completely
Savepoint for lifecycle test that now works without realms or tickets
Backed out changeset 35cf4476380c
Started work on removing tickets and realms, but this work may have to depend on bug17070
proper use of #realm_resource{}
minor refactoring of preen_realm
rabbit_realm:check/2 is run outside tx
cosmetic
cosmetic changes
Backed out changeset a764527adf12
Rolling back misunderstanding about how preening works
New changelog entries for 1.4.0
Migrate .hgignore from umbrella
More .hgignore entries from umbrella
Migrate .hgignore entries from umbrella.
Avoid copying the codegen directory's .hg dir when building a source dist.
Tightened up the code in rabbit_realm a little bit
Fixed some of the QA notes
Migrated branch bug18752
Adjust to life under the new umbrella.
Migrate branch bug18784
Migrate branch bug18732
Migrate branch bug17070
Migrate branch bug17070
Initial commit, from repo-rebase-20080703121916_default (e96543d904a2)
Initial commit, from repo-rebase-20080703121916_default (e96543d904a2)
Added extra wrapper calls to lib_amqp
Since 18550 landed, the path is different
Differentiates between hard and soft errors in the connection process
Fix for bug when you try to publish to a non-existent exchange that crashes the connection, network case
Fix for bug when you try to publish to a non-existent exchange that crashes the connection
Fixed type arguments in call to exit()
Ignore .beam files
Remove tailor detritus
Support binding during SUBSCRIBE. (Thanks to Artur Bergman)
Fixes to STOMP adapter that came out of some experiments I ran after talking to Sean Treadway.
Make the example actually *use* a durable declaration :-)
Apply Sean Treadway's patch.
Subscription RPC requests now use the standard top-half/bottom-half mechanism
Linked network writer pid to channel process
Converted tabs to spaces
Fix for bug in request queuing that assumed commands could be pipelined
Made reader loop tail recursive
Channel Writer process is now shutdown in the network case
Subscriptions can now be requested concurrently
Synchronous RPC requests are now queued up and dispatched serially
Bug fix that failed to detect multiple synchronous RPC requests
Add README.
Rename examples to be more OTP-convention-like
Add perl examples.
Use the erlang/rabbit source directory variable.
Avoid losing messages when the socket closes abruptly by calling rabbit_channel:shutdown/1, which nicely processes all the pending work before notifying us of channel closure.
Update to new type signatures.
Simplify and remove delays in the cb-receiver program.
Use string_guid instead of binstring_guid
Update to new 1.3.0 way of building gensyms/guids
Carl Bourne's test cases
Change Makefile to point at new hg relative path for rabbitmq broker.
"${ERLCALL} -q" to quit in Makefile
Better Makefile
Makefile fix, part 2 bis (no change in code though)
Makefile fix, part 2
Makefile fix and bug 17806
Use $(MAKE) instead of make.
Use -I to find rabbit hrl files, not include_lib
Transactions were implemented a few revisions ago.
Ignore .beam files.
Create ebin before trying to compile
More cleanup from tailor
Clean up after tailor's migration from darcs
Added tag Migrated to mercurial for changeset a28eea2c2a2b
[project @ Improve error reporting.]
Bug fix for connection close
Removed unnecessary function
Fix for strange handling of connection end
Added handling of the heartbeat timeout to the reader process
Fixed exit trap between reader and framing channel process
Fixed trap exit handling when channel closing is not followed by a connection close
Passing connection pid to handshake is unecessary
Removed unused frame unmarshalling code
Used refactored start_link API in rabbit_framing_channel and refactored the tcp read loop
Added rabbit_framing_channel as an intermediary for unmarshalling frames from the wire
Deleted print statement
Added test for basic recover
Changed the structure of a basic deliver that is sent to final consumer, added basic reject but left it commented out because the server does not handle it
Added assertion for basic get empty
Added return handler for basic returns
Added test for Basic.Return
Ditched next_delivery_tag
Removed acknowledgement message and implemented AMQP method on merit basis
Removed unecessary tx setting
Cleaned up a lot of commented out code, print statements
Upgraded to rabbit 200712231445 snapshot
Moved rabbit management stuff to separate module
Upgraded hessian version to 0.2.2, last version before management split out
[project @ STOMP transactions.]
[project @ Make user header keys start with "X-".]
[project @ Take advantage of ok assertion on rabbit_channel:do]
[project @ Use new rabbit_channel:do API]
[project @ Follow Matthias' latest API change, removing channel numbers]
[project @ License information at the top of source files.]
[project @ Comments and license information at the top of source files.]
[project @ Implement tickets and synchronous channel open and ticket request.]
[project @ Support DISCONNECT when not logged in]
[project @ Moved from CVS mainline to separate repository.]
Tailor preparing to convert repo by adding .hgignore
Changed rpc_handler from gen_event to gen_server
Fixed bug in init() of supervised event handler
Added supervisor behaviour for management
Added patch for java client
Added java interface to the rabbit_access_control module
Exception handling for rabbit management
Bug 17356: Add copyright headers since they're currently lacking
Bug 17356: Added simple tarball target.
Updated README
First cut of exposing rabbit_access_control via AMQP
Fix for notify_sent bug
Bug 17141: Clean up.
Bug 17141: Allow running the direct tests from the Makefile. This requires rabbitmq server from CVS HEAD (i.e. >1.2.0). See the bug for more discussion.
merge of '0e53ebaee463865755981a06f200b7fce3a65534'      and '7941af4b3c4d5de328a342abdcc3513bf8221949'
bug 17118: cosmetic changes to README also improved prerequisites instructions
Initial version of the Rpc client
Introduced integration tests
Renamed test modules to allow split into unit and integration tests
Rebased off 200710071940 snapshot, removed patch and rabbit_direct_channel, handles set_transaction messages from rabbit_channel
Refactored RPC client state
Added comment about eunit in README
Support for transactions in direct channel
Merged rpc test into files moved from test to src
merge of '75439caf7c745bc30810d141d45c5d8d413f9779'      and 'b3086899c0c2c062b46ab2983a5198163887697e'
Bug 17141: Add test coverage checking. Necessitates moving all erlang files to src/.
merge of '17bbed595128dcb0ebbc27ca60eadfa2dfafdeb0'      and '36e2647276522b817bc64882227180142d188720'
disapproval of revision '18de103015dd6f8e87c4165b0fa8381319169cf2'
Bug 17118: Add test coverage checking. Needed to move all the test code into src/ to do this as the cover library only looks for source in src/.
Bug none: Moving rpc handler to permit merging
Added initial test for rpc handling
bug none: minor code cleanup
Bug 17118: Create ebin directory if it doesn't already exist.
Bug 17118: s/rabbit/rabbitmq_server/ to find header files.
Bug 17118: Make server startup stuff more accurate.
Changed rpc/send to call/cast
Added README
Separated amqp_client from the rabbit tree
Initial checkin
Tailor preparing to convert repo by adding .hgignore
