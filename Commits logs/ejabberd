Handle mnesia_system_event mnesia_up when other node joins this (#3842)
Fix compilation warnings with Elixir 1.14
Runtime: Add Elixir 1.14 to the test matrix
Pass ssl options to mysql driver
Silent warning in OTP24 about not specified cacerts in sql connections
Container: Update link to the local example of CTL_ON_CREATE usage
Container: Add Composer Examples section
Container: Raise sections levels to improve legibility in GitHub web TOC
Add link in README to the ProcessOne Downloads page
Add link to ejabberd page at xmpp.org, which displays protocols from DOAP
Run "make doap"
Add details about XEP implementations to some protocol attributes
Support extended protocol attribute (#3915)
Run "make doap" to update ejabberd's DOAP file
Fix DOAP file logo namespace
Commit the generated DOAP file
Add some missing RFCs and remove problematic leading 0 in xep versions
Add DOAP script to Makefile
New script to generate DOAP file
Ignore /doc, generated by tools/check_xep_versions.sh
move spool dir to make it fully configurable per ejabberdctl.cfg (#3863)
Annotate captcha_cmd option, run make options, update man
Bump version
Update German translation (thanks to nautilusx)"
Support @VERSION@ and @SEMVER@ in captcha_cmd option
Update changelog
Bump default 's2s_timeout' value (#3653)
fix table creation on a running cluster (#3913)
Update Portuguese (Brazil) translation (thanks to Wellington Terumi Uemura)
Update Chinese (Simplified) translation (thanks to Eric)
Update deps
Update Catalan and Spanish translations
Remove unnecessary text string
Update Chinese (Simplified) translation (thanks to Eric)
Update Ukrainian translation (thanks to Artem)
Update Russian translation (thanks to AHOHNMYC)
Update Portuguese (Brazil) translation (thanks to Wellington Terumi Uemura)
Update French translation (thanks to Maxime Leroy)
Update Spanish translation (thanks to Eduardo Malaspina)
Update German translation (thanks to nautilusx)
Update Catalan translation (thanks to Maite Guix)
Update man page
Handle case that module exports mod_doc, but nothing in it
Annotate new options
Fix cache invalidation in shared roster
make-binaries: Bump Expat and libpng versions
make-binaries: Fix GitHub release version checks
Export mod_muc_admin:get_room_pid/2
Update mysql
The archive_msg export fun requires MUC Service for room archives
Allow MUC service admins to bypass max_user_conferences limitation
Remove unused macro definitions detected by rebar3_hank
Remove unused header files which content is already in xmpp library
Merge remote-tracking branch 'processone/pr/3905'
Adapt to change of mix_annotate type to boolean in roster_query
Adapt to renaming of 'participant-id' from mix_roster_channel record
Update xmpp module
Container: Support ERL_DIST_PORT
Support ERL_DIST_PORT option to work without epmd
Ignore .ejabberd-modules/ , may be used when building container
Container: Get ejabberd-contrib sources to include them
Container: Copy .ejabberd-modules directory if available
Don't persist 'none' role (thanks to Blake Miller)(#3330)
Store role, and use it when joining a moderated room (#3330)
make-binaries: Bump Erlang/OTP version to 24.3.4.5
Merge remote-tracking branch 'processone/pr/3904'
make-binaries: Bump dependency versions
mod_admin_extra: Handle empty roster group names
Add more examples of podman usage
Update CONTAINER example calls to recent changes
Container: Don't complain if the bin/ directory already exists
Container: No need to search for the ejabberdctl binary
Simplify recent commit (thanks to Simon Lipp)(#3894)
feat: do not clone repo inside container build
Fix unix socket support for ejabberd_http (thanks to Simon Lipp)(#3894)
Update Github Action workflows: Ubuntu 18 is deprecated and 22 is added
Add function for getting room diagnostics
Catch all errors from jose_jwt:verify and log debugging details (#3890)
The #roster_item.ask allowed values are subscribe|undefined
Add definition to detect OTP older than 25, used by ejabberd_auth_http
mod_host_meta: Complain at start if listener is not encrypted
mod_pubsub: Don't crash on command failures
Handle invalid values in X-Forwarded-For header more gracefuly
Update roster_get hook in mod_shared_roster_ldap to use #roster_item{}
Fix mucsub unsubscribe notification payload to have muc_unsubcribe in it
make-packages: Fix permissions on RPM systems
Fix filter_nodes
Parse sub elements of the mix join remote result
mod_mix: Return user jid on join
mod_shared_roster: Fix wrong hook type #roster{} (now #roster_item{})
mod_mix, mod_mix_pam: Add new MIX namespaces to disco features
mod_mix, mod_mix_pam: Add handling of IQs with newer MIX namespaces
mod_roster: Change hook type from #roster{} to #roster_item{}
mod_roster: Respect MIX <annotate/> setting
mod_mix_pam: Do roster pushes on join/leave
mod_mix_pam: Provide MIX channels as roster entries via hook
ejabberd_listener: Let module take over socket
Update documentation to reflect the GHCR image usage
Apply the minimal changes required to use the GHCR image
Copy ejabberd-docker-install.bat from docker-ejabberd git and rename it
ext_mod: Support managing remote nodes in the cluster
ext_mod: Handle correctly when COMMIT.json not found
Show allow_query_users room option in disco info (#3830)
CI: Remove syntax_tools from applications, as fast_xml fails Dialyzer
Add log_burst_limit_* options (#3865)
Skip connection exit message when we triggered reconnection
Handle errors reported from begin/commit inside transaction
Make connection close errors bubble up from inside sql transaction
Add syntax_tools to applications, required when using ejabberd_sql_pt (#3869)
Don't bother with COMMIT.json user-friendly feature in automated user case
Handle not found COMMIT.json, for example in GH Actions
Add WebAdmin page for managing external modules
Remove nginx and libgd3, so the proper versions can be installed
Catch mysql connection being close earlier
Make first sql reconnect wait shorter time
React to sql driver process exit earlier
Don't set affiliation to 'none' if it's already 'none' in mod_muc_room:process_item_change/3
mod_mix_pam: Display joined channels on webadmin page
Fix error reporting in 'make options' on OTP24+
Don't register listeners that failed to start in config reload
Define batch delete function types in coresponding behaviours
Fix mam delete_old_messages_batch for sql backend
Runtime: Add Xref options to be as strict as CI
Runtime: No need for a specific mix erlang 25 job
Update workflows to Erlang 25
Use INSERT ... ON DUPLICATE KEY UPDATE for upsert on mysql
Container: Set a less frequent healthcheck to reduce CPU usage (#3826)
Container: Support to pass a fork repository as argument
Container: Fix build instructions
make-binaries: Include CAPTCHA script with release
make-binaries: Edit rebar.config more carefully
make-binaries: Fix linking of EIMP dependencies
Fix regression on stop_ping in clustering context (thanks to fdie)(#3817)
Fix mod_conversejs crash when mod_register not enabled (#3824)
configure also when running "make update", which is similar to "make deps"
Update "make help" with recent changes
Use "make deps", which performs additional steps (#3823)
Ensure deps configuration is ran when getting deps (#3823)
Configure eimp with mix to detect image convert properly (#3823)
Improve "make clean" and "distclean"
Generate start scripts in "make all", not in "make install" (#3821)
Don't leak DESTDIR in files copied by 'make install'
make-binaries: Adjust Mnesia spool directory path
make-packages: Include systemd unit with RPM
Fix parsing of scram password from prosody
Merge remote-tracking branch 'processone/pr/3813'
make-installers: Support non-root installation
Fix typos in changelog
Fix errors and warnings for "rebar3 edoc"
Define license for hex.pm using SPDX identifier
Update mix.lock with ex_doc
ex_doc is required to publish docs to hex.pm
Update README.md, the installers are now in GitHub Releases
CHANGELOG: Update to 22.05 version
make-installers: Override code on upgrade
make-installers: Apply cosmetic changes
make-binaries: Bump dependency versions
Pass room state to muc_{un}subscribed hook
Allow muc_{un}subscribe hooks to modify sent packets
Revert "Temporary workaround to provide a 22.05 tagged container"
Temporary workaround to provide a 22.05 tagged container
Use alternate method to get priv/ path when copying captcha scripts
Remove dependabot because it gets fired in forks too
Update version to 22.05
make-binaries: Bump SQLite and ODBC versions
Fix spec
Return userinfo from misc:uri_parse
Have consistent schema type in misc:uri_parse
Fix one more place where misc:uri_parse is used
Improve misc:uri_parse
README: Improve badges, header, commercial links
Update man page
Run 'make options'
Dependabot: Detect updates in docker, actions and mix
Container: Build containers also for linux/arm64
Annotate options and commands recently added
Run 'make translations' for all other languages
Update Spanish and Catalan translations
Update Chinese (simplified) (thanks to Erix and Yzqzss)
Update Portuguese translation (thanks to Ssantos)
Update Portuguese (Brazil) (thanks to Wellington Terumi Uemura)
Update French translation (thanks to ButterflyOfFire)
Update German translation (thanks to Nautilusx)
New Arabic translation (thanks to Black)
Move some content from README to new COMPILE and CONTAINER files
Installers: Add job to create draft release
Installers: update workflow name
Packages: Rename workflow file to Installers
Apparently the --tags option is required to properly describe a brand new tag
Create uninstall.txt with instructions
Add help header to the installer help
Once installed, show next steps
Add some blank lines to output
make-binaries: Update to Crosstool-NG 1.25.0-RC2
Add GitHub Action to build binary packages
make-binaries: Try to avoid rebuilding deps
Import script for building command line installers
Import script for building DEB and RPM packages
Import script for building Linux binaries
Update options configurable in default_room_options
Runtime: Fix path of own workflow file
CI: The Binaries job will soon be unnecessary
Implement batch operations in mnesia backend
Simplify rules for choosing jiffy version
Update p1_pgsql in mix.lock
Update esip in mix.lock
Container: New GitHub workflow to build and publish containers
Container: When ERLANG_COOKIE is set, create cookie file; otherwise use -setcookie
Container: Experimental support CTL_ON_CREATE and CTL_ON_START environment variables
Container: Start BEAM with exec to maintain the PID and catch SIGTERM in Docker Stop
Container: Copy ejabberdctl.template, it requires some customizations
Container: New Dockerfile, more simple than the one in ejabberd/ecs
Runtime: New workflow to test compilation, rel, starting and ejabberdctl
CI: Update actions versions
CI: Update to the new "make rel" paths
CI: For older erlang versions, get old rebars
CI: Update to test latest OTP 25.0-rc3
Update rebar3 binary, works from Erlang/OTP 22 to 25
Update rebar2 binary, works from Erlang/OTP 22 to 25
Fix 'make xref' when using Mix; notice it only checks Elixir files
Switch "make rel" and "make dev" to paths: conf, database, logs
Set default ejabberd version number when not using git
Update hex deps
Update deps
mod_push: Keep push session ID on session resume
Adapt mod_push_keepalive to mod_push changes
mod_push: Rename "timestamp" to "push session ID"
mod_push: Fix notifications for pending sessions
Compile elixir_logger_backend only when lager is used
Attach meta field with real jid to mucsub subscription events
Delete ping timer if resource is gone after the ping has been sent
Remove dialyzer warning
Guard agains erlang:system_info(logical_processors) not always returning number
Don't send ping if resource is gone
Copy include/ files for ejabberd, deps and otp, as "mix release" lacks that
Stop empty MUC rooms 30 seconds after creation
Fix dialyzer warning
Make oauth_revoke_token work with all backends
Clarify mod_offline's use_mam_for_storage option
Fix syntax of some commands' result_example
Add support for MUC room vCard in get_vcard commands
mod_cron from ejabberd-contrib is another possible frontend to run commands
Don't use floor - doesn't exist in R19
Fix compatibility with older mix versions
Add rate limited delete_old_messages
Add rate limited delete_old_mam_messages command
mod_conversejs example, use newer dark theme
Set Converse auth and register options based on ejabberd configuration
Fix compilation with Erlang 19
Merge pull request #3756 from pouriya/Add-Process-Hook-Tracing
domain_balancing: Allow for specifying 'type' only
Add more configuration examples
New conversejs_options to setup additional options for Converse
The *_url options now support 'auto'
Improved mod_conversejs to support @HOST@, auto and conversejs_resources
New mod_host_meta to serve host-meta files, see XEP-0156
Check results when test with any OTP is not skipped
Terminate ejabberd_sm before everything else to ensure sessions closing (#3641)
Don't define restart and stop in ejabberd_ctl, use the corresponding commands
Don't export password attribute when it's empty (it's invalid)(#3705)
Checking users is active in SM for JWT authenticated user (#3795)
Add TLS certificate authentication for MQTT connections
mix.exs: Don't allow admins to override boot flags
Add fine-grained Elixir version requirement
Add -boot and -boot_var in ejabberdctl instead of adding vm.args
Update mix.lock, there are many unnecesary dependencies there
Let's assume ex_doc is no longer needed
Update ejabberd to not use Distillery (#3788)
Sync old-to-new schema script with reality (#3790)
Use correct timestamp when hibernation_time is not set at all
Don't request the whole MUC room state in get_room_occupants_number command (#3684) (#1964)
Determine compile definitions based on Erlang version
Fix bug introduced in 8d8a3177 (#3782)
Test also with recent Erlang/OTP 25.0-rc1
Update jiffy and p1_acme in mix.lock
Use jiffy 1.1.0 when erlang < 20 because it doesn't have string:split/2
Update to jiffy 1.1.1 and p1_acme 1.0.18 to support Erlang/OTP 25.0-rc1
Support Erlang 25 in "make options": returns attribute with simpler syntax
Add link in mod_http_api documentation to the docs API section
Fix WebSocket uppercase
Only care about CT results when CT are ran, and check fails
The lager dependency is used only with old Erlang versions
mix.exs: Don't forget to include epam/luerl
mix.exs: Be more careful while editing the version
ejabberdctl: Remove unused environment variable
mix.lock: Add missing dependencies
Put esip in mix included_applications only when it's enabled
Improve compatibility with various db engine versions
Fix compilation on OTP < 21 and remove dialyzer warning
Fix sqlite schema
Optimize room_unused_* commands
Check producing and starting releases
Provide proper path to the compiled libraries in relive's ejabberdctl
Update copyright year to 2022
Detect debug option, and maybe disable debug_info
Add forgotten option NO_CUSTOMIZE_HOSTNAME_CHECK to mix.exs
Nowadays NEW_SQL_SCHEMA is only used to determine the default sql schema
ejabberd_sql_pt got USE_NEW_SCHEMA in 78dfb83 and removed in e15595d
Fix typo introduced in 99fdba0, present since 16.01
Some dependencies are optional, check them in mix.exs
Implement Get List of Registered/Online Users from XEP-0133
Remove obsolete db_type defined environment
Disable mssql in Actions: it's known mssql doesn't pass the tests
Ensure db_type default value is set when no mssql was defined. Fix typo
Fix configure when mssql option not set, and add it to --enable-all
Reorganize and complete documentation of node start/debug commands
Improve explanation of s2s_access option. Add link to access_rules option
Use the same wording in all the identical options db_type and ram_db_type
Fix support for MSSQL testing
New "make relive" similar to "ejabberdctl live" without installing
mod_pubsub: Unsubscribe JID on whitelist removal
Make dialyzer happy
One more place where we need to handle socket field not being available
Don't expect that socket will be available in c2s_terminated hook
Store all mucsub notifications not only message notifications
mod_shared_roster: Adjust special group cache size
Remove reference to the obsolete Vagrant environment
Run autoupdate to replace obsolete AC_HELP_STRING with AS_HELP_STRING
Support MQTT subscriptions spread over the cluster (#3750)
Pass property name as expected in mqtt_codec (fixes login using MQTT 5)
Merge pull request #3757 from kianmeng/fix-typos
Fix typos
feat: event handling
feat: process hook tracing
Merge branch 'processone:master' into master
mod_pubsub: Allow for limiting item_expire value
mod_shared_roster: Normalize JID on unset_presence
Document that 'unregister' command deletes data associated with the account
Document option subscrube_room_many_max_users introduced in fc34661b6
Update section URLs in ldap documentation
Fix version when this command was really updated
Fix login when generating client id, keep connection record (#3593)
Add better descripion of subscribe_room_many command
Fix Dialyzer, related to Luerl API update from 0.3 to 1.0
Workaround to support rebar2 git tag "1.0" and rebar3 hex version "1.0.0"
Update Luerl to 1.0.0, now available in Hex.pm (rvirding/luerl#142)
Fix "make rel" when using mix, broken after 94a733c66
Fix 'make update' when used with rebar 3.18
mod_muc_room: Fix function name typo
Publish CT logs and Cover on failure to an external GH Pages repo
Check dialyzer results in its step when using rebar 2
Only care about new-schema results when new-schema tests were ran
Clean actions steps, remove redundant ones
ejabberdctl: Let shellcheck ignore unused ERTS_VSN
Fix ERTS path in ejabberdctl with `rebar3 release`
Workaround to support ShellCheck older than 0.8.0
Test shell scripts in CI (#3738)
In POSIX sh, RANDOM is undefined: use always the other method
Dollar is unnecessary on arithmetic variables
Use dollar notation instead of legacy backticked
Disable some shellcheck warnings
The read value is useless, so use throwaway variable name
Harmless warning, but let's prevent it anyway
SCRIPT_DIR is used by relx releases
In POSIX sh, RANDOM is undefined, use alternative
In POSIX sh, OSTYPE is undefined. ejabberd doesn't work natively in win anyway
Give hint about what ejabberd.cfg.example sourcing
Configure shellcheck to test with sh POSIX script
Only provide Relx start script in dev profile
Revert "rebar.config: Don't create extended start script"
rebar.config: Don't create extended start script
Merge remote-tracking branch 'processone/pr/3735'
Add subscribe_room_many command
Optimize user removal handling in mod_muc
Accept more types of ejabberdctl commands arguments as JSON-encoded
node_pep: Add config-node and multi-items features
mod_stun_disco: Fix parsing of IPv6 listeners
Revert "Github Actions: use MD5 pass encryption to support PostgreSQL 14 (#3691)"
Let get_all_rooms handle "global" argument, fixes rooms_unsued_... (#3726)
Handle user removal in mod_muc
Update stun and esip dependencies
Update CHANGELOG.md to 21.12
Update Chinese translation (thanks to Eric and 52871299hzy)
Update French translation (thanks to Éfrit and ButterflyOfFire)
Annotate modules, options and command major changes in 21.12
Update man page
OTP 24 means whatever version provided by Actions... nowadays it's 24.1
Handle mix version when running docker-ejabberd/ecs/build.sh latest
Relax strictness in mix dependency versions
Merge remote-tracking branch 'processone/pr/3724'
Remove CTLLOCKDIR (/var/lock/ejabberdctl) from Makefile.in
Use P1's coveralls-erl fork to handle unicode in git commit author
Eliminate xref warning from last commit
Add workaround for bug in older erlang version in rest module
Merge pull request #3652 from weiss/bump-max-items
Run make options
New allow_modules option to restrict registration modules
Minor improvements in conversejs documentation
Update mix deps
Update deps
Add mod_conversejs
Fix Dialyzer warning, old passwd tuple don't match current tuple definition
Update Jose to 1.11.1 (the last in hex.pm correctly versioned)
Add DIAGNOSTIC to rebar3 coveralls, this fails since some days ago
Improve mod_multicast
Better version of dialyzer fix
Make dialyzer happy
Make s2s connection table cleanup more robust
Fix exception in mucsub {un}subscription events multicast handler
mod_caps: Don't forget caps on XEP-0198 resumption
Improve documentation of some commands
Mention "help" as an available ejabberdctl command
Annotate support for XEP-0317: Hats, since commit 5d0e599f1
Update 'stun' dependency
mod_muc_room.hrl: Work around old Dialyzer bug
mod_pubsub: Remove unused check_opt_range/3 clause
node_pep: Fix remove_expired_items/2 argument name
mod_pubsub: Fix get_max_items_node/1 specification
PubSub: Add delete_expired_pubsub_items command
Update 'xmpp' dependency
Support MUC hats (XEP-0317, conversejs/prosody compatible)
Remove obsolete cookie preparation in spool dir, it's now stored in HOME
Use the configured user in systemd's ejabberd.service
Fix create_room_with_opts when using SQL storage (#3700)
If tests succeed, test also new SQL schema
When tests fail, show also error.log as it may have meaningful content
Fix vcard_search definition in pgsql new schema (thanks to Stu Tomlinson)(#3695)
Only install some files when option enabled in configure (#3633)
Update 'xmpp' dependency
Github Actions: use MD5 pass encryption to support PostgreSQL 14 (#3691)
mod_mam: Declare XEP-0441 support
Use mod_register in web register form, so its restrictions are used (#3688)
Use mod_register to format some common error messages
Support old scram records before xmpp's 651050f9 and ejabberd's e5cad9be6 (#3680)
Add indexes from 95fa43aa to the old-to-new MySQL schema update script
Add indexes from 95fa43aa to the old-to-new schema update function
Update export/import of scram password to XEP-0227 1.1 (#3676)
Don't crash when exporting a module that is not enabled
When exporting mod_mam, MUC entries are assigned to the MUC service (#3680)
Fix roster_tests:get_items
Small optimization in mod_roster_sql:get_roster
Use INSERT ... ON CONFLICT in SQL_UPSERT for PostgreSQL >= 9.5
Fix SQL_UPSERT in mod_push_sql:store_session
Merge branch 'processone:master' into master
Fix previous commit: add forgotten endline blankspaces
Update documentation to match the implemented options values (#3675)
Optimize MucSub processing
ejabberd_admin: Fix ejabberd_piefxis commands
mod_http_upload_quota: Avoid 'max_days' race
mod_register_web: Handle unknown host gracefully
Fix WebAdmin recent change
Merge pull request #3668 from longlene/master
Add internal links in WebAdmin Vhosts page
Send ping from server, not bare user JID (#3658)
minor fix
node_flat: Avoid catch-all clauses for RSM
node_flat_sql: Avoid catch-all clauses for RSM
Fix syntax in mod_disco example configuration
Tell dialyzer that gen_tags only cares about markdown output, not html
New command to produce markdown with tags and their associated commands
Produce module names with specific syntax, docs Makefile will convert to links
Use specific syntax so modules and top-level will be links
Improve formatting and add sections links
Copy log_rotate_count explanation from docs site
Export function, so ACME API commands are listed in the documentation
Change set_master command tag from mnesia to cluster
Remove obsolete mod_register_web ideas and improve documentation
Add example config to mod_http_api documentation
Update API Reference page menu name and order
Merge remote-tracking branch 'processone/pr/3666'
PubSub: Add delete_old_pubsub_items command
PubSub: Optimize publishing on large nodes (SQL)
PubSub: Support unlimited number of items
PubSub: Support 'max_items=max' node configuration
Merge pull request #3660 from ballerburg9005/patch-1
Merge pull request #3656 from pitchum/master
"sort -R" command not POSIX, added "shuf" and "cat" as fallback
mod_mam_sql: Remove duplicated functions
Determine the default handlerid at runtime
Fix CHANGELOG: rebar2's elixir workaround was problematic and was reverted
Fix typo when creating index (thanks to Millesimus)
Update tests after last commit
Allow storing non-composing x:events in offline
mod_pubsub: Fix check_opt_range/3 spec
Add missing SQL migration for table push_session
Use the most specific tag for ejabberd commands with several ones
Show tags and definer module in generated API document when it's a gen_mod
Show definer module in "ejabberdctl help" when it's a gen_mod
Store who defines a command, specially when defined by ejabberd modules
PubSub: Use configured 'max_items' by default
PubSub: Bump default value for 'max_items' limit
mod_push: Fix handling of MUC/Sub messages
When vsn is an exact tag, append .0 to satisfy SemVer
Remove stringprep override from mix.exs
Add missing fields from config inside mod_muc_admin:change_options
Revert "Add workaround so rebar2 can use Elixir 1.12.0"
Remove leading zeros in ejabberd version number to satisfy Elixir SemVer
Add 21.07 changes to CHANGELOG
Update man page
In "make dev" don't create link ejabberdctl, seems buggy
Update mix.lock
Annotate the srg_create command as changed in 21.07
Simplify the --with-rebar example in README
Update Portuguese translation from Weblate (thanks to Ssantos)
Update Italian translation from Weblate (thanks to Alessandro Mandelli)
Update Indonesian translation from Weblate (thanks to Reza Almanda)
Update pam
Update dependences
Typo
Update CHANGELOG.md with 21.04 and 21.01 (#3646)
Add workaround so rebar2 can use Elixir 1.12.0
As Mix config now must be evaluated at runtime, rename to runtime.exs
erlang:phash is deprecated in OTP 24, let's use phash2
Mention in README.md the updated --with-rebar and "make dev"
Add support to build release with back to old Elixir 1.10.3
Add rebar3 3.15.2
Add support for mix to: ./configure --enable-rebar=mix
Update setup-dev.sh to work perfectly both with rebar3 and mix
Minor mix.exs definitions copied from the template file
Add support to build release with mix
Get ejabberd version from vars.config
Add sql to package files (#3251)
Add vars.config to package files: version and cond_deps use it
Sort package files
Update mix applications list to fix error "p1_utils is listed as both..."
With the recent changes it seems mod_mix supports 0.14.1 (#3634)
Merge pull request #3634 from lnjX/mix-identity-conf-mix
Allow multicast hook registering by host
Provide proper error message when create_room fails with invalid_service
Fix spec: xmpp:set_from_to/3 allows undefined as second argument
Fix previous commit to pass all tests
Use multicast routing for more packets generated by muc
Update documentation: mod_muc ram_db_type supports SQL since 17.04 (#3632)
After create_room, store in DB if it's persistent (#3632)
Ignore captcha scripts copied by relx after "make dev"
Merge pull request #3639 from McPo/xep0033-bcc-strip-fix
Correctly strip only other bcc addresses i.e. bcc receiver should still be able to see their bcc address element and no other bcc address element
Tell relx to include src, so that the tar will contain include/ (#3633)
Show messages with next configuration steps when installing a module
Merge pull request #3566 from Robbilie/feature/mqtt-shared-roster-groups-placeholder
Yet another dialyzer warning fix
Fix dialyzer warning
Add send_timeout option to listener
Try to limit serial access when checking api permissions
Include odbc app in release only when required (#3633)
Copy captcha scripts in release (#3633)
Let "make dev" always update SCRIPT_DIR in ejabberdctl, even if link exists
mod_mix: Use disco identity conference/mix
There are so many targets... add "make help"
New "make dev" and "./ejabberdctl" (requires using rebar3)
Set SCRIPT_DIR as done by the ejabberd script generated by "rebar3 release"
Add support for rebar3 to "make rel"
mod_push_keepalive: Fix 'resume_timeout' docs
Don't cache rebar3 binaries... compiling is less than 2 minutes anyway
Update stringprep in mix
ref: fix WS typos
Merge pull request #3622 from pouriya/fix-ws-typos
CI: don't cache dialyzer output file: when there are several, ln fails
Fix reverse order of items when using <before/> in Pubsub with RSM (#3621)
Add mqtt_pub table definition for MSSQL (#3097)
ref: fix WS typos
Revert luerl from v0.4 which has a compilation warning; v0.3 is enough
Return proper index when using after of before in PubSub with RSM (#3618)
Fix index attribute when getting last page from PubSub with RSM (#3618)
Support for simple limiting the number of items in PubSub with RSM (#3618)
Get explicitely rebar3 3.15 binary that works with Erlang 21.3
Workaround so coveralls website shows git commit information
CI: Get rebar3 compatible with previous OTP, the one in Ubuntu 20.04 is not
Update eredis dependency from v1.0.8 to v1.2.0
Update luerl dependency from v0.3 to v0.4
Update lager dependency from 3.6.10 to 3.9.1 to make Dialyzer happy
mod_muc_room: Don't leak owner JIDs (#3615)
Remove .travis.yml as it's superseded by ci.yml (#3613)
New ci.yml with all static and dynamic testing suites (#3613)
Remove tests.yml github workflow, a new reworked one is coming (#3613)
Fix extauth.py failure in test suite with Python 3 (#3612)
MySQL Backend Patch for scram-sha512 (#3582)
Align numbers in WebAdmin tables to the right
Show uptime date in WebAdmin, it's easier to understand that uptime seconds
Show mnesia table memory in bytes, not in words
Add missing indexes to sql sr_group tables
New simple webadmin pages to view mnesia tables information and content
Use G macro name for tag, as T overlapped T from translation
Update documentation references for import_prosody and export2sql
Apply improvement from 29462f005 to delete/2, and fix delete/3 (#3564)
When exporting for SQLite, use its specific escape options (#2576)
Tell io_lib:print to not care about line length, to avoid newlines in SQL export
Update econf:vcard() to generate correct vcard_temp record
Update xmpp to bring updated vcard
Use the new Github container registry
Use latest version of the container
Remove set up already set in prebuilt image
Use a prebuilt image
Minor fixes for new_sql_schema support in SQLite (#3303)
Document that update_sql command only supports postgresql (#3439)
Use the deps versions defined in rebar.config, not the latest available
Don't add ejabberd version in API page either, following 3e4ebfae7
Expose port label
Ignore basic Mnesia directory
Forward XMPP legacy SSL and MQTT ports
Install Erlang and Elixir VSCode extensions as default
Remove file syntax deprecation
Merge pull request #3595 from processone/codespaces
Cast as boolean when exporting privacy_list_data to PostgreSQL (#1773)
Document that sql_ssl can be used with MySQL too
Use the new 'note' field to annotate changes in 20.01..21.03
New 'note' field in commands and options documentation
Fix invalid_encoding error when using extended plane characters in vcard.
Display extender error message in ejabberdctl
Merge pull request #3578 from tappytaps/srg-cache-fix
delete cache after performing change to be sure that in cache will be up to date data
update srg_create API to use label parameter instead of name
Fix dialyzer warnings
Fix syntax not recognized by older erlang
Improve database and caching in mod_shared_roster
Use proper source for cache options in mod_shared_roster
Reconfigure cache in mod_shared_roster when options change
Remove SMP option from ejabberdctl.cfg, -smp was removed in OTP 21 (#3560)
Support the recent changes in the "ejabberdctl help" command (#3569)
Major changes in ejabberdctl help output (#3569)
Change tag name because there's already a command called "stats"
Get the arguments definition from the record (#3569)
Copy a change from include file available since OTP 17.0
Update bug_report.md
Update feature_request.md
When using OTP 24.0, use the new 'application' record definition (#3568)
Update devcontainer.json
Use Dockerfile
Use Dockerfile
Update devcontainer.json
Create docker-compose.yml
allow shared roster group placeholder in mqtt topic
mod_push: Handle MUC/Sub events correctly
Set version to 21.04
New Albanian translation (thanks to Besnik Bleta)
Update deps in mix
Merge pull request #3558 from fdie/fix_node_get_state_return_value
Recompile man page with "ejabberdctl man"
Revert "Add ejabberd version number to man pages"
Run "make translations", and *.msg get a warning to not edit them manually
Update Japanese translation (thanks to Mako N)
Update Greek translation (thanks to Michalis and Stratos Kostidis)
Update Esperanto translation (thanks to phlostically)
fix gen_pubsub_node:get_state return value
I think no need to be so strict in mix dependencies versions
Update rebar dependencies
No need to ignore ejabberd.app.src, it was recently removed, see 3c16f214
No need to ignore XmppAddr*, it was removed in 2018, see 0bb14d16
No need to ignore extract_translations, it was removed in 2017, see cd098c5a
No need to ignore doc/, it was removed in 2015! See 1854b5e4
Tell git to ignore .deps-update/ used by tools/update-deps-releases.pl
Cache rebar2 deps/ dir in Travis for a 10% speedup approx.
When unregistering XMPP account close its MQTT sessions (#3426)
Improve wording of sql_pool_size option documentation (#2541)
When occupant is banned, remove his subscriptions too (#2451)
Document that send_stanza_c2s requires an existing sender C2S session
Revert "Close pgsql ports on ejabberd_sql process termination (#2541)"
Don't fail on PEP unsubscribe
Generate enabled_backends in ejabberd.app instead of configure (#3549)
Update Elixir logger, so logging should work now
Update gitignore for Elixir, mnesiadb/ was renamed to database/ in ef6af11f1
Add mod_doc/0 to mod_presence_demo.ex so compiler stops complaining
Update jiffy and epam to fix compilation (#3413)
Sort dependencies alphabetically, it makes manual checking easier
Fix INTRUDER and add padding to second text line
Merge pull request #3458 from nosnilmot/sqlite3-macos
Close pgsql ports on ejabberd_sql process termination (#2541)
Update FORM_TYPE from captcha to register (#3045)
If stanza is type error, allow it passing (#3290)
New command get_user_subscriptions (#3403)
Show in WebAdmin the erlang node where the room resides
Obtain and provide photo type in vCard LDAP (#3541)
Fix remove_mam_for_user_with_peer when removing room archive (#3536)
Remove support for HiPE, it was experimental and Erlang/OTP 24 removes it
Add --enable-lua, and use that for luerl instead of --enable-tools (#3508)
Sort libraries alphabetically, so they're easier to check manually
crypto:hmac is removed in Erlang/OTP 24, use our wrapper
Update sql_query record to handle the Erlang/OTP 24 compiler reports
Get back description and simplify processing (#3507)
Tell git to ignore rebar.lock used by rebar3
Added badges for github actions, coveralls.io and weblate
Use monitors to track muc rooms
Merge pull request #3507 from slezakattack/master
New Github Actions workflow to test Dialyzer, Xref, Options and Hooks
Clone to the dir specified in rebar.config... useful for erlang-sqlite3
Add question/answer-based CAPTCHA script (#3533)
When using rebar3, "make dialyzer" needs just a single call
Fix Dialyzer warning about function contract that changed in fad14ff31
Improve support for rebar3 in "make translations"
Fix muc tests
Take in account subscriber's affiliation when checking access to moderated room
Allow ejabberd to be compatible as a dependency for an Erlang project using rebar3
Skip reading roster in one more case in mod_caps
Return modules errors in set_vcard callback (#3502)
make hooks and options work with rebar3 too
Create annotated tags, meant for releases, instead of lightweight (#3512)
For OTP<22 define LAGER macro in ext_mod like in rebar.config (#3493)
Make fetching roster in mod_privacy lazy
Add fallback branch to last commit
Don't request roster in mod_caps when not needed
fix eldap certificate verification (#3528)
According to fast_tls, only atom and binary may accompany error tuple
Fix URL of CAPTCHA section
Update xmpp
Add argument guards to roster commands
Move sql directory from extra_src_dirs to src_dirs (#3520)
Fix PONG responses (#3515)
Try to fix coveralls report in Travis, related to commit 2f3f6f8b7
Use the mysql service available in Travis
Improve prepare-tr so *.msg files inform to not edit them (#3484)
Test against newest 23.1.2, and remove useless intermediate 22.3
New listener for encrypted ejabberd_c2s
Fix specified key was too long (#3513)
Fix bug handling jid:decode/1 return, introduced in cdb286d1d (#3461)
Fix bug in send_message introduced in 7fc500dae (#3485)
Fix MAM tests that now fail due to commit d6e9e0342 (#3506)
Fix typo in Weblate URL
mod_mam: Add missing semicolon
Merge remote-tracking branch 'processone/pr/3506'
Remove queryid from MAM fin element
Fix version number
Bump version in mix.exs
Add cache for displayed groups in ldap_shared_cache
Update mix deps
Update deps
Fix delete_old_message when using sqlite spool table
Other minor translation updates
Update Chinese translation (thanks to Shelley Shian)
Update Portuguese (Brazil) translation (thanks to Wellington Terumi Uemura)
Update Norwegian Bokmål translation (thanks to Allan Nordhøy)
Update Indonesian translation (thanks to Uira)
Update German translation (thanks to Maximilian Trummer)
Document the recent oauth_cache_rest_failure_life_time option
Update ejabberd man file (#3490)
Remove old and obsolete win32/ (#3487)
Remove old and obsolete examples/transport-configs/ (#3487)
Update newest copyright year to 2021 (#3464)
Update deps to tagged versions
Add oauth_cache_rest_failure_life_time option
Add 'ejabberdctl foreground-quiet'
Don't fetch subscribers list in room_unused_*
Rename function arguments
Skip reading pep nodes that we know won't be requested due to caps
ejabberd_stun: Block loopback addresses by default
Update 'stun' dependency
Revert "mod_register language reworked"
Revert "ejabberd_oauth language reworked"
Revert "mod_roster language reworked"
Fix URL of ejabberd_po, use the final one
Those gettext PO files are now available in the new ejabberd_po repository
When running "make translations" use the external ejabberd_po repository
mod_muc/mod_muc_room: add option limits for password and captcha_whitelist (#2255)
Let's update xmpp once more
Revert "Update xmpp"
Validate affiliations in set_room_affiliation command
Update xmpp
Merge pull request #3488 from comradekingu/patch-3
mod_roster language reworked
Update Greek translation (thanks to rafaila42)(#3484)
Merge pull request #3486 from comradekingu/patch-2
Update Greek translation (thanks to rafaila42)(#3484)
ejabberd_oauth language reworked
Don't include empty <subject/> in messages sent by send_message
Allow non-occupant non-subscribed service admin send private MUC message (#3474)
Run "make translations"
Merge pull request #3483 from weblate/weblate-ejabberd-ejabberd
Update Norwegian Bokmål translation
Update Indonesian translation
Update Norwegian Bokmål translation
New Romanian translation
Uniformize terms create->register, delete->unregister (#3482)
Merge pull request #3482 from comradekingu/patch-1
Merge pull request #3480 from Neustradamus/git
Fix handling of log_rotate_size: infinity
mod_register language reworked
Remove .git ending from links
Mention gettext and weblate to update translations
Update French translation
Update Catalan translation
Update translatable, and translated strings
Replace Jabber->XMPP and Ejabberd (thanks to Neustradamus)(#3469)
Don't use REPLACE for upsert when there are "-" fields.
Update Spanish translation
Run "make translations"
Apply cosmetic changes from documentation
Make ext_mod compile module with debug_info flags
Add sql script to migrate mysql from old schema to new
Allow for listening on privileged ports
ejabberd_systemd: Fix comment
Merge remote-tracking branch 'processone/pr/3471'
+ ejabberd mucroom logs (#3468)
Integrate nicely with systemd
XEP-0033 (#3467)
Clarify documentation of log_rotate_size option (#3462)
Document ldap_userjidattr option
Add multi-domain support (and flexibility) to LDAP shared roster (rev2). (#3461)
JWT enhancement (#3460)
Remove external dependency on sqlite3 for macos
Fix invalid timezone in mod_time (issue #3454)
Document that the workaround is only needed for OTP lower than 23.2
Fix a pair of pubsub specs to please Dialyzer
Fix typo in case clause detected by Dialyzer
Add option to check for missing hex releases to update script
Correctly sort mixed versions vX.Y and X.Y in update-deps script
Fix sqlite3 dependency version (#3452)
Update spec for get_room_pid
Old passwd scram tuples do not conform to current records definitions
Use better fallback value for room activity time when skipping room in decide_room
Update Dockerfile
Create Dockerfile
Create devcontainer.json
Reword auth_scram_hash info (#3448)
Update xmpp dep in mix
Document auth_scram_hash option
Bump version in mix.exs
Update changelog
Update deps in mix
Make anonymous auth not override sasl mechaninsm offered by other modules
Fix getting age of newly created rooms in rooms_unused_*
feat: add hook to check decoded JWT after success authentication (#3446)
Update deps
Improve auth_mnesia:transform
Improve handling of old scram data in auth_mnesia
Update xmpp once more
Update xmpp
Update deps to point to tags
Add hash to scramed password stored in mnesia by earlier version
Allow to use different hash for storing scram passwords
Normalize names passed to destroy_room
Merge pull request #3435 from fdie/fix_odbc_binary_errors
Simplify updating disk room options in set_room_affiliation
Use specialized upsert with mysql
Fix more places that needed changes after scram.erl api modifications
also convert embedded errors to binary
Add support for SCRAM-SHA-{256,512}-{PLUS} authentication
Fix typo in last commit
Make decide room better handle rooms that were just hibernated
Handle unix sockets in misc:ip_to_list
Trigger user_send_packet when send_stanza API is called (#3431)
Merge pull request #3429 from mtdcr/systemd-foreground
Let systemd start ejabberd in foreground
Provide name when pushing new roster item in shared roster group (#3427)
Fix room_unused_destroy on hibernated rooms
Update muc_room just_created timestamp when message is received
We don't use persistent field in decide_room
Fix logic that determines room age when history_size=0
Merge pull request #3402 from nosnilmot/docker-fixes
Allow room_unused_list/destroy work on hibernated rooms
Merge pull request #3399 from nosnilmot/redis3-configure_deps
Merge pull request #3395 from nosnilmot/rebar3
Update dependencies
Don't do double utf-8 conversion on translated strings in str:format
Document sql_odbc_driver option (copied from docs site)
Document outgoing_s2s_ipv4_address and ipv6 options (#3396)
Apply cosmetic changes to outgoing s2s IP options
Merge remote-tracking branch 'processone/pr/3396'
Make sure that jid used as base in mam xml_compress is bare
mod_push: Fix log message argument
mod_push: Fix API call return type on error
mod_push: Support cache config changes on reload
Change split character in PROXY_USER from \x04 to :
Update eimp
Update eimp
Don't use same value in cache for user don't exist and wrong password
Add better error reporting to mod_muc_admin commands
Document that send_direct_invitation is asynchronous
Support for MAM Flipped Pages (#3398)
Store room options in create_room_with_opts only if we will start room
send_direct_invitation command is now asynchronous
Make websocket send put back pressure on c2s process
Make mod_muc_admin command work correctly with hibernated rooms
Added sql_odbc_driver option for mssql db
ejabberd_stun: Rename Logger filter
mod_register: Allow for account-removal-only setup
Add sql dir to extra_src_dirs
Fix docker DB initialization
Improve rebar3 configure-deps plugin output
Miscellaneous rebar3 fixes
log_rotate_date and log_rate_limit are deprecated since e4a8afb (#3382)
Make roster subscriptions work better with invalid roster state in db
Add outbound s2s out interface (ipv4/ipv6)
rebar3 support for main build process
rebar3 plugin to support configure-deps command (#3392)
Add 'gitonly_deps' list to rebar config/script (#3391)
Use os time instead of system time in values returned by mod_time
Refer to the XEP for standard names (processone/docs.ejabberd.im#97)
Allow for filtering outgoing s2s stanzas (#3381)
Revert "Run user_receive_packet in send_message so MAM stores also incoming (#3377)"
Run user_receive_packet in send_message so MAM stores also incoming (#3377)
Fix syntax for lager dependency version (#3379)
Update one more place where we had -include("xmpp.hrl")
Use include_lib() to include headers from dependencies (#3369)
Update xmpp dep
Update base64url dep for rebar3 (#3368)
Provide room disco info identity name only when title was set (#3370)
New hook to run when a room process is started (#3353)
Show nick also in oneself list of subscriptions (#3206)
Always show MucSub subscribers nicks (#3206)(thanks to Snoopcatt)
Add link to docs about default and new database schemas
mod_pubsub: Fix typo in 'hosts' documentation
Mark dangerous buttons with CSS (#3363)
ejabberdctl: Avoid bashisms
Update opt files with "make options"
For mod_vcard_* modules, redirect options to mod_vcard
Fix vCard search by User when using Mnesia
mod_pubsub: Remove 'dag' node plugin documentation
Add rebar.config* files when publishing to hex from mix
Fix to allow vhost admins to view WebAdmin menus (#3355)
Copy Erlang compilation definitions from rebar.config to Docker (#3350)
Don't forget not-persistent rooms in load_permanent_rooms
Improve explanations of cafile options
Update mix.exs ejabberd version
Update mix dependencies
Check if TERM is set before running a remote debug shell
Merge pull request #3346 from processone/ejabberd-3343
Allow passing Erlang VM args through vm.args config file
Update deps
Update stun
Update changelog
Add support for unix socket in listeners
Don't log http errors when socket get closed after processing one request
No need to check for Erlang 17, as 19 is the lowest supported anyway
Elixir was required for quicktest, that was removed in 2018 51cbbf313
Update Stun to 1.0.36, and Esip too
Sort dependencies and improve some indentation
Revert "Modify ERL_LDFLAGS of deps when compiling on R23 on rebar2"
Update dependencies, they now compile with Erlang/OTP 23.0 natively
Revert "Dirty workarounds to compile jiffy with Erlang/OTP 23 (#3282)"
Update jiffy to 1.0.5 which supports Erlang/OTP 23
In fact misc:try_url/1 is not used anymore
Fix try_url/1 parsing of uri_parse result format, reported by Dialyzer
Update 'stun' dependency to tagged version
mod_stun_disco: Fix function specification
Parse also ServerHost in create_room* commands (#3326)
Fix crash when creating new MUC log file in non-ASCII lang (#3324)
Use the same leading sentence than other sections
ejabberd_stun: Filter info/debug messages
Fix YAML syntax in example configuration (#3301)
Subscriber should not send message to moderated room (#3222)
ejabberd_logger: Avoid excessive stat calls
README.md: Add line breaks after feature titles
Correctly handle user_regexp acl rules with not matching host
mod_stun_disco: Fix wording of log message
Document that only ejabberdctl can join and leave a local node (#3049)
Update example config to include mod_http_upload custom headers (#3288)
Add default values so Travis config validation stops warning
Travis renamed redis-server to redis apparently
Remove old Regexp, the new Re is available since Erlang/OTP R12B-4
Remove comment about Erlang/OTP older than R14, as we require 19.3 nowadays
Get back some commented specs that required Erlang R12
Option route_subdomains was deprecated and useless a year ago in ffe1c722
Update 'yconf' dependency to fix Erlang/OTP 19.x
When updating group in cache, first delete so insert succeeds (#3296)
Handle ets_cache return value in shared roster get_group_opts (#3296)
Update 'yconf' dependency
Update deps
misc: Don't crash on URLs without port number
misc: Make sure uri_parse/1 returns strings
Merge remote-tracking branch 'processone/pr/3294'
Update example config
Update 'turn_ip' option name in test configuration
mod_stream_mgmt: Don't kill new PID on resumption
Test 23.0 version
Update eimp, sqlite3 and epam to support Erlang/OTP 23 (#3282)
Use old http_uri, crypto and pg2 only with old Erlang/OTP (#3284)
Dirty workarounds to compile jiffy with Erlang/OTP 23 (#3282)
Rename 'turn_v4_ip' and 'turn_v6_ip' options
Modify ERL_LDFLAGS of deps when compiling on R23 on rebar2
ejabberd_stun: Add 'turn_blacklist' option
mod_stun_disco: Make 'services' example shorter
mod_stun_disco: Offer local IPv6 services
ejabberd_stun: Support IPv6 for TURN
Let ejabberd_stun listen on IPv6 sockets
Fix hardcoded URL to register.css and URLS to sections (#3281)
Update man page to ejabberd 20.04
Sort databases alphabetically in options doc (thanks to Neustradamus)(#3246)
Sort alphabetically configure options (thanks to Neustradamus)(#3246)
Don't crash in mod_muc_log:get_url when mod_muc_log is not enabled
Display installed ejabberd version in webadmin footer (#3272)
Make SQL query more generic for MSSQL compatibility (#3271)
Increase default shaper limits, to help with jingle initiation delay
Update *_vcard commands help, so they are better displayed in Docs
Update syntax of some options so they are better displayed in Docs
Revert service_subscription_subscribers test that is iconsistent (#2696)
Fix most EDoc errors, even if that's not used nowadays apparently
If new session Pid exists when sm_remove is called, then keep Ping (#3260)
mod_stun_disco: Bump credentials_lifetime default
Fix link in mod_sip to SIP Docs section
Provide minimal mod_bosh configuration example
Add link in acme option to ACME section in ejabberd Docs
Hide false-positive warnings about mod_delegation Type atom and NS binary
Remove ancient and rather useless incode ejabberd_commands documentation
Don't use string:take, as it isn't available in Erlang/OTP 19.3 (#3256)
Fix webadmin muc room sorting broken due to trailing slash patch (#3256)
Unconditionally send presence unavailable to all pres_a recipient
Show deprecation warning if ejabberd_xmlrpc is configured as listen module (#2915)
Remove access_commands useless lines, api_permission replaced it years ago
ejabberd_listener: Let supervisor terminate child
Set 'max_fsm_queue' default value (back) to 10000
mod_stun_disco: Log discovered services on startup
Extract translatable strings also from the xmpp library
Fix the new service_subscription_subscribers test (#2696)
Fix @from attribute on MucSub 'subscribers' node messages
mod_stun_disco: Remove unnecessary inclusion
mod_stun_disco: Apply minor documentation cleanups
mod_stun_disco: Try to resolve listener address
Set ejabberd version to 20.04
Fix English typos in configure.ac
Merge pull request #3232 from weiss/enable-stun
Rewrite sentences in modules options examples, to not break Docs indentation
Update dependences in mix
Run tests for mssql only if configured with --enable-mssql
Update deps
enable tests with mssql-backend (#3136)
Merge pull request #3235 from weiss/xep-0215
ejabberd_stun: Tone down 'auth_realm' warning
Add tests for mod_stun_disco
Support XEP-0215: External Service Discovery
Don't offer X-OAUTH2 if the only auth method enabled is Anonymous (#3209)
Don't store caps information for direct presences of muc room
Clean some unused functions in ejabberd_ctl, this makes "make hooks" happy
mix.exs: Update 'xmpp' and 'stun'
rebar.config: Update 'xmpp' and 'stun'
gen_mod: Reload modules after reloading listeners
ejabberd_stun: Fix 'turn_ip' fallback
use dsn-less config for mssql (#3131)
Bump jiffy so it compiles on older GCC (#3218)
ejabberd_stun: Handle hashed passwords gracefully
ejabberd_stun: Add 'stun_get_password' hook
Fix some English typos
Rephrase mod_admin_extra doc, a2x screwed the format when building Docs
Make a few more strings translatable in MUC and Shared Roster WebAdmin
Update some translated strings where only print chars had changed
ejabberd_stun: Set a default 'turn_ip'
Enable STUN/TURN by default
Travis CI: Test against Erlang/OTP 22.3
Updated Spanish translation
Updated Catalan translation
Don't extract for translation strings from man pages, at least for now
Fix previous commit
Log messages generated by msgmerge and display unexpected ones
Fix doc content in mod_admin_extra so it can be extracted by make translations
Check if mod_muc_log is enabled before setting logging option (#3215)
When rescode is some unexpected, probably error message, print it
Restart offline pop_messages when there is mismatch between select and delete
Update mysql driver to get rid of warning
Update documentation of mod_shared_roster (#3214)
Make session iq response have from be set to server jid
Resending unacked stanzas should send even archived msgs if mod_offline is enabled
Fix unused variables from previous commit
Update links to the ejabberd Docs page in WebAdmin
Rename opts->name to label, to avoid confusion with the group name (#3214)
Merge pull request #3132 from area-42/publisher_mssql_text_to_varchar
Minor fixes in doc
Copy more option explanations from ejabberd Docs site
Add ejabberd version number to man pages
Indicate which ejabberd version is used to produce the page
Don't make commands subsections, so Docs TOC plage is cleaner
Fix set_loglevel example argument documentation
Improve formatting of mod_announce doc
Make resumed sessions try to deliver possibly queued messages to new session
Log errors that happen when retrieving http headers in ejabberd_http
mod_carboncopy: Bump supported XEP revision
Remove bash-izm from ejabberdctl.template introduced recently
Limit number of atoms used by ejabberdctl ( #2977)
Document mod_shared_roster_ldap options
Add ejabberd_auth_http auth_opts brief description
Document sql_prepared_statements
Quick document with forward link api_permissions
Document some global options
Add three missing mod_bosh options
add missing mod_mam options
Fix mod_pubsub indentation
Add mod_pubsub configuration documentation
Don't replace %25 in webadmin test on older erlangs
Make stop_ejabberd test also work without receiving </stream:stream>
Fix potential message loss in terminating c2s sessions
Use different username than other tests, but still include the test chars
Better error reporting in pubsub tests
Make webadmin tests use different user for changepassword/unregister
Add more webadmin tests
sql_type should be taken for LServer, not LHost (#3202)
Make webadmin redirect to page that end with /
Revert "Pass base path instead of level to support URL missing slash (#3177)"
Do not change to attribute of sent messages from bare to full jid
Increase version to 20.3.0
Fix unsubscribe command result, handle_sync_event result, and dialyzer
Update changelog
Update mix.lock
Make bounce_message_queue wait for 100ms for incoming messages
Make mod_muc_room:unsubscirbe handle that unsubscribe may stop room
Better handling of xml parse errors in send_stanza
Add baisc tests for webadmin
Update deps
Also add "escape '\'" to prepared statements in pgsqllike_escape
Add escape '\' to like expression in pgsql to fix problem cockroachdb
Fix type of computed field in node_flat sql query
Use correct type for seconds field in mod_last sql queries
Change conversion of boolean values for cockroachdb
Fix Dialyzer warning that jid can't be 'undefined'
Add cache to mod_shared_roster
Fix issue with family field on cockroachdb
Replace mod_shared_roster:X call with just X inside that module
Try to limit calls to groups_with_opts in mod_shared_roster
Pass base path instead of level to support URL missing slash (#3177)
fix command rooms_empty_destroy (#3183)
Add reload handler to ejabberd_auth_ldap
Use compilation flags used during build to compile modules in ext_mod
Fix list parameters in sql queries on pgsql
Merge pull request #3125 from area-42/enable_odbc_in_mix
Allow mod_register_web to be accessed from now-served vhosts (#3173)
Fix handle of 'http' atom in Headers, problem introduced in 357e7e11
Support ssl connection on mysql
Update mix deps
Bump version in mix.exs
Update changelog
Update dependences
Make http heades passed in custom_headers override builtin headers
Merge pull request #3127 from area-42/allow_emojis_with_mssql
Support ejabberd_auth_http's auth_opts (processone/ejabberd-contrib#284)
Update Jiffy to 1.0.1, just for coherence with p1_acme requirement (#3102)
Do read piefxis file fully before starting processing included file
Update README.md
ejabberd_admin: Fix *_config command result format
Make piefxis import properly decode scram passwords
Remove tweak introduced in 05c2995c for #1954 as it isn't needed anymore
Use SQL ESCAPE statement only with MSSQL and SQLite, improve compatibility with CockroachDB (#3074)
Add missing oauth_client table declaration in lite.new.sql
Optimize sql queries in pubsub select_affiliation_subscriptions
Update copyright to 2020 (#3149)
mod_http_upload: Document correct put_url default
Do not use ~ts format in string that are put in xmpp payload
Fix 20.01 changelog
Update changelog
Bump version in mix.exs
Use tagged version of coveralls
Update xmpp in mix
Use tagged xmpp
Update xmpp dependency in mix.exs and mix.lock
mod_stream_mgmt: Don't crash on disabled ACK timer
mod_carboncopy: Omit check for undefined 'from'
mod_carboncopy: Don't process non-message stanzas
mod_carboncopy: Also copy mediated MUC invitations
mod_carboncopy: Improve is_carbon_copy() check
mod_carboncopy: Support new copying rules
mod_sip: Omit documentation when SIP is disabled
mod_sip: Fix compilation without SIP support
Merge pull request #3142 from kenanilgun/master
Update Turkish Language
Update deps is mix
Add the man page
Add install target for ejabberd.yml.5
Rename plugin to not clash with plugin from dep
Generate ejabberd.yml.5 man page from source code directly
Update deps
Omit push notifications if offline storage failed
Travis CI: Test against Erlang/OTP 22.2
change publisher from text to varchar for mssql
allow storage of emojis in archive on mssql
enable odbc in mix build
Updated Catalan translation
Fix case clause error regarding admin_generated password (#3122)
Add ability to hookup config transformer
Fix mod_muc_log skipping non-Latin messages (thanks to Yandrey)(#3115)
Improve compatibility with CockroachDB (#3074)
Improve compatibility with CockroachDB (#3074)
Update the Spanish translation
Add Hungarian translation (thanks to Balázs Úr)(#3108)
Update translation files
Improve send_message command
Make convert_to_scram work with all backends
Merge branch 'sabudaye-pg_prepared_statements'
Merge branch 'pg_prepared_statements' of https://github.com/sabudaye/ejabberd into sabudaye-pg_prepared_statements
Fix previous commit
Check also 'access' rule on account removal
Make sure IQ result is correctly routed on account removal
Fix acl reloading
Bump yconf version
Preserve order of grouped duplicates
Check if error.log is empty after running test suite
Also group duplicated list-like options inside host_config/append_host_config
Group all duplicated list-like options into a single option
Fix loading of third-party modules at startup
Allow multiple `modules` section
Accept a list in c2s_ciphers/s2s_ciphers options
Fix unicode string formatting
Don't overflow 32-bit signed integer in offline tests
Add missing quote
Grant all privileges on all sequences for PostgreSQL in tests
Revert "Escape 'family' field in SQL requests"
Fix race condition in Redis/SQL supervisors startup
Avoid using 64-bit unsigned integers
Escape 'family' field in SQL requests
Don't attempt to create SQL tables when running tests
Merge pull request #3069 from nosnilmot/jwt-custom-jid-field
Add option for JWT field name containing JID
Improve jwt_key validator
Don't lowercase first letter in reason string
Handle the case when JWT key file contains JWK set
Introduce 'gc' ejabberdctl command
Stop SASL application in ejabberd_logger:flush()
Avoid calling to logger module on OTP<22
TravisCI: test against Erlang/OTP 19.3
Use lager on OTP<22.0
Limit result set of disco#items for mod_pubsub
Fix logger initialization on OTP<21.3
Report errors in logger initialization
Make PostgreSQL schema compatible with CockroachDB
Merge pull request #3063 from lnjX/fix/de-comma-setting
Log path to third-party configuration file
Fix error reporting in configuration related admin commands
Don't parse obsoleted options
Log supervisor reports in debug loglevel
Replace lager with built-in new logging API
Flatten strings in ejabberd_xmlrpc error results
msgs: de: Fix comma setting
Convert oauth_expire option to accept timeout values
Improve type spec of properties()
Fix dialyzer warning in #oauth_ctx
Implement X-OAUTH2 authentication for mod_mqtt
Verify http host in web admin only if authentication is missing host
Try removing label as bug
Update ejabberd_xmlrpc to handle binaries in restuple result (#3048)
Check redirect_uri for OAUTH implicit grant
Update Guide links in WebAdmin to website, as local file isn't included
Support custom base path in WebAdmin by using relative URLs (#3043)
Fix startup of supervisors for listening modules
Allow configuring proxy65 port in tests
Bump version of jose to 1.9.0
Update description for Hex.pm
Improve best match
Support OAUTH client authentication
Advertise muc#roominfo_logs in disco#info of the room
Re-tag xmpp dep
Update deps in mix.exs/lock
Bump version in mix.exs
Don't log warning when an option is consulted for uknown vhost
Tag p1_acme and use that in deps
Rename to p1_acme
Add 19.09 Changelog
Update deps
Correctly handle unicode in log messages
Fix unicode formatting in ACME module
Fix unicode processing in ejabberd.yml
Don't call to xmpp_idna
Fix IDNA support in ACME requests
Don't forget to log an error message on IDNA failure
Support IDN hostnames in ACME requests
Don't attempt to create acme directory on ejabberd startup
Slightly improve arg example
Don't allow requesting certificates for localhost or IP-like domains
Improve warning message
Avoid excessive quoting in request_handlers of example config
Bump acme version
Comment `certfiles` section in example config
Use round/0 instead of ceil/0
Fix typo
Remove unused file
Don't auto request certificate for localhost and IP-like domains
Add listener for ACME challenge in example config
Improve ACME implementation
JWT-only authentication for some users (#3012)
mod_jidprep: Don't call gen_mod functions directly
Apply default role after revoking admin affiliation (#3023)
README.md: Clean up wording
Merge remote-tracking branch 'processone/pr/2995'
Add support for XEP-0328: JID Prep
Log Mnesia table type on creation
Replicate Mnesia 'bosh' table when nodes are joined
Merge branch 'master' of github.com:processone/ejabberd
Use email field type to avoid jid capitalization on iOS
Fix typos in issue template
Update issue templates
Add missing ejabberd_auth_jwt:user_exists/2 function (#3012)
Fix BEGIN/COMMIT/ROLLBACK syntax for MSSQL (#2978)
Fix certificate selection for s2s
Add ejabberd_oauth:verify_resowner_scope callback back
Fix the regression introduced in dd57950
Fix some links to Guide in WebAdmin and add new ones (#3003)
Merge pull request #3004 from Slawutich/master
Custom exit message is not broadcast
Use select fields to input host in WebAdmin Backup (#3000)
Fix call to deprecated ejabberd_config:get_myhosts() (#3000)
Provide meaningful error when adding non-local users to shared roster (#3000)
Check account auth provided in WebAdmin is a local host (#3000)
Added gsfonts for captcha
Add another variant of transformation of offline_msg in mod_offline_mnesia
Don't treat 'Host' header as a virtual XMPP host
Revert "Affiliations other than admin and owner cannot invite to members_only rooms"
When join new room with password, set pass and password_protected (#2668)
Improve rooms_* commands to accept 'global' as MUC service argument (#2976)
Fix typo in type spec
Spawn SQL connections on demand only
Rename MUC command arguments from Host to Service (#2976)
Don't use close/2: set stop_reason explicitly
Remove fast_yaml override
Report connection error before waiting for resumption
Add tests for 'vcard' option
Implement reload/3 for mod_http_upload
Add 19.08 Changelog
Adopt mix task to changes in ejabberd_config
Bump version in mix.exs
Update mix deps
Don't retain module option on gen_mod supervisor
Use tagged version for yconf as well
Update deps to tagged versions
Validate BINVAL values of vcard elements as Base64
Introduce 'vcard' option for the modules supporting vCards
Bump pkix version
Explain requirements of the FROM argument of send_message command (#2959)
Don't call ejabberd_cluster from its submodules
Fix db_type validation
Add test that trigger get_only_item in pubsub
For pubsub items with max_item = 1 use order by in sql queries
Don't render CAPTCHA whitelist when CAPTCHA is not configured
Change type of server_host column in mysql.new.sql
Improve SQL timeouts handling
Also catch 'shutdown' exit reason
Improve pattern matching
Implement read-repair for session pids
Remove dead code
Fix race condition when deleting c2s session record
Fix SQL connections leakage
Fix previous commit
Correctly report resume timeout
Expose access_model and publish_model in pubsub#metadata
Generate 'remote-server-not-found' stanza error for non-IDN domains
Improve handling of errors in tree_action/3
Appropriately abort pubsub transaction
mod_multicast service discovery bugfix (thanks to McPo)(#2968)
Improve handling of errors in pubsub code
Apply shaping to websocket connections
Improve hooks validator and fix bugs related to hooks registration
Improve ejabberd halting procedure
Fix default value of resume_timeout
Don't attempt to restart killed lager
Fix typo in log message
Improve SQL pool logic
Revert "mod_privacy: Don't try to look up 'undefined' list"
mod_privacy: Don't try to look up 'undefined' list
Fix UTF-8 support in translation files
Add 'certauth' command to extauth port
mod_stream_mgmt: Allow flexible timeout format
Fix wrong virtual host in mod_pubsub:send_stanza (#2930)
Log an error when JWT authentication is configured without jwt_key
Fix typo
Improve robustness of reading jwt_key option
Get rid of useless code
Don't forget to unregister route when the owning process is dead
Remove Riak support
Mention about a few Riak tests being broken
Explain how to kill stuck common test run
Update docker test README
Fix example on test data set deletion
Report failures of changing net_ticktime
Reset net ticktime on config reload
Allow flexible timeout format in session_expiry option of mod_mqtt
Use econf:timeout() instead of econf:pos_int() wherever appropriate
Improve RPC calls in mod_configure
Fix pending nodes retrieval for SQL backend
Allow more flexible timeout values in the configuration
Change time unit of hibernation_timeout option to 'second'
Fix typos using codespell
Avoid record duplication
Add econf:string/2 validator
Fix opt_type.sh script and re-generate options
Use econf:timeout/2
Handle CAPTCHA forms using captcha_form codec
Add code for hibernating inactive muc_room processes
Bump xmpp version and fix revealed bugs
Fix 'get-pending' command form generation
Remove very old useless comments in ejabberd_xmlrpc.erl
Documentation of mod_http_api moved from source code to Docs page
Remove modules management from mod_configure
Don't hide errors using catch
Compile some regexps as unicode
Bump yconf version
Fix regexp matching
Only respond with occupants list to disco#items with empty node
Improve handling of unexpected iq in mod_muc_room
ejabberd_s2s should start after its supervisors
Fix startup order of ejabberd_sup children
Remove processing of {wait, _} result in gen_mod
Increase shutdown time to 5 seconds
Attach mod_muc_room processes to a supervisor
Improve some validators
mod_http_fileserver: Unregister 'reopen_log_hook'
Use correct virtual host when consulting trusted_proxies
Merge branch 'master' of github.com:processone/ejabberd
Fix broken ejabberd_cluster:call/5
Make sure that configure is run before pc:compile on rebar3
Downgrade jose to version that works with rebar2 and del warning_as_error from it's config
Bump jose version
Don't crash when attempt to get an option for unknown virtual host
Add call/5 and multicall/5 to ejabberd_cluster
Use ejabberd_cluster:call() instead of rpc:call()
Process unexpected messages uniformly
Improve previous commit
Gracefully report invalid encoding of a translation file
Fix formatting
Merge pull request #2900 from aquarhead/protect-muc-owner
Make sure configuration file path always represented as binary()
Fix Elixir modules detection in the configuration file
Gracefully close inbound s2s connections
Add/improve type specs
Improve error handling/reporting when loading language translations
Fall back to map/2 and foreach/2 on single-core machines
Add type specs for mod_adhoc
Improve type specs for ejabberd_s2s
Improve type specs of mod_muc_room
Improve type specs of mod_roster
Avoid returning 'stopped' from ejabberd_hooks:run_fold()
Get rid of unused API functions in ejabberd_hooks
Don't expose internal FSM API of ejabberd_c2s
Don't expose internal FSM API of mod_muc_room
Check virtual host before running the command
Ignore late arrival of an already cancelled timer
Avoid crashing of ejabberd_iq process on invalid callback
Debug hooks
Use maps instead of dict
Use ets and maps instead of dict
Improve formatting of exceptions
Fix return type in try_set_password()
Avoid routing packets through a single process
Fix validator of option ejabberd_service->hosts
Do not call the same function twice
Restore room when receiving message or generic iq for not started room
Limit number of rooms that we return for disco_items from muc
Add forgotten file
Distribute routing of MUC messages accross all CPU cores
Propagate max_fsm_queue to all modules started as gen_server
Make return type of sql_transaction() consistent
Don't call ejabberd_option from ejabberd_options
Fix jwt_key option processing
Use correct virtual host
Fix formatting
Monitor routes
Fix 'request_handlers' transformation
Avoid using ! in ejabberd_router and mod_offline
Read jwt_key from file
Avoid last handled stanzas cache to grow indefinitely
Update Spanish and Catalan translations
Invalidate proper cache when using mam for offline in pop_messages
Fix a condition in ejabberd_auth_jwt
Make count_offline_messages cache work when offline uses mam for storage
Get rid of useless dialyzer instructions
Bump cache_tab version
Fix ejabberd_auth_jwt return types and regenerate ejabberd_option.erl
Authentication using JWT tokens
Cache number of offline messages
Use new ets_cache API in ejabberd_auth
Avoid using broad p1_queue:queue() type wherever possible
Use yconf validator for custom Mnesia schemas
Avoid using broad map() type wherever possible
Use correct rr_type()
Fix type specs
Make sure queue bouncing doesn't yield into infinite recursion
Deprecate 'route_subdomains' option
Use correct stacktrace in logging macros
Use proper loglevel to log resumption failures
Store muc_subscribers in process dict if get_subscribed_rooms not available
Don't propagate downstream already handled message
Call ejabberd_s2s:allow_host/2 with correct virtual host
Report invalid translation strings
Make logging messages more consistent
Check if mod_last is loaded before calling its functions
Use "begin ... end" in logging macros
Deprecated access_commands option
Make ejabberd_xmlrpc working as a listening module again
Don't crash on empty avatar data
Use correct virtual host for s2s options
Avoid code duplication in gen_mod
Let it crash on unspecified option
Update Russian msg file
Update Russian PO file
Respond with 'Bad Request' to unexpected 'Host' header
Validate and set 'version' option at an earlier stage
Run "make translations"
Generate paths for poedit
Update extract-tr.sh script
Improve extraction of translated strings
Change Travis OTP platform from 19.1 to 19.3
Disable Elixir in Travis tests
Fix shaper selection in ejabberd_c2s
Make option 'validate_stream' global
Don't attempt to query 'undefined' active list
Allow multiple definitions of host_config and append_host_config
Correct mod_mix_pam protocol version
Fix usage of TLS in mod_mqtt
mod_pubsub: Check access_model when publishing PEP
Fix creation of type spec for map() options
Rename remaining command arguments from Server to Host (#2908)
Add support for backwards compatibility in command argument names (#2908)
Fix support for nonexistent or empty access_commands in ejabberd_xmlrpc
Require opt_type/1 callback
Generate more readable exception
Set yconf version in mix.exs explicitly
Synchronize macros from rebar.config with mix.exs
Add yconf application to mix.exs
Reflect recent pubsub changes in configuration transformer
Add helper to check xep implementations and versions
Bump supported version of XEP-0355
Remote obsolete pubsub config from tests
Fix component routes unregistration
Remove deprecated pubsub plugins
Use list_to_existing_atom/1 wherever possible
Add PostgreSQL to Travis services
Get rid of "well-known" type
Remove default_db/1 and add default_db/3
Ignore beams compiled by Elixir
Accept output argument in tools/opt_types.sh
Warn about 'service_url' option during config transformation
Fix exception formatting on old Erlang
Fix validator of mod_avatar
Introduce option 'captcha_url'
Remove mod_echo module
Travis CI: Ensure MySQL is started
Add forgotten header file
Use commit id instead of branch name to specify deps in rebar.config
Use new configuration validator
Return jid_malformed error when sending presence without nick to conference
Merge pull request #2651 from Iperity/fix-privacy-race-condition
Debug log to help troubleshoot delegation ACLs
Revert "Fix pubsub compliance XEP-0060 § 7.1.3.6 (#2864)"
Refactor mod_privacy patch; move logic user_receive_packet to user_send_packet.
Fix user_send_packet in mod_privacy; was failing on newly created users
Fix mod_privacy race condition
lock.yml defines locking policy for old issues
Use system_time/1 instead of monotonic_time/1
Protect against bad muc#owner requests
mod_register_web: Don't crash if user exists
Change indentation in ejabberd.yml.example to more consistant
Fix example argument in private_set, don't include Query element
mod_stream_mgmt: Drop unused code
Change implementation of mod_offline use_mam_for_storage
Don't check mod_register restrictions in 'register' command
mod_http_upload: Avoid catch-all error handling
Improve captcha blocking alert wording
Improve captcha.sh script documentation
Fix last commit
Make mod_admin_extra add/delete_rosteritem reuse code from mod_roster
Add data clean up suggested command
Prepare 19.05
Update deps in mix.lock
Update deps
Use different cache tables per auth module
Remove 'register' access rule from example config
Use lager 3.6.10
Merge branch 'master' of github.com:processone/ejabberd
Report better errors on SQL terms decode failure
Fix PostgreSQL compatibility in mod_offline_sql:remove_old_messages (#2695)
Fix typo in Change User Password adhoc command (thanks to	lovetox)(#2884)
Vcard search doesn't support * in mnesia, fix search form (#633)
Check hooks correctness in Travis CI
Write hooks_type_test.erl to correct location
Make static hooks analyzer working again
Fix mod_legacy_auth to reflect recent changes
Don't process failed EXTERNAL authentication by mod_fail2ban
Modify arguments of c2s_auth_result hook
Preliminary support for SQL in process_rosteritems, and move code (#2448)
Don't put duplicate polling attribute in bosh payload
mod_http_upload: Case-insensitive host comparison
Avoid late arrival of get_disco_item response
Handle TCP errors in websockets
Initial Docker environment to run ejabberd test suite
Fix pubsub compliance XEP-0060 § 7.1.3.6 (#2864)
Merge branch 'master' of github.com:processone/ejabberd
Put back the presence and s2s tests in the no_db section.
Raise api hook right before performing the call
Make anonymous auth don't {de}register user when there are other resources
When applying limit of max msgs in spool check only spool size
Remove compiler warnings
Test offline:use_mam_for_storage, mam:user_mucsub_from_muc_archive used together
Do not store mucsub wrapped messages with no-store hint in offline storage
Handle get_subscribed_rooms call from mod_muc_room pid
Do not declare mod_muc as dependency of mod_mam to prevent loop in deps
s2s test depend on Mnesia configuration
Elixir mix build need to use xmpp 1.3.3
Remove deprecated calls
ct_formatter is not needed anymore as Elixir tests have been removed
Use stable xmpp version
Make some standard admin command to get Mnesia info
Fix bug that appears when importing privacy from Prosody (#2872)
Store imported room in the correct ServerHost (#2874)
Set from/to in activity marker messages
Fix typo and remove forgotten log from 492da2ba
Merge pull request #2869 from rstgroup/fix-elixir-umbrella-compilation
Remove logging from REST lib
Always store ActivityMarker messages
Don't issue count/message fetch queries for offline from mam when not needed
Remove Elixir tests entry points as they were removed in december: https://github.com/processone/ejabberd/commit/51cbbf313f478a01cd732a7ee1e21ff356402d0e#diff-098f6bcd4621d373cade4e832627b4f6
Sqlite doesn't recognize concat() so use || on it instead
Cleaner test cleanup
Fix room state cleanup from db on change of persistent option change
Add tests for user mucsub mam from muc mam
Make get_subscribed_rooms work even for non-persistant rooms
Fix escaping for sql part of mamsub from muc mam
Deprecate some listening options
Provide a suggestion when unknown request handler is detected
Provide a suggestion when unknown command is detected
Rename ejabberd_config:similar_option/2 -> misc:best_match/2
Provide a suggestion when unknown module is detected
Provide a suggestion when unknown option is detected
Disable offline_from_mam tests on riak since it doesn't support mam
Improve code for directory deletion
Fix offline from mam on mnesia
Add tests for offline with mam storage
Properly handle infinity as max number of message in mam offline storage
Sort messages by stanza_id when using mam storage in mod_offline
Return correct value from count_offline_messages with mam storage option
Make mod_offline put msg ignored by mam in spool when mam storage is on
Add tests for offline use_mam_for_storage
Remove TLS options from the example config
Remove OMEMO related configuration from force_node_config section
Add mod_offline option for fetching data from mam instead of from spool table
Return "Bad request" error when origin in websocket connection doesn't match
Allow non-moderator subscribers to get list of room subscribers
Fix #2540 Ejabberd doesnt compile as mix umbrella project dependency
Use binary framing in MQTT WebSockets
Merge pull request #2868 from rstgroup/fix-rfc-6455-violation
Fix RFC6454 violation on websocket connection when validating Origin header
Catch potential exceptions in gen_mod:wait_for_process
Reformat try_set_password/4 function
Don't call to mod_register when it's not loaded
Add WebSockets support to mod_mqtt
Fix handling of list arguments on pgsql
Support other socket modules for MQTT
Move websocket options
Improve request_handlers validator
Bump pkix version
Correctly support cache tags in ejabberd_auth
Allow returning HTTP headers in REST responses
Use new ets_cache api in ejabberd_auth
Add hook room_destroyed called when room gets destroyed
Change implementation of misc:unique_timestamp()
Handle cdata in initial data probe of ws module
Make misc:unique_timestamp not overflow microsecond part.
Add hooks for tracking mucsub subscriptions changes
Feed whole image to eimp:identify/1
Fix syntax in Elixir config file
Handle correctly case where ExtraUsername is empty
When making mucsub message from mam archive check for subject
Use xml:lang from stanza when it's missing in <command/> element
Add 'sessionid' attribute when required
Update mod_muc_riak
Update mod_mam dependencies
Decrease ugliness of the ugly code
Change mucsub API for database backends
Add ext_mod paths before checking config (processone/ejabberd-contrib#263)
Return proper error message for duplicate or missing args in http_api call
Log message when trying to execute http_api command with extra arguments
Formating fix
Make http_api command execution exception catcher log also command and args
cache_size not applied to mod_roster on reload_config (#2769)
Fix previous commit
Rename listening callback from start/2 to start/3
Fix issue with creating HostMatch in mod_mam_sql
Use xmpp:get_subtags/2
Don't use deprecated gen_mod:db_type
Fix issue with mam tests
Implement mod_muc_sql:select_with_mucsub
Make misc:add_delay_info properly handle multiple delay tags in element
Add option user_mucsub_from_muc_archive to mod_muc
Include id in mucsub notification message
Add 'config' tag to the reload_config command
Fix Register command to respect mod_register's Access option (#2837)
Update mysql driver in mix.lock also
Update mysql driver
Fix crash in mod_muc_admin:web_page_main/2 caused by just_created (#2830)
Origin header validation on websocket connection (#2821)
Update mysql dependency
Add newline to error_logger log format
Add check for ljid when setting up subscribers
Flip default bounce_groupchat flag value, muc will drop bounces anyway
Add option to mod_offline to make it not bounce mucsub/groupchat messages
Use jid() instead of ljid()
Improve formatting of hook crashes
Delete the ping timer only when timeout_action=kill (#2820)
mod_muc: Simplify room creation checks
Merge remote-tracking branch 'processone/pr/2811'
mod_push: Check for payload in encrypted messages
Fix cond_options with new options
Fix transaction aborting and restarting in ejabberd_sql
allow room recreate for admins even if nonempty
Handle info log level when using MySQL (#2541)
Fix incorrect capitalization in German translation
Document required Erlang/OTP version bump
Bump required Erlang/OTP version to 19.1
mod_http_upload: Log nicer warning on unknown host
Add mqtree in included_applications
Add SQL schemas for MQTT tables
Copy p1_time_compat:unique_timestamp() to misc and make use of it
Replace code using p1_time_compat wrapper with native functions
Remove now() calls that sneaked in in pull requests
Add MQTT listener and module in example config
Prepare 19.02
MySQL: Increase index prefix length for PEP nodes
Update mqtree
Commit back, change reverted by mistake
Update deps in mix.lock
Update mod_mqtt_mnesia.erl
Update deps
Improve update-deps-releases
Merge branch 'pr/2764'
acl for mam_preferences
Updated fast_tls
Add Accept header to requests issued by rest.erl
Pull never fast_tls version
Run "make translations"
Update the Catalan translation
Update the Spanish translation
Add MQTT support
mod_muc_admin: Fix indentation
Merge remote-tracking branch 'processone/pr/2805'
only destroy rooms if mam is enabled
Provide source code filename in *.po, so editors can show the source code
Fix "make translations", got broken in 446e6e6f3
mod_mam_sql: Improve check for empty archive
mod_mam_mnesia: Fix check for empty archive
Merge branch 'mix'
Travis CI: Update MySQL APT repository key
Merge remote-tracking branch 'processone/pr/2763'
Don't crash on malformed 'modules' section
disallow room creation if archive not empty and clear_archive_on_room_destroy is false
check if mod_mam is loaded before calling mod_mam:is_empty_for_room
added cmds to list and destroy empty rooms by ejabberdctl
allow check if archive is empty for or user or room
option to prevent archive removal on room destroy
Don't perform roster push for non-local contacts in mod_shared_roster
mod_push: Improve notification error handling
Once just_created isn't true, use it to keep room process creation (#2787)
Send mucsub subscriber notification events with from set to room jid
Add notice about rooms_unused_destroy using the room history (#2787)
Don't consider room's lack of history when history_size is zero (#2787)
Fix support to restart module with live options in WebAdmin
Handle versioning result when shared roster group has remote account (#2692)
Merge branch 'mod_ping_no_kill' of https://github.com/fdie/ejabberd into 3
catch badarg exceptions on invalid callback procs
Fix argument name consistency
! may raise exceptions on invalid proc
Do not overwrite odbc config file (#2295)
Produce better error for http_api request with extra parameters
Reject request http_api request that have malformed Authentication header
Require that both tag and module matched in from of api_permission
Allow specifying tag for listener for api_permission purposes
Revert "Apply shaping to websocket connections"
Apply shaping to websocket connections
Fix ping IQ reply/timeout processing ("mod_ping" regression since 17.x that may cause resources leakage)
Merge pull request #2622 from aquarhead/rename-functions
Rename two presence functions
Make last commit compile on R19
Make sure that room_destroyed is called even when some code throws in terminate
Fix crash when running reload_config and sql_pool_size option is used
Improve validation of configured language options
Add os_mon to included_application, but start it in ej_system_monitor
Move some apps back to included_applications
Update xmpp in mix
Start ejabberd_mnesia before starting mnesia
And another typo...
Typo
Reintroduce change removed in last commit by mistake
Use tag for xmpp dependency
Update list of applications in mix.exs
Update xmpp dep
Guard agains sm:get_user_info returning offline
Improve private and MAM tests in order to reflect database backends with limited capabilities
Don't produce a crash on config reload when SQL is not configured
Update muc room state after adding extra access field to it
Merge pull request #2748 from area-42/add_acl_for_mam_in_mod_muc
Fix typo in comment
Start ejabberd_logger also when ejabberd:start() is not called
Change a way that tests start ejabberd
Use OTP application startup infrastructure for starting dependencies
Merge pull request #2680 from Iperity/fix-privacy-check-on-presence-probe
Remove slash producing url /admin//additions.js
Update copyright to 2019 (#2756)
Manually update 2017 copyright dates (#2756)
mod_private: Hardcode item ID for PEP bookmarks
mod_offline: make some database callbacks optional
Fix decompressing of custom elements with custom namespace
add acl for mam in mod_muc
Merge pull request #2599 from gardenia/master
mod_mam: more checks for database failure
Try to remove syntax error on old elixir
Remove iconv from vars.config.in
Remove no longer used deps
Update distillery
Remove most Elixir warnings
Update ejabberd version for mix
Add no-store hint to CAPTCHA challenge stanzas (#2730)
Travis CI: Bump Erlang/OTP 21.x version
mod_mam: Additional checks for database failures
Remove elixir tests
Handle Prosody storage attributes key, when, with (#2724)
Handle persist=false in roster items (#2722)
We are handling groupchat in other branch now
Add option to mod_offline that would allow storing group chat messages
Fix PIEFXIS export of user when password is scrammed (#2721)
Search also for _jid when importing room from prosody (#2723)
Parse persistent and archiving room options importing from prosody (#2720)
Remove workaround for old erlang versions
Add code for handling deprecations of get_stacktrace()
Add HTTP listener on port 5280 for admin web interface
Fix a pair of small typos
Merge pull request #2718 from paulmenzel/strip-trailing-space-in-readme
README: Strip trailing space
Remove outdated MIX tests
Add hook on api call
Increase MAX_PAYLOAD_SIZE for PubSub items
Bump xmpp version
mod_roster: Don't set version to "not_found"
Don't require a full JID as argument, instead set a dummy resource (#2710)
When unknown roster version, return an acceptable version ID binary (#2709)
Merge branch 'master' into mix
Fix (un)setting of priority
Get rid of outdated mod_mix module
Merge branch 'master' into mix
Don't lose carbons on presence change or session resumption
Avoid badfun in multicast/6
Fix wording
Fix mod_mix_mnesia get_participants/3 callback
Change default ciphers to intermediate
Define default ciphers/protocol_option in example config
Add CHANGELOG.md file
Fix submission-id and channel resource
Bump xmpp version
Normalize hostname when processing host_config
Bump version of xmpp in mix.lock
Start fast_tls before pkix
Bump xmpp dep
configure.ac: Bump required Erlang/OTP version
Update mix packaging
mod_private: Add "bookmarks_to_pep" command
mod_pubsub: Improve PEP behavior for 'whitelist'
Remove useless config file (#2665)
Add auth:which_user_exist to bulk checking existence of list of users
Add list types to sql_pt
Revert "Let deliver unsubscribe stanza when no roster push is required (#2598)"
Let deliver unsubscribe stanza when no roster push is required (#2598)
Update MIX code to reflect newest specification
Use tagged version of pkix dependency
Fix PostgreSQL compatibility in mod_offline_sql:remove_old_messages (#2695)
Proxy protocol may send additional data after addresses
Update deps
Add support for proxy protocol
Format list of {{name,string}, {value, _}} as json struct name/val
Make mod_http_api assume that missing args of type list are empty list
Keep info about carbons inside session table
ejabberd_s2s_in: Check for subdomain configuration
ejabberd_s2s_in: Check for subdomain certificate
mod_register: Don't advertise IBR unconditionally
Apply new cache options on mod_stream_mgmt reload
Keep last handled stanzas number in cache rather than session table
New command unban_ip (#2620)
Update deps
Drop some macros related to OTP<19
Implement XEP-0410: MUC Self-Ping optimization
Advertise disco#info and disco#items by MUC room
Add xml compression to sql backend of mam
Add specific Var names to CAPTCHA fallback form fields (#2672)
Revert "Upgrade Elixir to 1.6.6 (#2653)"
Upgrade Elixir to 1.6.6 (#2653)
Merge branch 'master' of github.com:processone/ejabberd
Improve tests for mod_private
Fix typo in recent PR commit (#2697)
Bump lager version in mix as well
Merge pull request #2697 from Snowmanko/master
Fix test case for invalid language
Only advertise conversion feature when mod_pubsub is loaded
Bump lager version
Support for XEP-0411: Bookmarks Conversion
Merge pull request #2690 from nosnilmot/stopping-hook
Update - fixed ejabberdctl push_roster description
Relax result matching to fix pgsql keepalive (#2632)
Remove unused link
Add ejabberd_stopping hook
CONTRIBUTORS: UTF-8 encode my name
Use never version of meck
Another attempt for db access on travis
Third time's the charm? Let load scheme before changing permissions
Update CONTRIBUTING.md
Fix command for loading pgsql schema
Try to load db schemas externally on travis
Thank you, contributors
Expand contribution document
Initial contributing document
Merge branch 'master' of github.com:processone/ejabberd
Markdown version is the main README version
Update issue templates
Use new naming for Github issue templates
Handle some malformed URL requests in ejabberd_http (#2687)
Get rid of 'catch-all' statements
Replace dict with maps
Merge pull request #2683 from paulmenzel/use-https-url-in-readme
README: Use HTTPS URL for docs.ejabberd.im
Remove references in configs to http_poll; it was removed in ba69c469b551
Don't suppress notifications on PEP node removal
Privacy lists: set from/to on packet *before* calling privacy_check_packet
Fix mod_http_apt_test
Recover logging of user joining room, lost in 32de9a56 (thanks to elexis1)
Fix for the previous commit
Track presences sent via a multicast service
Merge remote-tracking branch 'processone/pr/2675'
Fix another typo in ejabberd.yml
Fix tiny typo in configuration file
Fix unused variable warning
Local stanzas are routed one by one, not by multicast
Merge pull request #2655 from hamano/missing_redis_sm.lua
ejabberd_logger: Disable debug logging properly
Don't preprocess arguments, format_args verifies and prepares them (#2629)
Don't hide result of mod_*:set_* calls
Add send_ws_ping to c2s
missing priv/lua/redis_sm.lua
Move unwrap_mucsub_message/1 into misc
Move some functions from xmpp back into ejabberd
Do no add 127.0.0.1 address to trusted_proxies list by default
Use newer fast_tls that fixes some issues with tls1.3
Use tagged version of p1_mysql
Recognize not_exists error in http_api
Update p1_mysql
Affiliations other than admin and owner cannot invite to members_only rooms
Merge remote-tracking branch 'processone/pr/2636'
Config template recommend "open" access_model
Enable mod_proxy65 by default
ejabberd_s2s_in: Fix indentation
Change logic for archiving mucsub messages
Fix version in mix.exs
Add pkix to included_applications
Add pkix to mix.exs
Archive messages with type=normal and pubsub payload (like mucsub messages)
Avoid using * in 'certfiles' option of default config
Bump ejabberd version in the issue template
Report available options in lexical order
Run ejabberd_started hook earlier
Add forgotten TURN options to validator
Fix bugs introduced by previous commit
Move certificates processing code to pkix application
mod_avatar: Reduce log level for too large avatars
ejabberd_regexp: Support Unicode
MySQL: Use MEDIUMTEXT for PubSub payload
Update mix.lock
Add odbc connection robustness (#2428)
Update xmpp
Update deps in mix.lock
Allow a subscribed owner/admin to kick lower-affiliation moderator
Allow an occupant owner/admin to kick lower-affiliation moderator
Allow a subscribed owner/admin to kick participants and visitors
Allow a subscribed owner/admin to change participant<->visitor
Update deps once more
Increase validity of generated test ca cert and regenerate all certs
Update deps
Update ISSUE_TEMPLATE
Update ISSUE_TEMPLATE
Allow changing invitation message from muc_invite hook
Recognize more fields that aren't atom in format_room_option
Remove forgotten debug line
Switch more log message to warning level
Switch mod_fail2ban log messages to warning level
Resize SQL pool on configuration reload
Don't hide 'undef' exceptions during config validation
Fail early when loading unavailable SIP or STUN modules
Report real address of a listener
Remove useless type specs
Fix listeners child specs creation
Remove forgotten debug line
Refactor ejabberd_listener
Add ability to configure test to use new sql schema
mod_http_upload: Log error if 'put_url' is reused
Revert "New option tombstone_expiry locks recent room creation after destroy (#2546)"
Improve error formatting
Remove unused variables
Refactor ejabberd listener API
Reintroduce change removed by mistake in 'Improve match macro'
Increase 'max_stanza_size' limit for c2s listener
Set a 'max_stanza_size' for incoming s2s listener
MySQL: Use MEDIUMTEXT for MAM/offline messages
[test] Improve match macro
[tests] Update stream_id from stream:stream after auth
mod_muc_room: Fix the room's CAPS hash
Merge pull request #2605 from af8a524db1/remove_unused_error
mod_register: Remove unused error 'too_many_users'
Trigger hook for user_send_packet in send_message command (#2604)
Merge pull request #2602 from aquarhead/expect-mnesia-up
Expect mnesia_up event when joining cluster
remove some chatty SQL queries by pulling back all groups with opts and filtering in memory.  move a call to get_group_name outside of a loop to eliminate redundant repeated queries
Fix some dialyzer warnings
Merge pull request #2597 from dmitryDemchenko/master
fix for freetds UTF-8 corruption
Bump lager version
Add information about real sender to mucsub message meta
Use newere fast_tls
Don't stop sending pings when receiving timeout for timeout_action=none
Correctly handle empty result with RSM
Get stacktrace out of lager context
Don't set termination reason into presence-unavailable status
ejabberd_s2s_in: Log message on connection close
Sign certs used by tests with sha256
Better formatting of unexpected return from Module:start/2
Fix max_user_conferences in Mnesia to consider only one MUC service (#2556)
Use "localhost" as a default host
Bump xmpp version
Disable cache for anonymous auth backend
Update xmpp
Third attempt to fix the typo!
Fix typo from commit 0bf93eefc
Handle get_presence(Pid) when session doesn't exist (#2547)
Fix typo in command description
Try to update tests to handle recent MUC subscriptions change (#2272)
Return human error messages when calling export2sql with wrong path (#2480)
In response with list of room subscriptions include also events (#2272)
Remove num_active_users as it uses calls to last_activity mnesia table (#2448)
Remove direct calls to muc_room mnesia table in mod_muc_admin (#2448)
Add markdown options as specified in the docs git repo
Add import_prosody explanation from docs git repo
Allow acme and oauth commands to be read by gen_markdown_doc_for_commands
Handle ejabberd_captcha error reports in mod_register_web (#2553)
Merge pull request #2551 from MarcelWaldvogel/configurable-extauth-pool
Make it possible to join extauth pools
New option tombstone_expiry locks recent room creation after destroy (#2546)
mod_mam: Don't strip offline message stanza IDs
mod_mam: Make sure stanza IDs aren't reused
ejabberd_auth: Restore lost case clause
Wait for more data than just <stream:stream> before sending in bosh
Make sure that we always start inactivity timer from drop_holding_receiver
Set wait_timer to undefined when timer was triggered
Fix search for User in vjud
Update xmpp
mod_http_upload: Adjust default value of 'put_url'
Merge pull request #2538 from weiss/tls-by-default
Enable TLS by default (and require it for c2s)
mod_http_upload: Deprecate 'service_url' option
Merge pull request #2537 from rouen-sk/patch-1
Update mssql.sql
mod_http_upload: Avoid function-like macros
Move cancel_timer/1 function into 'misc' module
mod_http_upload: Add "Allow" to OPTIONS response
mod_muc: Don't set default for muc#roomconfig_lang
mod_http_upload: Avoid timers from timer module
mod_http_upload: Don't store "external" slots
Note about Redis requirement in the test suite README
Require Redis version >= 3.2.0
Avoid "ejabberdctl status" crash
Don't forget to remove Lua scripts on uninstall
Clean up contributed code for Redis SM
Merge pull request #2525 from satish-olx/master
Improve wording
Merge pull request #2526 from nosnilmot/enforce-pubsub-option-attributes
Enforce pubsub option required/rejected attributes
Merge pull request #2522 from weiss/bump-max-user-conferences
Ensure that returned priority in a number in mod_admin_extra
Update ejabberd_sm_redis.erl
Lua script for cleaning redis sessions
Adopt code that uses parse_listener_portip after result change
Fix piefxis import of privacy lists (thanks to crosser)(#2412)
Fix piefxis import of vCard elements (#2514)
Improve listener errors formatting
Fix compiler warnings regarding test cases
pubsub_tests: Fix race condition
mod_http_upload_quota: Fix process name lookup
Fix regression: list SASL EXTERNAL mechanism for inbound s2s
mod_muc: Increase 'max_user_conferences' default
mod_stream_mgmt: Remove dead case clauses
mod_stream_mgmt: Add descriptive text to errors
Improve value formatting
Use ejabberd_config:get_version in ejabberdctl status
Merge pull request #2516 from licaon-kter/patch-6
Remove vcard search default value
Better format invalid values when logging them
Better detection of duplicated routes/hosts
Reload internal room's configuration when mod_muc is reloaded
Merge pull request #2511 from licaon-kter/patch-5
Merge pull request #2515 from ChaosKid42/fix_HMAC_in_http_upload
fix HMAC for external_secret
Remove cyrsasl elixir tests, we no longer have it
Only lookup FQDN at configuration (re)loading
Remove stats and time from template
Move XMPP stream and SASL processing to xmpp repo
Use p1_rand in the test suite
Move move randoms module to p1_utils repo
Move shaper to p1_utils repo
Set 'from' attribute for client connections when it is absent
Don't set from/to attributes in resource binding iq
mod_http_upload: Treat file and network errors differently
Merge pull request #2495 from rodrigues/update_ptbr
Don't ignore send() result
Increase default buffer size for mod_proxy65
HTTP Upload: introduce new option 'external_secret'
Merge branch 'master' of github.com:processone/ejabberd
Enable Roster Versioning in the default config file
Merge pull request #2502 from licaon-kter/patch-4
Default config example fix reversed text
Simplify the default configuration file
Update pt-br translations
Don't crash on most common gen_server:call errors
Accept IP address as a return value from resolve/2 callback
Update fast_xml and xmpp in mix.lock
Replace hardcoded disco features with macros
Add check for files missing in hex packaging
Update xmpp
Fix misc:try_url for erlang < R20
Rename obsolete type in comments
Convert test that used moka, and drop that dependancy
Support both filenames and URLs in 'cssfile' option of mod_muc_log
Improve URLs validation
HTTP Upload: increase gen_server call timeout
HTTP Upload: put more info in log messages
Don't crash when encoding {xmlcdata, _}
Update mix.lock
Bump version in mix.exs
Update deps
Avoid code duplication when checking presence subscription
Work-around against public_key incompatibility introduced in OTP21
Don't check packets sent to self
Use lists:foldl/3
Generate HTTP Upload form using xdata codec
Do not ignore a certificate containing no domain names
Don't replace valid certificates with invalid ones
Improve error formatting in mod_http_upload
Support SASL PLAIN by xmpp_stream_out
Don't pass sockmod to xmpp_stream_out
Introduce resolve/2 and connect_options/3 callbacks for xmpp_stream_out
Allow gen_server process registration
Allow reconnecting from disconnected state
Intercept EXIT signal
Add Resource Binding support to xmpp_stream_out
Don't use 'unsupported-version' inside SM <failed/> element
Use error formatting functions from xmpp library
Generate SASL failures on unencrypted connections only for s2s
Fix Erlang limits in ejabberdctl.cfg.example to reflect current situation
Fix typo
Add new options for OOM watchdog
Guard against pres_last=undefined in mod_offline
Remove lowercased duplicates from ejabberd.pot
Restore forgotten translations from previous commit
Update ejabberd.pot
Move mod_irc to ejabberd-contrib
Omit summary form for push tests
mod_push: Include a static body text by default
mod_push_keepalive: Increase default timeout
Fix reset_stream in websocket using pre-rfc protocol
Render roomname, allowinvites and allowpm in room disco#info
mod_push_mnesia: Simplify record matching
mod_push_mnesia: Fix lookup of all host sessions
mod_mam: Don't replace existing stanza ID
New shaper implementation
Make connected_users_info and user_sessions_info DB-agnostic (#2448)
Improve type spec
Get rid of all calls to jlib.erl module
Update mod_muc_room.hrl
Get rid of jlib.hrl/jlib.erl
Do not check for deprecated types
Get rid of ejabberd.hrl reference from the test suite
Get rid of ejabberd.hrl header
Log modules startup
mod_push: Omit summary for outgoing messages
Advertise disco#info and disco#items features in mod_disco
mod_push: Further improve handling of carbons
mod_push: Also include sender/body for carbons
Update mix deps
Avoid lager crash on external authentication failure
Increase start-up/stop timeout in systemd unit
Add ability to modify version string
Merge pull request #2460 from imShara/patch-1
OMEMO enable HOWTO added
upload_tests: Make size error check stricter
Omit 'xmlns' field from 'feature_csi' record
Return detailed error if HTTP upload is too large
Also format gracefully errors returned during module reload
Fix problem in commit 548ef7b835fbf2ad965bb4bb3a6f4e4905717002
Don't crash in bosh when we receive request with RID < prev_rid
Always display room's xdata in disco#info
Display muc#roomconfig_changesubject in room's disco#info
Send trailer and close socket explicitly on stream end
Improve indentation
Merge remote-tracking branch 'processone/pr/2446'
Fix authentication for usernames containing uppercase characters
Get rid of direct calls to 'session' Mnesia table
Bump xmpp version in order to support language tags validation
Support for roomconfig_lang/roominfo_lang
Use 'list-multi' type for XEP-0157 xdata fields
Merge pull request #2438 from licaon-kter/patch-3
Add default_db in the example config
Better report errors of module startup
Don't call Mod:function() in xmpp_stream callbacks
mod_muc_sql: Fix export to SQL
mod_push_mnesia: Apply cosmetic changes
mod_push_sql: Check 'max_user_sessions' limit
Handle "Expect: 100-continue" request header in ejabberd_http
Merge pull request #2431 from yokomizor/fix-xmpp-commit
Merge pull request #2430 from yokomizor/ext_mod-export-add_sources_1
Missing #block_item{} record building with mix
Export ext_mod:add_sources/1
Correctly calculate remaining bytes on file upload
Add support for REST API custom headers
Correctly resolve upload.localhost for the test suite
Add tests for mod_http_upload
Fix typo file:read() -> file:open()
Clean state between requests in ejabberd_http
Optimize HTTP requests memory usage
Handle muc_register_nick success correctly (#2415)
Disable thumbnails creation by default
Support IPv6 connections for PostgreSQL, MySQL and LDAP
Relax check for valid command name in access_persmissions
Use never version of moka
Stop ejabberd initialization on invalid/unknown options
Reduce IQ handler code copying
Fix a typo
Option watchdog_admins has no effect anymore
Bypass account creation error when password is empty, caused by extauth
Get rid of unused rebar instructions
Don't use warnings_as_errors in samerlib
Get rid of ?FUNCTION_NAME macro (it's OTP19+ feature)
Improve logging of external authentication failures
Don't stop on out-of-date requests
Improve robustness of external authentication backends
Make trusted_proxied ejabberd_http option accept ip masks
Teach acl ip matching about ipv4 mapped ipv6 addresses
ejabberd_auth: Don't use cache if it's disabled
mod_blocking: Use #block_item{} record
Ignore any policy when signing a certificate for the test suite
Also generate CA certificates for the test suite
Add validator for 'accept_interval' listening option
Update mix.exs version
Update deps
Merge pull request #2399 from 4z3/ejabberdctl-fix-parser
ejabberdctl: fix parameter parsing
misc: Catch all Base64 decoding errors
mod_http_upload: Add MIME type for M4A files
PubSub purge_node must use a transaction (#2231)
Merge branch 'master' of github.com:processone/ejabberd
Pubsub creation/modification use varchar (#2397)
Introduce new mod_muc option: access_register
Get rid of useless memory/disk usage warnings
Fix get_affiliation/2
Use httpc directly instead of using p1_http wrapper
Use correct headers in rest calls
Add stubs for affiliation-specific backend callbacks
Use correct db backend for remove_mam_for_user_with_peer
Fix mnesia call in mam archive management function
Add commands for cleaning up mam archive
Fix type of rest:url/2
Fix deprecated call injected by 265c7b62
Add flexibility on rest url config
mod_push_keepalive: Reset timeout on messages only
mod_push: Optionally include message sender/body
mod_http_upload*: Remove empty lines after specs
mod_http_upload*: Add function specifications
mod_push: Add function specification
mod_push: Add/adjust debug messages
Update MUC MAM tests
Carefully validate options list
Don't crash on invalid module's sub-options
mod_push: Don't notify on stream errors
Merge branch 'muc-self-presence'
Clear fast_tls cache on configuration reload
mod_roster: Use 'lserver' for configuration lookup
Fix notification payload generated by pubsub
Pass access option from websocket to c2s
Fix csi tests
New schema support for tests. (#2355)
Improve pubsub#itemreply implementation (#2325)
Update the xmpp dependency to support 'parent' attribute
Fix illegal match on previous commit
Improve fix for #2288, don't mask errors on get_item
gen_mod: Support global module processes
gen_mod: Remove frontend process support
Improve mod_multicast
mod_http_upload: Accept characters of any script
Remove old hex conversion functions
Move ejabberd_http:url_encode/1 to 'misc' module
Fix Code format when logging a MUC room kick/ban
mod_client_state: Add 'csi_activity' hook
Merge pull request #2357 from Pouriya-Jahanbakhsh/component-send-packet-hook
fix: run 'component_send_packet' hook in global mode
feat: add hook for sending packet from component
Don't produce a crash dump during intentional exit
Remove unused variable
Merge pull request #2351 from rom1dep/config-order_c2s-direct
config: move section about direct-tls for c2s just under regular c2s config (to ease parameters comparison)
Add support for PATCH http method
Fix process_discoitems_result in mod_multicast
Update eimp
Fix returning value from mod_vcard_ldap's search() callback
Get rid of 'fs' package dependency in mix
Get rid of 'fs' package dependency
Clarify the statement about mod_http_upload thumbnails
Force node config for bookmarks
Set empty least as a default for force_node_config
Move force_node_config defaults into ejabberd.yml.example
Update mix deps
Update mix.exs version
Fetch 'registration_watchers' option from the correct module
Update deps
Remove items of unregistered user (#2129)
Accept atoms in api_permission command lists and commands with numbers in them
Add option --enable-group=xxx (thanks to andreabenini)(#1429)
If mod_last is disabled, return error instead of crashing (#2330)
Report meaningful error when luerl is not available
Set -protocol() directive for mod_avatar
Avoid logging IP addresses in mod_register when it's not desired
Apply some dirty hacks for mod_shared_roster
Hardcode ACL rules used by ejabberd_web_admin
Improve result of XEP-0060 §6.5.9.12 (#2288)
Fix result of XEP-0060 §6.5.9.12 (#2288)
Add transient notification condition (#2267)
Refactor publish_item conditions (#2267)
Fulfill all requirements of XEP-0398 v0.2.0
Add 'new_sql_schema' config option, --enable-new-sql-schema now sets its default value to true (#2239)
Get rid of catch-all in mod_pubsub
Preserve modules order
Merge pull request #2314 from oxpa/mod_admin_extra_hashes
Return errors in admin#add-user command response stanza (#2321)
Introduce force_node_config for mod_pubsub
Add mod_fail2ban to the example config
Strip duplicates from module's options
mod_stream_mgmt: Clean up on timed out resumption
Don't forget to remove mgmt_force_enqueue flag
mod_push_keepalive: Preserve timeout on resumption
Merge branch 'master' into muc-self-presence
Revert "Support for default values in default_room_opts"
Simplify ejabberd_sup code
allow using hashes from "crypto" applications in mod_admin_extra
Fix: mod_offline:store_offline_msg/1 expects a message, not list (#2312)
Simplify result of get_room_affiliation command (#2301)
Merge pull request #2301 from tsaqova/ejabberd_commands_get_room_affiliation
Increase log level for DIGEST-MD5 FQDN
Merge pull request #2311 from nosnilmot/validate-listen-opts
Validate additional listen opts
add ejabberd_command to get affiliation of a user in MUC room
Support for default values in default_room_opts
Use length on fields in mysql indexes
Simplify code for splitting auth string in cyrsasl
Merge pull request #2304 from weiss/run-auth-callbacks-earlier
xmpp_stream_in: Run auth result callbacks earlier
mod_stream_mgmt: Cope with exit during resumption
Merge pull request #2299 from weiss/add-username-to-indexes
sql/*: Add username to peer indexes
Merge pull request #2297 from af8a524db1/move_make_rand_string
Move make_rand_string() to 'randoms' module
mod_carboncopy: Apply cosmetic change
mod_carboncopy: Copy outgoing MUC PMs
Move some log messages to debug level
Use nicks in disco#items or disco#info report
Add 'negotiation_timeout' to the known options list
Introduce 'negotiation_timeout'
mod_admin_extra: Fix srg_get_info with '@all@'
Don't emit validator's warning if the module is not found
Replace ?MYLANG with connection's language wherever possible
Push blocking related IQs from bare JID
Don't inject node name inside "id" attribute
Don't ask other nodes to invalidate cache when the key is not updated
Fix 'badmatch' crash
Introduce 'access' option for mod_block_stranger
Cache 'isuser' queries to external auth program
Improve example extauth script
Handle gracefully that mnesia is already loaded when starting tests
Export helper function
Export helper functions
Export aux functions from mod_muc_room
Rename some keys and functions for clarity
Update incoming stanzas counter on invalid XML
Better solution for a previous fix
Don't forget to add invalid XML responses to sending queue
Fix external components unregistration
Introduce option 'global_routes' for ejabberd_service
Fix indentation
Change formatting of commands markdown documentation
Add case on create_room, avoid useless call
Really run use_cache/1 and cache_nodes/1 callbacks for mod_mam
Let a MUC room to route presences from its bare JID
Merge pull request #2274 from Torxen/feature/fixed-return-value-mod_muc
Dialyzer checks always failed because the return value of the function 'get_subscribed_rooms' in 'mod_muc_sql' is different to the defined value in 'mod_muc'. Fix was to update the return value in 'mod_muc.erl'.
Remove 'iqdisc' option
Bump xmpp version
Merge branch 'master' of github.com:processone/ejabberd
Rely on use_cache/1 callback in mod_caps
mod_stream_mgmt: Abort connection on count error
Introduce option 'validate_stream'
Fix type spec
Commands markdown also lack arguments when policy=user
Introduce 'rate_limit' option of mod_avatar
Merge branch 'master' of github.com:processone/ejabberd
Export is_online/1 function
Merge pull request #2266 from mieciu/master
Fix MySQL error server_host used in key specification without a key length
Improve log message when module startup has failed
Another try to fix travis
Properly escape string in travis config
Print something when doing tests in travis, as not doing that get us killed
Don't run tests in verbose mode on travis
Fix compilation ordering in mix by s/-behavior/-behaviour/
Fix mod_roster start invocation in elixir tests
Fix elixir tests
Use correct default when getting list of modules from config
Remove line left from debugging
Start ejabberd_config earlier
Disable riak in travis
Run tests only on backends enabled by configure
Match all possible values in mod_privilege checks, or we get crashes
Fix exception in mod_privilege:process_presence_in
Bump sqlite deps version
Fix elixir tests
Fix processing of ldap_memberattr_format_re option
Don't return undefined from ejabberd_config:get_myhosts()
Use named functions instead of carrying self as argument
Restore original return value to ejabberd_config:add_option
ejabberdctl: Omit redundant erl option
mod_caps: Only store CAPS if contact is subscribed
mod_caps: Fix indentation
Improve logging of idle s2s connections
Find and fix typos using 'codespell'
Fix a typo in call to create_captcha()
Introduce option 'captcha' for mod_block_strangers
Fix more tests
Adopt tests to changes in xmpp
Switch to newer fast_xml and xmpp and update record fields in the code
Handle ignore from xmpp_socket callback start
Reduce log level for unexpected XML input
mod_block_strangers: Bounce groupchat to bare JID
Fix a typo in mod_caps
Fix tag used in luerl dependency
Merge branch 'mod-default-options'
Introduce new gen_mod callback: mod_options/1
Move luerl as optional tools dependency
Remove deps override on mix
Merge remote-tracking branch 'processone/pr/2238'
Fix typo /this/it/
Update 'pubsub_node' column name for DB export
Do not try to start ezlib application too frequently
Return debug message back
Sync mix and rebar for eimp dep
Improve validation of 'convert' option
Include acme deps in release, fixes f2c3fe8ac
Use correct name of new rebar command
Call configure on deps in separate rebar command that compile
Use override syntax that rebar3 accepts
Get rid of a call to misc:have_eimp()
Merge branch 'master' of github.com:processone/ejabberd
Always build eimp dependency
Don't report errors when trying to remove not existing files in make install
Copy sh_to_ask function from xmerl_regexp.erl
Merge pull request #2221 from licaon-kter/patch-1
Fix example config macro names
Improve logging of failed s2s EXTERNAL authentication
Fix detection of rebar3
Improve resolving of system deps
Add mix dependencies for acme support
Note about direct-tls connections in example config
Include newly releases fast_tls/esip/stun in mix.lock
Update mix.lock
Update deps
Remove old docker specs
Prepare mix for 18.01
Update mix deps
Handle error case from code:lib_dir in ResolveDepPath in rebar.config.script
Update mix deps
Update deps again
Update mix deps
Update deps
Fix indentation in commented example
Report fs not suported on SunOS (#2204)
Send privileges if at least one of them is set, don't require all to be set
Create CODE_OF_CONDUCT.md
Merge branch 'master' of github.com:processone/ejabberd
Ignore result of sending stream trailer in test suite
Delete old .so and executable files before installing new one
Make all install target rules as .PHONY
Refactor code for installing binaries
Process 'name' option for all route-registering modules
Update copyright dates in header files
Don't display copyright dates in vCards of services
Use TLS defaults from fast_tls
Update copyright dates
Refer to new fast_tls version
Return `true` or `false` from send() callback
Merge pull request #2202 from weiss/bounce-to-stranger
Fix ejabberd command privacy_set
Merge remote-tracking branch 'processone/pr/2203'
mod_proxy65: Expand @HOST@ keyword in 'hostname' option
mod_block_strangers: Bounce an error message
Make mysql and pgsql one of the default module for Mix
Regenerated mix.lock file
Merge branch 'master' of github.com:processone/ejabberd
Repair hosts check during certfiles validation
Fix stun/esip mix deps
Return default certificate on domain mismatch
Let mix pass compile ejabberd as dependency
Update mix spec
Update stun and esip
Fix check_opt_range when no boundary is configured
Merge branch 'master' of github.com:processone/ejabberd
Return send() result to the caller
Don't force rsm when max_items is not defined (#2189)
Revert "Include os_mon application"
Revert "Start os_mon application"
Fix a regression in xmpp_socket
Start os_mon application
Adopt tests to changes introduced by b54e1e49ba6794725bead67d530b50ab89ce078b
Use bare jid when processing roster subscriptions
Rename mnesiadb
Add missing application building with mix
Include os_mon application
Prepare mix for 17.12
Merge pull request #2188 from weiss/fix-acl-reload
Update the test suite to support new XMPP socket API
Forget old access/shaper rules and ACLs on reload
Add new schemas for SQLite and MySQL
Merge branch 'no-more-ejabberd-receivers'
Get rid of ejabberd receiver
Cleanup rebar.config
Remove obsolete option
Update dependencies
Revert "Don't set  twice"
Fix a typo in comment :)
Don't set  twice
Rely on Server Name Indication for incoming Direct-TLS connections
Don't let privacy list prevent local roster update
mod_muc_admin: Fix last timestamp retrieval
Fix commands rooms_unused_list and _destroy
Fix race between join_cluster and ejabberd_mnesia (#2079)
Disable test for now
Update expected error type in test
Let mix aware of unpackaged hex.pm dependencies (#2170)
Add pubsub#multi-items to features list (#2162)
Fix mix_sql features and options
Merge pull request #2164 from angelo-chan/master
ejabberd_sm: Fix get_session_sid/3
Change loglevel of TLS failures
send_direct_invitations accepts only user jids
Set disk_almost_full_threshold to 99%
Don't crash on malformed IQ
Log a warning when a disk is almost full
Disable default alarm handler
Handle also process_memory_high_watermark alarm
Kill and restart lager when it's overloaded
Fix processing order
Avoid excessive logging of SQL failures
Rewrite ejabberd system monitor
Merge pull request #2167 from weiss/last-pep-items-to-owner
Send last PEP items to owner on initial presence
Merge pull request #2158 from bowlofeggs/su-with-sh
Only allow compression after SASL
PubSub: Add missing Nidx building records from sql result
add muc_online_room_by_regex to mod_muc_admin to filter list online rooms
mod_pubsub: Send last items on initial presence
Merge pull request #2160 from weiss/publish-options
Support pubsub#publish-options PRECONDITIONs
Revert removal of certfile option on http listener
Update example configuration
Fix typos in mod_legacy_auth and mod_register
Use xmpp:try_subtag/2 wherever possible
Use /bin/sh as the explicit shell when using su in ejabberdctl.
Include <x/> tag in presence errors related to nick change
Better process subtag decoding errors
Log warning on empty wildcard paths
Don't call pkix_is_self_signed/1 too frequently
Eat less memory during building certificates graph
Replace s2s_cafile with ca_file in ejabberd.yml.example
Speedup certificate chains creation and validation
Compile sql_pt early
Avoid infinite loop between self-signed certs
mod_muc_room: Fix typo
Bump xmpp and fast_xml revisions
Improve code using new xmpp API
Use ejabberd_cluster:send() in SM/C2S
mod_offline: Always ignore groupchat messages
Set executable permission on mac_listener when installing (#2138)
mod_muc_room: Include 110 status on shutdown
mod_mam: Never store MUC messages in user archives
Windows does not have /tmp, fallback to /home/chris/conf
Fix num_subscribers on node metadata (#2122)
Fix session table cleanup
Add missed server_host column in pg.new.sql
Merge branch 'master' of github.com:processone/ejabberd
Adapt test to changed error
Improve muc#roominfo and muc#roomconfig forms
Introduce option 'ca_file'
Don't crash on unexpected XML events
Fix minor typo in comment
Get rid of unused variable compile warning
Fix function clause on filelib:wildcard/1
Fix SQL serialization
Add Id attribute in stanza built by send_message command
Use ejabberd_pkix API in mod_sip
Move 'certfile' based options in a single place
Get rid of meaningless log message
Fix a bug introduced in the previous commit in ejabberd_sql_pt
Update URL to IM Observatory
Add notes about s2s_cafile
Fix filtering of rebar list-deps
Modernize the example config a bit
Update deps
Make update-deps-releases.pl work with older perl
Change file mode of ACME certficates
Re-read ACME certificates on config reload
Fix renew_certificates ejabberdctl command
Log a message when a user gets registered
Don't forget to include intermediate ACME certificate
Fix ACME options validation
Prepare user and host arguments in get_user_rooms command (#2064)
Fix elixir tests
Improve ACME options validation
Merge branch 'master' of github.com:processone/ejabberd
Switch riak backend to leveldb on travis
Move ejabberdctl ACME commands to other location
Make ACME code working with ejabberd_pkix
Fix sed invocation that was incompatible with FreeBSD sed
PubSub: PEP services must send notifications to the account owner (#2108)
Allow writing custom modules in own path (#1327)
PubSub: Cleanup tree requests, rename pubsub_node.type->pubsub_node.plugin
Let validator know about c2s_dhfile
Fix select_type race on plugin_init
Cleanup pubsub subscriptions quering, fix pep case
Improve ACME description
Improve some error log messages
Fix mod_mam reloading
Avoid badarg error when running get-deps before ./configure has created src/ejabberd.app (#2103)
Makefile.in: Fix "make clean && make"
Merge branch 'lets_encrypt_acme_support' of git://github.com/angelhof/ejabberd into angelhof-lets_encrypt_acme_support
mod_stream_mgmt: Improve logging on timeout
mod_mam: Simplify 'message_is_archived' callback
mod_mam: Improve handling of forked messages
Announce support for stanza IDs
mod_mam: Add a few function specifications
mod_mam: Apply minor cosmetic changes
mod_mam: Don't store from 'sm_receive_packet' hook
Halt ejabberd if the top supervisor fails to start
Explain what is needed for the acme configuration and other small changes 1. Add a request handler in ejabberd_http and explain how to configure the http listener so that the challenges can be solved. 2. Make acme configuration optional by providing defaults in ejabberd_acme. 3. Save the CA that the account has been created in so that it creates a new account when connecting to a new CA. 4. Small spec change in acme configuration.
Use xmpp:io_format_error/1 wherever possible
Implement parentnodes seek for hometree (#1921)
Rewrite pubsub export to sql (#1571)
Assign failed_auth ETS table to another owner
Fix a record default
Get rid of forgotten debug message
Properly store <subject/> element
Configuration file changes Explain the acme configuration options
Improve some type specs
Improve a diagnostic text
Fix a test related to mod_caps
mod_mam: Make sure archived message isn't bounced
Cleanup some headers
Add forgotten type specs
Use new API for IQ routing
Merge pull request #2096 from weiss/always-add-stanza-id
mod_push: Avoid notification duplicates (again)
Add fs as dep in mix.exs
mod_mam: Always strip stanza IDs
mod_mam: Fix indentation
mod_mam: Ignore non-message stanzas earlier
mod_mam: Make sure a stanza ID is always added
Prepare version 0.6.1 of XEP-0313 (MAM) support
ejabberdctl: Fix 'read' syntax for non-bash shells
Erase transient certificates on exit
ejabberdctl: Fix paths for release build
Unregister commands when stopping node only if it's last one (#2083)
Define flags that depend on erlang version in mix.exs
mod_push: Avoid notification duplicates
Remove code left from debugging
Simulate vars usage in ejabberd_sql_pt to avoid unused var warnings
Don't start hosts for disabled backends from CT_BACKENDS passed to make test
Use correct table field name in sql query
Remember previous German translator
Merge pull request #2081 from nekoswag/master
Log warnings for c2s/s2s certfile option
Bug Fix The dictionary returned after the directory call contains a meta key whose value is a JSON dictionary. This is now taken care so that only bitstring values are kept as resource URIs
Disable server_host warnings
Add SQL_INSERT macro and update SQL queries to use server_host field
Fix pkix:validate() return value
updated de.po
Remove -include() directive for unused header
Clarify some error/warning messages
Avoid using "bag" ETS type for certificate storage
Start even if there are problems with fs application
Lower log level
Introduce 'certfiles' global option
Fix sql query
Typo
Use store_room where possible
Fix sql syntax error in lite.sql
Don't use depraced functions
Optimize muc subscriptions handling
Enforce module_name/1
Add missing type conversion from 675cc3e
Do not bind unused tail from 675cc3e
Allow auth and pubsub plugin to use Elixir module
Show real jid in mucsub subscription change events
Improve --enable-system-deps
Fix last commit
Add mucsub event for subscribers list changes
Merge pull request #2028 from weiss/increase-queue-sizes
Omit "ProtectSystem" option from systemd unit
Delete cached item on node removal (#2071)
Update Greek translation (thanks to James Iakovos Mandelis)
Update SQL archive index to match mysql.sql
Fix typespec
Don't store xdata() in Mnesia table
Simplify backend interface for mod_push
Improve ejd2sql logging
Fix typo
Make it possible to export push_session table to SQL
Add SQL support for mod_push
Adopt 'make install' to updated output from 'rebar list-deps'
Don't forget to convert ljid() to jid()
Make it possible to convert to SQL for any current db_type
Allow dynamic node options on sql backends
Get next record before deleting previous on, in case it's last one (#2069)
Cosmetic change, remove useless case
Fix pubsub test, title not mandatory
Fix delete item from unregistered user (#2067)
Fix another typo ;)
Fix typo
Mix _xmpp-server and _xmpps-server SRV records
Add basic PubSub meta-data support (#1421)
Mention XEP-0368 support
Add missing fix from 07a193d4d, Fix purge_offline (#2057)
Merge pull request #2065 from jorjeb/mix-enable-graphics
Support for --enable-graphics in mix.exs
Update Hebrew translation (thanks to Genghis Khan)
Merge pull request #2023 from rom1dep/endings
Merge pull request #2052 from suchatorg/patch-1
Update gl.po
Reflect changes in the xmpp lib
Send presence-unavailable when expulsing a participant
Fix ZH translation
Merge pull request #2047 from fotock/patch-1
Update zh.po
Don't crash when Host header is missing
updated and extended German translation
Update Catalan translation
Update zh.po
Update zh.po
Fix a typo: meta -> viewport
Don't include CSS, javascript and image data directly in the code
Better handle mobile devices in CSS of mod_register_web
Resend presences and history if presence possesses <x/> MUC element
Update Russian translation
Don't crash when 'from' is undefined
Update French translation
Update Czech translation (thanks to Jan Pinkas)
More fix in mod_http_fileserver to log URLs with/out query elements (#2021)
Update pl.po
Update Spanish translation
Updated all translation files
Improve logging of mismatched Hosts
Log request in access.log even when Host doesn't match
Don't report Host mismatch as an error
Correctly handle mod_client_state (re)load
Accept routes in Host header and map them to vhosts
Fix warning when compile with newer elixir
mod_stream_mgmt: Increase 'max_ack_queue' default
Increase 'max_fsm_queue' default
Fix crash in mod_http_fileserver when logging URL with query elements (#2021)
Install binaries with 755 permissions
Remove find-outdated-deps script, we have better replacement for it
Generate more readable code for run_fold hooks
config: makes line endings consistent when followed by '-'
config: makes line endings consistent when followed by ':'
Install eimp binary with +x attribute
Prepare mix for 17.09
Fix race introduced by ffdaff374 on ejabberd_mnesia init
Make sure Riak gets compiled on OTP20
Fix function clause introduced by c17ec50e3a
Don't forget to route presence-unavailable
Pubsub: implment '6.5.7 Requesting the Most Recent Items'
Remove useless condition
PubSub: add RSM support for mnesia backend
PubSub: enforce controls on publish and delete
mysql.sql: Use multi-column index on username/ID
harden ejabberdctl (#1977)
Fix xref error
Unbind unused variable
Remove calls to deprecated functions
Update dependences
PubSub: fix get_items behaviour with mnesia
Merge branch 'master' of github.com:processone/ejabberd
PubSub: add correct order when requesting all items
Add support for XEP-0368: SRV records for XMPP over TLS
When running "make translations", use the new tools/prepare-tr.sh
Remove remaining files of old contrib/ dir
Simplify prepare-tr.sh to work with new extract-tr.sh
Move prepare-translations.sh from contrib to tools/prepare-tr.sh
Remove forgotten export_all
PubSub: fix RSM support (#1994)(#2Â014)
PubSub: fix node_options, default options only apply on first plugin
mod_http_upload: Don't ignore 'custom_headers'
Improve presence-error processing
Call earlier deps configure scripts durring compilation
Fix command set_last that always returned code 1, error (#2010)
Sync containers from rroemhild and add instructions in README (#1655)
Add mod_avatar to the example configuration
Catch all p1_fsm errors
Use eimp instead of ImageMagick calls for thumbnails creation
Pre-install libgd and libwebp
Remove OTP20 from Travis tests for now
mod_mam: Simplify check for anon MUC JID filtering
Reuse some translation strings
Replace translate:mark/1 with ?T() macro
mod_mam: Refuse filtering anon MUC queries by JID
Add script to extract translation strings
mod_push_mnesia: Fix typo in error message
Add some recommended TLSOPTS as comments in the default config (#2004)
Also replace vcard-x-update in direct presences
Merge pull request #1996 from nosnilmot/ejabberdctl-quote-peer
Fix iexdebug and iexlive commands (#1981)
PubSub: broadcast updated configuration (#1945)
Add 'width' and 'height' to avatar info
Add GIF support
Introduce mod_avatar
Add riakc dependency version
mod_push_keepalive: Remove unused 'db_type' option
Quote $PEER in ping command to avoid hostnames containing "-" being interpreted as arithmetic
Introduce option 'allow_transports'
The redis_reconnect_timeout was no longer used (#1983)
Simple optimization in get_room_occupants_number command (#1964)
Really delete cache on set_data()
Always accept messages from local (sub)domains
Fix a typo and improve logging message
Fix version of jose library
Solve Travis build xref problem Travis build failed on xref because some functions that I used did not exist in OTP versions 17.5, 18.3 Those functions are: ets:take/2, lists:join/2, erlang:timestamp/0.
Replace example config of drop_chat_states with queue_* in mod_client_state (#1985)
Block messages from strangers before mod_mam/mod_offline processing
Deprecate `s2s_use_starttls: required_trusted`
Introduce 'redirect_url' option for mod_register
Fix deletion of multiple offline messages using WebAdmin (#1962)
Fix a typo
Remove some unused variable warnings, replace lists:join with string join
Add forgotten caching options to the validator (thanks to Jan Pinkas)
Fix 'make install' to work with new output from rebar list-deps
Rewrite muc_register_nick and muc_unregister_nick to be DB independent (#1954)
Recompile rebar script with OTP17.5
Use forked repo of Riak Erlang client
Explicitly match against <domain/resource>
Ignore some options from rebar.config
More whitespace changes
Whitespace change
Remove debugging script
Merge remote-tracking branch 'upstream/master' into lets_encrypt_acme_support
Show SANs in list_Certificates
Acquire certificates for all subdomains of a host and include them in SAN
List the possible ca_urls in example config file
Clean run_acme testcase
Remove partial RSA key support
Add certfile when acquired
When creating room, set option to ensure config is set in muc_room table (#1954)
Fix crash when destroying room without providing reason (#1954)
Remove some debugging INFO_MSGs
Delete a development acme module
Merge remote-tracking branch 'upstream/master'
Merge remove_account_option branch
Cleanup some comments:
Add acme certificates for all configured hosts in ejabberd_pkix
Add behaviour ejabberd_config in ejabberd_acme in order to validate the config
Apply cosmetic changes to previous commit
Suppress push notifications for online clients
Fix mod_multicast start and reading of configured limits (#1949)
Preserve correct order of deserialized XML elements
Add OTP 20.0 to Travis testsing platforms
Get rid of deprecated crypto functions
mod_stream_mgmt: Delete 'c2s_init' hook
mod_stream_mgmt: Remove outdated TODO comment
Don't attempt to access(2) a certificate file
Revert "Temporary remove recent last_item refactor"
Merge remote-tracking branch 'processone/pr/1938'
Temporary remove recent last_item refactor
Let 'domain_certfile' take higher precedence
Apply URL decoding wherever possible
Change some specs
Add throws when http requests fail This was done in order to show the unexpected code in the top level
Add support to revoke a certificate by providing the pem This is important so that a user can revoke a certificate that is not acquired or logged from our acme client
Move the ca_url to the config file
Fix typo from 9c5427e0c
Remove the new account option from get certificate. There is no reason for having this
Format expired certificates differently in list_certificates
Process on_user_offline only from valid sessions
Fix regression introduced by b82b93f8f0c229e
Remove temporary debug
Use correct c2s process sending PEP with multi devices
PubSub: refactor send_last_items remove send_loop
Merge pull request #1926 from weiss/import-metronome-pep
prosody2ejabberd: Support PEP import
prosody2ejabberd: Remove superfluous 'catch'
Renew certificate now renews all saved certificates that are close to expire Before this commit renew_certificate only checked the hosts in the config file and renewd the certificates for those. However the user can request certificates apart from the hosts in the config file so he should be able to also renew them.
Revoke Certificate: Jose Private Key Instead of signing the jose object with the account private key, it now signs the object using the certificate private key. This is useful in case the user wants to revoke a old certificate whose account key doesn't exist anymore.
Support getting certificates for domains not specified in the configuration file
Rename remove_room hook back
Add support of section 4.9.3.16 on rfc6120
Fix pubsub send_loop after 3fec7824
Merge pull request #1912 from mathiasertl/master
fix typo
Remove some debugging functions
Introduce 'hosts' option
Implement renew_certificate command This command renews the certificates for all domains that already have a certificate that has expired or is close to expiring. It is meant to be run automatically more often than the renewal process because if the certificates are valid nothing happens
Try catch when formatting certificates
Change certificate notAfter to 90 days As stated in Let's Encrypt FAQ: https://letsencrypt.org/docs/faq/
Fix tests for 8679cfd2f
Rename stop_all_connections to stop_s2s_connections for consistency
Compile mod_push early as it defines behaviour
Get rid of export_all
Replace gen_fsm with p1_fsm to avoid warnings in OTP20+
Merge remote-tracking branch 'processone/pr/1914'
ejabberd_c2s: Fix priority of 'certfile' option
fix FIREWALL_WINDOW option
Fix warning in previous commit
Merge pull request #1881 from weiss/push
Remove unused 'managers' option, related to the deferred XEP-0321 (#1443)
Fix missing validation from 633b68db1 (#1900)
Add minor details (#1353)
Prepare packaging for 17.08
Keep disco#info on PEP compatible with XEP-0060 (#1717)
Move pubsub sql export to pubsub_db_sql module
Fix Xref from 5dcc97c
Change policy of user_resources command
Preliminary export PubSub data from Mnesia tables to SQL file (#1571)
Improve return format of get_certificates command
Implement verbose list_certificates option
Merge branch 'master' of github.com:processone/ejabberd
Fix clustering table reg_users_counter (#1889)
Merge pull request #1837 from marcphilipp/feature/set_room_affiliation_test
Merge branch 'master' of github.com:processone/ejabberd
Fix getting cached last item (#1814)
Merge pull request #1903 from himawri/fix_pubsub_spec
Fix spec for mod_pubsub:subscribe_node
Fix PubSub send last published items (#1572)
Fix PEP node removal (#1839)
Fix disco#items on PEP service
Fix PEP node identity (#1717)
Update spec from custom and allow modules dependencies (#1740)
Fix extauth.py so support : in passwords (thanks to jmberg)(#1676)
Finish revoke_certificate and add specs 1. Add a try catch in the final revoke_certificate function 2. Also delete the certificate from persistent memory when it is done revoked
Request basic auth dialog from browser
Revert "Fix get_module_opt call in mod_block_strangers"
Generate log messages when websocket is closed due timeouts
Fix get_module_opt call in mod_block_strangers
Support certificate revocation
Set high water mark in lager for all backends
Fix nick bug with MUC on riak
Add muc related hooks
Update OTP version check by configure
Ability to filter passwords from the log in mod_http_api (#1888)
Sync fork with upstream
Add an erl_opt so that rsa can be used when the otp version is enough
Update oauth2 dependency
Encode strings using a library function and not my custom made
Add a try catch arounf list certificates
Fix errors from 1a0db3d
Describe commands arguments and results in ejabberd_sm, ext_mod, mod_mam
Fix indentation of commands lines
Add mod_push_keepalive
Support XEP-0357: Push Notifications
Fix errors when running ejabberdctl as root
Add ability to update changelog in update-deps-releases
Update cache_tab and xmpp dep
Merge pull request #1869 from wahjava/master
Update fast_tls
Don't add indentation after single item result in docs
Use string:join instead of lists:join
Improve formatting of documented API parameters
Pretty print list-certificates
Merge pull request #1871 from rstgroup/master
Fix old route record in mnesia's route table haven't been remove when restarting in some cases (#1184)
Print validity in list-certificates
Add a stub for the list-certificates command
Remove httpdir from some function arguments as we now use the built in ejabberd http server for authorizations
Save acquired certificates in persistent storage
Change the persistent data structure from a record to a proplist This is done so that possible future updates to the data structure don't break existing code. With this change it will be possible to update the data structure and keep the same old persistent data file, which will still have the expected list format but with more properties
Separate the persistent data structure functions
Make some persistent data wrapper functions
Fix ERLANG_OPTS when setting INET_DIST_INTERFACE
Expand catch block used to report errors in doc generator
Fix args_examples from last commit
Describe even more command arguments and results in mod_admin_extra
Add refresh repos option in update-deps-releases
Update fast_tls
Solve acme challenges using built in http server
Fix ERLANG_OPTS end lines when setting FIREWALL_WINDOW (#1856)
Changle acme file permissions Also changed some specs
Add the certificate directory in ejabberd.yml.ecample
Clean up code by adding throws instead of passing the error value
Clean up get_certificate code
mod_privacy: Don't crash while copying c2s state
mod_privacy: Apply cosmetic change to type spec
Fix set_presence command to work in recent ejabberd
Add copyright and fix description for some sources
Start gen_mod from elixir tests
Improve elixir tests
Handle new possible result from ejabberd_config.add_option
Remove tests for old commands interface
Make ejabberd_cluster modular
Remove old command calling interface
Close accepted socket if sockname/peername has failed
Add integration test for set_room_affiliation
Split ACME module into two 1. A communications module that handles all requets/responses and other low level stuff that have to do with the ACME CA 2. A head module that will do all the useful stuff
Add support for command get_certificates, very crude
Fix invalid argument in get_messages_susbset
Avoid useless calls on simples subscriptions (#1313)
Add allow_local_users to mod_block_strangers (#1804, #1809)
Fix Salt import from prosody SCRAMmed password (#1803)
Fix clone code in update-deps-release
Update deps
Fix problem with updating deps in rebar.config for non-tags
Don't use asn1rt:decode, it's not available on R20
Quote paths to allow spaces (#1789)
In offline export to SQL, first write all DELETE, later all INSERT (#1509)
Update fast_tls
Improve update-deps-releases deps parsing
Support get-cert, revoke-cert. Also cleaned some typespecs
Fix username in mam export (#1510)(thanks to themaverik)
Write validator for mod_multicast's limits option
Use YAML syntax for limits option in mod_multicast
Catch exception that may happen when sending data over websocket
More explicit bosh configuration handler
Merge pull request #1793 from marcphilipp/bugfix/set_room_affiliation_master
Don't let a receiver to crash if a controller is unavailable
Indent using Emacs
Removed some ?INFO_MSG
Support new_cert, make certificate request
Fix mod_muc_admin:set_room_affiliation
Fix outgoing_s2s_timeout description (#1684)
mod_client_state: Reset state on session resume
mod_stream_mgmt: Add missing function specs
Improve API documentation generator
Make ext_mod api return rescode
Fix invalid {args,result}_examples in mod_muc_admin
Generate better errors when not being able to generate documentation
Another tweak to md generator
Update markdown api document generator
Add support for solving http-01 challenge
Cleanup acme_challenge.erl, move types and records in ejabberd_acme.hrl
Fix srg_user_add/del for non-Mnesia database backends (#1780)
Derive the alg field of the JWS object using a erlang-jose library function rather than hardcoding
Add pubsub import from prosody/metronome
Catch exception from Elixir.ExUnit.Server.cases_loaded
Fix OTP-17.5 support
Show operations to perform before asking to apply them
Synchronize fork
Refactor get requests, Implement authorization handling functions
Bump xmpp version
Fix IP address parsing for mod_metrics
Fix refactor bug on wait_status
Prepare package for 17.06-beta
Update esip and stun dependencies
Major Refactoring, Separated Logic from Requests
Add script for managing updates to deps
Remove luerl from floating_deps
Add new-authz, refactor the http requests that all used the same code
Switch access rule delete_old_users with protect_old_users (#1772)
Refactor the http response handlers. Encapsulate some dangerous calls with try catch.
Make Stylistic Changes in order to conform to guidelines: 1. Remove trailing whitespace 2. Remove Macros 3. Handle all erroneous response codes the same way 4. Add specs Also don't return nonces anymore when the http response is negative.
Implement some basic account handling functions
Add more ipv6 loopback addresses
Allow api access on both ipv4 and 6 loopback addresses
Fix elixir tests on elixir 1.4
Add missing ,
Improve export2sql explanation; remove obsolete and duplicated command
Update dependencies
Fix and document push_roster_all command
Merge pull request #1766 from IRog/master
fixing iex bug with proper --name arguement
Update elixir
Update lager p1_mysql and p1_pgsql dependencies
Update dependencies
Override version of subdeps with version from main rebar.config
Add missing space separator on EJABBERD_OPTS
Support for new_cert
Merge pull request #1758 from reneklacan/fix-mix-warnings
Fix mix warnings
Merge pull request #1759 from reneklacan/fix-version-to-be-semver
Fix version to be SemVer compatible
Solve http-01 challenge
Fix EJABBERD_OPTS
Fix rooms list in WebAdmin (#1753)
Respect INSTALLUSER when creating spool directory
Create spool directory at start if not exists
Remove use of getopt to support simpler shells
Improve ejabberdctl parameters parsing
Minor ejabberdctl improvements
Merge branch 'joudinet-master'
Refactor ejabberdctl
Add --enable-system-deps configure option
Add license files into lib and deps directories
Merge branch 'master' of https://github.com/joudinet/ejabberd into joudinet-master
Parse correctly presence_broadcast option in change_room_option command
Fix case clause
Cosmetic change: Fix indentation errors
Introduce --enable-stun and --enable-sip configure options
Get rid of sql_queries.erl
Deprecate misc:encode_base64/1 and misc:decode_base64/1
Validate all certfiles on startup
Implement cache for mod_announce
Describe command arguments and results in mod_muc_admin
Don't leak with UDP sockets
Implement cache for mod_private
Don't store messages via a single process
Improve mod_metrics
Get rid of a workaround against old Erlang bug
Get rid of db_type warning for mod_vcard_xupdate
Get rid of detection of modules' db_type detection
Declare ejabberd_oauth behaviour
Implement cache for mod_privacy/mod_blocking
export_all is not needed here
Fix values put in args_examples
Get rid of Mnesia transaction in get_vcard/2
The default 'iqdisc' is now 'no_queue'
Implement cache for mod_last
?SQL_UPSERT returns 'ok' on success
Avoid erroneous usage of ?MODULE macro
Fix function_clause after authentication refactoring
Replace 'if_version_above' directive with 'if_have_fun'
Clean up database code related to mod_vcard_xupdate
Use disc_only_copies for oauth_token Mnesia table
Increase gen_mod's supervisor shutdown time
Get rid of deprecated option 'resume_timeout' in test config
Implement cache for mod_vcard and mod_vcard_xupdate
More account support(Update/Info)
Add cache options to the validator
Ciphers should be a binary string
Get rid of unused variable
Implement cache for roster
Fix use_cache/1 callback
New account functional, very crude
Shut up dialyzer/xref if public_key:short_name_hash/1 is not available
Only validate certfiles if public_key:short_name_hash/1 is available
Introduce Certficate Manager
Check presence of some files during option validation
Gracefully process malformed passwords during password change
Gracefully process malformed passwords during registration
Add 'access_remove' ACL to mod_register
Update Elixir tests for using new auth API
Rename is_user_exists -> user_exists
Use cache for authentication backends
Use misc:atom_to_binary/1 instead of the deprecated jlib.erl (#1510)
Update comment: aux.erl was renamed to misc.erl
Use jid:encode/1 instead of the deprecated jid:to_string/1 (#1510)
Fix: update sql statement, added missing delimeter for sql queries
Added export function for mam module
Examining jose functionality
Small improvements to the acme module
Remove forgotten 'export_all'
Don't list 'redis_pool_size' option multiple times
Split some functions in smaller ones
Very basic acme client, only stubs
State that Erlang 17.5 or higher is only supported
Don't call gen_mod:get_opt() outside of modules
Add type specs for Module:opt_type/1
LOG_PATH macro should be of string type
Introduce 'sql_connect_timeout' option (#1698)
Introduce 'sql_query_timeout' option
Emit deprecation warning for SM related listening options
Improve validation of second-level options
Make it possible to validate second-level options
Fix elixir tests
Catch exceptions from acl:add_list in web admin
Introduce 'iqdisc' global option
Validate module options on start_module/2
Parse ldap_uids in mod_vcard_ldap like in eldap_utils (#319)
Merge pull request #1697 from pipo02mix/dockerfile-17-04
Validate new options before module reloading
Don't forget to delete digraph
Don't validate an option in gen_mod:get*opt() functions
Merge branch 'new-option-validation'
Don't validate an option in ejabberd_config:get_option() functions
Don't re-define validation functions in multiple places
Fix elixir tests
Bump cache_tab version
Store options using p1_options module
Merge pull request #1702 from skuroki/patch-1
Bug requesting non-existent data with private_get command (#1690)
Merge remote-tracking branch 'processone/pr/1699'
Fix typo
Don't check result of jid.start
Allow a room admin also to subscribe another JID
mod_stream_mgmt: Fix typo in variable name
mod_stream_mgmt: Fix 'if_offline' detection
Include original 'id' and 'type' attributes in offline event
Don't check result of jid.start
Don't check result of jid.start
Make sure only jabber:x:event tag is present in offline event
Update Dockerfile to be able to build 17.04 ejabberd version
randoms: Keep compatibility with Erlang/OTP 17
Avoid changing configuration on listener deletion
Improve Mnesia tables creation and transformation
Use round-robin algorithm when selecting worker from DB pool
Add clear_cache admin command
Add support for HTTP File Upload, version 0.3.0
Fix elixir tests
Speedup Mnesia tables initialization
Use new cache API in mod_shared_roster_ldap
Use new cache API in ejabberd_oauth
Correct option validation
Use new cache API in mod_mam
Use new cache API in mod_caps
Fix private_get command sending a proper xmlel (#1683)
When getting user rooms, filter by the serverhost as expected (#1683)
mod_stream_mgmt: Preserve stanza count on timeout
Use #jid{} type for #muc_unsubscribe.jid
Don't use jid:from_string as it's deprecated, see jid.erl line 43
Don't try to load already loaded applications
ejabberd_c2s: Don't close session on stream resume
Function fix_from_to/2 should not crash when 'from' is undefined
Merge pull request #1677 from getong/catch_lager_crash_log_not_run
lager_crash_log in some cases not run, catch it
Improve logging message
Move compile_exprs() to misc module
Speedup configuration options lookup
Default config file should be ejabberd.yml
Log human readable description when configuration file is not found
Report configuration file location on startup
Speedup loading of translation files
Lower log level for some messages
Add Riak as mod_proxy65 RAM backend
Add Riak as mod_carboncopy RAM backend
Add Riak as BOSH RAM backend
Fix cleaning of Riak route table
Add Riak as router RAM backend
Fix closing of outbound S2S connections
Add Riak as session manager RAM backend
Improve ejabberd_c2s:close()
Make sure stream trailer is sent in the very end
Better process session close
Fix a typo
Fix ejabberd_router:is_my_route/1
Don't forget to disconnect
Use cache in front of Redis/SQL RAM backends
Bump xmpp dependency, it's required by previous commit
Allow a room admin to unsubscribe another JID
Travis CI: Update MySQL package
mod_muc_room: Replace deprecated function call
Rename aux.erl as misc.erl
Use p1_utils 1.0.8
New muc_register_nick command (thanks to Peter Marheine)(#1407)
Merge pull request #1666 from weiss/fix-csi
Merge pull request #1664 from weiss/fix-routing
Let ext_mod be aware of p1_utils includes
Generate ejabberd lib dir when not available in code server (#1665)
Improve S2S examples (#1583)
Add more examples on config template (#1583)
Merge pull request #1660 from michal800106/master
Improve logging of Redis errors
mod_client_state: Remove some empty lines
mod_client_state: Queue stanzas of each full JID
mod_client_state: Don't keep track of queue size
Improve type specs and return values
Add Redis pool support
Set default prefix to /usr/local
Fix order of starting supervisors. ExtMod should be loaded before GenModSupervisor because ext_mod adds proper paths to ebin from modules (ejabberd-contrib). Without this change you have to add -pa parameter with path to module's ebin.
ejabberd_sm: Fix routing of headline messages
ejabberd_sm: Fix routing of groupchat messages
ejabberd_sm: Fix typo in debug message
Add description to feature-not-implemented error
Set 'read_concurrency' for some ETS tables
Don't misuse monotonic_time/0
Disable mix tests
Don't log warning on successful ping reply
Merge branch 'master' of github.com:processone/ejabberd
Fix c2s connection close on demand
Forget prepared SQL queries on database connect (#1325)
Always init pubsub_index when using mnesia
Change mnesia dir detection
Remove obsolete mnesia migration calls
Improve redis related code
Use ejabberd_sql:abort/1 instead of exit/1
Merge branch 'master' of github.com:processone/ejabberd
Add Redis as mod_proxy65 RAM backend
Add ejabberd_sql:abort/1 and ejabberd_sql:restart/1
Add SQL as mod_proxy65 RAM backend
Raise bad_node instead of node_down for consistency reason
Do not duplicate enc_pid/dec_pid functions
Add missing jlib->aux convertion
Refactor pubsub's get_last_items
Deprecate jlib.erl in favor of aux.erl
Merge pull request #1646 from weiss/custom-headers
Add Redis as mod_carboncopy RAM backend
Add SQL as mod_carboncopy RAM backend
oauth_list_tokens and oauth_revoke_token work only in Mnesia (#1644)
Fix a typo
Add SQL as mod_muc RAM backend
Add Redis as mod_bosh RAM backend
Add SQL as mod_bosh RAM backend
Add Redis as router RAM backend
Mix needs include path to p1_utils
Add SQL as router RAM backend
mod_http_upload: Don't add "Server" header line
ejabberd_http: Expand @VERSION@ in custom headers
ejabberd_http: Add "custom_headers" option
Fix PEP issues (#1636)
Merge branch 'new_queue'
Avoid PID collisions
Add inets in included_application for mix
Expand ejabberd.yml.example by enabling mod_http_api with couple commands
Update mix dependencies
Update dependencies
Update docker files from latest Rafael's changes
prosody2ejabberd: Fix offline message record type
prosody2ejabberd: Fix message attribute removal
Fix crash in mod_muc_admin, we operate on integers here not lists
Don't block contacts with subscription=to in mod_block_strangers (#1609)
Use item creation date in rsm order (#1516)
Merge pull request #1626 from weiss/fix-scram-import
Replace mod_http_bind by mod_bosh in config example
Remove misleading sentence about s2s dialback
Resolve vars.config relative to to rebar.config.script
Fix compilation with mix (#1588)
Update mix deps
Update xmpp and fast_tls versions
Revert "Bump OTP version to 19.3 in Travis config"
Bump OTP version to 19.3 in Travis config
Remove webtool from erlang.plt creation
Use new xdata compiler API
Better log s2s auth failures when TLS is not available
Log startup time
Merge pull request #1617 from edwardchow33/patch-1
Fixed wrong parameter values in mod_muc_admin
Set translation callback on startup
Teach mod_http_fileserver ability to send 304 Not Modified
prosody2ejabberd: Fix SCRAM hash conversion
Encode in base64 when getting scram data with import_prosody (#1549)
Use correct pid when registering local route
Update cyrsasl_oauth to internal API changes
Get rid of p1_sha calls
Fix handling of xmlrpc request without authentication structure
In module_install copy also deps/ebin and priv files (ejabberd-contrib#200)
Merge pull request #1603 from strugee/patch-1
Return 'closed' instead of 'einval' on closed sockets
Note how to apply s2s Access Rights in the example
Improve overloaded S2S queue processing
Teach web admin about ip acl rules
Add support for file-based queues
Improve formatting of erlang terms shown in web admin
Include shared groups also when contact is is personal roster (#1585)
Remove mod_pubsub from ejd2sql export, as it isn't implemented (#1584)
Fix handling ejabberd_sql:sql_transaction result (#1584)
Report more TLS errors
Fix typo and spec
Remove forgotten compile_all
Report some TLS errors
Don't call deprecated jid functions from the test suite
Best Practices for Use of SASL EXTERNAL with Certificates (XEP-0178) support
Better handle errors in ejabberd_receiver calls
Fix previous commit
Revert "Remove relict mod_service_log"
Improve reporting of unavailable SASL mechanisms
Resolve all addresses from SRV lookup
External components must always provide 'to' attribute
Add s2s work-around for gmail.com
Make sure all hooks are called with proper host in ejabberd_c2s
Fix bug in api_permission parsing
Propagate the TRANSACTION_TIMEOUT to pgsql driver (EJAB-1266)
Don't crash on malformed IP addresses
Improve logging of outbound s2s auth failures
Improve logging of dialback failures
Resend stream header before calling handle_auth_success/2 callback
Fix compilation on R17
Fix parsing of acl/access rules inside oauth sections of api_permissions
Clarify new modules usage in the example config
Fix elixir tests
Don't perform useless resourceprep
Update tests to ejabberd_commands changes
Update tests to cyrsasl modifications
Return ok from start/2
Change loglevel on configuration reload
Invalidate access permissions on configuration reload
Fix log message format
Put more stuff under supervision
Don't fail on elements decoding
Get rid of jid:to_string/1 and jid:from_string/1
Don't pass empty resource to jid:make()
Don't pass 'from' and 'to' along with stanza in hooks' arguments
Don't polute log with known content types
Get rid of unused variable warning
Remove previous options when the config gets reloaded
Add gen_mod:is_loaded_elsewhere/2
Restart listeners on configuration reload
We don't like now()
Adapt get_last tests to new output
Update tests for changes in acl start code
Improve config reloading support by ejabberd_auth
Make sure that addr_re is always initialized when creating http state
Return ejabberd_sm:stop/0 back
Make host header parser work correctly with ipv6 literal addresses
Improve startup procedure
Fix a case clause and run c2s_filter_send on send_error/3
get_last now always returns tuple with UTC XEP-0082 and status (#1565)
Protect users from delete_old_users command using a fixed access rule (#1462)
Separate list of strings with \n for srg_get_info in mod_http_api (#1500)
Specify "ExecReload" command in systemd unit
Prepare mix for 17.03
Update dependencies
tools/hook_deps.sh: Search for escript in PATH
Merge pull request #1499 from weiss/offline-stanza-id
Include stanza ID with archived offline messages
Avoid orphan_item leak on affiliation/subscription removal (#1563)
Fix pubsub MySQL schema
Start/stop auth modules when host is added/deleted
Stop all s2s connections via supervisor calls
Fix elixir tests
Improve reload_config admin command
Start/stop virtual hosts when reloading configuration file
Remove unused macro
Merge branch 'master' of github.com:processone/ejabberd
Reload modules when reloading configuration file
Make sure all hooks are called with proper host
Fix match of itemid on get_cached_item, fixes 14e771d8
Add missing NOT NULL restrictions
Move archive tables into lite.sql for better comparison with other schemas
Re-enable "replaced" tests
Test stream management queue overload
Improve stream management tests
Rename mod_sm -> mod_stream_mgmt
Merge branch 'master' of github.com:processone/ejabberd
Don't count resent stanzas
Travis CI: Update MySQL APT repository key
ejabberd_c2s: Don't drop 'user_send_packet' result
Support scrammed passwords in ejabberdctl import_prosody (#1549)
Fix s2s_dns_timeout issues
Merge pull request #1555 from weiss/count-session-iq
Let ejabberd_c2s handle <session/> IQ
Get rid of non-breaking space
Fix some dialyzer warnings
Merge pull request #1553 from lemenkov/config_functions_deprecation
Mark local/global config functions as deprecated
Fix compilation when included as Elixir dependency (#1526)
Commands documentation lack arguments when policy=user (#1514)
Merge pull request #1548 from lemenkov/use_get_option
Use ejabberd_config:add_option/2 instead of ejabberd_config:add_local_option/2
Use ejabberd_config:get_option/2 instead of ejabberd_config:get_local_option/2
Correct access_matches spec
Fix some dialyzer warnings
Change routing API
Merge branch 'master' of github.com:processone/ejabberd
Remove relict mod_service_log
Disable undefined_function_calls xref_check
Report password change in the log
Attach IP metadata to every stanza received from stream
Use newer p1_utils
Fix handling of config.ctc files
Add more check to make xref
Only use GEN_SERVER macro where appropriate
Attach modules to gen_mod's supervisor
Merge pull request #1539 from lemenkov/use_crypto_sha
Improve modules start/stop procedures
Use crypto:hash/2 function
Check result of gen_mod:start/2 callback (#1534)
Apply SASLprep before storing/converting passwords
Use p1_server behaviour in xmpp_stream layer
Accept "add_commands: admin" in commands section not only "add_commands: - admin"
Don't shadow binding in match
Add TLS support for external components
Make sure that api_permissions always have "console commands" section
Set subscribers nicks when recreating room (thanks to Girdhar Sojitra)(#1495)
Support non-JID lines in command create_rooms_file
Depend on fast_xml-1.1.20
Don't warn if custom schema is not available
Merge pull request #1502 from lemenkov/ignore_output_val
No need to explicitly return ok here
Use newer version of epam
More changes that are required from p1_pam -> epam
Change name of pam dep from p1_pam to epam
Floating deps should always be executed
Improve compilation with rebar3
Merge branch 'master' of github.com:processone/ejabberd
Do not drop default TLS options
Adapt to coveralls api change
Change OTP version from 19.1 to 19.2 in travis config
Speedup features list when a lot of virtual hosts configured
Fix tests
Make mod_disco handle features of mod_ping
Merge branch 'master' of github.com:processone/ejabberd
Make sure only {exit, normal} is not catched when executing a hook
Adapt to new ejabberd_sm changes
Compatibility with R17 in mod_block_strangers
Check message subject in mod_block_strangers
Update deps in mix.lock
Avoid using maps:get/2 to keep compatibility with OTP 17.5
Fix calling to mod_offline:store_packet
Don't use maps:take it available in R19 only
Add tool for checking which dependences need update
Make test suite working again
Make a message is not bounced if it's archived
Archive message before delivering it to offline storage (#1348)
Send <compressed/> in correct order
Merge pull request #1478 from weiss/multi-host-pubsub-cache
mod_pubsub: Fix last item cache for multiple hosts
Add stanza-id to every archived message (#1477)
Update copyright headers in new files
Merge branch 'new_stream'
Prepare 17.01 for hex.pm
Use xmpp 1.1.6
Make shim for mod_http_api admin_ip_access more robust
Try db migration only when mnesia is configured (#1458)
Restore muc_invite_hook (#1467)
Make sure 'jabber:client' namespace is added to forwarded messages (#1474)
Restore multiple invitations support (#1468)
Don't forget to convert muc#roomconfig_mam
Support legacy muc#roomconfig values (#1469)
Fix typo
Reset table only if new def change from runtime
Improve check of mnesia schema opearations
Fix reporting dialback failures
Don't attempt to resolve _jabber._tcp SRV record
Improve <delay/> tag insertion
Cope with malformed values in 'rosterusers' SQL table (#1466)
Better log bytestream termination
Use crypto:exor/2 instead of hand-crafted bxor
Reset XML stream before sending SASL <success/>
Remove wrong index setting
Let ejabberd_mnesia handles copy_type
Fix index processing (#1461)
Speedup table setup, no io if EJABBERD_SCHEMA_PATH not set (#1461)
Avoid stopping mod_offline before supervisor termination (#1464)
Get rid of ejabberd_frontend_socket
Improve error reporting for forbidden servers
Drop only messages with <body/> in mod_block_strangers
Stop hook on message drop in mod_block_strangers
Use user_receive_packet hook in mod_block_strangers
Remove stub in mob_block_strangers
Merge branch 'new_stream' of github.com:processone/ejabberd into new_stream
Add mod_block_strangers
Add script to check hook dependencies
Don't allow raw elements in process_iq/3
Implement database backend interface for mod_proxy65
Correctly set gen_server's name
Remove handle_event/1 callback
Add mod_sm and mod_s2s_dialback to example config
Add example api_permisions: definition to config template
Decode message before checking for expiration (#1458)
Usable size for Shared rosters members textarea (EJAB-1753)
Fix configuration commands (#1432)
Add forgotten -include_lib()
Implement database backend interface for MUC, BOSH and auth_anonyous
Fix some corner cases while re-reading RFC6120
Ignore unexpected events
Implement database backend interface for ejabberd_router
Fix attaching ejabberd_s2s_out process to a supervisor
Add 'supervisor' listening option
Add SSL support for SQL connections
update deps
pubsub_subscription may is not used (migration is optional)
Fix migration of old pubsub database (#1409)
Allow old-stype mod_vcard_ldap in the config (#1410)
Don't forget to advertise disco features
Make stream related calls module independent
Fix typo in previous commit
Simplify setting allow_subscription (#1404)
Set from/to in every routed packet
Remove unused mod_ip_blacklist module
Adopt remaining code to support new hooks
Fix problem with get_vcard command (#1447)
Get nodes from ejabberd_cluster instead of mnesia
Cleanup file headers
Specify that process_rosteritems command works only with Mnesia storage
Update copyright date automatically (#1442)
Remove mod_http_bind and migration code to mod_bosh
Fix cyrsasl test after recent changes
Correctly process errors from new cyrsasl API
Improve return values in cyrsasl API
Get rid of "jlib.hrl" header in some files
Better cope with IPv6 domains
Reflect cyrsasl API changes in remaining code
Improve return values in cyrsasl API
More refactoring on session management
Fix case clauses when using compression (#1431)(thanks to Evgeniy Khramtsov)
Add xmpp_stream_out behaviour and rewrite s2s/SM code
Cleanup file headers
Allow subscriber to create room, then set allow_subscription=true (#1404)
Revert "Fix 'nodetree' configuration lookups for PEP"
Fix 'nodetree' configuration lookups for PEP
Prepare mix for 16.12
Update deps
Extract correctly the text from #stanza_error (#1425)
Describe command arguments and results in ejabberd_admin
Rewrite ejabberd_service to use new XMPP stream API
Initial version of new XMPP stream behaviour (for review)
Copy recent make_opts function from mod_muc_room.erl
Enforce pubsub node removal, revert previous commit (#1320)
Enforce affiliation removal, remove corresponding items (#1320)
Improve handling on acl rules in api_permissions
API call does not necessary use token, it could use basic auth
Recognize "- who:" not only "who:" syntax in api_permissions
Cleanup ext_mod and fix compilation path
Try to fix interminent failures in cyrsasl tests
Update xmpp lib version and fix path when using deps.get and compile in same commande
Fix compilation of external module with new xmpp lib
Remove obsolete remove_node api (use leave_cluster)
Fix reload_config
Grab new version of xmpp dep
Add password support in muc_subscribe (#1306)
When unsubscribes, check if room should get closed (#1396)
Fix error formatting, which closed client connection (#1389)
Fix mod_http_api_mock_test on 19.1
Add more tests for digest-md5 cyrsasl
Move to latest Elixir version
We can now use dependencies published in hex.pm
Merge branch 'master' of github.com:processone/ejabberd
Fixes pt-br translation (thanks to Rodrigues)(#1393)
Fix typo introduced by 92db9ff changes
Improve handling of mnesia schema
Cleanup admin_extra, add few functions
Merge branch 'docker' from Rafael Römhild
Adds optional post_install and pre_uninstall hooks (thanks Igor Manturov Jr.)(#1300)
Improve translation of some messages
Update dependencies
Merge branch 'master' of github.com:processone/ejabberd
Merge branch 'ukutaht-enable-elixir-in-mix'
Merge branch 'enable-elixir-in-mix' of https://github.com/ukutaht/ejabberd into ukutaht-enable-elixir-in-mix
Use ejabberd_router:route_error/4 wherever possible
Use new version of xmpp in mix
Get rid of compile warnings
Use new version of xmpp
Don't check for faked carbons
Don't forget to erase cache on user removal
Make compatible with rebar3
Get rid of excessive (io)list_to_binary/1 calls
Add missing -callbacks
Merge pull request #1391 from weiss/mark-copies
Use xmpp:put_meta/3 to update metadata
Use new versions of fast_xml and xmpp
Don't make ejabberd.service file executable
Makefile.in: Substitute all @variables@ in a line
Merge branch 'weiss-systemd-unit-improvements' (#1346)
Merge branch 'systemd-unit-improvements' of https://github.com/weiss/ejabberd into weiss-systemd-unit-improvements
Fix typo in copyright date
Move copyright definition to ejabberd.hrl
Merge remote-tracking branch 'upstream/master'
Don't use deprecated functions from jlib.erl
Let mod_carboncopy mark copied messages
Let ejabberd_sm mark copied messages
Fix xref issue injected by fbfbb96
Fix get_roster issue injected by fbfbb96
Fix vcard_ldap exports
Add missing export
Fix issues on import improvements
Add missing include file
New bosh module
Improve ODBC import
Add new xmpp repo as dependency in mix.exs
Remove now() from mod_offline.hrl
Add OTP 19.1 to Travis' testing platforms
Fix logging in tests on R17
Set 'sql_pool_size' to 1 by default for sqlite
Remove bashismes from ejabberdctl
Merge branch 'master' of github.com:processone/ejabberd
Set 'sql_pool_size' to 1 for sqlite tests
Fix elixir tests
Fix non-empty disco-nodes processing
Fix s2s test
Fix handling mod_http_upload disco#info queries: need decoded elements
Merge branch 'master' of github.com:processone/ejabberd
Fix conference disco#items when running multiple virtual hosts
Do not send empty <after/> tag
Log more data for failed s2s connection
Don't forget to start XMPP application
Fix RSM for conference disco#items
Use xmpp_util.erl from XMPP library
Transform ejabberd_commands on the start
Switch to stand-alone XMPP library
Fix includes in eunit compilation flags
Fix elixir tests
Remove useless NO_EXT_LIB flag
Get rid of substitute_forwarded
Merge branch 'master' of github.com:processone/ejabberd
Make common tests working again
Add auth to mod_http_fileserver
Fix typo
Remove obsolete/temp file
Ensure that presence_broadcast room option is stored (#1380)
Tell git to ignore the example file ejabberd.service
Handle correctly p1_http:request result
add docker support
Minor cosmetic changes on pubsub code
Cosmetic validator changes
Add missing verbs for RESTfull operation
apply string optimizations
Add configurable weight for commands
Fix tests that use #forwarded
Use new version of fast_xml
Fix types in check_password_hash
Make string args in http_api be list strings
Use p1_http from p1_utils 1.0.6
Fix IQ result processing
Add some copyright notices
Make xref working again if elixir is disabled
Add more control for decoding IQ payloads
Don't auto-decode forwarded payload
Remove unused header file
Don't use jlib.hrl outside of jlib.erl
Deprecate most of the functions from jlib.erl
Uncomment forgotten block of code
Revert "Support to provide password when subscribing to a room (#1306)"
Merge branch 'master' into xml-ng
Merge branch 'master' into xml-ng
Support to provide password when subscribing to a room (#1306)
Merge branch 'master' of github.com:processone/ejabberd
Expose unregister API command
Add more tests for offline storage
Merge branch 'xml-ng' of github.com:processone/ejabberd into xml-ng
Add roster tests
Support several groups separated by ; in add_rosteritem command
Throw error if room name or host has invalid characters (#1360)
Fix reading room jids from file for create and destroy_rooms_file commands
Replace ctlscriptpath and produce ejabberd.service file (#434)
Merge mod_opt_type from db sub-modules to main module mod_opt_type
mod_mam: Use user JID for stanza ID 'by' attribute
Append ; to privacy_list_data exporting lines (thanks to Marcio Luciano Donada)
Use base64:mime_decode/1 for SASL packets
Add more tests for privacy lists and blocking command
Merge pull request #1349 from prasadvaidya/master
Rollback minor change, to avoid redundant use of fail-safe function
Fix: Replace erlang function with fail-safe jlib function.
Nidx may be integer or binary, so use jlib:i2l instead
If a participant can change subject, let asubscriber too (#1345)
Let systemd stop ejabberd gracefully
Increase file descriptor limit in systemd unit
Don't specify "ExecReload" command in systemd unit
Let systemd restart ejabberd on failure
Use "Type=forking" in systemd unit
Don't set "NoNewPrivileges" in systemd unit
Don't let systemd hide /home and /tmp
Let mix be able to cope with configured deps
Merge pull request #1343 from gardenia/mod_muc_configurable_max_discoitems
mod_muc: made the constant MAX_ROOMS_DISCOITEMS configurable
Fix randoms:uniform/1 return
Get rid of compile warnings for random/crypto modules on R19
Merge pull request #1338 from marcphilipp/muc_invite_hook
Fix delete_old_messages command for SQL backends
Add more MUC tests
Convert ejabberd_xmlrpc to new api_permissions
Introduce muc_invite hook
Always include <actions/> with ad-hoc responses
Don't let MAM messages go into offline storage
Merge pull request #1331 from weiss/send-message-omit-copies
Ignore offline sessions in statistics
Update riakc to support r19
Create room on configuration request as per XEP-0045, 10.1.3
Don't let "send_message" duplicate the message
Enable elixir when ejabberd used as a mix dependency
Add xdata generator and make some code using it
Make map syntax compatible with Erlang/OTP 17
XEP-0198: Cope with invalid 'from'/'to' attributes
Disable one test for now, we may change how this part is handled
Use correct field for oauth scope
Make handling of oauth clauses be more consistent with other rules
Use proper default value for api_permissions
Fix typos in Czech translation (#1318)
Initialize ejabberd_access_permissions in elixir tests
New api permissions framework
Added option to disable prepared statements (postgresql only)
ejabberd_sm: Clean up old offline session entries
PubSub: creation jid must be bare jid
PubSub: fix error type on item deletion with insufficient priviledge
PubSub: creation jid must be bare jid
PubSub: fix notification on subscription change
PubSub: fix error type on item deletion with insufficient priviledge
Fix 404 response formatting (thanks to Kaggggggga)(#1306)
ejabberd_http: Handle missing POST data gracefully
Use inets instead of lhttpc in http_p1
Add http_p1.erl, rest.erl, and oauth2 ReST backend for tokens.
Text legacy IQ handler support
Test anonymous auth
Get rid of compile warnings in test suite
Deprecate jlib:integer_to_binary/1 and jlib:binary_to_integer/1
Improve namespace handling
Add tests for s2s code
Add tests for external component
Add more tests for C2S
mod_carboncopy: Don't copy MUC PMs
When getting list of subscribed rooms, check all including temporary ones (#1242)
Revert "Fix getting of subscribed rooms: consider also temporary ones (#1242)"
Fix getting of subscribed rooms: consider also temporary ones (#1242)
Store the Allow Subscription room option (#1301)
Don't worry about storage_type of the Acl mnesia table (#1206)
Use mnesia calls instead of ets for Acl and Access tables (#1206)
Update riakc to support r19
node_mb_sql: Add missing (SQL-specific) functions
Fix dialyzer warnings for mod_mam
Merge pull request #1249 from weiss:push-requirements
Merge branch 'push-requirements' of https://github.com/weiss/ejabberd into weiss-push-requirements
Allow to create room with custom config
Make common tests working again
Expand parsing of json input to be able to handle update_roster command
Add X-Admin and basic auth header to CORS allowed headers in http_api
Properly process OPTIONS header in http_api for all paths
Fix nick-to-jid mapping for MUC subscribers
Support multiple room invitations (#1285)
Fix subscribed rooms list retreivement
XEP-0198: Cancel timer when waiting for resumption
Revert "Don't log an [error] message if Elixir is missing"
Don't log an [error] message if Elixir is missing
Fix typo on previous commit (#1284)
Start elixir config code only if elixir was enabled in configure script
Full jid entity subscriptions should include bare jid records (#1284)
Rename #error{} record to #stanza_error{}
Fix message routing from subscribers
Improve pubsub code
Merge pull request #1287 from weiss/ack-timeout
Support for Elixir configuration file #1208
Support for publishing to hex.pm with latest Elixir mix
Fix compilation with Elixir 1.3 / R19
Typo
Properly normalize resource_regexp acl rule
New stream management option: ack_timeout
Enforce pathtype use with config path (#1264)
Merge pull request #1253 from Amuhar/xep0356
Create room on configuration request as per XEP-0045, 10.1.3
Link MUC subscription to bare JID
Add SQL support for microblogging node plugin
Handle <subscriptions/> request to list MUC subscribers
Do not update muc_online_users table on MUC/Sub operations
Add get_subscribers command to list MUC subscribers
node_mb: Call node_pep instead of node_hometree
node_mb: Fix configuration documentation
mod_pubsub: Remove outdated comment
Clean ejabberd_commands before tests
ejabberd_oauth requiere working cache_tab, initialize it before tests
Rewrite mod_pubsub to use XML codec
Merge remote-tracking branch 'processone/pr/1262'
Fixed typo in  Stream Management option name
Merge remote-tracking branch 'processone/pr/1261'
Fixed #1260 Stream Management feature for the websocket connections
mod_muc_admin: Accept 'allow_subscription' option
Merge pull request #1254 from lemenkov/remove_p1_xmlrpc
Remove no longer necessary p1_xmlrpc
Erlang R17 has a Time limit in erlang:send_after (#1246)
mod_mam: Add 'store_mam_message' hook
mod_offline: Add 'store_offline_message' hook
ejabberd_c2s: Add XEP-0198 resumption hooks
Add functions to get/set some c2s state elements
Support sql backend in mod_shared_roster commands (#1244)
Merge pull request #1245 from hamano/clean_redis_table
fix clean redis table
Don't delete ejabberd_commands table, it's problematic in cluster (#1210)
Store announcements for offline users
Honor <store/> hint for any non-"error" message
mod_mam: Don't store messages of type "headline"
Add more type specs
Add a requirement for full JID in subscribe_room command
Provide proper args_desc in oauth_issue_token command
Fix result type of subscribe_room command
Add commands for MUC subscriptions management
Improve some type specs
Update to released version
Update moka dependency
We do not force yet access rules check on register command
Do not force command line to pass a credentials
mod_client_state: Let other modules filter stanzas
Add user's JID to CSI hook arguments
Cosmetic change: Set CSI state 'active' on resume
Use newer samerlib/moka
Change code to reflect recent changes in fxml_gen
mod_mam: Simplify "assume_mam_usage" option
Delete mod_configure2
Rewrite HTTP Bind and Web Admin code to use XML generator
Rewrite PIEFXIS code to use XML generator
Rewrite jd2ejd to use XML generator
Rewrite multicast code to use XML generator
Fix type convertion bug injected by 4ccc40b (#1229)
Add tokens cache to ejabberd_oauth
Fix calls to undefined functions
Rewrite mod_irc to use XML generator
Rewrite mod_configure to use XML generator
XEP-0198: Handle timeouts during stream resumption
XEP-0198: Increase timeout for stream resumption
Add OAUTH SQL backend
Implement gen_mod callback in ModPresenceDemo module
Merge pull request #1223 from processone/expand_api
Remove compile warning
Improve error message when try to call api on api root
Switch mix worker to transient
Add missing comas in sql statement (#1219)
Fix error return expectation in command test
Fix HTTP process return formatting
Improve error handling
Rewrite mod_stats to use XML generator
Improve vCard creation from LDAP result
Rewrite mod_mix to use XML generator
Change name of result key for offline count to value
Add support for sending back missing scope error to API ReST command calls
Make s2s stats commands more robust
Get rid of "jlib.hrl" dependency in mod_service_log
Get rid of "jlib.hrl" dependency in some modules
Rewrite mod_http_upload to use XML generator
Ensure ejabberdctl status result is in valid shell supported range
Add support for rich error reporting for API
Rewrite mod_sic to use XML generator
Return 409 conflict error code on register if user already exists
Merge pull request #1221 from processone/expand_api
Rewrite mod_shared_roster backends module to use XML generator
Rewrite mod_shared_roster to use XML generator
Do not crash on check when we do not have JID
Rewrite mod_vcard_ldap to use XML generator
Rewrite several modules to use XML generator
Merge pull request #1178 from candrews/patch-1
Switch workers from temporary to transient
Display data that is send to websocket connection in debug log level
Merge pull request #1193 from gabrielgatu/support-elixir-module-installer
Start elixir application after ejabberd_app:start_apps()
Merge pull request #1211 from processone/expand_api
Rewrite captcha to use XML generator
Rewrite mod_register to use XML generator
Swap variables in their correct places
Fix type spec for set_from_to/3
Rewrite S2S and ejabberd_service code to use XML generator
mod_http_upload_quota: Apply cosmetic changes
Add 'allow_subscription' MUC configuration option
Add ability to run test with Elixir mix
Clarify command module API
Avoid starting several time the owner process
Make jlib ETS table more resilient
Fix list appending bug
Remove unused import
Get rid of "jlib.hrl" dependency in some files
Remove jlib dependency from acl.erl
Rewrite mod_adhoc and mod_announce to use XML generator
Add DB backend support for ejabberd_oauth
Fix tests, command need to be properly added to list of exposed commands
Simplify code for command policy group expansion
Export acl:parse_ip_netmask/1 for mod_rest (ejabberd-contrib#175)
Rewrite mod_mam and mod_muc to use XML generator
Initial attempt on access on commands
Don't return error for blocked MUC PMs
Return more user friendly, human readable error description
Make default OAuth token TTL values more user friendly
Add support for checking access rules conformance for commands
Error when not authorized should be 403
Move any access rules check to ACL module
Clean-up of error codes and format json structure
XEP-0198: Log debug message when dropping stanza
Preserve PID for offline sessions
Support oauth password grant type
stringprep might already be started
Fix elixir test case: stringprep was required
oauth: single jid field instead of username/password fields
Convert password provided by web form to UTF8 before passing it (#375)
Quote postgresql database name (#1136)
Fix handling of complex values as arguments in http_api
Merge pull request #1201 from xmppjingle/master
External Component Hook
Oauth callback must pass expires_in as ttl instead of epoch
Use different version of elixir depending on erlang version
Add else branch to if_version_{above,below}
Make processing of if_* clauses in rebar.config recursive
Fix test for changes in oauth expiry
Merge branch 'master' of github.com:processone/ejabberd
Let user choose the desired oauth token TTL
mod_mam: Fix handling of result set page limit
mod_mam: Always limit result set page size
Fix hooks de-registration
Upgrade Elixir version to 1.2 in rebar config
Lock relx version as newer version does not compile fine
Make access rules in ejabberd_web_admin configurable
Rewrite mod_blocking to use XML generator
Rewrite mod_offline to use XML generator
Fix command argument formatting
Add 'ejabberd:user' and 'ejabberd:admin' oauth scopes
Fix ce0d1704c6cc167c8bc891587952f78c55f979ad
Merge remote-tracking branch 'processone/master'
External Component Connection Hooks
jlib: Don't try to keep just one <delay/> tag
Initial version based on XML generator
Omit [info] message with number of queued stanzas
Fix compilation error
Use hooks instead of direct calls to mod_mam
mod_http_upload_quota: Depend on mod_http_upload
Update stringprep and iconv
Do send last items only for subscription on current plugin type
Rename MUC/Sub's namespace
Handle MUC/Sub subscriptions list request
Advertise MUC/Sub support in MUC service disco#info
Experimental MUC/Sub support
Update dependencies
Get rid of warnings
Warn on cyclic modules dependencies
Revert "Recover fix of 907e239 lost in 9deb294 (thanks to Alexey Shchepin)" (#1183)
Make modules loading in a dependent order (#1191)
Add missing '/' for jid matching from commit e300f80
Fix missed escaping in node_flat_sql.erl
Quote reserver 'type' keyword for pgsql to fix e300f80
Fix use of like parameter in sql pubsub's requests
Support elixir module installer
mod_configure: Fix editing of access rules
Grab new p1_utils that has fix for R19
Fix compilation issues on R19
Fix dependencies when using Elixir Mix
Update dependencies
mod_mam_mnesia: Force garbage collection
mod_client_state: Throttle PEP stanzas by default
Allow generation of oauth tokens from command line
Harden the systemd unit
Include correct version in stream:stream when reporting errors
Inline muc access rules
acl: ACLName rule should match if any part of ACLName matches
Update dependencies for 16.06x
Fix typo from d8bb5d9c
Prepare hex.pm release
mod_pubsub: Fix matching of set_node/1 result
When convertion of xmlrpc argument to type fails, report it as error
xref was broken when Elixir wasn't enabled
Compile gen_mod early to help with undefined behaviour warnings
Merge pull request #1165 from weiss/default-blocking-list
mod_blocking_sql: Handle default list corner case
Add some tests for {shaper,access}_rules_validator
Merge pull request #1120 from anagromataf/feature/archive-id-in-message-carbons
Restore get_items conditions when not using RSM (#1147)
Set HTTP/1.0 so github accepts the request (#1157)
Fix PubSub RSM on get_items (#1147)
Update supported xep version
Fix pgsql compatibility on delete_old_messages (#1137)
XEP-0198: Apply cosmetic changes
XEP-0198: Also count stanzas when socket is closed
Use {access,shaper}_rules_validator in other places where access rules are used
Use new access_rules_validator in couple places
Add acl:{access,shaper}_rules_validator for use in {mod_}opt_type()
Allow {mod_}opt_type to transform values passed to it, and for better error reporting
Avoid cleanup on bag when disc_only, switch in memory (#1161)
Fix handling of queued stanzas on session timeout
Give more time to stop and kill epmd (#882)
Use shorter jid acl in config template
Use new short access rules in config template
Add test for more allowed access_rules
Allow using shaper defined by name like in in s2s_shaper: fast
Typo in option name
Add shorter version of some common access rules definitions
Check password with jid:resourceprep when registering account (#996)
mod_mam: Fix "assume_mam_usage: if_enabled"
Recover ec6c58a which was reverted in 100827e (thanks to Alexey Shchepin)
Preparing hex.pm release to fix lager bug
Force use of lager 3.0.2 at most.
push_roster must convert read strings to binaries (#1075)
Recover fix of 907e239 lost in 9deb294 (thanks to Alexey Shchepin)
Allow again multiple fqdn values in configuration (EJAB-1578)
Merge pull request #1125 from vthriller/roster-push
Produce mod_last entry on account creation (processone/ejabberd-contrib#62)
When stopping ejabberd, stop modules after broadcasting c2s shutdown (#1144)
Add tests for new acl functions
mod_pubsub: Fix node configuration changes for SQL
Simplify check for carbon-copied chat states
mod_client_state: Fix handling of chat states
mod_client_state: Simplify handling of PEP stanzas
Fix quicktest case
XEP-0352: Pass chat states of other resources
Unwrap carbon copies when checking for chat states
Ignore <delay/> when checking for chat states
Fix "unused variable" warning
Fix problem in dfee843 when non-occupant admin kicks an occupant (#1135)
Fix ejabberd.ldif
Fix a typo
Stronger tests in the test suite, SQL updates and fixes
Report in SQL when scram is enabled but the stored password isn't (#1096)
Ignore offline sessions
Process cover information on travis only if cover support is enabled
Fix set_presence API
Disable cover analyzys on R17 as this causes problems with elixir tests
Update test after roster code reorganization
Update test
Fix mod_http_api_test.exs
More strict check for commands with policy user
Fix tests
Better code for setting up ejabberd app location
Update acl tests to new internal access rules syntax
Make tests run correctly even when ejabberd src in not in ejabberd-xxx dir
Allow @ inside acl user{,_glob,_regexp} to pass both user and server in single string
Convert example config to use new syntax for access rules
Allow passing username and ip to ejabberd_comamnds, and use it in mod_http_api
Use acl:access_matches in c2s
New ACL infrastructure
Do not call transform_terms multiple times on configs when merging them
Copy lite.sql to place where tests expect it in failback mode
Retrieve parenthesis for easy reading, lost in old commit 9deb294
Merge pull request #1131 from weiss/failed-resume-h
Merge pull request #1126 from weiss/muc-send-affiliation
Merge pull request #1132 from weiss/publish-options
Add support for PubSub publishing options
XEP-0198: Add 'h' attribute to <failed/> element
mod_mam_mnesia: Clarify error message
ejabberd_auth*: Fix indentation
mod_mam_mnesia: Don't exceed table size limit
mod_mam_mnesia: Use transactions when writing
mod_register: Only set timeout on success
Merge remote-tracking branch 'processone/pr/1122'
mod_muc_room: Notify on affiliation changes
mod_roster should probably respect roster item changes introduced with roster_process_item hooks upon pushing
mod_client_state: Add function specifications
mod_client_state: Add "queue_pep" option
mod_client_state: Queue chat state notifications
Move CSI queue handling into mod_client_state
Delete duplicated command export_sql, use export2sql instead (#1118)
Send unique stanza id and archived tag also in the message carbons
Fix jid:from_string/1 function specification
Fix a typo
Less strict extauth.py
Update SQL escaping
Fix C2S session data leak (#1078)
Handle Redis connection in a separate module
mod_client_state: Delete only the configured hooks
Let client retry HTTP upload on file size mismatch
Avoid error bounces when testing stream management
XEP-0198: Use different error message for bounces
Bounce messages sent to server JID
Don't require ejabberd to be installed to run "make translations"
Add missed jlib:term_to_expr and jlib:expr_to_term functions
Update more SQL queries
Merge remote-tracking branch 'processone/pr/1088'
Add missing odbc->sql in comment from commit 1aae8a9f
Merge remote-tracking branch 'processone/pr/1087'
Cosmetic change: Make variable names consistent
Merge remote-tracking branch 'processone/pr/1102'
Fix ejabberdctl.template duplication
Merge remote-tracking branch 'processone/pr/1086'
Add ability to configure server loglevel when running tests
Pass noauth when auth isn't provided
Use MEDIUMTEXT type for muc_room.opts in MySQL schema
Fix sender in case of explicit pep subscriptions
Don't halt program when include_config_file is missing/can't be read
Don't forget to import mod_opt_type/1 in mod_metrics
Add mod_opt_type/1 callback to gen_mod behaviour
Cope with modules that don't export mod_opt_type/1
ejabberdctl: Fix path to epmd
Add tests for MUC MAM
Add behaviour to mod_vcard_xupdate DB modules
Fix typo in mod_mam:select() (#1098)
Let shaper cope with low resolution system clock
Add pubsub subscribe/unsubscribe hook
Better formatting of configuration problem log message
Update esip and stun to match Fast TLS version
Use fast_tls 1.0.3
Improve detection of databases supported by modules (#1092)
Force ERL_PATH for elixir
Update stun and esip dependencies
Prepare 16.04 release
We now use fast_tls 1.0.2
Get rid of "internal" DB type. This also fixes #1092
SCRIPT_DIR needed for release
Remove useless variable and quote EPMD and SPOOL_DIR
Fix use of pubsub node plugin when configured with default_node_config
Return error when blocking last activity request
Process messages of unknown type consistently
Fix error text for message bounces
Drop headline messages sent to offline resources
Don't omit bounces for messages of type "result"
Return error when blocking message to offline user
Match namespace when checking for chat states
Fix check for standalone chat state notifications
Merge pull request #931 from cclam0827/dev/mod_ping
Set default value for pubsub#itemreply option
Fix node ping command
Use UUID for ctl node name (#1021)
Accept commands: add_commands syntax (along commands: - add_commands)
Rename odbc to sql everywhere
Rename ejabberd_sm_odbc -> ejabberd_sm_sql
Fix hometree root check (#1070)
Specify type of second terminate/2 parameter
Use erlang 18.3 in travis tests
Remove --auth in ejabberd_ctl.erl as it's useless, still useful for mod_rest
Clean mod_carboncopy.erl from DB specific code
Add mod_mam header file
Merge branch 'move-db-code'
Clean mod_mam.erl from DB specific code
Clean mod_offline.erl from DB specific code
Clean mod_blocking.erl from DB specific code
Clean mod_privacy.erl from DB specific code
Clean mod_irc.erl from DB specific code
Clean mod_shared_roster.erl from DB specific code
Clean mod_roster.erl from DB specific code
Clean mod_muc.erl from DB specific code
Clean mod_vcard.erl from DB specific code
Clean mod_private.erl from DB specific code
Clean mod_announce.erl from DB specific code
Clean mod_caps.erl from DB specific code
Clean mod_vcard_xupdate.erl from DB specific code
Add preliminary tests on ACL module and prepare clean-up / refactor
Clean mod_last.erl from DB specific code
Make it possible to get DB backend of a module
Synchronizing master changes
Fix typo in error message
Disable TLS compression for s2s by default
process2/2 is needed by mod_rest to provide its own AccessCommands
Update check_password tests are the command now is fixed
Merge pull request #1064 from sezuan/fix_check_password
Fix check_password
Allow testing user pattern directly in access rules
Switch to varchar(64) in mysql user.server/salt as text can't have default values
Add TODO to improve ACL
'serverkey' and 'salt' should have empty string as default
Make sure that ejabberd_sm sid are unique
Send stream trailer at the very end
Generate shorted jid for anonymous connections
Add tests for anonymous and digest-md5 auth
Add tests on Access rules returning values
Add test when mixing ip / user rules
Start of tests for cyrsasl module
IP based ACL / Access rules and sequential evaluation of rules
Fix anonymous auth
Rebase master
Variant for user ACL test
Allow clearing all ACL and access rules
Add initial basic ACL test
Export add_access/3 to allow setting ACL outside of yaml config file
Stringprep can already be started, do not check result
Merge branch 'master' of github.com:processone/ejabberd
Log Elixir test result for investigation and include this log file in travis for troubleshooting failed tests
Tweak srg_get_info result formatting (#1048)
Better error message in logs
Fix error message paramater formatting
Add initial basic ACL test
Export add_access/3 to allow setting ACL outside of yaml config file
Merge branch 'master' of github.com:processone/ejabberd
Now we need to start stringprep before config
Merge pull request #1051 from genric/patch-1
Merge pull request #1052 from genric/patch-2
Merge branch 'master' of github.com:processone/ejabberd
We need to set hosts in options to be able to retrieve 'MYHOSTS'
Merge pull request #1054 from richp10/master
upgrade stringprep to 1.03
Fix mod_muc_admin:get_room_options
Merge branch 'add-error-reason'
Replace more ?ERR_* macros with ?ERRT_*
Fix mod_muc_admin:set_room_affiliation
Merge pull request #1046 from processone/commands-update
Apply fixes and remove tests for missing methods
Do not use underscore variable
Rollback mod_admin_extra
Fix merge issues
Fix tests, they are now running fine locally
Add logger macro to help troubleshooting Elixir tests
Port mod_admin_extra test to work with new API
Fix failing tests
Force protobuffs version to be able to use new meck release
Merge lastest commits from master
Try keeping names of test same as master to limit merge conflicts
Add test file whose name was conflicting during merge
Use version of moka that do not depend on proper
Rename conflicting test file after merge
Commands refactor, first pass.
Test / Document ejabberd_commands checks
Check that various type of commands are properly rejected without auth
Merge pull request #1044 from processone/http-api
Replace some ?ERR_* macros with ?ERRT_*
mix version updated for 16.03 release
Fix Dialyzer inconsistency
Provide authzid in scream response
Better error report when command is not exposed through API
Returns unauthorized error when we do not have correct credentials
HTTP ReST API now supports 'open' ejabberd commands
Support flagging so Elixir tests as pending
Travis CI: Cosmetic changes to Riak setup commands
Travis CI: Revert to checking for skipped tests
Adds support for option admin_ip_access on mod_http_api
Merge branch 'master' of github.com:processone/ejabberd
Add basic test for command registration
Move start and stop_modules/0 from ejabberd_app to gen_mod (#1039)
Fix commands api option
Fix commands access check.
Fix commands access check.
Pass noauth when auth isn't provided, reverts a1129dc (processone/ejabberd-contrib#159)
In SQL files create Users table with SCRAM support by default (#956)
Merge branch 'master' of github.com:processone/ejabberd
Fix log printout
Update MSSQL schema
Fix some LIMIT related problems with MSSQL
Use new fast_yaml
Merge pull request #1036 from processone/shared-roster-ldap
Merge pull request #1024 from rbarlow/luerl_release
Merge pull request #684 from wcy123/master
Fix issue getting shared roster
Proper naming for LDAP test function for shared roster
Switch back to proper log level
Add test to demonstrate issue to retrieve roster with mod_shared_roster_ldap
Merge commit 'refs/pull/524/head' of github.com:processone/ejabberd into sasl-api-change
Merge pull request #1035 from processone/modular-tests-run
Fix start via systemd (#978)
Specify lacking nodename (thanks to hamano)(#1020)
Allow running test groups independently
Enable Riak test suite on Travis-CI
Fix is_connected/0 function
Keep alive Riak connections by default
Fix a typo in travis.yml
Tell Travis not to fail if some tests are skipped
Do not auto append IP suffix to usernames (#1008)
Disable Riak test on Travis as they are too unpredictable on Travis
Improve ban_account command to work with other DBs than Mnesia (#977)
New command delete_mnesia deletes all tables that can be exported
Elixir test suite is already run with global CT run command
Merge pull request #1029 from processone/coveralls
We do not have C code to cover, they are in dependencies.
Add Coveralls support
Use static key for mysql repo
Attempting to use other keyserver, as we see failure from Travis fetching
Run basic Elixir unit tests
Add simple Elixir unit test on jid:from_string
Merge branch 'master' of github.com:processone/ejabberd
Comment on error failures in logs + indenting
Fix indentation of mod_register in default configuration file
Merge pull request #1022 from hamano/riak_auth
Use the v0.2 release of luerl instead of a commit.
support riak authentication
Extend scope of ejabberdctl ping
Escape quoting node name for ejabberdctl ping
Fix issue #1015
Merge pull request #926 from lpil/fix/remove-empty-mod
Don't use jlib:jid_remove_resource
Merge pull request #1011 from oxoWrk/master
Make auto generated resources shorter
Start ezlib only if required, as it's optional (#1006)
When building Elixir inside ejabberd, rely on version 1.1 for Erlang R17 compliance
Update OTP release to use and drop release 17.1
Merge branch 'master' of github.com:processone/ejabberd
Better error reporting when running Elixir test suite
Produce less verbose logs for tests on travis
Bare JID in 'from' of Roster Push (RFC 6121 section 2.1.6) in mod_admin_extra
Apply cosmetic changes to GitHub templates
Merge pull request #991 from suchatorg/patch-1
Update gl.po
Merge pull request #980 from sharewax/EJAB-1480
Fix Addresses element which lacked others local destinations
Update gl.po
Fix result type of "connected_users_info" command
Don't store watchdog notifications in MAM archives
Unregister route at the very end
Add ODBC backend for MIX
Add ODBC tests for MIX
Define pubsub node configuration per route/host explicitly
Make it possible to get virtual host of a registered route
Provide guidance for issue reporting and pull requests on Github
Fix config fetch after host/serverhost cleanup
Don't enable in-band registration by default
Merge pull request #997 from tnull/fix_auth_method_order
Minimal auth_method ordering fix
Add tests for MIX
Lager to Elixir Logger bridge is now compliant with ejabberd loglevel set / get
Fix call to lager_util:is_loggable/3
Use p1_time_compat util for generating timestamp
Add Elixir Logger Backend to bridge logs from lager
Fix escaping of argument in iexlive and iexdebug
Define mod_opt_type/1 callback
Unregister hooks and iq handlers on terminate
mod_http_upload: Add XEP-0363 v0.2 support
Experimental MIX (XEP-0369) support
Update gl.po
Update gl.po
Merge pull request #989 from galambalazs/patch-1
Merge pull request #988 from tnull/edoc_fix
Fix format_result also in xmlrpc, after aa5caa3 (#982)
fix syntax highlighting by keeping "~s" together
Fixed type specifications for 'rebar doc'
EJAB-1480: fix issue with retreiving user roster
Define opt_type required be ejabberd_config behaviour.
Compile ejabberd_config early to stop undefined behaviour warnings
Mark get_queue_length obsolete, and use count_offline_messages (#970)
ext_mod: switch to fast_xml and remove old p1_logger reference
Fix pubsub disco after host/serverhost cleanup
Enable flexible offline on disco#info as well
Use Elixir v1.2.3
Minor format cleanup
Use upcoming version of ejabberd with Elixir 1.2
Missed a few calls in previous commits
Raise an error when there are no fields to set in ?SQL_UPSERT
Update more SQL queries
Update more SQL queries
Update p1_pgsql tag
Update more SQL queries
Update mod_last SQL queries to the new API
New parse transform for ?SQL_UPSERT and ?SQL_UPSERT_T
Update mod_roster and ejabberd_auth_odbc SQL queries to the new API
Allow balanced expressions inside @(...) in ejabberd_sql_pt
Updated some mod_offline SQL queries to the new API
Use 'any' to match any DBMS in sql_query
Better error handling in ejabberd_sql_pt
Support for run-time SQL queries selection depending on DBMS version
New parse transform for SQL queries, use prepare/execute calls with Postgres
Update ejabberd version for hex.pm release
Disable back undefined_function_calls xref check
Do not call to deprected/undefined functions from mod_shared_roster_ldap
Enable undefined_function_calls xref option
mod_register_web: Choose the right error messages
Improve LDAP shared roster support (EJAB-1480)
Implementation of pubsub#itemreply (EJAB-1347)(#928)
Fix host/serverhost usage (#902)
Fix for #935
Add extra items to .gitignore
Split long lines
Elixir want {src_dirs, ["include"]} on top of a config
Don't include empty line after java example
Update translated files, as there wee many improvements
Make caps warning less confusing (#955)
mod_http_upload: Also expand @HOST@ in 'docroot'
mod_http_upload: Expand 'docroot' before using it
Merge pull request #961 from weiss/compression-after-sasl
Accept stream compression request after SASL
Add Redis backend to the test suite
Make it possible to define 'sm_db_type' per virtual host
Fix format_result so get_room_options command works again after aa5caa3
Another fix for \n in ejabberdctl arguments
Merge pull request #953 from cdroege/fix_css
Allow to pass \n in argument to ejabberdctl
Fix the color of links in tables in web admin
Merge pull request #951 from rodrigues/master
Update Portuguese (Brazil) translations
mod_muc_room: Let members see admin/owner JIDs
mod_muc_room: Don't expose JIDs in anonymous rooms
Travis CI: Make sure Riak finds callback module
Get rid of calls to jlib.erl from tests
Do not forget sending initial presence in XEP-0013 test
mod_mam: Send new preferences when they are set
Add tests for XEP-0013
Mention new XEP support
Prepare room JID in create_room command
Fix example value for rescode return type
More documentation of arguments in mod_admin_extra
XEP-0013: Flexible Offline Message Retrieval support
Remove remanants of pre-binary strings
Use muc_online_room record for pattern matching
Better presentation of result description in docs
Start documenting arguments in mod_admin_extra commands
Typo in markdown generator
Add most status codes only to initial MUC presence
Fix section links to the Guide in the WebAdmin
Merge pull request #944 from cdroege/configureable_host-mod_register_web
Merge pull request #945 from nikolauspolak/master
Merge pull request #914 from weiss/mam-expose-jid
Add link to ProcessOne site
Link to Hex.pm
Preparing to release beta package on hex.pm
Remove compile warnings
Omit redundant check for overcrowded MUC room
mod_mam: Don't let outcasts access MUC archive
XEP-0198: Fix session timeout corner case
Update German translation
Rename option to regexp_room_id for consistency with other options (#905)
add room_id_regexp option
Allow to modify host when deleting account or changing password over web
Make hibernate timeouts configurable
Merge pull request #943 from processone/deps-cleanup
Convert tests to Fast XML
Switch to Fast XML module
Handle spaces in vsn attribute of app file when installing deps (#940)
Remove reference to p1_logger
Switch to fast_tls and update app names
Convert more dependencies to new repository / packages
Proper name for included applications
Convert code to use Fast YAML
Move to new dependencies for SIP and STUN
Move to new iconv package
Move database dependencies to new repository / modules
Syntax highlight file + comment on rebar_elixir_plugin
Switch a few version to hex.pm version
Run ejabberd test on Erlang R18
Use stringprep app name
Merge pull request #937 from Iperity/fix-presence-based-delivery
Fix presence-based delivery
More strict checking for MUC initial presence
Send presence with code 170 only in initial presence from MUC
Add 'import_prosody' command
Import privacy lists from Prosody
change mod_ping Timers using maps instead of dict
Initial version of migration script from Prosody to ejabberd
Need extra line before ## in markdown
Remove empty and unused module
Always use lagger
Set set utf8mb4 charset on mysql connection
Add header to generated markdown file
Add a way to get all ejabberd_commands, not only those that was registered
Merge branch 'master' of github.com:processone/ejabberd
As default, attempt to add path to Elixir
Geenarte markdown that is acceptable by docs.ejabberd.org processor
Merge branch 'master' of github.com:processone/ejabberd
If lager is false, we will use p1_logger
Updated Portuguese-Brazilian translation (thanks to Otávio Fernandes)
Add missing description
Merge branch 'master' of github.com:processone/ejabberd
Prepare hex.pm release
Merge pull request #919 from hamano/rename_timestamp_function
ejabberd will handle Mnesia start
lager is the default logger, we need to reverse the define flag
Mix requires override
lager is the default logger, we need to reverse the define flag
Make sure all version are consistent before big repositories changes
Make sure mix does not trigger conflict on p1_utils
Update Elixir dependency to latest p1_utils and cache_tab
rename timestamp function #917
Add missing ref key
Fix order of arguments references
Merge pull request #915 from fotock/master
Merge pull request #1 from fotock/fotock-patch-1
Update zh.po
Update zh.po
mod_mam: Expose MUC occupant JID in more cases
Fix fuzzy tag in correct string
Add error handling to send_stanza
mod_mam: Strip existing JID tags from MUC messages
Update Czech translation (thanks to Jan Pinkas)
Update Walon translation (thanks to Pablo Saratxaga)
Update Ukrainian translation (thanks to Oleg Deordiev)
Make C2S session establishment optional (ECS-11)
mod_mam: Remove unused code
Update polish localisation
Make --disable-debug work again
Merge remote-tracking branch 'processone/pr/907'
Use maps instead of dicts in HTTP upload modules
Merge pull request #906 from hamano/stats_processes
Merge pull request #911 from hamano/ja
update japanese translation
update japanese translation
Fix records in mod_muc.hrl
Include mod_muc.hrl
Do not redefine records
Describe option type of 'domain_balancing'
Update Spanish and Catalan translation
Update translations files
XEP-0198: Let MAM take care of pending messages
don't escape ERL_OPTIONS
add stats processes command
mod_mam: Sort messages returned by Mnesia
mod_mam: Limit result set page size
mod_mam: Reject <index/>-based paging
mod_mam: Remove unused variable
mod_mam: Check whether MUC message is desired
mod_mam: Support XEP-0313 v0.2 MUC archive queries
mod_mam: Respond to form requests
mod_mam: Add 'from' attribute to <delay/> tag
mod_mam: Improve binary comparison of message UIDs
mod_mam: Add "delete_old_mam_messages" command
mod_mam: Add "request_activates_archiving" option
Advertise MUC MAM v0.4.1 in room JID's disco#info
Update copyright to 2016 (#901)
Log failed SQL requests
Fix MAM MUC for v0.4.1
Merge pull request #900 from weiss/suppress-groupchat-error
Don't return error for blocked MUC messages
Merge remote-tracking branch 'processone/pr/899'
Do not fail on incorrect data coming from SQL (898)
CVE-2016-1232: Add Dialback Key Generation and Validation support (XEP-0185)
mod_http_upload: Use application/octet-stream instead of text/html for security reasons
Update Hebrew translation (thanks to Genghis Khan)
Clarify a little more room error string (thanks to Genghis Khan)
Fix 'make install' to work on osx
Add version sufixes to application locations in 'make install'
Extract deps from rebar.config to use in reltool.config.script
We need to checkout elixir first when elixir enabled
Update mix deps
Update deps in reltool.config.scripts
mod_http_upload: Use full PUT URL for process name
mod_http_upload: Rename variable for clarity
Update dependencies
Error converting times in mod_fail2ban (#889)
Fix handling of some options in old style configs
Improve escaping of arguments passed to ejabberdctl
Use crypto:rand_uniform instead of random:uniform
mod_http_upload: Fix logging of file size mismatch
ejabberdctl: Call erl without -pa argument
mod_admin_extra: Replace deprecated function calls
mod_muc_admin: Allow for setting MAM option
New send_stanza command (ejabberd_contrib#142)
mod_muc_room: Replace deprecated function call
mod_mam: Use <stanza-id/> tags for deduplication
Update translations
Improve explanation in registration page (#876)
Add commands for generating html or markdown documentation for commands
Restrict access to MAM archives for members-only rooms
Support binary strings in extract_translations
Degenderise room error message (#747)
Update set-dep-versions script to work with new rebar.config
Revert "mod_mam: Keep 'to' attribute for MUC MAM messages"
Use built-in nif for integer_to_binary/binary_to_integer
Adding WEBIRC, custom realname & ident, ISO-8859-15 (thanks to iwalkalone69)(#877)
Support presence_broadcast in default_room_options mod_muc option
ejabberd_http: Cope with large POST/PUT requests
ejabberd_http: Log debug message on receive errors
Add --enable-latest-deps to configure
Convert rebar.config.script to more declarative format
Fix pubsub virtual nodetree plugin
Fix last item message type as message attribute
Use correct notification_type for last items (#827)
Add accept_interval option in ejabberd_listener
Merge branch 'master' of github.com:processone/ejabberd
Don't read pubsub options when plugin does not use them
Remove "--enable-nif" flag
Add plugin for passing extra erl_opts flags to deps, and use it for hipe
Advertise MAM in disco info for account/room JID
Use MUC domain for 'by' attribute of <stanza-id/>
mod_mam: Keep 'to' attribute for MUC MAM messages
Fix mod_carboncopy configuration for test suite
PubSub plugin for online users only
Fix pubsub headers
Restore header in Hebrew translation file
Merge pull request #875 from GreenLunar/patch-1
Update hebrew translation
Fix pubsub test error
Use UTF8MB4 character set in MySQL tables
Use BLOB instead of TEXT on mysql in stanza storage
Remove undefined macro injected in 3bdd5d0d
Remove http supervisors
Remove receiver's supervisor
Disable use of multi-subscribe and subscription-option on standard plugins
Limit number of subscriptions per node and allow custom default node configuration
Virtual nodetree is not attached to any backend
Follow pubsub configuration when using virtual nodetree
Don't force max_items_node to MAXITEMS if not defined
mod_mam: Don't store resent messages
Document XEP-0334 support
Do not forget to include xmlns in mam prefs response (#859)
Fix problem with handling of old db entries in mod_mam
Don't let "reopen_log" rotate files (EJAB-1243)
mod_mam: Update record field type
mod_mam: Remove unused code
mod_offline: Fix outdated comments
mod_offline: Honor <store/> hint
Improve muc#roomconfig_presencebroadcast support
Don't keep 10 sec timeout that i used for testing...
Add ability to disable timeout for ejabberdctl command
mod_mam: Honor Message Processing Hints (XEP-0334)
If mod_register access_from is 'none', then don't advertise IBR (#857)
Fix more places where random:seed is used
Fix randoms.erl on R17 that don't have random:seed(integer())
Remove now() in pubsub code
More now() replacements
Fix bug in last commit
More now() removal
Remove now() - part 1
trusted_proxies option not parsed correctly (#860)
XEP-0198: Fix stanza counting corner case issue
No need for a top menu link as there's a top page link
Don't forget copying files that were compiled during `make install`
When user joins logged room, he must be warned (EJAB-726)
Only filter rooms in Service Disco when more than 100 (EJAB-343)
List in Service Disco non-empty rooms and provide Node for empty (EJAB-343)
Update cache_tab app name
Merge pull request #849 from weiss/discard-chat-states
Fix archive preference retreiving (#848)
Webadmin console visual refresh (thanks to Marek Foss) (EJAB-1142)
Simplify external components configuration
mod_offline: Support discarding chat states
Always use occupant JID as 'from' for room subject
Make JID related functions from jlib.erl deprecated
Move JID related functions to jid.erl (#847)
Make Riak working on R18
Remove useless export_all flag
Export content_type/3 needed by mod_http_upload
Merge branch 'cluster_fix'
Allow longer command execution time
Integrate join/leave cluster as ejabberd command
Merge pull request #840 from cenobites/mod_ping
Explain that reload_config only affects to ACL and Access
Adding ping_ack_timeout in mod_opt_type configuration
Fix example config about ejabberd_xmlrpc (#771)
mod_http_upload: Return error atoms, not strings
Disable vJUD by default also in mod_vcard_ldap source code
Disable vJUD search in the default config and when not specified
Support for muc#roomconfig_presencebroadcast option
Fix problem with pipelined http requests arriving in single packet
mod_http_upload: Log message if URL looks wrong
mod_http_upload_quota: Don't track all users
mod_http_upload: Make case indentation consistent
mod_http_upload: Apply cosmetic changes
mod_http_upload: Don't flatten command strings
mod_http_upload: Don't let identify/1 return error
Use xml_stream:reset() when possible
Merge pull request #821 from scrogson/update_readme_openssl
Update minimum required OpenSSL version
Remove supervisor option, disable it for c2s and muc
Add copyright and license to HTTP upload modules
mod_client_state: Add my email address to header
Faster string_to_jid/1 implementation
mod_http_upload_quota: Omit info message
mod_http_upload: Don't complain during shutdown
mod_http_upload: Use binary strings in most places
mod_http_upload: Check availability of ImageMagick
mod_http_upload: Suppress error on non-image files
Merge branch 'master' of github.com:processone/ejabberd
Fix ipv6 configuration processing (#803)
Merge pull request #801 from nanoz/patch-1
feat(ejabberdctl): Foreground option for docker
mod_http_upload: Add missing trailing dot
mod_mam: Update supported XEP version
mod_http_upload: Document protocol support
Copy elixir files in copy-files makefile target
Revert "set dependencies versions for 15.10"
set dependencies versions for 15.10
ejabberdctl.cfg: Document CONTRIB_MODULES_CONF_DIR
ejabberdctl: export CONTRIB_MODULES_CONF_DIR
mod_http_upload: Fix string()/binary() type issue
mod_http_upload: Add/fix function specifications
mod_http_upload: Strip newline from command output
Support user quotas for HTTP File Upload
Rename badly entitled record field
Add HTTP File Upload support (XEP-0363)
Don't crash on certificates without extensions (EJAB-1724)
Let modules_update_specs report failures (#756)
Merge pull request #790 from gardenia/mod_ping_configurable_ack_timeout
Merge pull request #781 from scrogson/master
mod_ping: allowed the ping ack timeout (the length of time taken to deem that a ping has not being responded to) configurable. it still defaults to 32 seconds as per the constant IQ_TIMEOUT (in ejabberd_local.erl) this just makes it optionally configurable (in my case I needed to be more trigger happy than 32 seconds)
Add simple metrics module for use with grapherl
Merge pull request #789 from gardenia/mod_shared_roster_remove_resource_in_push_from
Don't send full JID in 'from' of Roster Push (RFC 6121 section 2.1.6).  This is a patch by @badlop in the comments of github issue #367
Use homogeneous s2s connections stats (#761)
Remove access_commands 'unrestricted' option, use [] instead.  Fix unauthenticated calls to commands with policy=user.
Pass {C,CPP,LD}FLAGS used in main ./configure call to invocations from deps
Improve access_commands option backward compatibility
Fix access_commands option handling
Make COPY_template compatible with gmake 3.8
Let Travis CI test "make install"
Make install should work even without having DESTDIR set
ejabberd_listener: Fix ETS update on port reuse
ejabberd_c2s: Let stop/1 close XEP-0198 sessions
ejabberd_c2s: Close socket when waiting for resume
Use OTP directory structure for 'make install'
Make KEEPALIVE_QUERY list as this is what sql_query/3 expects
Improve line lengths; use spaces in between commas.
mix.lock should be commited to ensure consistent builds.
This dependency was removed in 83dd79a
Fix cyrsasl_oauth:mech_new call
Remove obsolete sasl init
Advertise MAM (XEP-0313) v0.4 support in room disco
Be able to merge old style configs with {listen,...}
Handler module shouldn't be used for differentiating listeners when merging configs
Enforce get_allowed_items_call
Fix acl issue from cleanup
Revert "Avoid crypto:hmac/3 call for R15B compatibility"
Revert "Fix compilation on Erlang R15B"
cosmetic cleanup
Remove unused dependency
Avoid MAM dups when routing to multiple resources
Fix force_update_presence
We want oauth2 to be supported as default in Elixir environment
Fix problem with --auth in ejabberd_ctl:process2/2
Switch macros resolving in config files to be global instead of per file
Merge pull request #753 from scrogson/add_links
Merge pull request #755 from scrogson/fix_ejabberd_directory_name
Use lowecase directory name for lib/ejabberd
Merge pull request #754 from scrogson/gitignore
Ignore mnesiadb and _build
clean up whitespace
Add additional package information for hex.pm
Temporary switch to fork of oauth2 that compiles with r18
Set version 15.09 for mix
Recompile translations
Update several commands for recent ejabberd_commands changes
oauth uses jiffy so fetch it unconditionally
Add oauth_access option
Strip Nick element in message stanzas sent to a room (#686)
Enable oauth unconditionally
Revert "Remove "--enable-json" flag"
Add OAuth support (thanks to Aleksey)
Merge pull request #742 from joudinet/master
Fix calling problem introduced when reducing bashisms (#748)
Merge pull request #748 from joudinet/bashisms
Fix regression introduced when code was binarized (EJAB-641)
Remove bashisms in {join,leave}cluster scripts
Log TLS errors as [debug] messages only
Add <stanza-id/> (XEP-0359) to archived messages
Allow root to run join_cluster and leave_cluster
Set disable caching headers in http-bind responses (EJAB-1643)
Nameprep host name passed to http-bind before using in (EJAB-1658)
Improve external module configuration management (EJAB-1746)
Add MAM (XEP-0313) v0.4 support
Avoid wrong failing cases on make install (#468)
Add set_loglevel command (EJABS-2524)
Merge branch 'master' of github.com:processone/ejabberd
Remove unused functions from old get_items api
Make sure that lager is first on our deps list
Guard against passing undefined C2SPid to xml parser before become_controller gets called
Let BOSH/WebSocket support "max_resume_timeout"
Merge pull request #736 from quanzhuo/master
Comment unused type, unused term
Properly handle define_macros in merged config files
Update French translation
Update French translation
Update polish translation
XEP-0198: Improve handling of non-message stanzas
Improve MSSQL schema
Simplify MSSQL configuration
Fix MSSQL support
ext_mod must be started before ejabberd_config
Update German translation (thanks to Nikolaus Polak)
Update Hebrew translation (thanks to Isratine Citizen)
Include ext_mod modules when checking accepted options (ejabberd-contrib#116)
typo fix
Update Esperanto and Dutch translations (thanks to Andreas van Cranenburgh)
Merge branch 'master' of github.com:processone/ejabberd
Fix typo
Update Brazilian Portuguese translation (thanks to Otávio Fernandes)
Update Japanese translation (thanks to Tsukasa Hamano)(#729)
Use our own includes + includes from all dependencies
Update Catalan and Spanish translations
Update Russian PO file
Run "make translations" and get updated PO files
Fix German translation (thanks to STPKITT)(#726)
Pass stream management options defined in http listener to http-bind and websocket
New XEP-0198 option: "max_resume_timeout"
Use hide_sensitive_log_data in eldap.erl
Merge branch 'master' of github.com:processone/ejabberd
Better to keep config file in a different config directory
Rename idna.erl to ejabberd_idna.erl (#702)
Merge pull request #725 from processone/elixir-mix
Add verification of hide_sensitive_log_data global option
Remove unused function now_to_iso/1
Allow building ejabberd with Elixir mix and building and ejabberd OTP release
ignore ejabberd release result directory
Update mix.exs to comply with exrm release system
Update mix.exs
Upgrade version number to ejabberd 15.07
Do not forget to set from/to when fetching from MUC history
Fix problem with merging same port, different ip listeners in config files
Fetch MUC MAM messages from room history directly if it's not enabled in room configuration
Update MAM tests to always expect RSM in response
Merge pull request #721 from oxpa/muc_admin
get_room_options will not crash in case of query for a non-existent room
Remove "--enable-json" flag
Always include RSM in final message
Remove MAM archives on MUC room destroy
More eye-candy mod_http_bind help page (thanks to Marek Foss)
Improve S2S certificate checks
Fix case clause during S2S certificate checks
Change namespace from muc#admin to muc#user
Don't overwrite listeners for different transports in config merging
Catch errors when calling inet:peername in ejabberd_http
Let ejabberdctl handle more shell metacharacters
configure.ac: Don't insist on Erlang/OTP >= 17.5
Prettify copyright links (thanks to GreenLunar)(#692)
Store and retrieve "mam" value in room configuration
Fix and document create_rooms_file and destroy_
Changed API of some mod_muc_admin command arguments
Room response to disco#info node muc#traffic should be an error	(EJAB-741)
Ejabberd now requires erlang R17+
Add support for MUC MAM
Handle merging of append_host_config as is done for host_config
Add ability to override main config file options with data from included files
Remove obsolete pubsub migration command
Merge branch 'typo' of https://github.com/sezuan/ejabberd
typo
mod_multicast changes: - catch exceptions - do ets:give_away for multicastp table on init - don't send multicasts to itself - don't check user@server for multicast support - handle empty disco items - ignore cdata in <addresses/> - properly check for subdomains
Use websocket pings also on old style connections
Update FSF address
mod_client_state: Throttle stanzas by default
Rename muc_filter_packet to muc_filter_message
Merge pull request #696 from weiss/muc-presence-hook
New hook: muc_filter_presence
Add split_jid/1
Do not crash SIP authentication on SCRAMed passwords
Update crypto calls
Merge pull request #682 from weiss/no-mam-carbons
bug fix: ejabberd:start_app need to pass Type to application:start
Don't copy messages of type "normal" without body
Also check for <no-storage/> hint
XEP-0198: Don't add <delay/> tags to IQ stanzas
Recompile translations
Updated Spanish translation
Updated Hebrew translation (thanks to Isratine Citizen)
Reuse some strings in WebAdmin's Listening Ports
Fix problem with merging values from multiple config files
Ensure config snippet is loaded at module installation (EJAB-1741)
Allow contribution to include .yml or .yaml config file
Allow migration of old pubsub items with xmlelement in body (#479)
Merge pull request #642 from weiss/pep-on-caps-update
Provide command for ODBC's convert_to_scram
Don't crash web admin when displaying info about websocket using users
Let nodetree call default flat plugin now
Allow include of simple dependencies (EJAB-1737)(#391)
Let flat be default plugin (#609)
Do not init nodes from mod_pubsub (#609)
Merge pull request #608 from weiss/bare-jid-subscription
Merge pull request #632 from weiss/increase-max-ack-queue
Merge pull request #618 from weiss/muc-message-hook
Print content types more gracefully
Get rid of 'db_type' for mod_blocking in test suite
Set direction of resource and connection (#650)
If local guide.html file not found, redirect to the online guide
Update links to Guide in WebAdmin
Support RTL page direction in WebAdmin for Hebrew (#650)
Set LTR direction to Raw links (#650)
Add links in WebAdmin to ejabberd and ProcessOne (#661)
Support more mod_muc_admin translation strings (#659)
Update dev section to show erl command-line start command
Add "complete" attribute to MAM final response (EJABS-2484)
Fix mod_mam compatibility with RSM for other backends
Fix tests related to MAM
Fix mod_mam compatibility with RSM (only with odbc backend).
During halt only shutdown MUC rooms on local node
Fix MAM tests (EJABS-2480).
Changed mam iq get to set as specified by XEP-0313 v0.3
Trigger PEP notifications on CAPS updates
mod_pubsub: Explain caps_update usage in a comment
Fix dialyzer warning
Remove ehyperloglog dependency
XEP-0198: Increase timeout during resumption
XEP-0198: Increase default "max_ack_queue" value
New hook: muc_filter_packet
Let Travis grab MySQL 5.6 from repo.mysql.com
Send notifications on MUC configuration changes
Merge pull request #628 from joudinet/master
configure.ac: add AC_CONFIG_MACRO_DIR
Version number must be SemVersion in mix
Use https url for git dependencies for consistency
Keep the version hardcoded in mix.exs file
Do not rely on behaviour info when doing config validation
Merge pull request #620 from weiss/omit-non-anon-msg
Omit warning message regarding non-anonymous room
When passwords are scrammed, report check_password_hash cannot work (#559)
Add xep definition to mod_mam
Add MAM (XEP-0313) support
Document a few more supported protocols
Add s2s_dhfile to list of known options
Update comment that explains how to set up node_mb
PubSub: Check for node subscription of bare JID
Allow several ';' passed in commands (#599)
change_room_option misses handling some room options #604
Don't force persistence if cache enabled (fix previous commit)
Fix max_items and don't let PEP depends on item cache
New hide_sensitive_log_data option to hide client IP in log (#452 #471)
Allow password with ';' passed in ejabberdctl (#599)
Add s2s_dhfile option to configuration validator
Merge pull request #581 from weiss/dh-param-file
Add option to set net_ticktime (EJAB-1742)
Fix bug introduced in commit b88fa6f6174
Use https instead of git in rebar file for dependencies url (#589)
Pick first local multicast service, otherwise remote (ejabberd-contrib#105)
Merge pull request #592 from weiss/omit-subject-body
Don't add body element to MUC subject messages
Merge pull request #591 from jpegger/patch-1
Authmodule using old style XML:get_attr_s()
Do not ignore unknown options so far
Remove unused validation code
Move opt_type/1 function out of if-else block
Fix typo
Add missing options of ejabberd_logger to validator
Add missing options of mod_muc to validator
Fix commands export2odbc, connected_users_vhost and push_alltoall (#586)
Merge pull request #585 from CorCornelisse/master
Merge branch 'master' of github.com:processone/ejabberd
Add config validation at startup
Fix anonymous user login, it wasn't stored in anonymous mnesia table
Do not try to fetch module options via eldap_utils
Reorganize get_opt() code in some modules
Get rid of some fuzzy macros as it makes syntax tools getting mad
These arguments should be binary instead of strings, otherwise it won't work properly
In xmlrpc use process_unicode_codepoints instead of list_to_binary
Fix MUC room options vaildation
Add correct package version for mix (#577)
Validate MUC room options from the configuration file
Merge pull request #582 from badlop/master-badlop-578
An auth external module requires ext_mod to be started first (#578)
New options: dhfile and s2s_dhfile
Fix pubsub/odbc crash on remote user unsubscribe (EJAB-1483)
Merge pull request #569 from weiss/send-element-error-checking
Include session record from header file instead of duplicating it
Fix merging of not yaml config files
Fix use of publish_only affiliation with odbc backend
Minor cosmetic changes and add ping command
Add fold markers to config file for Vim editors
A few more... Fix epmd not in PATH (#484)(thanks to acediac)
Use namespace definitions when possible
Document protocol support (EJABS-1620)
Fix dialyzer warning in mod_muc_admin:206
Merge pull request #573 from sezuan/fix_odbc
Add minor robustness on cluster scripts
Add missing sm table (thanks to Rasim Kalimullin)(EJAB-1740)
Merge pull request #576 from processone/revert-570-fix_added_sm_table_to_pg
Revert "added sm table to pg.sql"
Merge pull request #570 from sezuan/fix_added_sm_table_to_pg
Fix function specification
Remove obsolete doc and win32 files (EJAB-1738)
Do not bounce normal messages sent to unavailable resource
Simplify XEP-0203 (Delayed Delivery) code a bit
Call integer_to_binary using jlib (#554)
Remove XEP-0091 tags from test suite
Remove deprecated XEP-0090 Entity Time and 91 Delayed Delivery (EJAB-849)
Fixed some string()/binary() issues in ejabberd_odbc
Revert "Fix EJABBERD_OPTS quoting for Elixir"
Merge pull request #571 from sezuan/fix_export_term
pg - added sm table
fixed erl_prettypr in encode_term
New command get_room_options (#567)
Fix indentation
Load config snippets for modules installed with ext_mod (EJAB-1741)
Export modules_dir/0
Cosmetic change: Simplify error checking
Don't assume send_element/2 returns ok or error
Allow run joincluster as non root when ejabberd installed as root (#497)
Merge pull request #503 from weiss/fix-quoting-for-elixir
Fix setting 'description' with change_room_option command (#567)
Merge pull request #560 from benlangfeld/feature/dev-vm
New max_users_presence mod_muc option (thanks to anhcoi123)(#562)
Fix check_password_hash argument parsing (#559)
Try to support access_commands in YAML (ejabberd-contrib#45)
Revert "Add private and roster local handlers (EJAB-682)" due to #556
Don't announce register feature once user is authenticated (#41)
Use SASL PLAIN authzid as client identity if auth module permits it
Remove commented code
Merge pull request #561 from weiss/muc-mark-private
Tag private MUC messages with muc#user namespace
Point out availability of development environment
Simplify internal code of get_last and set_last commands
Improve get_last command to provide also last activity status
Fix set_last command to work with recent ejabberd (#555)
Remove duplicated code
Improve module install code, allows better error checking
New command get_user_rooms
Fix fetching from git@github url and allow compilation from ejabberd sources
Merge pull request #549 from joudinet/master
Merge pull request #547 from weiss/fix-account-jid-disco
ejabberdctl: define mnesia options
Rely on core routine for handling affiliation changes (thanks to Ben Langfeld)
mod_disco: Apply minor readability improvements
mod_disco: Omit 'roster_get' call if possible
Fix service disco handling for bare account JIDs
Fix validating function for iqdisc
Allow bypassing script interraction (#516)
Improve purge_offline filter and speed (#543)
Add publish_only to affiliation type spec
Add private and roster local handlers to get listed in disco#info (EJAB-682)
Remove obsolete release notes
Allow to modify host when registering account in web (#291)
Add support for publish-only (#30)
Fix typo, oups...
remove deferred Collection shim header
Owner can subscribe to its node (#454)
Fixed node type (thanks to saczawap) (#435)
PubSub improvements
Improve join/leave cluster scripts
Merge pull request #540 from weiss/queue-error-stanza
Fix LDAP substrings filter (EJAB-1715)
Add privacy error stanza to XEP-0198 queue
Fixed error replying on blocked messages
Make s2s port configurable in test runner
Remove load_config command because is superseded by reload_config (#532)
Merge pull request #536 from weiss/fail2ban-whitelist
mod_fail2ban: Add 'access' option for whitelisting
cyrsasl_scram: Return user name with error message
ejabberd_s2s_out: Remove Erlang/OTP version check
CSI test: Simplify and improve readability
CSI test: Fix race when slave becomes active again
Update get_password_s description with SCRAM return values
Revert "Hook on group message"
Make sure that server processed our inactive request before processing further in testing
Merge pull request #426 from hairyhum/master
Remove http_poll module
Enable websocket connection in default config file
Don't forget gen_tcp:listen/2 options
Fix nick logging in mod_muc_log plaintext (#522)
Clean multicast routing code detected by xref
Add ability to configure parameters used by "make test" with test/config.ctc
Give better error messages for tests failing on #...{} = recv() lines
Show received input and expected input in ?recv* macros in case of failure
Fix problem with pushing bufferend #xmlel-s to receiver in websocket code
Fix bug when sorting the list of rooms in WebAdmin
Remove hack with binary to integer conversion
Merge branch 'master' of github.com:processone/ejabberd
Add virtual host support for SQLite
Copy multicast code from ejabberd-contrib to provide XEP-0033 (#521)
Add SQLite3 library checks at the configure script
Disable awkward trap_exit flag
Enable FOREIGN KEYS by default
Make sure SQLite always returns binaries
Merge pull request #486 from saa/sqlite_support
Add mod_muc_admin contrib.
ejabberd_listener: Remove Erlang/OTP version check
Merge pull request #518 from liudanking/master
Explicitly start crypto with start
fix otp version check in listen_tcp/5
Don't call send_element/2 if previous call failed
Fix problem with c2s buffering on old style websocket connections
Merge pull request #513 from weiss/ignore-header-case
Explicitely start crypto module
Fix compilation result for asn1 files
Remove unused variable
Fix asn1 module compilation with mix
Fix type spec
Make sure Mnesia dir environment and log file are list, not binary
ejabberd_websocket: Ignore case of header values
ejabberd can be embedded in an Elixir application
Replace crypto calls that will be removed in a future release
Replace undefined value with empty one (processone/ejabberd-contrib#92)
Remove unused case clauses to make dialyzer happy
Improve srg_get_info result format (processone/ejabberd-contrib#92)
Fix output formatting in srg_get_info commend from mod_admin_extra
Fix problems with get_vcard* functions from mod_admin_extra
Drop exmpp usage from mod_admin_extra
Merge pull request #493 from weiss/rfc-6121-routing
Swap 'mnesia' and 'internal' types correctly
The 'default_db' option should impact ejabberd_auth as well
Add new 'default_db' option
Fix lite.sql and convert binary to integer
Try to fix more Dialyzer warnings
Ensure set_presence changes are kept in state (thanks to Davide Colombo)(EJAB-1184)
Remove tools/configure.erl as it's not used and can cause problem with make install
Fix even more dialyzer warnings
Fix set_presence command (ejabberd-contrib#61)
Fix more mod_admin_extra commands
Fix problems in process_rosteritems command
Add mod_admin_extra as a commented module
Detect correctly when vCard does not exist (#21)
Fix return error when requesting non-existing vcard value (#21)
Ignore errors when retrieving status if the users just got offline
mod_admin_extra: Let send_message omit subject
Update FSF address (solves #73)
fix connected_users_info in mod_admin_extra
mod_admin_extra: Fix private_get/private_set types
Support TEL XXX in set and get_vcard commands
Changed signature of user_sessions_info to take binaries rather than strings as it doesn't match anything in mnesia if it searches it by string
Join three send_message_* commands in one (PR #68)
add send_message_normal command
fix mod_admin_extra stats command
mod_admin_extra: Fix stats(_host) argument types
Update kick_session to work with ejabberd master
Binary conversions
More binary conversions
Update add_roster_item and get_roster to ejabberd 13
Fix get_vcard and set_vcard when using option module_resource (issue #21)
Fix add_rosteritem, delete_rosteritem, and get_roster
Update get_vcard and set_vcard to ejabberd 13 (fixes issue #21)
mod_admin_extra: for support in ejabberd-v13.x changed args from string to binary : all changes tested with ejabberdv13.12
Fix command change_password (fixes #16)
Handle error when requesting information of a non-existing shared roster (fixes #14)
Fixes srg_* commands (fixes #147)
Fix srg_create when calling ejabberd_regexp (fixes issue #12)
Add get_last to ejabberdctl for last user activity (thanks to lehrblogger)
Initial import from ejabberd-modules SVN
Make sure that we send each time <close> before closing websocket connection
If command crashes, return restuple with error and explanation (ejabberd-contrib #21)
Don't bother with filtering out PEP error messages
Route headlines sent to bare JIDs to all resources
Don't route error/groupchat messages to bare JIDs
Update routing for unavailable resources
Return error when incoming message is blocked
Fix "IP address not available" error message
Add support for ciphers and protocol_options in ejabberd_http
export CONTRIB_MODULES_PATH (thanks to sezuan)(#489)
Make R16B03-1 the minimal reguired otp version
Avoid crypto:hmac/3 call for R15B compatibility
Fix compilation on Erlang R15B
Remove duplicate CREATE INDEX in mysql.sql
Start ext_mod before module as it's setup contrib path
Removed deprecated calls to crypto:sha_mac in scram.erl
Add ejabberd_auth_odbc:convert_to_scram/1
Add SCRAM support to ejabberd_auth_odbc
Add a missed SQL index on privacy_list_data table
Added MySQL support for delete_old_messages (offline) command.
Fix mod_offline termination
Explicitly set standard_conforming_strings to off with PostreSQL
Report TLS errors
Add SQLite support
Fix epmd not in PATH (#484)
Update 'rsm_in' record element types
Add missing list_to_binary call
Add contributed modules code path on start
Rename module function to keep them grouped on help
Merge pull request #473 from weiss/escape-space-in-options
ejabberdctl: Escape whitespace in ERL_OPTIONS
Improve module structure
Do not fail on badly formed SQL results
Fix unblock all when Riak is used as a backend
Extra arguments to cluster scripts are not mandatory
Remove trailing space to get correct arguments
ejabberdctl: Escape whitespace in ERL_OPTIONS
Replace bashism in ejabberdctl
Update sockmod() type after adding websocket support
Remove unused clause
Update types to fix dialyzer warnings
mod_offline: Remove a few superfluous newlines
Don't crash in mod_offline:export/1
start ext_mod in later stage at init
Remove unused code
Compile contributed module with lager if enabled in ejabberd
Add packaging support for contributed modules
Add Redis backend for SM
Always specify room JID for MUC <delay/> elements
Merge pull request #467 from hamano/mod_offline_restart
Fix R15B compilation
Make it possible to use SQL as an SM backend
Add forgotten header file
Separate db backend from the SM
change mod_offline restart type
Merge pull request #466 from mremond/hooks_refactor
Reorganize / clean ejabberd_hooks header
More ejabberd_hooks refactor
ejabberd_hooks refactor and better types
Suppress warnings in Elixir test
Add Elixir test on ejabberd hooks
Merge pull request #462 from mremond/add-meck-tool-dependancy
Add Meck dependency when building for development
Merge pull request #461 from mremond/fix-r16-tests
Test file can be compiled under R16
Merge pull request #460 from mremond/run-elixir-test
Fix Elixir tests failure detection
add mnesia cluster helper scripts
Fix: default_host is forgotten between consecutive HTTP requests (#416)
Access list editing broken in web_admin (#252)
Accept configuration file with .yaml extension (#290)
Merge branch 'master' of github.com:processone/ejabberd
Fix typo on state reuse
Merge pull request #441 from mremond/test/#438/run-elixir-tests
Fix IPv6 loopback address in the guide
Merge pull request #448 from hamano/ja
Merge pull request #384 from weiss/fix-last-item-type
additional japanese translation.
Update Spanish translation
Run "make translations" to update PO and MSG files
Merge pull request #445 from hamano/ja
improve japanese translation
Update remanining old RFC links (EJAB-1728)(#444)
Merge pull request #443 from mojolingo/feature/muc_admin/affiliation-change-propogate-xmpp
set-dep-versions: Cope with branches
Permit modifying affiliations via an event
Update FSF address
Fix processing POST messages after changes from adding websocket handling
Try not to use c2s:send_text, it causes problem with websocket
Add support for websocket connections
Fix EJABBERD_OPTS quoting for Elixir
Merge pull request #442 from weiss/use-stable-elixir
Use Elixir's 'v1.0' branch
Hook on group message
Merge branch 'master' of github.com:processone/ejabberd
Add script for systemd (Guthub #434)
Increase common test timeout
Add compatibility macros for deprecated types (thanks to Alexey)
Improve comments for running Elixir tests
Support for running Elixir ExUnit tests from Common Test
Update links
Display build status
Update mod_vcard_ldap Guide documentation from Erlang to YAML format (Github #274 #394)
mod_carboncopy: Apply small code simplification
Check availability before carbon copying
Don't crash if 'request_path' has unexpected type
Fix incorrect Elixir name
Remove unused function clause in mod_carboncopy
Fix "make install" without Elixir support
Disable elixir support in travis tests
Merge pull request #429 from mremond/master
Add Elixir support to ejabberd
Document EJABBERD_CONFIG_PATH in ejabberdctl.cfg
README: Mention commands in the right order
README: Mention how to create "configure" script
Don't convert configuration values to strings
Fix typo in debug message
Migration of scram passwords with piefxis (riak and internal only)
List all available commands in the guide (EJAB-1735)
Support for "> ." in YAML configuration files
Merge pull request #414 from weiss/fix-function-specs
Fix a few function specifications
Fix integer parameter which can be set to 0
Merge pull request #413 from weiss/fix-timestamp-overflow
New command to reload config (EJAB-1140)
Fix missing copyright dates to 2015 (EJAB-1733)
Increment number of seconds on timestamp overflow
Don't match integer() against float() value
Fix overflow in XEP-0203 delay: if microseconds exceeded 999499, *** was put in the formatted timestamp
Merge pull request #410 from weiss/enable-transient-supervisors
Cosmetic changes for "./configure --help" output
Enable transient supervisors by default
Merge pull request #409 from hamano/scram-stringprep-checking
correct fix for #396
correct fix for #396
Update the Guide about using access_commands in YAML/CFG files
Fix binaries when ejabberd_ctl passes auth details
Fix access_commands option in ejabberd_xmlrpc, now it works
Get rid of asn1rt calls
Ignore warnings_as_errors everywhere
Merge pull request #400 from toopay/patch-clarity-cleanup
Fix spec comment and remove useless case block
Merge pull request #399 from toopay/patch-cleanup-unused-vars
Fix unused vars warning
Update some RFC links (EJAB-1728)
Update compilation from git (github #397)
Update copyright dates to 2015 (EJAB-1733)
Merge pull request #396 from hamano/scram-stringprep-checking
checking stringprep in scram authentication
Fix missing presences when adding shared groups (Github PR#99, thanks to Bokner)
Fix binaries in command ejabberdctl stop_kindly
Merge pull request #383 from weiss/fix-shutdown
Merge pull request #395 from weiss/fix-turn-example
Fix example: turn_ip must be specified as string
Merge pull request #387 from weiss/fix-captcha-without-proto
Fix ejabberd_captcha's listener parsing
Give temporary processes time to stop cleanly
Use correct message type for last published items
Improve add_message_type/2 function
Fix upgrade of PubSub mnesia tables from older ejabberd version.
Merge pull request #379 from weiss/polish-readme
Apply various cosmetic changes to README file
improve readability of links on github page
improve README adding feature list
Merge pull request #377 from weiss/new-timestamps
Let jlib use "B" instead of "w" to format integers
Add fractions of seconds to <delay/> timestamps
include static versions of deps in rebar.config/script (thanks to Holger Weiß)(EJAB-1730)
Merge pull request #374 from weiss/fix-muc-log-config
mod_muc_log: Fix configuration parsing
Let CSI code add timestamp at later point in time
XEP-0198: Add timestamp to resent stanzas
Improve interface for adding timestamps
Merge pull request #366 from weiss/remove-unused-field
Remove unused field from c2s #state
Merge pull request #350 from flygoast/master
Merge pull request #365 from weiss/csi-config
Merge pull request #364 from weiss/copy-normal-messages
Merge pull request #363 from weiss/drop-pep-errors
Merge pull request #354 from weiss/pep-privacy
Merge pull request #352 from weiss/no-last-pep-duplicates
Fix mod_client_state's configuration parsing
Also carbon-copy messages of type "normal"
Don't route PEP error messages to clients
Add new hook: c2s_filter_packet_in
Merge pull request #223 from kaLaJengkinG/patch-1
Merge pull request #361 from weiss/parse-ldap-dn-filter
Fix parsing of "ldap_dn_filter" option
Merge pull request #360 from lbanders/master
Fix for ejabbed bug #359 - now strings are formatted correctly.
Respect privacy lists for incoming PEP messages
Don't duplicate last published PEP items
Merge pull request #351 from weiss/floating-muc-intervals
Support floating point message/presence intervals
Used current working home as base directory to config relative path.
Merge pull request #345 from weiss/last-pep-items
Merge pull request #346 from weiss/fix-type
Use correct type for initial c2s #state.user value
Send last PEP items to remote subscribers
Don't broadcast last published PEP items
Move routing of last PEP items into new function
ODBC: Sync last item notifications with mod_pubsub
Merge pull request #341 from sezuan/fix-kick-user-command
Fix kick_user command
Merge pull request #340 from weiss/disable-mechanisms
New option: disable_sasl_mechanisms
Merge pull request #337 from weiss/fix-install-without-json
Fix "make install" without JSON support
Merge pull request #335 from weiss/avoid-carbon-dups
Avoid duplicates of carbon copies
Add xref test to travis.
Fix race in CSI test case
Add tests for mod_vcard_xupdate
Merge branch 'master' of github.com:processone/ejabberd
don't stop on error if jiffy.so symlink exists #309
Merge branch 'master' of github.com:processone/ejabberd
Clean up rebar script.
fix invalid path of jiffy.so on install #309
Fix xref check when odbc driver is not used.
Ignore riak_object module call for xref check.
Add xref Makefile target.
Merge pull request #328 from flygoast/master
Add new option: store_empty_body
Merge branch 'master' of github.com:processone/ejabberd
Revert "fix mod_offline to store only chat messages with body xml element"
Merge pull request #330 from weiss/accept-newline
Accept trailing whitespace in Base64 strings
Return an empty <vCard/> element in an IQ-result when no vCard exists.
Get rid of a hyphen in VSN
Merge pull request #325 from weiss/auth-after-tls
Don't advertise auth mechanisms too early
Merge pull request #321 from weiss/fix-http-request-record
Merge pull request #324 from liudanking/master
fix odbc keepalive interval bug
Remove append_host_config from ejabberd.yml.example
Merge pull request #322 from weiss/xep-0198
XEP-0198: Abort immediately on queue overflow
Use 'request' record definition from header file
Merge pull request #317 from weiss/xep-0198
Merge pull request #318 from weiss/remove-xmlrpc-dep
XEP-0198: Set #state.conn field on session resume
Remove "xmlrpc" dependency for "make rel"
Merge pull request #316 from weiss/really-require-tls
Make sure "starttls_required" can't be bypassed
Fix list unblocking when Riak is used as a backend
Fix format of an XML-RPC response
Switch to P1 implementation of XML-RPC
Process XML-RPC requests via p1_xml and ejabberd_http
Make directory creation more robust
Merge pull request #310 from weiss/ignore-rel-dir
Let Git ignore the "rel/ejabberd" directory
Merge pull request #303 from weiss/no-csi-if-unconfigured
Offer CSI stream feature only if configured
Add new hook: c2s_post_auth_features
Merge pull request #307 from weiss/remove-invisible-presence
Remove invisible presence fields from c2s #state
Merge pull request #302 from weiss/ldap-deref-aliases
Rename deref_aliases back to ldap_deref_aliases
Merge pull request #301 from Iperity/master
Fix init script: use getent to allow ejabberd user from external authentication sources (LDAP)
Merge pull request #300 from weiss/resend-if-offline
XEP-0198: Support "resend_on_timeout: if_offline"
Merge pull request #299 from sjmackenzie/processone
added p1_utils to reltool.config resolving treap:empty() undefined error
Avoid generation of excessive records
Merge pull request #298 from weiss/csi
Add tests for Client State Indication support
Support XEP-0352: Client State Indication
Merge pull request #297 from weiss/remove-configure-flag
Travis CI: Remove unused configure flag
Merge pull request #296 from weiss/remove-unused-clause
Merge pull request #295 from weiss/xep-0198
XEP-0198: Remove unused function clause
XEP-0198: Change state on gen_tcp:send/2 failure
XEP-0198: Let fsm_next_state/2 check timeout value
allow guide not to be compiled for install
Test MUC nick registration
Parse x:data in jabber:register
Make sure x:data form possesses 'type' attribute
Fix privacy checks of presence probes
Automatically remove IPs from ban, add the documentation
Remove useless -include()
Ban the IP if there are too many failed authentications
Add mod_fail2ban
Recompile the xmpp_codec using updated XML generator
Merge pull request #293 from weiss/fix-comment
Merge pull request #292 from weiss/fix-xep-reference
Fix a comment in ejabberd_hooks
Fix an XEP reference in the guide
Merge pull request #287 from vesvalo/master
Fix return value of mod_shared_roster:delete_group. Current one is not compatible with mod_admin_extra.
Merge pull request #286 from vesvalo/fix_pep_odbc_publishing
fix 404 on pep first publishing with odbc
Merge pull request #284 from weiss/infinity-vs-unlimited
Guide: For consistency, use 'infinity' everywhere
Merge pull request #283 from weiss/allow-unlimited-ack-queue
Merge pull request #282 from weiss/fix-muc-option-docs
Allow for "max_ack_queue: infinity", as documented
Fix MUC option docs: "infinity", not "infinite"
Merge pull request #280 from weiss/store-persistent-muc-on-init
Store persistent MUC room during creation
Merge pull request #277 from weiss/xep-0198
XEP-0198: Create shorter resume IDs
Merge pull request #276 from weiss/xep-0198
XEP-0198: Gracefully handle broken 'previd'
XEP-0198: Gracefully handle wrong credentials
Merge pull request #269 from Iperity/master
Merge pull request #268 from benlangfeld/fix/ldap_filter_dnattributes_new_ejabberd
Fix the deprecation warning to reflect YAML format
Do not call functions from ejabberd_riak directly
Merge pull request #273 from gamenet/master
Merge pull request #2 from vesvalo/master
fix mod_offline to store only chat messages with body xml element
Merge pull request #1 from vesvalo/master
Fix odbc update_t and update insert case return value
Merge pull request #270 from weiss/log-s2s-in-auth
Log auth method for incoming s2s connections
Fix migration of pubsub nodes. Was deleting and re-creating all nodes on each startup.
Merge pull request #267 from weiss/replace-echo-calls
mod_offline now uses gen_server
typo fix on roster subscription (EJAB-1711)
Set dnAttributes on when it's requested by a filter
doc/Makefile: Replace non-portable echo(1) calls
Reorganize mod_announce test in order to avoid race
Merge pull request #266 from weiss/remove-http
Merge pull request #265 from weiss/mention-starttls-required
Merge pull request #264 from weiss/su-without-p
Remove "--enable-http" flag
Mention "starttls_required" option in ejabberd.yml
Apply minor improvement to ejabberd.yml comment
ejabberdctl: Omit su(1)'s "-p" flag
Merge branch 'master' of github.com:processone/ejabberd
Add tests for mod_announce
Merge pull request #263 from weiss/fix-ejabberdctl-issues
Merge pull request #262 from weiss/update-gitignore
Let Git ignore the "configure" script
ejabberdctl: Remove outdated comment
ejabberdctl: Create home directory as root
Merge pull request #261 from weiss/no-bash
ejabberdctl: Use $INSTALLUSER's home directory
doc/Makefile: Don't insist on using /bin/bash
Re-generate the XMPP codec using updated xml_gen
Fix events broadcasting via C2S
Merge pull request #257 from weiss/fix-option-name
Fix "s2s_access" option name in documentation
reflect correct default value un example documentation
Add tests for session management
old release notes are not installed anymore
apply pull request #250 to pubsub_odbc as well
Merge pull request #250 from Iperity/master
html guide is now generated when building source tarball
remove bash dependency, fix EJABBERD_OPTS use
avoid incorrect release version string (EJAB-1695)
Add tests for mod_carboncopy
Move some namespaces definitions into header file
Merge pull request #254 from weiss/replace-bashism
Replace bash-specific syntax in ejabberdctl
Merge pull request #253 from weiss/fix-config-comments
Fix ejabberd.yml comment on overload protection
Fix ejabberd.yml comment on log rotation syntax
Improve MUC test cases
Fix Record-Route signing
treap.erl was moved to p1_utils
Use p1_utils
Get rid of p1_mnesia file
Change return type to reflect recent changes in p1_sip
Fix returned types
Fix blocklist get
Merge pull request #251 from weiss/enable-riak-tests
Travis CI: Enable Riak tests
Remove unnecessary defaults from the xmpp_codec spec
Better Riak usage detection
Fix broken hooked functions
Add mod_caps checks to the testing suite
Fix configuraton with custom nodetree plugin
Do not check for Erlang apps at configure time as it looks redundant
Serialize records to proplists before storing then in Riak
Merge pull request #248 from mathiasertl/master
Move warnings inside check for , use variable for path
Re-generate the HTML documents
Mention about Riak in yet another place
Try to bypass Riak tests by Travis CI
Fix compile errors introduced by previous cherry picks
Re-generate the configure script
Add --enable-riak configure flag
Document Riak support
Check Riak connection before running the corresponding suite
Make it possible to check Riak connection status
Don't forget to shutdown rooms before starting the testing suite
Improve test suite explanation
Clear Riak data when initializing the testing suite
Fix roster versioning support when Riak backend is enabled
Fix case clause
Improve Riak pool management
Fixate Riak client library
Add Riak backend to the testing suit
Add SQL to Riak converter
Improve Riak support
Updated riak support
Preliminary Riak support
Add start_module/2
Improve documentation of mod_sip
Rename options
Add new option support: always_record_route
Merge pull request #243 from matwey/master
Use -include_lib instead of -include for esip and p1_xml
Revert "Fix IQ XML generation."
Return MySQL error messages as binary.
Fix IQ XML generation.
add ability to rotate logs on given date condition
New option support: log_rotate_count
Support new options: log_rotate_size and log_rate_limit
Disable SASL error logger if lager is enabled
mod_caps doesn't provide Mnesia export feature
let ejabberdctl explicitely use bash
Merge pull request #238 from weiss/log-node-mismatch
Check for Mnesia node name mismatches
Change default flow timeout as recommended per the RFC
Don't forget to close socket of timed out flow
Merge pull request #237 from weiss/log-config-path
Mention configuration file path in error messages
Merge pull request #231 from hamano/case_clause_error_at_node_hometree_odbc
Don't stop roster table conversion on broken askmessage
Fix previous commit
Don't stop irc table conversion on broken JIDs
Ignore malformed parameters for mod_irc module
Fix data convertion
Clean up all timers gracefully
Use a different timer for flow control
SIP Outbound (RFC 5626) support
add missing format handler
Merge pull request #232 from weiss/dont-drop-listen-options
Don't "forget" listener options
e_clause error at node_hometree_odbc:get_items/3
Reply to pings
Always enable STUN at compile time
Merge pull request #230 from weiss/fix-dependency-list
Remove exmpp from the list of dependencies
Fix LibYAML version in the list of dependencies
Don't add 'rport' paramater to 'Via' header
Rename option 'route' to 'record_route' and add new option 'routes'
Add global static shared_key option
Sign 'Record-Route' in order to proxy unauthorized ACKs
Fix 'via' option lookup
Add new option: route
Merge pull request #229 from weiss/no-carbons-to-sender
Don't add 'Record-Route' header for mid-dialog requests
Process bindings from multiple UACs correctly
Don't substitute URI in ACK
Simplify mod_carboncopy:check_and_forward/4
Let is_carbon_copy/1 recognize <received/> carbons
Don't send XEP-0280 v1 copies back to sender
Fix previous commit
Process 'Contact' headers more accurately (as per RFC3261)
Merge pull request #228 from weiss/turn-down-carbons-logging
Log just one [info] message on Carbons negotiation
Merge pull request #227 from weiss/xep-0198
XEP-0198: Cosmetic change: Reuse event handler
Merge pull request #206 from weiss/xep-0198
XEP-0198: Terminate session on queue overflow
Merge pull request #226 from weiss/simplify-state-change
Merge pull request #225 from weiss/use-fsm-next-state
XEP-0198: Cosmetic change: Simplify state change
Let ejabberd_c2s always use fsm_next_state/2
Merge pull request #220 from weiss/handle-send-failure
Merge pull request #222 from weiss/keep-session-on-failed-resume
Merge pull request #221 from weiss/omit-redundant-guard
Merge pull request #218 from weiss/omit-iq-xmlns
Fix odbc_port option processing
Don't forget to include 'Contact' header field in 2xx registrar responses
don't stop make install if epam is not compiled
install epam binary when available
Update id.msg
XEP-0198: Don't drop session on failed resume
XEP-0198: Cosmetic change: Omit redundant guard
Fix proxying of ACK requests for 2xx responses
XEP-0198: Don't exit on socket send failure
Merge branch 'weiss-check-packet-type' into 3
Merge branch 'check-packet-type' of git://github.com/weiss/ejabberd into weiss-check-packet-type
Merge pull request #217 from weiss/fix-extauth-cache-usage
Merge pull request #216 from lavrin/p1-c2s
Merge pull request #215 from weiss/fix-url-markup
Merge pull request #208 from weiss/update-travis-config
Merge pull request #207 from weiss/xep-0334
Omit XML namespace declaration for <iq/> stanzas
Don't use cached passwords if "extauth_cache: 0"
If log uses file:write, no need to double escape ~ in messages (EJAB-1696)
Fix check_from/2 formatting
Sanitize copy-pasted get_statustag/1
Fix formatting
Build proceed/compressed elements in a sane way
Fix URL markup in the guide
MUC messages with ~ were not logged (EJAB-1696)
Merge pull request #213 from weiss/fix-xmlrcp-doc-url
Update ejabberd_xmlrpc documentation URL
Fix bug when joining empty path
Merge pull request #212 from weiss/fix-presence-updates
Don't miss incoming presence updates
XEP-0198: Check whether routed packets are stanzas
Merge pull request #209 from weiss/rename-disconnect-user
Rename disconnect_user/2 command
Travis CI: Remove unnecessary configure flag
Don't log MUC messages with <no-store/> hint
Don't store messages with <no-store/> hint
Don't carbon copy messages with <no-copy/> hint
Merge pull request #205 from weiss/xep-0198
Do not try to retreive vCards via local SM for foreign JIDs
XEP-0198: Improve handling of too large 'h' values
XEP-0198: Reject <resume/> with negative 'h' value
XEP-0198: Don't warn on invalid ACK elements
Fix previous commit (C2S session close on server shutdown)
Merge branch 'master' of github.com:processone/ejabberd
Fix C2S session close on server shutdown
Recompile the Guide
TURN support (EJAB-1017)
Merge pull request #203 from hamano/added_get_random_pid_error_handling
Merge pull request #180 from hamano/mysql_table
Webadmin with extauth requires internal to run at least once (issue #201)
Merge pull request #200 from hamano/mod_offline_bug
fix mod_offline:count_offline_messages/2
Revert "Document that ejabberd compilation requires pkg-config"
Merge pull request #166 from weiss/xep-0198
Merge remote-tracking branch 'processone/master' into xep-0198
Fix PEP broadcasting issue on ODBC (EJAB-1680)
Fix PEP broadcasting issue (EJAB-1680)
Merge pull request #198 from weiss/add-travis-support
XEP-0198: Use "mgmt_" prefix for all #state fields
Add Travis CI configuration
Merge branch 'master' of github.com:processone/ejabberd
remove compilation warnings
Recompile the ejabberd Guide html
avoid sending duplicated events
avoid sending empty events
Document that ejabberd compilation requires pkg-config
store item when persist_item=false and cache_last_item=false but need last_item
Merge pull request #195 from Iperity/master
Fix small bug in presence_based_delivery implementation
Temporary room not destroyed when the last participant is expulsed (EJAB-520)
extauth_cache can have value 0
XEP-0198: Don't log protocol issues
XEP-0198: Accept stream elements in pending state
XEP-0198: Log message when waiting for resumption
Make it possible to get/set vCards for MUC rooms
Merge pull request #194 from weiss/mysql-user-at-localhost
test/README: Create MySQL test user on 'localhost'
Do not crash on version downgrade
Assume udp_recv/5 now returns new options
Assume tcp_init/2 and udp_init/2 now return new options
Always enable SIP at compile time
Remove unused function
Forking support
Remove empty line
Some cleanup
Fix CSeq comparison
Optimize request processing
Do not proxy stray responses statelessly (as per RFC 6026)
Don't use erlang:integer_to_binary/1
Rewrite 'Contact' headers in REGISTER requests
Check for 'max_user_sessions' option
Process gen_server timeouts correctly
Move some code in a separate function
Multiple REGISTER bindings support
Locate sessions by proxy processes directly
Merge pull request #192 from hamano/fix_ejabberd_system_monitor_error
fix ejabberd_system_monitor:s2s_out_info/1 error
Merge pull request #178 from hamano/devel
SIP support
improve error handling when sql calling with (empty|unknown) host. see #191
Fix error reporting in previous commit
Fix formatting string argument (thanks to Locojay)(github #129)
Merge pull request #191 from hamano/added_get_random_pid_error_handling
Merge pull request #190 from hamano/mod_register_web_response_404
Merge pull request #187 from weiss/fix-ejabberdctl-output
fix error handling when sql calling with unknown host.
mod_register_web should response 404 instead of process crash.
Merge pull request #189 from weiss/markdown-readme
Convert README to Markdown
Merge pull request #177 from weiss/log-tls-sasl-external
Merge pull request #181 from weiss/check-tls-before-auth
Merge pull request #185 from weiss/verify-cert-for-s2s-out
Merge pull request #186 from weiss/add-disconnect-command
Translate disconnect_user/2 string sent to client
Avoid #state.lang type errors in corner cases
Merge pull request #188 from weiss/update-readme
Merge pull request #182 from hamano/register_account_acl
Merge pull request #179 from hamano/added_get_random_pid_error_handling
Update README: XEP-0227 code no longer uses exmpp
Let ejabberdctl accept binary string arguments
New ejabberd command: disconnect_user/2
Merge pull request #184 from weiss/properly-abort-s2s-in
Support certificate verification for outgoing s2s
XEP-0198: Turn some warnings into info messages
Don't mess with s2s out when aborting s2s in
Send stream trailer before closing s2s connection
fix checking acl in mod_register_web
Check TLS state before requesting SASL EXTERNAL
added privacy_list_data index for mysql database.
added get_random_pid/1 error handling
undefined ejabberd_socket:get_conn_type/1
Log TLS status for outgoing s2s with SASL EXTERNAL
Merge pull request #176 from hamano/devel
added error handling in mod_pubsub_odbc.
Merge pull request #174 from weiss/fix-s2s-in-auth
Verify host name before offering SASL EXTERNAL
Fix extraction of host names from certificates
Merge pull request #162 from weiss/enable-carbons
Merge pull request #161 from weiss/fix-carbons
Merge pull request #173 from weiss/force-configure-regeneration
Force regeneration of configure script
Merge pull request #172 from weiss/accept-extauth-cache-false
Accept "extauth_cache: false"
Merge pull request #171 from weiss/update-doc-url
Merge pull request #170 from weiss/fix-doc-typos
Update a URL in the guide
Fix two small typos in the guide
Fix compilation on pre-R17
Fix loading translation files on R17
Merge pull request #160 from runcom/protocol_options
Merge pull request #167 from weiss/fix-modules-doc
Merge pull request #168 from weiss/carbons-doc
Mention mod_carboncopy in documentation
Remove outdated comment from guide
Merge pull request #165 from weiss/fix-access-doc
Fix description of access rules syntax
Merge pull request #146 from jamielinux/master
Pretty print accepted transport address
Enable mod_carboncopy in example configuration
Carbons: Handle unavailable resource like bare JID
Add option to specify openssl options
Carbons: Also forward messages sent to bare JIDs
XEP-0198: Don't bounce/resend forwarded messages
Update Hebrew translation (thanks to Isratine Citizen)
Merge pull request #159 from weiss/update-gitignore
Merge pull request #158 from weiss/fix-lang-type
Merge pull request #157 from weiss/fix-mod-update
Merge pull request #156 from hamano/devel
Let Git ignore the "ebin" directory
Let Git ignore files generated by "make install"
Fix a type error
Fix badarg issue on module update web site
mod_register_web: check same acl as mod_register.
Fix user_resources command, and ejabberd_xmlrpc parsing auth details in call
New Bash completion script for ejabberdctl, experimental (EJAB-1042)
Small change in ejabberd_ctl output format to support bash completion
Provide meaningful text to user when admin kicks session (EJAB-1455)
XEP-0198: Bounce unacked stanzas by default
Fix service_info options processing
Remove annyoing warnings
Fix ACLs syntax change (thanks to jokker23)(issue #140)
Remove "fun" element from c2s #state
Support XEP-0198 session resumption
Merge pull request #149 from iulianlaz/carboncopy-fix-msg-back-to-original-sender
Remove some commented out code
Update copyright dates to 2014 (EJAB-1679)
Add initial XEP-0198 support (EJAB-532)
Provide header with latin-1 encoding in translations to work with Erlang/OTP R17
#148 Carbon copy sends message back to original sender solved
Merge branch 'master' of github.com:processone/ejabberd
Regenerate XMPP codec
Support XEP-0321: Remote Roster Management (EJAB-1381)
Convert DB details to string when calling odbc:connect/2 (EJAB-1681)
Don't provide current password in webinterface (github issue #137)
Merge pull request #145 from weiss/fix-configure-flag
Merge pull request #144 from weiss/fix-supervisor-start
Update FSF address
Fix --{enable,disable}-transient_supervisors flag
Add missing parenthesis
When occupant changes nick, include status 110 in stanzas sent to him
Fixing mod_carboncopy sends carbons of carbons (fixes #107)
Merge pull request #134 from mrjameshamilton/patch-1
Fixed parameter order in call to restore_room/3
Clear SASL state after finishing auth
Fix for the previous commit
Use 'to' field only in the first client stream initialization
Add some ejabberd_xmlrpc documentation, and link to full details
Fix auth verification in ejabberd_xmlrpc (thanks to Vicis)
Fix example configuration option 'add' to 'append_host_config'
Fix some type specs and errors
Add ejabberd_xmlrpc
remove version.tex file which is auto-generated
Add access rule to mod_roster (EJAB-72)
bind values for get_parentnodes_tree
fix use of virtual nodetree
Merge pull request #119 from Mikhail-D/patch-1
Create mssql2012.sql
Support for OpenSSL ciphers list in ejabberd_c2s, ejabberd_s2s_in and ejabberd_s2s_out
add Pubsub data migration from mnesia to odbc (EJAB-1126)
Correctly convert ACLs into YAML representation
Do not use functions from crypto module wherever possible
Fix some type errors
Do not try to start STUN application during config checks
Avoid case clause crash when loading permanent rooms
Get rid of deprecated MySQL variable 'table_type'
Check libyaml presence at configure time
Enumerate convert_to_yaml command in list of commands
Fix display ACLs in WebAdmin
update default version to 13.10
Fix handling of format_status arguments (thanks to Nbaronov)
Fix bypass for tls-required (thanks to Zeha)
Fix roster version support
Better web-handlers detection
Merge branch 'master' of github.com:processone/ejabberd
Reflect modules name changes in p1_mysql
Fix problem with decoding http headers over tls connections
Fix the template: do not use 'global' keyword
Fix release version number.
update default version number
clean subscriptions handling and avoid function_clause
fix build of Parents list in #pubsub_node
fix call to get_session_pid with binary arguments
Fix the ACL rule
Remove non-existent module from the testing config
Remove multiple host_config sections
Do not rely on p1_logger_h module when lager is enabled
Fix ejabberdctl config name
Change configuration file format to YAML
Do not try to read/write the deprecated "config" table
Do not distribute the ACL table
Get rid of global configuration options
Enumerate in guide.tex what processes are started for ejabberd (EJAB-1082)
Merge pull request #85 from imtal/patch-1
Fix version check
Fix timestamp processing
Fix some type errors
Make it possible to import without cursor usage
Typo fix
Add SQL to Mnesia converter
Make it possible to enable/disable TLS compression
Merge pull request #83 from tagged/makefile
make deps/.built depend on deps/.got
Do not forget to re-define the crash.log path
Increase the timetrap timeout
Merge pull request #82 from tuncer/rebar-debug_info
rebar.config.script: fix debug_info handling
Allow room member to get members list using XEP
fix badmatch in send_loop (EJAB-1650)
fix badmatch on remove_user on PEP nodes (EJAB-1649)
fix invalid response on get_options when no options set (EJAB-1648)
Apparently configure.erl is not needed anymore
gen_iq_handler:check_type was missing
Cleanup the test suite (just a little)
Use error_logger directly in the LDAP test server
Do not build p1_logger if lager is enabled
Improve the applications start-up
Improve the XMPP codec, fix the test suite accordingly
fix pubsub unsubscription without SubId on odbc
improve pubsub odbc use of i2l
Re-generate the XMPP codec
Update the rebar script
Update the rebar script
Improve the rebar script. Keep the build graph by default.
Remove stupid slow code from rebar, regenerate the script
Update XMPP codec spec to reflect the changes in xml_gen
ip_adresse() does not need binary representation in config
Fix IDNA conversion
Store only messages with body or subject (EJABS-2034)
Re-create the configure script
Fix a typo
Add --enable-tools to --enable-all
Re-create the configure script
Enable lager support by default
Avoid custom loglevels processing for lager
Logger improvements.
Pre-load applications before setting the environment variables
Do not forget to remove testing beams on "clean"
Do not check the second SASL challenge
Split the test suite into modules
Fix external authentication
Do not fetch disco#info multiple times
Start the LDAP server before ejabberd application
Add more pubsub test cases
fix feature build on node disco#info
Fix previous commit
Normalize HTTP path (thanks to Justin Kirby)
Change pubsub plugins in the testing configuration
update guide with simplified pubsub_odbc config
typo fix in spec
fix missing binarization switch on pep nodes
cosmetic change
add missing list conversion
decode_jid always gets binary(), encode_jid lets mod_pubsub handle conversion
minor improvements and binary fix
typo fix, related to commit 9194872
remove obsolete node attribute
Merge branch 'master' of github.com:processone/ejabberd
change default PEP config for simpler setup (EJAB-1494)
remove need of extra _odbc in pubsub plugin name
fix decode function for binaryzed data
Check exit codes carefully when running dialyzer
Fix some dialyzer warnings
Merge branch 'master' of github.com:processone/ejabberd
Regenerated configure script
Split dialyzer tasks into separate Makefile targets
Do not try to call obsoleted function directly
Improve the type spec
Get rid of useless clause
Improve the "dialyzer" target
Add LDAP test cases
Do not ignore ASN.1-generated files
Do not generate LDAP's ASN.1 code when compiling ejabberd.
According to XEP-0045, a MUC member is allowed to retrieve the members list
fix empty itemid on publish when passing Access
fix pubsub issue on binary switch
Fix all calls to functions of p1_tls application
inet_dist_use_interface requires argument quoting
Disable lager by default
Clarify MySQL/PostgreSQL preparation for running the test suite.
Shutdown rooms before starting test cases
Add tests for modules using MySQL/PostgreSQL
Merge branch 'master' of github.com:processone/ejabberd
Better DLL location detection when executing `make install`
Improve handling of INET_DIST_INTERFACE option (EJAB-1611)
Added missing license and copyright headers.
improve ejabberdctl, and support different node names (thanks to Zach Calvert)(EJAB-1611)
Some deps have their DLLs in "priv" directory (not "priv/lib"). Do not forget to `install` them as well.
Better handle incoming packets sequence
Add some missing applications to the reltool script
sync pubsub_odbc with last fix
Fix node auto-creation
Merge branch 'master' of github.com:processone/ejabberd
Re-generate XMPP codec, decrease tests verbosity
sync and cleanup pubsub_odbc
fix auto-create issue due to bad binary matching
Fixed broadcast messages handling
Fixed conversion to ezlib
Add simple mod_offline checks
Add some MUC checks. Several cleanups
Add mod_proxy65 test case
Check item groups separately
Add roster checks
Advertise privacy lists support via disco#info
Don't include sub-elements in IQ results where it's not required by the corresponding spec (RFC or XEP).
Improve "unregister" test case
Add registration remove test case
Test suite cleanup.
Fix the error report of an incorrect certfile
Better certfile location detection by the test suite
Remove forgotten comments
Add zlib compression test case
Add STARTTLS test case
Add mod_register checks
Convert XMPP codec specification to the new format
set version to community
Remove old obsolete R14 code
In frontends, if result is in binary then convert to string
Make ejabberd_ctl not die for ejabberd_commands with binary arguments
cosmetic changes, move badly placed comments
Switch to rebar build tool
Fix Guide: ejabberd_service expects a shaper_rule, not a shaper
Detect correctly newer Darwin versions (EJAB-1594)
fix getting ServerHost from Host due to binary portage (EJAB-1638)
access_createnode acl also applies to auto created nodes ported to pubsub_odbc
Handle multiple < and > in mod_muc_log plaintext mode (EJAB-1640)
Handle ~ control sequence in text of mod_muc_log (EJAB-1639)
Merge pull request #69 from PaulSD/master
Fix a bug when reading tuples from config
Merge pull request #67 from anton-ryzhov/config_example
Removed wrong option for `ejabberd_service` module (since 174c16a1)
Tweak ejabberd_listener to allow ejabberd_xmlrpc work properly
Fix get of announcement form
Merge pull request #62 from PaulSD/master
access_createnode acl also applies to auto created nodes (thanks to Matthias Rieber)
Include actor element in MUC stanzas when kicking (thanks to Purvesh Sahoo)(EJAB-1206)
Revert "Include actor element in MUC stanzas when kicking (thanks to Purvesh Sahoo)(EJAB-1206)"
Include actor element in MUC stanzas when kicking (thanks to Purvesh Sahoo)(EJAB-1206)
SCRAM optional parameter parsing bugfix
Fix error when generating random binary strings
Fix bug when getting room config
Fix mod_http_fileserver work with binaries (GITHUB-59)
ejabberd 13 requires Erlang/OTP R15B or higher (EJAB-1630)
Merge pull request #57 from rraptorr/carboncopy
Change message type of carbon copies from 'chart' to 'chat'
Don't overwrite inetrc when installing (thanks to skeltoac)
remove obsolete packaging file
Merge branch 'master' of github.com:processone/ejabberd
Get rid of references to non-existent module
Fix several refactoring related bugs
Update version number to beta2
Add mod_carboncopy that implements XEP-0280 v0.8
Update URL of ejabberd's Git repository
Fix documentation of mysql and pgsql configuration
Improve documentation of MSSQL database configuration
Improve documentation of MySQL storage
Improve documentation of anonymous auth
Fix room configuration after binarization
Fix privacy list broadcast internal stanza after binarization
Change version number
Copied PostgreSQL erlang library from ejabberd-modules SVN
Copied MySQL erlang library from ejabberd-modules SVN
Accumulated patch to binarize and indent code
list_to_integer/2 only works in OTP R14 and newer
Fix bug when displaying offline messages in WebAdmin
Update ejabberd version number to 2.1.12
Added release notes for 2.1.12
New mod_muc_log option file_permissions (EJAB-1588)
Fix issue with ejabberd_xmlrpc user auth and SCRAM
Fix compatibility of LDAP support with Erlang R16A (EJAB-1612)
Fix warning about unused variable
Update Hebrew translation (thanks to Isratine Citizen)
Fix angle brackets handle in MUC plaintext log (EJAB-1610)
Update copyright dates
Make sure update_info returns atoms only (EJAB-1595) (Thanks to Jose M Herrero)
Fixed signedness issue in tls_drv GET_DESCRYPTED_INPUT (EJAB-1591)
Added command to list all the vhosts registered in an ejabberd node
Merge pull request #37 from rraptorr/tls
Fix broken JPEG photo (EJAB-1526)
Copy, fix and document export2odbc command from mod_admin_extra.erl
Make terms serialization faster
Fixed mod_offline:store_offline_msg argument (EJAB-1581)
New Hebrew translation (thanks to Isratine Citizen)
Document in the guide the db_type modules option (EJAB-1560)
Log IP address when auth attempt fails (thanks to Zach Calvert)
Add SCRAM and remove MD5 support to ejabberd commands auth verification
Added clause so ejabberdctl number of arguments error report works with R15
On shutdown, first stop listeners, then modules (thanks to Vishal Xica)(EJAB-1566)
Send announce Message stanzas as Headline type instead of Normal
Detect OpenSSL version at runtime, not at compile time
Enable DHE key exchange in TLS driver
Enable ECDHE key exchange in TSL driver
Disable old and unsecure ciphers in TLS driver
Disable SSL 2.0 in TLS driver
Fix regression introduced in odbc/mnesia merge
Reduce size of XML stream state
Fix file name of Name Service Switch (thanks to Konstantin Khomoutov)
Allow multiple fqdn values in configuration (EJAB-1578)
Check node name is available before starting ejabberd (EJAB-1572)
Fix MUC start when Mnesia tables don't exist yet
Fix account registration
Update Slovak translation (thanks to Marek Bečka)
Revert "Update ejabberd version number to 2.1.11"
Repeated http-bind request should abort only requests with same rid
Receiving missing http-bind request shouldn't close waiting out-ouf-order request
Fix get_subscription_lists/4
Do not trigger item-not-found errors in mod_http_bind (part of EJABS-1827)
Merge SQL and Mnesia code into one module (EJAB-1560)
Update ejabberd version number to 2.1.11
Add ejabberd 2.1.11 release notes
Recompile translation files
Update Italian translation (thanks to Luca Brivio)
mod_irc: Make use of MUC password
Update PO files manually according to the English fix
Fix English strings (thanks to Andreas van Cranenburgh)
Update German translation again (thanks to Nikolaus Polak)
Update Portuguese-Brazil translation (thanks to Otávio Fernandes)
Update Polish translation (thanks to Zbyszek Żółkiewski)
Update Norwegian translation (thanks to Stian B. Barmen)
Update Catalan translation (thanks to Jan Kusanagi)
Update Japanese translation (thanks to Mako N)
Update Greek translation (thanks to James Iakovos Mandelis)
Remove useless mnesia call
Update Czech translation (thanks to Jan Pinkas)
Update Chinese translation (thanks to Shelley Shyan)
Update Turkish translation (thanks to Doruk Fisek)
Update Russian translation (thanks to Evgeniy Khramtsov)
Update Dutch translation (thanks to Andreas van Cranenburgh)
Update Esperanto translation (thanks to Andreas van Cranenburgh)
Update German translation (thanks to Nikolaus Polak)
Extract new strings
Perform user part substitution in ldap_rfilter (EJAB-1555)
Photos from LDAP not displayed in some clients, lacking TYPE (thanks to Alex Crycheck)(EJAB-1554)
Update Spanish translation
Extract new strings
Fix translation script to use ejabberd_regexp (EJAB-921)
Document how to provide a long announcement (EJAB-1553)
Handle the scenario of disabled mod_muc (EJAB-1553)
ODBC support for mod_blocking
Parse and encode https header names like native http parser does
return user affiliation for a specified node (thanks to Karim Gemayel) (EJAB-1294)
Add comments about Dialyzer warnings
Add odbc modules to Makefile.win32
Remove obsoleted function call
Don't use binary:match to extract lines from binaries
Fix makefile rules for building dll-s in Makefile.win32 files
Parse correctly https request split into multiple packets
Make sure that res is initialized in all cases
Added missed tls:recv_data/2
Don't ignore Length parameter in tls:recv
Avoid quadratic behavior in reading SSL data
Properly handle HEAD request in mod_http_bind (this fixes EJAB-1538)
Get rid of duplicated code
ODBC support for mod_shared_roster
ODBC support for mod_irc
ODBC support for mod_vcard_xupdate
ODBC support for mod_announce
Add ODBC exporting function for privacy table
Add notes about mod_muc_odbc
Use proper module name
ODBC support for mod_muc
Change log level from informational to error
Relax digest-uri handling (thanks to Daniel Willmann)(EJAB-1529)
Assume we have only one CPU when an auto-detection fails (EJAB-1516)
Cache caps timestamp before the IQ-request is done
Update copyright dates
Recommend Erlang/OTP R13B04 and R14B04
Fix Enlish in the Guide (thanks to Ludovic Bocquet)
Fix typo in xep number, bosh is xep0206 (thanks to Ludovic Bocquet)
Add thanks to Ludovic Bocquet for past Guide contributions
Work also with some unicode strings in PgSQL (EJAB-1490)
Option default_host for handling HTTP requests with ambiguous Host (EJAB-1261)
Receiver should not generate an exception
Fix the documentation about default value of captcha_cmd option
Replace a single quote with double quotes in an ODBC escape (thanks to Vladislav Chugunov)
http_bind webserver TLS fail on Chrome (thanks to Adam Langley)(EJAB-1530)
Fixed ejabberd_http:get_line
Foreign shared rosters items not pushed (thanks to Nathan Bruning)(EJAB-1509)
Revert "Update ejabberd version number to 2.1.10"
mod_private.erl: misc errors cases fixes (thanks to Karim Gemayel)
Update ejabberd version number to 2.1.10
New release notes for 2.1.10
Support undefinition of ssl:seed in R15B
Use the regexp frontend module (EJAB-921)
Always allow packets from user's server and bare jid in mod_privacy*
Fixed the previous mod_blocking patch
Corrected mod_blocking hooks return value, activate "Blocked Contacts" privacy list after it is changed
Fix update with stripped beams (thanks to Jose M Herrero)(EJAB-1520)
Support Erlang/OTP R15B driver (EJAB-1521)
Replace regexp with ejabberd_regexp
Get rid of +driver option because it is incompatible with R15B
Preliminary support for groupname@vhost in Displayed Groups (EJAB-506)
Fix command "update" to return response in the expected format
Don't reveal invitee's resource when room informs invitor
Add callback function print_state/1 for behavior p1_fsm
Use the regexp frontend module (EJAB-921)
Frontend module to Re and Regexp (EJAB-921)
Prevent overload of incomming s2s connections
Fix bug on s2s shaper when TLS is used
add hooks for node creation/deletion (EJAB-1470)
Use httpc instead of the deprecated http
Fix error in mod_vcard when lowercasing some vjud search result fields (EJAB-1490)
Avoid a possible race condition
Comment section 6.3.1 because it has no content at all
Fix presence problem after first unavailable (thanks to Christopher Faulet) (EJAB-1466)
Support to update modules in R14B04 and higher
Fix previous commit about language name
Fix extraction of language name from PO files
Get rid of useless mnesia transaction (EJAB-1502)
Set ejabberd version to 2.1.x
Update ejabberd version number to 2.1.9
New release notes for 2.1.9
Fix instruction and error text
Change "muc#role" field type to "hidden"
Correct lists:keysearch output processing and fix dialyzer warning
Code cleanup
Use treap correctly
Apply patch from Evgeniy Khramtsov
Use treap for keeping last voice request timestamps
Fix voice request/approvement detection and extract_jid_from_voice_approvement/1
Fix typo
Fix patterns in check_voice_request_fields/2 and check_voice_approvement_fields/2
Use more pattern-matching
Remove try/catch
Use pattern matching in check_voice_request_fields/2 and check_voice_approvement_fields/2
Reverse arguments order for timer:now_diff/2
Fix return value inconsistency in last_voice_request_time/2
Use jlib:parse_xdata_submit/1 in is_voice_request/1 and is_voice_approvement/1
Use bare JID as key in state.last_voice_request_time
Use lists:foreach instead of lists:map in send_voice_request/2
Remove needless time conversions
Ignore any extra elements in voice approvement form submission
Add 2 room config options
Simple rate control
Voice approvement support
Implement basic voice request processing logic.
Implement voice approvement detection and remove some debug code
Fix form instructions
Use ejabberd_router:route/3 directly, instead of send_packet_to/3
Use exception handling in is_invitation/1
Fix exception handling in is_voice_request/1
Implemented sending voice request and fixed some bugs
Add function for detecting voice requests
More correct dispatching of normal messages to conference room
Decrease CPU usage caused by tls:send with large data.
Fix mod_muc_log crash when first log entry is room being destroyed (EJAB-1499)
fix broken PEP after EJAB-1498 (thanks to Karim Gemayel)
ejabberdctl doesn't support parameters with blankspaces (EJAB-1458)
Fix Denial of Service when user sends malformed publish stanza (thanks to Oleg Smirnov) (EJAB-1498)
added svg mimetype to default content types (thanks to Markus Kohlhase)
Add support for @online@ to add_user_to_group
New option support: ldap_deref_aliases (EJAB-639)
Fix dialyzer warnings
Fix dialyzer warnings
No need to explicitly skip old useless tables, simply fix keep_tables
Fix previous commit
Avoid crash when performing admin action
Fixed support for multi-resource occupants (EJAB-305)
Fix room config change logging, due to allow_private_messages_from_visitors
Support to import XML files without password-format attribute
Clarification about system user of ejabberd.init
Fix SCRAM to support attributes which value has only one character
Fix typo in the Guide about user_regexp
Fix dialyzer warnings
Reorganize the code to shut up the dialyzer
Get rid of useless check
Merge set_affiliation/3 and set_affiliation_and_reason/4 into set_affiliation/4
Fix SCRAM auth of uppercase passwords (EJAB-1196)
Remove useless clauses
Add some magic in order to shut up the dialyzer (because I do not want to replace the macro with a function)
Fix potential case-clause crash
Remove useless case clause
Replace VVALUEL macro with function in order to shut up the dialyzer
Merge branch '2.1.x' of git+ssh://gitorious.process-one.net/ejabberd/mainline into 2.1.x
Export do_client_version/3 in order to shut up the dialyzer
Remove useless case clauses
Remove useless case clause
Correct some function clauses and value types
Get rid of useless code
ejabberd_auth:remove_user/2 always returns ok
Fix some case clauses
Change argument of open_port/2 to string in order to shut up the dialyzer
Get rid of useless function clause
Replace calls of OTP's Binary, since they would require R14
First check occupant existence, later check the message
enable pubsub#deliver_notification checking (thanks to Karim Gemayel)(EJAB-1453)
Explicitly skip useless ejabberd 2.0* mnesia tables when restoring backup
typo fix (thanks to Artem Sh)(EJAB-1424)
Support multiple sessions per nick in muc_online_users, relevant for max_user_conferences (EJAB-305)
Send private messages to all the sessions with same nick (EJAB-305)
Don't send unavailable presence when leaving occupant has other nicks in the room (EJAB-305)
Allow multiple entry with same nick to MUC rooms (thanks to Magnus Henoch)(EJAB-305)
New option resource_conflict defines server action (thanks to Lee Boynton)(EJAB-650)
Fix bug in scram is_alpha
Fix ODBC account counting (thanks to Artem Sh)(EJAB-1491)
Fix and improve support for SCRAM auth method (EJAB-1196)
Indicate license and copyright (thanks to Stephen Röttger)(EJAB-1196)
Preliminary patch for SASL SCRAM-SHA-1 (thanks to Stephen Röttger)(EJAB-1196)
handle case when roster version on DB is enabled but version is not found.
Add comment about ping requests sent even to non-supporting clients
Verify username provided in registration web form
Handle case when ejabberd_auth_* says the account exists
Include status 110 in presence to new occupant (EJAB-740)
Fix typo in modules overview
Use #roster record instead of direct tuple
Document ldap_tls_cacertfile and ldap_tls_depth options (EJAB-1299)
Add ldap_tls_cacertfile and ldap_tls_depth options (EJAB-1299)
Room option to ignore private messages from visitors (thanks to Maxim Ignatenko)
One more fix
Improve spelling and fix some typos
Fix reference to 'admin' ACL name (thanks to Samuel Wejeus)(EJAB-1476)
Merge branch '2.1.x' of git+ssh://git@gitorious.process-one.net/ejabberd/mainline.git into 2.1.x
Minor mod_version bugfix
is_user_in_group/3 must check if user belongs to given Group from Host specified on third argument.
Optimized mod_roster_odbc:get_roster
Support servers that reply error on any command before registration (thanks to Gelraen)
Comment in the cfg file the correct node name used in ejabberdctl.template
Match ldap_uidattr_format case-insensitively (EJAB-1449)
Log an error when an LDAP filter is incorrect (EJAB-1395)
Clarify in mod_register_web example what host to put in the URL
Escape iolist correctly when NIFs are disabled (EJAB-1462)
Fix compilation in Windows (thanks to flyingwow99)
Added 2.1.8 release notes.
Fix crash when user publishes an item (EJAB-1457)
Recompile the Guide
Update ejabberd version number to 2.1.7
Recompile translations
Add release_notes_2.1.7.txt
Fix some typos in the Guide
Disable all entity expansions (thanks to Alexey Shchepin)(EJAB-1451)
Update the 'configure' script with: aclocal; autoconf
Pubsub node maxitem forced to 0 if non persistent node (thanks to Karim Gemayel)(EJAB-1434)
apply filtered notification to PEP last items (thanks to karim Gemayel)(EJAB-1456)
Fix minor English error
New ERL_EPMD_ADDRESS that works since Erlang/OTP R14B03
Cut the string when calling halt/1
Under some circumstances the "uri" variable in StartNamespaceDeclHandler could be NULL. We check this now.
Fix a recent commit about "Set script as executable"
Support anonymous accounts in Shared Roster @all@ directive (EJAB-1264)
Add link in the Backup page to the Guide
Support XEP-0191 Simple Communications Blocking (thanks to Stephan Maka)(EJAB-695)
A user can query his own Last activity, even if not subscribed to oneself
Several fixes and improvements in ejabberd.init.template
When checking captcha setup, try to generate image only when captcha is enabled in order to avoid logging of confusing error
When module start fails during server start, stop erlang (EJAB-1446)
Note that ejabberd works with CGP LDAP server
Owner can delete any items from its own node (EJAB-1445)
Take into consideration internal queue length when sorting processes queues
Do not accept XML with undefined prefixes (EJAB-680)
Reorganize the push_item function, and handle version not_found (EJAB-1420)
No need to inform that XEP-0237 is optional; clarified in XEP version 1.2
Show configuration for HTTPS http_bind
mod_register Access now also controls account unregistrations
Escape user input in mod_privacy_odbc (EJAB-1442)
Throw error when captcha fails at server start, not later at runtime
Do not decrease MUC admin's role/affiliation
Add captcha_limit option to the example config
Remove forgotten -compile(export_all).
Implement CAPTCHA limit
Fix syntax error
CAPTCHA whitelist support
Try to improve support for roster_version in MSSQL (EJAB-1437)
The responses to HEAD must have empty Body
Support as read-only HTTP method not only GET, also HEAD
If extauth script crashes, ejabberd should restart it (EJAB-1428)
Support more captcha_host value formats (EJAB-1418)
Send jid attribute when occupant is banned (EJAB-1432)
mod_ping uses iqdisc no_queue by default (thanks to Chris Moos)(EJAB-1435)
Clarify {iqdisc, no_queue}
Updated Japanese translation (thanks to Mako N)
Fix typo (thanks to Krzee)
Update the changed string in the PO translation files
Change string in WebAdmin to reuse an existing one
Fix bashism and make some lines similar to master branch (EJAB-1404)
If the port number isn't listener, then specify the protocol (EJAB-1418)
captcha_host must have the port number to get protocol (EJAB-1418)
mod_irc must send presence unavailable to the departing occupant (EJAB-1417)
ejabberdctl needs space between INET_DIST_INTERFACE (thanks to Dale Chase)(EJAB-1416)
Tweak pg2_backport.erl to work with Erlang older than R13A (EJAB-1349)
Add support for '@online@' Shared Roster Group (thanks to Martin Langhoff)(EJAB-1391)
Forward old messages to newly spawned extauth process (thanks to Mika Seppänen)(EJAB-1385)
New route_iq/5 accepting Timeout (thanks to Edwin Fine)(EJAB-1398)
New DIST_USE_INTERFACE to restrict IP where erlang connections are listened (EJAB-1404)
New Indonesian translation (thanks to Irfan Mahfudz Guntur)(EJAB-1407)
fix empty pubsub payload check on odbc version
fix empty pubsub payload check
update copyright up to 2011
Provide HTTPS URL in CAPTCHA form when listener has 'tls' option (EJAB-1406)
Fix typo in French translation
Escape output from ctlexec() to erl script (thanks to Dan Scott)(EJAB-1399)
Remove erroneous comment (EJAB-645)
Handle Tigase's unexpected version=1.0 when ejabberd doesn't announce it (EJAB-1379)
mod_pres_counter prevents subscription flood (thanks to Ahmed Omar and Alexey Shchepin)(EJAB-1388)
Add to example config file access_from comment
Update exmpp version to 0.9.6
Comment unused code
Don't let presence-in privacy rule block a presence subscription using ODBC (EJAB-255)
Fix delayed response of a timeout call was reused for next login (EJAB-1385)
Clarify more the expected content of welcome_message mod_register option
Clarify error message when BOSH query is sent to non-running module
Use route instead of send_element to go through standard workflow Offline messages should thus be tracked for ack if needed (TEXTO-226).
Keep the order of stanzas when BOSH sends several (EJAB-1374)
Change c2s state before offline messages resending
Make jlib:ip_to_list safe to use
Revert branch name back to 2.1.x
Make sure 'closed' event is correctly processed on every state
Ignore OS X libraries.
Remove Type and Spec, backport list comprehensions, so R12B-5 can compile
Recompile the Guide
Update ejabberd version number to 2.1.6
Recompile translations
Add release notes for ejabberd 2.1.6
Fix warning about unused variables
Option to reject S2S connection if untrusted certificate (EJAB-464)
Include From attribute in the stream header of outgoing S2S connections
When TLS is required in s2s, add subelement to stream:features starttls
Add option to require encryption in S2S connections (EJAB-495)
Support for X-Forwarded-For HTTP header (EJAB-1356)
update pubsub_odbc patch
add node attribute to pubsub subscribe event (EJAB-1361)
Update Czech Translation (thanks to Lukáš Polívka)
Fix detection of mod_last at server start (EJAB-641)
Update example extauth script with tryregister, removeuser and removeuser3 (EJAB-641)
Revert "Fix cyrsasl_digest RFC-2831 2.1.2.1 (EJAB-476)"
Support PostgreSQL 9.0 (EJAB-1359)(thanks to Stephen Gibberd and Konstantin Nikiforov)
Fix cyrsasl_digest RFC-2831 2.1.2.1 (EJAB-476)
fix pubsub cross domain eventing (EJAB-1340)
Update Greek translation (thanks to James Iakovos Mandelis)
Increase maximum restart strategy of the ODBC supervisor. Do not brutally kill ODBC processes on supervisor shutdown to avoid polution of the mnesia table
When the Password attribute is missing in PIEFXIS file, don't check account auth.
Corrections on pt_BR translations.
Update Ukrainian translation (thanks to Ruslan Rakhmanin)
expose find_connection for routing in other modules (if needed)
add the ability to send raw xml packets over http bind
Update mod_register_web string in PO files
Fix characters not allowed in username. Don't include that in translatable string.
Support negative part-hour TZ values (thanks to Alexander Zhukov)(EJAB-1301)
Don't loop when there is nothing after a stream start
Correct domain_certfile tlsopts modifications for s2s connections (EJAB-1086)
Update French translation (thanks to Nicolas Vérité)
Update German translation (thanks to Nikolaus Polak)
Update Japanese translation (thanks to Tsukasa Hamano)
Update Chinese translation (thanks to Shelley Shyan)
Merge branch 'caps' into 2.1.x
Updating Brazilian Portuguese (pt_BR) translations for v2.1.6
Update Polish translation (thanks to Zbyszek Żółkiewski)
Use pg2 from R14B in systems with older versions (EJAB-1349)
Revert "populate pubsub#roster_groups_allowed in node configuration options (EJAB-1344)"
Disapprove the use of R14A and R14B due to the rwlock bug.
Update Russian translation (thanks to Evgeniy Khramtsov)
Update translate files
Update the Spanish translation
Fix some English strings
Translate mod_register_web to Ukrainian (thanks to Rain)
Document mod_shared_roster_ldap (thanks to Marcin Owsiany)
Translate mod_register_web to Spanish
Translate mod_register_web to Russian (thanks to Rain)
Update strings to translate
Add extract_translations.beam to gitignore
Fix http-bind supervisor to support multiple vhosts (EJAB-1321)
Fix R12B5 compatibility in ejabberd_http_bind.erl (EJAB-1343)
Use LFrom and LTo consistently in ejabberd_s2s_in:stream_established/2 (EJAB-1342)
Do not start mod_proxy65 if it is unable to bind an address (EJAB-1336)
Use MEDIUMTEXT type for vcard avatars in MySQL schema (EJAB-1252)
Do not print full error message when LDAP timeout occurs (EJAB-1324)
Set SSL_MODE_RELEASE_BUFFERS mode when available (EJAB-1351)
Provide new, not old, affiliation in kick/ban presence with codes 321 and 301
Strip status when needed in presence-unavailable as well
Fix typos in the example configuration file
Before binding tcp ports, checks the socket type and listener options
Bind listener ports early and start accepting connections later
In mod_last*:get_last_iq/4, check for user resources first to return 0 seconds if there is one
Refactor mod_last to use the same core get_last/2 functionality, but keep api stable
Before forwarding last activity requests to a user, check that the user's presence is visible for From
Remove dead code for NS_VCARD iq packets from ejabberd_c2s
Use ejabberd_c2s:privacy_check_packet/5 for all those hook folded runs in the c2s module
Use c2s state data as user and server in ejabberd_c2s:is_privacy_allow
Correct error responses of forbidden offline last activity queries
populate pubsub#roster_groups_allowed in node configuration options (thanks to Karim Gemayel)(EJAB-1344)
fix bad plugin order issue injected in previous patch (EJAB-1286)
Correct privacy check direction in mod_last (EJAB-1339)
Change max restart strategy of ejabberd_odbc_sup to handle some SQL timeouts.
avoid node_call to break transaction (thanks to Karim Gemayel)(EJAB-1286)
Re-raise exceptions caught in gen_mod:start_module/3 (EJAB-1335)
Take care of xml:lang attribute in unauthenticated stanzas as well
New ip_access option restricts which IPs can register (thanks to Alexey Shchepin)(EJAB-915)
Disable mod_register_web in default config because by default captcha is disabled
Recompile the Guide
Added mod_register_web: web page for account registration (EJAB-471)
Disable LRU caching algorithm for LDAP shared rosters
Do not store long language tag to avoid possible DoS/flood attacks
LDAP shared roster support (thanks to Realloc and Marcin Owsiany)
Fixes a leak of ejabberd_receiver processes.
Correct in the Guide the default mod_irc encoding
Implement the mod_irc option default_encoding, it was already documented
Fix crash in ejabberd_c2s when blacklist hook returned true (thanks to Jonas Ådahl)
Merge branch '2.1.x' of git+ssh://gitorious.process-one.net/ejabberd/mainline into 2.1.x
Do not run set_last request inside a transaction
Fix errors in EDoc comments
Include a Required xml element in the captcha field
Ignore Length argument to tls:recv/[23] (EJAB-1327)
Re-use the TLSSock argument in tls:send/2 (EJAB-1327)
* Add top-level instructions for x:data incompatible clients * Remove trailing dot
Changes in registration form to workaround client problems (EJAB-1262)
Workaround for Psi's wrong Type in form submission
Recompile the guide.html
Add CAPTCHA example configurations to cfg (EJAB-1262)(EJAB-1326)
Provide image url in registration form when captcha is enabled
Add password entropy check (EJAB-1326)
* Rename option captcha to captcha_protected for consistency. * Document captcha_protected option
Merge branch '2.1.x' of git+ssh://gitorious.process-one.net/ejabberd/mainline into 2.1.x
CAPTCHA IBR support (EJAB-1262)
Improve example of outoging_s2s_options
improve documentation (thanks to Karim Gemayel)
Change directory before any operation to one readable by INSTALLUSER (EJAB-1322)
Fix bug in mod_pubsub in_subscription return value
documentation update (thanks to Karim Gemayel)
When privacy list denies local user's outgoing stanza, try to return error (EJAB-1320)
Check privacy of outgoing IQ stanzas (EJAB-1320)
Check privacy of incoming IQ stanzas (EJAB-1320)
Add support to ejabberd_ctl to handle anonymous command arguments
Rename aclocal.m4 to acinclude.m4 (thanks to Andreas Köhler)
Fix errors detected by Dialyzer
Document ejabberd_loglevel using EDoc (EJAB-225)
Fix unused variable warning in ejabberd_loglevel
Add set_custom/2, clear_custom/0 and clear_custom/1 to ejabberd_loglevel
Document new loglevel configuration form.
Add support for changing the loglevels for given modules (EJAB-225)
Use warning_msg event type for warning log level.
Add warning message and report handlers to ejabberd_logger_h.erl.
Improve ejabberd_logger code generation
Use records for encoding static loglevel information.
Speed up ejabberd_s2s:is_service/2, allow_host/2 (thanks to Andreas Köhler)(EJAB-1319)
Include a gitignore file in the ejabberd git repository (EJAB-1312)
make http-bind restartable (thanks to Andreas Köhler)(EJAB-1318)
add find_s2s_bridge hook
use one_queue IQ discipline by default
implement lifetime for broken hashes
change caps hook name
call caps hook when caps is changed
fixes typo in stop_connection/1
new CAPS processing
fixes default value for cache_life_time
Add missing needdb check in mod_privacy, to enable blocking by group and subscription again.
Discard unmatched INFO messages in ejabberd services.
Support timezone West of UTC (thanks to Edwin Fine)(EJAB-1301)
cache lifetime should be converted in microseconds
Implemented dirty (non-atomic) functions; added copyright notice
Add IPv6 support to mod_irc (thanks to Matthias Schiffer)(EJAB-1298)
implemented backend-independed key-value cacheing table; applied to mod_caps.erl first
Add mod_pubsub_odbc to list of ODBC modules (EJAB-1293)
Bugfix http-poll for correctly parsing binary (thanks to Peter Lemenkov)
fixes ampersand escaping (EJAB-1258)
fixes typo for table copy
When user joins non-anonymous room, warn also in presence stanza (EJAB-310)
Update the 'configure' script
Make MD2 autodetected (EJAB-1285)
Make xml.c correctly compiles on R14A (EJAB-1288)
Go back to the 2.1.x branch name
Fix detection of Erlang R11 and older (thanks to Mathias Ertl)(EJAB-1287)
Loading ASN.1 driver explicitly to avoid races in LDAP (EJAB-1284)
Update ejabberd version number to 2.1.5
New 2.1.5 release notes
enforce disco features results (thanks to Karim)(EJAB-1033, EJAB-1228, EJAB-1238)
Support parallel extauth script (thanks to Jesse Thompson)(EJAB-1280)
Don't say v1.2, because that number is never increased and is confusing
Return Registered element when account exists (thanks to PioneerMike)
Fix typo (thanks to Evgeniy Khramtsov)
When logging s2s out connection attempt or success, log if TLS is used
The command Update now returns meaningful message and exit-status (EJAB-1237)
Use driver allocators in iconv_erl.c for reflecting memory in erlang:memory(system)
Use driver allocators in ejabberd_zlib_drv.c for reflecting memory in erlang:memory(system)
Describe what a user gets when he hits the registration_timeout limit
correct handling of SQL boolean types (EJAB-1275)
Use driver allocators in expat for reflecting memory in erlang:memory(system)
Fix my flock change from last friday
Remove ejabberd_debug because p1_prof provides similar and better features
Only compile and install p1_prof when: make debugtools=true
Recompile the 'configure' script
When using OTP R14, use public_key library instead of old ssl (EJAB-953)
Mention missing modules in the overview table
Some systems delete the lock dir; in such case don't use flock at all
Added functions to collect statistics about queues, memory, reductions etc. Several cleanups
Added new ejabberd profiler
Fix print of command result that contains ~ (thanks to Tsukasa Hamano)
Show some more room options in the log file
Document the mod_muc option captcha_protected
Use ets insead of asking supervisor in ejabberd_odbc_sup:get_pids/1 (Thanks to Alexey Shchepin)
Recompile the Guide and Configure
Requirement of OpenSSL increased from 0.9.6 to 0.9.8
Fix typo in --enable-transient_supervisors
Document the optional --enable-nif
Clarify that to use the optional --enable-nif, R13B04 is needed.
New configure option: --enable-nif
Fix privacy check when serving local Last (thanks to Brian Acton)(EJAB-1271)
Fix problem when FIREWALL_WINDOW options for erl kernel were used
Inform client that SSL session caching is disabled (thanks to Pawel Chmielowski)
Don't ask for client certificate when using tls (EJAB-1267)
OpenSSL is required, not optional
When account is deleted, delete also member of stored shared rosters.
now admins are able to see private rooms in disco (EJAB-1269)
Added support for all hash functions required by XEP-0115
Added md2/1 support
New OpenSSL functions wrapper: sha224/1, sha256/1, sha384/1, sha512/1
Rebuilt the configure script with: autoconf
Pass correct version to autoreconf
Install COPYING file along with other docs
Install dev.html, and guide.pdf if it exists
remove outdated and useless file, use ejabberdctl.template instead
Log error when HTTP request has ambiguous Host header (EJAB-1261)
Fix for Erlang R12, that doesn't support: true andalso ok
Discard queued requests that are too old (the caller has already got a timeout).
Explain that 2 LDAP connections are established per vhost
Fix typo in update_list command (EJAB-1237)
New optional BOSH connection attribute process-delay (EJAB-1257)
Revert version number from 2.1.4 tag to 2.1.x branch
fixes wrong SQL escaping when --enable-full-xml is set
Update ejabberd version number to 2.1.4
Remove duplicate item in release notes
Add release notes for ejabberd 2.1.4
Clarify in the Guide that mssql configuration is similar to odbc
sync last changes in pubsub_odbc patch
final fix on created node notification (EJAB-1225)
Update the Norwegian translation (thanks to Stian B. Barmen)
Recommend Erlang/OTP R12B-5 and R13B04
Update the Slovak translation (thanks to Marek Bečka)
Update the Czech translation (thanks to Lukáš Polívka)
Update the Russian translation (thanks to Evgeniy Khramtsov)
fix error code when unsubscribing from a non-existent ODBC node (EJAB-1227)
fix error code when unsubscribing from a non-existent node (thanks to Karim Gemayel)(EJAB-1227)
send created node notifications (EJAB-1225)
fix jlib calls from previous patch
make last_item_cache feature cluster aware (EJAB-1234)
Handle error response from auth modules (thanks to Eric Liang)
Makefile with optional ejabberd_debug.erl compilation (EJAB-1242)
remove the silly loop that isnt needed, this speeds up all requests by 100 milliseconds. Clean up prepare response function and add two new functions to handle out going payloads based of whether its a new session or not.
Update the Portuguese Brazil translation (thanks to Otávio Fernandes)
Update the Ukrainian translation (thanks to Konstantin Khomoutov)
Add created_at column also to PostgreSQL schema (thanks to Mathias Ertl)(EJAB-1240)
Update the Catalan translation (thanks to Jan Kusanagi)
Mix the commands update_all/0 and update_module/1 into update/1 (EJAB-1237)
Update the Italian translation (thanks to Luca Brivio)
Update the Greek translation (thanks to James Iakovos Mandelis)
New ejabberd commands to update modified modules (EJAB-1237)
Only log when script errors are found
Update the Polish translation (thanks to Zbyszek Żółkiewski)
Update the Dutch translation (thanks to Andreas van Cranenburgh)
Update the Esperanto translation (thanks to Andreas van Cranenburgh)
Update the German translation (thanks to Nikolaus Polak)
Recompile Japanese translation
update ja.po
Update the French translation (thanks to Nicolas Vérité)
Update the Chinese translation (thanks to Shelley Shyan)
Update the Spanish translation
Update translations
typo on exported function
expose more functions so developers can implement prebinding methods
fix EJAB-1233 on pubsub_odbc patch
prevent orphaned pubsub node (EJAB-1233)
Fix English typos
sync pubsub_odbc with latest code
Enforce pubsub#show_values subscription option (EJAB-1096)(thanks to Karim Gemayel)
Show HTTP auth username and IP address in logs, not the password (EJAB-1231)
Don't show HTTP request in logs, because reveals password (EJAB-1231)
Optionally cache extauth users in mnesia (EJAB-641)
Fix EDoc comment
Use a standard method to get a random seed (EJAB-1229)
New option pam_userinfotype to provide username or JID (EJAB-652)
Recompile the guide
new option ldap_tls_verify is added (EJAB-1229)
full support for XEP-0115 v1.5 (EJAB-1223) (EJAB-1189)
Change max inactivity from 30 to 120 seconds
Use dirty_delete when removing the session.
enforce pubsub#presence_based_delivery (EJAB-1221) (thanks to Karim Gemayel)
Indicate explicitly what nodes are handled by mod_configure
Add xml default content type (thanks to Aaron Winborn)(EJAB-1214)
Minor fixes in listeners options list
Rename some JEP references to XEP
Reduce verbosity of log when captcha_cmd is checked but not configured.
New Access rule webadmin_view for read-only (thanks to Oleg Palij)(EJAB-213)
Don't store blocked messages in offline queue (thanks to Brian Acton)(EJAB-1224)
Automatic vcard avatar addition in presence (thanks to Igor Goryachev)(EJAB-208)
No need to handle IQ requests other than Get and Set
Fixed Bugs handling Service Discovery to contacts.
Don't send error stanza as reply to error stanza (EJAB-930)
Recompile the Guide
added notes about LDAP password change
allow inband password change (EJAB-199)
LDAP extensible match support (EJAB-722)
Remove warning for undefined print_state/1 function for p1_fsm processes (thanks Badlop).
Allow customizing the StateData in p1_fsm before error reporting.
Fix indentation (EJAB-1038)
Fix crash in number of occupants; other minor changes (EJAB-1038)
Refactor code to reduce calls to get_affiliation and get_role (thanks to Steam)(EJAB-1038)
- pass jid into feature_check_packet hook; - bounce messages when closing c2s session; - implemented treap:to_list/1 and treap:from_list/1
Move HTTP session timeout log from warning level to info. Timeout can be generated when user close the browser for example.
Update ejabberd version number to 2.1.3
Add 2.1.3 release notes
improve remove_user (EJAB-1172)
don't route PEP error messsages to a client
More compliance with LSB
typo fix on previous pubsub patch
allow sending PEP to bare jid on s2s
Document mod_sic (EJAB-1205)
Implement XEP-0279: Server IP Check (thanks to Karim Gemayel)(EJAB-1205)
Fix warnings about unused variable.
Replace concat_binary supported until R14 with list_to_binary supported since R9
Catch errors when exporting to PIEFXIS file (EJAB-1178)
Recompile the Guide
ldap_dn_filter option is documented; now fetching only needed attributes in LDAP search requests (EJAB-1204)
now using "%u" pattern as default for ldap_uids (EJAB-1203)
fix mistake in previous broadcast_stanza change
add extended stanza addressing 'replyto' on PEP (EJAB-1198) (thanks karim)
MSSQL support was broken (EJAB-1201)
fix compilations issues
minor intentation fix, and sync _odbc code
add pubsub#purge_offline (EJAB-1186) (thanks karim)
fix pubsub#title option (EJAB-1190) (thanks karim)
mod_caps optimizations (thanks evgeniy)
improved s2s connections clean up (EJAB-1202)
Remove print debug (thanks evgeniy)
Add quotes in documentation of some erl arguments (thanks to Vincent Courcelle)(EJAB-1191)
Fix German translation (thanks to Florian Zumbiehl)(EJAB-1195)
Fix resending authorization problem
Run user_receive_packet also when sending offline messages to client (thanks to Brian Acton)(EJAB-1193)
Fix typos in example config comments (thanks to Florian Zumbiehl)(EJAB-1192)
Use alternative of file:read_line/1 to not require R13B02
fixes typo in Russian translation
get rid of queue:filter/2 to keep compatibility with older Erlang versions
now using mnesia:async_dirty when cleaning table from failed node
Reduce verbosity of HTTP Binding log messages (thanks to Alexey Shchepin)
Recompile guide.html
improved explanation of "max_fsm_queue" option; included this option in ejabberd.cfg.example (EJAB-1185)
option "access_from" is now documented (EJAB-1187)
new option "hostname" is added (thanks to Stefan Hepp) (EJAB-838)
Close also legacy sessions that were half connected (thanks to Evgeniy Khramtsov)(EJAB-1165)
Remove references to the old SVN repository.
Rewrite mnesia counter functions to use dirty_update_counter (EJAB-1177) (thanks to Juan Pablo Carlino and Alexey Shchepin)
New command to set master Mnesia node
Shared roster gets contact nickname from vcard, when available (EJAB-114)
Cross-domain HTTP-Bind support (thanks to Jack Moffitt)(EJAB-1168)
Fix cluster race condition in route read (thanks to Alexey Shchepin)
Improve TTY code to work on more operating systems (thanks to Jan Koum)
Added support for Jot in ctl and TTY in debug (thanks to Jan Koum)
Minor fixes in the new ejabberdctl flock code
ejabberdctl: support concurrent connections with bound conn names
Remove unnecessary section about Snow Leopard with Erlang R13B
Replace mention of ejabberd SVN with Git.
Fix bashism in 'ejabberdctl started'
Allow a request_handler to serve a file in root of HTTP
Fix character in README file
Add new debuging hook to the http receiving process.
Hibernate http-bind process after handling a request.
Bug Fix: The value of max # of erlang process specified in ejabberdctl.cfg was not used.
avoid resending <stream:error> stanzas on terminate (EJAB-1180)
avoid 'invalid' value in #iq{} record
iq_query_info/1 now returns 'invalid' if XMLNS is invalid
changed Reason to shutdown when stopping destroyed MUC room
Fix bug handling Reason in gen_fsm:terminate
Added new acl for mod_register: access_from. This acl is applied if existing account tries to register a new account (either via s2s or c2s). The default value is to deny such operations.
improved SQL reconnect behaviour
regenerated guide.html
ejabberd_c2s option "max_fsm_queue" is now documented
new ejabberd_c2s option support: max_fsm_queue
fixes regression with configure script
now using p1_fsm behaviour in c2s FSM (EJAB-1173)
Fix typo in doc
Fix documentation installation, no need for executable permission (thanks to Peter)(EJAB-1170)
Fix typo in EJABBERD_BIN_PATH (thanks to Martin Langhoff)(EJAB-891)
Support in ejabberdctl help command names with old - characters.
Revert version number from 2.1.2 tag to 2.1.x branch
Update version number to 2.1.2
Add ejabberd 2.1.2 release notes
Close sessions that were half connected (thanks to Alexey Shchepin)(EJAB-1165)
Fix some moved URLs in the Guide
Document the option route_subdomains in the Guide (EJAB-1164)
Fix OTP version detection to work with old supported R10 and R11
Improve functions calls when closing client connection.
improve delete_subscriptions code
add send_loop robustness
If big offline message queue, show only subset on WebAdmin (EJAB-1095)
Fix explanation of access_max_user_messages.
Check for Effective GID EGID in ejabberdctl (thanks to Rustam Aliyev)(EJAB-1160)
Update year of ProcessOne copyright from 2009 to 2010 (EJAB-1159)
For XEP-0227 support, get exmpp 0.9.2; maybe 0.9.1 works too.
remove useless comment
avoid calling gen_server on internal events (EJAB-1156)
allow unsubscribe with 'all' SubId, as mod_pubsub already does
fix NodeName issue from r2880 (thanks to Karim Gemayel)
fix r2876 compilation warning
apply r2876 on pubsub_odbc
Support in user list page of WebAdmin when mod_offline is disabled (EJAB-377)
fix headers (EJAB-1091), (EJAB-1092), (EJAB-1093) (thanks to Karim Gemayel)
Show and throw error when captcha_cmd is required but not configured.
Minor case code simplification.
Match Erlang typing documentation, to remove dialyzer warning. Code was working fine however.
Attempt to fix dialyzer warning: adhoc.erl:51: Guard test XData::'false' | #xmlel{ns::'jabber:x:data',declared_ns::[{_,_}],attrs::[{_,_,_,_}],children::'undefined' | [{_,_} | {_,_,_,_,_,_}]} =:= 'true' can never succeed
Small refactoring
An AccessCommand with Access 'all', don't require auth to execute it.
Fix so script runs correctly when invoked by root (EJAB-1152)
Improve parsing of ejabberd_sm:get_user_info result.
add explicit comment on last published items configuration (EJAB-1130)
Show the last activity time in the user page.
Command to stop ejabberd informing users, with grace period, and kindly (EJAB-1112)
When ejabberd stops, send stream close to clients (thanks to Alexey Shchepin)(EJAB-1112)
Improve log message when showing lines of config file.
Kick occupants with reason when room is stopped due to MUC shutdown (EJAB-1149)
Fix warning about unused variable
If problem in config file starting ejabberd: display config lines and stop node (EJAB-1148)
Add +export_all to EFLAGS if: make debug=true (thanks to Marcin Owsiany)(EJAB-1134)
Support also SASL PLAIN auth messages described in RFC4616 (EJAB-1132)
Disable code of recent commit because some clients can't handle it (EJAB-1058)
Write in room log when a room is created, destroyed, started, stopped (EJAB-1144)
Send features after negotiating binding and session (EJAB-1058)
Provide more detailed log message when s2s stream start fails.
Better use install_fallback when importing a Mnesia backup file.
Support for arguments in ejabberdctl that are empty strings.
Add explanation about global Access precendence over vhost Access (EJAB-803)
Fix error message when register is forbidden by ACL (EJAB-803)
Improved Polish translation (thanks to Janusz B. Wiśniewski and Zbigniew Żółkiewski)(EJAB-1138)
Recompile all translation files
Clarify that 'tls' option is still useful in ejabberd_http for HTTPS.
Remove the old note about LDAP lack of encryption.
pep_mapping not working due to Node type mismatch (EJAB-1135)
Fix EDoc comment
Fix get_group_opt to return Default value in case of Mnesia error.
Update branch version name back to 2.1.x
Prepare 2.1.1 release
Print command's reply and newline only when there's something to print.
Added to ejabberdctl an experimental variable EJABBERD_BYPASS_WARNINGS
Add support for serving a Unique Room Name (thanks to Pablo Polvorin)(EJAB-1121)
Show Last Activity menu item in Webadmin only if vhost has mod_last (EJAB-1031)
Call in WebAdmin the proper mod_last backend module (EJAB-1031)
This is ejabberd 2.1.x branch, not 2.1.0 tag.
Fix erl -setcookie argument in cluster setup (thanks to Jan Koum)
Apply a forgotten part of the original patch (EJAB-1119)
Fix memory and port leak when TLS is enabled in HTTP (thanks to Brian Cully)(EJAB-1119)
Fix bug that couldn't connect if starttls_required and zlib were set (EJAB-1118)
prevent sending duplicated last items if several resources online (EJAB-1116)
Typo in mod_pubsub_odbc breaks Service Discovery and more (EJAB-1115)
Call ejabberd_router:route/3 instead of sending a message (EJAB-1114)
Small relax the limitation in the mod_pubsub_odbc host option.
Explain limitation in the mod_pubsub_odbc host option.
Fix warning of unused variable
Use os:getenv to get HOME; if variable is undefined use default values.
Use old regexp instead re in 2.x for pre-R12B-4 compatibility.
IQ sent to resource not connected, return service-unavailable instead of recipient-unavailable (EJAB-1045)
Forward IQ vCard queries of room occupants to bare JID, not full (EJAB-1045)
Don't handle internally an IQ vCard if destination is full JID (EJAB-1045)
Move get_group_name outside the loop (thanks to mikekaganski)
Fix explanation of option content_types. Reorder options.
Generate main XML file also when exporting only a vhost (EJAB-1098)
Show informative webpage when browsing the HTTP-Poll page (EJAB-1106)
Change captcha.sh to not depend on bash (thanks to Konstantin Khomoutov)(EJAB-1105)
Option to define custom HTTP headers in mod_http_fileserver (EJAB-612)
Explain that the example captcha.sh requires Bash because uses RANDOM feature.
Include IP address, time and module in IBR admin message (thanks to Tsukasa Hamano)
The default value of option ldap_filter is: undefined.
fixes allow_host/2 on subdomains. added hook s2s_allow_host: the hook should return deny or allow
Fix EDoc errors
Fix bug that forgot listener options when using R12 or older.
typo fix that breaks pep
fix root node deletion match
Fix ProcessOne name in comments.
Extend explanation of ldap_encrypt tls (thanks to Konstantin Khomoutov)
Fix disco on root node, add commands to disco (thanks to Brian Cully)(EJAB-1094)
Send authorization messages outside of get-pending transaction (thanks to Brian Cully)(EJAB-1090)
Send authorization messages outside of get-pending transaction (thanks to Brian Cully)(EJAB-1090)
Extend explanation of mod_pubsub "default" rename to "hometree".
Fix stringprep Bidi checking (thanks to Alexey Shchepin)(EJAB-1087)
minor bugfix, thanks to brian Cully (EJAB-1089)
backport previous patch to pubsub odbc
fix disco bugs, thanks to Brian Cully (EJAB-1088)
Mention in Release Notes the three changes in SQL databases (EJAB-1078)
Fix mistake that disallowed s2s_out connections when using Erlang R12 or older.
Mention the change in nodename slash separation in release notes.
Create branch for ejabberd 2.1.x release line.
does not use slash as default separator in nodename (EJAB-667)
Body tag not properly closed in HTTP-Bind (thanks to Janusz Dziemidowicz)(EJAB-1075)
In default config, only local accounts can create rooms and pubsub nodes.
Provide send_timeout_close option in TCP only in R13B or higher (EJAB-926)
Support ejabberd_listener option 'backlog' to increase TCP backlog (thanks to Janusz Dziemidowicz)(EJAB-1063)
Consistency, wording and spacing corrections for Polish messages (thanks to Marcin Owsiany)(EJAB-1072)
Fix word Sensible with Sensitive (thanks to Marcin Owsiany)(EJAB-1071)
Start mnesia as a permanent application (thanks to Brian Cully)(EJAB-1068)
Fix unnecessary call to xml:crypt/1 (thanks to Janusz Dziemidowicz)(EJAB-1064)
Support gen_tcp send timeout: Close the connection if the other end has disconnected ungracefully or cannot keep up with the rate at which we are sending data (EJAB-926)
Fixed more gcc signedness warnings
prevent remove_user from blocking gen_server, and allow plugin to change broadcasted payload on publish
typo fix (EJAB-1060)
If s2s fails due to namespace mismatch, show differences to help debugging the problem.
fix get_item issue on authorize access model (thanks to brian cully) (EJAB-1060)
autodetect compilation parameters for Mac OS X Snow Leopard (EJAB-1056)
return invalid-options on badly formed subscription options
Default pubsub messages to headline if nothing is configured (thanks to Brian Cully) (EJAB-1061)
Fix regression for authorize node subscription (thanks to Brian Cully)(EJAB-1060)
Add debug message on command execution
Document new option max_fsm_queue.
new option added: max_fsm_queue. removed hardcoded FSMLIMITS
use queue to reduced quadratic time effort on selective receive (thanks to Alexey Shchepin)
allow max_items_node use on pep
Improve stream error stanza when receives invalid handshake from component.
Pack presences stored in C2S processes (thanks to Geoff Cant)(EJAB-1057)
Describe how to compile ejabberd on Mac OS X Snow Leopard with Erlang R13B-2
do not create hometree base when hometree not configured as plugin
fixes race condition in wait_caps/note_caps (EJAB-1054)
new CAPTCHA script since previous one has been broken
Update Catalan translation (thanks to Jan Kusanagi)
improve waiting caps clean (EJAB-1054)
fix EJAB-1044 and EJAB-1055
Recompile guide and translation files.
rename pep_sendlast_offline option to ignore_pep_from_offline in default configuration
rename pep_sendlast_offline option to ignore_pep_from_offline (EJAB-1047)
fix Makefile.win32 for including stun (thanks to neustradamus)
Fix wrong XEP number to XEP-0227. Recompile translation files.
fix EJAB-819 thanks to badlop
Replace several mentions of Jabber to XMPP (thanks to Nicolas Vérité)
Replaced Jabber references in config file with XMPP, official name of the protocol
fix EJAB-1048, add timestamp to last published items
Removed unneeded use of length function + Remove trailing spaces
Document more ejabberd commands in the Guide (EJAB-1041)
Added new translation to Greek language (thanks to James Iakovos Mandelis)
Mention the mod_pubsub plugin default rename to flat
fix missing member affiliation on odbc plugin
fix compilation warning
Return terminal binding condition on max stanza size limit (thanks to Aleksey)
removed pretty printer from debug
Remove ChangeLog on distclean
change version do 2.1.0
Replace TYPE/1 with is_TYPE/1 (EJAB-922)
Mention in the 2.1.0 release notes the HTTP-Bind optimization
Add a "created_at" column to some tables in the MySQL schema to store a timestamp (thanks to Pedro Melo, EJAB-376).
Fix pubsub tables constraints in MySQL schema creation script.
remove useless include
fix delete item to allow owner being able to remove all publisher items, and also fix EJAB-1036
Change some error messages.
fix minor timestamp shift between item creation and modification
Use the local (target) domain for firing the s2s_receive_packet hook.
Update Swedish translation (thanks to Gustaf Alströmer)
improve previous patch
Fix missing tag when configuring subscription option (thanks to Clochix)
BOSH module optimization and clean-up (thanks to Aleksey Shchepin and Mickaël Rémond)(EJAB-936)
Include in release notes Zlib+STARTTLS support
Support zlib compression after STARTTLS (thanks to Aleksey Shchepin)(EJAB-499)
Remove the word "END" of release_notes file because it seems unnecessary.
Fix Edoc errors
Rename erlang log file sasl.log to erlang.log (EJAB-783)
Update translation files
Update Esperanto translation (thanks to Andreas van Cranenburgh)
apply last patch to pubsub_odbc as well
secure calls to ets:lookup
fix send last item issue
delete node fix
remove INFO_MSG call inside sql_query_internal
reapply previous RSM filtering fix drop by mistake
get odbc subscriptions bugfix
several improvements, and fix odbc subscriptions issues
Fix EDoc comment
fix pep not fetching subscriptions
typo fix
fix issue with RSM filtering
fix old api in node_flat_odbc
port commit from r2527 to odbc plugin
check if a room is not persistent before starting a new one with the same name (EJAB-1026)
resolve EJAB-1025, send notification when owner changed entity subscription
Add command to update PubSub table of ejabberd trunk SVN.
apply badlop's patch from http://www.ejabberd.im/node/3629
added function to rename old default nodes to hometree
fix manage subscriptions owner's usecase
Write PID file, path is configurable in ejabberdctl.cfg (EJAB-1023)
Document that the admin can install ejabberd.init script (EJAB-755)
Prepare ejabberd.init when installing ejabberd.
Added preliminary template file for ejabberd.init (thanks to Christophe Romain)
Update Japanese translation (thanks to Tsukasa Hamano)
update pubsub_odbc.patch
Comment -spec lines to compile with ancient Erlang/OTP versions.
Modify exmpp header lines to compile with ancient Erlang/OTP versions.
do not include MAPPED-ADDRESS in new style responses since it is not required by the RFC
Show example config to disable account create/delete, and allow password change.
Update Czech translation (thanks to Lukáš Polívka)
add missing index while migrating old pubsub database
fixing pubsub_subscription issue when changed transaction to sync_dirty
Updated translation files.
Update Polish translation (thanks to Zbyszek Żółkiewski)
Explain how client can specify Pubsub plugin when creating node (thanks to Christophe Romain)
Update Pubsub's nodetree documentation (thanks to Christophe Romain)
Update Norwegian translation (thanks to Stian B. Barmen)
Update Italian translation (thanks to Gabriele Stilli)
Update Dutch translation (thanks to Andreas van Cranenburgh)
Recompile guide.html
added mod_pubsub_odbc documentation
allow hometree pubsub plugin usage in default config, flat being default plugin anyway
fix create_node and subscribe_node glitches from last merge
Fix EDoc errors.
Update German translation (thanks to Nikolaus Polak)
Display room service messages in distintive blue colour.
Update Ingoing s2s connections inner state to hold domain name (thanks to Juan Pablo Carlino)(EJAB-972)
Don't allow room config to enable password protection with empty password (EJAB-1011)
If room config violates service policy, return not-acceptable instead of bad-request.
Update Ukraininan translation (thanks to Ruslan Rakhmanin)
fixes disco#info
Update Galician translation (thanks to Carlos E. Lopez)
Update Slovak translation (thanks to Marek Bečka)
Updated Portuguese-Brazil translation (thanks to Otávio Fernandes)
Update Chinese translation (thanks to Shelley Shyan and Zhan Caibao)
removed unnecessary gen_server call
Updated Turkish translation (thanks to Doruk Fisek)
fixes fuzzy strings in Russian translation
Describe the options syntax, not only the name (EJAB-998)
Update French translation (thanks to Nicolas Vérité)
Fix port in IRC register form.
updated Russian translation
Update Spanish translation
Update translation files again.
Fix english strings
Update translation files
Add support in WebAdmin for the new listener network protocol
Add stun directory to compilation process
Update URLs of IETF and XMPP protocol documents
More documentation for STUN server.
STUN support is now documented
it is now possible to start TCP/UDP on the same port
do not forget to close TLS socket
RFC5389 (STUN) support: stand-alone server, binding usage only
Add ejabberd command to get the current loglevel (EJAB-1004)
Added port and password connection parameters (thanks to Anton Podavalov)(EJAB-339)
Added preliminary Release Notes for ejabberd 2.1.0
do not create hometree node by default
add new pubsub modules in win32 Makefile
mod_pubsub_odbc.erl is autogenerated by applying a patch to mod_pubsub.erl
To use import/export XEP-0227 feature, exmpp 0.9.1 or higher is required.
ejabberdctl commands use _ instead of -. For backwards compatibility - is still supported.
Add support for XEP-227 import/export, requires exmpp to use it (EJAB-993)
typo fix on subscriptions
initial merge of pubsub odbc, compilation pass ok
Document options for Roster Versioning (EJAB-964)
Move functions from roster_versioning to mod_roster (EJAB-964)
Support for roster versioning  (EJAB-964)
* src/odbc/ejabberd_odbc_sup.erl: make requests return a timeout if connections to the database cannot be established (EJABS-990). * src/odbc/ejabberd_odbc.erl: cosmetic changes.
* src/ejabberd_loglevel.erl: add get/0 API function that returns current log level (EJAB-1004).
* src/odbc/ejabberd_odbc.erl: fix keepalive query, broken by r2092.
cosmetic change
* tools/ejabberdctl: fix shell function syntax (EJAB-1003). * tools/ejabberdctl: use a variable for Erlang shell.
Document the new option s2s_dns_options, expressed in seconds (EJAB-994)
fix is_last_item_cache_enabled issue with PEP, and fix indentation
fixes incorrect substitution of an LDAP pattern
deny node creation if node owner is not owner of parent node as well
typo fix
do not store item when persist_item false but send_last_published_item and last_item_cache enabled
fix configuration result (EJAB-995)
do not crash on unmatched request
EJAB-994: Implements DNS timeouts and retries.
Document mod_ping in the ejabberd Guide (EJAB-974)(EJAB-173)
implemented timeout_action: none | kill. default is none
XMPP Ping support (thanks to Brian Cully)
update existing key instead of dropping an error
EJAB-940: Implements reliable ODBC transaction nesting.
Fix error when nick registration stanza doesn't contain Value.
fix subscribers publish_model
fix get node configuration bug (Thanks to Brian Cully)
New command to dump a table to text file.
Add support to delete content and delete table.
Log an error if HTTP request does not include Host header (EJAB-966)
delete/2 now does not crash when there is nothing to delete. fold/1 added
caps storage indexed on case insensitive jid
Fix typo from EJAB-988
HTML room logs: fix formatting of spaces; log config when disabling logging; display occupants (EJAB-986)
Allow content types to be configured in ejabberd.cfg (EJAB-975)(thanks to Brian Cully)
fix get_entity_subscriptions result match
moved some log reports from error to debug level (thanks to Evgeniy Khramtsov)
Implement pubsub#get-pending Ad Hoc Command (EJAB-955) (thanks to Brian Cully)
Revert workaround of EJAB-611 because it seems no longer required (EJAB-709)
Support XEP-0157: Contact Addresses for XMPP Services (EJAB-235)
Fix updating pending subscriptions (EJAB-980)
Store account number in internal auth of (EJAB-981)(thanks to Juan Pablo Carlino)
Fix set-subscriptions to work with multi-subscribe (EJAB-977)
If a command is already defined: log as Debug, not as Warning.
Update Galician translation (thanks to Carlos E. Lopez)
prevent creating badxml when pubsub_state is not accessible
If directory /sbin is created, set permissions 755, not 750.
Temporary debug and ctl nodes must get nodename similar to destination.
Add -hidden flag when calling Debug or Ctl
XEP-0248 bugfix (EJAB-963) (Thanks to Brian Cully)
make virtual nodes having default options
Support XEP-0085 Chat State Notifications (EJAB-961)
Include original timestamp on delayed presences (thanks to Mickael Remond)(EJAB-234)
Add XEP82 Date Time, update XEP202 Entity Time and XEP203 Delayed Delivery (EJAB-234)
Add announcement of offline feature to service discovery (EJAB-234)
minor bugfixes on dag nodes
Don't use lists:keyfind/3 bcause it was introduced only in recent R13A.
Improve explanation about SSL for port 5223 and its option 'tls'.
Add note about PAM configuration for pam_winbind (thanks to Jon Bendtsen)
Improvements in the WebAdmin browsing menus.
Add Vim folding
Change some translatable strings.
Detect auth errors and report in log file. Support auth when domain not provided.
Add forgotten optional requirement: Imagemagick's Convert.
Add permanent section about HTTP Bind module to the Guide. Example config.
Add unit test script for http-bind service (thanks to Stefan Strigler)
Add forgotten copyright and license notices.
Easier debugging (EJAB-936)(thanks to Michael Remond)
Code clean-up (EJAB-936)(thanks to Michael Remond)
Started code clean-up (EJAB-936)(thanks to Michael Remond)
Replaced sha1 to hexadecimal transformation with sha:sha/1 call (thanks to Alexey Shchepin)
Replace TYPE/1 with is_TYPE/1 (EJAB-922)
Simplified code.(thanks to Michael Remond)
Properly warn user and admin when mod_http_bind is not started.(thanks to Michael Remond)
Do not clear input when dispatching a get when we have nothing to output. (thanks to Geoff Cant)
Changed the place where database is created(thanks to Michael Remond)
Fix remote-stream-error stanzas
New option max_inactivity to configure maximum inactivity period (EJAB-512)
Fix warning of unused Host variable
Include condition in http-bind terminate body when service stops (EJAB-792)
Fix unknown rid error (thanks to Jerome Sautret)
Implement packets reordering to avoid race conditions (EJAB-724).(thanks to Michael Remond)
Updated IP retrieving (thanks to Alexey Shchepin)
Improve ip fetching patch (thanks to Christohpe Romain)
Retrieve correct IP from http connection (thanks to Christohpe Romain)
Fix syntax error. (thanks to Jerome Sautret)
Removed HTTP bind session count. Removed the 'sponsored bind session' text. (thanks to Michael Remond)
Do not display error message when starting several hosts (EJAB-571) (thanks to Christohpe Romain)
Provide explanation in error message when module is already started for another vhost
Removed small warning
Bugfixes (thanks to Alexey Shchepin)
Removed receive_loop (thanks to Alexey Shchepin)
Remove Erlang module attribute 'vsn' because it does not provide any worth feature, and it difficults hot code update (EJAB-440)
Bugfix when table does not exist (thanks to Justin Kirby)
Migration code for people using previous version of the HTTP binding module (EJAB-390)
Do not overwrite the stanza namespace (thanks to Anastasia Gornostaeva)
Support for c2s ACL access, max_stanza and shaper on http_poll connections (EJAB-243, EJAB-415, EJAB-416)(thanks to Michael Remond)
The Erlang/OTP function httpd_util:to_lower/1 is deprecated, and it is recommended to use string:to_lower/1 instead.
Use DEBUG instead of INFO_MSG to keep log files small. Fix parse errors for grepping 'stream:error' (thanks to Stefan Strigler)
Forgot keyword 'catch' when doing list_to_float on bosh version attribute for initial request (thanks to Stefan Strigler)
Fixes for pausing sessions; did not parse 'pause' attribute to int (thanks to Stefan Strigler)
Support pausing sessions (thanks to Stefan Strigler) (thanks to Stefan Strigler)
Comment-header: talk about xmpp over bosh rather than http binding (thanks to Stefan Strigler)
Removed debugging stuff. Removed error condition (thanks to Stefan Strigler)
Code cleanup. Code reorganization. Store version of bosh session. Use bosh version for error conditions (thanks to Stefan Strigler)
Store version as float (thanks to Stefan Strigler)
Save bosh version with session (thanks to Stefan Strigler)
Code rearranged (thanks to Stefan Strigler)
Make use of macros for namespaces. Some code cleanup. (thanks to Stefan Strigler)
Fix for 'terminate' in request, send empty body instead of error (thanks to Stefan Strigler)
Disabled debugging (thanks to Stefan Strigler)
Some code cleanup (thanks to Stefan Strigler)
Bosh compliance: honor xmpp:version  (thanks to Stefan Strigler)
Restore ejabberd directory structure (src/web) for integration as patch (thanks to Christohpe Romain)
We do not send a 'version' attribute at the stream header for now (thanks to Stefan Strigler)
Prepare_response: fixed a dbg message. Changed http header (thanks to Stefan Strigler)
Implements sockname and peername for compatibility (thanks to Christohpe Romain)
Reverted to r76 as 97 is completely broken and should not have been checked in at all (thanks to Stefan Strigler)
Minor changes (thanks to Stefan Strigler)
Disabled debug (thanks to Stefan Strigler)
Deal with return values from starting/terminating supervisor (thanks to Stefan Strigler)
Disabled debug (thanks to Stefan Strigler)
Removed my own supervisor (thanks to Stefan Strigler)
Renamed some vars for (thanks to Stefan Strigler)
Start supervisor here (thanks to Stefan Strigler)
Make use of new api for plugable http based services (thanks to Stefan Strigler)
Initial commit of HTTP-Bind source code (thanks to Stefan Striegler)
Add permanent section about mod_http_fileserver to the Guide. Example config.
Add forgotten copyright and license notices.
New option directory_indices, and improve logging (thanks to Brian Cully)(EJAB-932)
Fix capitalization of HTTP headers (thanks to Brian Cully)(EJAB-892)
Converted to gen_server behaviour (EJAB-561). Use the general reopen_log_hook instead of ejabberdctl command.
Fix ip source to comply with new ip storage into ejabberd_http (thanks to Christophe Romain)
Use httpd_util:to_lower when not compiling with Erlang R12 (EJAB-628)
Added JavaScript content type
Include Last-Modified HTTP header in responses to allow caching (EJAB-546) in mod_http_fileserver and mod_muc_log_http.
Fix error creating ETS table if enabled in several vhosts (EJAB-551). Unregister the command when stopping the module.
Remove Erlang module attribute 'vsn' because it doesn't provide any worth feature, and it difficults hot code update (EJAB-440)
The Erlang/OTP function httpd_util:to_lower/1 is deprecated, and it's recommended to use string:to_lower/1 instead.
Small change in accesslog file format; fix bug when accesslog conf parameter wasn't present in the conf file (thanks to Jerome Sautret)
Added accesslog parameter to record requests log in a file similar to Apache (thanks to Jerome Sautret)
Initial commit of mod_http_fileserver (thanks to Massimiliano Mirra)
Fix syntax error in config file.
Ad-hoc commands to join IRC channel, set nickname and encoding (thanks to Magnus Henoch)(EJAB-302)
Add option to restrict max offline messages by Access and ACL (EJAB-951)
Replace TYPE/1 with is_TYPE/1 (EJAB-922)
add greetings to Brian Cully for pubsub contribs
experimental patch including XEP-248 (thanks to Brian Cully)
Prevent process crash if the IP and port of a connection is unknown.
When client is closed, include the Reason in the stream trailer stanza.
Add forgotten copyright and license notices. Fix blackspaces.
fixes typo in Russian translation
Malformed CAPTCHA response may crash a room. This is now fixed.
Update Spanish translation
Update French translation (thanks to Nicolas Vérité)
Update Russian translation (thanks to Evgeniy Khramtsov)
Update ejabberd.pot and *.po, compile *.msg. All this by calling: make translations
updated russian translation
When max_stanza_size is exceeded, return meaningful error message (EJAB-752)
Remove support of deprecated Disco Publish XEP-0030 (EJAB-904)
Fix Access check: the rule can be defined in a vhost or global.
apply patch from EJAB-845
fix nodetree virtual to allow node subscription
make flat the default node plugin
fix ets table name change
remove useless debug
pubsub: added configuration option in guide.tex, added last item cache, use default node type if given type is not configured, make node_flat the default node plugin. caps: improve cache handling
Update CSS of WebAdmin menu
Support to select what modules to update. Split large function in smaller ones.
make get_items able to sort items in publish order (EJAB-824)
improve get_entity_* to work regardless of nodetree (EJAB-937)
Added support for captcha feature disability (EJAB-895)
Add label in captcha form. Improve translatable strings in captcha and muc room.
Support LDAPS with TLS (EJAB-109)(thanks to Thomas Baden, Andy Harb, Sergei Golovan, Anton Podavalov)
Decrease proxy65 buffer sizes to 8192 bytes.
* trunk/src/odbc/ejabberd_odbc.erl: Fix typo (EJABS-859) (EJAB-940) (CR-EJAB-10) * branches/road-to-exmpp/src/odbc/ejabberd_odbc.erl: Likewise.
* trunk/src/odbc/ejabberd_odbc.erl: Move trace to debug loglevel (EJAB-940) (EJABS-859) (CR-EJAB-10)
* trunk/src/odbc/ejabberd_odbc.erl: Support for nested transaction (EJABS-859) (EJAB-940) (CR-EJAB-10)
PubSub: improve get_entity_* API
Added API function to get current S2S connections with information
* src/eldap/eldap.erl: log warnings on unsuccessful LDAP bind attempts. Increase timeout before the next LDAP bind attempt up to five seconds if the last bind attempt was rejected by the LDAP server ("soft" error). Thanks to Konstantin Khomoutov.
Document how to convert Mnesia node name
New command to convert mnesia nodename, copied from OTP and Debian
Allow to define additional Erlang options in ejabberdctl.cfg (thanks to Sergei Golovan)
The --node argument overwrites the value of ejabberdctl.cfg
Erlang/OTP R13 can be used, but its support is still experimental
No longer edit ChangeLog, will be auto generated for ejabberd releases.
Fix bad transaction returncode in unsubscribe presence handler
Prevent race condition when calling get_caps while note_caps has not been handled yet (EJAB-934)
* src/ejabberd_debug.erl: Handled fprof based profiling (EJABS-872). * src/ejabberd_app.erl: Likewise.
handle Example 90 of XEP-0060 (EJAB-909), and make use of nodeAttr
Allow to get subscriptions on a given node (EJAB-712), and presence based fixes
Merge misplaced 2055 2058 and 2062 from ejabberd-2.0.4.
fix wrong date
several pubsub fixes and improvements. also fixes EJAB-913 and EJAB-871
Replace TYPE/1 with is_TYPE/1 (EJAB-922)
* src/Makefile.in: Prevent Erlang R13B compilation warning: behaviour X undefined (EJAB-920)
* src/ejabberd_loglevel.erl: Use dynamic_compile instead of ram_file_io_server. Support definition of loglevels with integer or atom. (thanks to Geoff Cant)(EJAB-919) * src/dynamic_compile.erl: Added erlang module that converts string to binary loadable code by Mats Cronqvist, Chris Newcombe, and Jacob Vorreuter. * src/ram_file_io_server.erl: Remove file not longer useful. * src/ejabberd.app: Likewise
* src/mod_muc/mod_muc_room.erl: Fix badarg return (EJAB-899)
typo fix
mod_caps: reduce memory and remove mnesia lock
typo fix
PubSub/PEP API change for major optimization
* src/ejabberd_hooks.erl: Support distributed hooks (EJAB-829)
* src/xml.erl: More verbose error reporting for element_to_string (thanks to Magnus Henoch)(EJAB-301)
* src/translate.erl: Support additional files (EJAB-925) * contrib/extract_translations/extract_translations.erl: Likewise * contrib/extract_translations/prepare-translation.sh: Likewise
* src/win32_dns.erl: Fix problem parsing some win32 dns (EJAB-927)
* src/cyrsasl_digest.erl: Fix auth verification (EJAB-863)
* src/jlib.erl: Fix recursive call to speedup base64 decoding (thanks to Jeffrey Rogiers)(EJAB-333)
minor cosmetic fix
fix minor pubsub init glitch, and allow ejabberd_odbc to execute bloc of queries without transaction
improve send last published items spawning
* src/ejabberd.cfg.example: Fix English typos. Fix line length: max 80 characters per line. Remove trailing blankspaces. Added markers for Vim fold, you may want to add to $HOME/.vimrc this line: set modeline * src/ejabberdctl.cfg.example: Likewise
* src/mod_muc/mod_muc.erl: Limit number of characters in Room ID, Name and Description (EJAB-899) * src/mod_muc/mod_muc_room.erl: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/cyrsasl.erl: Change API of check_password: pass a function to generate the digest (thanks to Graham Whitted)(EJAB-863) * src/cyrsasl_anonymous.erl: Likewise * src/cyrsasl_digest.erl: Likewise * src/cyrsasl_plain.erl: Likewise * src/ejabberd_auth.erl: Likewise * src/ejabberd_auth_anonymous.erl: Likewise * src/ejabberd_auth_external.erl: Likewise * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth_ldap.erl: Likewise * src/ejabberd_auth_odbc.erl: Likewise * src/ejabberd_auth_pam.erl: Likewise * src/ejabberd_c2s.erl: Likewise
* src/ejabberd_c2s.erl: Fix for SASL Anonymous connections not stored or purged (thanks to Andy Skelton)(EJAB-912)
* src/mod_shared_roster.erl: Support in API to add 'all' as member of a group (thanks to Martin Langhoff)(EJAB-916)
* src/ejabberd_captcha.erl: If a problem appears while obtaining the image, show error message (EJAB-895)
* src/Makefile.in: Install example script captcha.sh (EJAB-895)
* src/ejabberd.cfg.example: Add CAPTCHA options (EJAB-895)
* doc/guide.tex: Add section to document how to setup CAPTCHA support (EJAB-895) * doc/guide.html: Likewise
fix missing greetings
* doc/guide.tex: Document new ejabberdctl option. New section that documents AccessCommands. (EJAB-910) * doc/guide.html: Likewise
* src/ejabberd_ctl.erl: New option to require auth in ejabberdctl and restrict what commands and arguments can execute (EJAB-910) * src/ejabberd_config.erl: Likewise
* src/ejabberd_commands.erl: API to restrict who can execute what commands and arguments (EJAB-910)
* doc/guide.tex: Explain that the recommended Erlang/OTP version is R12B-5, and R13 is not supported yet. * doc/guide.html: Likewise * README: Likewise
* src/mod_muc/mod_muc_log.erl: Linkify also xmpp:..., as it was done previously (thanks to Konstantin Khomoutov)(EJAB-850)
after check, last commit was useless
minor change, back to original patch
minor typo fix
minor improvement for best readability
make sure caps table are clean on startup
better hadling of presence in mod_caps
* src/msgs/pl.po: Fix some translations (thanks to Andrzej Smyk)
* src/mod_pubsub/mod_pubsub.erl: Announce PubSub features in the server JID only if PEP is enabled (EJAB-905)
* src/mod_muc/mod_muc.erl: English fixes (thanks to Glenn Sieb) * src/mod_muc/mod_muc_log.erl: Likewise * src/mod_muc/mod_muc_room.erl: Likewise * src/mod_register.erl: Likewise * src/web/ejabberd_web_admin.erl: Likewise
* src/ejabberd_frontend_socket.erl: Fix compilation warnings and add TODO comments.
* src/mod_irc/mod_irc_connection.erl: Fix compilation warnings.
pubsub: prevent blocking when sending lots of items, send last items to connected resource only, and cosmetic changes
* src/ejabberd_captcha.erl: fixed compilation warnings.
* doc/release_notes_2.0.5.txt: Added file for new release
* src/ejabberd_captcha.erl: Small code reorganization; export new functions build_captcha_html/2 and check_captcha/2
* src/ejabberd_sm.erl: Partially retract SVN r1976 EJAB-300 (EJAB-890). Check default privacy list when account, not a specific session, receives a presence subscription stanza (EJAB-300). * src/ejabberd_c2s.erl: Likewise
implement roster acces model (EJAB-780)
Allow more environment variable overrides in ejabberdctl (EJAB-891)
* src/ejabberd_captcha.erl: moved all functions from ejabberd_captcha process. Use mnesia:transaction/1 where it is needed.
* tools/captcha.sh: sample CAPTCHA script.
* src/ejabberd_captcha.erl: fixes previous commit
* src/ejabberd_captcha.erl: XEP-158 (CAPTCHA Forms). * src/ejabberd_config.erl: likewise. * src/ejabberd_sup.erl: likewise. * src/jlib.hrl: likewise. * src/web/ejabberd_http.erl: likewise. * src/mod_muc/mod_muc_room.erl: CAPTCHA support. * src/mod_muc/mod_muc_room.hrl: likewise.
Fix mistake when calling win32_dns.
* doc/release_notes_2.0.4.txt: Added file for new release
* src/tls/tls_drv.c: Fix encryption problem for ejabberd_http after timeout (thanks to Alexey Shchepin)(EJAB-880)
typo fix on roster access_model
Fix PEP with other domains and s2s (EJAB-825)
* src/tls/tls_drv.c: Fix to support OpenSSL older than 0.9.8f (EJAB-877)(thanks to Jonathan Schleifer) * doc/guide.tex: It is again supported OpenSSL older than 0.9.8f * doc/guide.html: Likewise
* src/Makefile.in: In SunOS, use different C flags (thanks to Thomas)(EJAB-438) * src/ejabberd_zlib/Makefile.in: Likewise * src/mod_irc/Makefile.in: Likewise * src/stringprep/Makefile.in: Likewise * src/tls/Makefile.in: Likewise
* src/ejabberd_c2s.erl: Enforce privacy rules also for subscription requests (EJAB-300) * src/ejabberd_sm.erl: Likewise
* src/ejabberd_hooks.erl: fixed typo
* src/ejabberd_hooks.erl: anonymous functions support.
* src/ejabberd_app.erl: In a Windows machine, explicitly add the nameservers, as it seems Erlang does not do itself (EJAB-860) * src/win32_dns.erl: Get name servers from Windows registy (thanks to Geoff Cant)
* doc/guide.tex: Require OpenSSL 0.9.8f or higher (EJAB-877) * doc/guide.html: Likewise
* src/ejabberd_auth.erl: If anonymous auth is enabled, when checking if the account already exists in other auth methods, take into account if the auth method failed (EJAB-882) * src/ejabberd_auth_anonymous.erl: Likewise * src/ejabberd_auth_external.erl: Likewise * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth_ldap.erl: Likewise * src/ejabberd_auth_odbc.erl: Likewise * src/ejabberd_auth_pam.erl: Likewise
Allow node creation without configure item
update pubsub version
Add roster subscriptions handling and make PEP events sent to all resources
Fix small compilation error introduced in revision 1923
* src/mod_pubsub/node_default.erl: Fix that non-subscriber could fetch items from Authorize node (thanks to Brian Cully)(EJAB-873)
* src/tls/tls_drv.c: S2S connection with STARTTLS fails to Gtalk and recent Openfire (thanks to Philipp Hancke)(EJAB-877)
* src/mod_proxy65/mod_proxy65_service.erl: if an ip option is not defined, the module takes an IP address of a local hostname.
cosmetic changes
* doc/guide.tex: No mention to the release date in ejabberd Guide or release notes. The date of an ejabberd release is determined by the date of the corresponding release announcement.
* src/mod_pubsub/mod_pubsub.erl: Fix incorrect implementation of Pubsub payload requirements (thanks to Andy Skelton)(EJAB-823)
* src/ejabberd_listener.erl: Fix report message of 'undef' error
Do not call mod_caps:clear_caps as it breaks PubSub/PEP (EJAB-854)
* src/web/ejabberd_http.erl: Added a workaround for inet:peername returning 'ebadf'
Fix a minor compilation warning and add EDoc comment
* src/ejabberd_listener.erl: When stopping a listener, don't stop the listener supervisor (EJAB-874)
fix nodetree plugin resolver
* src/ejabberd_listener.erl: More error detections
* src/ejabberd_listener.erl: More error detections
* src/ejabberd_config.erl: Check certfiles are readable on server start and listener start (EJAB-753) * src/ejabberd_listener.erl: Likewise
* src/mod_privacy.erl: Privacy List: deny presence-out all + send presence to: presence is sent (EJAB-255) * src/ejabberd_c2s.erl: Likewise
* src/mod_muc/mod_muc_room.erl: Owner of a password protected room must provide the password, like other participants (EJAB-867)
* src/mod_muc/mod_muc_log.erl: Prevent XSS in MUC logs by linkifying only a few known protocols (EJAB-850)
* src/mod_muc/mod_muc.erl: Export function to create MUC room (thanks to Eric Cestari) (EJAB-729)
* src/mod_roster.erl: When account is deleted, cancel presence subscription for all roster items (EJAB-790) * src/mod_roster_odbc.erl: Likewise
* src/web/ejabberd_http_poll.erl: Allow configuration of session timeout, using new global option http_poll_timeout (EJAB-135) * doc/guide.tex: Document new option * doc/guide.html: Likewise
* src/ejabberd_listener.erl: Report error at startup if a listener module isn't available or is not an ejabberd listener (EJAB-868)
* src/mod_shared_roster.erl: Fix bug: a pending subscription request, and later the requester added to the roster due to a shared roster group, that request could neither be accepted or rejected (thanks to Brian Cully)(EJAB-869)
* src/web/ejabberd_web_admin.erl: Show big integers with comma separators for easy reading
* src/ejabberd_system_monitor.erl: Allow parametrizable watchdog threshold: option watchdog_large_heap or chatting with the watchdog bot (EJAB-545) * src/ejabberd_config.erl: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise
prevent from calling get_vh_registered_users/2 when not available
fix delete-items issue and manage-affiliations typo
* src/mod_pubsub/mod_pubsub.erl: The table pubsub_node in ejabberd older than 2.0.2 had indexes for parentid and type. This is not required since ejabberd 2.0.2, so those indexes can be deleted. (EJAB-669)
* doc/Makefile: In Clean do not remove html. In new Distclean, remove also html.
* doc/Makefile: When cleaning, remove contributed_modules.tex
* src/Makefile.in: Fix arguments to Install program
* src/web/ejabberd_web_admin.erl: Calls to the hook webadmin_menu_node provide the node as first argument, and calls to webadmin_menu_hostnode provide both the host and the node. Fix call to make_menu_items, because webadmin_menu_node was called in cases where webadmin_menu_hostnode should be called. Align to right some table elements.
* doc/guide.tex: Provide only an example of language option * doc/guide.html: Likewise
* src/eldap/eldap.erl: moves waiting for response queries to pending queue on an LDAP connection failure.
* src/eldap/eldap.erl: implemented queue for pending queries.
* doc/guide.tex: mod_muc can run in several nodes of cluster * doc/guide.html: Likewise
* src/eldap/eldap.erl: Close a connection on tcp_error.
* src/odbc/mysql.sql: Fix complain about comment syntax * src/odbc/pg.sql: Likewise
* doc/api/process-one.css: Add some style to HTML elements
* src/ejabberd_hooks.erl: Explanation in EDoc of some functions
* doc/guide.tex: Explain that account creation is only supported by internal and odbc authentication methods * doc/guide.html: Likewise
* src/Makefile.in: The path to the installed copy of ejabberd Guide is set in the environment variable EJABBERD_DOC_PATH (EJAB-837). * src/web/ejabberd_web_admin.erl: Likewise * src/ejabberdctl.template: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/mod_privacy.erl: Only run roster_get_jid_info if privacy list has subscription or group (thanks to George Hazan)(EJAB-851). Sort items in privacy list by order before storing (EJAB-848) * src/mod_privacy.hrl: Likewise * src/mod_privacy_odbc.erl: Likewise
Remove empty svn:mergeinfo properties so it won't get in the way during future merges.
* src/ejabberd_c2s.erl: Added comments.
* src/mod_privacy.erl: Privacy list items must be processed in the specified order (EJAB-848) * src/mod_privacy_odbc.erl: Likewise
* doc/release_notes_2.0.3.txt: Minor changes
* src/tls/Makefile.win32: Windows compilation support. * src/tls/tls_drv.c: Likewise. * src/tls/stdint.h: Likewise.
* doc/guide.tex: Update Erlang version in Windows compilation documentation.
* src/msgs/pl.po: Fix typo (thanks to Apag0r)(EJAB-844)
* src/web/ejabberd_web_admin.erl: Use textareas for large input like ejabberd module options and listening port options. Show result of POST more clearly. Ensure access rules are shown with some minimum separation. Improve menu headers. (EJAB-562) * src/web/ejabberd_web_admin.hrl: Likewise * src/mod_offline.erl: Likewise * src/mod_offline_odbc.erl: Likewise * src/mod_roster.erl: Likewise * src/mod_roster_odbc.erl: Likewise * src/mod_shared_roster.erl: Likewise
* src/ejabberd_listener.erl: New way to configure IP address and IP version of listener. Support for definition of IP address in string format, and implicit definition of IP version (EJAB-388). Support for defining several listeners: all with same port number but different IP addresses (EJAB-389)(thanks to Fabrice Colliot and Sergei Golovan). Better report in WebAdmin of problem when starting a listener. The old configuration method of ip tuple and inet6 is fully supported for backwards compatibility, but is not documented in the Guide anymore. * src/ejabberd_config.erl: Likewise * src/mod_proxy65/mod_proxy65_stream.erl: Likewise * src/mod_proxy65/mod_proxy65_service.erl: Likewise * src/web/ejabberd_web_admin.erl: Likewise * doc/guide.tex: Document the new way to configure IP address and IP version of listener, undocument options ip and inet6 * doc/guide.html: Likewise
* src/web/ejabberd_web_admin.erl: New appearance of WebAdmin logo, fixed logo-fill.
* doc/guide.tex: Fix some English strings: JID -> Jabber ID; jabberd 1.4 -> jabberd14; commited -> committed * src/*/*.erl: Likewise * src/msgs/*.msg: Likewise * src/msgs/*.po: Likewise
* src/odbc/ejabberd_odbc.erl: Fixed processing of UPDATE results with pgsql
* doc/guide.tex: Update copyright date 2008 to 2009 (EJAB-842) * doc/guide.html: Likewise * src/*/*.erl: Likewise * src/*/*.erl: Remove unneeded blankspaces in license text
prevent unauthorized entity to gain none-affiliation for given entity
fix previous partial patch (EJAB-840)
fix owners cache and fix unsubscribe permissions (EJAB-840)
fix unsubscription of full jid subscribed node (EJAB-839)
* doc/guide.tex: Improve explanation of backup commands (EJAB-832) * doc/guide.html: Likewise
* src/mod_configure.erl: Fix access check for vhost configuration
* src/ejabberd_listener.erl: Define send timeout option to avoid blocking on socket send (EJAB-746). * src/ejabberd_s2s_out.erl: Likewise.
apply delete-any feature
fix EJAB-701 and EJAB-836
* src/mod_roster.erl: Show hyperlinks to local contacts when browsing roster of account in Web Admin (EJAB-480) * src/mod_roster_odbc.erl: Likewise
* src/web/ejabberd_web_admin.erl: WebAdmin serves Guide and links to related sections; the path to guide.html can be configured with option doc_path (EJAB-837) * src/web/ejabberd_web_admin.hrl: Likewise * src/mod_shared_roster.erl: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/msgs/ru.po: Fix typo (thanks to Dominges) * src/msgs/ru.msg: Likewise
* src/tls/tls_drv.c: Added a flag to avoid certificate validation * src/tls/tls.erl: Likewise * src/ejabberd_c2s.erl: Likewise
* src/*.erl: Fix EDoc comments
PubSub: Added access-whitelist and member-affiliation features (EJAB-780)
PubSub cleanup, EJAB-827 fix, EJAB-701 partial fix
* src/ejabberd_c2s.erl: Remove useless comment and port Alexey fix to 2.0.x branch.
* src/ejabberd_c2s.erl: Bugfix in "from" attribute checking
* src/odbc/odbc_queries.erl: replaced string:join/2 function. Removed ugly "catch" statement from update_t/4. WARNING: this change requires last version of mysql driver. You can update it from ejabberd-modules repository.
* src/odbc/ejabberd_odbc.erl: Print meaningful error message when an SQL transaction exceeds number of restarts. Also rollbacks this transaction to prevent deadlocks.
* src/ejabberd_c2s.erl: We should allow use of bare resource in from by the client (partially revert r1727) (EJAB-812)
Use inet:gethostbyname instead of inet_res:getbyname
* src/web/ejabberd_web_admin.erl: Show in ejabberd Web Admin the connection method and connected node of Jabber clients (thanks to Oleg Palij)(EJAB-319)
* src/ejabberd_config.erl: Option outgoing_s2s_options to define s2s outgoing behaviour: IPv4, IPv6 and timeout (thanks to Stephan Maka)(EJAB-665) * src/ejabberd_s2s_out.erl: Likewise * src/ejabberd_socket.erl: Likewise * src/ejabberd.cfg.example: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/odbc/ejabberd_odbc.erl: get rid of SERIALIZABLE isolation level on MySQL connections. * src/odbc/odbc_queries.erl: replaces all delete->insert chains with update->insert. * src/mod_privacy_odbc.erl: moved sql queries to odbc_queries.erl. * src/mod_roster_odbc.erl: changed interface for odbc_queries.erl.
* src/aclocal.m4: Fixes in configure script: fix disable-disable_zlib and disable-pam; in case of problems, PAM verification aborts with error instead of warning. (EJAB-787) * src/configure.ac: Likewise * src/configure: Likewise
* src/acl.erl: New ACL: shared_group (thanks to Maxim Ryazanov) * doc/guide.tex: Likewise
* src/jlib.erl: Implementation of XEP-0059 Result Set Management (thanks to Eric Cestari)(EJAB-807) * src/jlib.hrl: Likewise * src/mod_muc/mod_muc.erl: Likewise
typo fix
make caps store only required user_caps_default
Improve handling of PEP sent to external contacts (EJAB-825)
* src/mod_last.erl: Implement workaround for uptime statistic in 32 bit machines, so it can show uptime greater than 50 days (EJAB-610) * src/mod_last_odbc.erl: Likewise * src/ejabberd_config.erl: Store start time in local_config table
* src/cyrsasl_digest.erl: Check digest-uri in SASL digest authentication (thanks to Paul Guyot)(EJAB-569)
* src/odbc/odbc_queries.erl: Fix removal of private_storage of an account when the account is removed
Fix send_last_published_item issue when running on clustered table (EJAB-793)
Check option of the nodetree instead of checking configuration
* src/mod_pubsub/mod_pubsub.erl: Fix update pubsub tables from ejabberd 1.x to 2.x (EJAB-817)
* doc/guide.tex: Fix capitalization of some section titles
fix get_item_name deadlock on transaction
* src/ejabberd_c2s.erl: Bugfix in "from" attribute checking
fix typo bug injected in r1712
prevent publish items with invalid XML schema (EJAB-699)
cosmetic change (intentation and spaces)
remove pubsub_state record when unsubscribing node without affiliation (EJAB-776)
reply to suscriptions options queries with unsupported feature error (EJAB-713)
several pubsub improvements
Reduce memory consumption due to caps handling
* src/ejabberd_c2s.erl: Enforce client stanza from attribute (EJAB-812). * src/jlib.erl: Likewise.
Fix default value of default_room_options (thanks to Aleksey Shchepin)
* src/odbc/ejabberd_odbc.erl: close MySQL connections on terminate (needs mysql r829)
No need to define default value of history field because it is explicitely set when the record is created
* src/mod_muc/mod_muc_room.erl: Move definitions to header file * src/mod_muc/mod_muc_room.hrl: New header file * src/Makefile.in: Likewise
* doc/guide.tex: New subsection Database Connection * doc/guide.html: Likewise
Remove debug line from SVN r1685
* src/mod_muc/mod_muc_room.erl: Clean user activity after timeout (EJAB-804)
* src/ejabberdctl.template: Fix detection of ejabberdctl.cfg path
* src/mod_irc/mod_irc.erl: Announce disco#info (thanks to Spike) * src/mod_muc/mod_muc.erl: Announce disco#info disco#items * src/mod_proxy65/mod_proxy65_service.erl: No announce disco#items * src/mod_pubsub/mod_pubsub.erl: Announce disco#info disco#items * src/mod_vcard.erl: Announce disco#info
* src/gen_mod.erl: First store module options in ETS and Mnesia, then start the module. In case of failure, remove options from ETS. Until now the module was started before the options were stored in database, and some modules started incorrectly because they couldn't access the options from database; for instance mod_muc_room required this for reading max_users option.
pubsub/pep: get_node_affiliations resultset bugfix
* src/eldap/Makefile.in: added +optimize and +driver compilation options * src/eldap/Makefile.win32: Likewise
* src/ejabberdctl.template: Added the ability to define the --config-dir option.
* src/ejabberd_receiver.erl: Hibernate after timeout * src/ejabberd_frontend_socket.erl: Likewise
URL path should be tokenized by / and then decoded (EJAB-786).
* src/web/ejabberd_http.erl: Include recognized headers in request_headers as atoms, and others as strings (EJAB-778)
* doc/guide.tex: Improve legibility of mod_irc example config
SVN Revision: 1676
* src/tls/tls_drv.c: Don't create a SSL context on every connection and disable SSLv2 on outgoing connections (EJAB-781)
* src/ejabberd_s2s_out.erl: exports the DNS resolution function.
* src/extauth.erl: When the extauth call fails or timeouts, deny authorization. Use two timeouts: 60s for script initialization and 10s for regular calls. (thanks to Kevin Crosbie from Ravenpack) (EJAB-627)
* src/ejabberd_c2s.erl: Disable zlib when STARTTLS is required
* src/Makefile.in (clean-local): Delete also ejabberdctl.example
* src/translate.erl: When a translation file can't be loaded, show detailed error message
* src/ejabberd_ctl.erl: If ejabberd didn't start correctly: 'ejabberdctl status' suggests to look in log files; any other ejabberdctl command shows 'status'.
* src/ejabberd_app.erl: Open ejabberd.log sooner, so errors during ejabberd initialization are logged in that file (EJAB-777). Write a log message when ejabberd finishes the start or stop.
* src/ejabberd_c2s.erl: Ensure unique ID in roster push (EJAB-721) * src/mod_roster.erl: Likewise * src/mod_roster_odbc.erl: Likewise * src/mod_shared_roster.erl: Likewise
* src/ejabberd_lstener.erl: Fix listeners * src/ejabberd_sup.erl: Likewise * src/gen_mod.erl: Likewise
* src/ejabberd_frontend_socket.erl: Fixed SSL sockets
* src/Makefile.in: docdir should be prefixed with DESTDIR (thanks to Jack Moffitt)(EJAB-775)
does not write item when max_items set to 0 (solves EJAB-768)
fix remove_user not unsubscribing user (EJAB-684)
fix badarg issue on get_roster_info when allowed roster groups is not defined
fix pubsub_publish_item hook ServerHost parameter (EJAB-772)
* src/odbc/ejabberd_odbc.erl: log MySQL driver messages.
Replace mentions of mod_xmlrpc to ejabberd_xmlrpc
* src/web/ejabberd_web_admin.erl: When requesting page of nonexistent user, show 'Not Found' page (EJAB-771)
* src/web/ejabberd_web_admin.erl: Run new hook webadmin_user_parse_query when POST in web admin user page (thanks to Oleg Palij)(EJAB-747) * src/mod_offline.erl: Add button "Remove All Offline Messages" in a user page (thanks to Oleg Palij)(EJAB-747) * src/mod_offline_odbc.erl: Likewise
* src/web/ejabberd_web_admin.erl: Improve Web Admin navigation menu for vhosts and nodes (EJAB-734)
* doc/guide.tex: Explain the new ejabberdctl command 'help' * doc/guide.html: Likewise
* src/mod_configure.erl: Update calls from ctl to commands (EJAB-694) * src/web/ejabberd_web_admin.erl: Likewise
* src/ejabberd_sm.erl: Update from ctl to commands (EJAB-694) * src/ejabberd_s2s.erl: Likewise
* src/ejabberd_auth.erl: Update from ctl to commands (EJAB-694) * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth_ldap.erl: Likewise * src/ejabberd_auth_odbc.erl: Likewise
* src/ejabberdctl.template: Move help print to a separate function (EJAB-694)
* src/ejabberd_ctl.erl: Add frontend support for commands (EJAB-694). Categorization and sorting of commands in ejabberd_ctl help (EJAB-313). Lines in command line help of length 80, and text formatting (EJAB-473)
* src/ejabberd_app.erl: Initialize ejabberd_commands and start ejabbed_admin (EJAB-694)
* src/ejabberd_admin.erl: Implement commands from old ejabberd_ctl (EJAB-694)
* src/ejabberd_commands.erl: New 'ejabberd commands': separate command definition and calling interface (EJAB-694) * src/ejabberd_commands.hrl: Likewise
* src/mod_proxy65/mod_proxy65.erl: Update so the listener starts correctly (EJAB-303) * src/mod_proxy65/mod_proxy65_service.erl: Likewise
* src/ejabberd_app.erl: Start listeners explicitely at server start after everything else (EJAB-303). Implement support in ejabberd for 'independent listeners', which handle their connections themselves: gen_tcp:listen, etc. * src/ejabberd_listener.erl: Likewise * src/ejabberd_socket.erl: Likewise * src/ejabberd_sup.erl: Likewise
fix typo
uncomment pubsub_publish_item hook call (EJAB-765)
* src/mod_roster_odbc.erl: fix MySQL multiple requests issue.
* doc/guide.html: Regenerated
* src/ejabberd_rdbms.erl: fix SQL database reconnection issues (EJAB-764) and add odbc_start_interval configuration directive (default to 30 seconds). * src/odbc/ejabberd_odbc.erl: likewise. * src/odbc/ejabberd_odbc_sup.erl: likewise. * doc/guide.tex: likewise.
* src/odbc/odbc_queries.erl: Fix empty query that fail on MySQL.
* src/mod_vcard_odbc: added vCard support for MS SQL Server 2005 (missing from previous commit)
* src/mod_vcard_odbc: added vCard support for MS SQL Server 2005. * src/odbc/odbc_queries.erl: likewise. * src/odbc/mssql2005.sql: likewise.
* src/mod_shared_roster.erl: Correct roster push when changing a shared roster entry name (EJAB-738).
* src/*/Makefile.win32: Provide explicit beam filenames because nmake does not accept wildcards (thanks to Attila Vangel)(EJAB-543)
fix licence header
EJAB-739 and EJAB-751 improvements
* src/mod_configure.erl: Fix adhoc commands reply types for "get-online-users-num" and "get-registered-users-num" (EJAB-756).
* doc/guide.tex: Fix explanation of mod_muc's anonymous option. Make clear that an ejabberd_service can only serve a single external component. Provide Mnesia directory when setting clustering (thanks to Matthew Reilly)
Fix: provide the port as an integer, not string (EJAB-560)
* src/web/ejabberd_http.hrl: Provide Host, Port, Headers and Transfer Protocol in request (thanks to Eric Cestari)(EJAB-560) * src/web/ejabberd_http.erl: Likewise
* doc/guide.tex: Fix mod_proxy configuration example * doc/guide.html: Likewise
* ChangeLog update.
* src/odbc/mssql2000.sql: Script for MSSQL 2000 * src/odbc/mssql2005.sql: Script for MSSQL 2005 * src/odbc/mssql.sql: removed
Fix release date of ejabberd 2.0.2 to 28 August 2008
send last published events now supports PEP events from unavailable users nodes (EJAB-698)
* doc/release_notes_2.0.2.txt: Update for final release
get_items bugfix (EJAB-716)
Prevent case_clause error when ejabber_odbc:sql_query returns {error, Reason}
Prevent case_clause error when ejabber_odbc:sql_query returns {error, Reason}
* src/ejabberd_check.erl: Detect correctly MSSQL and ODBC configuration (EJAB-710)
EJAB-624: fixes mod_muc_room:is_visitor/2 to use get_role not get_affiliation
* src/ejabberd_router.erl: Fix call to mnesia match_object
* doc/guide.tex: Fix names of chatroom to room, user to occupant * doc/guide.html: Likewise
* src/mod_muc/mod_muc_log.erl: MUC log files options: plaintext format; filename with only room name (EJAB-596) * doc/guide.tex: Document both options * doc/guide.html: Likewise
* src/mod_register.erl: Change password using mod_register always returns success regardless of real result (EJAB-723) * src/ejabberd_auth.erl: Likewise * src/ejabberd_auth_external.erl: Likewise * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth_odbc.erl: Likewise
Fix call to unexported function nodetree_default:get_subnodes/2
Minor fixes in text about ejabberd localization
* contrib/extract_translations/extract_translations.erl: Use Gettext PO for translators, export to ejabberd MSG (EJAB-468) * contrib/extract_translations/prepare-translation.sh: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise * src/Makefile.in: New option 'make translations' * src/msgs/ejabberd.pot: Template translation file * src/msgs/*.po: Generated from old MSG files * src/msgs/*.msg: Automatic exported from PO files
* src/msgs/sv.msg: Fixed formatting typos
* src/gen_mod.erl: Export stop_module_keep_config/2 (EJAB-706)
* doc/guide.tex: Explain that LDAP is read-only storage (thanks to Evgeniy Khramtsov) * doc/guide.html: Likewise
fix contrib to ejabberd-modules trunk repository
* src/msgs/sk.msg: Updated (thanks to Marek Becka)
* src/msgs/eo.msg: Updated (thanks to Andreas van Cranenburgh) * src/msgs/nl.msg: Updated (thanks to Andreas van Cranenburgh) * src/msgs/sv.msg: Updated (thanks to Thore Alstromer and Heysan)
Retract from previous commit the code that checked the connection is attempted to a known served component (EJAB-717)
* src/ejabberd_service.erl: Fix XEP-0114 compliance: define xmlns in header of error response; check the connection is attempted to a served component; include in response the JID of served component not server (thanks to Sergei Golovan)
More precise ChangeLog for last commit.
Updated ChangeLog for previous commit.
* src/odbc/ejabberd_odbc.erl: Restart the database connection when it's lost or it reaches timeout. Set transaction isolation level to SERIALIZABLE when establishing connection.
* doc/release_notes_2.0.2.txt: Added for ejabberd 2.0.2-beta1
* src/web/ejabberd_http.erl: Temporary solution for check of packet size when HTTPS (EJAB-611)(EJAB-507)(EJAB-574)
* src/msgs/uk.msg: Fix: each string in a single line * src/msgs/wa.msg: Likewise
* README: Update location where mnesia, ebin and priv directories are installed; install headers and doc (EJAB-696)
* doc/guide.tex: Update Process-one name to ProcessOne (EJAB-708) * doc/guide.html: Likewise * doc/api/overview.edoc: Likewise * src/*/*.erl: Likewise * src/*/*.hrl: Likewise * src/*/*.c: Likewise * src/odbc/*.sql: Likewise
* src/mod_muc/mod_muc_room.erl: Support Reasons for all affiliation and role changes (EJAB-306)
* src/gen_mod.erl: When ejabberd is kindly stopped, don't forget modules configuration (EJAB-706) * src/ejabberd_app.erl: Likewise
* doc/guide.tex: Document how to get error message when ejabberd crash dumps at start (EJAB-660) * doc/guide.html: Likewise
Speedup startup with many pubsub nodes (EJAB-669)
* doc/guide.tex: Include example PAM configuration file ejabberd.pam (thanks to Evgeniy Khramtsov)(EJAB-704) * doc/guide.html: Likewise
* src/mod_proxy65/mod_proxy65_lib.erl: Send protocol compliant SOCKS5 reply; this breaks support of uncompliant Psi<0.10 (thanks to Felix Geyer)(EJAB-632) * src/mod_proxy65/mod_proxy65_stream.erl: Likewise
* src/mod_register.erl: When a registration is blocked due to IP limitation, return description in error stanza (EJAB-692)
allow owner to subscribe/get its one node (EJAB-705)
* doc/guide.tex: Document room options allow_visitor_nickchange and allow_visitor_status (EJAB-624) * doc/guide.html: Likewise
Altering XForms text for allow_visitor_status mod_muc_room option. (EJAB-624)
mod_muc_room allow_visitor_presence option rename (now allow_visitor_status). (EJAB-624)
Renaming allow_visitor_presence to allow_visitor_status (EJAB-624). allow_visitor_status when false will strip status message tags from visitor presence broadcasts in muc rooms.
Implementing muc_room visitor presence restrictions. (EJAB-624)
subscribing to a node sends only last items (EJAB-700), send_last_items bugfix
pubsub improvement, fixes EJAB-684 EJAB-675 EJAB-663
* src/ejabberd_config.erl: If syntax mistake in config file, show specific error message (EJAB-616)
* src/odbc/odbc_queries.erl: Fixed a typo
* src/ejabberd_ctl.erl: Call reopen_log_hook for each virtual host.
* src/mod_muc/mod_muc_room.erl: Fix to allow a server admin to add himself as owner of a room (EJAB-687)
use -DSSL39 if compiling with R12
* src/ejabberd_c2s.erl: Put auth_module in Info always (EJAB-549)
* src/*.hrl: Get back all ejabberd header files to their original placement in src/ subdirectories (EJAB-696) * src/*/*.erl: Likewise * src/*/Makefile.in: Likewise * src/Makefile.in: Install header files in system include/ dir, reproducing the subdirectory structure of src/
Rolled back the previous IP getting patch, and Report connection's IP address in ejabberd_http_poll
* src/ejabberdctl.template: Update environment variable names
* src/ejabberdctl.template: Small fix so arguments of the command are also passed to erl
* doc/guide.tex: Improve explanation of option 'hosts' in ejabberd_service * doc/guide.html: Likewise
Removed testing code
* doc/guide.tex: Update what permissions does enable-user grant * doc/guide.html: Likewise
* src/Makefile.in: Fix docdir so it recognizes prefix. If sbin dir does not exist, create it. Fix cookiefile permission check. (EJAB-696)
* src/configure.ac: Update installation permissions (EJAB-402) * src/configure: Likewise
Install ejabberdctl in /sbin as usual because it is a daemon, not a user program.
* src/configure.ac: Allow to execute ejabberd with a normal system user (thanks to Viq)(EJAB-402) * src/configure: Likewise * src/ejabberdctl.template: Likewise * src/Makefile.in: Likewise * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/configure.ac: Improve legibility * src/aclocal.m4: Likewise * src/configure: Likewise
* src/mod_register.erl: Revert support for io_lib newline, since there is a standard character that representes newline (EJAB-501) * doc/guide.tex: Update documentation to explain newline character * doc/guide.html: Likewise * src/ejabberd.cfg.example: Likewise
* src/configure.ac: Don't check for erlang header file (EJAB-232) * src/configure: Likewise
* src/configure.ac: Check for erlang header files (EJAB-232) * src/configure: Likewise
* src/mod_pubsub/mod_pubsub.erl: Fix compilation warnings * src/mod_pubsub/node_zoo.erl: Likewise * src/mod_shared_roster.erl: Likewise
* src/mod_shared_roster.erl: Allow to get subscribed to a contact that is already in the roster by means of a shared roster group: add it to another roster group and it gets subscribed automatically (EJAB-407) * src/mod_roster.erl: Likewise
* src/mod_muc/mod_muc_log.erl: Fix XHTML compliance: ensure some language is set, include ID attribute in each message, add microseconds to ensure unique value (EJAB-497)
* src/mod_register.erl: Support for io_lib newline character in the body of welcome_message (EJAB-501) * doc/guide.tex: Document the newline character * src/ejabberd.cfg.example: Example usage of newline character
* src/ejabberd_config.erl (load_file): error message on sasl.log is not flattened (EJAB-616)
* doc/guide.tex: mod_muc_log XMPP URI supports the updated version RFC 5122 (EJAB-631) * doc/guide.html: Likewise
* tools/ejabberdctl: Work also when 'which' is unavailable
typo fix
improve ip fetching patch
* src/Makefile.in: Spool, config and log dirs: writtable by owner, readable by group, nothing by others (EJAB-686) * doc/guide.tex: New section Securing sensible files * doc/guide.html: Likewise
* doc/guide.tex: Solaris Makefile install: use ginstall (thanks to Jonathan Auer)(EJAB-649) * doc/guide.html: Likewise
Removed non ascii characters in changelog
* src/mod_privacy_odbc.erl: Support for privacy lists in MySQL (thanks to Igor Goryachev)(EJAB-538)
PubSub improvements, and solves (EJAB-453) (EJAB-608)
* src/ejabberd_ctl.erl: Web Admin and Ad-hoc admin: dump only persistent tables (EJAB-678)
* src/mod_pubsub/node_pep.erl: Complain if mod_caps disabled and mod_pubsub has PEP plugin enabled (EJAB-677)
* src/mod_muc/mod_muc_room.erl: Allow to store room description (thanks to Christopher Dupont)(EJAB-670)
* src/web/ejabberd_http.erl: Support PUT and DELETE methods in ejabberd_http (thanks to Eric Cestari)(EJAB-662)
* doc/guide.tex: Explain that S2S outgoing first tries IPv4 and if that fails then tries IPv6 * doc/guide.html: Likewise
allow get_default on PEP nodes (EJAB-656)
* src/ejabberd.app: The ejabberd version number is defined in the OTP application resource file, in the key 'vsn' (EJAB-657) * src/ejabberd.hrl: The macro VERSION now consults the ejabberd application key vsn * src/configure.erl: Load the ejabberd application description * doc/Makefile: Read ejabberd version from ejabberd.app vsn * doc/api/Makefile: Likewise
temporary roster_groups_allowed (EJAB-655)
pubsub get_default bugfix (EJAB-656)
* src/mod_muc/mod_muc_room.erl: Allow admins to send messages to rooms even if not joined (EJAB-645) * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/ejabberd.cfg.example: Add registration_timeout (EJAB-653)
* doc/guide.tex: Title in HTML is shorter. Update several external URIs.
* doc/guide.tex: Document ldap_local_filter (EJAB-179)
* doc/guide.tex: Table of listener modules converted to description. Table of modules overview simplified, and module names link to their sections. * doc/guide.html: Regenerated with all the latest changes
* doc/guide.tex: Fix indentation of verbatim text
* doc/guide.tex: Changes in CSS: verbatim text is indented and has grey background; descriptions are indented; table borders are softer.
* doc/guide.tex: Permanent reference URL for sections (EJAB-651)
* src/ejabberd_c2s.erl: Bugfix: deliver messages when first presence is Invisible (thanks to Dariusz Markowicz)(EJAB-262)
* doc/guide.tex: Small fixes (thanks to Christoph Anton Mitterer) * doc/introduction.tex: Likewise * doc/guide.html: Likewise
* doc/guide.tex: Document ejabberdctl status code (EJAB-633) * doc/guide.html: Likewise
* src/msgs/pl.msg: Bugfix in arguments of translated string that could crash the room (thanks to Anastasia Gornostaeva)
* src/web/ejabberd_web.erl (make_xhtml/2): Allow to include elements in the HTTP header
* src/odbc/odbc_queries.erl (del_user_return_password): Return password (thanks to Oleg Palij)
* src/ejabberd_s2s.erl: Added s2s_send_packet and s2s_receive_packet hooks (EJAB-635). * src/ejabberd_s2s_in.erl: Likewise.
* src/ejabberd_c2s.erl: user_send_packet hook now called on all packets including presence packets (EJAB-634)
* README: R12 support: remove compilation warning (EJAB-630)
add release_notes_2.0.1
add release_notes_2.0.1
* doc/guide.html: Update
* src/configure.ac: R12 support: remove compilation warning (EJAB-630) * src/configure: Likewise * doc/guide.tex: Likewise
* doc/guide.tex: Describe how to disable registration limitation (EJAB-614)
* src/ejabberd_s2s_out.erl: Fix compilation error.
* src/ejabberd_s2s_out.erl: Avoid an harmless error (function clause in logs)
* src/extauth.erl: Log strange responses from extauth script. Use timeout (EJAB-627)
* src/mod_muc/mod_muc_room.erl: Allow change_state of a room
Change FSMTIMEOUT to 30s
* src/mod_muc/mod_muc_room.erl: Return Forbidden error message when user sends private message in a room that disallows it (EJAB-595)
* src/web/ejabberd_http.erl (parse_auth): Allow password that include colon character (EJAB-522)
* src/mod_ip_blacklist.erl: Better error handling (EJAB-625).
* src/mod_ip_blacklist.erl: ignore when we do not have the IP.
* src/mod_ip_blacklist.erl: Update the list every 6 hours.
* src/mod_ip_blacklist.erl: Added C2S blacklist support (EJAB-625).
* src/ejabberd_c2s.erl: Added C2S blacklist support (EJAB-625). * src/mod_ip_blacklist.erl: Likewise. * src/jlib.erl: Added IP format tuple to string function. * src/ejabberd_socket.erl: Properly handled c2s start failure (happen for blacklisted IP).
* src/ejabberd_receiver.erl: Don't activate a socket untill its receiver process is controlling it
XEP-0115 patch (EJAB-618)
* src/ejabberd_s2s_out.erl: Improve confusing log message in s2s connection: wait_for_validation connect timeout (EJAB-617)
* src/ejabberd.cfg.example: Small improvements in explanations
* doc/guide.tex: Document the option max_s2s_connections
remove unused served_hosts option
* src/mod_muc/mod_muc_room.erl: Fixed room shaper processing
* src/mod_shared_roster.erl: Fix for new registered accounts not being immediately shown in an 'all' special shared roster group (thanks to Alexey Shchepin) (EJAB-71) * src/mod_register.erl: New vhost event user_registered
* doc/guide.tex: Document option registration_timeout (EJAB-614)
* src/ejabberd_c2s.erl: Added forbidden_session_hook
* src/treap.erl: Bugfix
* src/mod_register.erl: Restrict registration frequency per IP or user * src/ejabberd_c2s.erl: Pass IP to the c2s_unauthenticated_iq hook * src/ejabberd_config.erl: Added registration_timeout option * src/treap.erl: Treaps implementation
* src/ejabberd_auth.erl: Improve anonymous authentication to not remove rosters accidentally (EJAB-549). New functions in ejabberd_auth to get/check password and know which module accepted the authentication. New element 'auth_module' in ejabberd_c2s record 'statedata'. Cyrsasl provides a new property in the response: {auth_module, AuthModule}. * src/ejabberd_auth_anonymous.erl: Likewise * src/ejabberd_c2s.erl: Likewise * src/cyrsasl_anonymous.erl: Likewise * src/cyrsasl_digest.erl: Likewise * src/cyrsasl_plain.erl: Likewise
* src/ejabberd_s2s_out.erl: Fix long timeout when reconnecting s2s after a remote server crash (EJAB-540) * src/ejabberd_s2s_in.erl: Likewise * src/ejabberd_s2s.erl: Likewise * doc/guide.tex: Likewise
* doc/guide.tex: Clarification: PEP is enabled in default config
Cache negative response (EJAB-474)
* src/web/ejabberd_web_admin.erl: Include Last-Modified HTTP header in responses to allow caching (EJAB-546)
* src/Makefile.in: Improved indentation of GCC call * src/ejabberd_zlib/Makefile.in: Likewise * src/mod_irc/Makefile.in: Likewise * src/stringprep/Makefile.in: Likewise * src/tls/Makefile.in: Likewise
* src/ejabberd_listener.erl (start_listener): Revert SVN r1260.
Merge SVN r1287 from trunk to 2.0.x branch:
* src/ejabberd_config.erl: Removed a dependency on string:to_upper
* src/tls/tls_drv.c: Fixed gcc signedness warnings * src/ejabberd_zlib/ejabberd_zlib_drv.c: Likewise
* src/expat_erl.c: Removed R9B workaround
pubsub identity and database update bugfix
* Changelog: typo.
*src/ejabberd_c2s.erl: Uniform default value for empty privacy list. Fixes (EJAB-603).
* src/ejabberd_auth_ldap.erl: LDAP function to get the number of registered users is too slow (EJAB-331): set timeout in LDAP search queries (thanks to Evgeniy Khramtsov) and return the number of registered users.
* doc/guide.tex: Documented the IQ discipline {queue, N}. * doc/guide.html: Likewise.
* doc/guide.tex: Fix default_room_opts with default_room_options * doc/guide.html: Likewise
* src/ejabberd_auth_ldap.erl (get_vh_registered_users_number): New function that returns 0 registered users (EJAB-331).
* src/ejabberd_c2s.erl (process_presence_probe): Don't route a presence probe to oneself (EJAB-498)
Created ejabberd 2.1.X branch.
* src/ejabberd_config.erl: Add support to include additional configuration files. Add support for macro definition and usage. (EJAB-593) * doc/guide.tex: Likewise * doc/guide.html: Likewise
Do not ignore values passed from configure (EJAB-592)
add condition inclusion of pep in disco identity (EJAB-564)
* doc/guide.tex: Updated command line parameters, epmd section * doc/guide.html: Likewise
typo fix on ejabberdctl.template
* doc/api/Makefile: Report the correct ejabberd version. When cleaning, remove also erlang.png
Add firewalling port range definition
* src/ejabberd_listener.erl: Remove code of the unused listening socket option 'ssl' (EJAB-159) * src/ejabberd_app.erl: Likewise
* doc/webadmmain.png: Updated to ejabberd 2.0.0 * doc/webadmmainru.png: Likewise
* src/ejabberd_listener.erl (start_listener): Start also the supervisor of the module
* doc/guide.tex: Fix epam location (thanks to Evgeniy Khramtsov) * doc/guide.html: Likewise
* src/Makefile.in: Support for parallel compilation with 'make -j' in multi core CPUs: fix compilation dependencies; compile behaviors before other source code. (thanks to Jonathan Schleifer) * src/mod_pubsub/Makefile.in: Likewise * src/eldap/Makefile.in: Likewise
* src/ejabberd_local.erl: The iq_response table wasn't cloned automatically on all nodes which resulted in a single point of failure
* src/Makefile.in: Only try to install epam if pam was enabled in configure script (thanks to Etan Reisner)(EJAB-586)
* src/Makefile.in: Failure to install epam is not critical (EJAB-573)
* doc/guide.tex: mod_vcard_ldap replace NICK with NICKNAME (thanks to Andreas Ntaflos) * doc/guide.html: Likewise
* src/msgs/de.msg: Fix irc typo (thanks to Jonathan Schleifer) * src/msgs/cs.msg: Likewise * src/msgs/pl.msg: Likewise * src/msgs/sk.msg: Likewise
SVN Revision: 1252
SVN Revision: 1251
* src/eldap/Makefile.in: Generate ELDAPv3.beam during first Makefile pass (EJAB-583).
* doc/guide.tex: Document service_check_from (EJAB-576) * doc/guide.html: Likewise
* src/mod_caps.erl: Move two log calls ERROR_MSG to DEBUG * src/shaper.erl: Move log call INFO_MSG to DEBUG
* doc/guide.tex: Document s2s_default_policy and s2s_host (EJAB-575) * doc/guide.html: Likewise
Pubsub subscription is now wrapped in pubsub tags (EJAB-580)
Seek epam binary into priv/bin (EJAB-573)
Rewrite io:format calls to loglevel macros (EJAB-555)
* doc/guide.tex: Improve explanation of how to start ejabberd when binary installer. Don't recommend R12 in Windows compilation. Describe what happens if maxrate shaper is exceeded. * doc/guide.html: Likewise
* src/eldap.erl: Improved logging. We now use ejabberd logging framework (EJAB-582). * src/eldap.erl: Faster LDAP reconnection (Thanks to Christophe Romain) (EJAB-581)
* src/ejabberd_s2s.erl: Only trigger s2s_connect_hook on successful connection (EJAB-566) * src/ejabberd_s2s_out.erl: Likewise
* src/ejabberd_ctl.erl: API improvement: Added reopen_log_hook (EJAB-565)
* src/ejabberd_s2s.erl: API improvement: Added s2s_connect_hook (EJAB-566).
* src/odbc/ejabberd_odbc.erl: Start ODBC explicitely because Erlang R12 doesn't start automatically like in R11 and older (thanks to Sergei Golovan)(EJAB-541)
* src/ejabberd.hrl: Removed unused ejabberd_debug and PRIVACY_SUPPORT. Reordered the remaining options
* doc/guide.tex: Describe option Matches in mod_vcard_ldap (thanks to Evgeniy Khramtsov)(EJAB-530).  Fix typo in the description of ldap_server option. * doc/guide.html: Likewise
* src/mod_echo.erl: Small change to avoid a compilation warning of unused function
* src/web/ejabberd_web_admin.erl (term_to_string): Show Erlang terms in one line in Erlang R12 (EJAB-503)
* src/ejabberd_s2s_in.erl (get_cert_domains): When compiling with Erlang R12, replace the calls to deprecated module PKIX1Explicit88 with OTP-PKIX (EJAB-556)
* src/ejabberd_update.erl: Fix crash when browsing the Update page in Erlang R12 (EJAB-552)
SVN Revision: 1224
* src/web/ejabberd_http_poll.erl: Fixed HTTP headers when a requested session doesn't exist
* src/mod_proxy65/mod_proxy65_service.erl: Implement alternative to the deprecated function inet:ip_to_bytes (thanks to Evgeniy Khramtsov)(EJAB-542)
add missing ~p to error message
* src/eldap/eldap_pool.erl: Improved logging
* doc/guide.tex: Improve documentation of host_config add (EJAB-544) * doc/guide.html: Likewise * src/ejabberd.cfg.example: Likewise * src/ejabberd_config.erl: Likewise
* doc/guide.tex: mod_announce recommends, but doesn't require mod_adhoc (thanks to Anastasia Gornostaeva) * doc/guide.html: Likewise * src/ejabberd.cfg.example: Likewise
* src/tls/tls.erl: recv_data/2 doesn't throw exceptions now * src/ejabberd_zlib/ejabberd_zlib.erl: Likewise
* src/ejabberd_check.erl: Fixed missing clause (EJAB-533).
* src/mod_roster.erl: Fixed "from" attribute in roster pushes * src/mod_roster_odbc.erl: Likewise
* src/ejabberd_app.erl (prep_stop): Stop modules when stopping ejabberd (EJAB-536) * src/mod_caps.erl (stop): Probably not needed to stop supervisor child (EJAB-536) * src/mod_muc/mod_muc.erl (room_destroyed): Catch message sending (EJAB-536) * src/mod_muc/mod_muc_room.erl (init): Ensure rooms are called when the process dies due to a linked die (EJAB-536)
* src/ejabberd_check.erl: Separate config loading from configuration sanity checks (EJAB-533) * src/src/ejabberd_app.erl: Likewise * src/ejabberd_app.erl: Likewise
* src/msgs/it.msg: Updated (thanks to Smart2128)
* doc/release_notes_2.0.0.txt: Small fixes and update date
* README: Updated to match the content of the ejabberd Guide
* doc/release_notes_2.0.0.txt: Updated version number and date
* doc/guide.tex: Mentioned the problems about Windows service * doc/guide.html: Likewise
* src/msgs/ru.msg: Updated (thanks to Konstantin Khomoutov) * src/msgs/zh.msg: Updated (thanks to Mike Wang and Zhan Caibao)
* src/msgs/ca.msg: Updated (thanks to Vicent Alberola Canet) * src/msgs/cs.msg: Updated (thanks to Lukas Polivka) * src/msgs/de.msg: Updated (thanks to Cord Beermann and Nikolaus Polak) * src/msgs/eo.msg: Updated (thanks to Andreas van Cranenburgh) * src/msgs/es.msg: Updated * src/msgs/fr.msg: Updated (thanks to Christophe Romain) * src/msgs/gl.msg: Updated (thanks to Carlos E. Lopez) * src/msgs/nl.msg: Updated (thanks to Andreas van Cranenburgh) * src/msgs/no.msg: Updated (thanks to Stian B. Barmen) * src/msgs/pt-br.msg: Updated (thanks to Otavio Fernandes) * src/msgs/uk.msg: Updated (thanks to Stoune and Ruslan Rakhmanin)
add pgsql driver monitoring
* src/ejabberd_config.erl: dirty_get_registered_users now correctly returns all users for all vhosts no matter which back-end is used (EJAB-527) * src/ejabberd_auth_odbc.erl: Likewise * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth.erl: Likewise * src/ejabberd_auth_external.erl: Likewise * src/ejabberd_auth_ldap.erl: Likewise
Bug in get_conn_type since SVN r1194 crashes http-bind and http-poll (thanks to Brian Cully) (EJAB-526)
* doc/release_notes_2.0.0.txt: Describe in the Release Notes the upgrade instructions (EJAB-522)
Retreive connection type in sm_register_connection_hook
* src/mod_muc/mod_muc_room.erl: Allow unmoderated rooms (EJAB-437) * src/msgs/*: Recover old translations to several languages from ejabberd 1.1.4
* src/cyrsasl_digest.erl: Unquote backslash in DIGEST-MD5 quoted strings (EJAB-304)
* src/mod_roster.erl: Removed the ancient Psi roster workaround * src/mod_roster_odbc.erl: Likewise
* odbc_queries: fix list_users queries with limit/offset.
* odbc_queries: fix list_users query with prefix.
* src/web/ejabberd_web_admin.erl: Fixed native support for all the ACL types (EJAB-253)
* src/acl.erl: Normalize ACL before adding to the configuration tables (EJAB-521)
* Changelog: Forgotten commit.
* src/ejabberd_auth.erl: Do not allow empty password at creation. On authent, check in all cases that password is not empty. * src/ejabberd_auth_odbc.erl: Likewise * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth_external.erl: Likewise
* src/ejabberd_receiver.erl: Avoid crash to appear in log, when trying to close a stream with an undefined state.
use if event instead of x when xmlns is pubsub#event (EJAB-518)
* src/mod_muc/mod_muc_room.erl: Bugfix: local message stanza may not have an attribute From (EJAB-515)
* src/mod_muc/mod_muc_room.erl: Include the error condition in the presence status when kicking a participant due to an error stanza (EJAB-496)
* src/ejabberd.cfg.example: Document options to SQL keep alive interval and pool size (EJAB-206) * doc/guide.tex: Likewise * doc/guide.html: Likewise
* src/mod_pubsub/node.template: Fixed typo
* src/mod_muc/mod_muc_room.erl: Support for decline of invitation to MUC room (EJAB-515)
* src/mod_pubsub/node_buddy.erl: Fixed typo * src/mod_pubsub/node_club.erl: Likewise * src/mod_pubsub/node_dispatch.erl: Likewise * src/mod_pubsub/node_pep.erl: Likewise * src/mod_pubsub/node_private.erl: Likewise
* src/mod_pubsub/gen_pubsub_node.erl: API improvement: Added a way to generate custom item name * src/mod_pubsub/node_dispatch.erl: Likewise * src/mod_pubsub/node_buddy.erl: Likewise * src/mod_pubsub/node_private.erl: Likewise * src/mod_pubsub/node_club.erl: Likewise * src/mod_pubsub/node_public.erl: Likewise * src/mod_pubsub/node_default.erl: Likewise * src/mod_pubsub/node_pep.erl: Likewise * src/mod_pubsub/mod_pubsub.erl: Small API improvements and refactoring
* src/ejabberd.hrl: Updated version to 2.1.0-alpha * doc/dev.html: Likewise * doc/features.html: Likewise * doc/guide.html: Likewise * doc/version.tex: Likewise
* src/mod_muc/mod_muc_room.erl: Append "(n/a)" to disco room descriptions when a number of occupants is not available
* src/mod_pubsub/nodetree_virtual.erl: Fixed error report at startup.
* src/mod_pubsub/mod_pubsub.erl: Added the from field in the get_subnodes pubsub plugin API function. This is usefull to write plugins to generate the pubsub hierarchy dynamically, based on who is doing the browsing request. * src/mod_pubsub/gen_pubsub_nodetree.erl: Likewise * src/mod_pubsub/nodetree_default.erl: Likewise * src/mod_pubsub/nodetree_virtual.erl: Likewise
* doc/guide.tex: Removed the option served_hosts in mod_pubsub because it does not work correctly yet (EJAB-504) * doc/guide.html: Likewise
* src/mod_echo.erl: Put in comments the call to the educational function do_client_version
* src/mod_muc/mod_muc_room.erl: MUC kicks a participant if sends a private message with type=error (EJAB-496). Updated.
* src/mod_muc/mod_muc_room.erl: MUC kicks a participant if sends a private message with type=error (EJAB-496)
* doc/introduction.tex: Updated list of languages * doc/release_notes_2.0.0.txt: Likewise
* src/msgs/eo.msg: New Esperanto translation (thanks to Andreas van Cranenburgh)
pubsub dirty_sync typo fix on node configuration transaction
pubsub configuration patch (EJAB-508) and (EJAB-509)
* doc/guide.tex: Updated the names of log files. * doc/guide.html: Likewise
* doc/guide.tex: Improved the documentation of Binary installer. Updated the requirements, specifically: Erlang R10B-9 is required as minimum, and R12 is not yet supported. Added section Upgrading ejabberd. Improved documentation about Erlang runtime system environment variables and command-line parameters. * doc/guide.html: Likewise
* doc/guide.tex: Updated copyright dates to 2008 * src/*: Likewise
Merge changesets 1150 and 1151 into branch ejabberd-2.0.x: * src/Makefile.in: Allow compilation with Erlang R12 (EJAB-446) (thanks to Sergei Golovan and Maxim Treskin). Erlang R12 version is not supported and not recommended for production servers. * src/aclocal.m4: Likewise * src/configure.ac: Likewise * src/configure: Likewise * src/ejabberd_s2s_in.erl: Likewise
* ChangeLog: Update for Erlang R12 compilation (EJAB-446).
* src/Makefile.in: Allow compilation with Erlang R12 (EJAB-446). * src/aclocal.m4: Likewise * src/configure.ac: Likewise * src/configure: Likewise * src/ejabberd_s2s_in.erl: Likewise
* src/ejabberdctl.template: Instead of using the Erlang kernel variable 'inetrc', use the ERL_INETRC environment variable that is available since Erlang/OTP R10B-5.
set_subscription fix (EJAB-494)
don't ask capabilities to MUC room participants
EJAB-491 fix
Force PEP parent node to be []
Send last published PEP event now checks the correct peer caps (EJAB-491)
* src/mod_muc/mod_muc_room.erl: MUC kicks a participant if sends a private message with type=error (EJAB-496)
* src/ejabberdctl.template: Removed the option ERL_FULLSWEEP_AFTER because it is almost useless regarding ejabberd's performance. * src/ejabberdctl.cfg.example: Likewise
fix version.tex generation bug
* src/web/ejabberd_web_admin.erl: Uniformize the name of ejabberd's web admin to: 'Web Admin' (EjAB-472) * doc/guide.tex: Likewise * doc/introduction.tex: Likewise
* src/mod_muc/mod_muc_room.erl: Resend 'continue' elements in muc room invitations (EJAB-490)
* src/ejabberdctl.template: Create logs_dir if doesn't exist. New parameters --config, --ctl-config, --logs, --spool. Crash dump renamed to erl_crash_DATETIME.dump.
* src/msgs/ca.msg: Updated (thanks to Vicent Alberola Canet)
* src/ejabberd_s2s_out.erl: Fixed behavior when outgoing_s2s_port option is not defined (EJAB-487)
* src/ejabberd_s2s_out.erl: Fixed behavior when outgoing_s2s_port option is not defined
* src/mod_vcard_ldap.erl: Fix some field names (EJAB-483)
* src/web/ejabberd_web_admin.erl: Translate menu items of webadmin hooks in each module (EJAB-485) * src/mod_shared_roster.erl: Likewise
* src/web/ejabberd_web_admin.erl: max_user_sessions access rule contains an integer, but webadmin always expects atoms (EJAB-482)
* src/mod_configure.erl: Bugfix, update to match changes in mod_announce SVN r1099
* doc/release_notes_2.0.0.txt: minor fix.
* doc/release_notes_2.0.0.txt: Small fix.
* doc/release_notes_2.0.0.txt: Small fixes.
* Applied copyright patch 3.
* applied copyright patch 2.
* Fixed typo.
* Applied copyright update patch 1.
pubsub: remove useless get_roster_info call
* doc/release_notes_2.0.0.txt: Fix on number of supported languages.
* doc/release_notes_2.0.0.txt: ejabberd 2.0.0 beta 1 release notes.
* doc/release_notes_2.0.0.txt: Fixes and update.
* src/msgs/vi.msg: New Vietnamese translation (thanks to EQHO Communications)
* src/mod_muc/mod_muc_room.erl: Log room creation and destruction. Ensure JID of owners of MUC room are user, not server (EJAB-435)
* src/ejabberd.app: Update ejabberd.app: add new erlang modules (EJAB-466)
* doc/introduction.tex: Small updates
* src/web/ejabberd_http.erl: Add 'http_bind' option for easy configuration of HTTP-Binding
* src/mod_announce.erl: When editing MOTD, display current value (EJAB-475)
* src/mod_announce.erl: Fixed unnoticeable bug related to Node matching. Renamed some nonstandard node names according to XEP-0133. Small reordering of clauses.
debug log fix
EJAB-469 bugfix
several pubsub/pep bugfix
* src/mod_caps.erl: Bugfix in timeout checking. Check for timeout when an error response is received, and also before querying
* src/ejabberd_ctl.erl: Added new command: mnesia (thanks to Tsukasa Hamano)
* doc/release_nodes_2.0.0.txt: release notes draft (still a work in progress).
Small bugfix.
fix ejabberd_modules includes
* src/msgs/fr.msg: Updated French translation (EJAB-295)
pubsub disco#items bugfix (EJAB-465)
* src/msgs/uk.msg: Updated (thanks to Ruslan Rakhmanin)
* src/mod_caps.erl: Don't include the Node attribute from C element in the disco#info query
User count performance improvements
PEP notification bugfix
Explain how to launch installer and improve ejabberdctl usage example (EJAB-420)
* src/msgs/zh.msg: Small update (thanks to Shelley Shyan)
Fixed small mistake.
* src/msgs/pl.msg: Updated (thanks to Andrzej Smyk)(EJAB-463)
* src/mod_muc/mod_muc_log.erl: Add handling of kicks 321, 322, 332
* doc/guide.tex: Document mod_privacy_odbc
* doc/Makefile: Support for conditional inclusion of documentation from contributed modules * doc/guide.tex: Likewise
Purge related pep nodes at remove_user
* src/ejabberd_zlib/Makefile.win32: Compile all erl files found in the directory, so it isn't needed to provide an explicit list of target files * src/eldap/Makefile.win32: Likewise * src/mod_irc/Makefile.win32: Likewise * src/mod_muc/Makefile.win32: Likewise * src/mod_proxy65/Makefile.win32: Likewise * src/mod_pubsub/Makefile.win32: Likewise * src/odbc/Makefile.win32: Likewise * src/stringprep/Makefile.win32: Likewise * src/tls/Makefile.win32: Likewise * src/web/Makefile.win32: Likewise
* src/ejabberd_zlib/Makefile.in: Compile all erl files found in the directory, so it isn't needed to provide an explicit list of target files * src/eldap/Makefile.in: Likewise * src/mod_irc/Makefile.in: Likewise * src/mod_muc/Makefile.in: Likewise * src/mod_proxy65/Makefile.in: Likewise * src/mod_pubsub/Makefile.in: Likewise * src/odbc/Makefile.in: Likewise * src/pam/Makefile.in: Likewise * src/stringprep/Makefile.in: Likewise * src/tls/Makefile.in: Likewise * src/web/Makefile.in: Likewise
mssql specific issue bugfix
* doc/guide.tex: Remove 'ssl' option from documentation and configuration load (EJAB-461) * src/ejabberd_listener.erl: Likewise
* src/mod_irc/iconv.erl: Changed order of handle_info clause (EJAB-290) * src/stringprep/stringprep.erl: Likesise
* src/mod_irc/mod_irc.erl: No need to translate copyright notice * src/mod_muc/mod_muc.erl: Likewise * src/mod_proxy65/mod_proxy65_service.erl: Likewise * src/mod_pubsub/mod_pubsub.erl: Likewise * src/mod_vcard.erl: Likewise * src/mod_vcard_ldap.erl: Likewise * src/mod_vcard_odbc.erl: Likewise * src/msgs/*.msg: Likewise
* src/msgs/*: Unified file format: First line is SVN Id tag. Second is Language name. Next lines are authors, adding the new ones on top. Each string must be in a single line (to facilitate the automatic removal of unused strings). Last four lines report file format for Emacs and Vim.
* src/ejabberd_s2s_out.erl: Bugfix
pubsub presence handler bugfix
* src/msgs/it.msg: Updated (thanks to Luca Brivio)
first patch to mssql quety, still one patch to be done
pubsub notification broadcast bugfix
* src/msgs/tr.msg: New translation (thanks to Doruk Fisek)
* src/msgs/ja.msg: Updated (thanks to Tsukasa Hamano)
* doc/guide.tex: Small improvement in mod_shared_roster
* src/mod_irc/mod_irc.erl: Bugfix in ACL check (thanks to Sergei Golovan)
auto-create pe node bugfix
return back to good location for database upgrade call
pubsub database upgrade bugfix
* src/web/ejabberd_http.erl: Fixed URL decoding code (EJAB-450)
* src/msg/fr.msg: Added missing space.
* src/msgs/ru.msg: Updated (thanks to Konstantin Khomoutov)
* src/msgs/ja.msg: New translation (thanks to Tsukasa Hamano)
* src/ejabberd_config.erl: Report human-readable message when Mnesia spool files are not readable.
* src/ejabberd_s2s_out.erl: Increase dialback timeout as dialback can sometimes take longer than expected.
pubsub disco_sm_items bugfix
* src/ejabberd_sm.erl: Bugfix
* src/Makefile.in: Fix compilation warnings: Part 5: To fix a warning about behaviour undefined, the erlang module that implements the behaviour must be compiled before the module that uses such behaviour (EJAB-290)
* src/eldap/eldap.erl: Fix compilation warnings: Part 4 (EJAB-290) * src/web/ejabberd_web_admin.erl: Likewise
* src/mod_irc/iconv.erl: Fix compilation warnings: 3 (EJAB-290) * src/mod_irc/mod_irc.erl: Likewise * src/mod_irc/mod_irc_connection.erl: Likewise * src/mod_pubsub/mod_pubsub.erl: Likewise * src/stringprep/stringprep.erl: Likewise * src/web/ejabberd_http.erl: Likewise * src/web/ejabberd_http_poll.erl: Likewise
* src/mod_caps.erl: Fix compilation warnings: Part 2 (EJAB-290) * src/mod_configure.erl: * src/mod_configure2.erl: * src/mod_offline_odbc.erl: * src/mod_shared_roster.erl: * src/mod_stats.erl: * src/mod_version.erl:
* src/cyrsasl.erl: Fix compilation warnings: Part 1 (EJAB-290) * src/ejabberd_auth_odbc.erl: Likewise * src/ejabberd_config.erl: Likewise * src/ejabberd_hooks.erl: Likewise * src/ejabberd_s2s_out.erl: Likewise * src/ejabberd_sm.erl: Likewise * src/idna.erl: Likewise * src/jd2ejd.erl: Likewise
* src/acl.erl and other 64 files: Remove Erlang module attribute 'vsn' because it doesn't provide any worth feature, and it difficults hot code update (EJAB-440)
* src/ejabberdctl.cfg.example: Explain that each connection uses two or three ports (thanks to Max Loparyev)
* src/configure: Regenerated * doc/dev.html: Likewise * doc/features.html: Likewise * doc/guide.html: Likewise * doc/version.tex: Likewise
* src/web/ejabberd_web_admin.erl: Support more native acl_type on web interface (EJAB-253)
* src/ejabberd_c2s.erl: Increase the timeout of open socket without authentication to 60 seconds because many Jabber clients are not yet capable of handling this correctly (EJAB-355)
* src/Makefile.in: Allow compilation with HiPE, disabled by default, undocumented and unrecommended because it is experimental and doesn't seem to provide meaningful gains currently (thanks to Samuel Tardieu) (EJAB-412) * src/configure.ac: Likewise
* src/Makefile.in: Allow compilation with HiPE (EJAB-412) * src/configure.ac: Likewise
* src/msgs/cs.msg: Updated (thanks to Lukáš Polívka alias Spike411)
* src/mod_muc/mod_muc.erl: Catch creation of table muc_online_users: it may be already created by other mod_muc instance
* doc/Makefile: Remove bashism (now really committed)
* doc/Makefile: Remove bashism
* src/web/ejabberd_http.erl: Change loglevel for http queries (EJAB-363) * src/web/ejabberd_web_admin.erl: Likewise
* doc/guide.tex: Add mod_caps and improve mod_pubsub documentation * src/ejabberd.cfg.example: Added mod_caps enabled by default
enable pep by default and add pubsub plugin examples
* doc/guide.tex: Document the Debug Console (EJAB-395)
* src/ejabberdctl.template: The parameter 'kernel inetrc' is used even with -sname to guarantee the same behaviour that when using -name (EJAB-317)
* doc/guide.tex: Improvements in sections: Start, Creating Initial Account, Module Overview, Managing an ejabberd server, and Debugging
* doc/guide.tex: Added explanations about epmd, cookie and node name (EJAB-251)
* src/msgs/zh.msg: Updated (thanks to Shelley Shyan)
* src/mod_muc/mod_muc_room.erl: Rephrase the invitation sentence to make more natural
* src/msgs/es.msg: Updated
* src/ejabberd.hrl: Set more proper version number
* contrib/extract_translations/extract_translations.erl: Don't report [] to be translated. Identify unusued strings.
* .gitignore: Removed (EJAB-441) * src/.cvsignore: Likewise
* src/mod_pubsub/mod_pubsub.erl: Fixed URI.
* src/mod_pubsub/mod_pubsub.erl: Bugfix: don't report the Jabber server as a pubsub service.
* ChangeLog: Fix conflict.
* ChangeLog: Update.
* src/mod_muc.erl: Added option to limit the number of room a user is allowed to connect to (EJAB-445). * src/mod_muc_room.erl: Likewise. * doc/guide.tex: Likewise.
* Temporary commit.
* src/ejabberdctl.cfg.example: Bugfix in kernel poll. Added SMP option. Reorganization of options * src/ejabberdctl.template: Added SMP option
* src/Makefile.in: New options make uninstall and uninstall-all (EJAB-293)
* doc/*.html: Rebuild.
* doc/Makefile: echo seems to interpret \n and \v under MacOSX Leopard. I fixed the problem but let me know if it breaks build chain in other contexts.
* ChangeLog: Updated.
* doc/guide.tex: Updated Windows compilation instructions. * src/configure.erl: Likewise. * doc/ejabberd.hrl: Preparing ejabberd 2.0.0 beta release. * doc/version.tex: Likewise.
* src/tls/Makefile.win32: Updated for latest Win32 OpenSSL library.
* src/odbc_queries.erl: Added a default define value so that we can recompile the file manually with a simple erlc command (with the default generic value).
* src/mod_pubsub/Makefile.in: Removed mod_pubsub_old mentioning * src/mod_pubsub/Makefile.win32: Likewise
* src/odbc/odbc_queries.erl: Reverted the previous patch because it produces "redefining macro 'generic'" compilation error
* src/mod_caps.erl: CAPS support (thanks to Magnus Henoch) * src/ejabberd_local.erl: Support for IQ responses * src/jlib.erl: Added iq_query_or_response_info/1 function * src/jlib.hrl: Added NS_PUBSUB_ERRORS and NS_CAPS
* src/odbc_queries.erl: Added a default define value so that we can recompile the file manually with a simple erlc command.
* src/mod_vcard.erl: Add type of x:data field to search results (thanks to Robin Redeker) (EJAB-327) * src/mod_vcard_ldap.erl: * src/mod_vcard_odbc.erl:
* src/aclocal.m4: Fix autoconf caching for SSL libraries (thanks to Michael Shields) (EJAB-439)
* src/configure.ac: Don't hardcode gcc and options (EJAB-436) * src/Makefile.in: * src/ejabberd_zlib/Makefile.in: * src/eldap/Makefile.in: * src/mod_irc/Makefile.in: * src/mod_muc/Makefile.in: * src/mod_proxy65/Makefile.in: * src/mod_pubsub/Makefile.in: * src/odbc/Makefile.in: * src/pam/Makefile.in: * src/stringprep/Makefile.in: * src/tls/Makefile.in: * src/web/Makefile.in:
* src/mod_muc/mod_muc_room.erl: Hide the option 'Make room moderated' because it isn't implemented, and set the default value of 'moderated' to true because that is the behaviour implemented (EJAB-419)
* doc/guide.tex: It should be made more clear that domain_certfile works for both s2s and c2s connections (EJAB-212). Added another example of listening ports.
* doc/guide.tex: Update URI of ejabberd official home page, URI of ejabberd.jabber.ru, and copyright dates (EJAB-366) * doc/introduction.tex: * src/ejabberd.hrl: * src/ejabberd_admin.erl: * src/mod_irc/mod_irc.erl: * src/mod_irc/mod_irc_connection.erl: * src/mod_muc/mod_muc.erl: * src/mod_muc/mod_muc_log.erl: * src/mod_proxy65/mod_proxy65_service.erl: * src/mod_pubsub/mod_pubsub.erl: * src/mod_vcard.erl: * src/mod_vcard_ldap.erl: * src/mod_vcard_odbc.erl: * src/msgs/*.msg: * src/web/ejabberd_web_admin.erl:
* src/gen_mod.erl: Update in database the configuration changes in modules (EJAB-330)
* src/mod_configure.erl: The command get-user-lastlogin is now compatible with both Mnesia and ODBC (EJAB-383) * src/mod_last.erl: Likewise * src/mod_last_odbc.erl: Likewise
* doc/guide.tex: Document ejabberd_http's request_handlers (EJAB-372). Fixed small Latex problems. Sort options of listening sockets.
* doc/guide.tex: Document ejabberd_http's request_handlers (EJAB-372). Fixed small Latex problems.
* src/mod_announce.erl: Bugfix (thanks to Christophe Romain)
* doc/guide.tex: Added clarification about LDAP default port (thanks to Christophe Romain).
* src/mod_vcard.erl: Ensure mod_vcard to respect FORM_TYPE registry (EJAB-328). * src/mod_vcard_ldap.erl: Likewise. * src/mod_vcard_odbc.erl: Likewise. * doc/guide.tex: Updated documentation.
* src/mod_muc/mod_muc_room.erl: Don't show the room name as the room description (EJAB-382).
* src/ejabberd.cfg.example: Added example configuration of databases.
* doc/guide.tex: Fixed several typos.
* src/ejabberd_config.erl: Print error when the configuration requires ODBC, MySQL or PostgreSQL libraries but are not installed (EJAB-210).
* src/web/ejabberd_web_admin.erl: Added a favicon (EJAB-379).
* src/msgs/wa.msg: New Walon translation (thanks to Pablo Saratxaga) (EJAB-374).
* doc/guide.tex: Describe how ejabberd treats ejabberd.cfg file (EJAB-384).
* src/ejabberd.cfg.example: Huge reorganization and grouping of options (EJAB-392).
* doc/guide.tex: Describe in mod_muc: nick register and service admin message (EJAB-400).
* src/mod_echo.erl: Example function that demonstrates how to receive XMPP packets using Erlang's message passing mechanism (EJAB-247).
* src/ejabberdctl.template: Write erl_crash.dump in the log/ directory, with unique filename (EJAB-433).
* src/ejabberdctl.template: Removed bashisms (EJAB-399). Set environment variables instead of passing parameters when calling erl (EJAB-421).
* src/ejabberd_router.erl: Bugfix
* src/ejabberd_s2s_out.erl: Bugfix
* src/ejabberd_sm.erl: Optimized check_max_sessions (thanks to Christophe Romain)
* src/ejabberd_config.erl: Improved error message when ejabberd config file is not found.
* examples/extauth/check_pass_null.pl: Fixed external authentication example script (EJAB-404)
Better count management and batch users retrieval internal database
* Making sure SVN properties are correctly set.
* Making sure SVN properties are correctly set.
* src/ejabberd_config.erl: Refactoring: Move internal data structure to an include file. * src/ejabberd_config.hrl: Likewise.
* src/ejabberd_auth.erl: Better count management and batch users retrieval for relational database (Thanks to Massimiliano Mirra). * src/ejabberd_auth_odbc.erl: Likewise. * src/odbc/odbc_queries.erl: Likewise.
* ChangeLog: Fixed typo.
* src/web/ejabberd_http_poll.erl: Refactoring. Moved c2s limits acquisition to a separate module. * src/ejabberd_c2s_config.erl: Likewise.
* src/web/ejabberd_http_poll.erl: Support for c2s ACL access, max_stanza and shaper on http_bind connections (EJAB-243, EJAB-415, EJAB-416)
* ChangeLog: Added missing info about last commits in ChangeLog.
* src/ejabberd_s2s.erl: don't use the resource of the sender to choose a s2s connection to ensure that a muc room always uses the same connection
dev.tex: list typo fix
add extauth script details
Bugfix on previous change (EJAB-380)
* src/ejabberdctl.template: Several improvements (EJAB-380) (thanks to Sander Devrieze, Sergei Golovan, Torsten Werner and Badlop) * src/ejabberdctl.cfg.example: Likewise * src/ejabberd.inetrc: Likewise * src/Makefile.in: Likewise
* src/mod_privacy.erl: Bugfix
* src/mod_vcard_odbc.erl: Reverted previous change
* src/mod_vcard_odbc.erl: Bugfix
* src/mod_offline_odbc.erl: Bugfix
SVN Revision: 954
* src/ejabberd_auth_pam.erl: Support for PAM authentication (thanks to Evgeniy Khramtsov) * src/ejabberd.cfg.example: Likewise * src/configure.ac: Likewise * src/aclocal.m4: Likewise * src/Makefile.in: Likewise * examples/ejabberd.pam: Likewise * doc/guide.tex: Likewise
Added some missing NOT NULL restrictions
apply rootdir patch from Badlop (EJAB-385)
* src/ejabberd_s2s.erl: Max number of connections and max number of connections per node now can be specified via max_s2s_connections and max_s2s_connections_per_node acl rules
* ChangeLog: Integration of multiple s2s support (EJAB-360).
* src/ejabberd_s2s_out.erl: Changed to actual p1_fsm behaviour. It was working correctly as the API of p1_fsm and gen_fsm is strictly the same.
* src/ejabberd_s2_in.erl: Added debug hook for s2s loop (EJAB-358).
* src/ejabberd_c2s.erl: Added debug hook for c2s loop (EJAB-358).
* src/ejabberd_s2s.erl: open all missing connections if needed.
* src/ejabberd_s2s.erl: untabify
* src/ejabberd_s2s.erl: don't check blacklist for services.
* src/ejabberd_s2s.erl: Fixed merge conflict (duplicate functions).
Try to open all s2s connections at the same time, to guarantee the right order of the packets.
Ignore more files in git.
Don't track some files in git.
Comment.
max_s2s_connexions_number local parameter added.
* src/ejabberd_s2s_out.erl: Implements s2s negociation timeouts and s2s connection retrial interval (EJAB-357, EJAB-294).
open up to 3 s2s outgoing connection per domain pair
* src/ejabberd_c2s.erl: Hibernate inactive c2s processes (EJAB-356).
* src/ejabberd_c2s.erl: Implements timeouts during session opening negociation (EJAB-355).
* doc/guide.tex: Documentation for new configure option --disable-transient-supersisors (EJAB-354).
* src/ejabberd_c2s.erl: Option to prevent the use of Erlang OTP supervisor for transient processes (EJAB-354). * src/ejabberd_s2s_in.erl: Likewise. * src/ejabberd_s2s_out.erl: Likewise. * src/mod_muc/mod_muc_room.erl: Likewise. * src/configure.ac: Likewise. * src/configure: Likewise. * src/Makefile.in: Likewise. * src/mod_muc/Makefile.in: Likewise.
* src/ejabberd_s2s_out.erl: Moved s2s connexion information from INFO level to DEBUG level and more human readable information explaining what is going on (EJAB-353).
* src/ejabberd_s2s_in.erl: Moved s2s connexion information from INFO level to DEBUG level (EJAB-353).
open up to 3 s2s outgoing connection per domain pair
* src/gen_mod.erl: Added get_module_opt_host/3 (thanks to Badlop)
SVN Revision: 926
* ChangeLog: updated.
* src/guide.tex: Fix: user_regexp acls are valid for all local users (all vhosts).
* ChangeLog: Document latest commits.
* src/guide.tex: Improved documentation for adding a vhost specific option (EJAB-297).
* src/mod_configure.erl: Virtual host support for mod_configure (Thanks to Badlop) (EJAB-285).
* src/mod_offline_odbc.erl: Bugfix
* ChangeLog: Update.
* src/mod_register.erl: update ejabberd commands to support XEP-0133 (initial patch by Badlop) (EJAB-325).
* doc/release_notes_1.1.4.txt: Updated for release.
* examples/extauth/check_pass_null.pl: Perl is generally available as a default in most Linux distributions.
* doc/guide.html: Generated latest version of the documentation.
* doc/guide.tex: Reverted previous change (bad cut/paste).
* src/jlib.erl: Removed http_base_64:decode call
* src/mod_muc/mod_muc_room.erl: Added logging of MUC admin/owner queries
* src/mod_muc/mod_muc_room.erl: Added user_message_shaper and room_shaper options * src/mod_muc/mod_muc.erl: Likewise
* ChangeLog: Missing commit.
* doc/guide.tex: Minor examples improvement in LDAP example (Thanks to Badlop) (EJAB-272).
* doc/guide.tex: Documentation for mod_muc option for server-wide limitation of the maximum number of users per room (EJAB-344).
* src/web/ejabberd_web_admin.erl: Make the web interface pages "translatable" (Thanks to Badlop) (EJAB-11).
* src/ejabberd.cfg.example: Updated mod_muc 'host' option default value (thanks to Badlop)
* src/mod_muc/mod_muc_room.erl: The mod_muc option max_users now limits max number of users in rooms and max_users_admin_threshold sets a number of admin or owner accounts allowd to join after max_users occupants
* doc/release_notes_1.1.4.txt: Added preliminary version to prepare release of ejabberd 1.1.4.
* doc/guide.tex: Documentation for XML based optimisation build time option (EJAB-298)
* src/mod_muc/mod_muc_log.erl: Added missed HTMLization in a nickname change logging (thanks to Badlop)
* src/mod_muc/mod_muc_room.erl: Changed default max number of user in a room to 200 (EJAB-248)
* src/ChangeLog: Missing commit.
* src/mod_offline_odbc.erl: Implements quota for offline messages in relational database (EJAB-314) * src/odbc/odbc_queries.erl: Likewise
* src/mod_muc/mod_muc_room.erl: Implements muc max users option from XEP-0045 (Thanks to Jerome Sautret) (EJAB-248).
* ChangeLog: Fixed attibution to commiter.
* doc/guide.tex: Described @HOST@ feature (thanks to Badlop)
* doc/guide.tex: Removed mentions of unexistent 'hosts' modules option (thanks to Badlop)
* src/gen_mod.erl: Substitute @HOST@ with hostname in the 'host' option (thanks to Badlop) * src/mod_vcard.erl: Likewise * src/mod_vcard_ldap.erl: Likewise * src/mod_vcard_odbc.erl: Likewise * src/mod_muc/mod_muc.erl: Likewise * src/mod_irc/mod_irc.erl: Likewise * src/mod_echo.erl: Likewise * src/mod_pubsub/mod_pubsub.erl: Likewise * src/mod_proxy65/mod_proxy65_service.erl: Likewise
Fixed conflict
* src/web/ejabberd_web_admin.erl: Moved roster stuff to mod_roster* * src/mod_roster.erl: Likewise * src/mod_roster_odbc.erl: Likewise
* src/ejabberd_sm.erl: Removed check which denies resource to receive its own presence
* src/web/ejabberd_web_admin.erl: Added hooks to allow plugins to add their pages without modifying ejabberd_web_admin.erl (thanks to Badlop) * src/web/ejabberd_web_admin.hrl: Macro definitions moved here * src/mod_shared_roster.erl: Updated * src/mod_offline.erl: Likewise * src/mod_offline_odbc.erl: Likewise
* src/jlib.erl: Use http_base_64:decode if available
* src/mod_roster.erl: Don't send roster push when unsubscribing in "None + Pending In" state * src/mod_roster_odbc.erl: Likewise
* src/mod_offline.erl: Renamed MAX_OFFLINE_MSGS to MaxOfflineMsgs
SVN Revision: 880
* src/odbc/ejabberd_odbc_sup.erl: Add an odbc_pool_size config file option to choose the number of SQL connection in each pool (EJAB-58). * src/odbc/ejabberd_odbc.erl: Add an odbc_keepalive_interval config file option to perform a keep alive query at given interval (EJAB-206).
* src/mod_offline.erl: Added a config option to define the maximum number of offline messages per user (EJAB-314).
* doc/guide.tex: Missing link.
* doc/guide.tex: Added documentation for the mod_offline quota (EJAB-314). * doc/guide.tex: Remove release notes (EJAB-323).
* doc/release_notes_1.1.3.txt: Adding missing file.
* src/mod_offline.erl: Returns an error message to sender when message is discarded due to quota (EJAB-314).
* src/odbc/ejabberd_odbc.erl: UTF-8 support for MySQL5 (EJAB-318).
* doc/guide.tex: Minor update (thanks to Sergei Golovan)
* src/mod_offline.erl: Typo.
* src/mod_offline.erl: Only count messages if a quota has been actually set (EJAB-314). * src/p1_mnesia.erl: Minor coding style change.
* src/mod_offline.erl: Started implementation of mod_offline quota. For now, it require change in code. Will be turn into a config file parameter soon. (EJAB-314). * src/p1_mnesia.erl: Added memory efficient record count in Mnesia.
* src/mod_announce.erl: Added support to all the announce features described in documentation. Access to all announce features through command line, adhoc commands and disco (Thanks to Badlop) (EJAB-18). * src/gen_mod.erl: Likewise. * doc/guide.tex: Likewise.
* src/mod_muc/mod_muc.erl: Added default_room_options option (thanks to Etan Reisner and Badlop) * src/mod_muc/mod_muc_room.erl: Likewise * doc/guide.tex: Updated
* src/mod_muc/mod_muc.erl: Added default_room_options option (thanks to Etan Reisner and Badlop) * src/mod_muc/mod_muc_room.erl: Likewise * doc/guide.tex: Updated
* doc/guide.tex: Front page table formatting that render correctly in HTML and update mentionning CEAN as a way to install ejabberd (Thanks to Badlop) (EJAB-272).
* src/ejabberd_s2s_out.erl: Avoid bouncing messages twice if terminate happens during open_connect.
* src/ejabberd_s2s_out.erl: On terminate, bounce internal process queue and Erlang message queue.
* src/mod_private.erl: Reduce memory consumption on user private storage removal (EJAB-299).
* src/xml.erl: Removing debug printout.
* Updating SVN HTML documentation.
* src/xml.erl: Making use of CDATA escaping optional through with a compile time option (EJAB-298). * src/Makefile.in: Likewise. * src/configure.ac: Likewise.
* src/mod_version.erl: Added option to hide OS version (thanks to Badlop) * doc/guide.tex: Updated
* src/msgs/zh.msg: Updated (thanks to Shelley Shyan)
* src/msgs/gl.msg: New galician translation (thanks to Carlos E. Lopez)
* src/ejabberd_config.erl: Added possibility for appending values to config options (thanks to Badlop) * doc/guide.tex: Updated
* src/xml.erl: Better escaping management with CDATA. We only add CDATA enclosure when needed. CDATA end token is properly escaped.
* Updated documentation version number in SVN (to avoid confusion).
* src/xml.erl: Only wrap xmldata nodes in xml cdata "tag" if bigger than 50 bytes. Shorter xmlcdata nodes will be escaped.
* src/tls/tls_drv.c: Sends the entire certificate chain (EJAB-209).
* src/acl.erl: Remove compilation warnings (EJAB-290).
* src/xml_stream.erl: Group CDATA on a single xmlcdata node (splitting is not relevant as dependant on TCP/IP packet fragmentation) (EJAB-292).
* src/xml.erl: Remove compilation warnings (EJAB-290).
* src/xml.erl: Removed more code commented out.
* src/xml.erl: Do not crypt binary CData, but enclose the value in XML CDATA "tag". * src/xml.erl: Code clean-up: removed old code in comments.
* src/mod_roster_odbc.erl: Better error management when bad JID in roster table (EJAB-289).
* src/web/ejabberd_web_admin.erl: Code clean-up.
* Added TODO comment
* src/mod_offline.erl: Code clean-up.
* src/gen_mod.erl: Throw error more cleanly.
* src/mod_configure.erl: One ACL call was not virtual host compliant.
* src/mod_configure.erl: One ACL call was not virtual host compliant.
* src/ejabberd_auth_odbc.erl: Fixed wrong call preventing user removal with relational databases.
* src/mod_last_odbc.erl: Adapted to mod_privacy changes. * src/mod_privacy_odbc.erl: Refactoring to extract records in include file.
* src/mod_last.erl: Adapted to mod_privacy changes.
* src/mod_last.erl: Adapted to mod_privacy changes. * src/mod_privacy.erl: Refactoring to extract records in include file. * src/mod_privacy.hrl: Likewise.
* src/mod_roster_odbc.erl: Fixed wrong call.
* src/p1_fsm.erl: Use of catch can break tail recursion.
* doc/guide.tex: Added recommandations on max_stanza options usage.
* src/ejabberd_s2s_out.erl: Autodisconnect s2s connections which are overloaded (EJAB-287). * src/p1_fsm.erl: Likewise.
* src/ejabberd_s2s_in.erl: Add s2s whitelist / blacklist support on incoming s2s connections (EJAB-283) * src/ejabberd_s2s.erl: Likewise
* src/ejabberd_s2s.erl: Fixed typo.
* src/ejabberd_s2s.erl: Implements s2s hosts whitelist / blacklist * src/ejabberd.cfg.example: Likewise
* src/ejabberd_s2s_out.erl: Make s2s connections more robust * src/ejabberd_s2s.erl: Likewise
* src/mod_configure.erl: Bugfix: Show only virtual host users on admin disco for all users (EJAB-268) (Thanks to Badlop).
* src/mod_muc/mod_muc_log.erl: Recognise more URI schemes in logged HTML (EJAB-279) (Thanks to qu1j0t3).
* src/ejabberd_s2s_out.erl: Improved place of the INFO / DEBUG printout (EJAB-282).
* src/odbc/ejabberd_odbc.erl: Better error handling for MySQL native driver (EJAB-224).
* src/ejabberd_s2s.erl: Added remove_connection/3 * src/ejabberd_s2s_out.erl: Bugfix: remove only own s2s record
* src/ejabberd_s2s_out.erl: Bounce packets after unregistering s2s connection, not before
* src/mod_echo.erl: mod_echo does not reply to other components. This is to make sure that a component will not discover its own capabilities (EJAB-281). * src/ejabberd.cfg: disable mod_echo in the example config file. mod_echo is mainly a development/test module.
* src/odbc/mssql.sql: Nickname cannot be null in rosterusers table (MSSQL) * src/odbc/mysql.sql: Likewise * src/odbc/pg.sql: Likewise
* Added missing file.
* src/ejabberd_config.erl: Normalize hostnames in config file. If mixed case is used, the hostname will be now useable (EJAB-277). * src/stringprep/stringprep_sup.erl: Likewise * src/stringprep/Makefile.in: Likewise * src/stringprep/Makefile.win32: Likewise * src/ejabberd_app.erl: Likewise
* src/ejabberd_auth_anonymous.erl: Do not purge non anonymous accounts when using anonymous authentication with another type of auth (EJAB-216).
* src/ejabberd_service.erl: Added an option to disable from attribute checks in packets coming from an external component (EJAB-275) * doc/guide.tex: Likewise
* doc/guide.tex: Documentation rework started (EJAB-272) * doc/introduction.tex: Likewise
add ChangeLog entry for r801
corrects EJAB-273, remove obsolete OnlineUsers calculation
Cancel revision 798
Unsafe working version of http file transfer
* src/mod_muc/mod_muc_room.erl: Include <body/> in MUC invitations for older clients (thanks to Michael Scherer)
* doc/guide.tex: Typos
* src/mod_muc/mod_muc_room.erl: New anti-abuse options: min_presence_interval and min_message_interval (EJAB-227) * doc/guide.tex: Likewise
apply patch from EJAB-261
* doc/guide.tex: Documentation improvements on watchdog
* doc/guide.text: No need to escape underscore in Latex verbatim sections
* doc/guide.tex: Watchdog alert documentation * src/ejabberd.cfg.example: Likewise
* src/mod_irc/mod_irc.erl: Added an option for default IRC encoding (thanks to Badlop) * doc/guide.tex: Updated
* src/mod_disco.erl: Don't override accumulated value in get_local_identity/5 (thanks to Magnus Henoch and Badlop)
* src/web/ejabberd_web_admin.erl: Added links to server and virtual host homes (thanks to Badlop)
* src/mod_muc/mod_muc_room.erl: It is now possible to limit who is allowed to create persistent MUC rooms (Thanks to Badlop) (EJAB-257) * src/mod_muc/mod_muc.erl: Likewise * doc/guide.tex: Likewise * src/ejabberd.cfg.example: Likewise
* src/odbc/odbc_queries.erl: Added missing users_number/1 for MSSQL (EJAB-239).
* src/mod_roster_odbc.erl: Fixed typo
* src/web/ejabberd_web_admin.erl: Show IP address of connected resources on user info page (thanks to Oleg Palij)
* src/ejabberd_config.erl: Fixed "language" option processing (thanks to Badlop)
* src/msgs/zh.msg: Updated (thanks to Shelley Shyan)
* src/xml.erl: Add new helper function get_subtag_cdata/2.
* src/mod_vcard_odbc.erl: Fix for previous commit (thanks to Badlop)
* src/mod_vcard_odbc.erl: Make service description translatable in discovery (EJAB-236) * src/mod_vcard_ldap.erl: Likewise
* src/Makefile.in: Added Dialyzer target (EJAB-189 - Thanks to Geoff Cant) * src/Makefile.in: Build XmppAddr.beam in a single pass * src/mod_muc/Makefile.in: +debug_info directive support * src/stringprep/Makefile.in: Likewise * src/mod_irc/Makefile.in: Likewise * src/web/Makefile.in: Likewise * src/eldap/Makefile.in: Likewise * src/mod_pubsub/Makefile.in: Likewise * src/ejabberd_zlib/Makefile.in: Likewise * src/mod_proxy65/Makefile.in: Likewise * src/tls/Makefile.in: Likewise * src/odbc/Makefile.in: Likewise
* src/mod_vcard.erl: Make services description translatable in discovery (EJAB-236 - thanks to Badlop) * src/mod_muc/mod_muc.erl: Likewise * src/mod_irc/mod_irc.erl: Likewise * src/mod_pubsub/mod_pubsub.erl: Likewise * src/mod_proxy65/mod_proxy65_service.erl: Likewise * src/msgs/fr.msg: Added service description translation
* src/ejabberdctl.template: Updated version of ejabberdctl (thanks to Christophe Romain) * tools/ejabberdctl: Likewise * src/Makefile.in: Updated
* src/ejabberd_sm.erl: Updated the session table to store additional session info * src/ejabberd_c2s.erl: Report IP address to ejabberd_sm (thanks to Christophe Romain)
* src/msgs/zh.msg: New chinese translation (thanks to Shelley Shyan)
* src/mod_muc/mod_muc_room.erl: Corrected error messages when trying to join members-only room (thanks to Badlop)
* src/ejd2odbc.erl: Bugfix (thanks to Badlop)
* src/ejd2odbc.erl: Bugfix (thanks to Badlop)
* src/mod_stats.erl: Updated * src/web/ejabberd_web_admin.erl: Likewise
* src/ejabberd_auth.erl: Added get_vh_registered_users_number/1 function * src/ejabberd_auth_odbc.erl: Likewise * src/odbc/odbc_queries.erl: Added users_number/1 function * src/ejabberd.cfg.example: Added an example for pgsql_users_number_estimate option
* src/ejabberd_auth_anonymous.erl: Added anonymous_purge_hook (thanks to Christophe Romain and Mickael Remond) * src/mod_offline.erl: Likewise * src/mod_offline_odbc.erl: Likewise * src/mod_roster.erl: Likewise * src/mod_roster_odbc.erl: Likewise
* src/mod_muc/mod_muc.erl: Bugfix
* src/ejabberd_receiver.erl: Workaround for inet_drv bug
* src/web/ejabberd_http.hrl: Added "ip" field in the "request" record * src/web/ejabberd_http.erl: Likewise
* src/ejabberd_sm.erl: Added set_presence_hook * src/ejabberd_c2s.erl: Likewise
* src/ejabberd_sm.erl: Added set_presence_hook
* src/ejabberd_sm.erl: Added check for existence of incoming subscription destination
* src/msgs/it.msg: Added italian translation (thanks to Luca Brivio)
* src/mod_muc/mod_muc_room.erl: More accurate invitation errors (thanks to Magnus Henoch)
make install does not overwrites existing ejabberd.cfg anymore, ejabberd.cfg-new created instead
SVN Revision: 754
* contrib/ejabberd-modules.repo: List of ejabberd-modules to add for ejabberd packaging (source archive and installer)
* src/mod_roster_odbc.erl: Don't deliver roster items in "None + Pending In" state * src/mod_roster.erl: Likewise
* src/ejabberd_socket.erl: Added API for monitoring socket processes * src/ejabberd_frontend_socket.erl: Likewise * src/ejabberd_c2s.erl: Added socket monitoring
* src/ejabberd_sm.erl: Minor optimisation
* src/guide.tex: Fixed typo.
* src/mod_muc/mod_muc.erl: Better behaviour under high load
* src/ejabberd_s2s.erl: Don't bounce packets with "error" and "result" type
* src/ejabberd_s2s.erl: Fixed spelling
* src/ejabberd_s2s.erl: Don't start s2s process for existing connection in case of race condition
* src/ejabberd_service.erl: Added shaper_rule option, changed service connection log message
* src/ejabberd_service.erl: Add extra info in the log about which components is connected and which Erlang process is handling it. This is usefull in context where many types of components are used (Thanks to Jerome Sautret) (EJAB-211).
* src/web/ejabberd_http.erl: Support for binaries in ejabberd HTTP server (Thanks to Massimiliano Mirra) (EJAB-197).
* src/configure.ac: autoconf improvements (thanks to Tony Finch) (EJAB-204). * src/aclocal.m4: Likewise.
* src/odbc/ejabberd_odbc.erl: ejabberd admin can now choose the relational database port to user from ejabberd configuration file (EJAB-195). * src/doc/guide.tex: Likewise.
* src/mod_muc/mod_muc_log.erl: Fix wrong return on check access log.
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* src/mod_pubsub/mod_pubsub.erl: Bugfix
* src/mod_proxy65/mod_proxy65_sm.erl: Cluster support (thanks to Evgeniy Khramtsov)
* src/ejabberd_c2s.erl: Init shaper with a default value first after stream opening
* src/mod_muc/mod_muc_room.erl: Added an option set affiliations.
* doc/api/*: Added Erlang documentation generation script (EJAB-188). * doc/version.tex: Updated. * src/ejabberd.app: Updated.
* src/odbc/pg.sql: last table, state column cannot be NULL (EJAB-191). * src/odbc/mysql.sql: likewise. * src/odbc/mssql.sql. likewise.
* src/ejabberd_auth_ldap.erl: prevent anonymous bind on LDAP servers as ejabberd is providing other anonymous authentication mechanism (EJAB-190).
* src/cyrsasl_plain.erl: bad-auth error code replaced by not-authorized (EJAB-187).
* src/aclocal.m4: configure --with-erlang option is now working (Thanks to Jerome Sautret) (EJAB-186).
* src/mod_muc/mod_muc_log.erl: Spam prevention: The default behaviour is now to use the nofollow rel attributes for links that are submitted by users (EJAB-185). * doc/guide.tex: Likewise.
* src/mod_muc/mod_muc_room.erl: API improvement: Implementation of an event to destroy MUC room from an external application (Thanks to Massimiliano Mirra) (EJAB-184).
* src/ejabberd_s2s.erl: Confirm to RFC3920 section 10.3 (thanks to Jerome Sautret)
* src/mod_muc/mod_muc.erl: Node now try to clean its own online room when restarting (EJAB-182).
* src/mod_muc/mod_muc.erl: Clean online room table on cluster node restart
* src/ejabberd_auth_ldap.erl: Added ldap_local_filter option. This option provide an optimisation to reduce LDAP directory load when using attribute-based filters (EJAB-179).
* src/web/ejabberd_http.erl: Added separate version of element_to_string for HTML encoding * src/xml.erl: Reverted previous change
* src/xml.erl: &apos; entity replaced by &#39; Should work more universaly (in HTML and XML).
* src/mod_roster_odbc.erl: Bugfix (thanks to asdx <asdx@jabber.snc.ru>) * src/ejd2odbc.erl: Likewise
* src/mod_vcard_ldap.erl: LDAP server pool support (thanks to Evgeniy Khramtsov) (EJAB-175) * src/eldap/Makefile.in: Likewise * src/ejabberd_auth_ldap.erl: Likewise * src/eldap_pool.erl: Likewise
* doc/guide.tex: Fixed typos in labels.
* src/eldap/Makefile.win32: fix build error on Windows.
* src/web/*: Plugin architecture for HTTP modules (thanks to Massimiliano Mirra)
* Generated updated documentation.
* doc/guide.tex: Documentation for the domain_balancing_component_number option.
* doc/guide.tex: Documentation for domain balancing.
* doc/guide.tex: mod_muc now support cluster.
* Generated updated documentation.
* doc/guide.tex: Updated the max_user_sessions section.
* src/mod_muc/mod_muc.erl: Now mod_muc can be distributed on several nodes * src/mod_muc/mod_muc_room.erl: Likewise
* doc/guide.tex: Latex / Hevea related improvements for documentation generation (thanks to Sander Devrieze). * doc/introduction.tex: Likewise. * doc/dev.tex: Likewise. * doc/features.tex: Likewise.
* Changelog: Cosmetic change
mod_pubsub: support presence_based_delivery in cluster
support presence_delivery in cluster
* src/mod_muc/mod_muc_log.erl: Remove 'right-to-left override' unicode character (thanks to Badlop)
* src/ejabberd_s2s_out.erl: Bugfix
* src/mod_private_odbc: Bugfix: an internal error was returned instead of the actual private data. This is now working as expected. (EJAB-165)
* src/ejd2odbc.erl: Bugfix
* README: Added this file as a quickstart guide.
* src/mod_echo.erl: The mod_echo can now be stopped without errors. This is not a major issue, but can mislead other developers learning from this example and test module (Thanks to Magnus Henoch) (EJAB-163).
* TODO: Removed. The roadmap is managed on: http://support.process-one.net/browse/EJAB
* src/ejabberd_ctl.erl: Bugfix: Now display all register commands for a vhost and not only one (Thanks to Badlop) (EJAB-162). * src/ejabberd.cfg.example: Fixed typo.
* src/ejabberd_config.erl: Added loglevel option. It is now possible to configure ejabberd dynamic loglevel from the config file (EJAB-74).
* src/ejabberd_receiver.erl: Bugfix
* src/ejabberd_c2s.erl: Bugfix
* src/mod_roster_odbc.erl: Better error handling
* src/ejabberd_loglevel.erl: Preliminary dynamic loglevel support. Debug can be enabled with the command "ejabberd_loglevel:set(5)". (EJAB-74) * src/ejabberd_app.erl: Likewise. * src/ejabberd.hrl: Likewise (More log levels are now supported). * src/ram_file_io_server.erl: Likewise (Needed to dynamically recompile the error logger).
* src/ejabberd_receiver.erl: Bugfix
* src/mod_proxy65/mod_proxy65_services.erl: Fixed typo.
* src/mod_proxy65/mod_proxy65_services.erl: We now try to get the address of the component (if registered in DNS) or otherwise get the IP of the XMPP domain.
* Removed useless comments.
* src/mod_proxy65/mod_proxy65_services.erl: Now using all interfaces as default value for proxy listen parameter.
* src/ejabberd_c2s.erl: User login in with negative priority must not receive offline messages (Thanks to Badlop) (EJAB-158).
* src/muc/mod_muc_room.erl: API improvement. It is now possible to read and write a room config from a developer module (Thanks to Massimiliano Mirra) (EJAB-157)
* doc/guide.tex: Fixed regexp ACL configuration examples (Thanks to Massimiliano Mirra).
* src/eldap/eldap.erl: Bugfix (thanks to Evgeniy Khramtsov)
SVN Revision: 679
2006-11-20  Mickael Remond  <mickael.remond@process-one.net>
* src/mod_muc/mod_muc_room.erl: API improvement: It is now easier to extract data from the MUC room process (EJAB-157).
* src/ejabberd_node_groups.erl: Support for node tagging * src/ejabberd_sup.erl: Likewise * src/ejabberd_frontend_socket.erl: Use node tags to determine backend nodes * src/ejabberd_config.erl: Added node_type and cluster_nodes options * src/ejabberd_app.erl: Establish connections to the nodes from the cluster_nodes option
* src/odbc/mysql.sql: Fix database creation script.
* src/mod_private_odbc.erl: Support for MySQL and MSSQL. * src/odbc/odbc_queries.erl: Likewise. * src/odbc/mysql.sql: Likewise. * src/odbc/mssql.sql: Likewise.
* src/odbc/mysql: Database creation script should now be compliant with MySQL 4.0.x.
* src/odbc/pg.sql: Database scripts consistency. * src/odbc/mysql.sql: Likewise. * src/odbc/mssql.sql: Likewise.
* src/eldap_utils.erl: Fixed missing export (EJAB-154).
Now really committed
Now really added
* doc/guide.tex: XEP-0065 proxy documentation (thanks to Evgeniy Khramtsov).
* src/ejabberd.cfg.example: Changed the anonymous example a bit to work in most cases. * doc/guide.tex: Likewise.
* src/mod_proxy65/: XEP-0065 proxy (thanks to Evgeniy Khramtsov) * src/Makefile.win32: Likewise * src/Makefile.in: Likewise * src/configure.ac: Likewise * src/jlib.hrl: Likewise * src/ejabberd.hrl: Added the ejabberd URL
* src/guide.tex: Fixed typos.
* src/ejabberd_rdbms.erl: It is now possible to use ldap or internal authentication with some other modules using relationnal database storage (EJAB-152). Refactored relational databases connections initialisation. * src/ejabberd_auth_odbc.erl: Likewise. odbc supervisor startup is now delegated to the ejabberd rdbms module. * src/ejabberd_app.erl: Likewise.
* src/ejabberd_socket.erl: Added sockname/1 and peername/1 functions * src/ejabberd_frontend_socket.erl: Likewise * src/tls/tls.erl: Likewise * src/ejabberd_zlib/ejabberd_zlib.erl: Likewise
* ChangeLog: Fixed typo.
* src/ejabberd_auth_ldap.erl: LDAP authentication now allows to match on several alternative attributes. * src/mod_vcard_ldap.erl: Likewise. * doc/guide.tex: Updated. * eldap_utils.erl: Refactoring. * src/eldap/Makefile.in: Likewise.
* src/mod_privacy_odbc.erl: Privacy rules support using odbc * src/odbc/pg.sql: Likewise
* src/mod_privacy.erl: Use hooks instead of direct function calls * src/ejabberd_c2s.erl: Updated
* src/shaper.erl: Bugfix * src/ejabberd_config.erl: Likewise
* src/ejabberd_frontend_socket.erl: Support for frontend connection manager * src/ejabberd_c2s.erl: Likewise * src/ejabberd_listener.erl: Likewise * src/ejabberd_s2s_in.erl: Likewise * src/ejabberd_service.erl: Likewise * src/ejabberd_socket.erl: Likewise * src/web/ejabberd_http_poll.erl: Likewise
* src/release_notes_1.1.2.txt: Fixed hanging paragraph
* Added release note to documentation.
* doc/release_notes_1.1.2.txt: Fixed typos and rephrasing.
* doc/release_notes_1.1.2.txt: Minor fixes.
* doc/guide.tex: Fixed Latexish typos.
* doc/release_notes_1.1.2.txt: Draft release notes.
* src/msgs/pl.msg: Updated (thanks to Andrzej Smyk).
* src/ejabberd_s2s.erl: More precise message for the new s2s statistic command.
* src/mod_muc/mod_muc_room.erl: Minor english update. * src/msgs/pl.msg: Likewise. * src/msgs/uk.msg: Likewise. * src/msgs/pt-br.msg: Likewise. * src/msgs/cs.msg: Likewise. * src/msgs/ru.msg: Likewise. * src/msgs/es.msg: Likewise. * src/msgs/fr.msg: Likewise. * src/msgs/de.msg: Likewise. * src/msgs/nl.msg: Likewise.
* src/msgs/pt-br.msg: Updated Brazilian translation (thanks to Renato Botelho) and clean-up.
* src/msgs/de.msg: Updated German translation (thanks to Nikolaus Polak).
* src/ejabberd.app: Version update for ejabberd 1.1.2.
ChangeLog typo
* src/msgs/pl.msg: Updated German translation (thanks to Zbyszek Zolkiewski).
* src/msgs/de.msg: Updated German translation (thanks to Marvin Preuss).
* src/msgs/nl.msg: Updated Dutch translation (thanks to Sander Devrieze).
* src/ejabberd_s2s.erl: Added incoming-s2s-number and outgoing-s2s-number ejabberdctl commands
* src/msgs/cs.msg: Updated Czech translation and removed unused strings.
* doc/introduction.tex: Minor doc updates for release 1.1.2.
* src/ejabberd_socket.erl: Support for non-xml sockets * src/ejabberd_c2s.erl: Likewise * src/ejabberd_s2s_in.erl: Likewise * src/ejabberd_service.erl: Likewise * src/web/ejabberd_http.erl: Likewise
* src/msgs/es.msg: Updated Spanish translation (thanks to Badlop).
* src/mod_muc/mod_muc_room.erl: Strings update (thanks to Serguei Golovan). * src/msgs/ru.msg: Updated Russian translation (thanks to Serguei Golovan). * src/msgs/uk.msg: Updated Ukrainian translation (thanks to Serguei Golovan). * src/msgs/fr.msg: Update French translation.
* src/doc/guide.html: Minor W3C compliance fix in an Hevea generated URL.
* src/doc/features.html: Added to be consistent (guide.html is in the repository to make Latex optional, but still allow access to the doc). * src/ejabberd.hrl: Updated to version 1.1.2.
* src/msgs/cs.msg: Added Czech translation (thanks to Milos Svasek).
* src/eldap/eldap.erl: Enable the keepalive socket option (thanks to Evgeniy Khramtsov)
* src/mod_muc/mod_muc.erl: Component name is now more user friendly (thanks to Badlop). * src/mod_irc/mod_irc.erl: Likewise. * src/mod_pubsub/mod_pubsub.erl: Likewise.
* src/msgs/fr.msg: updated French translation.
* doc/guide.tex: Large improvements for ejabberd 1.1.2 (thanks to Sander Devrieze) * doc/version.tex: Likewise. * doc/features.tex: Likewise. * doc/Makefile: Likewise. * doc/dev.tex: Likewise.
* doc/guide.tex: Minor fix on index generation.
* doc/guide.tex: Updated (thanks to Evgeniy Khramtsov)
* src/odbc/mssql.sql: Removed unused fields.
* src/ejd2odbc.erl: Updated
* src/mod_muc/mod_muc_log.erl: Fixed html special characters escaping, added new image buttons, chatroom titles now point to xmpp: URIs (thanks to Badlop)
* src/mod_muc/mod_muc_log.erl: Fixed html special characters escaping, added new image buttons, chatroom titles now point to xmpp: URIs (thanks to Badlop)
* src/mod_muc/mod_muc.erl: It is now possible to configure the MUC room history feature. A new option has been added in ejabberd muc module configuration (history_size) to define the size of the history. 0 is used to disable the feature. * src/mod_muc/mod_muc_room.erl: Likewise. * doc/guide.tex: Likewise.
* src/ejabberd_socket.erl: All XML socket operations moved here * src/ejabberd_s2s_in.erl: Likewise
* src/ejabberd_socket.erl: All XML socket operations moved here * src/ejabberd_listener.erl: Updated * src/ejabberd_receiver.erl: Likewise * src/ejabberd_c2s.erl: Likewise * src/ejabberd_s2s_in.erl: Likewise * src/ejabberd_s2s_out.erl: Likewise * src/ejabberd_service.erl: Likewise
* src/odbc/odbc_queries.erl: Support for Microsoft SQL Server as a database backend (via ODBC). * src/odbc/ejabberd_odbc.erl: Likewise. * src/odbc/mssql.sql: Likewise. * src/odbc/Makefile.in: Likewise. * src/ejabberd_auth_odbc.erl: Likewise. * src/mod_offline_odbc.erl: Likewise. * src/mod_roster_odbc.erl: Likewise. * src/mod_last_odbc.erl: Likewise. * src/configure.ac: Likewise * doc/guide.tex: Likewise. * doc/introduction.tex: Likewise. * src/odbc/pg.sql: Minor fix.
* src/ejabberd.app: Updated to the current version.
* Makefile.in: Fix for MacOSX compilation (EJAB-124). * ejabberd_zlib/Makefile.in: Likewise. * mod_irc/Makefile.in: Likewise. * stringprep/Makefile.in: Likewise. * tls/Makefile.in: Likewise.
* src/mod_muc/mod_muc_room.erl: Fixed logging configuring permission check
* src/ejabberd_router.erl: Now filter_packet hook works in 'global' context
* src/tls/tls_drv.c: Report OpenSSL error messages (thanks to Magnus Henoch)
* src/mod_muc/mod_muc_room.erl: Use standardized MUC room configuration fields (thanks to Magnus Henoch and Andy Turner)
* src/mod_roster_odbc.erl: Bugfix
* src/ejabberd_c2s.erl: Bugfix: added a missing catch and fixed the error code used on unknown namespace. * src/ejabberd_s2s_out.erl: Improved s2s connection negociation (dialback namespace usage) when using tls. * src/ejabberd_sm.erl: Fixed the error code used on unknown namespace. * src/mod_register.erl: ejabberd now sends iq result and stream end on user remove.
* src/acl.erl: The server does not crash anymore on wrong acl rule. Add rule error message in log file (EJAB-118).
* src/web/ejabberd_web_admin.erl: User creation form now creates the user for the current virual host only and does not require to type the hostname (EJAB-116). * src/jlib.erl: String to JID conversion now returns an error if the JID string contains two arobases.
* src/mod_muc/mod_muc_room.erl: Fixed the order in which room presence packets are sent (First existing presence to new occupant, then new occupant presence to existing users (EJAB-115).
* src/mod_shared_roster.erl: Shared roster entries can now be moved or rename from a client without breaking current presence status (EJAB-70). * src/mod_roster.erl: Likewise. * src/mod_roster_odbc.erl: Likewise.
* src/ejabberd_auth.erl: Better handling of errors when the server for authentication is unknown.
* src/mod_shared_roster.erl: The logged user (self) is now removed from the shared roster list (EJAB-110).
* src/mod_shared_roster.erl: Delete the shared roster group now correctly delete its user entries (EJAB-112).
* src/web/ejabberd_web_admin.erl: More flexible parsing the shared roster members list from the configuration form.
* src/ejabberd_s2s_in.erl: Removed needless check for xmlns:db when starttls is enabled
* src/web/ejabberd_http_poll.erl: Bugfix: using tuple instead of a Pid to send Erlang messages in a rarely used case.
* src/ejabberd_auth.erl: Fixed broken multiple connection with anonymous login problem (EJAB-107). * src/ejabberd_auth_anonymous.erl: Likewise.
* src/mod_pubsub/mod_pubsub.erl: Discovery query on an item does no more return an "item not found error". Discovery stop correctly at the item level (Thanks to Christophe Romain) (EJAB-105).
* src/mod_pubsub/mod_pubsub.erl: Support for pubsub node creation ACL.  It is now possible to limit the node creation rights using an ACL from ejabberd config file (Thanks to Christophe Romain) (EJAB-104). * doc/guide.tex: Likewise. * src/ejabberd.cfg.example.
* src/web/ejabberd_http.erl: The web module now accepts HTTP absolute URL (used behind a proxy). This apply to HTTP polling and to the web interface (Thanks to Jean-Sebastien Pedron).
* src/web/ejabberd_http_poll.erl: Messages polled between the the last client request and the polling timeout were lost. Those messages are now resent using ejabberd routing mechanisms (EJAB-87).
* src/mod_roster.erl: According to RFC3921 section 9.2, outbound subscribe presence packets must be sent, even if the user has already asked for subcription previously (subscription: none and pending: out). The mod_roster now conforms to this behaviour (EJAB-102). * src/mod_roster_odbc.erl: Likewise.
* src/configure: removed debug printout.
* src/configure.ac: Added an optional check for krb5.h in configure. ejabberd can now be build directly on RedHat and OpenBSD (EJAB-100).
* src/msgs/sk.msg: Slovak translation (thanks to Juraj Michalek and SkLUG)
* src/odbc/pg.sql: Updated
* src/mod_roster.erl: The subscribe request are now resend at login as long as they have not been answered. mod_roster do no more depends on mod_offline. * src/ejabberd_sm.erl: Likewise. * src/ejabberd_c2s.erl: Likewise. * src/mod_roster_odbc.erl: Likewise (The ODBC/relational support has not yet been tested). * src/mod_roster.hrl: Likewise. * src/mod_offline.erl: Likewise. * src/mod_offline_odbc.erl: Likewise. * odbc/pg.sql: Likewise. * odbc/mysql.sql: Likewise.
* src/ejabberd_sm.erl: The max_user_sessions has been moved to host configuration. * src/ejabberd.cfg.example: Likewise. * doc/guide.tex: Likewise.
* src/ejabberd_sm.erl: An option to limit the number of opened sessions for a given user have been added. As a default, a given user can only log in 10 times with different resources. After that, new connections replace the older ones. * src/ejabberd.cfg.example: Likewise. * doc/guide.tex: Likewise.
* src/web/ejabberd_http_poll.erl: Timeout disconnection were not properly handled after "active once" migration. This is now fixed.
* src/ejabberd_ctl.erl: Added a way to delete the older message from the offline message table. This function is only available if offline message queue is stored in Mnesia internal database. The function delete_old_messages is not available in mod_offline_odbc.
* src/ejabberd_ctl.erl: Now prints a user-friendly when trying to restore a backup from a non-existent file.
* src/ejabberd_admin.erl: Code refactoring. Common Mnesia database restore function.
* src/mod_configure.erl: Unknown tables or tables from now unused modules are ignored during restore. The restore can now be performed in such case (EJAB-80). * src/web/ejabberd_web_admin.er: Likewise. * src/ejabberd_admin.erl: Likewise. Code refactoring. Common Mnesia database restore function.
* src/ejabberd_ctl.erl: Unknown tables or tables from now unused modules are ignored during restore. The restore can now be performed in such case.
* doc/release_note_1.1.1.txt: Fixed typo.
* doc/guide.html: Updated generated HTML version of the guide.
* src/ejabberd.hrl: release 1.1.1 * doc/version.tex: Likewise * doc/guide.tex: Likewise
* Release not for security fix release.
* src/cyrsasl.erl: Bugfix: anonymous authentication was always enabled
* src/ejabberd_ctl.erl: The status now only returns "started" if ejabberd is started and ready to accept requests.
* Fixed notes for version 1.1.0 release.
* doc/guide.tex: Added a documentation for max_stanza_size option
* src/ejabberd.hrl: Updated for version 1.1.0.
* Updated documentation before 1.1.0 release
* Updated documentation before 1.1.0 release
doc/release_notes_1.1.0.txt: Preparing release 1.1.0
* src/guide.tex: Added documentation for ODBC and native database configuration (PostgreSQL and MySQL).
* doc/guide.tex: Updated (thanks to Sander Devrieze) * doc/introduction.tex: Likewise
* src/configure: Removed '==' bashism (thanks to Magnus Henoch) * src/aclocal.m4: Likewise
* src/ejabberd_c2s.erl: Resend messages when leaving negative presence state (thanks to Magnus Henoch)
* src/ejabberd_sm.erl: Now delivering messages to all resources with max equal priority when this priority is non-negative.
* src/msgs/de.msg: Updated (thanks to Nikolaus Polak)
* src/msgs/fr.msg: updated
* src/msgs/pt-br.msg: Updated (thanks to Lucius Curado)
* src/msgs/pt-br.msg: Updated (thanks to Lucius Curado)
* doc/guide.tex: Updated (SASL anonymous and anonymous login).
* src/ejabberd_auth.erl: Bugfix: We now are forced to check is an anonymous user is log under a given user name before trying to register it.
* src/ejabberd.cfg.example: Update of the example for anonymous. Removed unnecessary parameter. * src/ejabberd_auth_anonymous.erl: Removed unnecessary parameter and bugfix.
* src/msgs/pl.msg: Updated (thanks to Andrzej Smyk)
* src/xml_stream.erl: Cleanup
* src/ejabberd_c2s.erl: Minor fix
* src/msgs/es.msg: Updated (thanks to Badlop)
* src/mod_pubsub/mod_pubsub.erl: Fixed pubsub root node creation (conflict error was send on node creation)
* src/ejabberd_sm.erl: SASL Anonymous + Anonymous login support (thanks to Mickael Remond and Magnus Henoch) * src/ejabberd_c2s.erl: Likewise * src/ejabberd_auth.erl: Likewise * src/ejabberd_auth_anonymous.erl: Likewise * src/cyrsasl.erl: Likewise * src/cyrsasl_anonymous.erl: Likewise * src/ejabberd.cfg.example: Likewise
* src/ejabberd_sm.erl: SASL Anonymous + Anonymous login support (thanks to Mickael Remond and Magnus Henoch) * src/ejabberd_c2s.erl: Likewise * src/ejabberd_auth.erl: Likewise * src/ejabberd_auth_anonymous.erl: Likewise * src/cyrsasl.erl: Likewise * src/cyrsasl_anonymous.erl: Likewise * src/ejabberd.cfg.example: Likewise
* src/expat_erl.c: Use binaries for CDATA * src/xml.erl: Likewise
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* src/Makefile.in: Added an option to compile ejabberd with debug print-out (make ejabberd_debug=true). * src/ejabberd_c2s.erl: Added a new debug printout: We can now print the XML packets send by the server.
* src/ejabberd_c2s.erl: Bugfix
* src/ejabberd_c2s.erl: Enable zlib only over TCP
* src/ejabberd_c2s.erl: Bugfix (thanks to Sergei Golovan)
* src/mod_privacy.erl: Fixed privacy list pushing (thanks to Sergei Golovan) * src/ejabberd_c2s.erl: Likewise
* src/ejabberd_sm.erl: Remove unnecessary use delete_object, which can, in some context break indexes, when used on non bag table.
* src/ejabberd_c2s.erl: Bugfix
* src/xml_stream.erl: Added catching of gen_fsm:send_event errors
* src/mod_muc/mod_muc_room.erl: Bugfix
* src/ejabberd_c2s.erl: Bugfix
* src/ejabberd_logger_h.erl: reopen-log function now rename the log file if it has not been already renamed by a logrotate process.  This change allow ejabberd administrators to rotate log files on Windows (EJAB-52).
* src/web/ejabberd_web_admin.erl: Added a interface for node updating * src/ejabberd_update.erl: Added function update_info/0
* src/web/ejabberd_web_admin.erl: Added a interface for node updating * src/ejabberd_update.erl: Added function update_info/0
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* src/ejabberd_ctl.erl: Added API for virtual host specific commands, removed registered-users command * src/ejabberd_auth.erl: Added processing of registered-users command * src/ejabberd_auth_internal.erl: Likewise * src/ejabberd_auth_ldap.erl: Likewise * src/ejabberd_auth_odbc.erl: Likewise * src/ejabberd_app.erl: Added inititalization of ejabberd_ctl * src/ejabberd_sm.erl: Minor update
* src/mod_irc/mod_irc_connection.erl: Added handling for "%", "&" and "~" prefixes in IRC nicknames (thanks to Vladimir Kulev)
* src/mod_irc/mod_irc_connection.erl: Added /msg and /ctcp commands, improved handling of channel topic and kick, mirc colors now filtered, other minor improvements (thanks to Oleg V. Motienko)
* src/mod_service_log.erl: Bugfix (thanks to Badlop)
* src/ejabberd_ctl.erl: Partially rewritten * src/ejabberd_ctl.hrl: Definitions of exit status codes moved here
* src/ejabberd_ctl.erl: Partially rewritten
* src/mod_roster_odbc.erl: Bugfix
* src/mod_roster_odbc.erl: Bugfix
* src/odbc/ejabberd_odbc.erl: Reconnect on ODBC connection closing
* src/ejabberd_auth.erl: plugin authentication modules can now be used in the configuration file: {auth_method, module} will now use the module ejabberd_auth_module.erl for authentication. (EJAB-45)
* src/mod_muc/mod_muc_room.erl: Kick non-members when room reconfigured to be member-only or when membership is revoked in member-only room, allowed "true" and "false" in x:data forms (thanks to Sergei Golovan)
* src/ejabberd_auth_odbc.erl: Added ejabberd_odbc_sup to ejabberd supervision tree
* src/web/ejabberd_http.erl: Authentication check moved to ejabberd_web.erl * src/web/ejabberd_web.erl: Likewise
--prefix option can now override the default install dir (EJAB-43)
* src/mod_pubsub/mod_pubsub.erl: Updated to use gen_server behaviour and ejabberd supervision tree
* src/odbc/pg.sql: Fixed syntax error
* src/ejabberd_update.erl: Support for run-time ejabberd updating (not completed) * src/ejabberd_c2s.erl: Added 'update_info' module attribute for testing ejabberd_update
* src/ejabberd_update.erl: Support for run-time ejabberd updating (not completed) * src/ejabberd_c2s.erl: Added 'update_info' module attribute for testing ejabberd_update
* src/ejabberd_c2s.erl: Remove top-level xmlns from incoming stanzas * src/ejabberd_s2s_in.erl: Likewise * src/ejabberd_service.erl: Likewise
* src/ejabberd_c2s.erl: Better error handling for stream compression support (thanks to Sergei Golovan)
* src/mod_roster_odbc.erl: Bugfix
Fixed ChangeLog
* src/ejabberd_sm.erl: Partially rewritten to work more efficiently and avoid race conditions * src/ejabberd_c2s.erl: Likewise
* src/ejabberd_receiver.erl: Added new debugging trace: It is now possible to dump the XML stream received from a client (usefull for client debugging).
* src/aclocal.m4: Updated for zlib support * src/configure.ac: Likewise
* src/odbc/ejabberd_odbc.erl: Added a way to retry database connection connect for 5 minutes when the connection is lost. No further connection is retry after 5 minutes (EJAB-22 & EJAB-25) * src/odbc/ejabberd_odbc_sup.erl: likewise
* src/odbc/ejabberd_odbc.erl: underscore and percent are now only escaped in like queries. MySQL where not escaping those escaped characters in other context (EJAB-24) * src/mod_vcard_odbc.erl: likewise. * src/odbc/mysql.sql: Fixed MySQL database creation script: Was not properly working with all MySQL version.
* src/ejabberd_service.erl: Bugfix
Native MySQL support. The Erlang MySQL module is needed: http://support.process-one.net/doc/display/CONTRIBS/Yxa
* src/ejabberd_logger_h.erl: Speed optimizations
Added missing file.
* src/Makefile.in: Clean results of ASN.1 compiler (thanks to Sergei Golovan)
* src/win32/ejabberd.nsh: Removed (thanks to Sergei Golovan)
* src/Makefile.win32: Updated (thanks to Sergei Golovan) * src/configure.erl: Likewise * src/win32/CheckReqs.ini: Likewise * src/win32/CheckReqs1.ini: Likewise * src/win32/CheckReqs1H.ini: Likewise * src/win32/ejabberd.nsh: Likewise * src/win32/ejabberd.nsi: Likewise
* src/odbc/ejabberd_odbc.erl: Added error message on ODBC connection to help ODBC configuration troubleshooting.
* src/odbc/ejabberd_odbc.erl: Bugfix
* src/odbc/mysql.sql: Database description for MySQL Database 4.1 (Max version, with Innodb) * src/ejabberd_auth_odbc.erl: MySQL ODBC support. * src/mod_offline_odbc.erl: likewise * src/mod_vcard_odbc.erl: likewsie * src/mod_roster_odbc.erl: likewise * src/odbc/ejabberd_odbc.erl: likewise * src/mod_last_odbc.erl: likewise
Documentation update, code clean-up and Makefile improvement.
* doc/features.tex: Added feature sheet (Thanks to Sander Devrieze)
Documentation updates for actual ejabberd 1.0.0 release.
* src/mod_irc/iconv_erl.c: Bugfix (thanks to Tomas Janousek)
* src/win32/ejabberd.nsi: Updated (thanks to Maxim Ryazanov)
* src/win32/ejabberd.nsi: Updated (thanks to Sergei Golovan)
* src/ejabberd.hrl: Updated version * src/ejabberd.app: Likewise * doc/version.tex: Likewise
Fixed typos
fixed typos:
* doc/release_notes_1.0.0.txt: Added preliminary version of ejabberd 1.0.0 release notes. * doc/guide.html: Generated the updated HTML version of the documentation.
Fixed version number
* src/mod_roster.erl: Workaround for gateway subscriptions now should be enabled with --enable-roster-gateway-workaround * src/mod_roster_odbc.erl: Likewise * src/configure.ac: Likewise * src/Makefile.in: Likewise
* src/ejabberd_service.erl: Added logging of termination
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* contribs/contrib/extract_translations/prepare-translation.sh: Small improvements. * src/msgs/fr.msg: Updated
* src/msgs/pl.msg: Fixed syntax error
* src/mod_offline.erl: Don't store headline messages * src/mod_offline_odbc.erl: Likewise
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* src/ejabberd.cfg.example: Updated
* src/msgs/pt-br.msg: Updated (thanks to Victor Hugo dos Santos)
doc/yozhikheader.png: Added feature sheet header (Thanks to Sander Devrieze)
Documentation update
* src/web/ejabberd_http.erl: Now web interface is compliant to XHTML 1.0 Transitional (thanks to Sander Devrieze) * src/web/ejabberd_web_admin.erl: Likewise
* doc/Makefile: Now really added
* src/mod_roster.erl: The "id" attribute of roster push packet was missed (thanks to Maxim Ryazanov) * src/mod_roster_odbc.erl: Likewise
* src/web/ejabberd_web_admin.erl: Fixed encoding of user names in URLs
* src/ejabberd_c2s.erl: Send stream error when connection is replaced (thanks to Maxim Ryazanov)
Added prepare-translation.sh wrapper to extract_translation.erl (Thanks to Badlop)
Added wrapper to extract_translation.erl
* src/mod_vcard.erl: Fixed xmlns in disco items replies (thanks to Maxim Ryazanov) * src/mod_vcard_ldap.erl: Likewise * src/mod_vcard_odbc.erl: Likewise
* src/tls/Makefile.in: Use CPPFLAGS (thanks to Magnus Henoch)
* src/ejabberd_s2s_in.erl: Support for dNSName certificate field and DNS name matching * src/XmppAddr.asn1: Moved here from src/tls/XmppAddr.asn1 * src/tls/XmppAddr.asn1: Likewise * src/Makefile.in: Updated * src/tls/Makefile.in: Updated
* src/odbc/ejabberd_odbc.erl: Support for mnesia-like transaction interface * src/mod_roster_odbc.erl: Updated to use ejabberd_odbc:sql_transaction/2
* src/ejabberd_s2s_out.erl: Fixed invalid behaviour upon connecting to host with invalid domain * src/ejabberd_s2s.erl: Likewise
* src/ejabberd_config.erl: Support for per host certificates * src/ejabberd_c2s.erl: Likewise * src/ejabberd_s2s_out.erl: Likewise * src/ejabberd.cfg.example: Updated
* src/mod_disco.erl: Fixed extra_domains option processing
* src/ejabberd_s2s_out.erl: Support for STARTTLS+SASL EXTERNAL * src/ejabberd_s2s_in.erl: Likewise * src/tls/tls.erl: Likewise * src/tls/tls_drv.c: Likewise * src/tls/XmppAddr.asn1: Likewise * src/tls/Makefile.in: Likewise
* src/mod_disco.erl: Minor fix
* src/mod_roster_odbc.erl: Bugfix
* src/tls/tls.erl: Accept {error,already_loaded} from erl_ddll:load_driver/2 * src/stringprep/stringprep.erl: Likewise * src/mod_irc/iconv.erl: Likewise * src/ejabberd_app.erl: Likewise
* src/tls/tls_drv.c: Support for "connect" method * src/tls/tls.erl: Likewise
* src/ejabberd_app.erl: Try to load tls_drv at startup to avoid unloading of libssl (thanks to Brian Campbell)
* src/odbc/pg.sql: Added spool.seq field for offline messages sorting * src/mod_offline_odbc.erl: Likewise
* src/mod_roster_odbc.erl: Bugfix
* src/gen_iq_handler.erl: Bugfix
* src/ejabberd_auth_odbc.erl: Minor fix
* src/mod_roster_odbc.erl: Bugfix
* src/ejabberd_c2s.erl: Updated to work correctly with mod_vcard_odbc
* src/odbc/ejabberd_odbc.erl: Experimental support for pgsql library
* src/mod_roster_odbc.erl: Bugfix
* src/mod_roster_odbc.erl: Bugfix
Fixed mod_vcard_odbc.erl SVN properties
* src/ejd2odbc.erl: Added vCard converter
* src/web/ejabberd_web_admin.erl: Updated API for better integration with J-EAI web interface
* src/jlib.erl: Bugfix
* src/ejd2odbc.erl: Updated
* src/ejd2odbc.erl: Updated
* src/mod_disco.erl: Disco publishing support (thanks to Magnus Henoch)
* src/mod_disco.erl: Functions register_sm_feature and register_sm_node replaced with hooks (thanks to Sergei Golovan) * src/mod_vcard.erl: * src/mod_vcard_ldap.erl:
* src/ejd2odbc.erl: Converter from mnesia to ODBC
* src/mod_vcard_ldap.erl: Bugfix
* src/cyrsasl_digest.erl: Fixed challenge/response parsing (thanks to Martin Pokorny)
* src/msgs/pl.msg: Updated (thanks to Andrew Smyk)
* src/web/ejabberd_web_admin.erl: Bugfix (thanks to Badlop)
* src/win32/inetrc: Added (thanks to Sergei Golovan)
Release 0.9.8
Final release note after many fixes from the ejabberd Chatroom and StPeter
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
Wrong Process-one URL
More fixes from Badlop
Fixed some english mistakes.
* src/msgs/es.msg: Updated (thanks to Badlop)
* src/msgs/nl.msg: Updated (thanks to Sander Devrieze)
Added some references at the end of the release notes (migration, tutorial and feature sheet)
Updated to mention, that the 1.0 release is close and that the ejabberd Linux installer include ASN1 modules.
Added release notes for ejabberd 0.9.8 release.
Updated French translation
Updated French translation
* src/ejabberd_config.erl: Added host_config option * doc/guide.tex: Updated
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* src/msgs/de.msg: Updated (thanks to Torsten Werner)
* src/web/ejabberd_web_admin.erl: Fixed CSS style sheet to be standards compliant (thanks to Sander Devrieze)
* src/web/ejabberd_web_admin.erl: Added "Virtual Hosts" page
Renamed route_packet hook to filter_packet
* src/ejabberd_router.erl: Added route_packet hook
* src/jd2ejd.erl: Updated to work with ODBC
* src/mod_pubsub/mod_pubsub.erl: Updated to J-EAI version
* src/acl.erl: Slightly changed "access" option processing
* src/mod_disco.erl: Fixed processing of host features and extra_domains option
* src/ejabberd_c2s.erl: Processing of jabber:iq:register totally moved to mod_register.erl (thanks to Sergei Golovan) * src/mod_register.erl: Likewise
* src/mod_register.erl: Bugfix
* src/ejabberd_app.erl: Bugfix
* src/ejabberd_config.erl: Bugfix
* src/mod_offline.erl: Bugfix
* (all): Enhanced virtual hosting support
* src/web/ejabberd_web_admin.erl: Bugfix
Added 0.9.1 release note that was in the release ejabberd-0.9.1 version.
* src/msgs/pt-br.msg: New Brazilian Portuguese translation (thanks to Felipe Brito Vasconcellos)
Added text/html mime type to dev.html and guide.html
Testing SVN/DAV access
testing webdav
* src/msgs/fr.msg: Updated (thanks to Mickael Remond)
* src/odbc/Makefile.in: Added
* src/mod_last_odbc.erl: Added store_last_info/4 function (thanks to Sergei Golovan) * src/mod_last.erl: Likewise
Updated French translation
* doc/guide.tex: Updated (thanks to Sergei Golovan) * doc/dev.tex: Likewise * doc/disco.png: Likewise * doc/discorus.png: Likewise * doc/webadmin.png: Likewise * doc/webadminru.png: Likewise
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* src/web/ejabberd_web_admin.erl: Updated CSS, added modules management (thanks to Sergei Golovan)
* src/web/ejabberd_http.erl: "Connection:" header value now matched case-insensitive, and returned to client, replaced duplicate is_space($\r) with is_space($\t) (thanks to Maxim Ryazanov)
* src/mod_pubsub/mod_pubsub.erl: Fixed XML element name for pubsub#event namespace (thanks to Magnus Henoch)
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan) * src/msgs/uk.msg: Likewise
* src/mod_pubsub/mod_pubsub.erl: Now possible to subscribe to a pubsub node with a JID that includes a resource (thanks to Martijn van Beers)
* src/mod_irc/mod_irc_connection.erl: Added support for WHOIS requests and reply to USERINFO (thanks to Oleg V. Motienko)
* src/stringprep/stringprep_drv.c: Bugfix
* src/win32/ejabberd.cfg: Updated (thanks to Sergei Golovan)
* src/mod_muc/mod_muc_room.erl: Fixed bug with storing affiliations of invited users in members-only room (thanks to Sergei Golovan)
* src/ejabberd_c2s.erl: Fixed starttls_required behaviour for legacy connections (thanks to Brian Campbell)
* src/web/ejabberd_web_admin.erl: Images now specified via CSS, design slightly updated, added last activity statistics (thanks to Sergei Golovan)
* src/stringprep/stringprep_drv.c: Added check for bidi
* src/stringprep/uni_norm.c: Regenerated with Unicode 3.2 tables as required by RFC3454
ChangeLog updated
Adding missing 0.9 fields in fr.msg
* src/mod_muc/mod_muc_room.erl: Store ban reasons for outcast items, updated affiliation matching rules to latest JEP-0045
* src/mod_muc/mod_muc_room.erl: Updated changing roles and affiliations tables to latest JEP-0045
* src/msgs/sw.msg: Renamed to sv.msg * src/msgs/sv.msg: Likewise
src/msgs/fr.msg: Updated
* src/msgs/pl.msg: Updated (thanks to Andrew Smyk)
* contrib/extract_translations/README: Better phrasing (thanks to Sergei Golovan)
* src/msgs/sw.msg: New Swedish translation (thanks to (Magnus Henoch)
* src/ejabberd_auth_ldap.erl: Added listing of users support
* src/ejabberd_ctl.erl: Better spelling, now prints full file paths, fixed checking of mnesia:install_fallback result, now "dump" command dumps only persistent tables
* contrib/extract_translations/: A tool for extracting of translation strings from ejabberd code (thanks to Sergei Golovan)
* src/mod_vcard_ldap.erl: Bugfix (thanks to Mickael Remond)
* src/web/ejabberd_web_admin.erl: Added translation to submit button and "shared roster groups" header (thanks to iceburn and Sergei Golovan)
* src/tls/tls_drv.c: Reverted previous patch
* doc/guide.tex: Added mod_shared_roster documentation
Changed version ID to version 0.9
* src/jd2ejd.erl: Bugfix
* src/ejabberd_auth.erl: Added check for domain of registered user
* src/mod_disco.erl: Fixed domain listing when one virtual host is a subdomain of another
Fixes a bug on the web interface: On user creation screen the user creation was using the function try_register/2 instead of the new one try_register/3; The link to the message queue were also missing the server.
Backup recommandation
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* src/web/ejabberd_web_admin.erl: Added link to shared roster page
Updated release note: Pgsql support is experimental
* src/odbc/ejabberd_odbc.erl: ODBC connection string can be specified via odbc_server option now * src/ejabberd.cfg.example: Added ODBC usage example
Fixed date in documentation. Preparing release note for ejabberd 0.9
* doc/guide.tex: Updated
* src/msgs/pl.msg: New Polish translation (thanks to Andrew Smyk)
Applied VH patch
Cleanup
Merged Process One contribution (Virtual Hosting)
Merged the Process One contributions ( Virtual Hosting )
* src/ejabberd_c2s.erl: Send new id for each new stream inside one session (thanks to Maxim Ryazanov)
* src/ejabberd_c2s.erl: Send new id for each new stream inside one session (thanks to Maxim Ryazanov)
* examples/transport-configs/configs/msn-transport.xml: Fixed typo (thanks to Sander Devrieze)
* examples/transport-configs/: Updated (thanks to Sander Devrieze)
* examples/transport-configs/: Updated (thanks to Sander Devrieze)
* src/ejabberd_ctl.erl: Bugfix
* src/mod_muc/mod_muc_room.erl: Bugfix
* src/ejabberd_sm.erl: Bugfix
* src/ejabberd_router.erl: Bugfix
* src/mod_irc/mod_irc_connection.erl: Added filtering of quit status
* src/odbc/ejabberd_odbc.erl: Load-balance ODBC requests between several connections
* src/mod_roster_odbc.erl: Roster support via ODBC (not completed)
* src/ejabberd_sm.erl: Updated missed message passing from previous patch
* src/odbc/pg.sql: DB creation script for postgres
* src/mod_stats.erl: Minor optimizations
* src/ejabberd_sm.erl: Added unset_presence_hook * src/mod_last.erl: Use unset_presence_hook instead of direct call
* src/web/ejabberd_web_admin.erl: Changed type of password field to "password"
* src/ejabberd_listener.erl: Enable keepalive option
* src/expat_erl.c: Now uses port control instead of port output * src/xml_stream.erl: Likewise
* src/mod_vcard.erl: Added missed index
* src/aclocal.m4: Fixed headers detecting in AM_WITH_OPENSSL (thanks to Leif Johansson)
* examples/transport-configs/: Transport config examples (thanks to Sander Devrieze)
* src/msgs/de.msg: German translation (thanks to Marina Hahn)
* src/win32/: Updated (thanks to Sergei Golovan)
* src/tls/Makefile.win32: Added (thanks to Sergei Golovan)
* src/msgs/uk.msg: Updated (thanks to Sergei Golovan)
* src/msgs/uk.msg: Updated (thanks to Sergei Golovan)
*** empty log message ***
* src/msgs/nl.msg: Updated (thanks to Sander Devrieze)
* src/msgs/ua.msg: Updated (thanks to Sergei Golovan)
* src/mod_muc/mod_muc_room.erl: Fixed room destroying
* doc/guide.tex: Updated
* src/ejabberd_s2s_out.erl: Fixed socket closing condition
* src/web/ejabberd_http_poll.erl: Properly handle bad requests
* src/web/ejabberd_http.erl: Fixed processing of POST body for HTTP Polling
* src/ejabberd_listener.erl: Check result of controlling_process
* src/web/ejabberd_http.erl: Bugfix
* src/Makefile.in: Updated (thanks to Badlop)
* src/aclocal.m4: Better expat and openssl detection (thanks to Anton Vanin)
* src/jlib.hrl: Added namespace for iq-register stream feature * src/ejabberd_c2s.erl: Send iq-register feature
* src/mod_muc/mod_muc_room.erl: Send password in room invitation (thanks to Sergei Golovan)
* tools/ejabberdctl: Added call to "exec" (thanks to Sergei Golovan)
* doc/guide.tex: Fix (thanks to Sander Devrieze)
* src/xml_stream.erl: Few optimizations
* src/mod_service_log.erl: Support for logging of user packets via external service (e.g. bandersnatch) * doc/guide.tex: Updated
* src/mod_offline.erl: Use offline_subscription_hook
* src/mod_offline.erl: Added entire table locking on large message queue
* src/msgs/nl.msg: Updated (thanks to Sander Devrieze)
* src/web/ejabberd_http_poll.erl: Fixed sending of Set-Cookie header
* src/ejabberd_c2s.erl: Bugfix in resend_offline_messages/1
* src/ejabberd_c2s.erl: Use resend_offline_messages_hook to fetch offline messages * src/mod_offline.erl: Likewise
* src/aclocal.m4: Updated to check for openssl library (thanks to AV) * src/configure.ac: Likewise * src/configure: Likewise * src/Makefile.in: Likewise * src/tls/Makefile.in: Likewise
* src/web/ejabberd_web_admin.erl: Added user's roster page
* src/tls/tls.erl: Added recv_data/2 function
* examples/extauth/check_pass_null.pl: A reference "null" implementation of external authentification script (thanks to Leif Johansson)
* src/tls/tls_drv.c: Added freeing of SSL stuff
* src/tls/tls.erl: Updated
*** empty log message ***
* src/tls/: Library for TLS support (not completed)
* src/eldap/eldap.erl: Bugfix
* src/web/ejabberd_web_admin.erl: Better i18n support (thanks to Sergei Golovan)
* src/mod_last.erl: Supprot for storing status from latest unavailable presence (thanks to Sergei Golovan) * src/ejabberd_sm.erl: Likewise * src/ejabberd_c2s.erl: Likewise
* src/mod_roster.erl: Removed superfluous include_lib line
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* src/Makefile.win32: Updated (thanks to Sergei Golovan)
* src/ejabberd_auth.erl: Minor fix
* src/web/ejabberd_web_admin.erl: Added configuration of listened ports * src/ejabberd_listener.erl: Added API for configuration of port listeners
* src/msgs/nl.msg: Dutch translation (thanks to Sander Devrieze)
* src/web/ejabberd_http.erl: Added options for enabling HTTP polling and admin interface * src/web/ejabberd_web.erl: Likewise * src/ejabberd.cfg.example: Updated
* src/mod_muc/mod_muc.erl: Added access rules for using serveice and creating rooms (thanks to Sergei Golovan)
* src/web/ejabberd_web_admin.erl: Updated
* src/web/ejabberd_web_admin.erl: Updated
* src/web/ejabberd_web_admin.erl: Updated
* doc/guide.tex: Updated
* src/web/ejabberd_web_admin.erl: Updated (thanks to Andrey Zamaraev)
* src/ejabberd_ctl.erl: Added command for listing all registered users
* src/web/ejabberd_web_admin.erl: Updated
* src/web/ejabberd_http.erl: 'Accept-Language' header support * src/web/ejabberd_web_admin.erl: Likewise * src/msgs/ru.msg: Updated
* src/translate.erl: Search translations directory in priv_dir instead of lib_dir (thanks to Sergei Golovan)
* src/web/ejabberd_web_admin.erl: Better design for administration interface (not completed) (thanks to Andrey Zamaraev) * src/web/ejabberd_http.erl: Updated * src/web/ejabberd_web.erl: Likewise
* src/web/ejabberd_http.erl: Increased receive buffer
* src/ejabberd.erl: Added searching of files in code:priv_lib (thanks to Sergei Golovan) * src/translate.erl: Likewise
* src/idna.erl: Support for IDNA (RFC3490) * src/ejabberd_s2s_out.erl: Likewise
* (all): Updated win32 stuff (thanks to Sergei Golovan)
* doc/guide.tex: Updated
* src/mod_roster.erl: Bugfix
* src/ejabberd_s2s.erl: More verbose error handling
* src/web/ejabberd_web.erl: Minor update
* src/web/ejabberd_web.erl: Added interface for users listsing and statistics
* src/web/ejabberd_web.erl: New interface for ACLs editing
* src/web/ejabberd_web.erl: Experiments with web-interface
* src/configure.ac: Updated * src/Makefile.in: Likewise
* src/web/ejabberd_http.erl: Removed debugging output
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan)
* src/web/ejabberd_http_poll.erl: Completed
* src/web/: Support for HTTP Polling (JEP-0025) (almost complete)
* src/web/: Updated
* src/web/: Minor update
* src/web/: Small HTTP server and admin web-interface to ejabberd (not completed yet) * src/ejabberd_sup.erl: Added HTTP processes supervisor
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan)
* src/mod_muc/mod_muc_room.erl: Support for history management (thanks to Sergei Golovan)
* src/ejabberd_c2s.erl: Added <session/> to stream features
* src/msgs/ru.msg: Updated (thanks to Sergei Golovan)
* src/ejabberd_ctl.erl: Added command for log reopening
* src/ejabberd_ctl.erl: Added commands for backup processing
* src/mod_muc/mod_muc_room.erl: Bugfix, updated error codes (thanks to Sergei Golovan)
* src/ejabberd_c2s.erl: Fixed bind namespace
* src/ejabberd_router.erl: Added monitoring of processess that serve domains
* src/ejabberd_app.erl: Bugfix
* src/ejabberd_router.erl (do_route/3): Slightly changed behaviour
* src/ejabberd_sm.erl (do_route/3): Minor fix
* src/ejabberd_app.erl: Now possible to specify path to log file via "EJABBERD_LOG_PATH" environment variable
* src/ejabberd_app.erl: Now possible to specify path to log file via "EJABBERD_LOG_PATH" environment variable
* src/ejabberd_app.erl: Now possible to specify path to log file via "EJABBERD_LOG_PATH" environment variable
* src/ejabberd_app.erl: Now possible to specify path to log file via "EJABBERD_LOG_PATH" environment variable
* src/ejabberd_c2s.erl: Presence probe now sended from full JID
* src/ejabberd_c2s.erl: Bugfix
* src/mod_roster.erl: Added workaround for legacy gateways (passing of "subscribed" presence)
* src/jlib.hrl: Added declaration of "iq" record * (all): Updated to use "iq" record
* src/ejabberd_local.erl: Replaced register_local_route to register_route * src/ejabberd_service.erl: Likewise * src/mod_echo.erl: Likewise * src/mod_vcard.erl: Likewise
* src/ejabberd_s2s.erl: Partially rewrited
* src/ejabberd_s2s_out.erl: Bugfix
* src/mod_roster.erl: Updated subscription handling to latest XMPP-IM draft
* src/ejabberd_s2s_in.erl: Changed timeout processing, bugfix
* src/ejabberd_c2s.erl: Bugfix in processing of connection replacement
* src/ejabberd_c2s.erl: Added workaround for some Java clients
* examples/mtr/ejabberd.cfg: Updatted (thanks to Marshall T. Rose)
* src/ejabberd_c2s.erl: Fixed processing of presence probe from client
* src/cyrsasl_digest.erl: Bugfix (thanks to Sergei Golovan)
* examples/mtr/ejabberd: Updated (thanks to Marshall T. Rose)
* doc/dev.tex: Developers documentation (not completed)
* src/ejabberd.cfg.example: Updated
* src/mod_muc/mod_muc_room.erl: Bugfix
* src/ejabberd_sm.erl: Bugfix for previous resource handling change
* src/cyrsasl.erl: Updated SASL authentification * src/ejabberd_c2s.erl: Likewise
* src/mod_configure2.erl: Added reporting of outgoing S2S connections number
* src/mod_configure2.erl: Yet another configure interface (not completed yet)
* src/mod_last.erl: Added remove_user/1 function
* src/mod_irc/mod_irc_connection.erl: Updated to work more correctly with latest jlib
* src/ejabberd_c2s.erl: More strong check for authentificated JID
* src/ejabberd_listener.erl: Fixed starting of SSL connection
* src/ejabberd_listener.erl: Added handling of accept errors, added timeout value to ssl:accept
* src/ejabberd_sm.erl: Bugfix
* src/ejabberd_auth.erl: Minor change in check_password/4
* src/ejabberd_logger_h.erl: Added support for log rotation
* src/mod_offline.erl: Added function remove_old_messages/1
* src/ejabberd_logger_h.erl: New error_logger handler * src/ejabberd_app.erl: Now uses ejabberd_logger_h.erl
* src/Makefile.in: Added install rule
* src/mod_vcard.erl: Added checks for stringprep results
* doc/guide.tex: Fixed typo
* src/ejabberd_local.erl: Added support for announce/online messages
* src/ejabberd_service.erl: Added supports for multiple hosts per service
* src/configure.ac: Build system now done using autoconf (thanks to Balabanov Dmitry) * src/aclocal.m4: Likewise * src/**/Makefile.in: Likewise
* src/mod_configure.erl: Fixed some error codes
* src/ejabberd_local.erl: Bugfix
* doc/guide.tex: Updated
* doc/guide.tex: Updated
* src/stringprep/stringprep_drv.c: Removed needless iconv.h include
* src/ejabberd_c2s.erl: Added authentification logging
* src/ejabberd_c2s.erl: Added support for "jid-malformed" error
* (all): Changed JID storage format, added support for stringprep
*** empty log message ***
* src/stringprep/stringprep_drv.c: Added support for nameprep, nodeprep and resourceprep * src/stringprep/stringprep.erl: Likewise
* src/stringprep/: Support for stringprep (not completed yet)
* src/mod_muc/mod_muc_room.erl: Debug output switched off
* src/mod_disco.erl: Now only admin can discovery some nodes, fixed "node" attribute in replies
* examples/mtr/ejabberd.cfg: Updated (thanks to Marshall T. Rose) * examples/mtr/ejabberd: Likewise
* examples/mtr/ejabberd.cfg: Updated (thanks to Marshall T. Rose)
* examples/mtr/*: Example config and scripts for NetBSD (thanks to Marshall T. Rose)
* src/ejabberd_s2s_in.erl: Fixed "id" attribute processing * src/ejabberd_s2s_out.erl: Likewise
* src/ejabberd_s2s_in.erl: Temporary hack for "id" attribute processing * src/ejabberd_s2s_out.erl: Likewise
* src/ejabberd_listener.erl: Fixed SSL options
* src/ejabberd_c2s.erl: Support for filtering of incoming messages and IQs, presence filtering will be after some xmpp-im clarifications
* src/mod_muc/mod_muc.erl: Fixed handling of room names with uppercase letters
* src/mod_irc/mod_irc_connection.erl: Added handling for jabber:iq:version and jabber:iq:time requests, participant address now added to presence status
* src/mod_privacy.erl: Privacy rules support * src/ejabberd_c2s.erl: Likewise * src/mod_roster.erl: Likewise
* src/mod_privacy.erl: Privacy rules support * src/ejabberd_c2s.erl: Likewise * src/mod_roster.erl: Likewise
* src/mod_pubsub/mod_pubsub.erl (create_new_node): Bugfix
* src/mod_vcard.erl: Bugfix
* (all): Reorganized supervision tree
* src/ejabberd_s2s_out.erl: Close connection after key verification
* doc/guide.tex: Updated (thanks to Sergei Golovan)
* src/mod_pubsub/mod_pubsub.erl: Added suport for meta-node "pubsub/nodes"
* src/mod_pubsub/mod_pubsub.erl: Most of functions now works
* src/mod_pubsub/mod_pubsub.erl: Pub/sub implementation (not completed yet)
* src/mod_irc/iconv_erl.c (iconv_erl_control): Bugfix
* src/mod_muc/mod_muc_room.erl: Fixed room destroying * src/mod_muc/mod_muc.erl: Likewise
* src/jlib.hrl: Error stanzas updated to confirm latest xmpp-core
* src/ejabberd_c2s.erl: Returned stream restarting
* src/ejabberd_c2s.erl: Removed stream restarting
* src/ejabberd_c2s.erl: SASL support updated to xmpp-core-13
* src/msgs/fr.msg: New french translation (thanks to Vincent Ricard)
* src/jlib.hrl: Updated SASL namespace
* src/ejabberd_service.erl: Proper handling of bad XML
* src/mod_muc/mod_muc.erl: Now body of message from admin to MUC service is broadcasted to all conferences * src/mod_muc/mod_muc_room.erl: Likewise
* src/ejabberd_s2s.erl: Added error catching for do_route/3 * src/ejabberd_local.erl: Likewise for do_route/4
* src/mod_muc/mod_muc_room.erl: Remove user from room on receiving of message or presence error from him
* src/ejabberd_s2s_out.erl: Fixed error replies, added timeouts * src/ejabberd_s2s_in.erl: Likewise
* src/ejabberd_local.erl: Updated missed errors to new style * src/mod_register.erl: Likewise * src/mod_version.erl: Likewise * src/mod_time.erl: Likewise * src/mod_stats.erl: Likewise * src/mod_register.erl: Likewise * src/mod_private.erl: Likewise * src/mod_configure.erl: Likewise * src/ejabberd_sm.erl: Likewise * src/ejabberd_service.erl: Likewise * src/ejabberd_c2s.erl: Likewise * src/ejabberd_s2s_out.erl: Likewise * src/mod_vcard.erl: Likewise * src/mod_roster.erl: Likewise
* src/mod_muc/mod_muc.erl: Denied using of empty nick
* src/mod_muc/mod_muc.erl: Return bad-request if no x:data form submited with nick registration
* src/mod_muc/mod_muc_room.erl: Don't check permissions on disco info query processing
* src/ejabberd_c2s.erl: Workaround to make SSL work properly
* src/mod_irc/mod_irc_connection.erl: Fixed URL to ejabberd
* src/mod_muc/mod_muc.erl: Support for nick registration
* src/ejabberd_c2s.erl: Some fixes in work with socket
* src/mod_muc/mod_muc_room.erl: Support for members-only conferences, invitations.  Bugfix in affiliation change processing
* src/jlib.hrl: Added jaber:iq:auth:error namespace and appropriate errors * src/ejabberd_c2s.erl: Use auth:error in appropriate places
* src/mod_muc/mod_muc_room.erl: Added support for grant/revoke administrative/owner priveledges, fixed work with affiliations
* src/ejabberd.cfg: Updated
* src/ejabberd_s2s_in.erl: Bugfix
* src/mod_muc/: Small fixes in discovering
* src/mod_muc/: Support for discovering service and more configuration options
* src/mod_muc/: Support for more configuration options and persistent rooms
* src/mod_muc/: MUC support (not completed yet)
* src/xml_stream.erl: Removed "link" which cause not improper closing of xml connections
*** empty log message ***
* src/ejabberd_s2s_out.erl: Fixed ports leak * src/ejabberd_listener.erl: Likewise
* src/cyrsasl*.erl: SASL support (currently support only PLAIN mechanism) * src/ejabberd_c2s.erl: Likewise
* src/ejabberd_c2s.erl: More correct stream closing
* src/mod_irc/mod_irc_connection.erl: Support for topic changes
* src/mod_irc/mod_irc_connection.erl: /kick support
* src/mod_irc/: Added configuration interface
* src/mod_configure.erl: Backup management support * src/mod_disco.erl: Likewise
* src/mod_offline.erl: Now possible to unload this module * src/ejabberd_sm.erl: Added checks to work correctly when mod_offline not loaded * src/ejabberd_c2s.erl: Likewise
* src/mod_roster.erl: Fixed bug with handling of roster set stanzas that contains CDATA
* src/mod_irc/: Added support for private chats, nicks changes and error handling
*** empty log message ***
* src/mod_irc/: Still not completed...
* src/mod_irc/: Still not completed...
* src/mod_irc/: New IRC transport (not completed yet)
* src/ejabberd_service.erl: Answer "Bad Request" on unknown tags
* src/ejabberd_c2s.erl: Bugfix: close socket when stream is closed
* (all): Version 0.1-alpha released
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
*** empty log message ***
Initial revision
New repository initialized by cvs2svn.
